# Comparing `tmp/Simba-UW-tf-dev-1.91.5.tar.gz` & `tmp/Simba-UW-tf-dev-1.91.6.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "dist/Simba-UW-tf-dev-1.91.5.tar", last modified: Mon Apr 29 19:17:24 2024, max compression
+gzip compressed data, was "dist/Simba-UW-tf-dev-1.91.6.tar", last modified: Mon May  6 18:51:26 2024, max compression
```

## Comparing `Simba-UW-tf-dev-1.91.5.tar` & `Simba-UW-tf-dev-1.91.6.tar`

### file list

```diff
@@ -1,650 +1,664 @@
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/
--rw-r--r--   0 simon      (501) staff       (20)     2797 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/PKG-INFO
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/ui/
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-03-28 13:50:53.000000 Simba-UW-tf-dev-1.91.5/simba/ui/.DS_Store
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/
--rw-r--r--   0 simon      (501) staff       (20)    11467 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/mutual_exclusivity_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     4070 2024-03-29 20:30:28.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/movement_analysis_time_bins_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     1676 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/csv_2_parquet_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     5883 2024-04-22 13:59:07.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/quick_path_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     2873 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/batch_preprocess_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     8835 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/heatmap_location_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     9578 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_probability_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     3456 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/movement_analysis_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     4631 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/set_machine_model_parameters_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)    11362 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)    25598 2024-04-17 23:32:48.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/path_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     1184 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/remove_roi_features_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     6692 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/targeted_annotation_clips_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     3340 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/smoothing_interpolation_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     2174 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/roi_size_standardizer_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     6997 2024-04-11 20:25:55.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/visualize_pose_in_dir_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     4682 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/roi_analysis_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     7898 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/outlier_settings_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     9366 2024-04-29 16:29:26.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/gantt_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     5830 2024-04-26 18:09:47.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_validation_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     8529 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/severity_analysis_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     3221 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/fsttc_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     4231 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/kleinberg_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     8376 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/directing_other_animals_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     9785 2024-03-29 16:15:58.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/spontaneous_alternation_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     6076 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/pose_reorganizer_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     3437 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/animal_directing_other_animals_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     3352 2024-04-26 15:18:54.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/append_roi_features_animals_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     3468 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_by_timebins_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     9154 2024-04-12 00:32:53.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/heatmap_clf_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     9235 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/data_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)    10787 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/roi_features_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     9121 2024-04-25 13:46:55.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/pup_retrieval_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     5577 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/boolean_conditional_slicer_pup_up.py
--rw-r--r--   0 simon      (501) staff       (20)      584 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/about_simba_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     5451 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_descriptive_statistics_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     9419 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/roi_tracking_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     1821 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/append_roi_features_bodypart_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     7312 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/directing_animal_to_bodypart_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     6546 2024-02-16 01:12:37.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_add_remove_print_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)    81527 2024-04-15 18:43:27.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/video_processing_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     7800 2024-04-04 16:47:32.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/validation_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     6160 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_by_roi_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     4470 2024-04-22 13:59:07.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/make_path_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     3622 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/direction_animal_to_bodypart_settings_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     6166 2024-03-06 18:18:27.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/create_user_defined_pose_configuration_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     1072 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/archive_files_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     4716 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/pose_bp_drop_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)    12174 2024-04-11 20:42:04.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/distance_plot_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     4673 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/subset_feature_extractor_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     3651 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/third_party_annotator_appender_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     4134 2024-03-31 17:07:13.000000 Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/roi_analysis_time_bins_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)    16701 2024-02-08 00:53:55.000000 Simba-UW-tf-dev-1.91.5/simba/ui/video_info_ui.py
--rw-r--r--   0 simon      (501) staff       (20)     6573 2024-04-11 20:25:55.000000 Simba-UW-tf-dev-1.91.5/simba/ui/user_defined_pose_creator.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/ui/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    14374 2024-03-06 18:18:27.000000 Simba-UW-tf-dev-1.91.5/simba/ui/create_project_ui.py
--rw-r--r--   0 simon      (501) staff       (20)    14487 2024-02-08 00:53:55.000000 Simba-UW-tf-dev-1.91.5/simba/ui/tkinter_functions.py
--rw-r--r--   0 simon      (501) staff       (20)    38871 2024-04-16 13:37:42.000000 Simba-UW-tf-dev-1.91.5/simba/ui/machine_model_settings_ui.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/labelling/
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/labelling/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    24423 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/labelling/labelling_interface.py
--rw-r--r--   0 simon      (501) staff       (20)     2362 2024-02-21 02:33:04.000000 Simba-UW-tf-dev-1.91.5/simba/labelling/targeted_annotations_clips.py
--rw-r--r--   0 simon      (501) staff       (20)     3974 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/labelling/extract_labelled_frames.py
--rw-r--r--   0 simon      (501) staff       (20)    31269 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/labelling/labelling_advanced_interface.py
--rw-r--r--   0 simon      (501) staff       (20)    10012 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/labelling/play_annotation_video.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/
--rw-r--r--   0 simon      (501) staff       (20)    15004 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/dbcv_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     5077 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/cluster_validation_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     3645 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/enums.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-03 14:33:55.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)     9036 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/cluster_video_visualizer.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/
--rw-r--r--   0 simon      (501) staff       (20)     4642 2024-03-26 23:50:53.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/cluster_videos_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     4027 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/transform_cluster_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     5048 2024-02-15 23:45:22.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/embedding_correlations_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-02 14:39:26.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)     4070 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/transform_dim_reduction_popup.py
--rw-r--r--   0 simon      (501) staff       (20)    11182 2024-02-15 23:45:22.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/fit_dim_reduction_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     2546 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/data_extractor_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     4536 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/cluster_validation_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     9305 2024-02-15 23:45:22.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/fit_cluster_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     2574 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/clusterer_comparison_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     6527 2024-03-26 23:50:53.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/grid_search_visualizer_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     4332 2024-03-28 20:02:59.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/cluster_xai_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     3820 2024-03-29 16:15:58.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/cluster_frequentist_stats_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     2355 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/print_embedding_info_popup.py
--rw-r--r--   0 simon      (501) staff       (20)     9946 2024-04-02 18:34:25.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/dataset_creator.py
--rw-r--r--   0 simon      (501) staff       (20)    12982 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/unsupervised_main.py
--rw-r--r--   0 simon      (501) staff       (20)    10175 2024-03-27 12:56:51.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/grid_search_visualizers.py
--rw-r--r--   0 simon      (501) staff       (20)    16005 2024-03-29 16:15:58.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/data_extractor.py
--rw-r--r--   0 simon      (501) staff       (20)     5241 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/outlier_detector.py
--rw-r--r--   0 simon      (501) staff       (20)    10397 2024-03-29 16:15:58.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/cluster_frequentist_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     5798 2024-03-27 12:56:51.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/embedding_correlation_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    18194 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/cluster_xai_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)    15581 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/umap_embedder.py
--rw-r--r--   0 simon      (501) staff       (20)     5582 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/clusterer_comparison_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     4652 2024-03-26 19:09:58.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/bout_aggregator.py
--rw-r--r--   0 simon      (501) staff       (20)     2188 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/data_map.yaml
--rw-r--r--   0 simon      (501) staff       (20)    14765 2024-03-26 19:09:58.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/hdbscan_clusterer.py
--rw-r--r--   0 simon      (501) staff       (20)     3862 2024-02-15 21:37:53.000000 Simba-UW-tf-dev-1.91.5/simba/unsupervised/tsne.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     8511 2024-02-08 00:53:55.000000 Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/agg_boundary_stats.py
--rw-r--r--   0 simon      (501) staff       (20)    27255 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/boundary_menus.py
--rw-r--r--   0 simon      (501) staff       (20)    10064 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/boundary_statistics.py
--rw-r--r--   0 simon      (501) staff       (20)     7146 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/find_boundaries.py
--rw-r--r--   0 simon      (501) staff       (20)    12066 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/visualize_boundaries.py
--rw-r--r--   0 simon      (501) staff       (20)    18436 2024-04-26 14:51:05.000000 Simba-UW-tf-dev-1.91.5/simba/.DS_Store
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/
--rw-r--r--   0 simon      (501) staff       (20)    57052 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_14bp.py
--rw-r--r--   0 simon      (501) staff       (20)    28094 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_7bp.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/
--rw-r--r--   0 simon      (501) staff       (20)     1757 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/doctests.py
--rw-r--r--   0 simon      (501) staff       (20)    29328 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/fish_feature_extractor_2023_version_3.py
--rw-r--r--   0 simon      (501) staff       (20)     2705 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/read_in_mp.py
--rw-r--r--   0 simon      (501) staff       (20)     2689 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/peaks.py
--rw-r--r--   0 simon      (501) staff       (20)    16727 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/fish_feature_extractor_2022.py
--rw-r--r--   0 simon      (501) staff       (20)     2144 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/convex_hull_3_scratch_3.py
--rw-r--r--   0 simon      (501) staff       (20)     5762 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/convex_hull_scratch_1.py
--rw-r--r--   0 simon      (501) staff       (20)    26425 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/fish_feature_extractor_2023_version_2.py
--rw-r--r--   0 simon      (501) staff       (20)     7535 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/egocentrical_aligner.py
--rw-r--r--   0 simon      (501) staff       (20)     1274 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/count_values_in_range.py
--rw-r--r--   0 simon      (501) staff       (20)     5011 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/graph_creator.py
--rw-r--r--   0 simon      (501) staff       (20)     3954 2024-02-07 20:55:52.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/termite_rois.csv
--rw-r--r--   0 simon      (501) staff       (20)      736 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/mutual_exclusive.py
--rw-r--r--   0 simon      (501) staff       (20)     2883 2024-02-07 20:55:52.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/video_color.py
--rw-r--r--   0 simon      (501) staff       (20)     2055 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/graph_3d_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)     5515 2024-02-07 20:55:52.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/video_rotator.py
--rw-r--r--   0 simon      (501) staff       (20)     2932 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/add_probability_cnt_features.py
--rw-r--r--   0 simon      (501) staff       (20)     1619 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/make_splash.py
--rw-r--r--   0 simon      (501) staff       (20)    37024 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/fish_feature_extractor_2023_version_5.py
--rw-r--r--   0 simon      (501) staff       (20)     1613 2024-02-07 20:55:52.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/time_stamp_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     5515 2024-02-07 20:55:52.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/video_rotator_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    37022 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/fish_feature_extractor_2023_version_4.py
--rw-r--r--   0 simon      (501) staff       (20)     2068 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/convex_hull_scratch_2.py
--rw-r--r--   0 simon      (501) staff       (20)    36307 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_8bps_2_animals.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-02-21 02:05:27.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)     4091 2024-02-16 21:14:07.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/perimeter_jit.py
--rw-r--r--   0 simon      (501) staff       (20)    26471 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_subsets.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    10043 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_user_defined.py
--rw-r--r--   0 simon      (501) staff       (20)    61607 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_16bp.py
--rw-r--r--   0 simon      (501) staff       (20)    37328 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_9bp.py
--rw-r--r--   0 simon      (501) staff       (20)    31163 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_8bp.py
--rw-r--r--   0 simon      (501) staff       (20)    21427 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_4bp.py
--rw-r--r--   0 simon      (501) staff       (20)    65534 2024-03-01 16:55:51.000000 Simba-UW-tf-dev-1.91.5/simba/feature_extractors/amber_feature_extractor.py
--rw-r--r--   0 simon      (501) staff       (20)     1033 2024-04-11 12:52:35.000000 Simba-UW-tf-dev-1.91.5/simba/requirements.txt
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/
--rw-r--r--   0 simon      (501) staff       (20)    40917 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/annotator_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)    84153 2024-04-15 18:43:27.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/timeseries_features_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-03 14:38:30.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)    53232 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/pop_up_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)    48035 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/config_reader.py
--rw-r--r--   0 simon      (501) staff       (20)    56304 2024-04-17 23:32:32.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/circular_statistics.py
--rw-r--r--   0 simon      (501) staff       (20)    38770 2024-04-21 12:08:55.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/network_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    24040 2024-04-18 18:35:47.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/pose_importer_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)     3020 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/video_processing_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)    35776 2024-04-26 13:39:55.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/feature_extraction_supplement_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)   169619 2024-04-22 13:26:42.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/statistics_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)    44711 2024-04-22 19:40:36.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/feature_extraction_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)    73146 2024-04-29 17:30:15.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/plotting_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)      391 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/abstract_classes.py
--rw-r--r--   0 simon      (501) staff       (20)    61924 2024-04-21 12:08:55.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/image_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)      880 2024-03-06 18:18:27.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/unsupervised_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)   132883 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/train_model_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)   166028 2024-04-11 20:42:04.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/geometry_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)    24978 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/mixins/feature_extraction_circular_mixin.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/
--rw-r--r--   0 simon      (501) staff       (20)     6639 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/deepethogram_importer.py
--rw-r--r--   0 simon      (501) staff       (20)    12306 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/BORIS_appender.py
--rw-r--r--   0 simon      (501) staff       (20)     9739 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/observer_importer.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-03-22 19:49:42.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)     5508 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/boris_source_cleaner.py
--rw-r--r--   0 simon      (501) staff       (20)    18963 2024-04-26 14:35:34.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/tools.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    17344 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/third_party_appender.py
--rw-r--r--   0 simon      (501) staff       (20)     9215 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/ethovision_import.py
--rw-r--r--   0 simon      (501) staff       (20)     7456 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/BENTO_appender.py
--rw-r--r--   0 simon      (501) staff       (20)     5662 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/solomon_importer.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/
--rw-r--r--   0 simon      (501) staff       (20)     8841 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_clf_statistics.py
--rw-r--r--   0 simon      (501) staff       (20)    14451 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_analyzer.py
--rw-r--r--   0 simon      (501) staff       (20)    18274 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_menues.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     1921 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_tools.py
--rw-r--r--   0 simon      (501) staff       (20)    19237 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_visualizer.py
--rw-r--r--   0 simon      (501) staff       (20)    15281 2024-04-25 13:46:55.000000 Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_movement_statistics.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/__init__.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/utils/
--rw-r--r--   0 simon      (501) staff       (20)    13211 2024-02-16 01:12:37.000000 Simba-UW-tf-dev-1.91.5/simba/utils/config_creator.py
--rw-r--r--   0 simon      (501) staff       (20)    26038 2024-03-27 13:42:19.000000 Simba-UW-tf-dev-1.91.5/simba/utils/enums.py
--rw-r--r--   0 simon      (501) staff       (20)    10420 2024-04-11 20:25:55.000000 Simba-UW-tf-dev-1.91.5/simba/utils/custom_feature_extractor.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-25 18:17:26.000000 Simba-UW-tf-dev-1.91.5/simba/utils/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)     7727 2024-04-26 14:59:04.000000 Simba-UW-tf-dev-1.91.5/simba/utils/warnings.py
--rw-r--r--   0 simon      (501) staff       (20)    52889 2024-04-28 21:17:15.000000 Simba-UW-tf-dev-1.91.5/simba/utils/checks.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/utils/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    79418 2024-04-29 18:45:39.000000 Simba-UW-tf-dev-1.91.5/simba/utils/read_write.py
--rw-r--r--   0 simon      (501) staff       (20)    15355 2024-04-16 18:54:43.000000 Simba-UW-tf-dev-1.91.5/simba/utils/lookups.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/utils/cli/
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/utils/cli/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     7129 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/utils/cli/cli_tools.py
--rw-r--r--   0 simon      (501) staff       (20)    17086 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/utils/errors.py
--rw-r--r--   0 simon      (501) staff       (20)    46270 2024-04-26 16:10:44.000000 Simba-UW-tf-dev-1.91.5/simba/utils/data.py
--rw-r--r--   0 simon      (501) staff       (20)     4205 2024-02-21 03:51:46.000000 Simba-UW-tf-dev-1.91.5/simba/utils/printing.py
--rw-r--r--   0 simon      (501) staff       (20)   243998 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/SimBA_logo.ico
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/pose_processors/
--rw-r--r--   0 simon      (501) staff       (20)     8626 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_processors/reorganize_keypoint.py
--rw-r--r--   0 simon      (501) staff       (20)     5840 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_processors/remove_keypoints.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_processors/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     2872 2024-02-15 23:39:58.000000 Simba-UW-tf-dev-1.91.5/simba/pose_processors/pose_reset.py
--rw-r--r--   0 simon      (501) staff       (20)     6313 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_processors/reverse_pose.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/
--rw-r--r--   0 simon      (501) staff       (20)      786 2024-03-06 18:18:27.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/doctests.py
--rw-r--r--   0 simon      (501) staff       (20)    29328 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/fish_feature_extractor_2023_version_3.py
--rw-r--r--   0 simon      (501) staff       (20)     2387 2024-03-08 14:35:02.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/dprime.py
--rw-r--r--   0 simon      (501) staff       (20)     2516 2024-03-18 17:01:43.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/linear_fretchet.py
--rw-r--r--   0 simon      (501) staff       (20)     2705 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/read_in_mp.py
--rw-r--r--   0 simon      (501) staff       (20)     2391 2024-03-14 12:45:59.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/piotr_120324 3.py.zip
--rw-r--r--   0 simon      (501) staff       (20)     2036 2024-03-28 18:29:59.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/dunn_index.py
--rw-r--r--   0 simon      (501) staff       (20)     3640 2024-04-08 13:30:56.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/hausdorff.py
--rw-r--r--   0 simon      (501) staff       (20)     2689 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/peaks.py
--rw-r--r--   0 simon      (501) staff       (20)    16727 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/fish_feature_extractor_2022.py
--rw-r--r--   0 simon      (501) staff       (20)     3494 2024-04-03 13:42:02.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/colinear_features.py
--rw-r--r--   0 simon      (501) staff       (20)     8921 2024-03-22 13:56:46.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/spontaneous_alternation_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)    21658 2024-04-10 16:31:38.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/horizontal_videos_concat.py
--rw-r--r--   0 simon      (501) staff       (20)     2144 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/convex_hull_3_scratch_3.py
--rw-r--r--   0 simon      (501) staff       (20)     1103 2024-03-29 16:26:34.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/silhouette_score.py
--rw-r--r--   0 simon      (501) staff       (20)     3607 2024-04-09 14:21:58.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/two_fish_feature_extractor_040924.py.zip
--rw-r--r--   0 simon      (501) staff       (20)    33092 2024-02-22 15:57:45.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/cuda_jit.ipynb
--rw-r--r--   0 simon      (501) staff       (20)     5762 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/convex_hull_scratch_1.py
--rw-r--r--   0 simon      (501) staff       (20)     1867 2024-03-12 19:23:40.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/directed_hausdorff.py
--rw-r--r--   0 simon      (501) staff       (20)      963 2024-03-13 18:20:52.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/shannon_diversity_index.py
--rw-r--r--   0 simon      (501) staff       (20)     3726 2024-03-12 13:31:58.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/sequential_lag_analysis.py
--rw-r--r--   0 simon      (501) staff       (20)     1254 2024-03-13 16:09:50.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/wilcoxon.py
--rw-r--r--   0 simon      (501) staff       (20)    21599 2024-04-22 16:40:51.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/ROI_plotter_mp.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-25 14:48:22.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)     3328 2024-03-08 15:05:36.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/data.npy
--rw-r--r--   0 simon      (501) staff       (20)    12626 2024-03-25 20:59:27.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/distances.py
--rw-r--r--   0 simon      (501) staff       (20)    26425 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/fish_feature_extractor_2023_version_2.py
--rw-r--r--   0 simon      (501) staff       (20)     2699 2024-03-10 16:29:57.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/cohens_kappa.py
--rw-r--r--   0 simon      (501) staff       (20)     2465 2024-03-08 17:38:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/paths.py
--rw-r--r--   0 simon      (501) staff       (20)     1048 2024-03-13 14:41:23.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/outliers_tietjen.py
--rw-r--r--   0 simon      (501) staff       (20)     1424 2024-02-26 15:46:14.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/train_model.py
--rw-r--r--   0 simon      (501) staff       (20)     2346 2024-04-19 14:10:16.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/img_stack_to_bw.py
--rw-r--r--   0 simon      (501) staff       (20)     3171 2024-02-27 21:31:05.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/amber_tests.py
--rw-r--r--   0 simon      (501) staff       (20)     3590 2024-03-11 17:05:31.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/line_locate_point.py
--rw-r--r--   0 simon      (501) staff       (20)     1841 2024-04-19 16:19:10.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/sorensen_dice_coefficient.py
--rw-r--r--   0 simon      (501) staff       (20)     3182 2024-02-24 20:57:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/multifrm_to_points.py
--rw-r--r--   0 simon      (501) staff       (20)       69 2024-03-18 18:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/lcs.py
--rw-r--r--   0 simon      (501) staff       (20)    12448 2024-04-09 14:14:37.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/two_fish_feature_extractor_040924.py
--rw-r--r--   0 simon      (501) staff       (20)     6119 2024-04-20 17:58:22.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/ez_path_plot.py
--rw-r--r--   0 simon      (501) staff       (20)     7535 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/egocentrical_aligner.py
--rw-r--r--   0 simon      (501) staff       (20)     2350 2024-03-12 17:58:33.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/add_body_part.py
--rw-r--r--   0 simon      (501) staff       (20)     1008 2024-03-12 13:29:20.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/grubbs_test.py
--rw-r--r--   0 simon      (501) staff       (20)     3399 2024-02-16 01:12:37.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/slide_circ_mean.py
--rw-r--r--   0 simon      (501) staff       (20)     1835 2024-03-28 22:56:59.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/calinski_harabasz.py
--rw-r--r--   0 simon      (501) staff       (20)     1282 2024-02-27 21:31:05.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/roi_feature_visualizer_example.py
--rw-r--r--   0 simon      (501) staff       (20)    10076 2024-03-22 16:51:40.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/spontaneuous_alternation_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)      895 2024-03-12 14:09:55.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/runs_test.py
--rw-r--r--   0 simon      (501) staff       (20)     2516 2024-04-06 11:33:24.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/pct_counts_in_top_N.py
--rw-r--r--   0 simon      (501) staff       (20)     1095 2024-04-19 18:37:50.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/concordance_ratio.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:46:33.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     2287 2024-03-25 16:45:04.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/total_variation_distance.py
--rw-r--r--   0 simon      (501) staff       (20)     3056 2024-02-27 21:31:05.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/crop_single_polygon.py
--rw-r--r--   0 simon      (501) staff       (20)    15977 2024-04-23 22:52:42.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/ROI_analyzer.py
--rw-r--r--   0 simon      (501) staff       (20)     8010 2024-03-24 19:48:22.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/joint_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)     1529 2024-04-19 15:08:24.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/segment_image_horizontal.py
--rw-r--r--   0 simon      (501) staff       (20)    11145 2024-04-15 15:02:56.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/clip_multiple_videos_by_frame_numbers.py
--rw-r--r--   0 simon      (501) staff       (20)     2552 2024-04-02 14:48:59.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/elliptic_envelope.py
--rw-r--r--   0 simon      (501) staff       (20)     1016 2024-03-14 14:57:29.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/roi_definition_csvs_to_h5.py.zip
--rw-r--r--   0 simon      (501) staff       (20)     1276 2024-03-12 17:58:38.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/add_body_part.py.zip
--rw-r--r--   0 simon      (501) staff       (20)      921 2024-02-26 15:46:14.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/roi_feature_visualizer_example.py.zip
--rw-r--r--   0 simon      (501) staff       (20)     2631 2024-04-05 16:23:07.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/sliding_crosscorrelation.py
--rw-r--r--   0 simon      (501) staff       (20)     1274 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/count_values_in_range.py
--rw-r--r--   0 simon      (501) staff       (20)     2174 2024-03-14 14:56:26.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/roi_definition_csvs_to_h5.py
--rw-r--r--   0 simon      (501) staff       (20)     1656 2024-03-30 18:32:44.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/distance_velocity.py
--rw-r--r--   0 simon      (501) staff       (20)     5011 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/graph_creator.py
--rw-r--r--   0 simon      (501) staff       (20)     5666 2024-04-11 15:28:58.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/line_plot_plotly.py
--rw-r--r--   0 simon      (501) staff       (20)     3954 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/termite_rois.csv
--rw-r--r--   0 simon      (501) staff       (20)     1351 2024-03-26 21:10:40.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/unsupervised_lof.py
--rw-r--r--   0 simon      (501) staff       (20)     2553 2024-03-11 15:09:38.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/siegel_tukey.py
--rw-r--r--   0 simon      (501) staff       (20)      958 2024-03-13 18:05:08.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/berger_parker.py
--rw-r--r--   0 simon      (501) staff       (20)     4177 2024-04-10 01:56:43.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/isolation_forest.py
--rw-r--r--   0 simon      (501) staff       (20)     2845 2024-03-28 19:23:54.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/davis_bouldin.py
--rw-r--r--   0 simon      (501) staff       (20)     4094 2024-04-10 14:09:54.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/vertical_video_concatenator.py
--rw-r--r--   0 simon      (501) staff       (20)     2770 2024-04-07 19:14:13.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/batch_video_to_greyscale.py
--rw-r--r--   0 simon      (501) staff       (20)     7215 2024-02-26 15:46:14.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/crop_circles_pop_up.py
--rw-r--r--   0 simon      (501) staff       (20)     1410 2024-03-19 12:49:24.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/heading.py
--rw-r--r--   0 simon      (501) staff       (20)     2243 2024-03-13 18:35:02.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/piotr_120324 2.py.zip
--rw-r--r--   0 simon      (501) staff       (20)      736 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/mutual_exclusive.py
--rw-r--r--   0 simon      (501) staff       (20)     2907 2024-03-14 19:31:25.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/grangercausalitytests.py
--rw-r--r--   0 simon      (501) staff       (20)     2432 2024-03-19 20:48:43.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/multiframe_is_shape_covered.py
--rw-r--r--   0 simon      (501) staff       (20)      592 2024-02-27 21:31:33.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/redis.py
--rw-r--r--   0 simon      (501) staff       (20)     2893 2024-02-26 20:49:33.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/video_color.py
--rw-r--r--   0 simon      (501) staff       (20)     2055 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/graph_3d_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)     6186 2024-03-18 12:44:45.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/piotr_120324.py
--rw-r--r--   0 simon      (501) staff       (20)     5515 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/video_rotator.py
--rw-r--r--   0 simon      (501) staff       (20)     1004 2024-03-12 13:11:45.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/hartley_fmax.py
--rw-r--r--   0 simon      (501) staff       (20)       84 2024-04-03 17:05:23.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/calc_N_degree_direction_switches.py
--rw-r--r--   0 simon      (501) staff       (20)     2307 2024-02-27 21:31:33.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/fix_clahe.py
--rw-r--r--   0 simon      (501) staff       (20)     1836 2024-03-10 15:38:46.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/cochran_q.py
--rw-r--r--   0 simon      (501) staff       (20)      682 2024-03-13 19:19:43.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/menhinicks_index.py
--rw-r--r--   0 simon      (501) staff       (20)     2932 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/add_probability_cnt_features.py
--rw-r--r--   0 simon      (501) staff       (20)     1559 2024-04-19 15:50:37.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/brillouins_index.py
--rw-r--r--   0 simon      (501) staff       (20)    13575 2024-03-20 11:47:11.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/spontanous_alternations.py
--rw-r--r--   0 simon      (501) staff       (20)     2268 2024-03-13 13:59:07.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/piotr_120324.py.zip
--rw-r--r--   0 simon      (501) staff       (20)     4655 2024-03-06 18:18:27.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/velocity_aggregator.py
--rw-r--r--   0 simon      (501) staff       (20)     1619 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/make_splash.py
--rw-r--r--   0 simon      (501) staff       (20)     4478 2024-04-08 20:43:42.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/abod.py
--rw-r--r--   0 simon      (501) staff       (20)    37024 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/fish_feature_extractor_2023_version_5.py
--rw-r--r--   0 simon      (501) staff       (20)     1374 2024-04-18 13:56:20.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/violin.py
--rw-r--r--   0 simon      (501) staff       (20)     1073 2024-03-13 16:46:16.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/simpson_diversity_index.py
--rw-r--r--   0 simon      (501) staff       (20)     4485 2024-04-14 19:07:54.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/clip_videos_by_frm.py
--rw-r--r--   0 simon      (501) staff       (20)     2396 2024-03-17 16:55:38.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/piotr_120324 4.py.zip
--rw-r--r--   0 simon      (501) staff       (20)     1106 2024-04-18 13:46:43.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/rotate image.py
--rw-r--r--   0 simon      (501) staff       (20)     5336 2024-02-10 20:28:08.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/geometry_ex.py
--rw-r--r--   0 simon      (501) staff       (20)     1613 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/time_stamp_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     1505 2024-03-28 14:36:24.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/line_plot.py
--rw-r--r--   0 simon      (501) staff       (20)     5515 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/video_rotator_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    15996 2024-04-09 13:41:30.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/unsupervised_outliers.py
--rw-r--r--   0 simon      (501) staff       (20)     5690 2024-02-10 20:28:08.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/statistics_ex.py
--rw-r--r--   0 simon      (501) staff       (20)    16646 2024-04-22 16:43:10.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/ROI_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)     1391 2024-03-18 23:21:46.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/sliding_displacement.py
--rw-r--r--   0 simon      (501) staff       (20)     7819 2024-04-18 14:47:28.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/path_plots.py
--rw-r--r--   0 simon      (501) staff       (20)      925 2024-03-11 13:06:04.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/wald_wolfowitz.py
--rw-r--r--   0 simon      (501) staff       (20)     1814 2024-04-05 14:36:58.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/sliding_autoc.py
--rw-r--r--   0 simon      (501) staff       (20)     2369 2024-03-14 17:07:10.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/linestring_path.py
--rw-r--r--   0 simon      (501) staff       (20)     2233 2024-03-18 15:20:48.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/cronbach_alpha.py
--rw-r--r--   0 simon      (501) staff       (20)     2809 2024-03-08 21:15:58.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/mcnamar.py
--rw-r--r--   0 simon      (501) staff       (20)    37022 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/fish_feature_extractor_2023_version_4.py
--rw-r--r--   0 simon      (501) staff       (20)     6220 2024-02-24 20:57:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/AmberFeatureExtractor.py.zip
--rw-r--r--   0 simon      (501) staff       (20)     1933 2024-04-10 15:09:25.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/mosaic.py
--rw-r--r--   0 simon      (501) staff       (20)      441 2024-04-12 17:03:24.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/bouts_df
--rw-r--r--   0 simon      (501) staff       (20)    69423 2024-02-20 14:30:23.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/amber_featurizer.py
--rw-r--r--   0 simon      (501) staff       (20)     6286 2024-04-17 19:28:51.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/make_path_plot.py
--rw-r--r--   0 simon      (501) staff       (20)      837 2024-03-13 18:56:21.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/margalef_diversification_index.py
--rw-r--r--   0 simon      (501) staff       (20)      997 2024-03-17 17:49:00.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/biweight_midcorrelation.py
--rw-r--r--   0 simon      (501) staff       (20)     2186 2024-03-18 15:31:23.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/madmedianrule.py
--rw-r--r--   0 simon      (501) staff       (20)     2915 2024-04-01 14:12:59.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/adjusted_rand_score.py
--rw-r--r--   0 simon      (501) staff       (20)     2068 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/convex_hull_scratch_2.py
--rw-r--r--   0 simon      (501) staff       (20)     1957 2024-04-12 14:55:03.000000 Simba-UW-tf-dev-1.91.5/simba/sandbox/plotly_gantt.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/
--rw-r--r--   0 simon      (501) staff       (20)     8538 2024-02-23 18:25:51.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/directing_animals_to_bodypart_visualizer.py
--rw-r--r--   0 simon      (501) staff       (20)    10390 2024-04-29 18:49:01.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/gantt_creator.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/tools/
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:43:56.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/tools/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     5946 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/tools/tkinter_tools.py
--rw-r--r--   0 simon      (501) staff       (20)    23490 2024-04-29 16:23:41.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/ROI_plotter_mp.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-25 18:27:39.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)    19270 2024-03-31 17:21:01.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/shap_agg_stats_visualizer.py
--rw-r--r--   0 simon      (501) staff       (20)    12906 2024-04-29 18:56:53.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/gantt_creator_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    15819 2024-04-25 18:19:38.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/heat_mapper_clf_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    10620 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/probability_plot_creator.py
--rw-r--r--   0 simon      (501) staff       (20)     8467 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/circular_plotting.py
--rw-r--r--   0 simon      (501) staff       (20)    16868 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/plot_clf_results.py
--rw-r--r--   0 simon      (501) staff       (20)    10328 2024-04-25 15:48:10.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/ez_path_plot.py
--rw-r--r--   0 simon      (501) staff       (20)    17432 2024-04-17 23:57:27.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/plot_clf_results_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    21343 2024-04-29 18:50:27.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/ROI_feature_visualizer.py
--rw-r--r--   0 simon      (501) staff       (20)    13623 2024-04-25 20:03:22.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/heat_mapper_location.py
--rw-r--r--   0 simon      (501) staff       (20)    13512 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/probability_plot_creator_mp.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     5253 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/interactive_probability_grapher.py
--rw-r--r--   0 simon      (501) staff       (20)     6517 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/plot_pose_in_dir.py
--rw-r--r--   0 simon      (501) staff       (20)    20950 2024-04-11 20:25:55.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/single_run_model_validation_video.py
--rw-r--r--   0 simon      (501) staff       (20)     8732 2024-04-11 20:42:04.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/frame_mergerer_ffmpeg.py
--rw-r--r--   0 simon      (501) staff       (20)    10667 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/pose_plotter_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    16477 2024-04-25 18:30:53.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/directing_animals_visualizer_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    11565 2024-04-28 20:02:42.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/clf_validator.py
--rw-r--r--   0 simon      (501) staff       (20)    23459 2024-04-25 18:18:16.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/path_plotter_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    24132 2024-04-29 18:56:42.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/ROI_feature_visualizer_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    11824 2024-04-17 19:58:21.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/data_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)    13091 2024-03-26 23:49:10.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/spontaneous_alternation_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)    21979 2024-04-25 18:18:16.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/path_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)    16926 2024-04-25 19:01:12.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/distance_plotter_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    17511 2024-04-28 19:58:43.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/ROI_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)    10034 2024-03-19 12:54:07.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/geometry_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)    15989 2024-04-28 20:02:42.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/clf_validator_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    14224 2024-04-25 18:19:38.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/heat_mapper_clf.py
--rw-r--r--   0 simon      (501) staff       (20)    11994 2024-04-11 22:38:54.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/distance_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)    19073 2024-04-11 20:26:33.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/single_run_model_validation_video_mp.py
--rw-r--r--   0 simon      (501) staff       (20)    12552 2024-04-25 18:30:28.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/directing_animals_visualizer.py
--rw-r--r--   0 simon      (501) staff       (20)    11453 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/circular_feature_overlay_plotter.py
--rw-r--r--   0 simon      (501) staff       (20)    14576 2024-02-21 04:11:21.000000 Simba-UW-tf-dev-1.91.5/simba/plotting/heat_mapper_location_mp.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/dash_app/
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:44:15.000000 Simba-UW-tf-dev-1.91.5/simba/dash_app/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    72715 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/dash_app/SimBA_dash_app.py
--rw-r--r--   0 simon      (501) staff       (20)     4965 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/dash_app/run_dash_tkinter.py
--rw-r--r--   0 simon      (501) staff       (20)    47546 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/dash_app/dash_app.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/
--rw-r--r--   0 simon      (501) staff       (20)    13060 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/spontaneous_alternation_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)    11813 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/agg_clf_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-21 11:48:06.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)    13224 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/severity_bout_based_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)    39110 2024-03-19 12:54:07.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/interpolation_smoothing.py
--rw-r--r--   0 simon      (501) staff       (20)    10968 2024-02-21 19:10:40.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/directing_animal_to_bodypart.py
--rw-r--r--   0 simon      (501) staff       (20)     9580 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/timebins_clf_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)    20617 2024-04-18 21:13:37.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/fsttc_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     4872 2024-04-26 15:18:54.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/boolean_conditional_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     7117 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/interpolate_pose.py
--rw-r--r--   0 simon      (501) staff       (20)    15989 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/directing_other_animals_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     8957 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/gibbs_sampler.py
--rw-r--r--   0 simon      (501) staff       (20)    10054 2024-04-04 16:23:22.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/timebins_movement_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     5255 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/severity_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)    18517 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/pup_retrieval_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     3118 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/pybursts_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)    13660 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/severity_frame_based_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     8738 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/mutual_exclusivity_corrector.py
--rw-r--r--   0 simon      (501) staff       (20)    12919 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/kleinberg_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)    10196 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/data_processors/movement_calculator.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/model/
--rw-r--r--   0 simon      (501) staff       (20)    23782 2024-04-16 15:02:05.000000 Simba-UW-tf-dev-1.91.5/simba/model/train_rf.py
--rw-r--r--   0 simon      (501) staff       (20)     4969 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/model/inference_batch.py
--rw-r--r--   0 simon      (501) staff       (20)    14036 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/model/train_multiclass_rf.py
--rw-r--r--   0 simon      (501) staff       (20)     3937 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/model/inference_multiclass_batch.py
--rw-r--r--   0 simon      (501) staff       (20)    15931 2024-02-20 14:30:06.000000 Simba-UW-tf-dev-1.91.5/simba/model/grid_search_multiclass_rf.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:41:19.000000 Simba-UW-tf-dev-1.91.5/simba/model/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    16987 2024-02-22 11:58:09.000000 Simba-UW-tf-dev-1.91.5/simba/model/grid_search_rf.py
--rw-r--r--   0 simon      (501) staff       (20)     3768 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/model/inference_validation.py
--rw-r--r--   0 simon      (501) staff       (20)     6872 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/model/train_multilabel_rf.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/
--rw-r--r--   0 simon      (501) staff       (20)    11198 2024-04-25 19:50:25.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_time_bin_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-25 18:17:26.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)    50018 2024-04-24 14:43:27.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_define.py
--rw-r--r--   0 simon      (501) staff       (20)     3616 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_reset.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     9876 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_size_standardizer.py
--rw-r--r--   0 simon      (501) staff       (20)    18552 2024-04-28 20:07:14.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_analyzer.py
--rw-r--r--   0 simon      (501) staff       (20)    15408 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_feature_analyzer.py
--rw-r--r--   0 simon      (501) staff       (20)     4386 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_multiply.py
--rw-r--r--   0 simon      (501) staff       (20)     2313 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_size_calculations.py
--rw-r--r--   0 simon      (501) staff       (20)     3716 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_zoom.py
--rw-r--r--   0 simon      (501) staff       (20)    12313 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_directing_analyzer.py
--rw-r--r--   0 simon      (501) staff       (20)    11974 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_move_shape.py
--rw-r--r--   0 simon      (501) staff       (20)     5470 2024-02-21 03:51:46.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_menus.py
--rw-r--r--   0 simon      (501) staff       (20)    16129 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_clf_calculator.py
--rw-r--r--   0 simon      (501) staff       (20)    29612 2024-04-24 14:39:14.000000 Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_image.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/
--rw-r--r--   0 simon      (501) staff       (20)    10711 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/sleap_csv_importer.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/misc/
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:47:31.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/misc/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     8084 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/misc/apt_trk_importer.py
--rw-r--r--   0 simon      (501) staff       (20)     2577 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/read_DANNCE_mat.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-03-22 19:49:42.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)    14268 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/sleap_h5_importer.py
--rw-r--r--   0 simon      (501) staff       (20)     8161 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/madlc_importer.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    13672 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/sleap_slp_importer.py
--rw-r--r--   0 simon      (501) staff       (20)     8645 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/import_mars.py
--rw-r--r--   0 simon      (501) staff       (20)     7464 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/dlc_importer_csv.py
--rw-r--r--   0 simon      (501) staff       (20)     8417 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_importers/trk_importer.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/
--rw-r--r--   0 simon      (501) staff       (20)     8196 2024-03-19 18:18:43.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/.DS_Store
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/bp_names/
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:47:10.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/bp_names/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     4485 2024-03-04 19:10:54.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/bp_names/bp_names.csv
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/no_animals/
--rw-r--r--   0 simon      (501) staff       (20)       27 2024-03-04 19:10:54.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/no_animals/no_animals.csv
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:47:18.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/no_animals/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:47:05.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/__init__.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/configuration_names/
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:47:14.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/configuration_names/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)      273 2024-03-04 19:10:54.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/configuration_names/pose_config_names.csv
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/
--rw-r--r--   0 simon      (501) staff       (20)    39805 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/8.png
--rw-r--r--   0 simon      (501) staff       (20)    62501 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/9.png
--rw-r--r--   0 simon      (501) staff       (20)     6172 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/12.png
--rw-r--r--   0 simon      (501) staff       (20)    34231 2024-02-20 18:50:39.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/13.png
--rw-r--r--   0 simon      (501) staff       (20)    69501 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/11.png
--rw-r--r--   0 simon      (501) staff       (20)    69410 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/10.png
--rw-r--r--   0 simon      (501) staff       (20)    16000 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/4.png
--rw-r--r--   0 simon      (501) staff       (20)    28150 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/5.png
--rw-r--r--   0 simon      (501) staff       (20)    31140 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/7.png
--rw-r--r--   0 simon      (501) staff       (20)    30634 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/6.png
--rw-r--r--   0 simon      (501) staff       (20)    15417 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/2.png
--rw-r--r--   0 simon      (501) staff       (20)    15786 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/3.png
--rw-r--r--   0 simon      (501) staff       (20)    18939 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/1.png
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/
--rw-r--r--   0 simon      (501) staff       (20)   119697 2024-04-17 19:58:21.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/video_processing.py
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-03-26 15:01:23.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)     5577 2024-04-08 11:29:52.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/roi_selector_circle.py
--rw-r--r--   0 simon      (501) staff       (20)     9073 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/px_to_mm.py
--rw-r--r--   0 simon      (501) staff       (20)    35053 2024-02-26 15:42:07.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/batch_process_menus.py
--rw-r--r--   0 simon      (501) staff       (20)    11439 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/multi_cropper.py
--rw-r--r--   0 simon      (501) staff       (20)     3066 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/extract_frames.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     6598 2024-02-26 21:50:01.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/roi_selector.py
--rw-r--r--   0 simon      (501) staff       (20)    10007 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/calculate_px_dist.py
--rw-r--r--   0 simon      (501) staff       (20)     5963 2024-02-27 21:31:05.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/roi_selector_polygon.py
--rw-r--r--   0 simon      (501) staff       (20)     4926 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/extract_seqframes.py
--rw-r--r--   0 simon      (501) staff       (20)    15117 2024-04-11 20:42:04.000000 Simba-UW-tf-dev-1.91.5/simba/video_processors/batch_process_create_ffmpeg_commands.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/simba/outlier_tools/
--rw-r--r--   0 simon      (501) staff       (20)     7837 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/outlier_tools/outlier_corrector_movement.py
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/outlier_tools/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    14462 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/outlier_tools/outlier_corrector_location_advanced.py
--rw-r--r--   0 simon      (501) staff       (20)    13117 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/outlier_tools/outlier_corrector_movement_advanced.py
--rw-r--r--   0 simon      (501) staff       (20)    10396 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/outlier_tools/outlier_corrector_location.py
--rw-r--r--   0 simon      (501) staff       (20)     2751 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/outlier_tools/skip_outlier_correction.py
--rw-r--r--   0 simon      (501) staff       (20)    82060 2024-04-29 18:38:25.000000 Simba-UW-tf-dev-1.91.5/simba/SimBA.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/assets/
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/assets/unsupervised/
--rw-r--r--   0 simon      (501) staff       (20)   109483 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/unsupervised/model_names.parquet
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:36.000000 Simba-UW-tf-dev-1.91.5/simba/assets/unsupervised/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    14175 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/unsupervised/features.csv
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/
--rw-r--r--   0 simon      (501) staff       (20)     1177 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/down_arrow.jpg
--rw-r--r--   0 simon      (501) staff       (20)     1733 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/intruder_shape.jpg
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/feature_categories/
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:25.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/feature_categories/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    17420 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/feature_categories/shap_feature_categories.csv
--rw-r--r--   0 simon      (501) staff       (20)     1665 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/resident_shape.jpg
--rw-r--r--   0 simon      (501) staff       (20)     2415 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/resident_intruder_shape.jpg
--rw-r--r--   0 simon      (501) staff       (20)     2012 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/animal_distances.jpg
--rw-r--r--   0 simon      (501) staff       (20)     4422 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/baseline_scale.jpg
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:21.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)   353824 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/ubuntu.regular.ttf
--rw-r--r--   0 simon      (501) staff       (20)     6672 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/side_scale.jpg
--rw-r--r--   0 simon      (501) staff       (20)   189004 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/UbuntuMono-Regular.ttf
--rw-r--r--   0 simon      (501) staff       (20)     2737 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/side_scale_5.jpg
--rw-r--r--   0 simon      (501) staff       (20)     1785 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/intruder_movement.jpg
--rw-r--r--   0 simon      (501) staff       (20)     1435 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/resident_movement.jpg
--rw-r--r--   0 simon      (501) staff       (20)     3134 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/color_bar.jpg
--rw-r--r--   0 simon      (501) staff       (20)     2120 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/shap/resident_intruder_movement.jpg
--rw-r--r--   0 simon      (501) staff       (20)    10244 2024-04-09 23:07:16.000000 Simba-UW-tf-dev-1.91.5/simba/assets/.DS_Store
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/assets/lookups/
--rw-r--r--   0 simon      (501) staff       (20)   270783 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/lookups/model_names.parquet
--rw-r--r--   0 simon      (501) staff       (20)     2987 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/lookups/feature_extraction_headers.csv
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:11.000000 Simba-UW-tf-dev-1.91.5/simba/assets/lookups/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    26256 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/lookups/critical_values_05.pickle
--rw-r--r--   0 simon      (501) staff       (20)    14175 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/lookups/features.csv
--rw-r--r--   0 simon      (501) staff       (20)    14175 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/lookups/unsupervised_example_x.csv
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:41:54.000000 Simba-UW-tf-dev-1.91.5/simba/assets/__init__.py
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/assets/stl/
--rw-r--r--   0 simon      (501) staff       (20)   551576 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/stl/operant_tray.stl
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:31.000000 Simba-UW-tf-dev-1.91.5/simba/assets/stl/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)    67647 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/stl/operant_lever.stl
--rw-r--r--   0 simon      (501) staff       (20)    92896 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/stl/operant_walls.stl
--rw-r--r--   0 simon      (501) staff       (20)  4759984 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/stl/grid_floor.stl
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/assets/img/
--rw-r--r--   0 simon      (501) staff       (20)   489479 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/img/splash_2024.mp4
--rw-r--r--   0 simon      (501) staff       (20)    79863 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/img/bg_2024.png
--rw-r--r--   0 simon      (501) staff       (20)   399272 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/img/about_me.png
--rw-r--r--   0 simon      (501) staff       (20)   117108 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/img/splash.mp4
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:02.000000 Simba-UW-tf-dev-1.91.5/simba/assets/img/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)   322242 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/img/bg_2.png
--rw-r--r--   0 simon      (501) staff       (20)      165 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/img/~$splash.pptx
--rw-r--r--   0 simon      (501) staff       (20)    69267 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/img/splash.pptx
--rw-r--r--   0 simon      (501) staff       (20)   204362 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/img/bg.png
--rw-r--r--   0 simon      (501) staff       (20)   189004 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/UbuntuMono-Regular.ttf
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/
--rw-r--r--   0 simon      (501) staff       (20)     1350 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/factory.png
--rw-r--r--   0 simon      (501) staff       (20)     1413 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/cluster.png
--rw-r--r--   0 simon      (501) staff       (20)     1340 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/load.png
--rw-r--r--   0 simon      (501) staff       (20)     4507 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/gif.png
--rw-r--r--   0 simon      (501) staff       (20)     4566 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/pose.png
--rw-r--r--   0 simon      (501) staff       (20)     1943 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/features.png
--rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-09 15:42:22.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/.DS_Store
--rw-r--r--   0 simon      (501) staff       (20)     4896 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/settings.png
--rw-r--r--   0 simon      (501) staff       (20)     2090 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/stopwatch.png
--rw-r--r--   0 simon      (501) staff       (20)     1252 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/link.png
--rw-r--r--   0 simon      (501) staff       (20)    14250 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/dash_simba.css
--rw-r--r--   0 simon      (501) staff       (20)      917 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/documentation.png
--rw-r--r--   0 simon      (501) staff       (20)     4503 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/fps.png
--rw-r--r--   0 simon      (501) staff       (20)     1299 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/dimensionality_reduction.png
--rw-r--r--   0 simon      (501) staff       (20)     4823 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/roi.png
--rw-r--r--   0 simon      (501) staff       (20)   171446 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/simba_logo_2.png
--rw-r--r--   0 simon      (501) staff       (20)      920 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/superimpose.png
--rw-r--r--   0 simon      (501) staff       (20)     1136 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/label.png
--rw-r--r--   0 simon      (501) staff       (20)     1016 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/change.png
--rw-r--r--   0 simon      (501) staff       (20)    59896 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/readthedocs_logo.png
--rw-r--r--   0 simon      (501) staff       (20)     1124 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/crop.png
--rw-r--r--   0 simon      (501) staff       (20)     2146 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/rotate.png
--rw-r--r--   0 simon      (501) staff       (20)     1921 2024-02-26 14:29:54.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/circle.png
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:44:37.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     1057 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/path.png
--rw-r--r--   0 simon      (501) staff       (20)     1148 2024-02-26 20:39:14.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/polygon.png
--rw-r--r--   0 simon      (501) staff       (20)      950 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/clip.png
--rw-r--r--   0 simon      (501) staff       (20)     2121 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/restart.png
--rw-r--r--   0 simon      (501) staff       (20)     4653 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/calipher.png
--rw-r--r--   0 simon      (501) staff       (20)     1291 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/add_on.png
--rw-r--r--   0 simon      (501) staff       (20)     4695 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/create.png
--rw-r--r--   0 simon      (501) staff       (20)    78182 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/SimBA_logo.ico
--rw-r--r--   0 simon      (501) staff       (20)     1067 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/print.png
--rw-r--r--   0 simon      (501) staff       (20)     4653 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/clf.png
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat_icons/
--rw-r--r--   0 simon      (501) staff       (20)     6027 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat_icons/mosaic.png
--rw-r--r--   0 simon      (501) staff       (20)     5654 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat_icons/vertical.png
--rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:44:45.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat_icons/__init__.py
--rw-r--r--   0 simon      (501) staff       (20)     5542 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat_icons/horizontal.png
--rw-r--r--   0 simon      (501) staff       (20)     5939 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat_icons/mixed_mosaic.png
--rw-r--r--   0 simon      (501) staff       (20)     2060 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/merge.png
--rw-r--r--   0 simon      (501) staff       (20)     1252 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/clean.png
--rw-r--r--   0 simon      (501) staff       (20)     4725 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/clf_2.png
--rw-r--r--   0 simon      (501) staff       (20)     4795 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/visualize.png
--rw-r--r--   0 simon      (501) staff       (20)     2142 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat.png
--rw-r--r--   0 simon      (501) staff       (20)     1474 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/boris.png
--rw-r--r--   0 simon      (501) staff       (20)     4804 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/frames.png
--rw-r--r--   0 simon      (501) staff       (20)     2425 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/video.png
--rw-r--r--   0 simon      (501) staff       (20)     2089 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/sample.png
--rw-r--r--   0 simon      (501) staff       (20)     1471 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/metrics.png
--rw-r--r--   0 simon      (501) staff       (20)     4555 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/grey.png
--rw-r--r--   0 simon      (501) staff       (20)      930 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/exit.png
--rw-r--r--   0 simon      (501) staff       (20)     4751 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/outlier.png
--rw-r--r--   0 simon      (501) staff       (20)     4392 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/clahe.png
--rw-r--r--   0 simon      (501) staff       (20)     4637 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/trash.png
--rw-r--r--   0 simon      (501) staff       (20)     1239 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/about.png
--rw-r--r--   0 simon      (501) staff       (20)     4666 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/convert.png
--rw-r--r--   0 simon      (501) staff       (20)    93229 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/SimBA_logo.icns
--rw-r--r--   0 simon      (501) staff       (20)      991 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/reorganize.png
--rw-r--r--   0 simon      (501) staff       (20)     4784 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/browse.png
--rw-r--r--   0 simon      (501) staff       (20)    30707 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/SimBA_logo.png
--rw-r--r--   0 simon      (501) staff       (20)     2293 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/ethovision.png
--rw-r--r--   0 simon      (501) staff       (20)     1018 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/icons/close.png
--rw-r--r--   0 simon      (501) staff       (20)    13672 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/dash_simba_base.css
--rw-r--r--   0 simon      (501) staff       (20)    31812 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.5/simba/assets/TheGoldenLab.PNG
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/Simba_UW_tf_dev.egg-info/
--rw-r--r--   0 simon      (501) staff       (20)     2797 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/Simba_UW_tf_dev.egg-info/PKG-INFO
--rw-r--r--   0 simon      (501) staff       (20)    23451 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/Simba_UW_tf_dev.egg-info/SOURCES.txt
--rw-r--r--   0 simon      (501) staff       (20)       44 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/Simba_UW_tf_dev.egg-info/entry_points.txt
--rw-r--r--   0 simon      (501) staff       (20)      797 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/Simba_UW_tf_dev.egg-info/requires.txt
--rw-r--r--   0 simon      (501) staff       (20)        6 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/Simba_UW_tf_dev.egg-info/top_level.txt
--rw-r--r--   0 simon      (501) staff       (20)        1 2024-04-29 19:17:23.000000 Simba-UW-tf-dev-1.91.5/Simba_UW_tf_dev.egg-info/dependency_links.txt
--rw-r--r--   0 simon      (501) staff       (20)    35127 2024-02-07 18:56:10.000000 Simba-UW-tf-dev-1.91.5/LICENSE
-drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/tests/
--rw-r--r--   0 simon      (501) staff       (20)     4753 2024-04-11 20:40:04.000000 Simba-UW-tf-dev-1.91.5/tests/test_data_processors.py
--rw-r--r--   0 simon      (501) staff       (20)    13415 2024-03-01 16:43:04.000000 Simba-UW-tf-dev-1.91.5/tests/test_circlular_stats.py
--rw-r--r--   0 simon      (501) staff       (20)    13399 2024-04-11 20:36:51.000000 Simba-UW-tf-dev-1.91.5/tests/test_stats.py
--rw-r--r--   0 simon      (501) staff       (20)    11863 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.5/tests/test_train_model_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)     6525 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.5/tests/test_feature_extraction_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)     1739 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.5/tests/test_utils_data.py
--rw-r--r--   0 simon      (501) staff       (20)     8120 2024-03-01 19:06:25.000000 Simba-UW-tf-dev-1.91.5/tests/test_config_reader_mixin.py
--rw-r--r--   0 simon      (501) staff       (20)     1070 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.5/tests/test_outlier_correctors.py
--rw-r--r--   0 simon      (501) staff       (20)     1596 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.5/tests/test_featurizers.py
--rw-r--r--   0 simon      (501) staff       (20)     8570 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.5/tests/test_video_processors.py
--rw-r--r--   0 simon      (501) staff       (20)     3554 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.5/tests/test_thirdparty_appenders.py
--rw-r--r--   0 simon      (501) staff       (20)     3021 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.5/tests/test_validation_clips.py
--rw-r--r--   0 simon      (501) staff       (20)     3921 2024-04-26 17:59:40.000000 Simba-UW-tf-dev-1.91.5/tests/test_roi_tools.py
--rw-r--r--   0 simon      (501) staff       (20)      318 2024-03-04 20:16:28.000000 Simba-UW-tf-dev-1.91.5/MANIFEST.in
--rw-r--r--   0 simon      (501) staff       (20)    18478 2024-04-17 19:58:21.000000 Simba-UW-tf-dev-1.91.5/README.md
--rw-r--r--   0 simon      (501) staff       (20)     1426 2024-04-29 19:17:21.000000 Simba-UW-tf-dev-1.91.5/setup.py
--rw-r--r--   0 simon      (501) staff       (20)       38 2024-04-29 19:17:24.000000 Simba-UW-tf-dev-1.91.5/setup.cfg
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/
+-rw-r--r--   0 simon      (501) staff       (20)     2797 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/PKG-INFO
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/ui/
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-03-28 13:50:53.000000 Simba-UW-tf-dev-1.91.6/simba/ui/.DS_Store
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/
+-rw-r--r--   0 simon      (501) staff       (20)    11467 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/mutual_exclusivity_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     4070 2024-03-29 20:30:28.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/movement_analysis_time_bins_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     1676 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/csv_2_parquet_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     5883 2024-04-22 13:59:07.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/quick_path_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     2873 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/batch_preprocess_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     8831 2024-05-02 13:40:02.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/heatmap_location_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     9578 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_probability_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     3456 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/movement_analysis_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     4631 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/set_machine_model_parameters_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)    11362 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)    25598 2024-04-17 23:32:48.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/path_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     1184 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/remove_roi_features_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     6692 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/targeted_annotation_clips_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     3340 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/smoothing_interpolation_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     2174 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/roi_size_standardizer_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     6997 2024-04-11 20:25:55.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/visualize_pose_in_dir_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     4682 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/roi_analysis_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     7898 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/outlier_settings_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     9366 2024-04-29 16:29:26.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/gantt_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     5830 2024-04-26 18:09:47.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_validation_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     8529 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/severity_analysis_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     3221 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/fsttc_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     4231 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/kleinberg_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     8376 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/directing_other_animals_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     9785 2024-03-29 16:15:58.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/spontaneous_alternation_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     6076 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/pose_reorganizer_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     3437 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/animal_directing_other_animals_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     3352 2024-04-26 15:18:54.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/append_roi_features_animals_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     3468 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_by_timebins_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     9154 2024-04-12 00:32:53.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/heatmap_clf_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     9235 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/data_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)    10787 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/roi_features_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     9121 2024-04-25 13:46:55.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/pup_retrieval_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     5577 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/boolean_conditional_slicer_pup_up.py
+-rw-r--r--   0 simon      (501) staff       (20)      584 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/about_simba_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     5451 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_descriptive_statistics_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     9419 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/roi_tracking_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     1821 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/append_roi_features_bodypart_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     7312 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/directing_animal_to_bodypart_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     6546 2024-02-16 01:12:37.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_add_remove_print_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)    89641 2024-05-06 18:09:11.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/video_processing_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     7800 2024-04-04 16:47:32.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/validation_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     6160 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_by_roi_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     4470 2024-04-22 13:59:07.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/make_path_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     3622 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/direction_animal_to_bodypart_settings_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     6166 2024-03-06 18:18:27.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/create_user_defined_pose_configuration_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     1072 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/archive_files_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     4716 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/pose_bp_drop_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)    12174 2024-04-11 20:42:04.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/distance_plot_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     4673 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/subset_feature_extractor_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     3651 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/third_party_annotator_appender_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     4134 2024-03-31 17:07:13.000000 Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/roi_analysis_time_bins_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)    16701 2024-02-08 00:53:55.000000 Simba-UW-tf-dev-1.91.6/simba/ui/video_info_ui.py
+-rw-r--r--   0 simon      (501) staff       (20)     6573 2024-04-11 20:25:55.000000 Simba-UW-tf-dev-1.91.6/simba/ui/user_defined_pose_creator.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/ui/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    14374 2024-03-06 18:18:27.000000 Simba-UW-tf-dev-1.91.6/simba/ui/create_project_ui.py
+-rw-r--r--   0 simon      (501) staff       (20)    14487 2024-02-08 00:53:55.000000 Simba-UW-tf-dev-1.91.6/simba/ui/tkinter_functions.py
+-rw-r--r--   0 simon      (501) staff       (20)    38871 2024-04-16 13:37:42.000000 Simba-UW-tf-dev-1.91.6/simba/ui/machine_model_settings_ui.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/labelling/
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/labelling/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    24423 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/labelling/labelling_interface.py
+-rw-r--r--   0 simon      (501) staff       (20)     2362 2024-02-21 02:33:04.000000 Simba-UW-tf-dev-1.91.6/simba/labelling/targeted_annotations_clips.py
+-rw-r--r--   0 simon      (501) staff       (20)     3974 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/labelling/extract_labelled_frames.py
+-rw-r--r--   0 simon      (501) staff       (20)    31269 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/labelling/labelling_advanced_interface.py
+-rw-r--r--   0 simon      (501) staff       (20)    10012 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/labelling/play_annotation_video.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/
+-rw-r--r--   0 simon      (501) staff       (20)    15004 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/dbcv_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     5077 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/cluster_validation_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     3645 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/enums.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-03 14:33:55.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)     9036 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/cluster_video_visualizer.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/
+-rw-r--r--   0 simon      (501) staff       (20)     4642 2024-03-26 23:50:53.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/cluster_videos_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     4027 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/transform_cluster_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     5048 2024-02-15 23:45:22.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/embedding_correlations_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-02 14:39:26.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)     4070 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/transform_dim_reduction_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)    11182 2024-02-15 23:45:22.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/fit_dim_reduction_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     2546 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/data_extractor_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     4536 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/cluster_validation_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     9305 2024-02-15 23:45:22.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/fit_cluster_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     2574 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/clusterer_comparison_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     6527 2024-03-26 23:50:53.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/grid_search_visualizer_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     4332 2024-03-28 20:02:59.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/cluster_xai_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     3820 2024-03-29 16:15:58.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/cluster_frequentist_stats_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     2355 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/print_embedding_info_popup.py
+-rw-r--r--   0 simon      (501) staff       (20)     9946 2024-04-02 18:34:25.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/dataset_creator.py
+-rw-r--r--   0 simon      (501) staff       (20)    12982 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/unsupervised_main.py
+-rw-r--r--   0 simon      (501) staff       (20)    10175 2024-03-27 12:56:51.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/grid_search_visualizers.py
+-rw-r--r--   0 simon      (501) staff       (20)    16005 2024-03-29 16:15:58.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/data_extractor.py
+-rw-r--r--   0 simon      (501) staff       (20)     5241 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/outlier_detector.py
+-rw-r--r--   0 simon      (501) staff       (20)    10397 2024-03-29 16:15:58.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/cluster_frequentist_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     5798 2024-03-27 12:56:51.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/embedding_correlation_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    18194 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/cluster_xai_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)    15581 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/umap_embedder.py
+-rw-r--r--   0 simon      (501) staff       (20)     5582 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/clusterer_comparison_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     4652 2024-03-26 19:09:58.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/bout_aggregator.py
+-rw-r--r--   0 simon      (501) staff       (20)     2188 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/data_map.yaml
+-rw-r--r--   0 simon      (501) staff       (20)    14765 2024-03-26 19:09:58.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/hdbscan_clusterer.py
+-rw-r--r--   0 simon      (501) staff       (20)     3862 2024-02-15 21:37:53.000000 Simba-UW-tf-dev-1.91.6/simba/unsupervised/tsne.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     8511 2024-02-08 00:53:55.000000 Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/agg_boundary_stats.py
+-rw-r--r--   0 simon      (501) staff       (20)    27255 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/boundary_menus.py
+-rw-r--r--   0 simon      (501) staff       (20)    10064 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/boundary_statistics.py
+-rw-r--r--   0 simon      (501) staff       (20)     7146 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/find_boundaries.py
+-rw-r--r--   0 simon      (501) staff       (20)    12066 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/visualize_boundaries.py
+-rw-r--r--   0 simon      (501) staff       (20)    18436 2024-05-06 17:15:48.000000 Simba-UW-tf-dev-1.91.6/simba/.DS_Store
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/
+-rw-r--r--   0 simon      (501) staff       (20)    57052 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_14bp.py
+-rw-r--r--   0 simon      (501) staff       (20)    28094 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_7bp.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/
+-rw-r--r--   0 simon      (501) staff       (20)     1757 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/doctests.py
+-rw-r--r--   0 simon      (501) staff       (20)    29328 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/fish_feature_extractor_2023_version_3.py
+-rw-r--r--   0 simon      (501) staff       (20)     2705 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/read_in_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)     2689 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/peaks.py
+-rw-r--r--   0 simon      (501) staff       (20)    16727 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/fish_feature_extractor_2022.py
+-rw-r--r--   0 simon      (501) staff       (20)     2144 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/convex_hull_3_scratch_3.py
+-rw-r--r--   0 simon      (501) staff       (20)     5762 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/convex_hull_scratch_1.py
+-rw-r--r--   0 simon      (501) staff       (20)    26425 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/fish_feature_extractor_2023_version_2.py
+-rw-r--r--   0 simon      (501) staff       (20)     7535 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/egocentrical_aligner.py
+-rw-r--r--   0 simon      (501) staff       (20)     1274 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/count_values_in_range.py
+-rw-r--r--   0 simon      (501) staff       (20)     5011 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/graph_creator.py
+-rw-r--r--   0 simon      (501) staff       (20)     3954 2024-02-07 20:55:52.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/termite_rois.csv
+-rw-r--r--   0 simon      (501) staff       (20)      736 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/mutual_exclusive.py
+-rw-r--r--   0 simon      (501) staff       (20)     2883 2024-02-07 20:55:52.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/video_color.py
+-rw-r--r--   0 simon      (501) staff       (20)     2055 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/graph_3d_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)     5515 2024-02-07 20:55:52.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/video_rotator.py
+-rw-r--r--   0 simon      (501) staff       (20)     2932 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/add_probability_cnt_features.py
+-rw-r--r--   0 simon      (501) staff       (20)     1619 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/make_splash.py
+-rw-r--r--   0 simon      (501) staff       (20)    37024 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/fish_feature_extractor_2023_version_5.py
+-rw-r--r--   0 simon      (501) staff       (20)     1613 2024-02-07 20:55:52.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/time_stamp_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     5515 2024-02-07 20:55:52.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/video_rotator_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    37022 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/fish_feature_extractor_2023_version_4.py
+-rw-r--r--   0 simon      (501) staff       (20)     2068 2024-02-07 20:55:43.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/convex_hull_scratch_2.py
+-rw-r--r--   0 simon      (501) staff       (20)    36307 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_8bps_2_animals.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-02-21 02:05:27.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)     4091 2024-02-16 21:14:07.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/perimeter_jit.py
+-rw-r--r--   0 simon      (501) staff       (20)    26471 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_subsets.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    10043 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_user_defined.py
+-rw-r--r--   0 simon      (501) staff       (20)    61607 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_16bp.py
+-rw-r--r--   0 simon      (501) staff       (20)    37328 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_9bp.py
+-rw-r--r--   0 simon      (501) staff       (20)    31163 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_8bp.py
+-rw-r--r--   0 simon      (501) staff       (20)    21427 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_4bp.py
+-rw-r--r--   0 simon      (501) staff       (20)    65534 2024-03-01 16:55:51.000000 Simba-UW-tf-dev-1.91.6/simba/feature_extractors/amber_feature_extractor.py
+-rw-r--r--   0 simon      (501) staff       (20)     1033 2024-04-11 12:52:35.000000 Simba-UW-tf-dev-1.91.6/simba/requirements.txt
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/
+-rw-r--r--   0 simon      (501) staff       (20)    40917 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/annotator_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)    84153 2024-04-15 18:43:27.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/timeseries_features_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-03 14:38:30.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)    53232 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/pop_up_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)    48035 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/config_reader.py
+-rw-r--r--   0 simon      (501) staff       (20)    56304 2024-04-17 23:32:32.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/circular_statistics.py
+-rw-r--r--   0 simon      (501) staff       (20)    38770 2024-04-21 12:08:55.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/network_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    24040 2024-04-18 18:35:47.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/pose_importer_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)     3020 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/video_processing_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)    35776 2024-04-26 13:39:55.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/feature_extraction_supplement_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)   181397 2024-05-04 19:12:36.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/statistics_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)    44711 2024-04-22 19:40:36.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/feature_extraction_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)    69908 2024-05-06 18:32:12.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/plotting_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)      391 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/abstract_classes.py
+-rw-r--r--   0 simon      (501) staff       (20)    62121 2024-05-02 14:32:34.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/image_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)      880 2024-03-06 18:18:27.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/unsupervised_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)   132883 2024-03-29 19:51:46.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/train_model_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)   166127 2024-04-30 16:15:41.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/geometry_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)    24978 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/mixins/feature_extraction_circular_mixin.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/
+-rw-r--r--   0 simon      (501) staff       (20)     6639 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/deepethogram_importer.py
+-rw-r--r--   0 simon      (501) staff       (20)    12306 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/BORIS_appender.py
+-rw-r--r--   0 simon      (501) staff       (20)     9739 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/observer_importer.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-03-22 19:49:42.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)     5508 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/boris_source_cleaner.py
+-rw-r--r--   0 simon      (501) staff       (20)    18963 2024-04-26 14:35:34.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/tools.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    17344 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/third_party_appender.py
+-rw-r--r--   0 simon      (501) staff       (20)     9215 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/ethovision_import.py
+-rw-r--r--   0 simon      (501) staff       (20)     7456 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/BENTO_appender.py
+-rw-r--r--   0 simon      (501) staff       (20)     5662 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/solomon_importer.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/
+-rw-r--r--   0 simon      (501) staff       (20)     8841 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_clf_statistics.py
+-rw-r--r--   0 simon      (501) staff       (20)    14451 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_analyzer.py
+-rw-r--r--   0 simon      (501) staff       (20)    18274 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_menues.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     1921 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_tools.py
+-rw-r--r--   0 simon      (501) staff       (20)    19237 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_visualizer.py
+-rw-r--r--   0 simon      (501) staff       (20)    15281 2024-04-25 13:46:55.000000 Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_movement_statistics.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/__init__.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/utils/
+-rw-r--r--   0 simon      (501) staff       (20)    13211 2024-02-16 01:12:37.000000 Simba-UW-tf-dev-1.91.6/simba/utils/config_creator.py
+-rw-r--r--   0 simon      (501) staff       (20)    26038 2024-03-27 13:42:19.000000 Simba-UW-tf-dev-1.91.6/simba/utils/enums.py
+-rw-r--r--   0 simon      (501) staff       (20)    10420 2024-04-11 20:25:55.000000 Simba-UW-tf-dev-1.91.6/simba/utils/custom_feature_extractor.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-25 18:17:26.000000 Simba-UW-tf-dev-1.91.6/simba/utils/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)     7727 2024-04-26 14:59:04.000000 Simba-UW-tf-dev-1.91.6/simba/utils/warnings.py
+-rw-r--r--   0 simon      (501) staff       (20)    53538 2024-05-06 18:46:15.000000 Simba-UW-tf-dev-1.91.6/simba/utils/checks.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/utils/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    79418 2024-04-29 18:45:39.000000 Simba-UW-tf-dev-1.91.6/simba/utils/read_write.py
+-rw-r--r--   0 simon      (501) staff       (20)    15355 2024-04-16 18:54:43.000000 Simba-UW-tf-dev-1.91.6/simba/utils/lookups.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/utils/cli/
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/utils/cli/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     7129 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/utils/cli/cli_tools.py
+-rw-r--r--   0 simon      (501) staff       (20)    17086 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/utils/errors.py
+-rw-r--r--   0 simon      (501) staff       (20)    46270 2024-04-26 16:10:44.000000 Simba-UW-tf-dev-1.91.6/simba/utils/data.py
+-rw-r--r--   0 simon      (501) staff       (20)     4205 2024-02-21 03:51:46.000000 Simba-UW-tf-dev-1.91.6/simba/utils/printing.py
+-rw-r--r--   0 simon      (501) staff       (20)   243998 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/SimBA_logo.ico
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/pose_processors/
+-rw-r--r--   0 simon      (501) staff       (20)     8626 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_processors/reorganize_keypoint.py
+-rw-r--r--   0 simon      (501) staff       (20)     5840 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_processors/remove_keypoints.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_processors/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     2872 2024-02-15 23:39:58.000000 Simba-UW-tf-dev-1.91.6/simba/pose_processors/pose_reset.py
+-rw-r--r--   0 simon      (501) staff       (20)     6313 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_processors/reverse_pose.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/
+-rw-r--r--   0 simon      (501) staff       (20)      786 2024-03-06 18:18:27.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/doctests.py
+-rw-r--r--   0 simon      (501) staff       (20)    29328 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/fish_feature_extractor_2023_version_3.py
+-rw-r--r--   0 simon      (501) staff       (20)     4080 2024-05-06 15:09:47.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/CLAHE.py
+-rw-r--r--   0 simon      (501) staff       (20)     2387 2024-03-08 14:35:02.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/dprime.py
+-rw-r--r--   0 simon      (501) staff       (20)     2516 2024-03-18 17:01:43.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/linear_fretchet.py
+-rw-r--r--   0 simon      (501) staff       (20)     2705 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/read_in_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)     2391 2024-03-14 12:45:59.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/piotr_120324 3.py.zip
+-rw-r--r--   0 simon      (501) staff       (20)     2036 2024-03-28 18:29:59.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/dunn_index.py
+-rw-r--r--   0 simon      (501) staff       (20)     3640 2024-04-08 13:30:56.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/hausdorff.py
+-rw-r--r--   0 simon      (501) staff       (20)     2689 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/peaks.py
+-rw-r--r--   0 simon      (501) staff       (20)    16727 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/fish_feature_extractor_2022.py
+-rw-r--r--   0 simon      (501) staff       (20)     3494 2024-04-03 13:42:02.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/colinear_features.py
+-rw-r--r--   0 simon      (501) staff       (20)     8921 2024-03-22 13:56:46.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/spontaneous_alternation_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)    21658 2024-04-10 16:31:38.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/horizontal_videos_concat.py
+-rw-r--r--   0 simon      (501) staff       (20)     2144 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/convex_hull_3_scratch_3.py
+-rw-r--r--   0 simon      (501) staff       (20)     1103 2024-03-29 16:26:34.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/silhouette_score.py
+-rw-r--r--   0 simon      (501) staff       (20)     3607 2024-04-09 14:21:58.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/two_fish_feature_extractor_040924.py.zip
+-rw-r--r--   0 simon      (501) staff       (20)    33092 2024-02-22 15:57:45.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/cuda_jit.ipynb
+-rw-r--r--   0 simon      (501) staff       (20)     5762 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/convex_hull_scratch_1.py
+-rw-r--r--   0 simon      (501) staff       (20)     1867 2024-03-12 19:23:40.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/directed_hausdorff.py
+-rw-r--r--   0 simon      (501) staff       (20)      963 2024-03-13 18:20:52.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/shannon_diversity_index.py
+-rw-r--r--   0 simon      (501) staff       (20)     3726 2024-03-12 13:31:58.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/sequential_lag_analysis.py
+-rw-r--r--   0 simon      (501) staff       (20)     1254 2024-03-13 16:09:50.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/wilcoxon.py
+-rw-r--r--   0 simon      (501) staff       (20)    21599 2024-04-22 16:40:51.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/ROI_plotter_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-25 14:48:22.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)     3328 2024-03-08 15:05:36.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/data.npy
+-rw-r--r--   0 simon      (501) staff       (20)    12626 2024-03-25 20:59:27.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/distances.py
+-rw-r--r--   0 simon      (501) staff       (20)    26425 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/fish_feature_extractor_2023_version_2.py
+-rw-r--r--   0 simon      (501) staff       (20)     2623 2024-05-03 16:20:12.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/cohens_kappa.py
+-rw-r--r--   0 simon      (501) staff       (20)     2465 2024-03-08 17:38:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/paths.py
+-rw-r--r--   0 simon      (501) staff       (20)     1048 2024-03-13 14:41:23.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/outliers_tietjen.py
+-rw-r--r--   0 simon      (501) staff       (20)     1424 2024-02-26 15:46:14.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/train_model.py
+-rw-r--r--   0 simon      (501) staff       (20)     2346 2024-04-19 14:10:16.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/img_stack_to_bw.py
+-rw-r--r--   0 simon      (501) staff       (20)     3171 2024-02-27 21:31:05.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/amber_tests.py
+-rw-r--r--   0 simon      (501) staff       (20)     3590 2024-03-11 17:05:31.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/line_locate_point.py
+-rw-r--r--   0 simon      (501) staff       (20)     1841 2024-04-19 16:19:10.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/sorensen_dice_coefficient.py
+-rw-r--r--   0 simon      (501) staff       (20)     3182 2024-02-24 20:57:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/multifrm_to_points.py
+-rw-r--r--   0 simon      (501) staff       (20)       69 2024-03-18 18:17:24.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/lcs.py
+-rw-r--r--   0 simon      (501) staff       (20)    12448 2024-04-09 14:14:37.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/two_fish_feature_extractor_040924.py
+-rw-r--r--   0 simon      (501) staff       (20)     6119 2024-04-20 17:58:22.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/ez_path_plot.py
+-rw-r--r--   0 simon      (501) staff       (20)     7535 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/egocentrical_aligner.py
+-rw-r--r--   0 simon      (501) staff       (20)     2350 2024-03-12 17:58:33.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/add_body_part.py
+-rw-r--r--   0 simon      (501) staff       (20)     1008 2024-03-12 13:29:20.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/grubbs_test.py
+-rw-r--r--   0 simon      (501) staff       (20)     3399 2024-02-16 01:12:37.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/slide_circ_mean.py
+-rw-r--r--   0 simon      (501) staff       (20)     1835 2024-03-28 22:56:59.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/calinski_harabasz.py
+-rw-r--r--   0 simon      (501) staff       (20)     1282 2024-02-27 21:31:05.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/roi_feature_visualizer_example.py
+-rw-r--r--   0 simon      (501) staff       (20)    10076 2024-03-22 16:51:40.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/spontaneuous_alternation_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)      895 2024-03-12 14:09:55.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/runs_test.py
+-rw-r--r--   0 simon      (501) staff       (20)     2516 2024-04-06 11:33:24.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/pct_counts_in_top_N.py
+-rw-r--r--   0 simon      (501) staff       (20)     1095 2024-04-19 18:37:50.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/concordance_ratio.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:46:33.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     2287 2024-03-25 16:45:04.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/total_variation_distance.py
+-rw-r--r--   0 simon      (501) staff       (20)     3056 2024-02-27 21:31:05.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/crop_single_polygon.py
+-rw-r--r--   0 simon      (501) staff       (20)    15977 2024-04-23 22:52:42.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/ROI_analyzer.py
+-rw-r--r--   0 simon      (501) staff       (20)     8010 2024-03-24 19:48:22.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/joint_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)     1529 2024-04-19 15:08:24.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/segment_image_horizontal.py
+-rw-r--r--   0 simon      (501) staff       (20)    11145 2024-04-15 15:02:56.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/clip_multiple_videos_by_frame_numbers.py
+-rw-r--r--   0 simon      (501) staff       (20)     2552 2024-04-02 14:48:59.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/elliptic_envelope.py
+-rw-r--r--   0 simon      (501) staff       (20)     1016 2024-03-14 14:57:29.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/roi_definition_csvs_to_h5.py.zip
+-rw-r--r--   0 simon      (501) staff       (20)     1276 2024-03-12 17:58:38.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/add_body_part.py.zip
+-rw-r--r--   0 simon      (501) staff       (20)      921 2024-02-26 15:46:14.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/roi_feature_visualizer_example.py.zip
+-rw-r--r--   0 simon      (501) staff       (20)     2631 2024-04-05 16:23:07.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/sliding_crosscorrelation.py
+-rw-r--r--   0 simon      (501) staff       (20)     1274 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/count_values_in_range.py
+-rw-r--r--   0 simon      (501) staff       (20)     2174 2024-03-14 14:56:26.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/roi_definition_csvs_to_h5.py
+-rw-r--r--   0 simon      (501) staff       (20)     1656 2024-03-30 18:32:44.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/distance_velocity.py
+-rw-r--r--   0 simon      (501) staff       (20)     5011 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/graph_creator.py
+-rw-r--r--   0 simon      (501) staff       (20)     5666 2024-04-11 15:28:58.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/line_plot_plotly.py
+-rw-r--r--   0 simon      (501) staff       (20)     3954 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/termite_rois.csv
+-rw-r--r--   0 simon      (501) staff       (20)     1351 2024-03-26 21:10:40.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/unsupervised_lof.py
+-rw-r--r--   0 simon      (501) staff       (20)     2553 2024-03-11 15:09:38.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/siegel_tukey.py
+-rw-r--r--   0 simon      (501) staff       (20)      958 2024-03-13 18:05:08.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/berger_parker.py
+-rw-r--r--   0 simon      (501) staff       (20)     4177 2024-04-10 01:56:43.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/isolation_forest.py
+-rw-r--r--   0 simon      (501) staff       (20)     2845 2024-03-28 19:23:54.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/davis_bouldin.py
+-rw-r--r--   0 simon      (501) staff       (20)     4094 2024-04-10 14:09:54.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/vertical_video_concatenator.py
+-rw-r--r--   0 simon      (501) staff       (20)     2770 2024-04-07 19:14:13.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/batch_video_to_greyscale.py
+-rw-r--r--   0 simon      (501) staff       (20)     7215 2024-02-26 15:46:14.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/crop_circles_pop_up.py
+-rw-r--r--   0 simon      (501) staff       (20)     1410 2024-03-19 12:49:24.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/heading.py
+-rw-r--r--   0 simon      (501) staff       (20)     2243 2024-03-13 18:35:02.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/piotr_120324 2.py.zip
+-rw-r--r--   0 simon      (501) staff       (20)      736 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/mutual_exclusive.py
+-rw-r--r--   0 simon      (501) staff       (20)     2278 2024-05-04 19:11:33.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/mahalanobis.py
+-rw-r--r--   0 simon      (501) staff       (20)     2907 2024-03-14 19:31:25.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/grangercausalitytests.py
+-rw-r--r--   0 simon      (501) staff       (20)     2432 2024-03-19 20:48:43.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/multiframe_is_shape_covered.py
+-rw-r--r--   0 simon      (501) staff       (20)      592 2024-02-27 21:31:33.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/redis.py
+-rw-r--r--   0 simon      (501) staff       (20)     2893 2024-02-26 20:49:33.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/video_color.py
+-rw-r--r--   0 simon      (501) staff       (20)     2055 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/graph_3d_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)     6186 2024-03-18 12:44:45.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/piotr_120324.py
+-rw-r--r--   0 simon      (501) staff       (20)     5515 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/video_rotator.py
+-rw-r--r--   0 simon      (501) staff       (20)     1004 2024-03-12 13:11:45.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/hartley_fmax.py
+-rw-r--r--   0 simon      (501) staff       (20)       84 2024-04-03 17:05:23.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/calc_N_degree_direction_switches.py
+-rw-r--r--   0 simon      (501) staff       (20)     2307 2024-02-27 21:31:33.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/fix_clahe.py
+-rw-r--r--   0 simon      (501) staff       (20)     1836 2024-03-10 15:38:46.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/cochran_q.py
+-rw-r--r--   0 simon      (501) staff       (20)      682 2024-03-13 19:19:43.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/menhinicks_index.py
+-rw-r--r--   0 simon      (501) staff       (20)      493 2024-05-02 16:25:29.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/lbp.py
+-rw-r--r--   0 simon      (501) staff       (20)     2932 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/add_probability_cnt_features.py
+-rw-r--r--   0 simon      (501) staff       (20)     1559 2024-04-19 15:50:37.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/brillouins_index.py
+-rw-r--r--   0 simon      (501) staff       (20)    13575 2024-03-20 11:47:11.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/spontanous_alternations.py
+-rw-r--r--   0 simon      (501) staff       (20)     1951 2024-05-03 14:45:28.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/eta_squared.py
+-rw-r--r--   0 simon      (501) staff       (20)     2268 2024-03-13 13:59:07.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/piotr_120324.py.zip
+-rw-r--r--   0 simon      (501) staff       (20)     4655 2024-03-06 18:18:27.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/velocity_aggregator.py
+-rw-r--r--   0 simon      (501) staff       (20)     1619 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/make_splash.py
+-rw-r--r--   0 simon      (501) staff       (20)     4478 2024-04-08 20:43:42.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/abod.py
+-rw-r--r--   0 simon      (501) staff       (20)    37024 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/fish_feature_extractor_2023_version_5.py
+-rw-r--r--   0 simon      (501) staff       (20)     1374 2024-04-18 13:56:20.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/violin.py
+-rw-r--r--   0 simon      (501) staff       (20)     1073 2024-03-13 16:46:16.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/simpson_diversity_index.py
+-rw-r--r--   0 simon      (501) staff       (20)     4485 2024-04-14 19:07:54.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/clip_videos_by_frm.py
+-rw-r--r--   0 simon      (501) staff       (20)      770 2024-05-02 20:50:37.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/fleiss_kappa.py
+-rw-r--r--   0 simon      (501) staff       (20)     2396 2024-03-17 16:55:38.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/piotr_120324 4.py.zip
+-rw-r--r--   0 simon      (501) staff       (20)     1106 2024-04-18 13:46:43.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/rotate image.py
+-rw-r--r--   0 simon      (501) staff       (20)     1214 2024-05-03 17:07:43.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/jaccard_distance.py
+-rw-r--r--   0 simon      (501) staff       (20)     5336 2024-02-10 20:28:08.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/geometry_ex.py
+-rw-r--r--   0 simon      (501) staff       (20)     1613 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/time_stamp_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     1505 2024-03-28 14:36:24.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/line_plot.py
+-rw-r--r--   0 simon      (501) staff       (20)     5515 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/video_rotator_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    15996 2024-04-09 13:41:30.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/unsupervised_outliers.py
+-rw-r--r--   0 simon      (501) staff       (20)     1378 2024-05-03 20:13:55.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/manhattan_distance.py
+-rw-r--r--   0 simon      (501) staff       (20)     5690 2024-02-10 20:28:08.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/statistics_ex.py
+-rw-r--r--   0 simon      (501) staff       (20)    16646 2024-04-22 16:43:10.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/ROI_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)     1391 2024-03-18 23:21:46.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/sliding_displacement.py
+-rw-r--r--   0 simon      (501) staff       (20)     7819 2024-04-18 14:47:28.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/path_plots.py
+-rw-r--r--   0 simon      (501) staff       (20)      925 2024-03-11 13:06:04.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/wald_wolfowitz.py
+-rw-r--r--   0 simon      (501) staff       (20)     2425 2024-05-03 15:57:50.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/relative_risk.py
+-rw-r--r--   0 simon      (501) staff       (20)     1814 2024-04-05 14:36:58.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/sliding_autoc.py
+-rw-r--r--   0 simon      (501) staff       (20)     2369 2024-03-14 17:07:10.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/linestring_path.py
+-rw-r--r--   0 simon      (501) staff       (20)     2233 2024-03-18 15:20:48.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/cronbach_alpha.py
+-rw-r--r--   0 simon      (501) staff       (20)     2809 2024-03-08 21:15:58.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/mcnamar.py
+-rw-r--r--   0 simon      (501) staff       (20)     6507 2024-05-06 12:58:30.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/contrast.py
+-rw-r--r--   0 simon      (501) staff       (20)    37022 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/fish_feature_extractor_2023_version_4.py
+-rw-r--r--   0 simon      (501) staff       (20)     6220 2024-02-24 20:57:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/AmberFeatureExtractor.py.zip
+-rw-r--r--   0 simon      (501) staff       (20)     1157 2024-05-02 20:32:28.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/youden_j.py
+-rw-r--r--   0 simon      (501) staff       (20)     1933 2024-04-10 15:09:25.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/mosaic.py
+-rw-r--r--   0 simon      (501) staff       (20)      441 2024-04-12 17:03:24.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/bouts_df
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-05-06 15:36:55.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/color_filtering.py
+-rw-r--r--   0 simon      (501) staff       (20)    69423 2024-02-20 14:30:23.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/amber_featurizer.py
+-rw-r--r--   0 simon      (501) staff       (20)     6286 2024-04-17 19:28:51.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/make_path_plot.py
+-rw-r--r--   0 simon      (501) staff       (20)      837 2024-03-13 18:56:21.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/margalef_diversification_index.py
+-rw-r--r--   0 simon      (501) staff       (20)      997 2024-03-17 17:49:00.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/biweight_midcorrelation.py
+-rw-r--r--   0 simon      (501) staff       (20)     2186 2024-03-18 15:31:23.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/madmedianrule.py
+-rw-r--r--   0 simon      (501) staff       (20)     2915 2024-04-01 14:12:59.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/adjusted_rand_score.py
+-rw-r--r--   0 simon      (501) staff       (20)     2068 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/convex_hull_scratch_2.py
+-rw-r--r--   0 simon      (501) staff       (20)     1957 2024-04-12 14:55:03.000000 Simba-UW-tf-dev-1.91.6/simba/sandbox/plotly_gantt.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/
+-rw-r--r--   0 simon      (501) staff       (20)     8538 2024-02-23 18:25:51.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/directing_animals_to_bodypart_visualizer.py
+-rw-r--r--   0 simon      (501) staff       (20)    10307 2024-05-06 15:39:18.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/gantt_creator.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/tools/
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:43:56.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/tools/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     5946 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/tools/tkinter_tools.py
+-rw-r--r--   0 simon      (501) staff       (20)    23490 2024-04-29 16:23:41.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/ROI_plotter_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-25 18:27:39.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)    19270 2024-03-31 17:21:01.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/shap_agg_stats_visualizer.py
+-rw-r--r--   0 simon      (501) staff       (20)    12956 2024-05-06 15:39:18.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/gantt_creator_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    15819 2024-04-25 18:19:38.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/heat_mapper_clf_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    10620 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/probability_plot_creator.py
+-rw-r--r--   0 simon      (501) staff       (20)     8467 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/circular_plotting.py
+-rw-r--r--   0 simon      (501) staff       (20)    16960 2024-05-06 15:39:18.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/plot_clf_results.py
+-rw-r--r--   0 simon      (501) staff       (20)    10328 2024-04-25 15:48:10.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/ez_path_plot.py
+-rw-r--r--   0 simon      (501) staff       (20)    17432 2024-04-17 23:57:27.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/plot_clf_results_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    21343 2024-04-29 18:50:27.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/ROI_feature_visualizer.py
+-rw-r--r--   0 simon      (501) staff       (20)    14847 2024-05-06 15:39:18.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/heat_mapper_location.py
+-rw-r--r--   0 simon      (501) staff       (20)    13512 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/probability_plot_creator_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     5253 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/interactive_probability_grapher.py
+-rw-r--r--   0 simon      (501) staff       (20)     6517 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/plot_pose_in_dir.py
+-rw-r--r--   0 simon      (501) staff       (20)    20950 2024-04-11 20:25:55.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/single_run_model_validation_video.py
+-rw-r--r--   0 simon      (501) staff       (20)     8732 2024-04-11 20:42:04.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/frame_mergerer_ffmpeg.py
+-rw-r--r--   0 simon      (501) staff       (20)    10667 2024-04-03 23:24:04.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/pose_plotter_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    16477 2024-04-25 18:30:53.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/directing_animals_visualizer_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    11565 2024-04-28 20:02:42.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/clf_validator.py
+-rw-r--r--   0 simon      (501) staff       (20)    23459 2024-04-25 18:18:16.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/path_plotter_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    24745 2024-05-06 18:42:00.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/ROI_feature_visualizer_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    11824 2024-04-17 19:58:21.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/data_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)    13091 2024-03-26 23:49:10.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/spontaneous_alternation_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)    21979 2024-04-25 18:18:16.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/path_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)    16926 2024-04-25 19:01:12.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/distance_plotter_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    17511 2024-04-28 19:58:43.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/ROI_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)    10034 2024-03-19 12:54:07.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/geometry_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)    15989 2024-04-28 20:02:42.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/clf_validator_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    14224 2024-04-25 18:19:38.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/heat_mapper_clf.py
+-rw-r--r--   0 simon      (501) staff       (20)    11994 2024-04-11 22:38:54.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/distance_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)    19073 2024-04-11 20:26:33.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/single_run_model_validation_video_mp.py
+-rw-r--r--   0 simon      (501) staff       (20)    12552 2024-04-25 18:30:28.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/directing_animals_visualizer.py
+-rw-r--r--   0 simon      (501) staff       (20)    11453 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/circular_feature_overlay_plotter.py
+-rw-r--r--   0 simon      (501) staff       (20)    14663 2024-05-06 15:39:18.000000 Simba-UW-tf-dev-1.91.6/simba/plotting/heat_mapper_location_mp.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/dash_app/
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:44:15.000000 Simba-UW-tf-dev-1.91.6/simba/dash_app/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    72715 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/dash_app/SimBA_dash_app.py
+-rw-r--r--   0 simon      (501) staff       (20)     4965 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/dash_app/run_dash_tkinter.py
+-rw-r--r--   0 simon      (501) staff       (20)    47546 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/dash_app/dash_app.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/
+-rw-r--r--   0 simon      (501) staff       (20)    13060 2024-04-26 18:13:38.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/spontaneous_alternation_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)    11813 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/agg_clf_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-21 11:48:06.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)    13224 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/severity_bout_based_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)    39110 2024-03-19 12:54:07.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/interpolation_smoothing.py
+-rw-r--r--   0 simon      (501) staff       (20)    10968 2024-02-21 19:10:40.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/directing_animal_to_bodypart.py
+-rw-r--r--   0 simon      (501) staff       (20)     9580 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/timebins_clf_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)    20617 2024-04-18 21:13:37.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/fsttc_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     4872 2024-04-26 15:18:54.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/boolean_conditional_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     7117 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/interpolate_pose.py
+-rw-r--r--   0 simon      (501) staff       (20)    15989 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/directing_other_animals_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     8957 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/gibbs_sampler.py
+-rw-r--r--   0 simon      (501) staff       (20)    10054 2024-04-04 16:23:22.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/timebins_movement_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     5255 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/severity_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)    18517 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/pup_retrieval_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     3118 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/pybursts_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)    13660 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/severity_frame_based_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     8738 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/mutual_exclusivity_corrector.py
+-rw-r--r--   0 simon      (501) staff       (20)    12919 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/kleinberg_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)    10196 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/data_processors/movement_calculator.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/model/
+-rw-r--r--   0 simon      (501) staff       (20)    23782 2024-04-16 15:02:05.000000 Simba-UW-tf-dev-1.91.6/simba/model/train_rf.py
+-rw-r--r--   0 simon      (501) staff       (20)     4969 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/model/inference_batch.py
+-rw-r--r--   0 simon      (501) staff       (20)    14036 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/model/train_multiclass_rf.py
+-rw-r--r--   0 simon      (501) staff       (20)     3937 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/model/inference_multiclass_batch.py
+-rw-r--r--   0 simon      (501) staff       (20)    15931 2024-02-20 14:30:06.000000 Simba-UW-tf-dev-1.91.6/simba/model/grid_search_multiclass_rf.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:41:19.000000 Simba-UW-tf-dev-1.91.6/simba/model/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    16987 2024-02-22 11:58:09.000000 Simba-UW-tf-dev-1.91.6/simba/model/grid_search_rf.py
+-rw-r--r--   0 simon      (501) staff       (20)     3768 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/model/inference_validation.py
+-rw-r--r--   0 simon      (501) staff       (20)     6872 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/model/train_multilabel_rf.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/
+-rw-r--r--   0 simon      (501) staff       (20)    11198 2024-04-25 19:50:25.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_time_bin_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-25 18:17:26.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)    50018 2024-04-24 14:43:27.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_define.py
+-rw-r--r--   0 simon      (501) staff       (20)     3616 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_reset.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     9876 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_size_standardizer.py
+-rw-r--r--   0 simon      (501) staff       (20)    18552 2024-04-28 20:07:14.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_analyzer.py
+-rw-r--r--   0 simon      (501) staff       (20)    15408 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_feature_analyzer.py
+-rw-r--r--   0 simon      (501) staff       (20)     4386 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_multiply.py
+-rw-r--r--   0 simon      (501) staff       (20)     2313 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_size_calculations.py
+-rw-r--r--   0 simon      (501) staff       (20)     3716 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_zoom.py
+-rw-r--r--   0 simon      (501) staff       (20)    12313 2024-04-25 16:23:13.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_directing_analyzer.py
+-rw-r--r--   0 simon      (501) staff       (20)    11974 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_move_shape.py
+-rw-r--r--   0 simon      (501) staff       (20)     5470 2024-02-21 03:51:46.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_menus.py
+-rw-r--r--   0 simon      (501) staff       (20)    16129 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_clf_calculator.py
+-rw-r--r--   0 simon      (501) staff       (20)    29612 2024-04-24 14:39:14.000000 Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_image.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/
+-rw-r--r--   0 simon      (501) staff       (20)    10711 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/sleap_csv_importer.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/misc/
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:47:31.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/misc/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     8084 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/misc/apt_trk_importer.py
+-rw-r--r--   0 simon      (501) staff       (20)     2577 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/read_DANNCE_mat.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-03-22 19:49:42.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)    14268 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/sleap_h5_importer.py
+-rw-r--r--   0 simon      (501) staff       (20)     8161 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/madlc_importer.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    13672 2024-02-20 21:35:22.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/sleap_slp_importer.py
+-rw-r--r--   0 simon      (501) staff       (20)     8645 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/import_mars.py
+-rw-r--r--   0 simon      (501) staff       (20)     7464 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/dlc_importer_csv.py
+-rw-r--r--   0 simon      (501) staff       (20)     8417 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_importers/trk_importer.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/
+-rw-r--r--   0 simon      (501) staff       (20)     8196 2024-03-19 18:18:43.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/.DS_Store
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/bp_names/
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:47:10.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/bp_names/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     4485 2024-03-04 19:10:54.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/bp_names/bp_names.csv
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/no_animals/
+-rw-r--r--   0 simon      (501) staff       (20)       27 2024-03-04 19:10:54.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/no_animals/no_animals.csv
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:47:18.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/no_animals/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:47:05.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/__init__.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/configuration_names/
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:47:14.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/configuration_names/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)      273 2024-03-04 19:10:54.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/configuration_names/pose_config_names.csv
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/
+-rw-r--r--   0 simon      (501) staff       (20)    39805 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/8.png
+-rw-r--r--   0 simon      (501) staff       (20)    62501 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/9.png
+-rw-r--r--   0 simon      (501) staff       (20)     6172 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/12.png
+-rw-r--r--   0 simon      (501) staff       (20)    34231 2024-02-20 18:50:39.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/13.png
+-rw-r--r--   0 simon      (501) staff       (20)    69501 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/11.png
+-rw-r--r--   0 simon      (501) staff       (20)    69410 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/10.png
+-rw-r--r--   0 simon      (501) staff       (20)    16000 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/4.png
+-rw-r--r--   0 simon      (501) staff       (20)    28150 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/5.png
+-rw-r--r--   0 simon      (501) staff       (20)    31140 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/7.png
+-rw-r--r--   0 simon      (501) staff       (20)    30634 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/6.png
+-rw-r--r--   0 simon      (501) staff       (20)    15417 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/2.png
+-rw-r--r--   0 simon      (501) staff       (20)    15786 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/3.png
+-rw-r--r--   0 simon      (501) staff       (20)    18939 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/1.png
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/
+-rw-r--r--   0 simon      (501) staff       (20)   120376 2024-05-06 17:16:17.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/video_processing.py
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-03-26 15:01:23.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)     5577 2024-04-08 11:29:52.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/roi_selector_circle.py
+-rw-r--r--   0 simon      (501) staff       (20)     9073 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/px_to_mm.py
+-rw-r--r--   0 simon      (501) staff       (20)    35053 2024-02-26 15:42:07.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/batch_process_menus.py
+-rw-r--r--   0 simon      (501) staff       (20)    11439 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/multi_cropper.py
+-rw-r--r--   0 simon      (501) staff       (20)     3066 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/extract_frames.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     6598 2024-02-26 21:50:01.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/roi_selector.py
+-rw-r--r--   0 simon      (501) staff       (20)    10007 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/calculate_px_dist.py
+-rw-r--r--   0 simon      (501) staff       (20)     3671 2024-05-06 15:52:02.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/brightness_contrast_ui.py
+-rw-r--r--   0 simon      (501) staff       (20)     5963 2024-02-27 21:31:05.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/roi_selector_polygon.py
+-rw-r--r--   0 simon      (501) staff       (20)     4926 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/extract_seqframes.py
+-rw-r--r--   0 simon      (501) staff       (20)    15117 2024-04-11 20:42:04.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/batch_process_create_ffmpeg_commands.py
+-rw-r--r--   0 simon      (501) staff       (20)     3595 2024-05-06 15:51:58.000000 Simba-UW-tf-dev-1.91.6/simba/video_processors/clahe_ui.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/outlier_tools/
+-rw-r--r--   0 simon      (501) staff       (20)     7837 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/outlier_tools/outlier_corrector_movement.py
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/outlier_tools/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    14462 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/outlier_tools/outlier_corrector_location_advanced.py
+-rw-r--r--   0 simon      (501) staff       (20)    13117 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/outlier_tools/outlier_corrector_movement_advanced.py
+-rw-r--r--   0 simon      (501) staff       (20)    10396 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/outlier_tools/outlier_corrector_location.py
+-rw-r--r--   0 simon      (501) staff       (20)     2751 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/outlier_tools/skip_outlier_correction.py
+-rw-r--r--   0 simon      (501) staff       (20)    82263 2024-05-06 15:51:58.000000 Simba-UW-tf-dev-1.91.6/simba/SimBA.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/assets/
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/assets/unsupervised/
+-rw-r--r--   0 simon      (501) staff       (20)   109483 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/unsupervised/model_names.parquet
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:36.000000 Simba-UW-tf-dev-1.91.6/simba/assets/unsupervised/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    14175 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/unsupervised/features.csv
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/
+-rw-r--r--   0 simon      (501) staff       (20)     1177 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/down_arrow.jpg
+-rw-r--r--   0 simon      (501) staff       (20)     1733 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/intruder_shape.jpg
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/feature_categories/
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:25.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/feature_categories/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    17420 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/feature_categories/shap_feature_categories.csv
+-rw-r--r--   0 simon      (501) staff       (20)     1665 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/resident_shape.jpg
+-rw-r--r--   0 simon      (501) staff       (20)     2415 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/resident_intruder_shape.jpg
+-rw-r--r--   0 simon      (501) staff       (20)     2012 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/animal_distances.jpg
+-rw-r--r--   0 simon      (501) staff       (20)     4422 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/baseline_scale.jpg
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:21.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)   353824 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/ubuntu.regular.ttf
+-rw-r--r--   0 simon      (501) staff       (20)     6672 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/side_scale.jpg
+-rw-r--r--   0 simon      (501) staff       (20)   189004 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/UbuntuMono-Regular.ttf
+-rw-r--r--   0 simon      (501) staff       (20)     2737 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/side_scale_5.jpg
+-rw-r--r--   0 simon      (501) staff       (20)     1785 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/intruder_movement.jpg
+-rw-r--r--   0 simon      (501) staff       (20)     1435 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/resident_movement.jpg
+-rw-r--r--   0 simon      (501) staff       (20)     3134 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/color_bar.jpg
+-rw-r--r--   0 simon      (501) staff       (20)     2120 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/shap/resident_intruder_movement.jpg
+-rw-r--r--   0 simon      (501) staff       (20)    10244 2024-05-06 14:15:23.000000 Simba-UW-tf-dev-1.91.6/simba/assets/.DS_Store
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/assets/lookups/
+-rw-r--r--   0 simon      (501) staff       (20)   270783 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/lookups/model_names.parquet
+-rw-r--r--   0 simon      (501) staff       (20)     2987 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/lookups/feature_extraction_headers.csv
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:11.000000 Simba-UW-tf-dev-1.91.6/simba/assets/lookups/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    26256 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/lookups/critical_values_05.pickle
+-rw-r--r--   0 simon      (501) staff       (20)    14175 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/lookups/features.csv
+-rw-r--r--   0 simon      (501) staff       (20)    14175 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/lookups/unsupervised_example_x.csv
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:41:54.000000 Simba-UW-tf-dev-1.91.6/simba/assets/__init__.py
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/assets/stl/
+-rw-r--r--   0 simon      (501) staff       (20)   551576 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/stl/operant_tray.stl
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:31.000000 Simba-UW-tf-dev-1.91.6/simba/assets/stl/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)    67647 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/stl/operant_lever.stl
+-rw-r--r--   0 simon      (501) staff       (20)    92896 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/stl/operant_walls.stl
+-rw-r--r--   0 simon      (501) staff       (20)  4759984 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/stl/grid_floor.stl
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/assets/img/
+-rw-r--r--   0 simon      (501) staff       (20)   489479 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/img/splash_2024.mp4
+-rw-r--r--   0 simon      (501) staff       (20)    79863 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/img/bg_2024.png
+-rw-r--r--   0 simon      (501) staff       (20)   399272 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/img/about_me.png
+-rw-r--r--   0 simon      (501) staff       (20)   117108 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/img/splash.mp4
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:45:02.000000 Simba-UW-tf-dev-1.91.6/simba/assets/img/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)   322242 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/img/bg_2.png
+-rw-r--r--   0 simon      (501) staff       (20)      165 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/img/~$splash.pptx
+-rw-r--r--   0 simon      (501) staff       (20)    69267 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/img/splash.pptx
+-rw-r--r--   0 simon      (501) staff       (20)   204362 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/img/bg.png
+-rw-r--r--   0 simon      (501) staff       (20)   189004 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/UbuntuMono-Regular.ttf
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/
+-rw-r--r--   0 simon      (501) staff       (20)     1350 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/factory.png
+-rw-r--r--   0 simon      (501) staff       (20)     1413 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/cluster.png
+-rw-r--r--   0 simon      (501) staff       (20)     1340 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/load.png
+-rw-r--r--   0 simon      (501) staff       (20)     4507 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/gif.png
+-rw-r--r--   0 simon      (501) staff       (20)     4566 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/pose.png
+-rw-r--r--   0 simon      (501) staff       (20)     1943 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/features.png
+-rw-r--r--   0 simon      (501) staff       (20)     6148 2024-04-09 15:42:22.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/.DS_Store
+-rw-r--r--   0 simon      (501) staff       (20)     4896 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/settings.png
+-rw-r--r--   0 simon      (501) staff       (20)     2090 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/stopwatch.png
+-rw-r--r--   0 simon      (501) staff       (20)     1252 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/link.png
+-rw-r--r--   0 simon      (501) staff       (20)    14250 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/dash_simba.css
+-rw-r--r--   0 simon      (501) staff       (20)      917 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/documentation.png
+-rw-r--r--   0 simon      (501) staff       (20)     4503 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/fps.png
+-rw-r--r--   0 simon      (501) staff       (20)     1299 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/dimensionality_reduction.png
+-rw-r--r--   0 simon      (501) staff       (20)     4823 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/roi.png
+-rw-r--r--   0 simon      (501) staff       (20)   171446 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/simba_logo_2.png
+-rw-r--r--   0 simon      (501) staff       (20)      920 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/superimpose.png
+-rw-r--r--   0 simon      (501) staff       (20)     1136 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/label.png
+-rw-r--r--   0 simon      (501) staff       (20)     1016 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/change.png
+-rw-r--r--   0 simon      (501) staff       (20)    59896 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/readthedocs_logo.png
+-rw-r--r--   0 simon      (501) staff       (20)     1124 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/crop.png
+-rw-r--r--   0 simon      (501) staff       (20)     2146 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/rotate.png
+-rw-r--r--   0 simon      (501) staff       (20)     1921 2024-02-26 14:29:54.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/circle.png
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:44:37.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     1057 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/path.png
+-rw-r--r--   0 simon      (501) staff       (20)     1148 2024-02-26 20:39:14.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/polygon.png
+-rw-r--r--   0 simon      (501) staff       (20)      950 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/clip.png
+-rw-r--r--   0 simon      (501) staff       (20)     2121 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/restart.png
+-rw-r--r--   0 simon      (501) staff       (20)     4653 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/calipher.png
+-rw-r--r--   0 simon      (501) staff       (20)     1291 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/add_on.png
+-rw-r--r--   0 simon      (501) staff       (20)     4695 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/create.png
+-rw-r--r--   0 simon      (501) staff       (20)    78182 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/SimBA_logo.ico
+-rw-r--r--   0 simon      (501) staff       (20)     1067 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/print.png
+-rw-r--r--   0 simon      (501) staff       (20)     4653 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/clf.png
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat_icons/
+-rw-r--r--   0 simon      (501) staff       (20)     6027 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat_icons/mosaic.png
+-rw-r--r--   0 simon      (501) staff       (20)     5654 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat_icons/vertical.png
+-rw-r--r--   0 simon      (501) staff       (20)        0 2024-02-07 19:44:45.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat_icons/__init__.py
+-rw-r--r--   0 simon      (501) staff       (20)     5542 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat_icons/horizontal.png
+-rw-r--r--   0 simon      (501) staff       (20)     5939 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat_icons/mixed_mosaic.png
+-rw-r--r--   0 simon      (501) staff       (20)     4256 2024-05-06 13:20:42.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/brightness.png
+-rw-r--r--   0 simon      (501) staff       (20)     2060 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/merge.png
+-rw-r--r--   0 simon      (501) staff       (20)     1252 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/clean.png
+-rw-r--r--   0 simon      (501) staff       (20)     4725 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/clf_2.png
+-rw-r--r--   0 simon      (501) staff       (20)     4795 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/visualize.png
+-rw-r--r--   0 simon      (501) staff       (20)     2142 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat.png
+-rw-r--r--   0 simon      (501) staff       (20)     1474 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/boris.png
+-rw-r--r--   0 simon      (501) staff       (20)     4804 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/frames.png
+-rw-r--r--   0 simon      (501) staff       (20)     2425 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/video.png
+-rw-r--r--   0 simon      (501) staff       (20)     2089 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/sample.png
+-rw-r--r--   0 simon      (501) staff       (20)     1471 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/metrics.png
+-rw-r--r--   0 simon      (501) staff       (20)     4555 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/grey.png
+-rw-r--r--   0 simon      (501) staff       (20)      930 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/exit.png
+-rw-r--r--   0 simon      (501) staff       (20)     4751 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/outlier.png
+-rw-r--r--   0 simon      (501) staff       (20)     4392 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/clahe.png
+-rw-r--r--   0 simon      (501) staff       (20)     4637 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/trash.png
+-rw-r--r--   0 simon      (501) staff       (20)     1239 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/about.png
+-rw-r--r--   0 simon      (501) staff       (20)     4666 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/convert.png
+-rw-r--r--   0 simon      (501) staff       (20)    93229 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/SimBA_logo.icns
+-rw-r--r--   0 simon      (501) staff       (20)      991 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/reorganize.png
+-rw-r--r--   0 simon      (501) staff       (20)     4784 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/browse.png
+-rw-r--r--   0 simon      (501) staff       (20)    30707 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/SimBA_logo.png
+-rw-r--r--   0 simon      (501) staff       (20)     2293 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/ethovision.png
+-rw-r--r--   0 simon      (501) staff       (20)     1018 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/icons/close.png
+-rw-r--r--   0 simon      (501) staff       (20)    13672 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/dash_simba_base.css
+-rw-r--r--   0 simon      (501) staff       (20)    31812 2024-02-07 18:56:19.000000 Simba-UW-tf-dev-1.91.6/simba/assets/TheGoldenLab.PNG
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/Simba_UW_tf_dev.egg-info/
+-rw-r--r--   0 simon      (501) staff       (20)     2797 2024-05-06 18:51:25.000000 Simba-UW-tf-dev-1.91.6/Simba_UW_tf_dev.egg-info/PKG-INFO
+-rw-r--r--   0 simon      (501) staff       (20)    23887 2024-05-06 18:51:25.000000 Simba-UW-tf-dev-1.91.6/Simba_UW_tf_dev.egg-info/SOURCES.txt
+-rw-r--r--   0 simon      (501) staff       (20)       44 2024-05-06 18:51:25.000000 Simba-UW-tf-dev-1.91.6/Simba_UW_tf_dev.egg-info/entry_points.txt
+-rw-r--r--   0 simon      (501) staff       (20)      797 2024-05-06 18:51:25.000000 Simba-UW-tf-dev-1.91.6/Simba_UW_tf_dev.egg-info/requires.txt
+-rw-r--r--   0 simon      (501) staff       (20)        6 2024-05-06 18:51:25.000000 Simba-UW-tf-dev-1.91.6/Simba_UW_tf_dev.egg-info/top_level.txt
+-rw-r--r--   0 simon      (501) staff       (20)        1 2024-05-06 18:51:25.000000 Simba-UW-tf-dev-1.91.6/Simba_UW_tf_dev.egg-info/dependency_links.txt
+-rw-r--r--   0 simon      (501) staff       (20)    35127 2024-02-07 18:56:10.000000 Simba-UW-tf-dev-1.91.6/LICENSE
+drwxr-xr-x   0 simon      (501) staff       (20)        0 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/tests/
+-rw-r--r--   0 simon      (501) staff       (20)     4753 2024-04-11 20:40:04.000000 Simba-UW-tf-dev-1.91.6/tests/test_data_processors.py
+-rw-r--r--   0 simon      (501) staff       (20)    13415 2024-03-01 16:43:04.000000 Simba-UW-tf-dev-1.91.6/tests/test_circlular_stats.py
+-rw-r--r--   0 simon      (501) staff       (20)    13399 2024-04-11 20:36:51.000000 Simba-UW-tf-dev-1.91.6/tests/test_stats.py
+-rw-r--r--   0 simon      (501) staff       (20)    11863 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.6/tests/test_train_model_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)     6525 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.6/tests/test_feature_extraction_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)     1739 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.6/tests/test_utils_data.py
+-rw-r--r--   0 simon      (501) staff       (20)     8120 2024-03-01 19:06:25.000000 Simba-UW-tf-dev-1.91.6/tests/test_config_reader_mixin.py
+-rw-r--r--   0 simon      (501) staff       (20)     1070 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.6/tests/test_outlier_correctors.py
+-rw-r--r--   0 simon      (501) staff       (20)     1596 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.6/tests/test_featurizers.py
+-rw-r--r--   0 simon      (501) staff       (20)     8570 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.6/tests/test_video_processors.py
+-rw-r--r--   0 simon      (501) staff       (20)     3554 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.6/tests/test_thirdparty_appenders.py
+-rw-r--r--   0 simon      (501) staff       (20)     3021 2024-02-07 18:56:20.000000 Simba-UW-tf-dev-1.91.6/tests/test_validation_clips.py
+-rw-r--r--   0 simon      (501) staff       (20)     3921 2024-04-26 17:59:40.000000 Simba-UW-tf-dev-1.91.6/tests/test_roi_tools.py
+-rw-r--r--   0 simon      (501) staff       (20)      318 2024-03-04 20:16:28.000000 Simba-UW-tf-dev-1.91.6/MANIFEST.in
+-rw-r--r--   0 simon      (501) staff       (20)    18478 2024-04-17 19:58:21.000000 Simba-UW-tf-dev-1.91.6/README.md
+-rw-r--r--   0 simon      (501) staff       (20)     1426 2024-05-06 18:51:03.000000 Simba-UW-tf-dev-1.91.6/setup.py
+-rw-r--r--   0 simon      (501) staff       (20)       38 2024-05-06 18:51:26.000000 Simba-UW-tf-dev-1.91.6/setup.cfg
```

### Comparing `Simba-UW-tf-dev-1.91.5/PKG-INFO` & `Simba-UW-tf-dev-1.91.6/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: Simba-UW-tf-dev
-Version: 1.91.5
+Version: 1.91.6
 Summary: Toolkit for computer classification of behaviors in experimental animals
 Home-page: https://github.com/sgoldenlab/simba
 Author: Simon Nilsson, Jia Jie Choong, Sophia Hwang
 Author-email: sronilsson@gmail.com
 License: GNU Lesser General Public License v3 (LGPLv3)
 Platform: UNKNOWN
 Classifier: Programming Language :: Python :: 3
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/ui/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/mutual_exclusivity_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/mutual_exclusivity_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/movement_analysis_time_bins_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/movement_analysis_time_bins_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/csv_2_parquet_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/csv_2_parquet_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/quick_path_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/quick_path_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/batch_preprocess_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/batch_preprocess_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/heatmap_location_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/heatmap_location_pop_up.py`

 * *Files 2% similar despite different names*

```diff
@@ -25,15 +25,15 @@
         self.files_found_dict = get_file_name_info_in_directory(
             directory=self.data_path, file_type=self.file_type
         )
         check_if_filepath_list_is_empty(
             filepaths=list(self.files_found_dict.keys()),
             error_msg="SIMBA ERROR: Zero files found in the project_folder/csv/outlier_corrected_movement_location directory. ",
         )
-        max_scales = list(np.linspace(5, 600, 5))
+        max_scales = list(np.arange(5, 105, 5))
         max_scales.insert(0, "Auto-compute")
         self.style_settings_frm = CreateLabelFrameWithIcon(
             parent=self.main_frm,
             header="STYLE SETTINGS",
             icon_name=Keys.DOCUMENTATION.value,
             icon_link=Links.HEATMAP_LOCATION.value,
         )
@@ -195,29 +195,29 @@
             heatmapper_clf = HeatmapperLocationSingleCore(
                 config_path=self.config_path,
                 style_attr=style_attr,
                 final_img_setting=self.heatmap_last_frm_var.get(),
                 video_setting=self.heatmap_videos_var.get(),
                 frame_setting=self.heatmap_frames_var.get(),
                 bodypart=self.bp_dropdown.getChoices(),
-                files_found=data_paths,
+                data_paths=data_paths,
             )
 
             heatmapper_clf_processor = multiprocessing.Process(heatmapper_clf.run())
             heatmapper_clf_processor.start()
 
         else:
             heatmapper_clf = HeatMapperLocationMultiprocess(
                 config_path=self.config_path,
                 style_attr=style_attr,
                 final_img_setting=self.heatmap_last_frm_var.get(),
                 video_setting=self.heatmap_videos_var.get(),
                 frame_setting=self.heatmap_frames_var.get(),
                 bodypart=self.bp_dropdown.getChoices(),
-                files_found=data_paths,
+                data_paths=data_paths,
                 core_cnt=int(self.multiprocess_dropdown.getChoices()),
             )
 
             heatmapper_clf.run()
 
 
 # _ = HeatmapLocationPopup(config_path='/Users/simon/Desktop/envs/troubleshooting/two_black_animals_14bp/project_folder/project_config.ini')
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_probability_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_probability_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/movement_analysis_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/movement_analysis_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/set_machine_model_parameters_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/set_machine_model_parameters_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/path_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/path_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/remove_roi_features_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/remove_roi_features_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/targeted_annotation_clips_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/targeted_annotation_clips_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/smoothing_interpolation_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/smoothing_interpolation_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/roi_size_standardizer_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/roi_size_standardizer_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/visualize_pose_in_dir_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/visualize_pose_in_dir_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/roi_analysis_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/roi_analysis_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/outlier_settings_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/outlier_settings_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/gantt_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/gantt_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_validation_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_validation_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/severity_analysis_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/severity_analysis_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/fsttc_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/fsttc_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/kleinberg_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/kleinberg_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/directing_other_animals_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/directing_other_animals_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/spontaneous_alternation_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/spontaneous_alternation_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/pose_reorganizer_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/pose_reorganizer_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/animal_directing_other_animals_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/animal_directing_other_animals_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/append_roi_features_animals_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/append_roi_features_animals_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_by_timebins_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_by_timebins_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/heatmap_clf_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/heatmap_clf_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/data_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/data_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/roi_features_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/roi_features_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/pup_retrieval_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/pup_retrieval_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/boolean_conditional_slicer_pup_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/boolean_conditional_slicer_pup_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/about_simba_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/about_simba_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_descriptive_statistics_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_descriptive_statistics_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/roi_tracking_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/roi_tracking_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/append_roi_features_bodypart_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/append_roi_features_bodypart_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/directing_animal_to_bodypart_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/directing_animal_to_bodypart_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_add_remove_print_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_add_remove_print_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/video_processing_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/video_processing_pop_up.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,13 +1,15 @@
 __author__ = "Simon Nilsson"
 
 import glob
 import os
+import subprocess
 import sys
 import threading
+from datetime import datetime
 from tkinter import *
 from typing import Optional, Union
 
 from PIL import Image, ImageTk
 
 import simba
 from simba.labelling.extract_labelled_frames import AnnotationFrameExtractor
@@ -27,16 +29,20 @@
 from simba.utils.enums import Dtypes, Formats, Keys, Links, Options, Paths
 from simba.utils.errors import (CountError, FrameRangeError, MixedMosaicError,
                                 NoChoosenClassifierError, NoFilesFoundError,
                                 NotDirectoryError)
 from simba.utils.printing import SimbaTimer, stdout_success
 from simba.utils.read_write import (
     check_if_hhmmss_timestamp_is_valid_part_of_video,
-    concatenate_videos_in_folder, find_all_videos_in_directory, get_fn_ext,
-    get_video_meta_data, seconds_to_timestamp)
+    concatenate_videos_in_folder, find_all_videos_in_directory,
+    find_files_of_filetypes_in_directory, get_fn_ext, get_video_meta_data,
+    seconds_to_timestamp)
+from simba.video_processors.brightness_contrast_ui import \
+    brightness_contrast_ui
+from simba.video_processors.clahe_ui import interactive_clahe_ui
 from simba.video_processors.extract_seqframes import extract_seq_frames
 from simba.video_processors.multi_cropper import MultiCropper
 from simba.video_processors.px_to_mm import get_coordinates_nilsson
 from simba.video_processors.video_processing import (
     VideoRotator, batch_convert_video_format, batch_create_frames,
     batch_video_to_greyscale, change_fps_of_multiple_videos, change_img_format,
     change_single_video_fps, clahe_enhance_video, clip_video_in_range,
@@ -51,41 +57,55 @@
 
 sys.setrecursionlimit(10**7)
 
 
 class CLAHEPopUp(PopUpMixin):
     def __init__(self):
         super().__init__(title="CLAHE VIDEO CONVERSION")
-        clahe_frm = CreateLabelFrameWithIcon(
-            parent=self.main_frm,
-            header="Contrast Limited Adaptive Histogram Equalization",
-            icon_name=Keys.DOCUMENTATION.value,
-            icon_link=Links.VIDEO_TOOLS.value,
-        )
-        selected_video = FileSelect(
-            clahe_frm,
-            "Video path ",
-            title="Select a video file",
-            file_types=[("VIDEO", Options.ALL_VIDEO_FORMAT_STR_OPTIONS.value)],
-        )
-        button_clahe = Button(
-            clahe_frm,
-            text="Apply CLAHE",
-            command=lambda: threading.Thread(
-                target=clahe_enhance_video(file_path=selected_video.file_path)
-            ).start(),
-        )
+        single_video_frm = CreateLabelFrameWithIcon(parent=self.main_frm,
+                                                    header="SINGLE VIDEO - Contrast Limited Adaptive Histogram Equalization",
+                                                    icon_name=Keys.DOCUMENTATION.value,
+                                                    icon_link=Links.VIDEO_TOOLS.value)
+        self.selected_video = FileSelect(single_video_frm, "VIDEO PATH:", title="Select a video file", file_types=[("VIDEO", Options.ALL_VIDEO_FORMAT_STR_OPTIONS.value)], lblwidth=25)
+        run_single_video_btn = Button(single_video_frm, text="Apply CLAHE on VIDEO", command=lambda: self.run_single_video(),  fg="blue")
+
+        multiple_videos_frm = CreateLabelFrameWithIcon(parent=self.main_frm,
+                                                       header="MULTIPLE VIDEOs - Contrast Limited Adaptive Histogram Equalization",
+                                                       icon_name=Keys.DOCUMENTATION.value,
+                                                       icon_link=Links.VIDEO_TOOLS.value)
+        self.selected_dir = FolderSelect(multiple_videos_frm, "VIDEO DIRECTORY PATH:", lblwidth=25)
+        run_multiple_btn = Button(multiple_videos_frm, text="Apply CLAHE on DIRECTORY", command=lambda: self.run_directory(), fg="blue")
 
-        clahe_frm.grid(row=0, sticky=W)
-        selected_video.grid(row=0, sticky=W)
-        button_clahe.grid(row=1, pady=5)
-        # self.main_frm.mainloop()
+        single_video_frm.grid(row=0, column=0, sticky=NW)
+        self.selected_video.grid(row=0, column=0, sticky=NW)
+        run_single_video_btn.grid(row=1, column=0, sticky=NW)
 
+        multiple_videos_frm.grid(row=1, column=0, sticky=NW)
+        self.selected_dir.grid(row=0, column=0, sticky=NW)
+        run_multiple_btn.grid(row=1, column=0, sticky=NW)
+        #self.main_frm.mainloop()
 
-# _ = CLAHEPopUp()
+
+    def run_single_video(self):
+        selected_video = self.selected_video.file_path
+        check_file_exist_and_readable(file_path=selected_video)
+        threading.Thread(target=clahe_enhance_video(file_path=selected_video)).start()
+
+    def run_directory(self):
+        timer = SimbaTimer(start=True)
+        video_dir = self.selected_dir.folder_path
+        check_if_dir_exists(in_dir=video_dir, source=self.__class__.__name__)
+        self.video_paths = find_files_of_filetypes_in_directory(directory=video_dir, extensions=Options.ALL_VIDEO_FORMAT_OPTIONS.value, raise_error=True)
+        for file_path in self.video_paths:
+            threading.Thread(target=clahe_enhance_video(file_path=file_path)).start()
+        timer.stop_timer()
+        stdout_success(msg=f'CLAHE enhanced {len(self.video_paths)} video(s)', elapsed_time=timer.elapsed_time_str)
+
+
+#_ = CLAHEPopUp()
 
 
 class CropVideoPopUp(PopUpMixin):
     def __init__(self):
         super().__init__(title="CROP SINGLE VIDEO")
         crop_video_lbl_frm = LabelFrame(
             self.main_frm,
@@ -2043,10 +2063,119 @@
         )
         self.root.destroy()
         _ = ClipMultipleVideosByTimestamps(
             data_dir=self.input_folder.folder_path,
             save_dir=self.output_folder.folder_path,
         )
 
+class BrightnessContrastPopUp(PopUpMixin):
+    """
+    .. image:: _static/img/brightness_contrast_ui.gif
+       :width: 700
+       :align: center
+    """
+    def __init__(self):
+        super().__init__(title="CHANGE BRIGHTNESS / CONTRAST")
+        self.datetime = datetime.now().strftime("%Y%m%d%H%M%S")
+        single_video_frm = CreateLabelFrameWithIcon(parent=self.main_frm, header="CHANGE BRIGHTNESS / CONTRAST SINGLE VIDEO", icon_name=Keys.DOCUMENTATION.value, icon_link=Links.VIDEO_TOOLS.value)
+        self.selected_video = FileSelect(single_video_frm, "VIDEO PATH:", title="Select a video file", file_types=[("VIDEO", Options.ALL_VIDEO_FORMAT_STR_OPTIONS.value)], lblwidth=25)
+        run_video_btn = Button(single_video_frm, text="RUN SINGLE VIDEO", command=lambda: self.run_video(), fg="blue")
+
+        single_video_frm.grid(row=0, column=0, sticky="NW")
+        self.selected_video.grid(row=0, column=0, sticky="NW")
+        run_video_btn.grid(row=1, column=0, sticky="NW")
+
+        video_dir_frm = CreateLabelFrameWithIcon(parent=self.main_frm, header="CHANGE BRIGHTNESS / CONTRAST MULTIPLE VIDEOS", icon_name=Keys.DOCUMENTATION.value, icon_link=Links.VIDEO_TOOLS.value)
+        self.selected_dir = FolderSelect(video_dir_frm, "VIDEO DIRECTORY PATH:", lblwidth=25)
+        run_dir_btn = Button(video_dir_frm, text="RUN VIDEO DIRECTORY", command=lambda: self.run_directory(), fg="blue")
+
+        video_dir_frm.grid(row=1, column=0, sticky="NW")
+        self.selected_dir.grid(row=0, column=0, sticky="NW")
+        run_dir_btn.grid(row=1, column=0, sticky="NW")
+        self.main_frm.mainloop()
+
+    def run_video(self):
+        video_path = self.selected_video.file_path
+        check_file_exist_and_readable(file_path=video_path)
+        self.brightness, self.contrast = brightness_contrast_ui(video_path=video_path)
+        self.video_paths = [video_path]
+        self.apply()
+
+    def run_directory(self):
+        video_dir = self.selected_dir.folder_path
+        check_if_dir_exists(in_dir=video_dir, source=self.__class__.__name__)
+        self.video_paths = find_files_of_filetypes_in_directory(directory=video_dir, extensions=Options.ALL_VIDEO_FORMAT_OPTIONS.value, raise_error=True)
+        self.brightness, self.contrast = brightness_contrast_ui(video_path=self.video_paths[0])
+        self.apply()
+
+    def apply(self):
+        timer = SimbaTimer(start=True)
+        for file_cnt, file_path in enumerate(self.video_paths):
+            video_timer = SimbaTimer(start=True)
+            dir, video_name, ext = get_fn_ext(filepath=file_path)
+            print(f'Creating copy of {video_name}...')
+            out_path = os.path.join(dir, f'{video_name}_eq_{self.datetime}{ext}')
+            cmd = f'ffmpeg -i "{file_path}" -vf "eq=brightness={self.brightness}:contrast={self.contrast}" -loglevel error -stats "{out_path}" -y'
+            subprocess.call(cmd, shell=True, stdout=subprocess.PIPE)
+            video_timer.stop_timer()
+            stdout_success(msg=f'Video {out_path} complete!', elapsed_time=video_timer.elapsed_time_str)
+        timer.stop_timer()
+        stdout_success(f'{len(self.video_paths)} video(s) converted.', elapsed_time=timer.elapsed_time_str)
+
+
+class InteractiveClahePopUp(PopUpMixin):
+    """
+    .. image:: _static/img/interactive_clahe_ui.gif
+       :width: 500
+       :align: center
+    """
+
+    def __init__(self):
+        super().__init__(title="INTERACTIVE CLAHE")
+        self.datetime = datetime.now().strftime("%Y%m%d%H%M%S")
+        single_video_frm = CreateLabelFrameWithIcon(parent=self.main_frm, header="INTERACTIVE CLAHE - SINGLE VIDEO", icon_name=Keys.DOCUMENTATION.value, icon_link=Links.VIDEO_TOOLS.value)
+        self.selected_video = FileSelect(single_video_frm, "VIDEO PATH:", title="Select a video file", file_types=[("VIDEO", Options.ALL_VIDEO_FORMAT_STR_OPTIONS.value)], lblwidth=25)
+        run_video_btn = Button(single_video_frm, text="RUN SINGLE VIDEO", command=lambda: self.run_video(), fg="blue")
+
+        single_video_frm.grid(row=0, column=0, sticky="NW")
+        self.selected_video.grid(row=0, column=0, sticky="NW")
+        run_video_btn.grid(row=1, column=0, sticky="NW")
+
+        video_dir_frm = CreateLabelFrameWithIcon(parent=self.main_frm, header="INTERACTIVE CLAHE - MULTIPLE VIDEOS", icon_name=Keys.DOCUMENTATION.value, icon_link=Links.VIDEO_TOOLS.value)
+        self.selected_dir = FolderSelect(video_dir_frm, "VIDEO DIRECTORY PATH:", lblwidth=25)
+        run_dir_btn = Button(video_dir_frm, text="RUN VIDEO DIRECTORY", command=lambda: self.run_directory(), fg="blue")
+
+        video_dir_frm.grid(row=1, column=0, sticky="NW")
+        self.selected_dir.grid(row=0, column=0, sticky="NW")
+        run_dir_btn.grid(row=1, column=0, sticky="NW")
+        self.main_frm.mainloop()
+
+    def run_video(self):
+        video_path = self.selected_video.file_path
+        check_file_exist_and_readable(file_path=video_path)
+        self.clip_limit, self.tile_size = interactive_clahe_ui(data=video_path)
+        self.video_paths = [video_path]
+        self.apply()
+
+    def run_directory(self):
+        video_dir = self.selected_dir.folder_path
+        check_if_dir_exists(in_dir=video_dir, source=self.__class__.__name__)
+        self.video_paths = find_files_of_filetypes_in_directory(directory=video_dir, extensions=Options.ALL_VIDEO_FORMAT_OPTIONS.value, raise_error=True)
+        self.clip_limit, self.tile_size = interactive_clahe_ui(data=self.video_paths[0])
+        self.apply()
+
+    def apply(self):
+        timer = SimbaTimer(start=True)
+        for file_cnt, file_path in enumerate(self.video_paths):
+            dir, video_name, ext = get_fn_ext(filepath=file_path)
+            print(f'Creating CLAHE copy of {video_name}...')
+            out_path = os.path.join(dir, f'{video_name}_CLAHE_CLIPLIMIT_{int(self.clip_limit)}_TILESIZE_{int(self.tile_size)}_{self.datetime}{ext}')
+            clahe_enhance_video(file_path=file_path, clip_limit=int(self.clip_limit), tile_grid_size=(int(self.tile_size), int(self.tile_size)), out_path=out_path)
+        timer.stop_timer()
+        stdout_success(f'{len(self.video_paths)} video(s) converted.', elapsed_time=timer.elapsed_time_str)
+
+
+
+
 
 # ClipMultipleVideosByFrameNumbers
 # ClipMultipleVideosByFrameNumbers(data_dir='/Users/simon/Desktop/envs/simba/troubleshooting/beepboop174/project_folder/videos/test', save_dir='/Users/simon/Desktop/envs/simba/troubleshooting/beepboop174/project_folder/videos/clipped')
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/validation_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/validation_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/clf_by_roi_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/clf_by_roi_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/make_path_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/make_path_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/direction_animal_to_bodypart_settings_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/direction_animal_to_bodypart_settings_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/create_user_defined_pose_configuration_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/create_user_defined_pose_configuration_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/archive_files_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/archive_files_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/pose_bp_drop_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/pose_bp_drop_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/distance_plot_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/distance_plot_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/subset_feature_extractor_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/subset_feature_extractor_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/third_party_annotator_appender_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/third_party_annotator_appender_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/pop_ups/roi_analysis_time_bins_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/pop_ups/roi_analysis_time_bins_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/video_info_ui.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/video_info_ui.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/user_defined_pose_creator.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/user_defined_pose_creator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/create_project_ui.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/create_project_ui.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/tkinter_functions.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/tkinter_functions.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/ui/machine_model_settings_ui.py` & `Simba-UW-tf-dev-1.91.6/simba/ui/machine_model_settings_ui.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/labelling/labelling_interface.py` & `Simba-UW-tf-dev-1.91.6/simba/labelling/labelling_interface.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/labelling/targeted_annotations_clips.py` & `Simba-UW-tf-dev-1.91.6/simba/labelling/targeted_annotations_clips.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/labelling/extract_labelled_frames.py` & `Simba-UW-tf-dev-1.91.6/simba/labelling/extract_labelled_frames.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/labelling/labelling_advanced_interface.py` & `Simba-UW-tf-dev-1.91.6/simba/labelling/labelling_advanced_interface.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/labelling/play_annotation_video.py` & `Simba-UW-tf-dev-1.91.6/simba/labelling/play_annotation_video.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/dbcv_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/dbcv_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/cluster_validation_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/cluster_validation_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/enums.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/enums.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/cluster_video_visualizer.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/cluster_video_visualizer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/cluster_videos_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/cluster_videos_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/transform_cluster_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/transform_cluster_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/embedding_correlations_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/embedding_correlations_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/transform_dim_reduction_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/transform_dim_reduction_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/fit_dim_reduction_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/fit_dim_reduction_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/data_extractor_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/data_extractor_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/cluster_validation_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/cluster_validation_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/fit_cluster_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/fit_cluster_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/clusterer_comparison_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/clusterer_comparison_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/grid_search_visualizer_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/grid_search_visualizer_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/cluster_xai_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/cluster_xai_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/cluster_frequentist_stats_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/cluster_frequentist_stats_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/pop_ups/print_embedding_info_popup.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/pop_ups/print_embedding_info_popup.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/dataset_creator.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/dataset_creator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/unsupervised_main.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/unsupervised_main.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/grid_search_visualizers.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/grid_search_visualizers.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/data_extractor.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/data_extractor.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/outlier_detector.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/outlier_detector.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/cluster_frequentist_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/cluster_frequentist_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/embedding_correlation_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/embedding_correlation_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/cluster_xai_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/cluster_xai_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/umap_embedder.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/umap_embedder.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/clusterer_comparison_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/clusterer_comparison_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/bout_aggregator.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/bout_aggregator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/data_map.yaml` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/data_map.yaml`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/hdbscan_clusterer.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/hdbscan_clusterer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/unsupervised/tsne.py` & `Simba-UW-tf-dev-1.91.6/simba/unsupervised/tsne.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/agg_boundary_stats.py` & `Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/agg_boundary_stats.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/boundary_menus.py` & `Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/boundary_menus.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/boundary_statistics.py` & `Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/boundary_statistics.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/find_boundaries.py` & `Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/find_boundaries.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/bounding_box_tools/visualize_boundaries.py` & `Simba-UW-tf-dev-1.91.6/simba/bounding_box_tools/visualize_boundaries.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/.DS_Store`

 * *Files 1% similar despite different names*

```diff
@@ -292,48 +292,48 @@
 00001230: 4c01 4d01 4f01 5001 5201 5b01 5c01 5e01  L.M.O.P.R.[.\.^.
 00001240: 5f01 6101 6a01 6b01 6c01 6e01 7701 7801  _.a.j.k.l.n.w.x.
 00001250: 7a01 7b01 7d01 8601 8701 8901 8a01 8c01  z.{.}...........
 00001260: 9501 9601 9801 9901 9b01 9c01 a501 b200  ................
 00001270: 0000 0000 0002 0100 0000 0000 0000 4900  ..............I.
 00001280: 0000 0000 0000 0000 0000 0000 0001 b300  ................
 00001290: 0000 0700 7300 6100 6e00 6400 6200 6f00  ....s.a.n.d.b.o.
-000012a0: 786d 6f44 4462 6c6f 6200 0000 0853 8931  xmoDDblob....S.1
-000012b0: 9d39 ecc5 4100 0000 0700 7300 6100 6e00  .9..A.....s.a.n.
+000012a0: 786d 6f44 4462 6c6f 6200 0000 0835 65bb  xmoDDblob....5e.
+000012b0: 4b98 f4c5 4100 0000 0700 7300 6100 6e00  K...A.....s.a.n.
 000012c0: 6400 6200 6f00 786d 6f64 4462 6c6f 6200  d.b.o.xmodDblob.
-000012d0: 0000 0853 8931 9d39 ecc5 4100 0000 0700  ...S.1.9..A.....
+000012d0: 0000 0835 65bb 4b98 f4c5 4100 0000 0700  ...5e.K...A.....
 000012e0: 7300 6100 6e00 6400 6200 6f00 7870 6831  s.a.n.d.b.o.xph1
-000012f0: 5363 6f6d 7000 0000 0000 1140 0000 0000  Scomp......@....
+000012f0: 5363 6f6d 7000 0000 0000 11f0 0000 0000  Scomp...........
 00001300: 0700 7300 6100 6e00 6400 6200 6f00 7876  ..s.a.n.d.b.o.xv
 00001310: 5372 6e6c 6f6e 6700 0000 0100 0000 1b00  Srnlong.........
 00001320: 7400 6800 6900 7200 6400 5f00 7000 6100  t.h.i.r.d._.p.a.
 00001330: 7200 7400 7900 5f00 6c00 6100 6200 6500  r.t.y._.l.a.b.e.
 00001340: 6c00 5f00 6100 7000 7000 6500 6e00 6400  l._.a.p.p.e.n.d.
 00001350: 6500 7200 736c 6731 5363 6f6d 7000 0000  e.r.slg1Scomp...
-00001360: 0000 034f 3f00 0000 1b00 7400 6800 6900  ...O?.....t.h.i.
+00001360: 0000 0347 a400 0000 1b00 7400 6800 6900  ...G......t.h.i.
 00001370: 7200 6400 5f00 7000 6100 7200 7400 7900  r.d._.p.a.r.t.y.
 00001380: 5f00 6c00 6100 6200 6500 6c00 5f00 6100  _.l.a.b.e.l._.a.
 00001390: 7000 7000 6500 6e00 6400 6500 7200 736d  p.p.e.n.d.e.r.sm
-000013a0: 6f44 4462 6c6f 6200 0000 088e 6402 d844  oDDblob.....d..D
-000013b0: c7c5 4100 0000 1b00 7400 6800 6900 7200  ..A.....t.h.i.r.
+000013a0: 6f44 4462 6c6f 6200 0000 08e4 2b79 2913  oDDblob.....+y).
+000013b0: eec5 4100 0000 1b00 7400 6800 6900 7200  ..A.....t.h.i.r.
 000013c0: 6400 5f00 7000 6100 7200 7400 7900 5f00  d._.p.a.r.t.y._.
 000013d0: 6c00 6100 6200 6500 6c00 5f00 6100 7000  l.a.b.e.l._.a.p.
 000013e0: 7000 6500 6e00 6400 6500 7200 736d 6f64  p.e.n.d.e.r.smod
-000013f0: 4462 6c6f 6200 0000 088e 6402 d844 c7c5  Dblob.....d..D..
+000013f0: 4462 6c6f 6200 0000 08e4 2b79 2913 eec5  Dblob.....+y)...
 00001400: 4100 0000 1b00 7400 6800 6900 7200 6400  A.....t.h.i.r.d.
 00001410: 5f00 7000 6100 7200 7400 7900 5f00 6c00  _.p.a.r.t.y._.l.
 00001420: 6100 6200 6500 6c00 5f00 6100 7000 7000  a.b.e.l._.a.p.p.
 00001430: 6500 6e00 6400 6500 7200 7370 6831 5363  e.n.d.e.r.sph1Sc
 00001440: 6f6d 7000 0000 0000 0440 0000 0000 0200  omp......@......
 00001450: 7500 696c 6731 5363 6f6d 7000 0000 0000  u.ilg1Scomp.....
-00001460: 0cd9 9100 0000 0200 7500 696d 6f44 4462  ........u.imoDDb
+00001460: 0d13 7d00 0000 0200 7500 696d 6f44 4462  ..}.....u.imoDDb
 00001470: 6c6f 6200 0000 0874 394b 535b e7c5 4100  lob....t9KS[..A.
 00001480: 0000 0200 7500 696d 6f64 4462 6c6f 6200  ....u.imodDblob.
 00001490: 0000 0874 394b 535b e7c5 4100 0000 0200  ...t9KS[..A.....
 000014a0: 7500 6970 6831 5363 6f6d 7000 0000 0000  u.iph1Scomp.....
-000014b0: 1080 0000 0000 0c00 7500 6e00 7300 7500  ........u.n.s.u.
+000014b0: 10b0 0000 0000 0c00 7500 6e00 7300 7500  ........u.n.s.u.
 000014c0: 7000 6500 7200 7600 6900 7300 6500 6462  p.e.r.v.i.s.e.db
 000014d0: 7773 7062 6c6f 6200 0000 b862 706c 6973  wspblob....bplis
 000014e0: 7430 30d6 0102 0304 0506 0708 0708 0b08  t00.............
 000014f0: 5d53 686f 7753 7461 7475 7342 6172 5b53  ]ShowStatusBar[S
 00001500: 686f 7754 6f6f 6c62 6172 5b53 686f 7754  howToolbar[ShowT
 00001510: 6162 5669 6577 5f10 1443 6f6e 7461 696e  abView_..Contain
 00001520: 6572 5368 6f77 5369 6465 6261 725c 5769  erShowSidebar\Wi
@@ -459,21 +459,21 @@
 00001ca0: 7742 6f75 6e64 735b 5368 6f77 5369 6465  wBounds[ShowSide
 00001cb0: 6261 7208 0908 095f 1018 7b7b 3135 312c  bar...._..{{151,
 00001cc0: 2039 367d 2c20 7b31 3138 302c 2035 3638   96}, {1180, 568
 00001cd0: 7d7d 0908 1523 2f3b 525f 6b6c 6d6e 6f8a  }}...#/;R_klmno.
 00001ce0: 0000 0000 0000 0101 0000 0000 0000 000d  ................
 00001cf0: 0000 0000 0000 0000 0000 0000 0000 008b  ................
 00001d00: 0000 0005 0075 0074 0069 006c 0073 6c67  .....u.t.i.l.slg
-00001d10: 3153 636f 6d70 0000 0000 0008 11b1 0000  1Scomp..........
+00001d10: 3153 636f 6d70 0000 0000 0008 1551 0000  1Scomp.......Q..
 00001d20: 0005 0075 0074 0069 006c 0073 6d6f 4444  ...u.t.i.l.smoDD
-00001d30: 626c 6f62 0000 0008 4c84 ea78 5ded c541  blob....L..x]..A
+00001d30: 626c 6f62 0000 0008 49ec e9c0 16f2 c541  blob....I......A
 00001d40: 0000 0005 0075 0074 0069 006c 0073 6d6f  .....u.t.i.l.smo
-00001d50: 6444 626c 6f62 0000 0008 b23a 48d8 4aed  dDblob.....:H.J.
+00001d50: 6444 626c 6f62 0000 0008 49ec e9c0 16f2  dDblob....I.....
 00001d60: c541 0000 0005 0075 0074 0069 006c 0073  .A.....u.t.i.l.s
-00001d70: 7068 3153 636f 6d70 0000 0000 0009 2000  ph1Scomp...... .
+00001d70: 7068 3153 636f 6d70 0000 0000 0009 3000  ph1Scomp......0.
 00001d80: 0000 0005 0075 0074 0069 006c 0073 7653  .....u.t.i.l.svS
 00001d90: 726e 6c6f 6e67 0000 0001 0000 0010 0076  rnlong.........v
 00001da0: 0069 0064 0065 006f 005f 0070 0072 006f  .i.d.e.o._.p.r.o
 00001db0: 0063 0065 0073 0073 006f 0072 0073 6277  .c.e.s.s.o.r.sbw
 00001dc0: 7370 626c 6f62 0000 00b8 6270 6c69 7374  spblob....bplist
 00001dd0: 3030 d601 0203 0405 0607 0807 080b 085d  00.............]
 00001de0: 5368 6f77 5374 6174 7573 4261 725b 5368  ShowStatusBar[Sh
@@ -485,283 +485,283 @@
 00001e40: 392c 2033 3532 7d2c 207b 3932 302c 2034  9, 352}, {920, 4
 00001e50: 3336 7d7d 0908 1523 2f3b 525f 6b6c 6d6e  36}}...#/;R_klmn
 00001e60: 6f8a 0000 0000 0000 0101 0000 0000 0000  o...............
 00001e70: 000d 0000 0000 0000 0000 0000 0000 0000  ................
 00001e80: 008b 0000 0010 0076 0069 0064 0065 006f  .......v.i.d.e.o
 00001e90: 005f 0070 0072 006f 0063 0065 0073 0073  ._.p.r.o.c.e.s.s
 00001ea0: 006f 0072 0073 6c67 3153 636f 6d70 0000  .o.r.slg1Scomp..
-00001eb0: 0000 0005 e7c5 0000 0010 0076 0069 0064  ...........v.i.d
+00001eb0: 0000 0006 1d91 0000 0010 0076 0069 0064  ...........v.i.d
 00001ec0: 0065 006f 005f 0070 0072 006f 0063 0065  .e.o._.p.r.o.c.e
 00001ed0: 0073 0073 006f 0072 0073 6d6f 4444 626c  .s.s.o.r.smoDDbl
-00001ee0: 6f62 0000 0008 3801 a3ae 30e8 c541 0000  ob....8...0..A..
+00001ee0: 6f62 0000 0008 a47b f8dd a3f4 c541 0000  ob.....{.....A..
 00001ef0: 0010 0076 0069 0064 0065 006f 005f 0070  ...v.i.d.e.o._.p
 00001f00: 0072 006f 0063 0065 0073 0073 006f 0072  .r.o.c.e.s.s.o.r
-00001f10: 0073 6d6f 6444 626c 6f62 0000 0008 3801  .smodDblob....8.
-00001f20: a3ae 30e8 c541 0000 0010 0076 0069 0064  ..0..A.....v.i.d
+00001f10: 0073 6d6f 6444 626c 6f62 0000 0008 2587  .smodDblob....%.
+00001f20: dad8 90f4 c541 0000 0010 0076 0069 0064  .....A.....v.i.d
 00001f30: 0065 006f 005f 0070 0072 006f 0063 0065  .e.o._.p.r.o.c.e
 00001f40: 0073 0073 006f 0072 0073 7068 3153 636f  .s.s.o.r.sph1Sco
-00001f50: 6d70 0000 0000 0006 c000 0000 0010 0076  mp.............v
+00001f50: 6d70 0000 0000 0007 0000 0000 0010 0076  mp.............v
 00001f60: 0069 0064 0065 006f 005f 0070 0072 006f  .i.d.e.o._.p.r.o
 00001f70: 0063 0065 0073 0073 006f 0072 0073 7653  .c.e.s.s.o.r.svS
 00001f80: 726e 6c6f 6e67 0000 0001 0000 0000 0000  rnlong..........
 00001f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00002000: 0000 0000 0000 0000 0000 002f 0000 000b  .........../....
 00002010: 005f 005f 0070 0079 0063 0061 0063 0068  ._._.p.y.c.a.c.h
 00002020: 0065 005f 005f 6c67 3153 636f 6d70 0000  .e._._lg1Scomp..
-00002030: 0000 0000 e28b 0000 000b 005f 005f 0070  ..........._._.p
+00002030: 0000 0000 e377 0000 000b 005f 005f 0070  .....w....._._.p
 00002040: 0079 0063 0061 0063 0068 0065 005f 005f  .y.c.a.c.h.e._._
-00002050: 6d6f 4444 626c 6f62 0000 0008 e6a6 3675  moDDblob......6u
-00002060: d7e6 c541 0000 000b 005f 005f 0070 0079  ...A....._._.p.y
+00002050: 6d6f 4444 626c 6f62 0000 0008 46ab 7717  moDDblob....F.w.
+00002060: 94f4 c541 0000 000b 005f 005f 0070 0079  ...A....._._.p.y
 00002070: 0063 0061 0063 0068 0065 005f 005f 6d6f  .c.a.c.h.e._._mo
-00002080: 6444 626c 6f62 0000 0008 e6a6 3675 d7e6  dDblob......6u..
+00002080: 6444 626c 6f62 0000 0008 931f 968a 89f4  dDblob..........
 00002090: c541 0000 000b 005f 005f 0070 0079 0063  .A....._._.p.y.c
 000020a0: 0061 0063 0068 0065 005f 005f 7068 3153  .a.c.h.e._._ph1S
 000020b0: 636f 6d70 0000 0000 0001 0000 0000 0006  comp............
 000020c0: 0061 0073 0073 0065 0074 0073 6277 7370  .a.s.s.e.t.sbwsp
-000020d0: 626c 6f62 0000 00b7 6270 6c69 7374 3030  blob....bplist00
+000020d0: 626c 6f62 0000 00b8 6270 6c69 7374 3030  blob....bplist00
 000020e0: d601 0203 0405 0607 0807 080b 085d 5368  .............]Sh
 000020f0: 6f77 5374 6174 7573 4261 725b 5368 6f77  owStatusBar[Show
 00002100: 546f 6f6c 6261 725b 5368 6f77 5461 6256  Toolbar[ShowTabV
 00002110: 6965 775f 1014 436f 6e74 6169 6e65 7253  iew_..ContainerS
 00002120: 686f 7753 6964 6562 6172 5c57 696e 646f  howSidebar\Windo
 00002130: 7742 6f75 6e64 735b 5368 6f77 5369 6465  wBounds[ShowSide
-00002140: 6261 7208 0908 095f 1017 7b7b 3433 2c20  bar...._..{{43, 
-00002150: 3834 7d2c 207b 3131 3830 2c20 3536 387d  84}, {1180, 568}
-00002160: 7d09 0815 232f 3b52 5f6b 6c6d 6e6f 8900  }...#/;R_klmno..
-00002170: 0000 0000 0001 0100 0000 0000 0000 0d00  ................
-00002180: 0000 0000 0000 0000 0000 0000 0000 8a00  ................
-00002190: 0000 0600 6100 7300 7300 6500 7400 736c  ....a.s.s.e.t.sl
-000021a0: 6731 5363 6f6d 7000 0000 0000 8a05 f400  g1Scomp.........
-000021b0: 0000 0600 6100 7300 7300 6500 7400 736d  ....a.s.s.e.t.sm
-000021c0: 6f44 4462 6c6f 6200 0000 08ee 1690 c8ab  oDDblob.........
-000021d0: bac5 4100 0000 0600 6100 7300 7300 6500  ..A.....a.s.s.e.
-000021e0: 7400 736d 6f64 4462 6c6f 6200 0000 08ee  t.smodDblob.....
-000021f0: 1690 c8ab bac5 4100 0000 0600 6100 7300  ......A.....a.s.
-00002200: 7300 6500 7400 7370 6831 5363 6f6d 7000  s.e.t.sph1Scomp.
-00002210: 0000 0000 8dd0 0000 0000 0600 6100 7300  ............a.s.
-00002220: 7300 6500 7400 7376 5372 6e6c 6f6e 6700  s.e.t.svSrnlong.
-00002230: 0000 0100 0000 1200 6200 6f00 7500 6e00  ........b.o.u.n.
-00002240: 6400 6900 6e00 6700 5f00 6200 6f00 7800  d.i.n.g._.b.o.x.
-00002250: 5f00 7400 6f00 6f00 6c00 736c 6731 5363  _.t.o.o.l.slg1Sc
-00002260: 6f6d 7000 0000 0000 0322 2b00 0000 1200  omp......"+.....
-00002270: 6200 6f00 7500 6e00 6400 6900 6e00 6700  b.o.u.n.d.i.n.g.
-00002280: 5f00 6200 6f00 7800 5f00 7400 6f00 6f00  _.b.o.x._.t.o.o.
-00002290: 6c00 736d 6f44 4462 6c6f 6200 0000 08ac  l.smoDDblob.....
-000022a0: 91fa d12e bac5 4100 0000 1200 6200 6f00  ......A.....b.o.
-000022b0: 7500 6e00 6400 6900 6e00 6700 5f00 6200  u.n.d.i.n.g._.b.
-000022c0: 6f00 7800 5f00 7400 6f00 6f00 6c00 736d  o.x._.t.o.o.l.sm
-000022d0: 6f64 4462 6c6f 6200 0000 08ac 91fa d12e  odDblob.........
-000022e0: bac5 4100 0000 1200 6200 6f00 7500 6e00  ..A.....b.o.u.n.
-000022f0: 6400 6900 6e00 6700 5f00 6200 6f00 7800  d.i.n.g._.b.o.x.
-00002300: 5f00 7400 6f00 6f00 6c00 7370 6831 5363  _.t.o.o.l.sph1Sc
-00002310: 6f6d 7000 0000 0000 03d0 0000 0000 0f00  omp.............
-00002320: 6300 7500 6500 5f00 6c00 6900 6700 6800  c.u.e._.l.i.g.h.
-00002330: 7400 5f00 7400 6f00 6f00 6c00 736c 6731  t._.t.o.o.l.slg1
-00002340: 5363 6f6d 7000 0000 0000 02b2 7800 0000  Scomp.......x...
-00002350: 0f00 6300 7500 6500 5f00 6c00 6900 6700  ..c.u.e._.l.i.g.
-00002360: 6800 7400 5f00 7400 6f00 6f00 6c00 736d  h.t._.t.o.o.l.sm
-00002370: 6f44 4462 6c6f 6200 0000 08e8 2ad1 274b  oDDblob.....*.'K
-00002380: edc5 4100 0000 0f00 6300 7500 6500 5f00  ..A.....c.u.e._.
-00002390: 6c00 6900 6700 6800 7400 5f00 7400 6f00  l.i.g.h.t._.t.o.
-000023a0: 6f00 6c00 736d 6f64 4462 6c6f 6200 0000  o.l.smodDblob...
-000023b0: 08ee a3af e904 bac5 4100 0000 0f00 6300  ........A.....c.
-000023c0: 7500 6500 5f00 6c00 6900 6700 6800 7400  u.e._.l.i.g.h.t.
-000023d0: 5f00 7400 6f00 6f00 6c00 7370 6831 5363  _.t.o.o.l.sph1Sc
-000023e0: 6f6d 7000 0000 0000 0380 0000 0000 0800  omp.............
-000023f0: 6400 6100 7300 6800 5f00 6100 7000 706c  d.a.s.h._.a.p.pl
-00002400: 6731 5363 6f6d 7000 0000 0000 01e9 2a00  g1Scomp.......*.
-00002410: 0000 0800 6400 6100 7300 6800 5f00 6100  ....d.a.s.h._.a.
-00002420: 7000 706d 6f44 4462 6c6f 6200 0000 08de  p.pmoDDblob.....
-00002430: 5fc4 870a bac5 4100 0000 0800 6400 6100  _.....A.....d.a.
-00002440: 7300 6800 5f00 6100 7000 706d 6f64 4462  s.h._.a.p.pmodDb
-00002450: 6c6f 6200 0000 08de 5fc4 870a bac5 4100  lob....._.....A.
-00002460: 0000 0800 6400 6100 7300 6800 5f00 6100  ....d.a.s.h._.a.
-00002470: 7000 7070 6831 5363 6f6d 7000 0000 0000  p.pph1Scomp.....
-00002480: 0200 0000 0000 0f00 6400 6100 7400 6100  ........d.a.t.a.
-00002490: 5f00 7000 7200 6f00 6300 6500 7300 7300  _.p.r.o.c.e.s.s.
-000024a0: 6f00 7200 736c 6731 5363 6f6d 7000 0000  o.r.slg1Scomp...
-000024b0: 0000 0736 8100 0000 0f00 6400 6100 7400  ...6......d.a.t.
-000024c0: 6100 5f00 7000 7200 6f00 6300 6500 7300  a._.p.r.o.c.e.s.
-000024d0: 7300 6f00 7200 736d 6f44 4462 6c6f 6200  s.o.r.smoDDblob.
-000024e0: 0000 089e 36e7 785d edc5 4100 0000 0f00  ....6.x]..A.....
-000024f0: 6400 6100 7400 6100 5f00 7000 7200 6f00  d.a.t.a._.p.r.o.
-00002500: 6300 6500 7300 7300 6f00 7200 736d 6f64  c.e.s.s.o.r.smod
-00002510: 4462 6c6f 6200 0000 0867 018f 40e2 e8c5  Dblob....g..@...
-00002520: 4100 0000 0f00 6400 6100 7400 6100 5f00  A.....d.a.t.a._.
-00002530: 7000 7200 6f00 6300 6500 7300 7300 6f00  p.r.o.c.e.s.s.o.
-00002540: 7200 7370 6831 5363 6f6d 7000 0000 0000  r.sph1Scomp.....
-00002550: 0910 0000 0000 1200 6600 6500 6100 7400  ........f.e.a.t.
-00002560: 7500 7200 6500 5f00 6500 7800 7400 7200  u.r.e._.e.x.t.r.
-00002570: 6100 6300 7400 6f00 7200 7362 7773 7062  a.c.t.o.r.sbwspb
-00002580: 6c6f 6200 0000 b962 706c 6973 7430 30d6  lob....bplist00.
-00002590: 0102 0304 0506 0708 0708 0b08 5d53 686f  ............]Sho
-000025a0: 7753 7461 7475 7342 6172 5b53 686f 7754  wStatusBar[ShowT
-000025b0: 6f6f 6c62 6172 5b53 686f 7754 6162 5669  oolbar[ShowTabVi
-000025c0: 6577 5f10 1443 6f6e 7461 696e 6572 5368  ew_..ContainerSh
-000025d0: 6f77 5369 6465 6261 725c 5769 6e64 6f77  owSidebar\Window
-000025e0: 426f 756e 6473 5b53 686f 7753 6964 6562  Bounds[ShowSideb
-000025f0: 6172 0809 0809 5f10 197b 7b39 392c 202d  ar...._..{{99, -
-00002600: 3136 367d 2c20 7b31 3238 332c 2036 3839  166}, {1283, 689
-00002610: 7d7d 0908 1523 2f3b 525f 6b6c 6d6e 6f8b  }}...#/;R_klmno.
-00002620: 0000 0000 0000 0101 0000 0000 0000 000d  ................
-00002630: 0000 0000 0000 0000 0000 0000 0000 008c  ................
-00002640: 0000 0012 0066 0065 0061 0074 0075 0072  .....f.e.a.t.u.r
-00002650: 0065 005f 0065 0078 0074 0072 0061 0063  .e._.e.x.t.r.a.c
-00002660: 0074 006f 0072 0073 6c67 3153 636f 6d70  .t.o.r.slg1Scomp
-00002670: 0000 0000 000c 9d20 0000 0012 0066 0065  ....... .....f.e
-00002680: 0061 0074 0075 0072 0065 005f 0065 0078  .a.t.u.r.e._.e.x
-00002690: 0074 0072 0061 0063 0074 006f 0072 0073  .t.r.a.c.t.o.r.s
-000026a0: 6d6f 4444 626c 6f62 0000 0008 c575 b60b  moDDblob.....u..
-000026b0: 20c9 c541 0000 0012 0066 0065 0061 0074   ..A.....f.e.a.t
-000026c0: 0075 0072 0065 005f 0065 0078 0074 0072  .u.r.e._.e.x.t.r
-000026d0: 0061 0063 0074 006f 0072 0073 6d6f 6444  .a.c.t.o.r.smodD
-000026e0: 626c 6f62 0000 0008 c575 b60b 20c9 c541  blob.....u.. ..A
-000026f0: 0000 0012 0066 0065 0061 0074 0075 0072  .....f.e.a.t.u.r
-00002700: 0065 005f 0065 0078 0074 0072 0061 0063  .e._.e.x.t.r.a.c
-00002710: 0074 006f 0072 0073 7068 3153 636f 6d70  .t.o.r.sph1Scomp
-00002720: 0000 0000 000e 7000 0000 0012 0066 0065  ......p......f.e
-00002730: 0061 0074 0075 0072 0065 005f 0065 0078  .a.t.u.r.e._.e.x
-00002740: 0074 0072 0061 0063 0074 006f 0072 0073  .t.r.a.c.t.o.r.s
-00002750: 7653 726e 6c6f 6e67 0000 0001 0000 0009  vSrnlong........
-00002760: 006c 0061 0062 0065 006c 006c 0069 006e  .l.a.b.e.l.l.i.n
-00002770: 0067 6c67 3153 636f 6d70 0000 0000 0002  .glg1Scomp......
-00002780: 72f0 0000 0009 006c 0061 0062 0065 006c  r......l.a.b.e.l
-00002790: 006c 0069 006e 0067 6d6f 4444 626c 6f62  .l.i.n.gmoDDblob
-000027a0: 0000 0008 228d 4930 ccc2 c541 0000 0009  ....".I0...A....
-000027b0: 006c 0061 0062 0065 006c 006c 0069 006e  .l.a.b.e.l.l.i.n
-000027c0: 0067 6d6f 6444 626c 6f62 0000 0008 228d  .gmodDblob....".
-000027d0: 4930 ccc2 c541 0000 0009 006c 0061 0062  I0...A.....l.a.b
-000027e0: 0065 006c 006c 0069 006e 0067 7068 3153  .e.l.l.i.n.gph1S
-000027f0: 636f 6d70 0000 0000 0002 d000 0000 0006  comp............
-00002800: 006d 0069 0078 0069 006e 0073 6277 7370  .m.i.x.i.n.sbwsp
-00002810: 626c 6f62 0000 00b8 6270 6c69 7374 3030  blob....bplist00
-00002820: d601 0203 0405 0607 0807 080b 085d 5368  .............]Sh
-00002830: 6f77 5374 6174 7573 4261 725b 5368 6f77  owStatusBar[Show
-00002840: 546f 6f6c 6261 725b 5368 6f77 5461 6256  Toolbar[ShowTabV
-00002850: 6965 775f 1014 436f 6e74 6169 6e65 7253  iew_..ContainerS
-00002860: 686f 7753 6964 6562 6172 5c57 696e 646f  howSidebar\Windo
-00002870: 7742 6f75 6e64 735b 5368 6f77 5369 6465  wBounds[ShowSide
-00002880: 6261 7208 0908 095f 1018 7b7b 3238 392c  bar...._..{{289,
-00002890: 2033 3030 7d2c 207b 3932 302c 2034 3336   300}, {920, 436
-000028a0: 7d7d 0908 1523 2f3b 525f 6b6c 6d6e 6f8a  }}...#/;R_klmno.
-000028b0: 0000 0000 0000 0101 0000 0000 0000 000d  ................
-000028c0: 0000 0000 0000 0000 0000 0000 0000 008b  ................
-000028d0: 0000 0006 006d 0069 0078 0069 006e 0073  .....m.i.x.i.n.s
-000028e0: 6c67 3153 636f 6d70 0000 0000 01b3 9dbb  lg1Scomp........
-000028f0: 0000 0006 006d 0069 0078 0069 006e 0073  .....m.i.x.i.n.s
-00002900: 6c73 7643 626c 6f62 0000 030a 6270 6c69  lsvCblob....bpli
-00002910: 7374 3030 d801 0203 0405 0607 0809 0a0b  st00............
-00002920: 1b55 560a 5858 6963 6f6e 5369 7a65 5f10  .UV.XXiconSize_.
-00002930: 0f73 686f 7749 636f 6e50 7265 7669 6577  .showIconPreview
-00002940: 5763 6f6c 756d 6e73 5f10 1163 616c 6375  Wcolumns_..calcu
-00002950: 6c61 7465 416c 6c53 697a 6573 5874 6578  lateAllSizesXtex
-00002960: 7453 697a 655a 736f 7274 436f 6c75 6d6e  tSizeZsortColumn
-00002970: 5f10 1075 7365 5265 6c61 7469 7665 4461  _..useRelativeDa
-00002980: 7465 735f 1012 7669 6577 4f70 7469 6f6e  tes_..viewOption
-00002990: 7356 6572 7369 6f6e 2340 3000 0000 0000  sVersion#@0.....
-000029a0: 0009 ae0c 151d 2226 2b30 353a 3e43 474c  ......"&+05:>CGL
-000029b0: 50d4 0d0e 0f10 0a12 0a14 5776 6973 6962  P.........Wvisib
-000029c0: 6c65 5577 6964 7468 5961 7363 656e 6469  leUwidthYascendi
-000029d0: 6e67 5a69 6465 6e74 6966 6965 7209 1101  ngZidentifier...
-000029e0: 2c09 546e 616d 65d4 1016 1718 191a 1b1b  ,.Tname.........
-000029f0: 5577 6964 7468 5961 7363 656e 6469 6e67  UwidthYascending
-00002a00: 5776 6973 6962 6c65 5875 6269 7175 6974  WvisibleXubiquit
-00002a10: 7910 2308 08d4 0d0e 0f10 0a1f 1b21 0910  y.#..........!..
-00002a20: b508 5c64 6174 654d 6f64 6966 6965 64d4  ..\dateModified.
-00002a30: 0d0e 0f10 1b1f 1b25 0808 5b64 6174 6543  .......%..[dateC
-00002a40: 7265 6174 6564 d40d 0e0f 100a 281b 2a09  reated......(.*.
-00002a50: 1061 0854 7369 7a65 d40d 0e0f 100a 2d0a  .a.Tsize......-.
-00002a60: 2f09 1073 0954 6b69 6e64 d40d 0e0f 101b  /..s.Tkind......
-00002a70: 320a 3408 1064 0955 6c61 6265 6cd4 0d0e  2.4..d.Ulabel...
-00002a80: 0f10 1b37 0a39 0810 4b09 5776 6572 7369  ...7.9..K.Wversi
-00002a90: 6f6e d40d 0e0f 101b 120a 3d08 0958 636f  on........=..Xco
-00002aa0: 6d6d 656e 7473 d40d 0e0f 101b 401b 4208  mments......@.B.
-00002ab0: 10c8 085e 6461 7465 4c61 7374 4f70 656e  ...^dateLastOpen
-00002ac0: 6564 d410 1617 1844 1f1b 1b59 6461 7465  ed.....D...Ydate
-00002ad0: 4164 6465 6408 08d4 1816 1710 1b49 1b4b  Added........I.K
-00002ae0: 0810 d208 5a73 6861 7265 4f77 6e65 72d4  ....ZshareOwner.
-00002af0: 1816 1710 1b49 1b4f 0808 5f10 0f73 6861  .....I.O.._..sha
-00002b00: 7265 4c61 7374 4564 6974 6f72 d418 1617  reLastEditor....
-00002b10: 101b 491b 5308 085f 1010 696e 7669 7461  ..I.S.._..invita
-00002b20: 7469 6f6e 5374 6174 7573 0823 4028 0000  tionStatus.#@(..
-00002b30: 0000 0000 5c64 6174 654d 6f64 6966 6965  ....\dateModifie
-00002b40: 6409 1001 0008 0019 0022 0034 003c 0050  d........".4.<.P
-00002b50: 0059 0064 0077 008c 0095 0096 00a5 00ae  .Y.d.w..........
-00002b60: 00b6 00bc 00c6 00d1 00d2 00d5 00d6 00db  ................
-00002b70: 00e4 00ea 00f4 00fc 0105 0107 0108 0109  ................
-00002b80: 0112 0113 0115 0116 0123 012c 012d 012e  .........#.,.-..
-00002b90: 013a 0143 0144 0146 0147 014c 0155 0156  .:.C.D.F.G.L.U.V
-00002ba0: 0158 0159 015e 0167 0168 016a 016b 0171  .X.Y.^.g.h.j.k.q
-00002bb0: 017a 017b 017d 017e 0186 018f 0190 0191  .z.{.}.~........
-00002bc0: 019a 01a3 01a4 01a6 01a7 01b6 01bf 01c9  ................
-00002bd0: 01ca 01cb 01d4 01d5 01d7 01d8 01e3 01ec  ................
-00002be0: 01ed 01ee 0200 0209 020a 020b 021e 021f  ................
-00002bf0: 0228 0235 0236 0000 0000 0000 0201 0000  .(.5.6..........
-00002c00: 0000 0000 0059 0000 0000 0000 0000 0000  .....Y..........
-00002c10: 0000 0000 0238 0000 0006 006d 0069 0078  .....8.....m.i.x
-00002c20: 0069 006e 0073 6c73 7670 626c 6f62 0000  .i.n.slsvpblob..
-00002c30: 0261 6270 6c69 7374 3030 d801 0203 0405  .abplist00......
-00002c40: 0607 0809 0a0b 1d45 460a 3358 6963 6f6e  .......EF.3Xicon
-00002c50: 5369 7a65 5f10 0f73 686f 7749 636f 6e50  Size_..showIconP
-00002c60: 7265 7669 6577 5763 6f6c 756d 6e73 5f10  reviewWcolumns_.
-00002c70: 1163 616c 6375 6c61 7465 416c 6c53 697a  .calculateAllSiz
-00002c80: 6573 5874 6578 7453 697a 655a 736f 7274  esXtextSizeZsort
-00002c90: 436f 6c75 6d6e 5f10 1075 7365 5265 6c61  Column_..useRela
-00002ca0: 7469 7665 4461 7465 735f 1012 7669 6577  tiveDates_..view
-00002cb0: 4f70 7469 6f6e 7356 6572 7369 6f6e 2340  OptionsVersion#@
-00002cc0: 3000 0000 0000 0009 d90c 0d0e 0f10 1112  0...............
-00002cd0: 1314 151e 2328 2d32 363b 3f58 636f 6d6d  ....#(-26;?Xcomm
-00002ce0: 656e 7473 556c 6162 656c 5776 6572 7369  entsUlabelWversi
-00002cf0: 6f6e 5b64 6174 6543 7265 6174 6564 5473  on[dateCreatedTs
-00002d00: 697a 655c 6461 7465 4d6f 6469 6669 6564  ize\dateModified
-00002d10: 546b 696e 6454 6e61 6d65 5e64 6174 654c  TkindTname^dateL
-00002d20: 6173 744f 7065 6e65 64d4 1617 1819 1a1b  astOpened.......
-00002d30: 0a1d 5569 6e64 6578 5577 6964 7468 5961  ..UindexUwidthYa
-00002d40: 7363 656e 6469 6e67 5776 6973 6962 6c65  scendingWvisible
-00002d50: 1007 1101 2c09 08d4 1617 1819 1f20 0a1d  ....,........ ..
-00002d60: 1005 1064 0908 d416 1718 1924 250a 1d10  ...d.......$%...
-00002d70: 0610 4b09 08d4 1617 1819 292a 1d1d 1002  ..K.......)*....
-00002d80: 10b5 0808 d416 1718 192e 2f1d 0a10 0310  ........../.....
-00002d90: 6108 09d4 1617 1819 332a 1d0a 1001 0809  a.......3*......
-00002da0: d416 1718 1937 380a 0a10 0410 7309 09d4  .....78.....s...
-00002db0: 1617 1819 3c1b 0a0a 1000 0909 d416 1718  ....<...........
-00002dc0: 1940 411d 1d10 0810 c808 0808 2340 2800  .@A.........#@(.
-00002dd0: 0000 0000 005c 6461 7465 4d6f 6469 6669  .....\dateModifi
-00002de0: 6564 0900 0800 1900 2200 3400 3c00 5000  ed......".4.<.P.
-00002df0: 5900 6400 7700 8c00 9500 9600 a900 b200  Y.d.w...........
-00002e00: b800 c000 cc00 d100 de00 e300 e800 f701  ................
-00002e10: 0001 0601 0c01 1601 1e01 2001 2301 2401  .......... .#.$.
-00002e20: 2501 2e01 3001 3201 3301 3401 3d01 3f01  %...0.2.3.4.=.?.
-00002e30: 4101 4201 4301 4c01 4e01 5001 5101 5201  A.B.C.L.N.P.Q.R.
-00002e40: 5b01 5d01 5f01 6001 6101 6a01 6c01 6d01  [.]._.`.a.j.l.m.
-00002e50: 6e01 7701 7901 7b01 7c01 7d01 8601 8801  n.w.y.{.|.}.....
-00002e60: 8901 8a01 9301 9501 9701 9801 9901 9a01  ................
-00002e70: a301 b000 0000 0000 0002 0100 0000 0000  ................
-00002e80: 0000 4800 0000 0000 0000 0000 0000 0000  ..H.............
-00002e90: 0001 b100 0000 0600 6d00 6900 7800 6900  ........m.i.x.i.
-00002ea0: 6e00 736d 6f44 4462 6c6f 6200 0000 0802  n.smoDDblob.....
-00002eb0: e6e7 785d edc5 4100 0000 0600 6d00 6900  ..x]..A.....m.i.
-00002ec0: 7800 6900 6e00 736d 6f64 4462 6c6f 6200  x.i.n.smodDblob.
-00002ed0: 0000 087f 69d4 ed49 edc5 4100 0000 0600  ....i..I..A.....
-00002ee0: 6d00 6900 7800 6900 6e00 7370 6831 5363  m.i.x.i.n.sph1Sc
-00002ef0: 6f6d 7000 0000 0001 c5a0 0000 0000 0600  omp.............
-00002f00: 6d00 6900 7800 6900 6e00 7376 5372 6e6c  m.i.x.i.n.svSrnl
-00002f10: 6f6e 6700 0000 0100 0000 0500 6d00 6f00  ong.........m.o.
-00002f20: 6400 6500 6c6c 6731 5363 6f6d 7000 0000  d.e.llg1Scomp...
-00002f30: 0000 022a cc00 0000 0500 6d00 6f00 6400  ...*......m.o.d.
-00002f40: 6500 6c6d 6f44 4462 6c6f 6200 0000 08a7  e.lmoDDblob.....
-00002f50: 66df 3665 e7c5 4100 0000 0500 6d00 6f00  f.6e..A.....m.o.
-00002f60: 6400 6500 6c6d 6f64 4462 6c6f 6200 0000  d.e.lmodDblob...
-00002f70: 08a7 66df 3665 e7c5 416f 0072 0073 7653  ..f.6e..Ao.r.svS
+00002140: 6261 7208 0908 095f 1018 7b7b 3236 302c  bar...._..{{260,
+00002150: 2033 3239 7d2c 207b 3932 302c 2034 3336   329}, {920, 436
+00002160: 7d7d 0908 1523 2f3b 525f 6b6c 6d6e 6f8a  }}...#/;R_klmno.
+00002170: 0000 0000 0000 0101 0000 0000 0000 000d  ................
+00002180: 0000 0000 0000 0000 0000 0000 0000 008b  ................
+00002190: 0000 0006 0061 0073 0073 0065 0074 0073  .....a.s.s.e.t.s
+000021a0: 6c67 3153 636f 6d70 0000 0000 008a 1694  lg1Scomp........
+000021b0: 0000 0006 0061 0073 0073 0065 0074 0073  .....a.s.s.e.t.s
+000021c0: 6d6f 4444 626c 6f62 0000 0008 ee16 90c8  moDDblob........
+000021d0: abba c541 0000 0006 0061 0073 0073 0065  ...A.....a.s.s.e
+000021e0: 0074 0073 6d6f 6444 626c 6f62 0000 0008  .t.smodDblob....
+000021f0: ee16 90c8 abba c541 0000 0006 0061 0073  .......A.....a.s
+00002200: 0073 0065 0074 0073 7068 3153 636f 6d70  .s.e.t.sph1Scomp
+00002210: 0000 0000 008d f000 0000 0006 0061 0073  .............a.s
+00002220: 0073 0065 0074 0073 7653 726e 6c6f 6e67  .s.e.t.svSrnlong
+00002230: 0000 0001 0000 0012 0062 006f 0075 006e  .........b.o.u.n
+00002240: 0064 0069 006e 0067 005f 0062 006f 0078  .d.i.n.g._.b.o.x
+00002250: 005f 0074 006f 006f 006c 0073 6c67 3153  ._.t.o.o.l.slg1S
+00002260: 636f 6d70 0000 0000 0003 222b 0000 0012  comp......"+....
+00002270: 0062 006f 0075 006e 0064 0069 006e 0067  .b.o.u.n.d.i.n.g
+00002280: 005f 0062 006f 0078 005f 0074 006f 006f  ._.b.o.x._.t.o.o
+00002290: 006c 0073 6d6f 4444 626c 6f62 0000 0008  .l.smoDDblob....
+000022a0: ac91 fad1 2eba c541 0000 0012 0062 006f  .......A.....b.o
+000022b0: 0075 006e 0064 0069 006e 0067 005f 0062  .u.n.d.i.n.g._.b
+000022c0: 006f 0078 005f 0074 006f 006f 006c 0073  .o.x._.t.o.o.l.s
+000022d0: 6d6f 6444 626c 6f62 0000 0008 ac91 fad1  modDblob........
+000022e0: 2eba c541 0000 0012 0062 006f 0075 006e  ...A.....b.o.u.n
+000022f0: 0064 0069 006e 0067 005f 0062 006f 0078  .d.i.n.g._.b.o.x
+00002300: 005f 0074 006f 006f 006c 0073 7068 3153  ._.t.o.o.l.sph1S
+00002310: 636f 6d70 0000 0000 0003 d000 0000 000f  comp............
+00002320: 0063 0075 0065 005f 006c 0069 0067 0068  .c.u.e._.l.i.g.h
+00002330: 0074 005f 0074 006f 006f 006c 0073 6c67  .t._.t.o.o.l.slg
+00002340: 3153 636f 6d70 0000 0000 0002 b278 0000  1Scomp.......x..
+00002350: 000f 0063 0075 0065 005f 006c 0069 0067  ...c.u.e._.l.i.g
+00002360: 0068 0074 005f 0074 006f 006f 006c 0073  .h.t._.t.o.o.l.s
+00002370: 6d6f 4444 626c 6f62 0000 0008 e82a d127  moDDblob.....*.'
+00002380: 4bed c541 0000 000f 0063 0075 0065 005f  K..A.....c.u.e._
+00002390: 006c 0069 0067 0068 0074 005f 0074 006f  .l.i.g.h.t._.t.o
+000023a0: 006f 006c 0073 6d6f 6444 626c 6f62 0000  .o.l.smodDblob..
+000023b0: 0008 e82a d127 4bed c541 0000 000f 0063  ...*.'K..A.....c
+000023c0: 0075 0065 005f 006c 0069 0067 0068 0074  .u.e._.l.i.g.h.t
+000023d0: 005f 0074 006f 006f 006c 0073 7068 3153  ._.t.o.o.l.sph1S
+000023e0: 636f 6d70 0000 0000 0003 8000 0000 0008  comp............
+000023f0: 0064 0061 0073 0068 005f 0061 0070 0070  .d.a.s.h._.a.p.p
+00002400: 6c67 3153 636f 6d70 0000 0000 0001 e92a  lg1Scomp.......*
+00002410: 0000 0008 0064 0061 0073 0068 005f 0061  .....d.a.s.h._.a
+00002420: 0070 0070 6d6f 4444 626c 6f62 0000 0008  .p.pmoDDblob....
+00002430: de5f c487 0aba c541 0000 0008 0064 0061  ._.....A.....d.a
+00002440: 0073 0068 005f 0061 0070 0070 6d6f 6444  .s.h._.a.p.pmodD
+00002450: 626c 6f62 0000 0008 de5f c487 0aba c541  blob....._.....A
+00002460: 0000 0008 0064 0061 0073 0068 005f 0061  .....d.a.s.h._.a
+00002470: 0070 0070 7068 3153 636f 6d70 0000 0000  .p.pph1Scomp....
+00002480: 0002 0000 0000 000f 0064 0061 0074 0061  .........d.a.t.a
+00002490: 005f 0070 0072 006f 0063 0065 0073 0073  ._.p.r.o.c.e.s.s
+000024a0: 006f 0072 0073 6c67 3153 636f 6d70 0000  .o.r.slg1Scomp..
+000024b0: 0000 0007 3126 0000 000f 0064 0061 0074  ....1&.....d.a.t
+000024c0: 0061 005f 0070 0072 006f 0063 0065 0073  .a._.p.r.o.c.e.s
+000024d0: 0073 006f 0072 0073 6d6f 4444 626c 6f62  .s.o.r.smoDDblob
+000024e0: 0000 0008 16d0 7829 13ee c541 0000 000f  ......x)...A....
+000024f0: 0064 0061 0074 0061 005f 0070 0072 006f  .d.a.t.a._.p.r.o
+00002500: 0063 0065 0073 0073 006f 0072 0073 6d6f  .c.e.s.s.o.r.smo
+00002510: 6444 626c 6f62 0000 0008 16d0 7829 13ee  dDblob......x)..
+00002520: c541 0000 000f 0064 0061 0074 0061 005f  .A.....d.a.t.a._
+00002530: 0070 0072 006f 0063 0065 0073 0073 006f  .p.r.o.c.e.s.s.o
+00002540: 0072 0073 7068 3153 636f 6d70 0000 0000  .r.sph1Scomp....
+00002550: 0009 1000 0000 0012 0066 0065 0061 0074  .........f.e.a.t
+00002560: 0075 0072 0065 005f 0065 0078 0074 0072  .u.r.e._.e.x.t.r
+00002570: 0061 0063 0074 006f 0072 0073 6277 7370  .a.c.t.o.r.sbwsp
+00002580: 626c 6f62 0000 00b9 6270 6c69 7374 3030  blob....bplist00
+00002590: d601 0203 0405 0607 0807 080b 085d 5368  .............]Sh
+000025a0: 6f77 5374 6174 7573 4261 725b 5368 6f77  owStatusBar[Show
+000025b0: 546f 6f6c 6261 725b 5368 6f77 5461 6256  Toolbar[ShowTabV
+000025c0: 6965 775f 1014 436f 6e74 6169 6e65 7253  iew_..ContainerS
+000025d0: 686f 7753 6964 6562 6172 5c57 696e 646f  howSidebar\Windo
+000025e0: 7742 6f75 6e64 735b 5368 6f77 5369 6465  wBounds[ShowSide
+000025f0: 6261 7208 0908 095f 1019 7b7b 3939 2c20  bar...._..{{99, 
+00002600: 2d31 3636 7d2c 207b 3132 3833 2c20 3638  -166}, {1283, 68
+00002610: 397d 7d09 0815 232f 3b52 5f6b 6c6d 6e6f  9}}...#/;R_klmno
+00002620: 8b00 0000 0000 0001 0100 0000 0000 0000  ................
+00002630: 0d00 0000 0000 0000 0000 0000 0000 0000  ................
+00002640: 8c00 0000 1200 6600 6500 6100 7400 7500  ......f.e.a.t.u.
+00002650: 7200 6500 5f00 6500 7800 7400 7200 6100  r.e._.e.x.t.r.a.
+00002660: 6300 7400 6f00 7200 736c 6731 5363 6f6d  c.t.o.r.slg1Scom
+00002670: 7000 0000 0000 0c9d 2000 0000 1200 6600  p....... .....f.
+00002680: 6500 6100 7400 7500 7200 6500 5f00 6500  e.a.t.u.r.e._.e.
+00002690: 7800 7400 7200 6100 6300 7400 6f00 7200  x.t.r.a.c.t.o.r.
+000026a0: 736d 6f44 4462 6c6f 6200 0000 08c5 75b6  smoDDblob.....u.
+000026b0: 0b20 c9c5 4100 0000 1200 6600 6500 6100  . ..A.....f.e.a.
+000026c0: 7400 7500 7200 6500 5f00 6500 7800 7400  t.u.r.e._.e.x.t.
+000026d0: 7200 6100 6300 7400 6f00 7200 736d 6f64  r.a.c.t.o.r.smod
+000026e0: 4462 6c6f 6200 0000 08c5 75b6 0b20 c9c5  Dblob.....u.. ..
+000026f0: 4100 0000 1200 6600 6500 6100 7400 7500  A.....f.e.a.t.u.
+00002700: 7200 6500 5f00 6500 7800 7400 7200 6100  r.e._.e.x.t.r.a.
+00002710: 6300 7400 6f00 7200 7370 6831 5363 6f6d  c.t.o.r.sph1Scom
+00002720: 7000 0000 0000 0e70 0000 0000 1200 6600  p......p......f.
+00002730: 6500 6100 7400 7500 7200 6500 5f00 6500  e.a.t.u.r.e._.e.
+00002740: 7800 7400 7200 6100 6300 7400 6f00 7200  x.t.r.a.c.t.o.r.
+00002750: 7376 5372 6e6c 6f6e 6700 0000 0100 0000  svSrnlong.......
+00002760: 0900 6c00 6100 6200 6500 6c00 6c00 6900  ..l.a.b.e.l.l.i.
+00002770: 6e00 676c 6731 5363 6f6d 7000 0000 0000  n.glg1Scomp.....
+00002780: 0272 f000 0000 0900 6c00 6100 6200 6500  .r......l.a.b.e.
+00002790: 6c00 6c00 6900 6e00 676d 6f44 4462 6c6f  l.l.i.n.gmoDDblo
+000027a0: 6200 0000 0822 8d49 30cc c2c5 4100 0000  b....".I0...A...
+000027b0: 0900 6c00 6100 6200 6500 6c00 6c00 6900  ..l.a.b.e.l.l.i.
+000027c0: 6e00 676d 6f64 4462 6c6f 6200 0000 0822  n.gmodDblob...."
+000027d0: 8d49 30cc c2c5 4100 0000 0900 6c00 6100  .I0...A.....l.a.
+000027e0: 6200 6500 6c00 6c00 6900 6e00 6770 6831  b.e.l.l.i.n.gph1
+000027f0: 5363 6f6d 7000 0000 0000 02d0 0000 0000  Scomp...........
+00002800: 0600 6d00 6900 7800 6900 6e00 7362 7773  ..m.i.x.i.n.sbws
+00002810: 7062 6c6f 6200 0000 b862 706c 6973 7430  pblob....bplist0
+00002820: 30d6 0102 0304 0506 0708 0708 0b08 5d53  0.............]S
+00002830: 686f 7753 7461 7475 7342 6172 5b53 686f  howStatusBar[Sho
+00002840: 7754 6f6f 6c62 6172 5b53 686f 7754 6162  wToolbar[ShowTab
+00002850: 5669 6577 5f10 1443 6f6e 7461 696e 6572  View_..Container
+00002860: 5368 6f77 5369 6465 6261 725c 5769 6e64  ShowSidebar\Wind
+00002870: 6f77 426f 756e 6473 5b53 686f 7753 6964  owBounds[ShowSid
+00002880: 6562 6172 0809 0809 5f10 187b 7b32 3839  ebar...._..{{289
+00002890: 2c20 3330 307d 2c20 7b39 3230 2c20 3433  , 300}, {920, 43
+000028a0: 367d 7d09 0815 232f 3b52 5f6b 6c6d 6e6f  6}}...#/;R_klmno
+000028b0: 8a00 0000 0000 0001 0100 0000 0000 0000  ................
+000028c0: 0d00 0000 0000 0000 0000 0000 0000 0000  ................
+000028d0: 8b00 0000 0600 6d00 6900 7800 6900 6e00  ......m.i.x.i.n.
+000028e0: 736c 6731 5363 6f6d 7000 0000 0001 c41e  slg1Scomp.......
+000028f0: d700 0000 0600 6d00 6900 7800 6900 6e00  ......m.i.x.i.n.
+00002900: 736c 7376 4362 6c6f 6200 0003 0a62 706c  slsvCblob....bpl
+00002910: 6973 7430 30d8 0102 0304 0506 0708 090a  ist00...........
+00002920: 0b1b 5556 0a58 5869 636f 6e53 697a 655f  ..UV.XXiconSize_
+00002930: 100f 7368 6f77 4963 6f6e 5072 6576 6965  ..showIconPrevie
+00002940: 7757 636f 6c75 6d6e 735f 1011 6361 6c63  wWcolumns_..calc
+00002950: 756c 6174 6541 6c6c 5369 7a65 7358 7465  ulateAllSizesXte
+00002960: 7874 5369 7a65 5a73 6f72 7443 6f6c 756d  xtSizeZsortColum
+00002970: 6e5f 1010 7573 6552 656c 6174 6976 6544  n_..useRelativeD
+00002980: 6174 6573 5f10 1276 6965 774f 7074 696f  ates_..viewOptio
+00002990: 6e73 5665 7273 696f 6e23 4030 0000 0000  nsVersion#@0....
+000029a0: 0000 09ae 0c15 1d22 262b 3035 3a3e 4347  ......."&+05:>CG
+000029b0: 4c50 d40d 0e0f 100a 120a 1457 7669 7369  LP.........Wvisi
+000029c0: 626c 6555 7769 6474 6859 6173 6365 6e64  bleUwidthYascend
+000029d0: 696e 675a 6964 656e 7469 6669 6572 0911  ingZidentifier..
+000029e0: 012c 0954 6e61 6d65 d410 1617 1819 1a1b  .,.Tname........
+000029f0: 1b55 7769 6474 6859 6173 6365 6e64 696e  .UwidthYascendin
+00002a00: 6757 7669 7369 626c 6558 7562 6971 7569  gWvisibleXubiqui
+00002a10: 7479 1023 0808 d40d 0e0f 100a 1f1b 2109  ty.#..........!.
+00002a20: 10b5 085c 6461 7465 4d6f 6469 6669 6564  ...\dateModified
+00002a30: d40d 0e0f 101b 1f1b 2508 085b 6461 7465  ........%..[date
+00002a40: 4372 6561 7465 64d4 0d0e 0f10 0a28 1b2a  Created......(.*
+00002a50: 0910 6108 5473 697a 65d4 0d0e 0f10 0a2d  ..a.Tsize......-
+00002a60: 0a2f 0910 7309 546b 696e 64d4 0d0e 0f10  ./..s.Tkind.....
+00002a70: 1b32 0a34 0810 6409 556c 6162 656c d40d  .2.4..d.Ulabel..
+00002a80: 0e0f 101b 370a 3908 104b 0957 7665 7273  ....7.9..K.Wvers
+00002a90: 696f 6ed4 0d0e 0f10 1b12 0a3d 0809 5863  ion........=..Xc
+00002aa0: 6f6d 6d65 6e74 73d4 0d0e 0f10 1b40 1b42  omments......@.B
+00002ab0: 0810 c808 5e64 6174 654c 6173 744f 7065  ....^dateLastOpe
+00002ac0: 6e65 64d4 1016 1718 441f 1b1b 5964 6174  ned.....D...Ydat
+00002ad0: 6541 6464 6564 0808 d418 1617 101b 491b  eAdded........I.
+00002ae0: 4b08 10d2 085a 7368 6172 654f 776e 6572  K....ZshareOwner
+00002af0: d418 1617 101b 491b 4f08 085f 100f 7368  ......I.O.._..sh
+00002b00: 6172 654c 6173 7445 6469 746f 72d4 1816  areLastEditor...
+00002b10: 1710 1b49 1b53 0808 5f10 1069 6e76 6974  ...I.S.._..invit
+00002b20: 6174 696f 6e53 7461 7475 7308 2340 2800  ationStatus.#@(.
+00002b30: 0000 0000 005c 6461 7465 4d6f 6469 6669  .....\dateModifi
+00002b40: 6564 0910 0100 0800 1900 2200 3400 3c00  ed........".4.<.
+00002b50: 5000 5900 6400 7700 8c00 9500 9600 a500  P.Y.d.w.........
+00002b60: ae00 b600 bc00 c600 d100 d200 d500 d600  ................
+00002b70: db00 e400 ea00 f400 fc01 0501 0701 0801  ................
+00002b80: 0901 1201 1301 1501 1601 2301 2c01 2d01  ..........#.,.-.
+00002b90: 2e01 3a01 4301 4401 4601 4701 4c01 5501  ..:.C.D.F.G.L.U.
+00002ba0: 5601 5801 5901 5e01 6701 6801 6a01 6b01  V.X.Y.^.g.h.j.k.
+00002bb0: 7101 7a01 7b01 7d01 7e01 8601 8f01 9001  q.z.{.}.~.......
+00002bc0: 9101 9a01 a301 a401 a601 a701 b601 bf01  ................
+00002bd0: c901 ca01 cb01 d401 d501 d701 d801 e301  ................
+00002be0: ec01 ed01 ee02 0002 0902 0a02 0b02 1e02  ................
+00002bf0: 1f02 2802 3502 3600 0000 0000 0002 0100  ..(.5.6.........
+00002c00: 0000 0000 0000 5900 0000 0000 0000 0000  ......Y.........
+00002c10: 0000 0000 0002 3800 0000 0600 6d00 6900  ......8.....m.i.
+00002c20: 7800 6900 6e00 736c 7376 7062 6c6f 6200  x.i.n.slsvpblob.
+00002c30: 0002 6162 706c 6973 7430 30d8 0102 0304  ..abplist00.....
+00002c40: 0506 0708 090a 0b1d 4546 0a33 5869 636f  ........EF.3Xico
+00002c50: 6e53 697a 655f 100f 7368 6f77 4963 6f6e  nSize_..showIcon
+00002c60: 5072 6576 6965 7757 636f 6c75 6d6e 735f  PreviewWcolumns_
+00002c70: 1011 6361 6c63 756c 6174 6541 6c6c 5369  ..calculateAllSi
+00002c80: 7a65 7358 7465 7874 5369 7a65 5a73 6f72  zesXtextSizeZsor
+00002c90: 7443 6f6c 756d 6e5f 1010 7573 6552 656c  tColumn_..useRel
+00002ca0: 6174 6976 6544 6174 6573 5f10 1276 6965  ativeDates_..vie
+00002cb0: 774f 7074 696f 6e73 5665 7273 696f 6e23  wOptionsVersion#
+00002cc0: 4030 0000 0000 0000 09d9 0c0d 0e0f 1011  @0..............
+00002cd0: 1213 1415 1e23 282d 3236 3b3f 5863 6f6d  .....#(-26;?Xcom
+00002ce0: 6d65 6e74 7355 6c61 6265 6c57 7665 7273  mentsUlabelWvers
+00002cf0: 696f 6e5b 6461 7465 4372 6561 7465 6454  ion[dateCreatedT
+00002d00: 7369 7a65 5c64 6174 654d 6f64 6966 6965  size\dateModifie
+00002d10: 6454 6b69 6e64 546e 616d 655e 6461 7465  dTkindTname^date
+00002d20: 4c61 7374 4f70 656e 6564 d416 1718 191a  LastOpened......
+00002d30: 1b0a 1d55 696e 6465 7855 7769 6474 6859  ...UindexUwidthY
+00002d40: 6173 6365 6e64 696e 6757 7669 7369 626c  ascendingWvisibl
+00002d50: 6510 0711 012c 0908 d416 1718 191f 200a  e....,........ .
+00002d60: 1d10 0510 6409 08d4 1617 1819 2425 0a1d  ....d.......$%..
+00002d70: 1006 104b 0908 d416 1718 1929 2a1d 1d10  ...K.......)*...
+00002d80: 0210 b508 08d4 1617 1819 2e2f 1d0a 1003  .........../....
+00002d90: 1061 0809 d416 1718 1933 2a1d 0a10 0108  .a.......3*.....
+00002da0: 09d4 1617 1819 3738 0a0a 1004 1073 0909  ......78.....s..
+00002db0: d416 1718 193c 1b0a 0a10 0009 09d4 1617  .....<..........
+00002dc0: 1819 4041 1d1d 1008 10c8 0808 0823 4028  ..@A.........#@(
+00002dd0: 0000 0000 0000 5c64 6174 654d 6f64 6966  ......\dateModif
+00002de0: 6965 6409 0008 0019 0022 0034 003c 0050  ied......".4.<.P
+00002df0: 0059 0064 0077 008c 0095 0096 00a9 00b2  .Y.d.w..........
+00002e00: 00b8 00c0 00cc 00d1 00de 00e3 00e8 00f7  ................
+00002e10: 0100 0106 010c 0116 011e 0120 0123 0124  ........... .#.$
+00002e20: 0125 012e 0130 0132 0133 0134 013d 013f  .%...0.2.3.4.=.?
+00002e30: 0141 0142 0143 014c 014e 0150 0151 0152  .A.B.C.L.N.P.Q.R
+00002e40: 015b 015d 015f 0160 0161 016a 016c 016d  .[.]._.`.a.j.l.m
+00002e50: 016e 0177 0179 017b 017c 017d 0186 0188  .n.w.y.{.|.}....
+00002e60: 0189 018a 0193 0195 0197 0198 0199 019a  ................
+00002e70: 01a3 01b0 0000 0000 0000 0201 0000 0000  ................
+00002e80: 0000 0048 0000 0000 0000 0000 0000 0000  ...H............
+00002e90: 0000 01b1 0000 0006 006d 0069 0078 0069  .........m.i.x.i
+00002ea0: 006e 0073 6d6f 4444 626c 6f62 0000 0008  .n.smoDDblob....
+00002eb0: 8cab 5393 98f4 c541 0000 0006 006d 0069  ..S....A.....m.i
+00002ec0: 0078 0069 006e 0073 6d6f 6444 626c 6f62  .x.i.n.smodDblob
+00002ed0: 0000 0008 9ef9 1912 60f3 c541 0000 0006  ........`..A....
+00002ee0: 006d 0069 0078 0069 006e 0073 7068 3153  .m.i.x.i.n.sph1S
+00002ef0: 636f 6d70 0000 0000 01d6 e000 0000 0006  comp............
+00002f00: 006d 0069 0078 0069 006e 0073 7653 726e  .m.i.x.i.n.svSrn
+00002f10: 6c6f 6e67 0000 0001 0000 0005 006d 006f  long.........m.o
+00002f20: 0064 0065 006c 6c67 3153 636f 6d70 0000  .d.e.llg1Scomp..
+00002f30: 0000 0002 2acc 0000 0005 006d 006f 0064  ....*......m.o.d
+00002f40: 0065 006c 6d6f 4444 626c 6f62 0000 0008  .e.lmoDDblob....
+00002f50: a766 df36 65e7 c541 0000 0005 006d 006f  .f.6e..A.....m.o
+00002f60: 0064 0065 006c 6d6f 6444 626c 6f62 0000  .d.e.lmodDblob..
+00002f70: 0008 a766 df36 65e7 c541 0072 0073 7653  ...f.6e..A.r.svS
 00002f80: 726e 6c6f 6e67 0000 0001 0000 0000 0000  rnlong..........
 00002f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00002fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00002fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00002fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00002fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00002fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
@@ -790,15 +790,15 @@
 00003150: 5369 6465 6261 7208 0908 095f 1019 7b7b  Sidebar...._..{{
 00003160: 3938 352c 2033 3830 7d2c 207b 3131 3830  985, 380}, {1180
 00003170: 2c20 3536 387d 7d09 0815 232f 3b52 5f6b  , 568}}...#/;R_k
 00003180: 6c6d 6e6f 8b00 0000 0000 0001 0100 0000  lmno............
 00003190: 0000 0000 0d00 0000 0000 0000 0000 0000  ................
 000031a0: 0000 0000 8c00 0000 0800 7000 6c00 6f00  ..........p.l.o.
 000031b0: 7400 7400 6900 6e00 676c 6731 5363 6f6d  t.t.i.n.glg1Scom
-000031c0: 7000 0000 0000 1064 9300 0000 0800 7000  p......d......p.
+000031c0: 7000 0000 0000 1071 7a00 0000 0800 7000  p......qz.....p.
 000031d0: 6c00 6f00 7400 7400 6900 6e00 676c 7376  l.o.t.t.i.n.glsv
 000031e0: 4362 6c6f 6200 0003 2662 706c 6973 7430  Cblob...&bplist0
 000031f0: 30da 0102 0304 0506 0708 090a 0b0c 0d1a  0...............
 00003200: 5455 5657 0c59 5f10 1276 6965 774f 7074  TUVW.Y_..viewOpt
 00003210: 696f 6e73 5665 7273 696f 6e5f 100f 7368  ionsVersion_..sh
 00003220: 6f77 4963 6f6e 5072 6576 6965 7757 636f  owIconPreviewWco
 00003230: 6c75 6d6e 735f 1011 6361 6c63 756c 6174  lumns_..calculat
@@ -888,20 +888,20 @@
 00003770: 0173 017c 017d 017f 0180 0182 018b 018c  .s.|.}..........
 00003780: 018d 0196 0197 0199 019a 019c 01a5 01a6  ................
 00003790: 01a7 01a9 01b2 01b3 01b5 01b6 01b8 01b9  ................
 000037a0: 01c2 01cb 01d4 01d9 01da 0000 0000 0000  ................
 000037b0: 0201 0000 0000 0000 004c 0000 0000 0000  .........L......
 000037c0: 0000 0000 0000 0000 01e3 0000 0008 0070  ...............p
 000037d0: 006c 006f 0074 0074 0069 006e 0067 6d6f  .l.o.t.t.i.n.gmo
-000037e0: 4444 626c 6f62 0000 0008 b82a 1a04 6ded  DDblob.....*..m.
+000037e0: 4444 626c 6f62 0000 0008 dd69 5493 98f4  DDblob.....iT...
 000037f0: c541 0000 0008 0070 006c 006f 0074 0074  .A.....p.l.o.t.t
 00003800: 0069 006e 0067 6d6f 6444 626c 6f62 0000  .i.n.gmodDblob..
-00003810: 0008 c064 3dd1 6aed c541 0000 0008 0070  ...d=.j..A.....p
+00003810: 0008 2332 cb99 ebf1 c541 0000 0008 0070  ..#2.....A.....p
 00003820: 006c 006f 0074 0074 0069 006e 0067 7068  .l.o.t.t.i.n.gph
-00003830: 3153 636f 6d70 0000 0000 0013 e000 0000  1Scomp..........
+00003830: 3153 636f 6d70 0000 0000 0013 d000 0000  1Scomp..........
 00003840: 0008 0070 006c 006f 0074 0074 0069 006e  ...p.l.o.t.t.i.n
 00003850: 0067 7653 726e 6c6f 6e67 0000 0001 0000  .gvSrnlong......
 00003860: 0013 0070 006f 0073 0065 005f 0063 006f  ...p.o.s.e._.c.o
 00003870: 006e 0066 0069 0067 0075 0072 0061 0074  .n.f.i.g.u.r.a.t
 00003880: 0069 006f 006e 0073 6277 7370 626c 6f62  .i.o.n.sbwspblob
 00003890: 0000 00b8 6270 6c69 7374 3030 d601 0203  ....bplist00....
 000038a0: 0405 0607 0807 080b 085d 5368 6f77 5374  .........]ShowSt
@@ -989,20 +989,20 @@
 00003dc0: 5369 6465 6261 7208 0908 095f 1018 7b7b  Sidebar...._..{{
 00003dd0: 3135 312c 2039 367d 2c20 7b31 3138 302c  151, 96}, {1180,
 00003de0: 2035 3638 7d7d 0908 1523 2f3b 525f 6b6c   568}}...#/;R_kl
 00003df0: 6d6e 6f8a 0000 0000 0000 0101 0000 0000  mno.............
 00003e00: 0000 000d 0000 0000 0000 0000 0000 0000  ................
 00003e10: 0000 008b 0000 0009 0072 006f 0069 005f  .........r.o.i._
 00003e20: 0074 006f 006f 006c 0073 6c67 3153 636f  .t.o.o.l.slg1Sco
-00003e30: 6d70 0000 0000 0006 9e29 0000 0009 0072  mp.......).....r
+00003e30: 6d70 0000 0000 0006 97f6 0000 0009 0072  mp.............r
 00003e40: 006f 0069 005f 0074 006f 006f 006c 0073  .o.i._.t.o.o.l.s
-00003e50: 6d6f 4444 626c 6f62 0000 0008 0f15 33b4  moDDblob......3.
-00003e60: e1ed c541 0000 0009 0072 006f 0069 005f  ...A.....r.o.i._
+00003e50: 6d6f 4444 626c 6f62 0000 0008 a2b4 5ff9  moDDblob......_.
+00003e60: 71ef c541 0000 0009 0072 006f 0069 005f  q..A.....r.o.i._
 00003e70: 0074 006f 006f 006c 0073 6d6f 6444 626c  .t.o.o.l.smodDbl
-00003e80: 6f62 0000 0008 0f15 33b4 e1ed c541 0000  ob......3....A..
+00003e80: 6f62 0000 0008 a2b4 5ff9 71ef c541 0000  ob......_.q..A..
 00003e90: 0009 0072 006f 0069 005f 0074 006f 006f  ...r.o.i._.t.o.o
 00003ea0: 006c 0073 7068 3153 636f 6d70 0000 0000  .l.sph1Scomp....
 00003eb0: 0008 2000 0000 0009 0072 006f 0069 005f  .. ......r.o.i._
 00003ec0: 0074 006f 006f 006c 0073 7653 726e 6c6f  .t.o.o.l.svSrnlo
 00003ed0: 6e67 0000 0001 0000 0007 0073 0061 006e  ng.........s.a.n
 00003ee0: 0064 0062 006f 0078 6277 7370 626c 6f62  .d.b.o.xbwspblob
 00003ef0: 0000 00b8 6270 6c69 7374 3030 d601 0203  ....bplist00....
@@ -1014,15 +1014,15 @@
 00003f50: 6e64 735b 5368 6f77 5369 6465 6261 7208  nds[ShowSidebar.
 00003f60: 0908 095f 1018 7b7b 3135 312c 2039 367d  ..._..{{151, 96}
 00003f70: 2c20 7b31 3138 302c 2035 3638 7d7d 0908  , {1180, 568}}..
 00003f80: 1523 2f3b 525f 6b6c 6d6e 6f8a 0000 0000  .#/;R_klmno.....
 00003f90: 0000 0101 0000 0000 0000 000d 0000 0000  ................
 00003fa0: 0000 0000 0000 0000 0000 008b 0000 0007  ................
 00003fb0: 0073 0061 006e 0064 0062 006f 0078 6c67  .s.a.n.d.b.o.xlg
-00003fc0: 3153 636f 6d70 0000 0000 000c 828c 0000  1Scomp..........
+00003fc0: 3153 636f 6d70 0000 0000 000c d92d 0000  1Scomp.......-..
 00003fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00003fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00003ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00004000: 0000 0000 0000 0006 0000 0000 0000 400b  ..............@.
 00004010: 0000 0045 0000 100c 0000 040a 0000 200c  ...E.......... .
 00004020: 0000 300c 0000 0000 0000 0000 0000 0000  ..0.............
 00004030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
@@ -1144,10 +1144,10 @@
 00004770: 0173 017c 017d 017f 0180 0182 018b 018c  .s.|.}..........
 00004780: 018d 0196 0197 0199 019a 019c 01a5 01a6  ................
 00004790: 01a7 01a9 01b2 01b3 01b5 01b6 01b8 01b9  ................
 000047a0: 01c2 01cb 01d4 01d9 01da 0000 0000 0000  ................
 000047b0: 0201 0000 0000 0000 004c 0000 0000 0000  .........L......
 000047c0: 0000 0000 0000 0000 01e3 0000 0008 0070  ...............p
 000047d0: 006c 006f 0074 0074 0069 006e 0067 6d6f  .l.o.t.t.i.n.gmo
-000047e0: 4444 626c 6f62 0000 0008 b82a 1a04 6ded  DDblob.....*..m.
+000047e0: 4444 626c 6f62 0000 0008 dd69 5493 98f4  DDblob.....iT...
 000047f0: c541 0000 0008 0070 006c 006f 0074 0074  .A.....p.l.o.t.t
 00004800: 0069 006e                                .i.n
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_14bp.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_14bp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_7bp.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_7bp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/doctests.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/doctests.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/fish_feature_extractor_2023_version_3.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/fish_feature_extractor_2023_version_3.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/read_in_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/read_in_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/peaks.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/peaks.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/fish_feature_extractor_2022.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/fish_feature_extractor_2022.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/convex_hull_3_scratch_3.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/convex_hull_3_scratch_3.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/convex_hull_scratch_1.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/convex_hull_scratch_1.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/fish_feature_extractor_2023_version_2.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/fish_feature_extractor_2023_version_2.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/egocentrical_aligner.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/egocentrical_aligner.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/count_values_in_range.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/count_values_in_range.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/graph_creator.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/graph_creator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/termite_rois.csv` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/termite_rois.csv`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/mutual_exclusive.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/mutual_exclusive.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/video_color.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/video_color.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/graph_3d_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/graph_3d_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/video_rotator.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/video_rotator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/add_probability_cnt_features.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/add_probability_cnt_features.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/make_splash.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/make_splash.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/fish_feature_extractor_2023_version_5.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/fish_feature_extractor_2023_version_5.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/time_stamp_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/time_stamp_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/video_rotator_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/video_rotator_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/fish_feature_extractor_2023_version_4.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/fish_feature_extractor_2023_version_4.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/misc/convex_hull_scratch_2.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/misc/convex_hull_scratch_2.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_8bps_2_animals.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_8bps_2_animals.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/perimeter_jit.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/perimeter_jit.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_subsets.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_subsets.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_user_defined.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_user_defined.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_16bp.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_16bp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_9bp.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_9bp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_8bp.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_8bp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/feature_extractor_4bp.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/feature_extractor_4bp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/feature_extractors/amber_feature_extractor.py` & `Simba-UW-tf-dev-1.91.6/simba/feature_extractors/amber_feature_extractor.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/requirements.txt` & `Simba-UW-tf-dev-1.91.6/simba/requirements.txt`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/annotator_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/annotator_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/timeseries_features_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/timeseries_features_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/mixins/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/pop_up_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/pop_up_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/config_reader.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/config_reader.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/circular_statistics.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/circular_statistics.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/network_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/network_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/pose_importer_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/pose_importer_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/video_processing_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/video_processing_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/feature_extraction_supplement_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/feature_extraction_supplement_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/statistics_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/statistics_mixin.py`

 * *Files 2% similar despite different names*

```diff
@@ -201,14 +201,17 @@
     @njit("(float64[:], float64[:])", cache=True)
     def cohens_d(sample_1: np.ndarray, sample_2: np.ndarray) -> float:
         """
         Jitted compute of Cohen's d between two distributions.
 
         Cohen's d is a measure of effect size that quantifies the difference between the means of two distributions in terms of their standard deviation. It is calculated as the difference between the means of the two distributions divided by the pooled standard deviation.
 
+        Higher values indicate a larger effect size, with 0.2 considered a small effect, 0.5 a medium effect, and 0.8 or above a large effect. Negative values indicate that the mean of sample 2 is larger than the mean of sample 1.
+
+
         .. math::
            d = \\frac{{\\bar{x}_1 - \\bar{x}_2}}{{\\sqrt{{\\frac{{s_1^2 + s_2^2}}{2}}}}}
 
         where:
             - \\(\\bar{x}_1\\) and \\(\\bar{x}_2\\) are the means of sample_1 and sample_2 respectively,
             - \\(s_1\\) and \\(s_2\\) are the standard deviations of sample_1 and sample_2 respectively.
 
@@ -224,17 +227,15 @@
         """
         return (np.mean(sample_1) - np.mean(sample_2)) / (
             np.sqrt((np.std(sample_1) ** 2 + np.std(sample_2) ** 2) / 2)
         )
 
     @staticmethod
     @njit("(float64[:], float64[:], float64)", cache=True)
-    def rolling_cohens_d(
-        data: np.ndarray, time_windows: np.ndarray, fps: float
-    ) -> np.ndarray:
+    def rolling_cohens_d(data: np.ndarray, time_windows: np.ndarray, fps: float) -> np.ndarray:
         """
         Jitted compute of rolling Cohen's D statistic comparing the current time-window of
         size N to the preceding window of size N.
 
         :parameter ndarray data: 1D array of size len(frames) representing feature values.
         :parameter np.ndarray[ints] time_window: Time windows to compute ANOVAs for in seconds.
         :parameter int fps: Frame-rate of recorded video.
@@ -2499,18 +2500,85 @@
                     * (cnt_0_0 + cnt_0_1)
                     * (cnt_1_0 + cnt_0_0)
                     * (cnt_1_1 * cnt_0_1)
                 )
             )
 
     @staticmethod
+    def eta_squared(x: np.ndarray, y: np.ndarray) -> float:
+        """
+        Calculate eta-squared, a measure of between-subjects effect size.
+
+        Eta-squared (\(\eta^2\)) is calculated as the ratio of the sum of squares between groups to the total sum of squares. Range from 0 to 1, where larger values indicate
+        a stronger effect size.
+
+        .. math::
+           \eta^2 = \frac{SS_{between}}{SS_{between} + SS_{within}}
+
+        where:
+        - \( SS_{between} \) is the sum of squares between groups.
+        - \( SS_{within} \) is the sum of squares within groups.
+
+        :param np.ndarray x: 1D array containing the dependent variable data.
+        :param np.ndarray y: 1d array containing the grouping variable (categorical) data of same size as ``x``.
+        :return float: The eta-squared value representing the proportion of variance in the dependent variable that is attributable to the grouping variable.
+        """
+
+        check_valid_array(data=x, source=f'{Statistics.eta_squared.__name__} x', accepted_ndims=(1,), accepted_dtypes=(np.float64, np.int64, np.int32, np.float32, int, float))
+        check_valid_array(data=y, source=f'{Statistics.eta_squared.__name__} y', accepted_shapes=[x.shape])
+        sum_square_within, sum_square_between = 0, 0
+        for lbl in np.unique(y):
+            g = x[np.argwhere(y == lbl)]
+            sum_square_within += np.sum((g - np.mean(g)) ** 2)
+            sum_square_between += len(g) * (np.mean(g) - np.mean(x)) ** 2
+        if sum_square_between + sum_square_within == 0:
+            return 0.0
+        else:
+            return (sum_square_between / (sum_square_between + sum_square_within)) ** .5
+
+    @staticmethod
+    @jit(nopython=True)
+    def sliding_eta_squared(x: np.ndarray, y: np.ndarray, window_sizes: np.ndarray, sample_rate: int) -> np.ndarray:
+        """
+        Calculate sliding window eta-squared, a measure of effect size for between-subjects designs,
+        over multiple window sizes.
+
+        :param np.ndarray x: The array containing the dependent variable data.
+        :param np.ndarray y: The array containing the grouping variable (categorical) data.
+        :param np.ndarray window_sizes: 1D array of window sizes in seconds.
+        :param int sample_rate: The sampling rate of the data in frames per second.
+        :return np.ndarray: Array of size  x.shape[0] x window_sizes.shape[0] with sliding eta squared values.
+
+        :example:
+        >>> x = np.random.randint(0, 10, (10000,))
+        >>> y = np.random.randint(0, 2, (10000,))
+        >>> Statistics.sliding_eta_squared(x=x, y=y, window_sizes=np.array([1.0, 2.0]), sample_rate=10)
+
+        """
+        results = np.full((x.shape[0], window_sizes.shape[0]), -1.0)
+        for i in range(window_sizes.shape[0]):
+            window_size = int(window_sizes[i] * sample_rate)
+            for l, r in zip(range(0, x.shape[0] + 1), range(window_size, x.shape[0] + 1)):
+                sample_x = x[l:r]
+                sample_y = y[l:r]
+                sum_square_within, sum_square_between = 0, 0
+                for lbl in np.unique(sample_y):
+                    g = sample_x[np.argwhere(sample_y == lbl).flatten()]
+                    sum_square_within += np.sum((g - np.mean(g)) ** 2)
+                    sum_square_between += len(g) * (np.mean(g) - np.mean(sample_x)) ** 2
+                if sum_square_between + sum_square_within == 0:
+                    results[r - 1, i] = 0.0
+                else:
+                    results[r - 1, i] = (sum_square_between / (sum_square_between + sum_square_within)) ** .5
+        return results
+
+
+    @staticmethod
     @njit("(int32[:, :], float64[:], int64)")
-    def sliding_phi_coefficient(
-        data: np.ndarray, window_sizes: np.ndarray, sample_rate: int
-    ) -> np.ndarray:
+    def sliding_phi_coefficient(data: np.ndarray, window_sizes: np.ndarray, sample_rate: int) -> np.ndarray:
         """
         Calculate sliding phi coefficients for a 2x2 contingency table derived from binary data.
 
         Computes sliding phi coefficients for a 2x2 contingency table derived from binary data over different
         time windows. The phi coefficient is a measure of association between two binary variables, and sliding phi
         coefficients can reveal changes in association over time.
 
@@ -2523,17 +2591,15 @@
         >>> data = np.random.randint(0, 2, (200, 2))
         >>> Statistics().sliding_phi_coefficient(data=data, window_sizes=np.array([1.0, 4.0]), sample_rate=10)
         """
 
         results = np.full((data.shape[0], window_sizes.shape[0]), -1.0)
         for i in prange(window_sizes.shape[0]):
             window_size = int(window_sizes[i] * sample_rate)
-            for l, r in zip(
-                range(0, data.shape[0] + 1), range(window_size, data.shape[0] + 1)
-            ):
+            for l, r in zip(range(0, data.shape[0] + 1), range(window_size, data.shape[0] + 1)):
                 sample = data[l:r, :]
                 cnt_0_0 = len(
                     np.argwhere((sample[:, 0] == 0) & (sample[:, 1] == 0)).flatten()
                 )
                 cnt_0_1 = len(
                     np.argwhere((sample[:, 0] == 0) & (sample[:, 1] == 1)).flatten()
                 )
@@ -2563,14 +2629,67 @@
                             * (cnt_1_1 * cnt_0_1)
                         )
                     )
 
         return results.astype(np.float32)
 
     @staticmethod
+    def relative_risk(x: np.ndarray, y: np.ndarray) -> float:
+        """
+        Calculate the relative risk between two binary arrays.
+
+        Relative risk (RR) is the ratio of the probability of an event occurring in one group/feature/cluster/variable (x)
+        to the probability of the event occurring in another group/feature/cluster/variable (y).
+
+        :param np.ndarray x: The first 1D binary array.
+        :param np.ndarray y: The second 1D binary array.
+        :return float: The relative risk between arrays x and y.
+
+        :example:
+        >>> Statistics.relative_risk(x=np.array([0, 1, 1]), y=np.array([0, 1, 0]))
+        >>> 2.0
+        """
+        check_valid_array(data=x, source=f'{Statistics.relative_risk.__name__} x', accepted_ndims=(1,), accepted_values=[0, 1])
+        check_valid_array(data=y, source=f'{Statistics.relative_risk.__name__} y', accepted_ndims=(1,), accepted_values=[0, 1])
+        if np.sum(y) == 0:
+            return -1.0
+        elif np.sum(x) == 0:
+            return 0.0
+        else:
+            return (np.sum(x) / x.shape[0]) / (np.sum(y) / y.shape[0])
+
+    @staticmethod
+    @jit(nopython=True)
+    def sliding_relative_risk(x: np.ndarray, y: np.ndarray, window_sizes: np.ndarray, sample_rate: int) -> np.ndarray:
+        """
+        Calculate sliding relative risk values between two binary arrays using different window sizes.
+
+        :param np.ndarray x: The first 1D binary array.
+        :param np.ndarray y: The second 1D binary array.
+        :param np.ndarray window_sizes:
+        :param int sample_rate:
+        :return np.ndarray: Array of size  x.shape[0] x window_sizes.shape[0] with sliding eta squared values.
+
+        :example:
+        >>> Statistics.sliding_relative_risk(x=np.array([0, 1, 1, 0]), y=np.array([0, 1, 0, 0]), window_sizes=np.array([1.0]), sample_rate=2)
+        """
+        results = np.full((x.shape[0], window_sizes.shape[0]), -1.0)
+        for i in range(window_sizes.shape[0]):
+            window_size = int(window_sizes[i] * sample_rate)
+            for l, r in zip(range(0, x.shape[0] + 1), range(window_size, x.shape[0] + 1)):
+                sample_x, sample_y = x[l:r], y[l:r]
+                if np.sum(sample_y) == 0:
+                    results[r - 1, i] = -1.0
+                elif np.sum(sample_x) == 0:
+                    results[r - 1, i] = 0.0
+                else:
+                    results[r - 1, i] = (np.sum(sample_x) / sample_x.shape[0]) / (np.sum(sample_y) / sample_y.shape[0])
+        return results
+
+    @staticmethod
     @njit("int64[:], int64[:],")
     def cohens_h(sample_1: np.ndarray, sample_2: np.ndarray) -> float:
         """
         Jitted compute Cohen's h effect size for two samples of binary [0, 1] values. Cohen's h is a measure of effect size
         for comparing two independent samples based on the differences in proportions of the two samples.
 
         .. note:
@@ -2993,14 +3112,120 @@
             data=y, bin_count=bin_count, range=np.array([0, int(bin_width * bin_count)])
         )
         return self._hellinger_helper(
             x=s1_h.astype(np.float32), y=s2_h.astype(np.float32)
         )
 
     @staticmethod
+    def youden_j(sample_1: np.ndarray, sample_2: np.ndarray) -> float:
+        """
+        Calculate Youden's J statistic from two binary arrays.
+
+        Youden's J statistic is a measure of the overall performance of a binary classification test, taking into account both sensitivity (true positive rate) and specificity (true negative rate).
+
+        :param sample_1: The first binary array.
+        :param sample_2: The second binary array.
+        :return float: Youden's J statistic.
+        """
+
+        check_valid_array(data=sample_1, source=f'{Statistics.youden_j.__name__} sample_1', accepted_ndims=(1,), accepted_values=[0, 1])
+        check_valid_array(data=sample_2, source=f'{Statistics.youden_j.__name__} sample_2', accepted_ndims=(1,), accepted_shapes=[(sample_1.shape)], accepted_values=[0, 1])
+        tp = np.sum((sample_1 == 1) & (sample_2 == 1))
+        tn = np.sum((sample_1 == 0) & (sample_2 == 0))
+        fp = np.sum((sample_1 == 0) & (sample_2 == 1))
+        fn = np.sum((sample_1 == 1) & (sample_2 == 0))
+        if tp + fn == 0 or tn + fp == 0:
+            return np.nan
+        else:
+            sensitivity = tp / (tp + fn)
+            specificity = tn / (tn + fp)
+            return sensitivity + specificity - 1
+
+    @staticmethod
+    def jaccard_distance(x: np.ndarray, y: np.ndarray) -> float:
+        """
+        Calculate the Jaccard distance between two 1D NumPy arrays.
+
+        The Jaccard distance is a measure of dissimilarity between two sets. It is defined as the size of the
+        intersection of the sets divided by the size of the union of the sets.
+
+        :param np.ndarray x: The first 1D NumPy array.
+        :param np.ndarray y: The second 1D NumPy array.
+        :return float: The Jaccard distance between arrays x and y.
+
+        :example:
+        >>> x = np.random.randint(0, 5, (100))
+        >>> y = np.random.randint(0, 7, (100))
+        >>> Statistics.jaccard_distance(x=x, y=y)
+        >>> 0.2857143
+        """
+        check_valid_array(data=x, source=f'{Statistics.jaccard_distance.__name__} x', accepted_ndims=(1,))
+        check_valid_array(data=y, source=f'{Statistics.jaccard_distance.__name__} y', accepted_ndims=(1,), accepted_dtypes=[x.dtype.type])
+        u_x, u_y = np.unique(x), np.unique(y)
+        return np.float32(1 -(len(np.intersect1d(u_x, u_y)) / len(np.unique(np.hstack((u_x, u_y))))))
+
+    @staticmethod
+    def manhattan_distance_cdist(data: np.ndarray) -> np.ndarray:
+        """
+        Compute the pairwise Manhattan distance matrix between points in a 2D array.
+
+        Can be preferred over Euclidean distance in scenarios where the movement is restricted
+        to grid-based paths and/or the data is high dimensional.
+
+        .. math::
+           D_{\text{Manhattan}} = |x_2 - x_1| + |y_2 - y_1|
+
+        :param data: 2D array where each row represents a featurized observation (e.g., frame)
+        :return np.ndarray: Pairwise Manhattan distance matrix where element (i, j) represents the distance between points i and j.
+
+        :example:
+        >>> data = np.random.randint(0, 50, (10000, 2))
+        >>> Statistics.manhattan_distance_cdist(data=data)
+        """
+        check_valid_array(data=data, source=f'{Statistics.manhattan_distance_cdist} data', accepted_ndims=(2,), accepted_dtypes=(np.float32, np.float64, np.int64, np.int32, int, float, np.float16, np.int8, np.int16))
+        differences = np.abs(data[:, np.newaxis, :] - data)
+        results = np.sum(differences, axis=-1)
+        return results
+
+    @staticmethod
+    @jit('(float32[:,:],)')
+    def mahalanobis_distance_cdist(data: np.ndarray) -> np.ndarray:
+        """
+        Compute the Mahalanobis distance between every pair of observations in a 2D array using numba.
+
+        The Mahalanobis distance is a measure of the distance between a point and a distribution. It accounts for correlations between variables and the scales of the variables, making it suitable for datasets where features are not independent and have different variances.
+
+        .. note::
+           Significantly reduced runtime versus Mahalanobis scipy.cdist only with larger feature sets ( > 10-50).
+
+        However, Mahalanobis distance may not be suitable in certain scenarios, such as:
+        - When the dataset is small and the covariance matrix is not accurately estimated.
+        - When the dataset contains outliers that significantly affect the estimation of the covariance matrix.
+        - When the assumptions of multivariate normality are violated.
+
+        :param np.ndarray data: 2D array with feature observations. Frames on axis 0 and feature values on axis 1
+        :return np.ndarray: Pairwise Mahalanobis distance matrix where element (i, j) represents the Mahalanobis distance between  observations i and j.
+
+        :example:
+        >>> data = np.random.randint(0, 50, (1000, 200)).astype(np.float32)
+        >>> x = mahalanobis_distance_cdist(data=data)
+        """
+
+        covariance_matrix = np.cov(data, rowvar=False)
+        inv_covariance_matrix = np.linalg.inv(covariance_matrix).astype(np.float32)
+        n = data.shape[0]
+        distances = np.zeros((n, n))
+        for i in prange(n):
+            for j in range(n):
+                diff = data[i] - data[j]
+                diff = diff.astype(np.float32)
+                distances[i, j] = np.sqrt(np.dot(np.dot(diff, inv_covariance_matrix), diff.T))
+        return distances
+
+    @staticmethod
     @njit("(int64[:], int64[:])")
     def cohens_kappa(sample_1: np.ndarray, sample_2: np.ndarray):
         """
         Jitted compute Cohen's Kappa coefficient for two binary samples.
 
         Cohen's Kappa coefficient measures the agreement between two sets of binary ratings, taking into account agreement occurring by chance.
         It ranges from -1 to 1, where 1 indicates perfect agreement, 0 indicates agreement by chance, and -1 indicates complete disagreement.
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/feature_extraction_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/feature_extraction_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/plotting_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/plotting_mixin.py`

 * *Files 1% similar despite different names*

```diff
@@ -3,24 +3,22 @@
 import os
 import shutil
 from typing import Any, Dict, List, Optional, Tuple, Union
 
 import cv2
 import imutils
 import matplotlib
-matplotlib.use('agg')
 import matplotlib.pyplot as plt
 import numpy as np
 import pandas as pd
 import PIL
 import plotly.graph_objs as go
 import seaborn as sns
 from matplotlib import cm
 from matplotlib.backends.backend_agg import FigureCanvasAgg as FigureCanvas
-
 from numba import bool_, njit, uint8
 from PIL import Image
 
 try:
     from typing import Literal
 except:
     from typing_extensions import Literal
@@ -449,64 +447,43 @@
                 msg=f"Final classifier heatmap image saved at at {file_name}",
                 source="make_clf_heatmap_plot",
             )
         else:
             return image
 
     @staticmethod
-    def make_location_heatmap_plot(
-        frm_data: np.array,
-        max_scale: float,
-        palette: Literal[Options.PALETTE_OPTIONS],
-        aspect_ratio: float,
-        shading: str,
-        img_size: Tuple[int, int],
-        file_name: str or None = None,
-        final_img: bool = False,
-    ):
+    def make_location_heatmap_plot(frm_data: np.array,
+                                   max_scale: float,
+                                   palette: Literal[Options.PALETTE_OPTIONS],
+                                   aspect_ratio: float,
+                                   shading: str,
+                                   img_size: Tuple[int, int],
+                                   file_name: Optional[Union[str, os.PathLike]] = None):
 
         cum_df = pd.DataFrame(frm_data).reset_index()
-        cum_df = cum_df.melt(
-            id_vars="index",
-            value_vars=None,
-            var_name=None,
-            value_name="seconds",
-            col_level=None,
-        ).rename(columns={"index": "vertical_idx", "variable": "horizontal_idx"})
-        cum_df["color"] = (
-            (cum_df["seconds"].astype(float) / float(max_scale))
-            .round(2)
-            .clip(upper=100)
-        )
-        color_array = np.zeros(
-            (
-                len(cum_df["vertical_idx"].unique()),
-                len(cum_df["horizontal_idx"].unique()),
-            )
-        )
+        cum_df = cum_df.melt(id_vars="index", value_vars=None, var_name=None, value_name="seconds", col_level=None).rename(columns={"index": "vertical_idx", "variable": "horizontal_idx"})
+        cum_df["color"] = ((cum_df["seconds"].astype(float) / float(max_scale)).round(2).clip(upper=100))
+        color_array = np.zeros((len(cum_df["vertical_idx"].unique()), len(cum_df["horizontal_idx"].unique())))
         for i in range(color_array.shape[0]):
             for j in range(color_array.shape[1]):
-                value = cum_df["color"][
-                    (cum_df["horizontal_idx"] == j) & (cum_df["vertical_idx"] == i)
-                ].values[0]
+                value = cum_df["color"][(cum_df["horizontal_idx"] == j) & (cum_df["vertical_idx"] == i)].values[0]
                 color_array[i, j] = value
         color_array = color_array * max_scale
         matplotlib.font_manager._get_font.cache_clear()
         plt.close("all")
         fig = plt.figure()
         im_ratio = color_array.shape[0] / color_array.shape[1]
-        plt.pcolormesh(
-            color_array,
-            shading=shading,
-            cmap=palette,
-            rasterized=True,
-            alpha=1,
-            vmin=0.0,
-            vmax=max_scale,
-        )
+        plt.pcolormesh(color_array,
+                       shading=shading,
+                       cmap=palette,
+                       rasterized=True,
+                       alpha=1,
+                       vmin=0.0,
+                       vmax=max_scale)
+
         plt.gca().invert_yaxis()
         plt.xticks([])
         plt.yticks([])
         plt.axis("off")
         plt.tick_params(axis="both", which="both", length=0)
         cb = plt.colorbar(pad=0.0, fraction=0.023 * im_ratio)
         cb.ax.tick_params(size=0)
@@ -514,26 +491,22 @@
         cb.set_label("location (seconds)", rotation=270, labelpad=10)
         plt.tight_layout()
         # plt.gca().set_aspect(aspect_ratio)
         canvas = FigureCanvas(fig)
         canvas.draw()
         mat = np.array(canvas.renderer._renderer)
         image = cv2.cvtColor(mat, cv2.COLOR_RGB2BGR)
-        image = cv2.resize(image, img_size)
+        image = cv2.resize(mat, img_size)
         image = np.uint8(image)
         plt.close("all")
-        if final_img:
+        if file_name is not None:
             cv2.imwrite(file_name, image)
-            stdout_success(
-                msg=f"Final location heatmap image saved at at {file_name}",
-                source=PlottingMixin.make_location_heatmap_plot.__class__.__name__,
-            )
+            stdout_success(msg=f"Location heatmap image saved at at {file_name}", source=PlottingMixin.make_location_heatmap_plot.__class__.__name__)
         else:
             return image
-        return None
 
     def get_bouts_for_gantt(
         self, data_df: pd.DataFrame, clf_name: str, fps: int
     ) -> np.ndarray:
         """
         Helper to detect all behavior bouts for a specific classifier.
 
@@ -577,73 +550,14 @@
     def resize_gantt(self, gantt_img: np.array, img_height: int) -> np.ndarray:
         """
         Helper to resize image while retaining aspect ratio.
         """
 
         return imutils.resize(gantt_img, height=img_height)
 
-    def gantt_creator_mp(self,
-                         data: Tuple[int, np.ndarray],
-                         frame_setting: bool,
-                         video_setting: bool,
-                         video_save_dir: str,
-                         frame_folder_dir: str,
-                         bouts_df: pd.DataFrame,
-                         clf_names: list,
-                         fps: int,
-                         style_attr: dict,
-                         video_name: str):
-
-        group, frame_rng = data[0], data[1:]
-        start_frm, end_frm, current_frm = frame_rng[0], frame_rng[-1], frame_rng[0]
-        video_writer = None
-        colour_tuple = list(np.arange(3.5, 203.5, 5))
-        colours = get_named_colors()
-        if video_setting:
-            fourcc = cv2.VideoWriter_fourcc(*Formats.MP4_CODEC.value)
-            video_save_path = os.path.join(video_save_dir, f"{group}.mp4")
-            video_writer = cv2.VideoWriter(video_save_path, fourcc, fps, (style_attr['width'], style_attr['height']))
-        while current_frm <= end_frm:
-            fig, ax = plt.subplots()
-            bout_rows = bouts_df.loc[bouts_df["End_frame"] <= current_frm]
-            for i, event in enumerate(bout_rows.groupby("Event")):
-                for x in clf_names:
-                    if event[0] == x:
-                        ix = clf_names.index(x)
-                        data_event = event[1][["Start_time", "Bout_time"]]
-                        ax.broken_barh(data_event.values, (colour_tuple[ix], 3), facecolors=colours[ix])
-
-            x_ticks_locs = x_lbls = np.round(np.linspace(0, round((current_frm / fps), 3), 6))
-            ax.set_xticks(x_ticks_locs)
-            ax.set_xticklabels(x_lbls)
-            ax.set_ylim(0, colour_tuple[len(clf_names)])
-            ax.set_yticks(np.arange(5, 5 * len(clf_names) + 1, 5))
-            ax.tick_params(axis="both", labelsize=style_attr['font size'])
-            ax.set_yticklabels(clf_names, rotation=style_attr['font rotation'])
-            ax.set_xlabel("Session (s)", fontsize=style_attr['font size'])
-            ax.yaxis.grid(True)
-            canvas = FigureCanvas(fig)
-            canvas.draw()
-            mat = np.array(canvas.renderer._renderer)
-            img = cv2.cvtColor(mat, cv2.COLOR_RGB2BGR)
-            img = np.uint8(cv2.resize(img, (style_attr['width'], style_attr['height'])))
-            if video_setting:
-                video_writer.write(img)
-            if frame_setting:
-                frame_save_name = os.path.join(frame_folder_dir, f"{current_frm}.png")
-                cv2.imwrite(frame_save_name, img)
-            plt.close(fig)
-            current_frm += 1
-            print(f"Gantt frame created: {current_frm + 1}, Video: {video_name}, Processing core: {group + 1}")
-
-        if video_setting:
-            video_writer.release()
-
-        return group
-
     @staticmethod
     def bbox_mp(
         frm_range: list,
         polygon_data: dict,
         animal_bp_dict: dict,
         data_df: Optional[pd.DataFrame],
         intersection_data_df: Optional[pd.DataFrame],
@@ -1680,34 +1594,17 @@
         :param polygons:
         :param show_center:
         :param show_tags:
         :param circle_size:
         :return:
         """
 
-        check_valid_array(
-            data=img, source=f"{PlottingMixin.polygons_onto_image.__name__} img"
-        )
-        check_valid_dataframe(
-            df=polygons,
-            source=f"{PlottingMixin.polygons_onto_image.__name__} polygons",
-            required_fields=[
-                "vertices",
-                "Center_X",
-                "Center_Y",
-                "Color BGR",
-                "Thickness",
-                "Tags",
-            ],
-        )
-        check_int(
-            name=PlottingMixin.polygons_onto_image.__name__,
-            value=circle_size,
-            min_value=1,
-        )
+        check_valid_array(data=img, source=f"{PlottingMixin.polygons_onto_image.__name__} img")
+        check_valid_dataframe(df=polygons, source=f"{PlottingMixin.polygons_onto_image.__name__} polygons", required_fields=["vertices", "Color BGR", "Thickness", "Tags"])
+        check_int(name=PlottingMixin.polygons_onto_image.__name__, value=circle_size, min_value=1)
         for _, row in polygons.iterrows():
             img = cv2.polylines(
                 img,
                 [row["vertices"].astype(int)],
                 True,
                 row["Color BGR"],
                 thickness=int(row["Thickness"]),
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/image_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/image_mixin.py`

 * *Files 1% similar despite different names*

```diff
@@ -47,20 +47,20 @@
 
     """
 
     def __init__(self):
         pass
 
     @staticmethod
-    def brightness_intensity(
-        imgs: List[np.ndarray], ignore_black: Optional[bool] = True
-    ) -> List[float]:
+    def brightness_intensity(imgs: List[np.ndarray], ignore_black: Optional[bool] = True) -> List[float]:
         """
         Compute the average brightness intensity within each image within a list.
 
+        For example, (i) create a list of images containing a light cue ROI, (ii) compute brightness in each image, (iii) perform kmeans on brightness, and get the frames when the light cue is on vs off.
+
         :param List[np.ndarray] imgs: List of images as arrays to calculate average brightness intensity within.
         :param Optional[bool] ignore_black: If True, ignores black pixels. If the images are sliced non-rectangular geometric shapes created by ``slice_shapes_in_img``, then pixels that don't belong to the shape has been masked in black.
         :returns List[float]: List of floats of size len(imgs) with brightness intensities.
 
         :example:
         >>> img = cv2.imread('/Users/simon/Desktop/envs/troubleshooting/khan/project_folder/videos/stitched_frames/0.png').astype(np.uint8)
         >>> ImageMixin.brightness_intensity(imgs=[img], ignore_black=False)
@@ -86,25 +86,16 @@
                 else:
                     results.append(np.ceil(np.average(img)))
         return results
 
     @staticmethod
     def gaussian_blur(img: np.ndarray, kernel_size: Optional[Tuple] = (9, 9)):
         check_if_valid_img(data=img, source=ImageMixin.gaussian_blur.__name__)
-        check_instance(
-            source=ImageMixin.gaussian_blur.__name__,
-            instance=kernel_size,
-            accepted_types=(tuple,),
-        )
-        check_valid_lst(
-            data=list(kernel_size),
-            source=ImageMixin.gaussian_blur.__name__,
-            valid_dtypes=(int,),
-            exact_len=2,
-        )
+        check_instance(source=ImageMixin.gaussian_blur.__name__, instance=kernel_size, accepted_types=(tuple,))
+        check_valid_lst(data=list(kernel_size), source=ImageMixin.gaussian_blur.__name__, valid_dtypes=(int,), exact_len=2,)
         return cv2.GaussianBlur(img, kernel_size, 0)
 
     @staticmethod
     def erode(
         img: np.ndarray,
         kernel_size: Optional[Tuple] = (3, 3),
         iterations: Optional[int] = 3,
@@ -167,21 +158,20 @@
             )
         else:
             return cv2.compareHist(
                 img_1.astype(np.float32), img_2.astype(np.float32), method
             )
 
     @staticmethod
-    def get_contourmatch(
-        img_1: np.ndarray,
-        img_2: np.ndarray,
-        mode: Optional[Literal["all", "exterior"]] = "all",
-        method: Optional[Literal["simple", "none", "l2", "kcos"]] = "simple",
-        canny: Optional[bool] = True,
-    ) -> float:
+    def get_contourmatch(img_1: np.ndarray,
+                         img_2: np.ndarray,
+                         mode: Optional[Literal["all", "exterior"]] = "all",
+                         method: Optional[Literal["simple", "none", "l2", "kcos"]] = "simple",
+                         canny: Optional[bool] = True) -> float:
+
         """
         Calculate contour similarity between two images.
 
         :param np.ndarray img_1: First input image (numpy array).
         :param np.ndarray img_2: Second input image (numpy array).
         :param Optional[Literal['all', 'exterior']] method: Method for contour extraction. Options: 'all' (all contours) or 'exterior' (only exterior contours). Defaults to 'all'.
         :return float: Contour similarity score between the two images. Lower values indicate greater similarity, and higher values indicate greater dissimilarity.
@@ -392,37 +382,35 @@
             for i in range(len(cnts)):
                 if (
                     hierarchy[0][i][3] == -1
                 ):  # Contour with no parent (interior contour)
                     interior_contours.append(cnts[i])
 
     @staticmethod
-    def orb_matching_similarity_(
-        img_1: np.ndarray,
-        img_2: np.ndarray,
-        method: Literal["knn", "match", "radius"] = "knn",
-        mask: Optional[np.ndarray] = None,
-        threshold: Optional[int] = 0.75,
-    ) -> int:
+    def orb_matching_similarity_(img_1: np.ndarray,
+                                 img_2: np.ndarray,
+                                 method: Literal["knn", "match", "radius"] = "knn",
+                                 mask: Optional[np.ndarray] = None,
+                                 threshold: Optional[int] = 0.75) -> int:
+
+
         """Perform ORB feature matching between two sets of images.
 
         >>> img_1 = cv2.imread('/Users/simon/Desktop/envs/troubleshooting/khan/project_folder/videos/stitched_frames/0.png').astype(np.uint8)
         >>> img_2 = cv2.imread('/Users/simon/Desktop/envs/troubleshooting/khan/project_folder/videos/stitched_frames/10.png').astype(np.uint8)
         >>> ImageMixin().orb_matching_similarity_(img_1=img_1, img_2=img_2, method='radius')
         >>> 4
         """
 
         kp1, des1 = cv2.ORB_create().detectAndCompute(img_1, mask)
         kp2, des2 = cv2.ORB_create().detectAndCompute(img_2, mask)
         sliced_matches = None
         if method == "knn":
             matches = cv2.BFMatcher().knnMatch(des1, des2, k=2)
-            sliced_matches = [
-                m for m, n in matches if m.distance < threshold * n.distance
-            ]
+            sliced_matches = [m for m, n in matches if m.distance < threshold * n.distance]
         if method == "match":
             matches = cv2.BFMatcher(cv2.NORM_HAMMING, crossCheck=True).match(des1, des2)
             sliced_matches = [match for match in matches if match.distance <= threshold]
         if method == "radius":
             matches = cv2.BFMatcher().radiusMatch(des1, des2, maxDistance=threshold)
             sliced_matches = [item for sublist in matches for item in sublist]
         return len(sliced_matches)
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/unsupervised_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/unsupervised_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/train_model_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/train_model_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/geometry_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/geometry_mixin.py`

 * *Files 0% similar despite different names*

```diff
@@ -8626,1752 +8626,1758 @@
 00021b10: 6574 7572 6e20 706f 6c79 676f 6e73 2c20  eturn polygons, 
 00021b20: 726f 756e 6428 2876 5f68 6578 5f63 6e74  round((v_hex_cnt
 00021b30: 5b30 5d20 2f20 685f 6865 785f 636e 745b  [0] / h_hex_cnt[
 00021b40: 305d 292c 2033 290a 0a20 2020 2040 7374  0]), 3)..    @st
 00021b50: 6174 6963 6d65 7468 6f64 0a20 2020 2064  aticmethod.    d
 00021b60: 6566 205f 6375 6d73 756d 5f63 6f6f 7264  ef _cumsum_coord
 00021b70: 5f67 656f 6d65 7472 6965 735f 6865 6c70  _geometries_help
-00021b80: 6572 280a 2020 2020 2020 2020 6461 7461  er(.        data
-00021b90: 3a20 6e70 2e6e 6461 7272 6179 2c20 6765  : np.ndarray, ge
-00021ba0: 6f6d 6574 7269 6573 3a20 4469 6374 5b54  ometries: Dict[T
-00021bb0: 7570 6c65 5b69 6e74 2c20 696e 745d 2c20  uple[int, int], 
-00021bc0: 506f 6c79 676f 6e5d 2c20 7665 7262 6f73  Polygon], verbos
-00021bd0: 653a 2062 6f6f 6c0a 2020 2020 293a 0a20  e: bool.    ):. 
-00021be0: 2020 2020 2020 2064 6174 615f 706f 696e         data_poin
-00021bf0: 7420 3d20 506f 696e 7428 6461 7461 5b31  t = Point(data[1
-00021c00: 3a5d 290a 2020 2020 2020 2020 6966 2076  :]).        if v
-00021c10: 6572 626f 7365 3a0a 2020 2020 2020 2020  erbose:.        
-00021c20: 2020 2020 7072 696e 7428 6622 5072 6f63      print(f"Proc
-00021c30: 6573 7369 6e67 2061 6e69 6d61 6c20 6772  essing animal gr
-00021c40: 6964 2073 7175 6172 6520 6c6f 6361 7469  id square locati
-00021c50: 6f6e 2069 6e20 6672 616d 6520 7b69 6e74  on in frame {int
-00021c60: 2864 6174 615b 305d 297d 2e2e 2e22 290a  (data[0])}...").
-00021c70: 2020 2020 2020 2020 666f 7220 6b2c 2072          for k, r
-00021c80: 2069 6e20 6765 6f6d 6574 7269 6573 2e69   in geometries.i
-00021c90: 7465 6d73 2829 3a0a 2020 2020 2020 2020  tems():.        
-00021ca0: 2020 2020 6966 2072 2e63 6f6e 7461 696e      if r.contain
-00021cb0: 7328 6461 7461 5f70 6f69 6e74 293a 0a20  s(data_point):. 
-00021cc0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00021cd0: 6574 7572 6e20 2869 6e74 2864 6174 615b  eturn (int(data[
-00021ce0: 305d 292c 206b 5b30 5d2c 206b 5b31 5d29  0]), k[0], k[1])
-00021cf0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00021d00: 2869 6e74 2864 6174 615b 305d 292c 202d  (int(data[0]), -
-00021d10: 312c 202d 3129 0a0a 2020 2020 6465 6620  1, -1)..    def 
-00021d20: 6375 6d73 756d 5f63 6f6f 7264 5f67 656f  cumsum_coord_geo
-00021d30: 6d65 7472 6965 7328 0a20 2020 2020 2020  metries(.       
-00021d40: 2073 656c 662c 0a20 2020 2020 2020 2064   self,.        d
-00021d50: 6174 613a 206e 702e 6e64 6172 7261 792c  ata: np.ndarray,
-00021d60: 0a20 2020 2020 2020 2067 656f 6d65 7472  .        geometr
-00021d70: 6965 733a 2044 6963 745b 5475 706c 655b  ies: Dict[Tuple[
-00021d80: 696e 742c 2069 6e74 5d2c 2050 6f6c 7967  int, int], Polyg
-00021d90: 6f6e 5d2c 0a20 2020 2020 2020 2066 7073  on],.        fps
-00021da0: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-00021db0: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
-00021dc0: 636f 7265 5f63 6e74 3a20 4f70 7469 6f6e  core_cnt: Option
-00021dd0: 616c 5b69 6e74 5d20 3d20 2d31 2c0a 2020  al[int] = -1,.  
-00021de0: 2020 2020 2020 7665 7262 6f73 653a 204f        verbose: O
-00021df0: 7074 696f 6e61 6c5b 626f 6f6c 5d20 3d20  ptional[bool] = 
-00021e00: 5472 7565 2c0a 2020 2020 293a 0a20 2020  True,.    ):.   
-00021e10: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00021e20: 2043 6f6d 7075 7465 2074 6865 2063 756d   Compute the cum
-00021e30: 756c 6174 6976 6520 7469 6d65 2061 2062  ulative time a b
-00021e40: 6f64 792d 7061 7274 2068 6173 2073 7065  ody-part has spe
-00021e50: 6e74 2069 6e73 6964 6520 6120 6772 6964  nt inside a grid
-00021e60: 206f 6620 6765 6f6d 6574 7269 6573 2075   of geometries u
-00021e70: 7369 6e67 206d 756c 7469 7072 6f63 6573  sing multiproces
-00021e80: 7369 6e67 2e0a 0a20 2020 2020 2020 203a  sing...        :
-00021e90: 7061 7261 6d20 6e70 2e6e 6461 7272 6179  param np.ndarray
-00021ea0: 2064 6174 613a 2049 6e70 7574 2064 6174   data: Input dat
-00021eb0: 6120 6172 7261 7920 7768 6572 6520 726f  a array where ro
-00021ec0: 7773 2072 6570 7265 7365 6e74 2066 7261  ws represent fra
-00021ed0: 6d65 7320 616e 6420 636f 6c75 6d6e 7320  mes and columns 
-00021ee0: 7265 7072 6573 656e 7420 626f 6479 2d70  represent body-p
-00021ef0: 6172 7420 7820 616e 6420 7920 636f 6f72  art x and y coor
-00021f00: 6469 6e61 7465 732e 0a20 2020 2020 2020  dinates..       
-00021f10: 203a 7061 7261 6d20 4469 6374 5b54 7570   :param Dict[Tup
-00021f20: 6c65 5b69 6e74 2c20 696e 745d 2c20 506f  le[int, int], Po
-00021f30: 6c79 676f 6e5d 2067 656f 6d65 7472 6965  lygon] geometrie
-00021f40: 733a 2044 6963 7469 6f6e 6172 7920 6f66  s: Dictionary of
-00021f50: 2070 6f6c 7967 6f6e 7320 7265 7072 6573   polygons repres
-00021f60: 656e 7469 6e67 2073 7061 7469 616c 2072  enting spatial r
-00021f70: 6567 696f 6e73 2e20 4372 6561 7465 6420  egions. Created 
-00021f80: 6279 2060 6047 656f 6d65 7472 794d 6978  by ``GeometryMix
-00021f90: 696e 2e62 7563 6b65 745f 696d 675f 696e  in.bucket_img_in
-00021fa0: 746f 5f73 7175 6172 6573 6060 2e0a 2020  to_squares``..  
-00021fb0: 2020 2020 2020 3a70 6172 616d 204f 7074        :param Opt
-00021fc0: 696f 6e61 6c5b 696e 745d 2066 7073 3a20  ional[int] fps: 
-00021fd0: 4672 616d 6573 2070 6572 2073 6563 6f6e  Frames per secon
-00021fe0: 6420 2866 7073 2920 666f 7220 7469 6d65  d (fps) for time
-00021ff0: 206e 6f72 6d61 6c69 7a61 7469 6f6e 2e20   normalization. 
-00022000: 4966 204e 6f6e 652c 2063 756d 756c 6174  If None, cumulat
-00022010: 6976 6520 7375 6d20 6f66 2066 7261 6d65  ive sum of frame
-00022020: 2063 6f75 6e74 2069 7320 7265 7475 726e   count is return
-00022030: 6564 2e0a 0a20 2020 2020 2020 203a 6578  ed...        :ex
-00022040: 616d 706c 653a 0a20 2020 2020 2020 203e  ample:.        >
-00022050: 3e3e 2069 6d67 5f67 656f 6d65 7472 6965  >> img_geometrie
-00022060: 7320 3d20 4765 6f6d 6574 7279 4d69 7869  s = GeometryMixi
-00022070: 6e2e 6275 636b 6574 5f69 6d67 5f69 6e74  n.bucket_img_int
-00022080: 6f5f 6772 6964 5f73 7175 6172 6528 696d  o_grid_square(im
-00022090: 675f 7369 7a65 3d28 3634 302c 2036 3430  g_size=(640, 640
-000220a0: 292c 2062 7563 6b65 745f 6772 6964 5f73  ), bucket_grid_s
-000220b0: 697a 653d 2831 302c 2031 3029 2c20 7078  ize=(10, 10), px
-000220c0: 5f70 6572 5f6d 6d3d 3129 0a20 2020 2020  _per_mm=1).     
-000220d0: 2020 203e 3e3e 2062 705f 6172 7220 3d20     >>> bp_arr = 
-000220e0: 6e70 2e72 616e 646f 6d2e 7261 6e64 696e  np.random.randin
-000220f0: 7428 302c 2036 3430 2c20 2835 3030 302c  t(0, 640, (5000,
-00022100: 2032 2929 0a20 2020 2020 2020 203e 3e3e   2)).        >>>
-00022110: 2067 656f 5f64 6174 6120 3d20 4765 6f6d   geo_data = Geom
-00022120: 6574 7279 4d69 7869 6e28 292e 6375 6d73  etryMixin().cums
-00022130: 756d 5f63 6f6f 7264 5f67 656f 6d65 7472  um_coord_geometr
-00022140: 6965 7328 6461 7461 3d62 705f 6172 722c  ies(data=bp_arr,
-00022150: 2067 656f 6d65 7472 6965 733d 696d 675f   geometries=img_
-00022160: 6765 6f6d 6574 7269 6573 5b30 5d2c 2076  geometries[0], v
-00022170: 6572 626f 7365 3d46 616c 7365 2c20 6670  erbose=False, fp
-00022180: 733d 3129 0a20 2020 2020 2020 2022 2222  s=1).        """
-00022190: 0a0a 2020 2020 2020 2020 7469 6d65 7220  ..        timer 
-000221a0: 3d20 5369 6d62 6154 696d 6572 2873 7461  = SimbaTimer(sta
-000221b0: 7274 3d54 7275 6529 0a20 2020 2020 2020  rt=True).       
-000221c0: 2063 6865 636b 5f69 6e73 7461 6e63 6528   check_instance(
-000221d0: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
-000221e0: 7263 653d 6622 7b73 656c 662e 5f5f 636c  rce=f"{self.__cl
-000221f0: 6173 735f 5f2e 5f5f 6e61 6d65 5f5f 7d20  ass__.__name__} 
-00022200: 6461 7461 222c 0a20 2020 2020 2020 2020  data",.         
-00022210: 2020 2069 6e73 7461 6e63 653d 6461 7461     instance=data
-00022220: 2c0a 2020 2020 2020 2020 2020 2020 6163  ,.            ac
-00022230: 6365 7074 6564 5f74 7970 6573 3d6e 702e  cepted_types=np.
-00022240: 6e64 6172 7261 792c 0a20 2020 2020 2020  ndarray,.       
-00022250: 2029 0a20 2020 2020 2020 2069 6620 2864   ).        if (d
-00022260: 6174 612e 7368 6170 655b 315d 2021 3d20  ata.shape[1] != 
-00022270: 3229 206f 7220 2864 6174 612e 6e64 696d  2) or (data.ndim
-00022280: 2021 3d20 3229 3a0a 2020 2020 2020 2020   != 2):.        
-00022290: 2020 2020 7261 6973 6520 436f 756e 7445      raise CountE
-000222a0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
-000222b0: 2020 2020 2020 6d73 673d 6622 4120 4e20        msg=f"A N 
-000222c0: 7820 3220 6172 7261 7920 6973 2072 6571  x 2 array is req
-000222d0: 7569 7265 6420 2867 6f74 207b 6461 7461  uired (got {data
-000222e0: 2e73 6861 7065 7d29 222c 0a20 2020 2020  .shape})",.     
-000222f0: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-00022300: 653d 7365 6c66 2e5f 5f63 6c61 7373 5f5f  e=self.__class__
-00022310: 2e5f 5f6e 616d 655f 5f2c 0a20 2020 2020  .__name__,.     
-00022320: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00022330: 2069 6620 6670 7320 6973 206e 6f74 204e   if fps is not N
-00022340: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00022350: 2063 6865 636b 5f69 6e74 286e 616d 653d   check_int(name=
-00022360: 2266 7073 222c 2076 616c 7565 3d66 7073  "fps", value=fps
-00022370: 2c20 6d69 6e5f 7661 6c75 653d 3129 0a20  , min_value=1). 
-00022380: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00022390: 2020 2020 2020 2020 2066 7073 203d 2031           fps = 1
-000223a0: 0a20 2020 2020 2020 2063 6865 636b 5f69  .        check_i
-000223b0: 6e74 286e 616d 653d 2263 6f72 655f 636e  nt(name="core_cn
-000223c0: 7422 2c20 7661 6c75 653d 636f 7265 5f63  t", value=core_c
-000223d0: 6e74 2c20 6d69 6e5f 7661 6c75 653d 2d31  nt, min_value=-1
-000223e0: 290a 2020 2020 2020 2020 6966 2063 6f72  ).        if cor
-000223f0: 655f 636e 7420 3d3d 202d 313a 0a20 2020  e_cnt == -1:.   
-00022400: 2020 2020 2020 2020 2063 6f72 655f 636e           core_cn
-00022410: 7420 3d20 6669 6e64 5f63 6f72 655f 636e  t = find_core_cn
-00022420: 7428 295b 305d 0a20 2020 2020 2020 2077  t()[0].        w
-00022430: 2c20 6820 3d20 302c 2030 0a20 2020 2020  , h = 0, 0.     
-00022440: 2020 2066 6f72 206b 2069 6e20 6765 6f6d     for k in geom
-00022450: 6574 7269 6573 2e6b 6579 7328 293a 0a20  etries.keys():. 
-00022460: 2020 2020 2020 2020 2020 2077 2c20 6820             w, h 
-00022470: 3d20 6d61 7828 772c 206b 5b30 5d29 2c20  = max(w, k[0]), 
-00022480: 6d61 7828 682c 206b 5b31 5d29 0a20 2020  max(h, k[1]).   
-00022490: 2020 2020 2066 726d 5f69 6420 3d20 6e70       frm_id = np
-000224a0: 2e61 7261 6e67 6528 302c 2064 6174 612e  .arange(0, data.
-000224b0: 7368 6170 655b 305d 292e 7265 7368 6170  shape[0]).reshap
-000224c0: 6528 2d31 2c20 3129 0a20 2020 2020 2020  e(-1, 1).       
-000224d0: 2064 6174 6120 3d20 6e70 2e68 7374 6163   data = np.hstac
-000224e0: 6b28 2866 726d 5f69 642c 2064 6174 6129  k((frm_id, data)
-000224f0: 290a 2020 2020 2020 2020 696d 675f 6172  ).        img_ar
-00022500: 7220 3d20 6e70 2e7a 6572 6f73 2828 6461  r = np.zeros((da
-00022510: 7461 2e73 6861 7065 5b30 5d2c 2068 202b  ta.shape[0], h +
-00022520: 2031 2c20 7720 2b20 3129 290a 2020 2020   1, w + 1)).    
-00022530: 2020 2020 7769 7468 206d 756c 7469 7072      with multipr
-00022540: 6f63 6573 7369 6e67 2e50 6f6f 6c28 0a20  ocessing.Pool(. 
-00022550: 2020 2020 2020 2020 2020 2063 6f72 655f             core_
-00022560: 636e 742c 206d 6178 7461 736b 7370 6572  cnt, maxtasksper
-00022570: 6368 696c 643d 4465 6661 756c 7473 2e4c  child=Defaults.L
-00022580: 4152 4745 5f4d 4158 5f54 4153 4b5f 5045  ARGE_MAX_TASK_PE
-00022590: 525f 4348 494c 442e 7661 6c75 650a 2020  R_CHILD.value.  
-000225a0: 2020 2020 2020 2920 6173 2070 6f6f 6c3a        ) as pool:
-000225b0: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
-000225c0: 7374 616e 7473 203d 2066 756e 6374 6f6f  stants = functoo
-000225d0: 6c73 2e70 6172 7469 616c 280a 2020 2020  ls.partial(.    
-000225e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000225f0: 2e5f 6375 6d73 756d 5f63 6f6f 7264 5f67  ._cumsum_coord_g
-00022600: 656f 6d65 7472 6965 735f 6865 6c70 6572  eometries_helper
-00022610: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00022620: 2020 6765 6f6d 6574 7269 6573 3d67 656f    geometries=geo
-00022630: 6d65 7472 6965 732c 0a20 2020 2020 2020  metries,.       
-00022640: 2020 2020 2020 2020 2076 6572 626f 7365           verbose
-00022650: 3d76 6572 626f 7365 2c0a 2020 2020 2020  =verbose,.      
-00022660: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00022670: 2020 2020 666f 7220 636e 742c 2072 6573      for cnt, res
-00022680: 756c 7420 696e 2065 6e75 6d65 7261 7465  ult in enumerate
-00022690: 2870 6f6f 6c2e 696d 6170 2863 6f6e 7374  (pool.imap(const
-000226a0: 616e 7473 2c20 6461 7461 2c20 6368 756e  ants, data, chun
-000226b0: 6b73 697a 653d 3129 293a 0a20 2020 2020  ksize=1)):.     
-000226c0: 2020 2020 2020 2020 2020 2069 6620 7265             if re
-000226d0: 7375 6c74 5b31 5d20 213d 202d 313a 0a20  sult[1] != -1:. 
-000226e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000226f0: 2020 2069 6d67 5f61 7272 5b72 6573 756c     img_arr[resul
-00022700: 745b 305d 2c20 7265 7375 6c74 5b32 5d20  t[0], result[2] 
-00022710: 2d20 312c 2072 6573 756c 745b 315d 202d  - 1, result[1] -
-00022720: 2031 5d20 3d20 310a 2020 2020 2020 2020   1] = 1.        
-00022730: 706f 6f6c 2e6a 6f69 6e28 290a 2020 2020  pool.join().    
-00022740: 2020 2020 706f 6f6c 2e74 6572 6d69 6e61      pool.termina
-00022750: 7465 2829 0a20 2020 2020 2020 2074 696d  te().        tim
-00022760: 6572 2e73 746f 705f 7469 6d65 7228 290a  er.stop_timer().
-00022770: 2020 2020 2020 2020 7374 646f 7574 5f73          stdout_s
-00022780: 7563 6365 7373 280a 2020 2020 2020 2020  uccess(.        
-00022790: 2020 2020 6d73 673d 2243 756d 756c 6174      msg="Cumulat
-000227a0: 6976 6520 636f 6f72 6469 6e61 7465 7320  ive coordinates 
-000227b0: 696e 2067 656f 6d65 7472 6965 7320 636f  in geometries co
-000227c0: 6d70 6c65 7465 222c 0a20 2020 2020 2020  mplete",.       
-000227d0: 2020 2020 2065 6c61 7073 6564 5f74 696d       elapsed_tim
-000227e0: 653d 7469 6d65 722e 656c 6170 7365 645f  e=timer.elapsed_
-000227f0: 7469 6d65 5f73 7472 2c0a 2020 2020 2020  time_str,.      
-00022800: 2020 290a 2020 2020 2020 2020 6966 2066    ).        if f
-00022810: 7073 2069 7320 4e6f 6e65 3a0a 2020 2020  ps is None:.    
-00022820: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-00022830: 702e 6375 6d73 756d 2869 6d67 5f61 7272  p.cumsum(img_arr
-00022840: 2c20 6178 6973 3d30 290a 2020 2020 2020  , axis=0).      
-00022850: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00022860: 2020 2020 7265 7475 726e 206e 702e 6375      return np.cu
-00022870: 6d73 756d 2869 6d67 5f61 7272 2c20 6178  msum(img_arr, ax
-00022880: 6973 3d30 2920 2f20 6670 730a 0a20 2020  is=0) / fps..   
-00022890: 2040 7374 6174 6963 6d65 7468 6f64 0a20   @staticmethod. 
-000228a0: 2020 2064 6566 205f 6375 6d73 756d 5f62     def _cumsum_b
-000228b0: 6f6f 6c5f 6865 6c70 6572 280a 2020 2020  ool_helper(.    
-000228c0: 2020 2020 6461 7461 3a20 6e70 2e6e 6461      data: np.nda
-000228d0: 7272 6179 2c20 6765 6f6d 6574 7269 6573  rray, geometries
-000228e0: 3a20 4469 6374 5b54 7570 6c65 5b69 6e74  : Dict[Tuple[int
-000228f0: 2c20 696e 745d 2c20 506f 6c79 676f 6e5d  , int], Polygon]
-00022900: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
-00022910: 6461 7461 5f70 6f69 6e74 203d 2050 6f69  data_point = Poi
-00022920: 6e74 2864 6174 615b 313a 335d 290a 2020  nt(data[1:3]).  
-00022930: 2020 2020 2020 7072 696e 7428 0a20 2020        print(.   
-00022940: 2020 2020 2020 2020 2066 2250 726f 6365           f"Proce
-00022950: 7373 696e 6720 616e 696d 616c 2067 7269  ssing animal gri
-00022960: 6420 7371 7561 7265 206c 6f63 6174 696f  d square locatio
-00022970: 6e20 666f 7220 626f 6f6c 6561 6e20 696e  n for boolean in
-00022980: 2066 7261 6d65 207b 696e 7428 6461 7461   frame {int(data
-00022990: 5b30 5d29 7d2e 2e2e 220a 2020 2020 2020  [0])}...".      
-000229a0: 2020 290a 2020 2020 2020 2020 666f 7220    ).        for 
-000229b0: 6b2c 2072 2069 6e20 6765 6f6d 6574 7269  k, r in geometri
-000229c0: 6573 2e69 7465 6d73 2829 3a0a 2020 2020  es.items():.    
-000229d0: 2020 2020 2020 2020 6966 2072 2e63 6f6e          if r.con
-000229e0: 7461 696e 7328 6461 7461 5f70 6f69 6e74  tains(data_point
-000229f0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00022a00: 2020 2072 6574 7572 6e20 2869 6e74 2864     return (int(d
-00022a10: 6174 615b 305d 292c 206b 5b30 5d2c 206b  ata[0]), k[0], k
-00022a20: 5b31 5d29 0a20 2020 2020 2020 2072 6574  [1]).        ret
-00022a30: 7572 6e20 2869 6e74 2864 6174 615b 305d  urn (int(data[0]
-00022a40: 292c 202d 312c 202d 3129 0a0a 2020 2020  ), -1, -1)..    
-00022a50: 6465 6620 6375 6d73 756d 5f62 6f6f 6c5f  def cumsum_bool_
-00022a60: 6765 6f6d 6574 7269 6573 280a 2020 2020  geometries(.    
-00022a70: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-00022a80: 2020 6461 7461 3a20 6e70 2e6e 6461 7272    data: np.ndarr
-00022a90: 6179 2c0a 2020 2020 2020 2020 6765 6f6d  ay,.        geom
-00022aa0: 6574 7269 6573 3a20 4469 6374 5b54 7570  etries: Dict[Tup
-00022ab0: 6c65 5b69 6e74 2c20 696e 745d 2c20 506f  le[int, int], Po
-00022ac0: 6c79 676f 6e5d 2c0a 2020 2020 2020 2020  lygon],.        
-00022ad0: 626f 6f6c 5f64 6174 613a 206e 702e 6e64  bool_data: np.nd
-00022ae0: 6172 7261 792c 0a20 2020 2020 2020 2066  array,.        f
-00022af0: 7073 3a20 4f70 7469 6f6e 616c 5b66 6c6f  ps: Optional[flo
-00022b00: 6174 5d20 3d20 4e6f 6e65 2c0a 2020 2020  at] = None,.    
-00022b10: 2020 2020 636f 7265 5f63 6e74 3a20 4f70      core_cnt: Op
-00022b20: 7469 6f6e 616c 5b69 6e74 5d20 3d20 2d31  tional[int] = -1
-00022b30: 2c0a 2020 2020 2920 2d3e 206e 702e 6e64  ,.    ) -> np.nd
-00022b40: 6172 7261 793a 0a20 2020 2020 2020 2022  array:.        "
-00022b50: 2222 0a20 2020 2020 2020 2043 6f6d 7075  "".        Compu
-00022b60: 7465 2074 6865 2063 756d 756c 6174 6976  te the cumulativ
-00022b70: 6520 7375 6d73 206f 6620 626f 6f6c 6561  e sums of boolea
-00022b80: 6e20 6576 656e 7473 2077 6974 6869 6e20  n events within 
-00022b90: 706f 6c79 676f 6e20 6765 6f6d 6574 7269  polygon geometri
-00022ba0: 6573 206f 7665 7220 7469 6d65 2075 7369  es over time usi
-00022bb0: 6e67 206d 756c 7469 7072 6f63 6573 7369  ng multiprocessi
-00022bc0: 6e67 2e0a 0a20 2020 2020 2020 2045 2e67  ng...        E.g
-00022bd0: 2e2c 2063 6f6d 7075 7465 2074 6865 2063  ., compute the c
-00022be0: 756d 756c 6174 6976 6520 7469 6d65 206f  umulative time o
-00022bf0: 6620 636c 6173 7369 6669 6564 2065 7665  f classified eve
-00022c00: 6e74 7320 7769 7468 696e 2073 7061 7469  nts within spati
-00022c10: 616c 206c 6f63 6174 696f 6e73 2061 7420  al locations at 
-00022c20: 616c 6c20 7469 6d65 2d70 6f69 6e74 7320  all time-points 
-00022c30: 6f66 2074 6865 2076 6964 656f 2e0a 0a20  of the video... 
-00022c40: 2020 2020 2020 203a 7061 7261 6d20 6e70         :param np
-00022c50: 2e6e 6461 7272 6179 2064 6174 613a 2041  .ndarray data: A
-00022c60: 7272 6179 2063 6f6e 7461 696e 696e 6720  rray containing 
-00022c70: 7370 6174 6961 6c20 6461 7461 2077 6974  spatial data wit
-00022c80: 6820 7368 6170 6520 286e 2c20 3229 2e20  h shape (n, 2). 
-00022c90: 452e 672e 2c20 3244 2d61 7272 6179 2077  E.g., 2D-array w
-00022ca0: 6974 6820 626f 6479 2d70 6172 7420 636f  ith body-part co
-00022cb0: 6f72 6469 6e61 7465 732e 0a20 2020 2020  ordinates..     
-00022cc0: 2020 203a 7061 7261 6d20 4469 6374 5b54     :param Dict[T
-00022cd0: 7570 6c65 5b69 6e74 2c20 696e 745d 2c20  uple[int, int], 
-00022ce0: 506f 6c79 676f 6e5d 2067 656f 6d65 7472  Polygon] geometr
-00022cf0: 6965 733a 2044 6963 7469 6f6e 6172 7920  ies: Dictionary 
-00022d00: 6f66 2070 6f6c 7967 6f6e 7320 7265 7072  of polygons repr
-00022d10: 6573 656e 7469 6e67 2073 7061 7469 616c  esenting spatial
-00022d20: 2072 6567 696f 6e73 2e20 4372 6561 7465   regions. Create
-00022d30: 6420 6279 2060 6047 656f 6d65 7472 794d  d by ``GeometryM
-00022d40: 6978 696e 2e62 7563 6b65 745f 696d 675f  ixin.bucket_img_
-00022d50: 696e 746f 5f73 7175 6172 6573 6060 2e0a  into_squares``..
-00022d60: 2020 2020 2020 2020 3a70 6172 616d 206e          :param n
-00022d70: 702e 6e64 6172 7261 7920 626f 6f6c 5f64  p.ndarray bool_d
-00022d80: 6174 613a 2042 6f6f 6c65 616e 2061 7272  ata: Boolean arr
-00022d90: 6179 2077 6974 6820 7368 6170 6520 2864  ay with shape (d
-00022da0: 6174 612e 7368 6170 655b 305d 2c29 206f  ata.shape[0],) o
-00022db0: 7220 2864 6174 612e 7368 6170 655b 305d  r (data.shape[0]
-00022dc0: 2c20 3129 2069 6e64 6963 6174 696e 6720  , 1) indicating 
-00022dd0: 7468 6520 7072 6573 656e 6365 206f 7220  the presence or 
-00022de0: 6162 7365 6e63 6520 696e 2065 6163 6820  absence in each 
-00022df0: 6672 616d 652e 0a20 2020 2020 2020 203a  frame..        :
-00022e00: 7061 7261 6d20 4f70 7469 6f6e 616c 5b66  param Optional[f
-00022e10: 6c6f 6174 5d20 6670 733a 2046 7261 6d65  loat] fps: Frame
-00022e20: 7320 7065 7220 7365 636f 6e64 2e20 4966  s per second. If
-00022e30: 2070 726f 7669 6465 642c 2074 6865 2072   provided, the r
-00022e40: 6573 756c 7420 6973 206e 6f72 6d61 6c69  esult is normali
-00022e50: 7a65 6420 6279 2074 6865 2066 7261 6d65  zed by the frame
-00022e60: 2072 6174 652e 0a20 2020 2020 2020 203a   rate..        :
-00022e70: 7061 7261 6d20 4f70 7469 6f6e 616c 5b66  param Optional[f
-00022e80: 6c6f 6174 5d20 636f 7265 5f63 6e74 3a20  loat] core_cnt: 
-00022e90: 4e75 6d62 6572 206f 6620 4350 5520 636f  Number of CPU co
-00022ea0: 7265 7320 746f 2075 7365 2066 6f72 2070  res to use for p
-00022eb0: 6172 616c 6c65 6c20 7072 6f63 6573 7369  arallel processi
-00022ec0: 6e67 2e20 4465 6661 756c 7420 6973 202d  ng. Default is -
-00022ed0: 312c 2077 6869 6368 206d 6561 6e73 2075  1, which means u
-00022ee0: 7369 6e67 2061 6c6c 2061 7661 696c 6162  sing all availab
-00022ef0: 6c65 2063 6f72 6573 2e0a 2020 2020 2020  le cores..      
-00022f00: 2020 3a72 6574 7572 6e73 206e 702e 6e64    :returns np.nd
-00022f10: 6172 7261 793a 2041 7272 6179 206f 6620  array: Array of 
-00022f20: 7369 7a65 2028 6672 616d 6573 2078 2068  size (frames x h
-00022f30: 6f72 697a 6f6e 7461 6c20 6269 6e73 2078  orizontal bins x
-00022f40: 2076 6572 6963 616c 2062 696e 7329 2077   verical bins) w
-00022f50: 6974 6820 7469 6d65 7320 696e 2073 6563  ith times in sec
-00022f60: 6f6e 6473 2028 6966 2066 7073 2070 6173  onds (if fps pas
-00022f70: 7365 6429 206f 7220 6672 616d 6573 2028  sed) or frames (
-00022f80: 6966 2066 7073 206e 6f74 2070 6173 7365  if fps not passe
-00022f90: 6429 0a0a 2020 2020 2020 2020 3a65 7861  d)..        :exa
-00022fa0: 6d70 6c65 3a0a 2020 2020 2020 2020 3e3e  mple:.        >>
-00022fb0: 3e20 6765 6f6d 6574 7269 6573 203d 2047  > geometries = G
-00022fc0: 656f 6d65 7472 794d 6978 696e 2e62 7563  eometryMixin.buc
-00022fd0: 6b65 745f 696d 675f 696e 746f 5f67 7269  ket_img_into_gri
-00022fe0: 645f 7371 7561 7265 2862 7563 6b65 745f  d_square(bucket_
-00022ff0: 7369 7a65 5f6d 6d3d 3530 2c20 696d 675f  size_mm=50, img_
-00023000: 7369 7a65 3d28 3830 302c 2038 3030 2920  size=(800, 800) 
-00023010: 2c20 7078 5f70 6572 5f6d 6d3d 352e 3029  , px_per_mm=5.0)
-00023020: 5b30 5d0a 2020 2020 2020 2020 3e3e 3e20  [0].        >>> 
-00023030: 636f 6f72 645f 6461 7461 203d 206e 702e  coord_data = np.
-00023040: 7261 6e64 6f6d 2e72 616e 6469 6e74 2830  random.randint(0
-00023050: 2c20 3830 302c 2028 3530 302c 2032 2929  , 800, (500, 2))
-00023060: 0a20 2020 2020 2020 203e 3e3e 2062 6f6f  .        >>> boo
-00023070: 6c5f 6461 7461 203d 206e 702e 7261 6e64  l_data = np.rand
-00023080: 6f6d 2e72 616e 6469 6e74 2830 2c20 322c  om.randint(0, 2,
-00023090: 2028 3530 302c 2929 0a20 2020 2020 2020   (500,)).       
-000230a0: 203e 3e3e 2078 203d 2047 656f 6d65 7472   >>> x = Geometr
-000230b0: 794d 6978 696e 2829 2e63 756d 7375 6d5f  yMixin().cumsum_
-000230c0: 626f 6f6c 5f67 656f 6d65 7472 6965 7328  bool_geometries(
-000230d0: 6461 7461 3d63 6f6f 7264 5f64 6174 612c  data=coord_data,
-000230e0: 2067 656f 6d65 7472 6965 733d 6765 6f6d   geometries=geom
-000230f0: 6574 7269 6573 2c20 626f 6f6c 5f64 6174  etries, bool_dat
-00023100: 613d 626f 6f6c 5f64 6174 612c 2066 7073  a=bool_data, fps
-00023110: 3d31 3529 0a20 2020 2020 2020 203e 3e3e  =15).        >>>
-00023120: 2078 2e73 6861 7065 0a20 2020 2020 2020   x.shape.       
-00023130: 203e 3e3e 2028 3530 302c 2034 2c20 3429   >>> (500, 4, 4)
-00023140: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
-00023150: 2020 2020 2020 6368 6563 6b5f 7661 6c69        check_vali
-00023160: 645f 6172 7261 7928 0a20 2020 2020 2020  d_array(.       
-00023170: 2020 2020 2064 6174 613d 6461 7461 2c0a       data=data,.
-00023180: 2020 2020 2020 2020 2020 2020 6163 6365              acce
-00023190: 7074 6564 5f73 697a 6573 3d5b 325d 2c0a  pted_sizes=[2],.
-000231a0: 2020 2020 2020 2020 2020 2020 736f 7572              sour
-000231b0: 6365 3d66 227b 4765 6f6d 6574 7279 4d69  ce=f"{GeometryMi
-000231c0: 7869 6e2e 6375 6d73 756d 5f62 6f6f 6c5f  xin.cumsum_bool_
-000231d0: 6765 6f6d 6574 7269 6573 2e5f 5f6e 616d  geometries.__nam
-000231e0: 655f 5f7d 2064 6174 6122 2c0a 2020 2020  e__} data",.    
-000231f0: 2020 2020 290a 2020 2020 2020 2020 6368      ).        ch
-00023200: 6563 6b5f 696e 7374 616e 6365 280a 2020  eck_instance(.  
-00023210: 2020 2020 2020 2020 2020 736f 7572 6365            source
-00023220: 3d66 227b 4765 6f6d 6574 7279 4d69 7869  =f"{GeometryMixi
-00023230: 6e2e 6375 6d73 756d 5f62 6f6f 6c5f 6765  n.cumsum_bool_ge
-00023240: 6f6d 6574 7269 6573 2e5f 5f6e 616d 655f  ometries.__name_
-00023250: 5f7d 2067 656f 6d65 7472 6965 7322 2c0a  _} geometries",.
-00023260: 2020 2020 2020 2020 2020 2020 696e 7374              inst
-00023270: 616e 6365 3d67 656f 6d65 7472 6965 732c  ance=geometries,
-00023280: 0a20 2020 2020 2020 2020 2020 2061 6363  .            acc
-00023290: 6570 7465 645f 7479 7065 733d 6469 6374  epted_types=dict
-000232a0: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-000232b0: 2020 2020 6368 6563 6b5f 7661 6c69 645f      check_valid_
-000232c0: 6172 7261 7928 0a20 2020 2020 2020 2020  array(.         
-000232d0: 2020 2064 6174 613d 626f 6f6c 5f64 6174     data=bool_dat
-000232e0: 612c 0a20 2020 2020 2020 2020 2020 2061  a,.            a
-000232f0: 6363 6570 7465 645f 7368 6170 6573 3d5b  ccepted_shapes=[
-00023300: 2864 6174 612e 7368 6170 655b 305d 2c20  (data.shape[0], 
-00023310: 3129 2c20 2864 6174 612e 7368 6170 655b  1), (data.shape[
-00023320: 305d 2c29 5d2c 0a20 2020 2020 2020 2020  0],)],.         
-00023330: 2020 2073 6f75 7263 653d 6622 7b47 656f     source=f"{Geo
-00023340: 6d65 7472 794d 6978 696e 2e63 756d 7375  metryMixin.cumsu
-00023350: 6d5f 626f 6f6c 5f67 656f 6d65 7472 6965  m_bool_geometrie
-00023360: 732e 5f5f 6e61 6d65 5f5f 7d20 626f 6f6c  s.__name__} bool
-00023370: 5f64 6174 6122 2c0a 2020 2020 2020 2020  _data",.        
-00023380: 290a 2020 2020 2020 2020 6966 2066 7073  ).        if fps
-00023390: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000233a0: 2020 2020 2020 2020 2020 6368 6563 6b5f            check_
-000233b0: 666c 6f61 7428 0a20 2020 2020 2020 2020  float(.         
-000233c0: 2020 2020 2020 206e 616d 653d 6622 7b47         name=f"{G
-000233d0: 656f 6d65 7472 794d 6978 696e 2e63 756d  eometryMixin.cum
-000233e0: 7375 6d5f 626f 6f6c 5f67 656f 6d65 7472  sum_bool_geometr
-000233f0: 6965 732e 5f5f 6e61 6d65 5f5f 7d20 6670  ies.__name__} fp
-00023400: 7322 2c0a 2020 2020 2020 2020 2020 2020  s",.            
-00023410: 2020 2020 7661 6c75 653d 6670 732c 0a20      value=fps,. 
-00023420: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00023430: 696e 5f76 616c 7565 3d31 2e30 2c0a 2020  in_value=1.0,.  
-00023440: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00023450: 2020 2020 6368 6563 6b5f 696e 7428 0a20      check_int(. 
-00023460: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-00023470: 6622 7b47 656f 6d65 7472 794d 6978 696e  f"{GeometryMixin
-00023480: 2e63 756d 7375 6d5f 626f 6f6c 5f67 656f  .cumsum_bool_geo
-00023490: 6d65 7472 6965 732e 5f5f 6e61 6d65 5f5f  metries.__name__
-000234a0: 7d20 636f 7265 5f63 6e74 222c 0a20 2020  } core_cnt",.   
-000234b0: 2020 2020 2020 2020 2076 616c 7565 3d63           value=c
-000234c0: 6f72 655f 636e 742c 0a20 2020 2020 2020  ore_cnt,.       
-000234d0: 2020 2020 206d 696e 5f76 616c 7565 3d2d       min_value=-
-000234e0: 312c 0a20 2020 2020 2020 2029 0a20 2020  1,.        ).   
-000234f0: 2020 2020 2069 6620 6e6f 7420 6e70 2e61       if not np.a
-00023500: 7272 6179 5f65 7175 616c 280a 2020 2020  rray_equal(.    
-00023510: 2020 2020 2020 2020 6e70 2e73 6f72 7428          np.sort(
-00023520: 6e70 2e75 6e69 7175 6528 626f 6f6c 5f64  np.unique(bool_d
-00023530: 6174 6129 292e 6173 7479 7065 2869 6e74  ata)).astype(int
-00023540: 292c 206e 702e 6172 7261 7928 5b30 2c20  ), np.array([0, 
-00023550: 315d 290a 2020 2020 2020 2020 293a 0a20  1]).        ):. 
-00023560: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00023570: 2049 6e76 616c 6964 496e 7075 7445 7272   InvalidInputErr
-00023580: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
-00023590: 2020 2020 6d73 673d 6622 496e 7661 6c69      msg=f"Invali
-000235a0: 6420 626f 6f6c 6561 6e20 6461 7461 2e20  d boolean data. 
-000235b0: 4578 7065 6374 6564 207b 6e70 2e61 7272  Expected {np.arr
-000235c0: 6179 285b 302c 2031 5d29 7d20 6275 7420  ay([0, 1])} but 
-000235d0: 666f 756e 6420 7b6e 702e 736f 7274 286e  found {np.sort(n
-000235e0: 702e 756e 6971 7565 2862 6f6f 6c5f 6461  p.unique(bool_da
-000235f0: 7461 2929 2e61 7374 7970 6528 696e 7429  ta)).astype(int)
-00023600: 7d22 2c0a 2020 2020 2020 2020 2020 2020  }",.            
-00023610: 2020 2020 736f 7572 6365 3d47 656f 6d65      source=Geome
-00023620: 7472 794d 6978 696e 2e63 756d 7375 6d5f  tryMixin.cumsum_
-00023630: 626f 6f6c 5f67 656f 6d65 7472 6965 732e  bool_geometries.
-00023640: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
-00023650: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00023660: 6966 2063 6f72 655f 636e 7420 3d3d 202d  if core_cnt == -
-00023670: 313a 0a20 2020 2020 2020 2020 2020 2063  1:.            c
-00023680: 6f72 655f 636e 7420 3d20 6669 6e64 5f63  ore_cnt = find_c
-00023690: 6f72 655f 636e 7428 295b 305d 0a20 2020  ore_cnt()[0].   
-000236a0: 2020 2020 2077 2c20 6820 3d20 302c 2030       w, h = 0, 0
-000236b0: 0a20 2020 2020 2020 2066 6f72 206b 2069  .        for k i
-000236c0: 6e20 6765 6f6d 6574 7269 6573 2e6b 6579  n geometries.key
-000236d0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-000236e0: 2077 2c20 6820 3d20 6d61 7828 772c 206b   w, h = max(w, k
-000236f0: 5b30 5d29 2c20 6d61 7828 682c 206b 5b31  [0]), max(h, k[1
-00023700: 5d29 0a20 2020 2020 2020 2066 726d 5f69  ]).        frm_i
-00023710: 6420 3d20 6e70 2e61 7261 6e67 6528 302c  d = np.arange(0,
-00023720: 2064 6174 612e 7368 6170 655b 305d 292e   data.shape[0]).
-00023730: 7265 7368 6170 6528 2d31 2c20 3129 0a20  reshape(-1, 1). 
-00023740: 2020 2020 2020 2069 6620 626f 6f6c 5f64         if bool_d
-00023750: 6174 612e 6e64 696d 203d 3d20 313a 0a20  ata.ndim == 1:. 
-00023760: 2020 2020 2020 2020 2020 2062 6f6f 6c5f             bool_
-00023770: 6461 7461 203d 2062 6f6f 6c5f 6461 7461  data = bool_data
-00023780: 2e72 6573 6861 7065 282d 312c 2031 290a  .reshape(-1, 1).
-00023790: 2020 2020 2020 2020 6461 7461 203d 206e          data = n
-000237a0: 702e 6873 7461 636b 2828 6461 7461 2c20  p.hstack((data, 
-000237b0: 626f 6f6c 5f64 6174 6129 290a 2020 2020  bool_data)).    
-000237c0: 2020 2020 6461 7461 203d 206e 702e 6873      data = np.hs
-000237d0: 7461 636b 2828 6672 6d5f 6964 2c20 6461  tack((frm_id, da
-000237e0: 7461 2929 0a20 2020 2020 2020 2069 6d67  ta)).        img
-000237f0: 5f61 7272 203d 206e 702e 7a65 726f 7328  _arr = np.zeros(
-00023800: 2864 6174 612e 7368 6170 655b 305d 2c20  (data.shape[0], 
-00023810: 6820 2b20 312c 2077 202b 2031 2929 0a20  h + 1, w + 1)). 
-00023820: 2020 2020 2020 2064 6174 6120 3d20 6461         data = da
-00023830: 7461 5b6e 702e 6172 6777 6865 7265 2828  ta[np.argwhere((
-00023840: 6461 7461 5b3a 2c20 335d 203d 3d20 3129  data[:, 3] == 1)
-00023850: 295d 2e72 6573 6861 7065 282d 312c 2034  )].reshape(-1, 4
-00023860: 290a 2020 2020 2020 2020 7769 7468 206d  ).        with m
-00023870: 756c 7469 7072 6f63 6573 7369 6e67 2e50  ultiprocessing.P
-00023880: 6f6f 6c28 0a20 2020 2020 2020 2020 2020  ool(.           
-00023890: 2063 6f72 655f 636e 742c 206d 6178 7461   core_cnt, maxta
-000238a0: 736b 7370 6572 6368 696c 643d 4465 6661  sksperchild=Defa
-000238b0: 756c 7473 2e4c 4152 4745 5f4d 4158 5f54  ults.LARGE_MAX_T
-000238c0: 4153 4b5f 5045 525f 4348 494c 442e 7661  ASK_PER_CHILD.va
-000238d0: 6c75 650a 2020 2020 2020 2020 2920 6173  lue.        ) as
-000238e0: 2070 6f6f 6c3a 0a20 2020 2020 2020 2020   pool:.         
-000238f0: 2020 2063 6f6e 7374 616e 7473 203d 2066     constants = f
-00023900: 756e 6374 6f6f 6c73 2e70 6172 7469 616c  unctools.partial
-00023910: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00023920: 2020 7365 6c66 2e5f 6375 6d73 756d 5f62    self._cumsum_b
-00023930: 6f6f 6c5f 6865 6c70 6572 2c20 6765 6f6d  ool_helper, geom
-00023940: 6574 7269 6573 3d67 656f 6d65 7472 6965  etries=geometrie
-00023950: 730a 2020 2020 2020 2020 2020 2020 290a  s.            ).
-00023960: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00023970: 636e 742c 2072 6573 756c 7420 696e 2065  cnt, result in e
-00023980: 6e75 6d65 7261 7465 2870 6f6f 6c2e 696d  numerate(pool.im
-00023990: 6170 2863 6f6e 7374 616e 7473 2c20 6461  ap(constants, da
-000239a0: 7461 2c20 6368 756e 6b73 697a 653d 3129  ta, chunksize=1)
-000239b0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000239c0: 2020 2069 6620 7265 7375 6c74 5b31 5d20     if result[1] 
-000239d0: 213d 202d 313a 0a20 2020 2020 2020 2020  != -1:.         
-000239e0: 2020 2020 2020 2020 2020 2069 6d67 5f61             img_a
-000239f0: 7272 5b72 6573 756c 745b 305d 2c20 7265  rr[result[0], re
-00023a00: 7375 6c74 5b32 5d20 2d20 312c 2072 6573  sult[2] - 1, res
-00023a10: 756c 745b 315d 202d 2031 5d20 3d20 310a  ult[1] - 1] = 1.
-00023a20: 2020 2020 2020 2020 706f 6f6c 2e6a 6f69          pool.joi
-00023a30: 6e28 290a 2020 2020 2020 2020 706f 6f6c  n().        pool
-00023a40: 2e74 6572 6d69 6e61 7465 2829 0a20 2020  .terminate().   
-00023a50: 2020 2020 2069 6620 6670 7320 6973 204e       if fps is N
-00023a60: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00023a70: 2072 6574 7572 6e20 6e70 2e63 756d 7375   return np.cumsu
-00023a80: 6d28 696d 675f 6172 722c 2061 7869 733d  m(img_arr, axis=
-00023a90: 3029 0a20 2020 2020 2020 2065 6c73 653a  0).        else:
-00023aa0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00023ab0: 7572 6e20 6e70 2e63 756d 7375 6d28 696d  urn np.cumsum(im
-00023ac0: 675f 6172 722c 2061 7869 733d 3029 202f  g_arr, axis=0) /
-00023ad0: 2066 7073 0a0a 2020 2020 4073 7461 7469   fps..    @stati
-00023ae0: 636d 6574 686f 640a 2020 2020 6465 6620  cmethod.    def 
-00023af0: 5f63 756d 7375 6d5f 616e 696d 616c 5f67  _cumsum_animal_g
-00023b00: 656f 6d65 7472 6965 735f 6772 6964 5f68  eometries_grid_h
-00023b10: 656c 7065 7228 0a20 2020 2020 2020 2064  elper(.        d
-00023b20: 6174 613a 206e 702e 6e64 6172 7261 792c  ata: np.ndarray,
-00023b30: 0a20 2020 2020 2020 2067 7269 643a 2044  .        grid: D
-00023b40: 6963 745b 5475 706c 655b 696e 742c 2069  ict[Tuple[int, i
-00023b50: 6e74 5d2c 2050 6f6c 7967 6f6e 5d2c 0a20  nt], Polygon],. 
-00023b60: 2020 2020 2020 2073 697a 653a 2054 7570         size: Tup
-00023b70: 6c65 5b69 6e74 5d2c 0a20 2020 2020 2020  le[int],.       
-00023b80: 2076 6572 626f 7365 3a20 626f 6f6c 2c0a   verbose: bool,.
-00023b90: 2020 2020 293a 0a0a 2020 2020 2020 2020      ):..        
-00023ba0: 7368 6170 652c 2072 6573 756c 7473 203d  shape, results =
-00023bb0: 2064 6174 615b 315d 2c20 6e70 2e7a 6572   data[1], np.zer
-00023bc0: 6f73 2828 7369 7a65 5b30 5d20 2b20 312c  os((size[0] + 1,
-00023bd0: 2073 697a 655b 315d 202b 2031 2929 0a20   size[1] + 1)). 
-00023be0: 2020 2020 2020 2069 6620 7665 7262 6f73         if verbos
-00023bf0: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
-00023c00: 7269 6e74 2866 2250 726f 6365 7373 696e  rint(f"Processin
-00023c10: 6720 616e 696d 616c 2067 7269 6420 7371  g animal grid sq
-00023c20: 7561 7265 206c 6f63 6174 696f 6e20 696e  uare location in
-00023c30: 2066 7261 6d65 207b 696e 7428 6461 7461   frame {int(data
-00023c40: 5b30 5d29 7d2e 2e2e 2229 0a20 2020 2020  [0])}...").     
-00023c50: 2020 2066 6f72 206b 2c20 7220 696e 2067     for k, r in g
-00023c60: 7269 642e 6974 656d 7328 293a 0a20 2020  rid.items():.   
-00023c70: 2020 2020 2020 2020 2069 6620 722e 696e           if r.in
-00023c80: 7465 7273 6563 7473 2873 6861 7065 293a  tersects(shape):
-00023c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023ca0: 2072 6573 756c 7473 5b6b 5b30 5d2c 206b   results[k[0], k
-00023cb0: 5b31 5d5d 203d 2031 0a20 2020 2020 2020  [1]] = 1.       
-00023cc0: 2072 6574 7572 6e20 7265 7375 6c74 730a   return results.
-00023cd0: 0a20 2020 2064 6566 2063 756d 7375 6d5f  .    def cumsum_
-00023ce0: 616e 696d 616c 5f67 656f 6d65 7472 6965  animal_geometrie
-00023cf0: 735f 6772 6964 280a 2020 2020 2020 2020  s_grid(.        
-00023d00: 7365 6c66 2c0a 2020 2020 2020 2020 6461  self,.        da
-00023d10: 7461 3a20 4c69 7374 5b50 6f6c 7967 6f6e  ta: List[Polygon
-00023d20: 5d2c 0a20 2020 2020 2020 2067 7269 643a  ],.        grid:
-00023d30: 2044 6963 745b 5475 706c 655b 696e 742c   Dict[Tuple[int,
-00023d40: 2069 6e74 5d2c 2050 6f6c 7967 6f6e 5d2c   int], Polygon],
-00023d50: 0a20 2020 2020 2020 2066 7073 3a20 4f70  .        fps: Op
-00023d60: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-00023d70: 6e65 2c0a 2020 2020 2020 2020 636f 7265  ne,.        core
-00023d80: 5f63 6e74 3a20 4f70 7469 6f6e 616c 5b69  _cnt: Optional[i
-00023d90: 6e74 5d20 3d20 2d31 2c0a 2020 2020 2020  nt] = -1,.      
-00023da0: 2020 7665 7262 6f73 653a 204f 7074 696f    verbose: Optio
-00023db0: 6e61 6c5b 626f 6f6c 5d20 3d20 5472 7565  nal[bool] = True
-00023dc0: 2c0a 2020 2020 293a 0a0a 2020 2020 2020  ,.    ):..      
-00023dd0: 2020 7469 6d65 7220 3d20 5369 6d62 6154    timer = SimbaT
-00023de0: 696d 6572 2873 7461 7274 3d54 7275 6529  imer(start=True)
-00023df0: 0a20 2020 2020 2020 2063 6865 636b 5f76  .        check_v
-00023e00: 616c 6964 5f6c 7374 280a 2020 2020 2020  alid_lst(.      
-00023e10: 2020 2020 2020 6461 7461 3d64 6174 612c        data=data,
-00023e20: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
-00023e30: 7263 653d 4765 6f6d 6574 7279 4d69 7869  rce=GeometryMixi
-00023e40: 6e2e 6375 6d73 756d 5f61 6e69 6d61 6c5f  n.cumsum_animal_
-00023e50: 6765 6f6d 6574 7269 6573 5f67 7269 642e  geometries_grid.
-00023e60: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
-00023e70: 2020 2020 2020 7661 6c69 645f 6474 7970        valid_dtyp
-00023e80: 6573 3d28 506f 6c79 676f 6e2c 292c 0a20  es=(Polygon,),. 
-00023e90: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00023ea0: 2063 6865 636b 5f69 6e73 7461 6e63 6528   check_instance(
-00023eb0: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
-00023ec0: 7263 653d 4765 6f6d 6574 7279 4d69 7869  rce=GeometryMixi
-00023ed0: 6e2e 6375 6d73 756d 5f61 6e69 6d61 6c5f  n.cumsum_animal_
-00023ee0: 6765 6f6d 6574 7269 6573 5f67 7269 642e  geometries_grid.
-00023ef0: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
-00023f00: 2020 2020 2020 696e 7374 616e 6365 3d67        instance=g
-00023f10: 7269 642c 0a20 2020 2020 2020 2020 2020  rid,.           
-00023f20: 2061 6363 6570 7465 645f 7479 7065 733d   accepted_types=
-00023f30: 2864 6963 742c 292c 0a20 2020 2020 2020  (dict,),.       
-00023f40: 2029 0a20 2020 2020 2020 2069 6620 6670   ).        if fp
-00023f50: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-00023f60: 2020 2020 2020 2020 2020 2063 6865 636b             check
-00023f70: 5f69 6e74 286e 616d 653d 2266 7073 222c  _int(name="fps",
-00023f80: 2076 616c 7565 3d66 7073 2c20 6d69 6e5f   value=fps, min_
-00023f90: 7661 6c75 653d 3129 0a20 2020 2020 2020  value=1).       
-00023fa0: 2063 6865 636b 5f69 6e74 286e 616d 653d   check_int(name=
-00023fb0: 2263 6f72 655f 636e 7422 2c20 7661 6c75  "core_cnt", valu
-00023fc0: 653d 636f 7265 5f63 6e74 2c20 6d69 6e5f  e=core_cnt, min_
-00023fd0: 7661 6c75 653d 2d31 290a 2020 2020 2020  value=-1).      
-00023fe0: 2020 6966 2063 6f72 655f 636e 7420 3d3d    if core_cnt ==
-00023ff0: 202d 313a 0a20 2020 2020 2020 2020 2020   -1:.           
-00024000: 2063 6f72 655f 636e 7420 3d20 6669 6e64   core_cnt = find
-00024010: 5f63 6f72 655f 636e 7428 295b 305d 0a20  _core_cnt()[0]. 
-00024020: 2020 2020 2020 2077 2c20 6820 3d20 302c         w, h = 0,
-00024030: 2030 0a20 2020 2020 2020 2066 6f72 206b   0.        for k
-00024040: 2069 6e20 6772 6964 2e6b 6579 7328 293a   in grid.keys():
-00024050: 0a20 2020 2020 2020 2020 2020 2077 2c20  .            w, 
-00024060: 6820 3d20 6d61 7828 772c 206b 5b30 5d29  h = max(w, k[0])
-00024070: 2c20 6d61 7828 682c 206b 5b31 5d29 0a20  , max(h, k[1]). 
-00024080: 2020 2020 2020 2066 726d 5f69 6420 3d20         frm_id = 
-00024090: 6e70 2e61 7261 6e67 6528 302c 206c 656e  np.arange(0, len
-000240a0: 2864 6174 6129 292e 7265 7368 6170 6528  (data)).reshape(
-000240b0: 2d31 2c20 3129 0a20 2020 2020 2020 2064  -1, 1).        d
-000240c0: 6174 6120 3d20 6e70 2e68 7374 6163 6b28  ata = np.hstack(
-000240d0: 2866 726d 5f69 642c 206e 702e 6172 7261  (frm_id, np.arra
-000240e0: 7928 6461 7461 292e 7265 7368 6170 6528  y(data).reshape(
-000240f0: 2d31 2c20 3129 2929 0a20 2020 2020 2020  -1, 1))).       
-00024100: 2069 6d67 5f61 7272 203d 206e 702e 7a65   img_arr = np.ze
-00024110: 726f 7328 2864 6174 612e 7368 6170 655b  ros((data.shape[
-00024120: 305d 2c20 6820 2b20 312c 2077 202b 2031  0], h + 1, w + 1
-00024130: 2929 0a20 2020 2020 2020 2077 6974 6820  )).        with 
-00024140: 6d75 6c74 6970 726f 6365 7373 696e 672e  multiprocessing.
-00024150: 506f 6f6c 280a 2020 2020 2020 2020 2020  Pool(.          
-00024160: 2020 636f 7265 5f63 6e74 2c20 6d61 7874    core_cnt, maxt
-00024170: 6173 6b73 7065 7263 6869 6c64 3d44 6566  asksperchild=Def
-00024180: 6175 6c74 732e 4c41 5247 455f 4d41 585f  aults.LARGE_MAX_
-00024190: 5441 534b 5f50 4552 5f43 4849 4c44 2e76  TASK_PER_CHILD.v
-000241a0: 616c 7565 0a20 2020 2020 2020 2029 2061  alue.        ) a
-000241b0: 7320 706f 6f6c 3a0a 2020 2020 2020 2020  s pool:.        
-000241c0: 2020 2020 636f 6e73 7461 6e74 7320 3d20      constants = 
-000241d0: 6675 6e63 746f 6f6c 732e 7061 7274 6961  functools.partia
-000241e0: 6c28 0a20 2020 2020 2020 2020 2020 2020  l(.             
-000241f0: 2020 2073 656c 662e 5f63 756d 7375 6d5f     self._cumsum_
-00024200: 616e 696d 616c 5f67 656f 6d65 7472 6965  animal_geometrie
-00024210: 735f 6772 6964 5f68 656c 7065 722c 0a20  s_grid_helper,. 
-00024220: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00024230: 7269 643d 6772 6964 2c0a 2020 2020 2020  rid=grid,.      
-00024240: 2020 2020 2020 2020 2020 7369 7a65 3d28            size=(
-00024250: 682c 2077 292c 0a20 2020 2020 2020 2020  h, w),.         
-00024260: 2020 2020 2020 2076 6572 626f 7365 3d76         verbose=v
-00024270: 6572 626f 7365 2c0a 2020 2020 2020 2020  erbose,.        
-00024280: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00024290: 2020 666f 7220 636e 742c 2072 6573 756c    for cnt, resul
-000242a0: 7420 696e 2065 6e75 6d65 7261 7465 2870  t in enumerate(p
-000242b0: 6f6f 6c2e 696d 6170 2863 6f6e 7374 616e  ool.imap(constan
-000242c0: 7473 2c20 6461 7461 2c20 6368 756e 6b73  ts, data, chunks
-000242d0: 697a 653d 3129 293a 0a20 2020 2020 2020  ize=1)):.       
-000242e0: 2020 2020 2020 2020 2069 6d67 5f61 7272           img_arr
-000242f0: 5b63 6e74 5d20 3d20 7265 7375 6c74 0a0a  [cnt] = result..
-00024300: 2020 2020 2020 2020 7469 6d65 722e 7374          timer.st
-00024310: 6f70 5f74 696d 6572 2829 0a20 2020 2020  op_timer().     
-00024320: 2020 2073 7464 6f75 745f 7375 6363 6573     stdout_succes
-00024330: 7328 0a20 2020 2020 2020 2020 2020 206d  s(.            m
-00024340: 7367 3d22 4375 6d75 6c61 7469 7665 2061  sg="Cumulative a
-00024350: 6e69 6d61 6c20 6765 6f6d 6574 7269 6573  nimal geometries
-00024360: 2069 6e20 6772 6964 2063 6f6d 706c 6574   in grid complet
-00024370: 6522 2c0a 2020 2020 2020 2020 2020 2020  e",.            
-00024380: 656c 6170 7365 645f 7469 6d65 3d74 696d  elapsed_time=tim
-00024390: 6572 2e65 6c61 7073 6564 5f74 696d 655f  er.elapsed_time_
-000243a0: 7374 722c 0a20 2020 2020 2020 2029 0a20  str,.        ). 
-000243b0: 2020 2020 2020 2069 6620 6670 7320 6973         if fps is
-000243c0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-000243d0: 2020 2072 6574 7572 6e20 6e70 2e63 756d     return np.cum
-000243e0: 7375 6d28 696d 675f 6172 722c 2061 7869  sum(img_arr, axi
-000243f0: 733d 3029 0a20 2020 2020 2020 2065 6c73  s=0).        els
-00024400: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00024410: 6574 7572 6e20 6e70 2e63 756d 7375 6d28  eturn np.cumsum(
-00024420: 696d 675f 6172 722c 2061 7869 733d 3029  img_arr, axis=0)
-00024430: 202f 2066 7073 0a0a 2020 2020 4073 7461   / fps..    @sta
-00024440: 7469 636d 6574 686f 640a 2020 2020 6465  ticmethod.    de
-00024450: 6620 6861 7573 646f 7266 665f 6469 7374  f hausdorff_dist
-00024460: 616e 6365 280a 2020 2020 2020 2020 6765  ance(.        ge
-00024470: 6f6d 6574 7269 6573 3a20 4c69 7374 5b4c  ometries: List[L
-00024480: 6973 745b 556e 696f 6e5b 506f 6c79 676f  ist[Union[Polygo
-00024490: 6e2c 204c 696e 6553 7472 696e 675d 5d5d  n, LineString]]]
-000244a0: 0a20 2020 2029 202d 3e20 6e70 2e6e 6461  .    ) -> np.nda
-000244b0: 7272 6179 3a0a 2020 2020 2020 2020 2222  rray:.        ""
-000244c0: 220a 2020 2020 2020 2020 5468 6520 4861  ".        The Ha
-000244d0: 7573 646f 7266 6620 6469 7374 616e 6365  usdorff distance
-000244e0: 206d 6561 7375 7265 206f 6620 7468 6520   measure of the 
-000244f0: 7369 6d69 6c61 7269 7479 2062 6574 7765  similarity betwe
-00024500: 656e 2074 696d 652d 7365 7269 6573 2073  en time-series s
-00024510: 6571 7565 6e74 6961 6c20 6765 6f6d 6574  equential geomet
-00024520: 7269 6573 2e20 4974 2069 7320 6465 6669  ries. It is defi
-00024530: 6e65 6420 6173 2074 6865 206d 6178 696d  ned as the maxim
-00024540: 756d 206f 6620 7468 6520 6469 7374 616e  um of the distan
-00024550: 6365 730a 2020 2020 2020 2020 6672 6f6d  ces.        from
-00024560: 2065 6163 6820 706f 696e 7420 696e 206f   each point in o
-00024570: 6e65 2073 6574 2074 6f20 7468 6520 6e65  ne set to the ne
-00024580: 6172 6573 7420 706f 696e 7420 696e 2074  arest point in t
-00024590: 6865 206f 7468 6572 2073 6574 2e0a 0a20  he other set... 
-000245a0: 2020 2020 2020 2048 6175 7364 6f72 6666         Hausdorff
-000245b0: 2064 6973 7461 6e63 6520 6361 6e20 6265   distance can be
-000245c0: 2075 7365 6420 746f 206d 6561 7375 7265   used to measure
-000245d0: 2074 6865 2073 696d 696c 6172 6974 7920   the similarity 
-000245e0: 6f66 2074 6865 2067 656f 6d65 7472 7920  of the geometry 
-000245f0: 696e 206f 6e65 2066 7261 6d65 2072 656c  in one frame rel
-00024600: 6174 6976 6520 746f 2074 6865 2067 656f  ative to the geo
-00024610: 6d65 7472 7920 696e 2074 6865 206e 6578  metry in the nex
-00024620: 7420 6672 616d 652e 0a20 2020 2020 2020  t frame..       
-00024630: 204c 6172 6765 7220 7661 6c75 6573 2069   Larger values i
-00024640: 6e64 6963 6174 6520 7468 6174 2074 6865  ndicate that the
-00024650: 2061 6e69 6d61 6c20 6861 7320 6120 6469   animal has a di
-00024660: 6666 6572 656e 7420 7368 6170 6520 7468  fferent shape th
-00024670: 616e 2069 6e20 7468 6520 7072 6563 6564  an in the preced
-00024680: 696e 6720 7368 6170 652e 0a0a 2020 2020  ing shape...    
-00024690: 2020 2020 3a70 6172 616d 204c 6973 745b      :param List[
-000246a0: 4c69 7374 5b55 6e69 6f6e 5b50 6f6c 7967  List[Union[Polyg
-000246b0: 6f6e 2c20 4c69 6e65 5374 7269 6e67 5d5d  on, LineString]]
-000246c0: 5d20 6765 6f6d 6574 7269 6573 3a20 4c69  ] geometries: Li
-000246d0: 7374 206f 6620 6c69 7374 2077 6865 7265  st of list where
-000246e0: 2065 6163 6820 6c69 7374 2068 6173 2074   each list has t
-000246f0: 776f 2067 656f 6d65 7472 6965 732e 0a20  wo geometries.. 
-00024700: 2020 2020 2020 203a 7265 7475 726e 206e         :return n
-00024710: 702e 6e64 6172 7261 793a 2031 4420 6172  p.ndarray: 1D ar
-00024720: 7261 7920 6f66 2068 6175 7364 6f72 6666  ray of hausdorff
-00024730: 2064 6973 7461 6e63 6573 206f 6620 6765   distances of ge
-00024740: 6f6d 6574 7269 6573 2069 6e20 6561 6368  ometries in each
-00024750: 206c 6973 742e 0a0a 2020 2020 2020 2020   list...        
-00024760: 3a65 7861 6d70 6c65 3a0a 2020 2020 2020  :example:.      
-00024770: 2020 3e3e 3e20 7820 3d20 506f 6c79 676f    >>> x = Polygo
-00024780: 6e28 5b5b 302c 315d 2c20 5b30 2c20 325d  n([[0,1], [0, 2]
-00024790: 2c20 5b31 2c31 5d5d 290a 2020 2020 2020  , [1,1]]).      
-000247a0: 2020 3e3e 3e20 7920 3d20 506f 6c79 676f    >>> y = Polygo
-000247b0: 6e28 5b5b 302c 315d 2c20 5b30 2c20 325d  n([[0,1], [0, 2]
-000247c0: 2c20 5b30 2c31 5d5d 290a 2020 2020 2020  , [0,1]]).      
-000247d0: 2020 3e3e 3e20 4765 6f6d 6574 7279 4d69    >>> GeometryMi
-000247e0: 7869 6e2e 6861 7573 646f 7266 665f 6469  xin.hausdorff_di
-000247f0: 7374 616e 6365 2867 656f 6d65 7472 6965  stance(geometrie
-00024800: 733d 5b5b 782c 2079 5d5d 290a 2020 2020  s=[[x, y]]).    
-00024810: 2020 2020 3e3e 3e20 5b31 2e5d 0a20 2020      >>> [1.].   
-00024820: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00024830: 2020 6368 6563 6b5f 696e 7374 616e 6365    check_instance
-00024840: 280a 2020 2020 2020 2020 2020 2020 736f  (.            so
-00024850: 7572 6365 3d47 656f 6d65 7472 794d 6978  urce=GeometryMix
-00024860: 696e 2e68 6175 7364 6f72 6666 5f64 6973  in.hausdorff_dis
-00024870: 7461 6e63 652e 5f5f 6e61 6d65 5f5f 2c0a  tance.__name__,.
-00024880: 2020 2020 2020 2020 2020 2020 696e 7374              inst
-00024890: 616e 6365 3d67 656f 6d65 7472 6965 732c  ance=geometries,
-000248a0: 0a20 2020 2020 2020 2020 2020 2061 6363  .            acc
-000248b0: 6570 7465 645f 7479 7065 733d 286c 6973  epted_types=(lis
-000248c0: 742c 292c 0a20 2020 2020 2020 2029 0a20  t,),.        ). 
-000248d0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-000248e0: 6765 6f6d 6574 7269 6573 3a0a 2020 2020  geometries:.    
-000248f0: 2020 2020 2020 2020 6368 6563 6b5f 7661          check_va
-00024900: 6c69 645f 6c73 7428 0a20 2020 2020 2020  lid_lst(.       
-00024910: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
-00024920: 4765 6f6d 6574 7279 4d69 7869 6e2e 6861  GeometryMixin.ha
-00024930: 7573 646f 7266 665f 6469 7374 616e 6365  usdorff_distance
-00024940: 2e5f 5f6e 616d 655f 5f2c 0a20 2020 2020  .__name__,.     
-00024950: 2020 2020 2020 2020 2020 2064 6174 613d             data=
-00024960: 692c 0a20 2020 2020 2020 2020 2020 2020  i,.             
-00024970: 2020 2076 616c 6964 5f64 7479 7065 733d     valid_dtypes=
-00024980: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00024990: 2020 2020 2020 506f 6c79 676f 6e2c 0a20        Polygon,. 
-000249a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000249b0: 2020 204c 696e 6553 7472 696e 672c 0a20     LineString,. 
-000249c0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-000249d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000249e0: 2020 6578 6163 745f 6c65 6e3d 322c 0a20    exact_len=2,. 
-000249f0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00024a00: 2020 2020 2072 6573 756c 7473 203d 206e       results = n
-00024a10: 702e 6675 6c6c 2828 6c65 6e28 6765 6f6d  p.full((len(geom
-00024a20: 6574 7269 6573 2929 2c20 6e70 2e6e 616e  etries)), np.nan
-00024a30: 290a 2020 2020 2020 2020 666f 7220 6920  ).        for i 
-00024a40: 696e 2072 616e 6765 286c 656e 2867 656f  in range(len(geo
-00024a50: 6d65 7472 6965 7329 293a 0a20 2020 2020  metries)):.     
-00024a60: 2020 2020 2020 2072 6573 756c 7473 5b69         results[i
-00024a70: 5d20 3d20 6765 6f6d 6574 7269 6573 5b69  ] = geometries[i
-00024a80: 5d5b 305d 2e68 6175 7364 6f72 6666 5f64  ][0].hausdorff_d
-00024a90: 6973 7461 6e63 6528 6765 6f6d 6574 7269  istance(geometri
-00024aa0: 6573 5b69 5d5b 315d 290a 2020 2020 2020  es[i][1]).      
-00024ab0: 2020 7265 7475 726e 2072 6573 756c 7473    return results
-00024ac0: 0a0a 2020 2020 6465 6620 6d75 6c74 6966  ..    def multif
-00024ad0: 7261 6d65 5f68 6175 7364 6f72 6666 5f64  rame_hausdorff_d
-00024ae0: 6973 7461 6e63 6528 0a20 2020 2020 2020  istance(.       
-00024af0: 2073 656c 662c 0a20 2020 2020 2020 2067   self,.        g
-00024b00: 656f 6d65 7472 6965 733a 204c 6973 745b  eometries: List[
-00024b10: 556e 696f 6e5b 506f 6c79 676f 6e2c 204c  Union[Polygon, L
-00024b20: 696e 6553 7472 696e 675d 5d2c 0a20 2020  ineString]],.   
-00024b30: 2020 2020 206c 6167 3a20 4f70 7469 6f6e       lag: Option
-00024b40: 616c 5b69 6e74 5d20 3d20 312c 0a20 2020  al[int] = 1,.   
-00024b50: 2020 2020 2063 6f72 655f 636e 743a 204f       core_cnt: O
-00024b60: 7074 696f 6e61 6c5b 696e 745d 203d 202d  ptional[int] = -
-00024b70: 312c 0a20 2020 2029 202d 3e20 4c69 7374  1,.    ) -> List
-00024b80: 5b66 6c6f 6174 5d3a 0a20 2020 2020 2020  [float]:.       
-00024b90: 2022 2222 0a20 2020 2020 2020 2054 6865   """.        The
-00024ba0: 2048 6175 7364 6f72 6666 2064 6973 7461   Hausdorff dista
-00024bb0: 6e63 6520 6d65 6173 7572 6520 6f66 2074  nce measure of t
-00024bc0: 6865 2073 696d 696c 6172 6974 7920 6265  he similarity be
-00024bd0: 7477 6565 6e20 7365 7175 656e 7469 616c  tween sequential
-00024be0: 2074 696d 652d 7365 7269 6573 2020 6765   time-series  ge
-00024bf0: 6f6d 6574 7269 6573 2e0a 0a20 2020 2020  ometries...     
-00024c00: 2020 203a 6578 616d 706c 653a 0a20 2020     :example:.   
-00024c10: 2020 2020 203e 3e3e 2064 6620 3d20 7265       >>> df = re
-00024c20: 6164 5f64 6628 6669 6c65 5f70 6174 683d  ad_df(file_path=
-00024c30: 272f 5573 6572 732f 7369 6d6f 6e2f 4465  '/Users/simon/De
-00024c40: 736b 746f 702f 656e 7673 2f73 696d 6261  sktop/envs/simba
-00024c50: 2f74 726f 7562 6c65 7368 6f6f 7469 6e67  /troubleshooting
-00024c60: 2f6d 6f75 7365 5f6f 7065 6e5f 6669 656c  /mouse_open_fiel
-00024c70: 642f 7072 6f6a 6563 745f 666f 6c64 6572  d/project_folder
-00024c80: 2f63 7376 2f6f 7574 6c69 6572 5f63 6f72  /csv/outlier_cor
-00024c90: 7265 6374 6564 5f6d 6f76 656d 656e 745f  rected_movement_
-00024ca0: 6c6f 6361 7469 6f6e 2f53 495f 4441 5933  location/SI_DAY3
-00024cb0: 5f33 3038 5f43 4431 5f50 5245 5345 4e54  _308_CD1_PRESENT
-00024cc0: 2e63 7376 272c 2066 696c 655f 7479 7065  .csv', file_type
-00024cd0: 3d27 6373 7627 290a 2020 2020 2020 2020  ='csv').        
-00024ce0: 3e3e 3e20 636f 6c73 203d 205b 7820 666f  >>> cols = [x fo
-00024cf0: 7220 7820 696e 2064 662e 636f 6c75 6d6e  r x in df.column
-00024d00: 7320 6966 206e 6f74 2078 2e65 6e64 7377  s if not x.endsw
-00024d10: 6974 6828 275f 7027 295d 0a20 2020 2020  ith('_p')].     
-00024d20: 2020 203e 3e3e 2064 6174 6120 3d20 6466     >>> data = df
-00024d30: 5b63 6f6c 735d 2e76 616c 7565 732e 7265  [cols].values.re
-00024d40: 7368 6170 6528 6c65 6e28 6466 292c 202d  shape(len(df), -
-00024d50: 3120 2c20 3229 2e61 7374 7970 6528 6e70  1 , 2).astype(np
-00024d60: 2e69 6e74 290a 2020 2020 2020 2020 3e3e  .int).        >>
-00024d70: 3e20 6765 6f6d 6574 7269 6573 203d 2047  > geometries = G
-00024d80: 656f 6d65 7472 794d 6978 696e 2829 2e6d  eometryMixin().m
-00024d90: 756c 7469 6672 616d 655f 626f 6479 7061  ultiframe_bodypa
-00024da0: 7274 735f 746f 5f70 6f6c 7967 6f6e 2864  rts_to_polygon(d
-00024db0: 6174 613d 6461 7461 2c20 7069 7865 6c73  ata=data, pixels
-00024dc0: 5f70 6572 5f6d 6d3d 312c 2070 6172 616c  _per_mm=1, paral
-00024dd0: 6c65 6c5f 6f66 6673 6574 3d31 2c20 7665  lel_offset=1, ve
-00024de0: 7262 6f73 653d 4661 6c73 652c 2063 6f72  rbose=False, cor
-00024df0: 655f 636e 743d 2d31 290a 2020 2020 2020  e_cnt=-1).      
-00024e00: 2020 3e3e 3e20 6861 7573 646f 7266 665f    >>> hausdorff_
-00024e10: 6469 7374 616e 6365 7320 3d20 4765 6f6d  distances = Geom
-00024e20: 6574 7279 4d69 7869 6e2e 6d75 6c74 6966  etryMixin.multif
-00024e30: 7261 6d65 5f68 6175 7364 6f72 6666 5f64  rame_hausdorff_d
-00024e40: 6973 7461 6e63 6528 6765 6f6d 6574 7269  istance(geometri
-00024e50: 6573 3d67 656f 6d65 7472 6965 7329 0a20  es=geometries). 
-00024e60: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
-00024e70: 2020 2020 6368 6563 6b5f 7661 6c69 645f      check_valid_
-00024e80: 6c73 7428 0a20 2020 2020 2020 2020 2020  lst(.           
-00024e90: 2073 6f75 7263 653d 4765 6f6d 6574 7279   source=Geometry
-00024ea0: 4d69 7869 6e2e 6d75 6c74 6966 7261 6d65  Mixin.multiframe
-00024eb0: 5f68 6175 7364 6f72 6666 5f64 6973 7461  _hausdorff_dista
-00024ec0: 6e63 652e 5f5f 6e61 6d65 5f5f 2c0a 2020  nce.__name__,.  
-00024ed0: 2020 2020 2020 2020 2020 6461 7461 3d67            data=g
-00024ee0: 656f 6d65 7472 6965 732c 0a20 2020 2020  eometries,.     
-00024ef0: 2020 2020 2020 2076 616c 6964 5f64 7479         valid_dty
-00024f00: 7065 733d 280a 2020 2020 2020 2020 2020  pes=(.          
-00024f10: 2020 2020 2020 506f 6c79 676f 6e2c 0a20        Polygon,. 
-00024f20: 2020 2020 2020 2020 2020 2020 2020 204c                 L
-00024f30: 696e 6553 7472 696e 672c 0a20 2020 2020  ineString,.     
-00024f40: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
-00024f50: 2020 2020 2020 6d69 6e5f 6c65 6e3d 312c        min_len=1,
-00024f60: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00024f70: 2020 2063 6865 636b 5f69 6e74 280a 2020     check_int(.  
-00024f80: 2020 2020 2020 2020 2020 6e61 6d65 3d66            name=f
-00024f90: 227b 4765 6f6d 6574 7279 4d69 7869 6e2e  "{GeometryMixin.
-00024fa0: 6d75 6c74 6966 7261 6d65 5f68 6175 7364  multiframe_hausd
-00024fb0: 6f72 6666 5f64 6973 7461 6e63 652e 5f5f  orff_distance.__
-00024fc0: 6e61 6d65 5f5f 7d20 434f 5245 2043 4f55  name__} CORE COU
-00024fd0: 4e54 222c 0a20 2020 2020 2020 2020 2020  NT",.           
-00024fe0: 2076 616c 7565 3d63 6f72 655f 636e 742c   value=core_cnt,
-00024ff0: 0a20 2020 2020 2020 2020 2020 206d 696e  .            min
-00025000: 5f76 616c 7565 3d2d 312c 0a20 2020 2020  _value=-1,.     
-00025010: 2020 2020 2020 206d 6178 5f76 616c 7565         max_value
-00025020: 3d66 696e 645f 636f 7265 5f63 6e74 2829  =find_core_cnt()
-00025030: 5b30 5d2c 0a20 2020 2020 2020 2020 2020  [0],.           
-00025040: 2072 6169 7365 5f65 7272 6f72 3d54 7275   raise_error=Tru
-00025050: 652c 0a20 2020 2020 2020 2029 0a20 2020  e,.        ).   
-00025060: 2020 2020 2063 6865 636b 5f69 6e74 280a       check_int(.
-00025070: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
-00025080: 3d66 227b 4765 6f6d 6574 7279 4d69 7869  =f"{GeometryMixi
-00025090: 6e2e 6d75 6c74 6966 7261 6d65 5f68 6175  n.multiframe_hau
-000250a0: 7364 6f72 6666 5f64 6973 7461 6e63 652e  sdorff_distance.
-000250b0: 5f5f 6e61 6d65 5f5f 7d20 4c41 4722 2c0a  __name__} LAG",.
-000250c0: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-000250d0: 653d 6c61 672c 0a20 2020 2020 2020 2020  e=lag,.         
-000250e0: 2020 206d 696e 5f76 616c 7565 3d2d 312c     min_value=-1,
-000250f0: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
-00025100: 5f76 616c 7565 3d6c 656e 2867 656f 6d65  _value=len(geome
-00025110: 7472 6965 7329 202d 2031 2c0a 2020 2020  tries) - 1,.    
-00025120: 2020 2020 2020 2020 7261 6973 655f 6572          raise_er
-00025130: 726f 723d 5472 7565 2c0a 2020 2020 2020  ror=True,.      
-00025140: 2020 290a 2020 2020 2020 2020 6966 2063    ).        if c
-00025150: 6f72 655f 636e 7420 3d3d 202d 313a 0a20  ore_cnt == -1:. 
-00025160: 2020 2020 2020 2020 2020 2063 6f72 655f             core_
-00025170: 636e 7420 3d20 6669 6e64 5f63 6f72 655f  cnt = find_core_
-00025180: 636e 7428 295b 305d 0a20 2020 2020 2020  cnt()[0].       
-00025190: 2072 6573 6861 7065 645f 6765 6f6d 6574   reshaped_geomet
-000251a0: 7269 6573 203d 205b 5d0a 2020 2020 2020  ries = [].      
-000251b0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-000251c0: 286c 6167 293a 0a20 2020 2020 2020 2020  (lag):.         
-000251d0: 2020 2072 6573 6861 7065 645f 6765 6f6d     reshaped_geom
-000251e0: 6574 7269 6573 2e61 7070 656e 6428 5b5b  etries.append([[
-000251f0: 6765 6f6d 6574 7269 6573 5b69 5d2c 2067  geometries[i], g
-00025200: 656f 6d65 7472 6965 735b 695d 5d5d 290a  eometries[i]]]).
-00025210: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00025220: 2072 616e 6765 286c 6167 2c20 6c65 6e28   range(lag, len(
-00025230: 6765 6f6d 6574 7269 6573 2929 3a0a 2020  geometries)):.  
-00025240: 2020 2020 2020 2020 2020 7265 7368 6170            reshap
-00025250: 6564 5f67 656f 6d65 7472 6965 732e 6170  ed_geometries.ap
-00025260: 7065 6e64 285b 5b67 656f 6d65 7472 6965  pend([[geometrie
-00025270: 735b 6920 2d20 6c61 675d 2c20 6765 6f6d  s[i - lag], geom
-00025280: 6574 7269 6573 5b69 5d5d 5d29 0a20 2020  etries[i]]]).   
-00025290: 2020 2020 2072 6573 756c 7473 203d 205b       results = [
-000252a0: 5d0a 2020 2020 2020 2020 7769 7468 206d  ].        with m
-000252b0: 756c 7469 7072 6f63 6573 7369 6e67 2e50  ultiprocessing.P
-000252c0: 6f6f 6c28 0a20 2020 2020 2020 2020 2020  ool(.           
-000252d0: 2063 6f72 655f 636e 742c 206d 6178 7461   core_cnt, maxta
-000252e0: 736b 7370 6572 6368 696c 643d 4465 6661  sksperchild=Defa
-000252f0: 756c 7473 2e4c 4152 4745 5f4d 4158 5f54  ults.LARGE_MAX_T
-00025300: 4153 4b5f 5045 525f 4348 494c 442e 7661  ASK_PER_CHILD.va
-00025310: 6c75 650a 2020 2020 2020 2020 2920 6173  lue.        ) as
-00025320: 2070 6f6f 6c3a 0a20 2020 2020 2020 2020   pool:.         
-00025330: 2020 2066 6f72 2063 6e74 2c20 6d70 5f72     for cnt, mp_r
-00025340: 6574 7572 6e20 696e 2065 6e75 6d65 7261  eturn in enumera
-00025350: 7465 280a 2020 2020 2020 2020 2020 2020  te(.            
-00025360: 2020 2020 706f 6f6c 2e69 6d61 7028 0a20      pool.imap(. 
-00025370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025380: 2020 2047 656f 6d65 7472 794d 6978 696e     GeometryMixin
-00025390: 2e68 6175 7364 6f72 6666 5f64 6973 7461  .hausdorff_dista
-000253a0: 6e63 652c 2072 6573 6861 7065 645f 6765  nce, reshaped_ge
-000253b0: 6f6d 6574 7269 6573 2c20 6368 756e 6b73  ometries, chunks
-000253c0: 697a 653d 310a 2020 2020 2020 2020 2020  ize=1.          
-000253d0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000253e0: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
-000253f0: 2020 2020 2020 2072 6573 756c 7473 2e61         results.a
-00025400: 7070 656e 6428 6d70 5f72 6574 7572 6e5b  ppend(mp_return[
-00025410: 305d 290a 2020 2020 2020 2020 7265 7475  0]).        retu
-00025420: 726e 2072 6573 756c 7473 0a0a 2020 2020  rn results..    
-00025430: 4073 7461 7469 636d 6574 686f 640a 2020  @staticmethod.  
-00025440: 2020 6465 6620 6c6f 6361 7465 5f6c 696e    def locate_lin
-00025450: 655f 706f 696e 7428 0a20 2020 2020 2020  e_point(.       
-00025460: 2070 6174 683a 2055 6e69 6f6e 5b4c 696e   path: Union[Lin
-00025470: 6553 7472 696e 672c 206e 702e 6e64 6172  eString, np.ndar
-00025480: 7261 795d 2c0a 2020 2020 2020 2020 6765  ray],.        ge
-00025490: 6f6d 6574 7279 3a20 556e 696f 6e5b 4c69  ometry: Union[Li
-000254a0: 6e65 5374 7269 6e67 2c20 506f 6c79 676f  neString, Polygo
-000254b0: 6e2c 2050 6f69 6e74 5d2c 0a20 2020 2020  n, Point],.     
-000254c0: 2020 2070 785f 7065 725f 6d6d 3a20 4f70     px_per_mm: Op
-000254d0: 7469 6f6e 616c 5b66 6c6f 6174 5d20 3d20  tional[float] = 
-000254e0: 312c 0a20 2020 2020 2020 2066 7073 3a20  1,.        fps: 
-000254f0: 4f70 7469 6f6e 616c 5b66 6c6f 6174 5d20  Optional[float] 
-00025500: 3d20 312c 0a20 2020 2020 2020 2063 6f72  = 1,.        cor
-00025510: 655f 636e 743a 204f 7074 696f 6e61 6c5b  e_cnt: Optional[
-00025520: 696e 745d 203d 202d 312c 0a20 2020 2020  int] = -1,.     
-00025530: 2020 2064 6973 7461 6e63 655f 6d69 6e3a     distance_min:
-00025540: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
-00025550: 3d20 5472 7565 2c0a 2020 2020 2020 2020  = True,.        
-00025560: 7469 6d65 5f70 7269 6f72 3a20 4f70 7469  time_prior: Opti
-00025570: 6f6e 616c 5b62 6f6f 6c5d 203d 2054 7275  onal[bool] = Tru
-00025580: 652c 0a20 2020 2029 202d 3e20 4469 6374  e,.    ) -> Dict
-00025590: 5b73 7472 2c20 666c 6f61 745d 3a0a 2020  [str, float]:.  
-000255a0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000255b0: 2020 436f 6d70 7574 6520 7468 6520 7469    Compute the ti
-000255c0: 6d65 2061 6e64 2064 6973 7461 6e63 6520  me and distance 
-000255d0: 7472 6176 656c 6c65 6420 616c 6f6e 6720  travelled along 
-000255e0: 6120 7061 7468 2074 6f20 7265 6163 6820  a path to reach 
-000255f0: 7468 6520 6d6f 7374 2070 726f 7869 6d61  the most proxima
-00025600: 6c20 706f 696e 7420 696e 2072 6566 6572  l point in refer
-00025610: 656e 6365 2074 6f20 6120 7365 636f 6e64  ence to a second
-00025620: 2067 656f 6d65 7472 792e 0a0a 2020 2020   geometry...    
-00025630: 2020 2020 2e2e 206e 6f74 653a 3a0a 2020      .. note::.  
-00025640: 2020 2020 2020 2020 2028 6929 2054 6f20           (i) To 
-00025650: 636f 6d70 7574 6520 7468 6520 7469 6d65  compute the time
-00025660: 2061 6e64 2064 6973 7461 6e63 6520 7472   and distance tr
-00025670: 6176 656c 6c65 6420 746f 2061 6c6f 6e67  avelled to along
-00025680: 2061 2070 6174 6820 746f 2072 6561 6368   a path to reach
-00025690: 2074 6865 206d 6f73 7420 6469 7374 616c   the most distal
-000256a0: 2070 6f69 6e74 2074 6f20 6120 7365 636f   point to a seco
-000256b0: 6e64 2067 656f 6d65 7472 792c 2070 6173  nd geometry, pas
-000256c0: 7320 6060 6469 7374 616e 6365 5f6d 696e  s ``distance_min
-000256d0: 203d 2046 616c 7365 6060 2e0a 0a20 2020   = False``...   
-000256e0: 2020 2020 2020 2020 2869 6929 2054 6f20          (ii) To 
-000256f0: 636f 6d70 7574 6520 7468 6520 7469 6d65  compute the time
-00025700: 2061 6e64 2064 6973 7461 6e63 6520 7472   and distance tr
-00025710: 6176 656c 6c65 6420 616c 6f6e 6720 6120  avelled along a 
-00025720: 7061 7468 202a 2a61 6674 6572 2a2a 2072  path **after** r
-00025730: 6561 6368 696e 6720 7468 6520 6d6f 7374  eaching the most
-00025740: 2064 6973 7461 6c20 6f72 2070 726f 7869   distal or proxi
-00025750: 6d61 6c20 706f 696e 7420 746f 2061 2073  mal point to a s
-00025760: 6563 6f6e 6420 6765 6f6d 6574 7279 2c20  econd geometry, 
-00025770: 7061 7373 2060 6074 696d 655f 7072 696f  pass ``time_prio
-00025780: 7220 3d20 4661 6c73 6560 602e 0a0a 2020  r = False``...  
-00025790: 2020 2020 2020 2e2e 2069 6d61 6765 3a3a        .. image::
-000257a0: 205f 7374 6174 6963 2f69 6d67 2f6c 6f63   _static/img/loc
-000257b0: 6174 655f 6c69 6e65 5f70 6f69 6e74 2e70  ate_line_point.p
-000257c0: 6e67 0a20 2020 2020 2020 2020 2020 3a77  ng.           :w
-000257d0: 6964 7468 3a20 3630 300a 2020 2020 2020  idth: 600.      
-000257e0: 2020 2020 203a 616c 6967 6e3a 2063 656e       :align: cen
-000257f0: 7465 720a 0a20 2020 2020 2020 203a 6578  ter..        :ex
-00025800: 616d 706c 653a 0a20 2020 2020 2020 203e  ample:.        >
-00025810: 3e3e 206c 696e 6520 3d20 4c69 6e65 5374  >> line = LineSt
-00025820: 7269 6e67 285b 5b31 302c 2031 305d 2c20  ring([[10, 10], 
-00025830: 5b37 2e35 2c20 372e 355d 2c20 5b31 352c  [7.5, 7.5], [15,
-00025840: 2031 355d 2c20 5b37 2e35 2c20 372e 355d   15], [7.5, 7.5]
-00025850: 5d29 0a20 2020 2020 2020 203e 3e3e 2070  ]).        >>> p
-00025860: 6f6c 7967 6f6e 203d 2050 6f6c 7967 6f6e  olygon = Polygon
-00025870: 285b 5b30 2c20 355d 2c20 5b30 2c20 305d  ([[0, 5], [0, 0]
-00025880: 2c20 5b35 2c20 305d 2c20 5b35 2c20 355d  , [5, 0], [5, 5]
-00025890: 5d29 0a20 2020 2020 2020 203e 3e3e 2047  ]).        >>> G
-000258a0: 656f 6d65 7472 794d 6978 696e 2e6c 6f63  eometryMixin.loc
-000258b0: 6174 655f 6c69 6e65 5f70 6f69 6e74 2870  ate_line_point(p
-000258c0: 6174 683d 6c69 6e65 2c20 6765 6f6d 6574  ath=line, geomet
-000258d0: 7279 3d70 6f6c 7967 6f6e 290a 2020 2020  ry=polygon).    
-000258e0: 2020 2020 3e3e 3e20 7b27 6469 7374 616e      >>> {'distan
-000258f0: 6365 5f76 616c 7565 273a 2033 2e35 3335  ce_value': 3.535
-00025900: 3533 3339 3035 3933 3237 3337 382c 2027  5339059327378, '
-00025910: 6469 7374 616e 6365 5f74 7261 7665 6c6c  distance_travell
-00025920: 6564 273a 2033 2e35 3335 3533 3339 3035  ed': 3.535533905
-00025930: 3933 3237 3337 382c 2027 7469 6d65 5f74  9327378, 'time_t
-00025940: 7261 7665 6c6c 6564 273a 2031 2e30 2c20  ravelled': 1.0, 
-00025950: 2764 6973 7461 6e63 655f 696e 6465 7827  'distance_index'
-00025960: 3a20 317d 0a20 2020 2020 2020 2022 2222  : 1}.        """
-00025970: 0a0a 2020 2020 2020 2020 6368 6563 6b5f  ..        check_
-00025980: 696e 7374 616e 6365 280a 2020 2020 2020  instance(.      
-00025990: 2020 2020 2020 736f 7572 6365 3d47 656f        source=Geo
-000259a0: 6d65 7472 794d 6978 696e 2e6c 6f63 6174  metryMixin.locat
-000259b0: 655f 6c69 6e65 5f70 6f69 6e74 2e5f 5f6e  e_line_point.__n
-000259c0: 616d 655f 5f2c 0a20 2020 2020 2020 2020  ame__,.         
-000259d0: 2020 2069 6e73 7461 6e63 653d 7061 7468     instance=path
-000259e0: 2c0a 2020 2020 2020 2020 2020 2020 6163  ,.            ac
-000259f0: 6365 7074 6564 5f74 7970 6573 3d28 4c69  cepted_types=(Li
-00025a00: 6e65 5374 7269 6e67 2c20 6e70 2e6e 6461  neString, np.nda
-00025a10: 7272 6179 292c 0a20 2020 2020 2020 2029  rray),.        )
-00025a20: 0a20 2020 2020 2020 2063 6865 636b 5f69  .        check_i
-00025a30: 6e73 7461 6e63 6528 0a20 2020 2020 2020  nstance(.       
-00025a40: 2020 2020 2073 6f75 7263 653d 4765 6f6d       source=Geom
-00025a50: 6574 7279 4d69 7869 6e2e 6c6f 6361 7465  etryMixin.locate
-00025a60: 5f6c 696e 655f 706f 696e 742e 5f5f 6e61  _line_point.__na
-00025a70: 6d65 5f5f 2c0a 2020 2020 2020 2020 2020  me__,.          
-00025a80: 2020 696e 7374 616e 6365 3d67 656f 6d65    instance=geome
-00025a90: 7472 792c 0a20 2020 2020 2020 2020 2020  try,.           
-00025aa0: 2061 6363 6570 7465 645f 7479 7065 733d   accepted_types=
-00025ab0: 284c 696e 6553 7472 696e 672c 2050 6f6c  (LineString, Pol
-00025ac0: 7967 6f6e 2c20 506f 696e 7429 2c0a 2020  ygon, Point),.  
-00025ad0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00025ae0: 6368 6563 6b5f 696e 7428 0a20 2020 2020  check_int(.     
-00025af0: 2020 2020 2020 206e 616d 653d 2243 4f52         name="COR
-00025b00: 4520 434f 554e 5422 2c0a 2020 2020 2020  E COUNT",.      
-00025b10: 2020 2020 2020 7661 6c75 653d 636f 7265        value=core
-00025b20: 5f63 6e74 2c0a 2020 2020 2020 2020 2020  _cnt,.          
-00025b30: 2020 6d69 6e5f 7661 6c75 653d 2d31 2c0a    min_value=-1,.
-00025b40: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
-00025b50: 7661 6c75 653d 6669 6e64 5f63 6f72 655f  value=find_core_
-00025b60: 636e 7428 295b 305d 2c0a 2020 2020 2020  cnt()[0],.      
-00025b70: 2020 2020 2020 7261 6973 655f 6572 726f        raise_erro
-00025b80: 723d 5472 7565 2c0a 2020 2020 2020 2020  r=True,.        
-00025b90: 290a 2020 2020 2020 2020 6368 6563 6b5f  ).        check_
-00025ba0: 666c 6f61 7428 0a20 2020 2020 2020 2020  float(.         
-00025bb0: 2020 206e 616d 653d 2250 4958 454c 5320     name="PIXELS 
-00025bc0: 5045 5220 4d4d 222c 2076 616c 7565 3d70  PER MM", value=p
-00025bd0: 785f 7065 725f 6d6d 2c20 6d69 6e5f 7661  x_per_mm, min_va
-00025be0: 6c75 653d 302e 312c 2072 6169 7365 5f65  lue=0.1, raise_e
-00025bf0: 7272 6f72 3d54 7275 650a 2020 2020 2020  rror=True.      
-00025c00: 2020 290a 2020 2020 2020 2020 6368 6563    ).        chec
-00025c10: 6b5f 666c 6f61 7428 6e61 6d65 3d22 4650  k_float(name="FP
-00025c20: 5322 2c20 7661 6c75 653d 6670 732c 206d  S", value=fps, m
-00025c30: 696e 5f76 616c 7565 3d31 2c20 7261 6973  in_value=1, rais
-00025c40: 655f 6572 726f 723d 5472 7565 290a 2020  e_error=True).  
-00025c50: 2020 2020 2020 6966 2063 6f72 655f 636e        if core_cn
-00025c60: 7420 3d3d 202d 313a 0a20 2020 2020 2020  t == -1:.       
-00025c70: 2020 2020 2063 6f72 655f 636e 7420 3d20       core_cnt = 
-00025c80: 6669 6e64 5f63 6f72 655f 636e 7428 295b  find_core_cnt()[
-00025c90: 305d 0a0a 2020 2020 2020 2020 6966 2069  0]..        if i
-00025ca0: 7369 6e73 7461 6e63 6528 7061 7468 2c20  sinstance(path, 
-00025cb0: 6e70 2e6e 6461 7272 6179 293a 0a20 2020  np.ndarray):.   
-00025cc0: 2020 2020 2020 2020 2063 6865 636b 5f76           check_v
-00025cd0: 616c 6964 5f61 7272 6179 280a 2020 2020  alid_array(.    
-00025ce0: 2020 2020 2020 2020 2020 2020 6461 7461              data
-00025cf0: 3d70 6174 682c 0a20 2020 2020 2020 2020  =path,.         
-00025d00: 2020 2020 2020 2061 6363 6570 7465 645f         accepted_
-00025d10: 6178 6973 5f31 5f73 6861 7065 3d28 322c  axis_1_shape=(2,
-00025d20: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-00025d30: 2020 2061 6363 6570 7465 645f 6474 7970     accepted_dtyp
-00025d40: 6573 3d28 6e70 2e66 6c6f 6174 3332 2c20  es=(np.float32, 
-00025d50: 6e70 2e66 6c6f 6174 3634 2c20 6e70 2e69  np.float64, np.i
-00025d60: 6e74 3634 2c20 6e70 2e69 6e74 3332 292c  nt64, np.int32),
-00025d70: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00025d80: 2020 2020 2020 2020 2020 2070 6174 6820             path 
-00025d90: 3d20 4c69 6e65 5374 7269 6e67 2870 6174  = LineString(pat
-00025da0: 6829 0a20 2020 2020 2020 2069 6620 6973  h).        if is
-00025db0: 696e 7374 616e 6365 2867 656f 6d65 7472  instance(geometr
-00025dc0: 792c 2050 6f69 6e74 293a 0a20 2020 2020  y, Point):.     
-00025dd0: 2020 2020 2020 2067 656f 6d65 7472 7920         geometry 
-00025de0: 3d20 6e70 2e61 7272 6179 2867 656f 6d65  = np.array(geome
-00025df0: 7472 792e 636f 6f72 6473 290a 2020 2020  try.coords).    
-00025e00: 2020 2020 2020 2020 6469 7374 616e 6365          distance
-00025e10: 7320 3d20 4665 6174 7572 6545 7874 7261  s = FeatureExtra
-00025e20: 6374 696f 6e4d 6978 696e 2e66 7261 6d65  ctionMixin.frame
-00025e30: 7769 7365 5f65 7563 6c69 6465 616e 5f64  wise_euclidean_d
-00025e40: 6973 7461 6e63 655f 726f 6928 0a20 2020  istance_roi(.   
-00025e50: 2020 2020 2020 2020 2020 2020 206c 6f63               loc
-00025e60: 6174 696f 6e5f 313d 6e70 2e61 7272 6179  ation_1=np.array
-00025e70: 2870 6174 682e 636f 6f72 6473 292c 0a20  (path.coords),. 
-00025e80: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00025e90: 6f63 6174 696f 6e5f 323d 6765 6f6d 6574  ocation_2=geomet
-00025ea0: 7279 2c0a 2020 2020 2020 2020 2020 2020  ry,.            
-00025eb0: 2020 2020 7078 5f70 6572 5f6d 6d3d 7078      px_per_mm=px
-00025ec0: 5f70 6572 5f6d 6d2c 0a20 2020 2020 2020  _per_mm,.       
-00025ed0: 2020 2020 2029 0a20 2020 2020 2020 2065       ).        e
-00025ee0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00025ef0: 2070 6f69 6e74 7320 3d20 5b50 6f69 6e74   points = [Point
-00025f00: 2878 2920 666f 7220 7820 696e 206e 702e  (x) for x in np.
-00025f10: 6172 7261 7928 7061 7468 2e63 6f6f 7264  array(path.coord
-00025f20: 7329 5d0a 2020 2020 2020 2020 2020 2020  s)].            
-00025f30: 6765 6f6d 6574 7279 203d 205b 6765 6f6d  geometry = [geom
-00025f40: 6574 7279 2066 6f72 2078 2069 6e20 7261  etry for x in ra
-00025f50: 6e67 6528 6c65 6e28 706f 696e 7473 2929  nge(len(points))
-00025f60: 5d0a 2020 2020 2020 2020 2020 2020 6469  ].            di
-00025f70: 7374 616e 6365 7320 3d20 4765 6f6d 6574  stances = Geomet
-00025f80: 7279 4d69 7869 6e28 292e 6d75 6c74 6966  ryMixin().multif
-00025f90: 7261 6d65 5f73 6861 7065 5f64 6973 7461  rame_shape_dista
-00025fa0: 6e63 6528 0a20 2020 2020 2020 2020 2020  nce(.           
-00025fb0: 2020 2020 2073 6861 7065 5f31 3d70 6f69       shape_1=poi
-00025fc0: 6e74 732c 0a20 2020 2020 2020 2020 2020  nts,.           
-00025fd0: 2020 2020 2073 6861 7065 5f32 3d67 656f       shape_2=geo
-00025fe0: 6d65 7472 792c 0a20 2020 2020 2020 2020  metry,.         
-00025ff0: 2020 2020 2020 2070 6978 656c 735f 7065         pixels_pe
-00026000: 725f 6d6d 3d70 785f 7065 725f 6d6d 2c0a  r_mm=px_per_mm,.
-00026010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026020: 636f 7265 5f63 6e74 3d63 6f72 655f 636e  core_cnt=core_cn
-00026030: 742c 0a20 2020 2020 2020 2020 2020 2029  t,.            )
-00026040: 0a0a 2020 2020 2020 2020 6966 2064 6973  ..        if dis
-00026050: 7461 6e63 655f 6d69 6e3a 0a20 2020 2020  tance_min:.     
-00026060: 2020 2020 2020 2064 6973 7461 6e63 655f         distance_
-00026070: 6964 7820 3d20 6e70 2e61 7267 6d69 6e28  idx = np.argmin(
-00026080: 6469 7374 616e 6365 7329 0a20 2020 2020  distances).     
-00026090: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000260a0: 2020 2020 2064 6973 7461 6e63 655f 6964       distance_id
-000260b0: 7820 3d20 6e70 2e61 7267 6d61 7828 6469  x = np.argmax(di
-000260c0: 7374 616e 6365 7329 0a20 2020 2020 2020  stances).       
-000260d0: 2069 6620 7469 6d65 5f70 7269 6f72 3a0a   if time_prior:.
-000260e0: 2020 2020 2020 2020 2020 2020 6469 7374              dist
-000260f0: 5f74 7261 7665 6c6c 6564 203d 2028 0a20  _travelled = (. 
-00026100: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00026110: 702e 7375 6d28 6e70 2e61 6273 286e 702e  p.sum(np.abs(np.
-00026120: 6469 6666 2864 6973 7461 6e63 6573 5b3a  diff(distances[:
-00026130: 2064 6973 7461 6e63 655f 6964 7820 2b20   distance_idx + 
-00026140: 315d 2929 2920 2f20 7078 5f70 6572 5f6d  1]))) / px_per_m
-00026150: 6d0a 2020 2020 2020 2020 2020 2020 290a  m.            ).
-00026160: 2020 2020 2020 2020 2020 2020 7469 6d65              time
-00026170: 5f74 7261 7665 6c6c 6564 203d 2064 6973  _travelled = dis
-00026180: 7461 6e63 655f 6964 7820 2f20 6670 730a  tance_idx / fps.
-00026190: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000261a0: 2020 2020 2020 2020 2020 6469 7374 5f74            dist_t
-000261b0: 7261 7665 6c6c 6564 203d 2028 0a20 2020  ravelled = (.   
-000261c0: 2020 2020 2020 2020 2020 2020 206e 702e               np.
-000261d0: 7375 6d28 6e70 2e61 6273 286e 702e 6469  sum(np.abs(np.di
-000261e0: 6666 2864 6973 7461 6e63 6573 5b64 6973  ff(distances[dis
-000261f0: 7461 6e63 655f 6964 783a 5d29 2929 202f  tance_idx:]))) /
-00026200: 2070 785f 7065 725f 6d6d 0a20 2020 2020   px_per_mm.     
-00026210: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00026220: 2020 2020 2074 696d 655f 7472 6176 656c       time_travel
-00026230: 6c65 6420 3d20 2864 6973 7461 6e63 6573  led = (distances
-00026240: 202d 2064 6973 7461 6e63 655f 6964 7829   - distance_idx)
-00026250: 202f 2066 7073 0a20 2020 2020 2020 2064   / fps.        d
-00026260: 6973 745f 7661 6c20 3d20 6469 7374 616e  ist_val = distan
-00026270: 6365 735b 6469 7374 616e 6365 5f69 6478  ces[distance_idx
-00026280: 5d20 2f20 7078 5f70 6572 5f6d 6d0a 0a20  ] / px_per_mm.. 
-00026290: 2020 2020 2020 2072 6574 7572 6e20 7b0a         return {.
-000262a0: 2020 2020 2020 2020 2020 2020 2264 6973              "dis
-000262b0: 7461 6e63 655f 7661 6c75 6522 3a20 6469  tance_value": di
-000262c0: 7374 5f76 616c 2c0a 2020 2020 2020 2020  st_val,.        
-000262d0: 2020 2020 2264 6973 7461 6e63 655f 7472      "distance_tr
-000262e0: 6176 656c 6c65 6422 3a20 6469 7374 5f74  avelled": dist_t
-000262f0: 7261 7665 6c6c 6564 2c0a 2020 2020 2020  ravelled,.      
-00026300: 2020 2020 2020 2274 696d 655f 7472 6176        "time_trav
-00026310: 656c 6c65 6422 3a20 7469 6d65 5f74 7261  elled": time_tra
-00026320: 7665 6c6c 6564 2c0a 2020 2020 2020 2020  velled,.        
-00026330: 2020 2020 2264 6973 7461 6e63 655f 696e      "distance_in
-00026340: 6465 7822 3a20 6469 7374 616e 6365 5f69  dex": distance_i
-00026350: 6478 2c0a 2020 2020 2020 2020 7d0a 0a20  dx,.        }.. 
-00026360: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00026370: 0a20 2020 2040 6e6a 6974 2822 2866 6c6f  .    @njit("(flo
-00026380: 6174 3332 5b3a 2c3a 5d2c 2066 6c6f 6174  at32[:,:], float
-00026390: 3332 5b3a 2c3a 5d2c 2069 6e74 3634 2922  32[:,:], int64)"
-000263a0: 290a 2020 2020 6465 6620 6c69 6e65 6172  ).    def linear
-000263b0: 5f66 7265 6368 6574 5f64 6973 7461 6e63  _frechet_distanc
-000263c0: 6528 0a20 2020 2020 2020 2078 3a20 6e70  e(.        x: np
-000263d0: 2e6e 6461 7272 6179 2c20 793a 206e 702e  .ndarray, y: np.
-000263e0: 6e64 6172 7261 792c 2073 616d 706c 653a  ndarray, sample:
-000263f0: 2069 6e74 203d 2031 3030 0a20 2020 2029   int = 100.    )
-00026400: 202d 3e20 666c 6f61 743a 0a20 2020 2020   -> float:.     
-00026410: 2020 2022 2222 0a20 2020 2020 2020 2043     """.        C
-00026420: 6f6d 7075 7465 2074 6865 204c 696e 6561  ompute the Linea
-00026430: 7220 4672 c3a9 6368 6574 2044 6973 7461  r Fr..chet Dista
-00026440: 6e63 6520 6265 7477 6565 6e20 7477 6f20  nce between two 
-00026450: 7472 616a 6563 746f 7269 6573 2e0a 0a20  trajectories... 
-00026460: 2020 2020 2020 2054 6865 2046 72c3 a963         The Fr..c
-00026470: 6865 7420 4469 7374 616e 6365 206d 6561  het Distance mea
-00026480: 7375 7265 7320 7468 6520 6469 7373 696d  sures the dissim
-00026490: 696c 6172 6974 7920 6265 7477 6565 6e20  ilarity between 
-000264a0: 7477 6f20 636f 6e74 696e 756f 7573 0a20  two continuous. 
-000264b0: 2020 2020 2020 2063 7572 7665 7320 6f72         curves or
-000264c0: 2074 7261 6a65 6374 6f72 6965 7320 7265   trajectories re
-000264d0: 7072 6573 656e 7465 6420 6173 2073 6571  presented as seq
-000264e0: 7565 6e63 6573 206f 6620 706f 696e 7473  uences of points
-000264f0: 2069 6e20 6120 322d 6469 6d65 6e73 696f   in a 2-dimensio
-00026500: 6e61 6c0a 2020 2020 2020 2020 7370 6163  nal.        spac
-00026510: 652e 0a0a 2020 2020 2020 2020 3a70 6172  e...        :par
-00026520: 616d 206e 6461 7272 6179 2064 6174 613a  am ndarray data:
-00026530: 2046 6972 7374 2032 4420 6172 7261 7920   First 2D array 
-00026540: 6f66 2073 697a 6520 6c65 6e28 6672 616d  of size len(fram
-00026550: 6573 2920 7265 7072 6573 656e 7469 6e67  es) representing
-00026560: 2062 6f64 792d 7061 7274 2063 6f6f 7264   body-part coord
-00026570: 696e 6174 6573 2078 2061 6e64 2079 2e0a  inates x and y..
-00026580: 2020 2020 2020 2020 3a70 6172 616d 206e          :param n
-00026590: 6461 7272 6179 2064 6174 613a 2053 6563  darray data: Sec
-000265a0: 6f6e 6420 3244 2061 7272 6179 206f 6620  ond 2D array of 
-000265b0: 7369 7a65 206c 656e 2866 7261 6d65 7329  size len(frames)
-000265c0: 2072 6570 7265 7365 6e74 696e 6720 626f   representing bo
-000265d0: 6479 2d70 6172 7420 636f 6f72 6469 6e61  dy-part coordina
-000265e0: 7465 7320 7820 616e 6420 792e 0a20 2020  tes x and y..   
-000265f0: 2020 2020 203a 7061 7261 6d20 696e 7420       :param int 
-00026600: 7361 6d70 6c65 3a20 5468 6520 646f 776e  sample: The down
-00026610: 7361 6d70 6c69 6e67 2066 6163 746f 7220  sampling factor 
-00026620: 666f 7220 7468 6520 7472 616a 6563 746f  for the trajecto
-00026630: 7269 6573 2028 6465 6661 756c 7420 6973  ries (default is
-00026640: 2031 3030 4966 2073 616d 706c 6520 3e20   100If sample > 
-00026650: 312c 2074 6865 2074 7261 6a65 6374 6f72  1, the trajector
-00026660: 6965 7320 6172 6520 646f 776e 7361 6d70  ies are downsamp
-00026670: 6c65 6420 6279 2073 656c 6563 7469 6e67  led by selecting
-00026680: 2065 7665 7279 2073 616d 706c 652d 7468   every sample-th
-00026690: 2070 6f69 6e74 2e0a 0a20 2020 2020 2020   point...       
-000266a0: 202e 2e20 6e6f 7465 3a3a 0a20 2020 2020   .. note::.     
-000266b0: 2020 2020 2020 536c 6967 6874 6c79 206d        Slightly m
-000266c0: 6f64 6966 6965 6420 6672 6f6d 2060 4a6f  odified from `Jo
-000266d0: c3a3 6f20 5061 756c 6f20 4669 6775 6569  ..o Paulo Figuei
-000266e0: 7261 203c 6874 7470 733a 2f2f 6769 7468  ra <https://gith
-000266f0: 7562 2e63 6f6d 2f6a 6f61 6f66 6967 2f64  ub.com/joaofig/d
-00026700: 6973 6372 6574 652d 6672 6563 6865 742f  iscrete-frechet/
-00026710: 626c 6f62 2f66 6635 3632 3965 3561 3433  blob/ff5629e5a43
-00026720: 6366 6164 3434 6435 6539 3632 6634 3130  cfad44d5e962f410
-00026730: 3564 6432 3563 3930 6239 3238 392f 6469  5dd25c90b9289/di
-00026740: 7374 616e 6365 732f 6469 7363 7265 7465  stances/discrete
-00026750: 2e70 7923 4c36 373e 605f 0a0a 2020 2020  .py#L67>`_..    
-00026760: 2020 2020 3a65 7861 6d70 6c65 3a0a 2020      :example:.  
-00026770: 2020 2020 2020 3e3e 3e20 7820 3d20 6e70        >>> x = np
-00026780: 2e72 616e 646f 6d2e 7261 6e64 696e 7428  .random.randint(
-00026790: 302c 2031 3030 2c20 2831 3030 3030 2c20  0, 100, (10000, 
-000267a0: 3229 292e 6173 7479 7065 286e 702e 666c  2)).astype(np.fl
-000267b0: 6f61 7433 3229 0a20 2020 2020 2020 203e  oat32).        >
-000267c0: 3e3e 2079 203d 206e 702e 7261 6e64 6f6d  >> y = np.random
-000267d0: 2e72 616e 6469 6e74 2830 2c20 3130 302c  .randint(0, 100,
-000267e0: 2028 3130 3030 302c 2032 2929 2e61 7374   (10000, 2)).ast
-000267f0: 7970 6528 6e70 2e66 6c6f 6174 3332 290a  ype(np.float32).
-00026800: 2020 2020 2020 2020 3e3e 3e20 6469 7374          >>> dist
-00026810: 616e 6365 203d 2047 656f 6d65 7472 794d  ance = GeometryM
-00026820: 6978 696e 2e6c 696e 6561 725f 6672 6563  ixin.linear_frec
-00026830: 6865 745f 6469 7374 616e 6365 2878 3d78  het_distance(x=x
-00026840: 2c20 793d 792c 2073 616d 706c 653d 3130  , y=y, sample=10
-00026850: 3029 0a0a 2020 2020 2020 2020 2222 220a  0)..        """.
-00026860: 2020 2020 2020 2020 6966 2073 616d 706c          if sampl
-00026870: 6520 3e20 313a 0a20 2020 2020 2020 2020  e > 1:.         
-00026880: 2020 2078 2c20 7920 3d20 785b 3a3a 7361     x, y = x[::sa
-00026890: 6d70 6c65 5d2c 2079 5b3a 3a73 616d 706c  mple], y[::sampl
-000268a0: 655d 0a20 2020 2020 2020 206e 5f70 2c20  e].        n_p, 
-000268b0: 6e5f 7120 3d20 782e 7368 6170 655b 305d  n_q = x.shape[0]
-000268c0: 2c20 792e 7368 6170 655b 305d 0a20 2020  , y.shape[0].   
-000268d0: 2020 2020 2063 6120 3d20 6e70 2e66 756c       ca = np.ful
-000268e0: 6c28 286e 5f70 2c20 6e5f 7129 2c20 302e  l((n_p, n_q), 0.
-000268f0: 3029 0a20 2020 2020 2020 2066 6f72 2069  0).        for i
-00026900: 2069 6e20 7072 616e 6765 286e 5f70 293a   in prange(n_p):
-00026910: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00026920: 206a 2069 6e20 7261 6e67 6528 6e5f 7129   j in range(n_q)
-00026930: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00026940: 2020 6420 3d20 785b 695d 202d 2079 5b6a    d = x[i] - y[j
-00026950: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00026960: 2020 6420 3d20 6e70 2e73 7172 7428 6e70    d = np.sqrt(np
-00026970: 2e64 6f74 2864 2c20 6429 290a 2020 2020  .dot(d, d)).    
-00026980: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00026990: 203e 2030 2061 6e64 206a 203e 2030 3a0a   > 0 and j > 0:.
-000269a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000269b0: 2020 2020 6361 5b69 2c20 6a5d 203d 206d      ca[i, j] = m
-000269c0: 6178 286d 696e 2863 615b 6920 2d20 312c  ax(min(ca[i - 1,
-000269d0: 206a 5d2c 2063 615b 6920 2d20 312c 206a   j], ca[i - 1, j
-000269e0: 202d 2031 5d2c 2063 615b 692c 206a 202d   - 1], ca[i, j -
-000269f0: 2031 5d29 2c20 6429 0a20 2020 2020 2020   1]), d).       
-00026a00: 2020 2020 2020 2020 2065 6c69 6620 6920           elif i 
-00026a10: 3e20 3020 616e 6420 6a20 3d3d 2030 3a0a  > 0 and j == 0:.
-00026a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026a30: 2020 2020 6361 5b69 2c20 6a5d 203d 206d      ca[i, j] = m
-00026a40: 6178 2863 615b 6920 2d20 312c 2030 5d2c  ax(ca[i - 1, 0],
-00026a50: 2064 290a 2020 2020 2020 2020 2020 2020   d).            
-00026a60: 2020 2020 656c 6966 2069 203d 3d20 3020      elif i == 0 
-00026a70: 616e 6420 6a20 3e20 303a 0a20 2020 2020  and j > 0:.     
-00026a80: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00026a90: 615b 692c 206a 5d20 3d20 6d61 7828 6361  a[i, j] = max(ca
-00026aa0: 5b30 2c20 6a20 2d20 315d 2c20 6429 0a20  [0, j - 1], d). 
-00026ab0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00026ac0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00026ad0: 2020 2020 2020 2020 2063 615b 692c 206a           ca[i, j
-00026ae0: 5d20 3d20 640a 2020 2020 2020 2020 7265  ] = d.        re
-00026af0: 7475 726e 2063 615b 6e5f 7020 2d20 312c  turn ca[n_p - 1,
-00026b00: 206e 5f71 202d 2031 5d0a 0a20 2020 2040   n_q - 1]..    @
-00026b10: 7374 6174 6963 6d65 7468 6f64 0a20 2020  staticmethod.   
-00026b20: 2064 6566 2073 696d 6261 5f72 6f69 5f74   def simba_roi_t
-00026b30: 6f5f 6765 6f6d 6574 7269 6573 280a 2020  o_geometries(.  
-00026b40: 2020 2020 2020 7265 6374 616e 676c 6573        rectangles
-00026b50: 5f64 663a 2070 642e 4461 7461 4672 616d  _df: pd.DataFram
-00026b60: 652c 0a20 2020 2020 2020 2063 6972 636c  e,.        circl
-00026b70: 6573 5f64 663a 2070 642e 4461 7461 4672  es_df: pd.DataFr
-00026b80: 616d 652c 0a20 2020 2020 2020 2070 6f6c  ame,.        pol
-00026b90: 7967 6f6e 735f 6466 3a20 7064 2e44 6174  ygons_df: pd.Dat
-00026ba0: 6146 7261 6d65 2c0a 2020 2020 2020 2020  aFrame,.        
-00026bb0: 636f 6c6f 723a 204f 7074 696f 6e61 6c5b  color: Optional[
-00026bc0: 626f 6f6c 5d20 3d20 4661 6c73 652c 0a20  bool] = False,. 
-00026bd0: 2020 2029 202d 3e20 6469 6374 3a0a 2020     ) -> dict:.  
-00026be0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00026bf0: 2020 436f 6e76 6572 7420 5369 6d42 4120    Convert SimBA 
-00026c00: 6461 7461 6672 616d 6573 2068 6f6c 6469  dataframes holdi
-00026c10: 6e67 2052 4f49 2067 656f 6d65 7472 6965  ng ROI geometrie
-00026c20: 7320 746f 206e 6573 7465 6420 6469 6374  s to nested dict
-00026c30: 696f 6e61 7279 2068 6f6c 6469 6e67 2053  ionary holding S
-00026c40: 6861 706c 6579 2070 6f6c 7967 6f6e 732e  hapley polygons.
-00026c50: 0a0a 2020 2020 2020 2020 3a65 7861 6d70  ..        :examp
-00026c60: 6c65 3a0a 2020 2020 2020 2020 3e3e 3e20  le:.        >>> 
-00026c70: 2363 6f6e 6669 675f 7061 7468 203d 2027  #config_path = '
-00026c80: 2f55 7365 7273 2f73 696d 6f6e 2f44 6573  /Users/simon/Des
-00026c90: 6b74 6f70 2f65 6e76 732f 7369 6d62 612f  ktop/envs/simba/
-00026ca0: 7472 6f75 626c 6573 686f 6f74 696e 672f  troubleshooting/
-00026cb0: 7370 6f6e 7465 6e6f 7573 5f61 6c74 6572  spontenous_alter
-00026cc0: 6e61 7469 6f6e 2f70 726f 6a65 6374 5f66  nation/project_f
-00026cd0: 6f6c 6465 722f 7072 6f6a 6563 745f 636f  older/project_co
-00026ce0: 6e66 6967 2e69 6e69 270a 2020 2020 2020  nfig.ini'.      
-00026cf0: 2020 3e3e 3e20 2363 6f6e 6669 6720 3d20    >>> #config = 
-00026d00: 436f 6e66 6967 5265 6164 6572 2863 6f6e  ConfigReader(con
-00026d10: 6669 675f 7061 7468 3d63 6f6e 6669 675f  fig_path=config_
-00026d20: 7061 7468 290a 2020 2020 2020 2020 3e3e  path).        >>
-00026d30: 3e20 2363 6f6e 6669 672e 7265 6164 5f72  > #config.read_r
-00026d40: 6f69 5f64 6174 6128 290a 2020 2020 2020  oi_data().      
-00026d50: 2020 3e3e 3e20 2347 656f 6d65 7472 794d    >>> #GeometryM
-00026d60: 6978 696e 2e73 696d 6261 5f72 6f69 5f74  ixin.simba_roi_t
-00026d70: 6f5f 6765 6f6d 6574 7269 6573 2872 6563  o_geometries(rec
-00026d80: 7461 6e67 6c65 735f 6466 3d63 6f6e 6669  tangles_df=confi
-00026d90: 672e 7265 6374 616e 676c 6573 5f64 662c  g.rectangles_df,
-00026da0: 2063 6972 636c 6573 5f64 663d 636f 6e66   circles_df=conf
-00026db0: 6967 2e63 6972 636c 6573 5f64 662c 2070  ig.circles_df, p
-00026dc0: 6f6c 7967 6f6e 735f 6466 3d63 6f6e 6669  olygons_df=confi
-00026dd0: 672e 706f 6c79 676f 6e5f 6466 290a 2020  g.polygon_df).  
-00026de0: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
-00026df0: 2020 2063 6865 636b 5f69 6e73 7461 6e63     check_instanc
-00026e00: 6528 0a20 2020 2020 2020 2020 2020 2073  e(.            s
-00026e10: 6f75 7263 653d 4765 6f6d 6574 7279 4d69  ource=GeometryMi
-00026e20: 7869 6e2e 7369 6d62 615f 726f 695f 746f  xin.simba_roi_to
-00026e30: 5f67 656f 6d65 7472 6965 732e 5f5f 6e61  _geometries.__na
-00026e40: 6d65 5f5f 2c0a 2020 2020 2020 2020 2020  me__,.          
-00026e50: 2020 696e 7374 616e 6365 3d72 6563 7461    instance=recta
-00026e60: 6e67 6c65 735f 6466 2c0a 2020 2020 2020  ngles_df,.      
-00026e70: 2020 2020 2020 6163 6365 7074 6564 5f74        accepted_t
-00026e80: 7970 6573 3d28 7064 2e44 6174 6146 7261  ypes=(pd.DataFra
-00026e90: 6d65 2c29 2c0a 2020 2020 2020 2020 290a  me,),.        ).
-00026ea0: 2020 2020 2020 2020 6368 6563 6b5f 696e          check_in
-00026eb0: 7374 616e 6365 280a 2020 2020 2020 2020  stance(.        
-00026ec0: 2020 2020 736f 7572 6365 3d47 656f 6d65      source=Geome
-00026ed0: 7472 794d 6978 696e 2e73 696d 6261 5f72  tryMixin.simba_r
-00026ee0: 6f69 5f74 6f5f 6765 6f6d 6574 7269 6573  oi_to_geometries
-00026ef0: 2e5f 5f6e 616d 655f 5f2c 0a20 2020 2020  .__name__,.     
-00026f00: 2020 2020 2020 2069 6e73 7461 6e63 653d         instance=
-00026f10: 6369 7263 6c65 735f 6466 2c0a 2020 2020  circles_df,.    
-00026f20: 2020 2020 2020 2020 6163 6365 7074 6564          accepted
-00026f30: 5f74 7970 6573 3d28 7064 2e44 6174 6146  _types=(pd.DataF
-00026f40: 7261 6d65 2c29 2c0a 2020 2020 2020 2020  rame,),.        
-00026f50: 290a 2020 2020 2020 2020 6368 6563 6b5f  ).        check_
-00026f60: 696e 7374 616e 6365 280a 2020 2020 2020  instance(.      
-00026f70: 2020 2020 2020 736f 7572 6365 3d47 656f        source=Geo
-00026f80: 6d65 7472 794d 6978 696e 2e73 696d 6261  metryMixin.simba
-00026f90: 5f72 6f69 5f74 6f5f 6765 6f6d 6574 7269  _roi_to_geometri
-00026fa0: 6573 2e5f 5f6e 616d 655f 5f2c 0a20 2020  es.__name__,.   
-00026fb0: 2020 2020 2020 2020 2069 6e73 7461 6e63           instanc
-00026fc0: 653d 706f 6c79 676f 6e73 5f64 662c 0a20  e=polygons_df,. 
-00026fd0: 2020 2020 2020 2020 2020 2061 6363 6570             accep
-00026fe0: 7465 645f 7479 7065 733d 2870 642e 4461  ted_types=(pd.Da
-00026ff0: 7461 4672 616d 652c 292c 0a20 2020 2020  taFrame,),.     
-00027000: 2020 2029 0a20 2020 2020 2020 2066 6f72     ).        for
-00027010: 2069 2069 6e20 5b72 6563 7461 6e67 6c65   i in [rectangle
-00027020: 735f 6466 2c20 6369 7263 6c65 735f 6466  s_df, circles_df
-00027030: 2c20 706f 6c79 676f 6e73 5f64 665d 3a0a  , polygons_df]:.
-00027040: 2020 2020 2020 2020 2020 2020 6368 6563              chec
-00027050: 6b5f 7468 6174 5f63 6f6c 756d 6e5f 6578  k_that_column_ex
-00027060: 6973 7428 0a20 2020 2020 2020 2020 2020  ist(.           
-00027070: 2020 2020 2064 663d 692c 2063 6f6c 756d       df=i, colum
-00027080: 6e5f 6e61 6d65 3d5b 2256 6964 656f 222c  n_name=["Video",
-00027090: 2022 4e61 6d65 222c 2022 5461 6773 222c   "Name", "Tags",
-000270a0: 2022 436f 6c6f 7220 4247 5222 5d2c 2066   "Color BGR"], f
-000270b0: 696c 655f 6e61 6d65 3d22 220a 2020 2020  ile_name="".    
-000270c0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000270d0: 2020 7265 7375 6c74 735f 726f 692c 2072    results_roi, r
-000270e0: 6573 756c 7473 5f63 6c72 203d 207b 7d2c  esults_clr = {},
-000270f0: 207b 7d0a 2020 2020 2020 2020 666f 7220   {}.        for 
-00027100: 7669 6465 6f5f 6e61 6d65 2069 6e20 7265  video_name in re
-00027110: 6374 616e 676c 6573 5f64 665b 2256 6964  ctangles_df["Vid
-00027120: 656f 225d 2e75 6e69 7175 6528 293a 0a20  eo"].unique():. 
-00027130: 2020 2020 2020 2020 2020 2069 6620 7669             if vi
-00027140: 6465 6f5f 6e61 6d65 206e 6f74 2069 6e20  deo_name not in 
-00027150: 7265 7375 6c74 735f 726f 692e 6b65 7973  results_roi.keys
-00027160: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00027170: 2020 2020 7265 7375 6c74 735f 726f 695b      results_roi[
-00027180: 7669 6465 6f5f 6e61 6d65 5d20 3d20 7b7d  video_name] = {}
-00027190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000271a0: 2072 6573 756c 7473 5f63 6c72 5b76 6964   results_clr[vid
-000271b0: 656f 5f6e 616d 655d 203d 207b 7d0a 2020  eo_name] = {}.  
-000271c0: 2020 2020 2020 2020 2020 7669 6465 6f5f            video_
-000271d0: 7368 6170 6573 203d 2072 6563 7461 6e67  shapes = rectang
-000271e0: 6c65 735f 6466 5b5b 2254 6167 7322 2c20  les_df[["Tags", 
-000271f0: 224e 616d 6522 2c20 2243 6f6c 6f72 2042  "Name", "Color B
-00027200: 4752 225d 5d5b 0a20 2020 2020 2020 2020  GR"]][.         
-00027210: 2020 2020 2020 2072 6563 7461 6e67 6c65         rectangle
-00027220: 735f 6466 5b22 5669 6465 6f22 5d20 3d3d  s_df["Video"] ==
-00027230: 2076 6964 656f 5f6e 616d 650a 2020 2020   video_name.    
-00027240: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-00027250: 2020 2020 2020 666f 7220 7368 6170 655f        for shape_
-00027260: 6e61 6d65 2069 6e20 7669 6465 6f5f 7368  name in video_sh
-00027270: 6170 6573 5b22 4e61 6d65 225d 2e75 6e69  apes["Name"].uni
-00027280: 7175 6528 293a 0a20 2020 2020 2020 2020  que():.         
-00027290: 2020 2020 2020 2073 6861 7065 5f64 6174         shape_dat
-000272a0: 6120 3d20 7669 6465 6f5f 7368 6170 6573  a = video_shapes
-000272b0: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
-000272c0: 2020 2020 2020 7669 6465 6f5f 7368 6170        video_shap
-000272d0: 6573 5b22 4e61 6d65 225d 203d 3d20 7368  es["Name"] == sh
-000272e0: 6170 655f 6e61 6d65 0a20 2020 2020 2020  ape_name.       
-000272f0: 2020 2020 2020 2020 205d 2e72 6573 6574           ].reset
-00027300: 5f69 6e64 6578 2864 726f 703d 5472 7565  _index(drop=True
-00027310: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00027320: 2020 7461 6773 2c20 6e61 6d65 203d 2028    tags, name = (
-00027330: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027340: 2020 2020 206c 6973 7428 7368 6170 655f       list(shape_
-00027350: 6461 7461 5b22 5461 6773 225d 2e76 616c  data["Tags"].val
-00027360: 7565 735b 305d 2e76 616c 7565 7328 2929  ues[0].values())
-00027370: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00027380: 2020 2020 2020 7368 6170 655f 6461 7461        shape_data
-00027390: 5b22 4e61 6d65 225d 2e76 616c 7565 735b  ["Name"].values[
-000273a0: 305d 2c0a 2020 2020 2020 2020 2020 2020  0],.            
-000273b0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-000273c0: 2020 2020 2020 7265 7375 6c74 735f 726f        results_ro
-000273d0: 695b 7669 6465 6f5f 6e61 6d65 5d5b 6e61  i[video_name][na
-000273e0: 6d65 5d20 3d20 506f 6c79 676f 6e28 0a20  me] = Polygon(. 
-000273f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027400: 2020 2050 6f6c 7967 6f6e 2874 6167 7329     Polygon(tags)
-00027410: 2e63 6f6e 7665 785f 6875 6c6c 2e65 7874  .convex_hull.ext
-00027420: 6572 696f 722e 636f 6f72 6473 0a20 2020  erior.coords.   
-00027430: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00027440: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00027450: 6573 756c 7473 5f63 6c72 5b76 6964 656f  esults_clr[video
-00027460: 5f6e 616d 655d 5b6e 616d 655d 203d 2073  _name][name] = s
-00027470: 6861 7065 5f64 6174 615b 2243 6f6c 6f72  hape_data["Color
-00027480: 2042 4752 225d 2e76 616c 7565 735b 305d   BGR"].values[0]
-00027490: 0a20 2020 2020 2020 2066 6f72 2076 6964  .        for vid
-000274a0: 656f 5f6e 616d 6520 696e 2070 6f6c 7967  eo_name in polyg
-000274b0: 6f6e 735f 6466 5b22 5669 6465 6f22 5d2e  ons_df["Video"].
-000274c0: 756e 6971 7565 2829 3a0a 2020 2020 2020  unique():.      
-000274d0: 2020 2020 2020 6966 2076 6964 656f 5f6e        if video_n
-000274e0: 616d 6520 6e6f 7420 696e 2072 6573 756c  ame not in resul
-000274f0: 7473 5f72 6f69 2e6b 6579 7328 293a 0a20  ts_roi.keys():. 
-00027500: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00027510: 6573 756c 7473 5f72 6f69 5b76 6964 656f  esults_roi[video
-00027520: 5f6e 616d 655d 203d 207b 7d0a 2020 2020  _name] = {}.    
-00027530: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00027540: 6c74 735f 636c 725b 7669 6465 6f5f 6e61  lts_clr[video_na
-00027550: 6d65 5d20 3d20 7b7d 0a20 2020 2020 2020  me] = {}.       
-00027560: 2020 2020 2076 6964 656f 5f73 6861 7065       video_shape
-00027570: 7320 3d20 706f 6c79 676f 6e73 5f64 665b  s = polygons_df[
-00027580: 5b22 5461 6773 222c 2022 4e61 6d65 222c  ["Tags", "Name",
-00027590: 2022 436f 6c6f 7220 4247 5222 5d5d 5b0a   "Color BGR"]][.
-000275a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000275b0: 706f 6c79 676f 6e73 5f64 665b 2256 6964  polygons_df["Vid
-000275c0: 656f 225d 203d 3d20 7669 6465 6f5f 6e61  eo"] == video_na
-000275d0: 6d65 0a20 2020 2020 2020 2020 2020 205d  me.            ]
-000275e0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-000275f0: 2073 6861 7065 5f6e 616d 6520 696e 2076   shape_name in v
-00027600: 6964 656f 5f73 6861 7065 735b 224e 616d  ideo_shapes["Nam
-00027610: 6522 5d2e 756e 6971 7565 2829 3a0a 2020  e"].unique():.  
-00027620: 2020 2020 2020 2020 2020 2020 2020 7368                sh
-00027630: 6170 655f 6461 7461 203d 2076 6964 656f  ape_data = video
-00027640: 5f73 6861 7065 735b 0a20 2020 2020 2020  _shapes[.       
-00027650: 2020 2020 2020 2020 2020 2020 2076 6964               vid
-00027660: 656f 5f73 6861 7065 735b 224e 616d 6522  eo_shapes["Name"
-00027670: 5d20 3d3d 2073 6861 7065 5f6e 616d 650a  ] == shape_name.
-00027680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027690: 5d2e 7265 7365 745f 696e 6465 7828 6472  ].reset_index(dr
-000276a0: 6f70 3d54 7275 6529 0a20 2020 2020 2020  op=True).       
-000276b0: 2020 2020 2020 2020 2074 6167 732c 206e           tags, n
-000276c0: 616d 6520 3d20 280a 2020 2020 2020 2020  ame = (.        
-000276d0: 2020 2020 2020 2020 2020 2020 6c69 7374              list
-000276e0: 2873 6861 7065 5f64 6174 615b 2254 6167  (shape_data["Tag
-000276f0: 7322 5d2e 7661 6c75 6573 5b30 5d2e 7661  s"].values[0].va
-00027700: 6c75 6573 2829 292c 0a20 2020 2020 2020  lues()),.       
-00027710: 2020 2020 2020 2020 2020 2020 2073 6861               sha
-00027720: 7065 5f64 6174 615b 224e 616d 6522 5d2e  pe_data["Name"].
-00027730: 7661 6c75 6573 5b30 5d2c 0a20 2020 2020  values[0],.     
-00027740: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00027750: 2020 2020 2020 2020 2020 2020 2072 6573               res
-00027760: 756c 7473 5f72 6f69 5b76 6964 656f 5f6e  ults_roi[video_n
-00027770: 616d 655d 5b6e 616d 655d 203d 2050 6f6c  ame][name] = Pol
-00027780: 7967 6f6e 280a 2020 2020 2020 2020 2020  ygon(.          
-00027790: 2020 2020 2020 2020 2020 506f 6c79 676f            Polygo
-000277a0: 6e28 7461 6773 292e 636f 6e76 6578 5f68  n(tags).convex_h
-000277b0: 756c 6c2e 6578 7465 7269 6f72 2e63 6f6f  ull.exterior.coo
-000277c0: 7264 730a 2020 2020 2020 2020 2020 2020  rds.            
-000277d0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-000277e0: 2020 2020 2020 7265 7375 6c74 735f 636c        results_cl
-000277f0: 725b 7669 6465 6f5f 6e61 6d65 5d5b 6e61  r[video_name][na
-00027800: 6d65 5d20 3d20 7368 6170 655f 6461 7461  me] = shape_data
-00027810: 5b22 436f 6c6f 7220 4247 5222 5d2e 7661  ["Color BGR"].va
-00027820: 6c75 6573 5b30 5d0a 2020 2020 2020 2020  lues[0].        
-00027830: 666f 7220 7669 6465 6f5f 6e61 6d65 2069  for video_name i
-00027840: 6e20 6369 7263 6c65 735f 6466 5b22 5669  n circles_df["Vi
-00027850: 6465 6f22 5d2e 756e 6971 7565 2829 3a0a  deo"].unique():.
-00027860: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-00027870: 6964 656f 5f6e 616d 6520 6e6f 7420 696e  ideo_name not in
-00027880: 2072 6573 756c 7473 5f72 6f69 2e6b 6579   results_roi.key
-00027890: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-000278a0: 2020 2020 2072 6573 756c 7473 5f72 6f69       results_roi
-000278b0: 5b76 6964 656f 5f6e 616d 655d 203d 207b  [video_name] = {
-000278c0: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-000278d0: 2020 7265 7375 6c74 735f 636c 725b 7669    results_clr[vi
-000278e0: 6465 6f5f 6e61 6d65 5d20 3d20 7b7d 0a20  deo_name] = {}. 
-000278f0: 2020 2020 2020 2020 2020 2076 6964 656f             video
-00027900: 5f73 6861 7065 7320 3d20 6369 7263 6c65  _shapes = circle
-00027910: 735f 6466 5b5b 2254 6167 7322 2c20 224e  s_df[["Tags", "N
-00027920: 616d 6522 2c20 2243 6f6c 6f72 2042 4752  ame", "Color BGR
-00027930: 225d 5d5b 0a20 2020 2020 2020 2020 2020  "]][.           
-00027940: 2020 2020 2063 6972 636c 6573 5f64 665b       circles_df[
-00027950: 2256 6964 656f 225d 203d 3d20 7669 6465  "Video"] == vide
-00027960: 6f5f 6e61 6d65 0a20 2020 2020 2020 2020  o_name.         
-00027970: 2020 205d 0a20 2020 2020 2020 2020 2020     ].           
-00027980: 2066 6f72 2073 6861 7065 5f6e 616d 6520   for shape_name 
-00027990: 696e 2076 6964 656f 5f73 6861 7065 735b  in video_shapes[
-000279a0: 224e 616d 6522 5d2e 756e 6971 7565 2829  "Name"].unique()
-000279b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000279c0: 2020 7368 6170 655f 6461 7461 203d 2076    shape_data = v
-000279d0: 6964 656f 5f73 6861 7065 735b 0a20 2020  ideo_shapes[.   
-000279e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000279f0: 2076 6964 656f 5f73 6861 7065 735b 224e   video_shapes["N
-00027a00: 616d 6522 5d20 3d3d 2073 6861 7065 5f6e  ame"] == shape_n
-00027a10: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
-00027a20: 2020 2020 5d2e 7265 7365 745f 696e 6465      ].reset_inde
-00027a30: 7828 6472 6f70 3d54 7275 6529 0a20 2020  x(drop=True).   
-00027a40: 2020 2020 2020 2020 2020 2020 2074 6167               tag
-00027a50: 732c 206e 616d 652c 2072 6164 6975 7320  s, name, radius 
-00027a60: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
-00027a70: 2020 2020 2020 2020 6c69 7374 2873 6861          list(sha
-00027a80: 7065 5f64 6174 615b 2254 6167 7322 5d2e  pe_data["Tags"].
-00027a90: 7661 6c75 6573 5b30 5d2e 7661 6c75 6573  values[0].values
-00027aa0: 2829 292c 0a20 2020 2020 2020 2020 2020  ()),.           
-00027ab0: 2020 2020 2020 2020 2073 6861 7065 5f64           shape_d
-00027ac0: 6174 615b 224e 616d 6522 5d2e 7661 6c75  ata["Name"].valu
-00027ad0: 6573 5b30 5d2c 0a20 2020 2020 2020 2020  es[0],.         
-00027ae0: 2020 2020 2020 2020 2020 2073 6861 7065             shape
-00027af0: 5f64 6174 615b 2272 6164 6975 7322 5d2e  _data["radius"].
-00027b00: 7661 6c75 6573 5b30 5d2c 0a20 2020 2020  values[0],.     
-00027b10: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00027b20: 2020 2020 2020 2020 2020 2020 2072 6573               res
-00027b30: 756c 7473 5f72 6f69 5b76 6964 656f 5f6e  ults_roi[video_n
-00027b40: 616d 655d 5b6e 616d 655d 203d 2050 6f69  ame][name] = Poi
-00027b50: 6e74 2874 6167 735b 2243 656e 7465 7220  nt(tags["Center 
-00027b60: 7461 6722 5d29 2e62 7566 6665 7228 0a20  tag"]).buffer(. 
-00027b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027b80: 2020 2064 6973 7461 6e63 653d 7261 6469     distance=radi
-00027b90: 7573 0a20 2020 2020 2020 2020 2020 2020  us.             
-00027ba0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-00027bb0: 2020 2020 2072 6573 756c 7473 5f63 6c72       results_clr
-00027bc0: 5b76 6964 656f 5f6e 616d 655d 5b6e 616d  [video_name][nam
-00027bd0: 655d 203d 2073 6861 7065 5f64 6174 615b  e] = shape_data[
-00027be0: 2243 6f6c 6f72 2042 4752 225d 2e76 616c  "Color BGR"].val
-00027bf0: 7565 735b 305d 0a20 2020 2020 2020 2069  ues[0].        i
-00027c00: 6620 6e6f 7420 636f 6c6f 723a 0a20 2020  f not color:.   
-00027c10: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00027c20: 7265 7375 6c74 735f 726f 692c 204e 6f6e  results_roi, Non
-00027c30: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
-00027c40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00027c50: 726e 2072 6573 756c 7473 5f72 6f69 2c20  rn results_roi, 
-00027c60: 7265 7375 6c74 735f 636c 720a 0a20 2020  results_clr..   
-00027c70: 2040 7374 6174 6963 6d65 7468 6f64 0a20   @staticmethod. 
-00027c80: 2020 2064 6566 2066 696c 7465 725f 6c6f     def filter_lo
-00027c90: 775f 705f 6270 735f 666f 725f 7368 6170  w_p_bps_for_shap
-00027ca0: 6573 2878 3a20 6e70 2e6e 6461 7272 6179  es(x: np.ndarray
-00027cb0: 2c20 703a 206e 702e 6e64 6172 7261 792c  , p: np.ndarray,
-00027cc0: 2074 6872 6573 686f 6c64 3a20 666c 6f61   threshold: floa
-00027cd0: 7429 3a0a 2020 2020 2020 2020 2222 220a  t):.        """.
-00027ce0: 2020 2020 2020 2020 4669 6c74 6572 2062          Filter b
-00027cf0: 6f64 792d 7061 7274 2064 6174 6120 666f  ody-part data fo
-00027d00: 7220 6765 6f6d 6574 7279 2063 6f6e 7374  r geometry const
-00027d10: 7275 6374 696f 6e20 7768 696c 6520 6d61  ruction while ma
-00027d20: 696e 7461 696e 696e 6720 7661 6c69 6420  intaining valid 
-00027d30: 6765 6f6d 6574 7279 2061 7272 6179 732e  geometry arrays.
-00027d40: 0a0a 2020 2020 2020 2020 4861 7669 6e67  ..        Having
-00027d50: 2061 2033 4420 6172 7261 7920 7265 7072   a 3D array repr
-00027d60: 6573 656e 7469 6e67 2062 6f64 792d 7061  esenting body-pa
-00027d70: 7274 7320 6163 726f 7373 2074 696d 652c  rts across time,
-00027d80: 2061 6e64 2061 2073 6563 6f6e 6420 3344   and a second 3D
-00027d90: 2061 7272 6179 2072 6570 7265 7365 6e74   array represent
-00027da0: 696e 6720 7072 6f62 6162 696c 6974 6965  ing probabilitie
-00027db0: 7320 6f66 2074 686f 7365 0a20 2020 2020  s of those.     
-00027dc0: 2020 2062 6f64 792d 7061 7274 7320 6163     body-parts ac
-00027dd0: 726f 7373 2074 696d 652c 2077 6520 7761  ross time, we wa
-00027de0: 6e74 2074 6f20 2272 656d 6f76 6522 2062  nt to "remove" b
-00027df0: 6f64 792d 7061 7274 7320 7769 7468 206c  ody-parts with l
-00027e00: 6f77 2064 6574 6563 7469 6f6e 2070 726f  ow detection pro
-00027e10: 6261 6269 6c69 7469 6573 2077 6869 6c73  babilities whils
-00027e20: 7420 616c 736f 206b 6565 7069 6e67 2074  t also keeping t
-00027e30: 6865 2061 7272 6179 2073 697a 6573 0a20  he array sizes. 
-00027e40: 2020 2020 2020 2069 6e74 6163 7420 616e         intact an
-00027e50: 6420 7375 6974 6162 6c65 2066 6f72 2067  d suitable for g
-00027e60: 656f 6d65 7472 7920 636f 6e73 7472 7563  eometry construc
-00027e70: 7469 6f6e 2e20 546f 2064 6f20 7468 6973  tion. To do this
-00027e80: 2c20 7765 2066 696e 6420 626f 6479 2d70  , we find body-p
-00027e90: 6172 7473 2077 6974 6820 6465 7465 6374  arts with detect
-00027ea0: 696f 6e20 7072 6f62 6162 696c 6974 6965  ion probabilitie
-00027eb0: 7320 6265 6c6f 7720 7468 6520 7468 7265  s below the thre
-00027ec0: 7368 6f6c 642c 2061 6e64 2072 6570 6c61  shold, and repla
-00027ed0: 6365 2074 6865 7365 2077 6974 6820 6120  ce these with a 
-00027ee0: 626f 6479 2d70 6172 740a 2020 2020 2020  body-part.      
-00027ef0: 2020 7468 6174 2064 6f65 736e 2774 2066    that doesn't f
-00027f00: 616c 6c20 6265 6c6f 7720 7468 6520 6465  all below the de
-00027f10: 7465 6374 696f 6e20 7072 6f62 6162 696c  tection probabil
-00027f20: 6974 7920 7468 7265 7368 6f6c 6420 7769  ity threshold wi
-00027f30: 7468 696e 2074 6865 2073 616d 6520 6672  thin the same fr
-00027f40: 616d 652e 2048 6f77 6576 6572 2c20 746f  ame. However, to
-00027f50: 2063 6f6e 7374 7275 6374 2061 2067 656f   construct a geo
-00027f60: 6d65 7472 792c 2077 6520 6e65 6564 203e  metry, we need >
-00027f70: 3d20 3320 756e 6971 7565 206b 6579 2d70  = 3 unique key-p
-00027f80: 6f69 6e74 206c 6f63 6174 696f 6e73 2e0a  oint locations..
-00027f90: 2020 2020 2020 2020 5468 7573 2c20 6e6f          Thus, no
-00027fa0: 2073 7562 7374 6974 7574 696f 6e20 6361   substitution ca
-00027fb0: 6e20 6265 206d 6164 6520 746f 2077 6865  n be made to whe
-00027fc0: 6e20 7468 6572 6520 6172 6520 6c65 7373  n there are less
-00027fd0: 2074 6861 6e20 7468 7265 6520 756e 6971   than three uniq
-00027fe0: 7565 2062 6f64 792d 7061 7274 206c 6f63  ue body-part loc
-00027ff0: 6174 696f 6e73 2077 6974 6869 6e20 6120  ations within a 
-00028000: 6672 616d 6520 7468 6174 2066 616c 6c73  frame that falls
-00028010: 2061 626f 7665 2074 6865 2074 6872 6573   above the thres
-00028020: 686f 6c64 2e0a 0a20 2020 2020 2020 203a  hold...        :
-00028030: 6578 616d 706c 653a 0a20 2020 2020 2020  example:.       
-00028040: 203e 3e3e 2078 203d 206e 702e 7261 6e64   >>> x = np.rand
-00028050: 6f6d 2e72 616e 6469 6e74 2830 2c20 3530  om.randint(0, 50
-00028060: 302c 2028 3138 3030 302c 2037 2c20 3229  0, (18000, 7, 2)
-00028070: 290a 2020 2020 2020 2020 3e3e 3e20 7020  ).        >>> p 
-00028080: 3d20 6e70 2e72 616e 646f 6d2e 7261 6e64  = np.random.rand
-00028090: 6f6d 2873 697a 653d 2831 3830 3030 2c20  om(size=(18000, 
-000280a0: 372c 2031 2929 0a20 2020 2020 2020 203e  7, 1)).        >
-000280b0: 3e3e 2078 203d 2047 656f 6d65 7472 794d  >> x = GeometryM
-000280c0: 6978 696e 2e66 696c 7465 725f 6c6f 775f  ixin.filter_low_
-000280d0: 705f 6270 735f 666f 725f 7368 6170 6573  p_bps_for_shapes
-000280e0: 2878 3d78 2c20 703d 702c 2074 6872 6573  (x=x, p=p, thres
-000280f0: 686f 6c64 3d30 2e31 290a 2020 2020 2020  hold=0.1).      
-00028100: 2020 3e3e 3e20 7820 3d20 782e 7265 7368    >>> x = x.resh
-00028110: 6170 6528 782e 7368 6170 655b 305d 2c20  ape(x.shape[0], 
-00028120: 696e 7428 782e 7368 6170 655b 315d 202a  int(x.shape[1] *
-00028130: 2032 2929 0a20 2020 2020 2020 2022 2222   2)).        """
-00028140: 0a0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
-00028150: 7320 3d20 6e70 2e63 6f70 7928 7829 0a20  s = np.copy(x). 
-00028160: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00028170: 7261 6e67 6528 782e 7368 6170 655b 305d  range(x.shape[0]
-00028180: 293a 0a20 2020 2020 2020 2020 2020 2062  ):.            b
-00028190: 656c 6f77 5f70 5f69 6478 203d 206e 702e  elow_p_idx = np.
-000281a0: 6172 6777 6865 7265 2870 5b69 5d2e 666c  argwhere(p[i].fl
-000281b0: 6174 7465 6e28 2920 3c20 7468 7265 7368  atten() < thresh
-000281c0: 6f6c 6429 2e66 6c61 7474 656e 2829 0a20  old).flatten(). 
-000281d0: 2020 2020 2020 2020 2020 2061 626f 7665             above
-000281e0: 5f70 5f69 6478 203d 206e 702e 6172 6777  _p_idx = np.argw
-000281f0: 6865 7265 2870 5b69 5d2e 666c 6174 7465  here(p[i].flatte
-00028200: 6e28 2920 3e3d 2074 6872 6573 686f 6c64  n() >= threshold
-00028210: 292e 666c 6174 7465 6e28 290a 2020 2020  ).flatten().    
-00028220: 2020 2020 2020 2020 6966 2028 6265 6c6f          if (belo
-00028230: 775f 705f 6964 782e 7368 6170 655b 305d  w_p_idx.shape[0]
-00028240: 203e 2030 2920 616e 6420 2861 626f 7665   > 0) and (above
-00028250: 5f70 5f69 6478 2e73 6861 7065 5b30 5d20  _p_idx.shape[0] 
-00028260: 3e3d 2033 293a 0a20 2020 2020 2020 2020  >= 3):.         
-00028270: 2020 2020 2020 2066 6f72 206a 2069 6e20         for j in 
-00028280: 6265 6c6f 775f 705f 6964 783a 0a20 2020  below_p_idx:.   
-00028290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000282a0: 206e 6577 5f76 616c 203d 2078 5b69 5d5b   new_val = x[i][
-000282b0: 6162 6f76 655f 705f 6964 785b 305d 5d0a  above_p_idx[0]].
-000282c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000282d0: 2020 2020 7265 7375 6c74 735b 695d 5b6a      results[i][j
-000282e0: 5d20 3d20 6e65 775f 7661 6c0a 2020 2020  ] = new_val.    
-000282f0: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-00028300: 7473 0a0a 0a23 2064 6174 6120 3d20 6e70  ts...# data = np
-00028310: 2e61 7272 6179 285b 5b5b 3336 342c 2033  .array([[[364, 3
-00028320: 3038 5d2c 205b 3338 332c 2033 3233 5d2c  08], [383, 323],
-00028330: 205b 3430 332c 2033 3335 5d2c 205b 3432   [403, 335], [42
-00028340: 332c 2033 3531 5d5d 2c0a 2320 2020 2020  3, 351]],.#     
-00028350: 2020 2020 2020 2020 2020 2020 205b 5b33               [[3
-00028360: 3536 2c20 3330 375d 2c20 5b33 3736 2c20  56, 307], [376, 
-00028370: 3331 395d 2c20 5b33 3936 2c20 3333 315d  319], [396, 331]
-00028380: 2c20 5b34 3139 2c20 3334 375d 5d2c 0a23  , [419, 347]],.#
-00028390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000283a0: 2020 5b5b 3336 342c 2033 3038 5d2c 205b    [[364, 308], [
-000283b0: 3338 332c 2033 3233 5d2c 205b 3430 332c  383, 323], [403,
-000283c0: 2033 3335 5d2c 205b 3432 332c 2033 3531   335], [423, 351
-000283d0: 5d5d 2c0a 2320 2020 2020 2020 2020 2020  ]],.#           
-000283e0: 2020 2020 2020 205b 5b33 3634 2c20 3330         [[364, 30
-000283f0: 385d 2c20 5b33 2c20 3332 335d 2c20 5b34  8], [3, 323], [4
-00028400: 3033 2c20 3333 355d 2c20 5b34 3233 2c20  03, 335], [423, 
-00028410: 3335 315d 5d2c 0a23 2020 2020 2020 2020  351]],.#        
-00028420: 2020 2020 2020 2020 2020 5b5b 3336 342c            [[364,
-00028430: 2033 3038 5d2c 205b 3338 332c 2033 3233   308], [383, 323
-00028440: 5d2c 205b 3534 2c20 3333 355d 2c20 5b34  ], [54, 335], [4
-00028450: 3233 2c20 3335 315d 5d2c 0a23 2020 2020  23, 351]],.#    
-00028460: 2020 2020 2020 2020 2020 2020 2020 5b5b                [[
-00028470: 3132 2c20 3330 385d 2c20 5b33 3833 2c20  12, 308], [383, 
-00028480: 3334 5d2c 205b 3430 332c 2033 3335 5d2c  34], [403, 335],
-00028490: 205b 3432 332c 2033 3531 5d5d 2c0a 2320   [423, 351]],.# 
-000284a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000284b0: 205b 5b33 3634 2c20 3330 385d 2c20 5b33   [[364, 308], [3
-000284c0: 3833 2c20 3332 335d 2c20 5b34 3033 2c20  83, 323], [403, 
-000284d0: 3333 355d 2c20 5b31 3030 2c20 3335 315d  335], [100, 351]
-000284e0: 5d5d 290a 2320 4765 6f6d 6574 7279 4d69  ]]).# GeometryMi
-000284f0: 7869 6e28 292e 6d75 6c74 6966 7261 6d65  xin().multiframe
-00028500: 5f62 6f64 7970 6172 7473 5f74 6f5f 706f  _bodyparts_to_po
-00028510: 6c79 676f 6e28 6461 7461 3d64 6174 6129  lygon(data=data)
-00028520: 0a0a 230a 2320 706f 6c79 676f 6e5f 3120  ..#.# polygon_1 
-00028530: 3d20 4765 6f6d 6574 7279 4d69 7869 6e28  = GeometryMixin(
-00028540: 292e 626f 6479 7061 7274 735f 746f 5f70  ).bodyparts_to_p
-00028550: 6f6c 7967 6f6e 286e 702e 6172 7261 7928  olygon(np.array(
-00028560: 5b5b 3336 342c 2033 3038 5d2c 5b33 3833  [[364, 308],[383
-00028570: 2c20 3332 335d 2c5b 3430 332c 2033 3335  , 323],[403, 335
-00028580: 5d2c 5b34 3233 2c20 3335 315d 5d29 290a  ],[423, 351]])).
-00028590: 2320 706f 6c79 676f 6e5f 3220 3d20 4765  # polygon_2 = Ge
-000285a0: 6f6d 6574 7279 4d69 7869 6e28 292e 626f  ometryMixin().bo
-000285b0: 6479 7061 7274 735f 746f 5f70 6f6c 7967  dyparts_to_polyg
-000285c0: 6f6e 286e 702e 6172 7261 7928 5b5b 3335  on(np.array([[35
-000285d0: 362c 2033 3037 5d2c 5b33 3736 2c20 3331  6, 307],[376, 31
-000285e0: 395d 2c5b 3339 362c 2033 3331 5d2c 5b34  9],[396, 331],[4
-000285f0: 3139 2c20 3334 375d 5d29 290a 2320 706f  19, 347]])).# po
-00028600: 6c79 676f 6e5f 3120 3d20 5b70 6f6c 7967  lygon_1 = [polyg
-00028610: 6f6e 5f31 2066 6f72 2078 2069 6e20 7261  on_1 for x in ra
-00028620: 6e67 6528 3130 3029 5d0a 2320 706f 6c79  nge(100)].# poly
-00028630: 676f 6e5f 3220 3d20 5b70 6f6c 7967 6f6e  gon_2 = [polygon
-00028640: 5f32 2066 6f72 2078 2069 6e20 7261 6e67  _2 for x in rang
-00028650: 6528 3130 3029 5d0a 2320 6461 7461 203d  e(100)].# data =
-00028660: 206e 702e 636f 6c75 6d6e 5f73 7461 636b   np.column_stack
-00028670: 2828 706f 6c79 676f 6e5f 312c 2070 6f6c  ((polygon_1, pol
-00028680: 7967 6f6e 5f32 2929 0a23 2047 656f 6d65  ygon_2)).# Geome
-00028690: 7472 794d 6978 696e 2e63 6f6d 7075 7465  tryMixin.compute
-000286a0: 5f70 6374 5f73 6861 7065 5f6f 7665 726c  _pct_shape_overl
-000286b0: 6170 2873 6861 7065 733d 6461 7461 290a  ap(shapes=data).
-000286c0: 230a 230a 230a 2320 6461 7461 203d 206e  #.#.#.# data = n
-000286d0: 702e 6172 7261 795f 7370 6c69 7428 6461  p.array_split(da
-000286e0: 7461 2c20 3829 0a23 0a23 0a23 0a23 2072  ta, 8).#.#.#.# r
-000286f0: 6573 756c 7473 203d 2047 656f 6d65 7472  esults = Geometr
-00028700: 794d 6978 696e 2829 2e6d 756c 7469 6672  yMixin().multifr
-00028710: 616d 655f 636f 6d70 7574 655f 7063 745f  ame_compute_pct_
-00028720: 7368 6170 655f 6f76 6572 6c61 7028 7368  shape_overlap(sh
-00028730: 6170 655f 313d 706f 6c79 676f 6e5f 312c  ape_1=polygon_1,
-00028740: 2073 6861 7065 5f32 3d70 6f6c 7967 6f6e   shape_2=polygon
-00028750: 5f32 2c29 0a23 0a23 206e 702e 0a0a 2320  _2,).#.# np...# 
-00028760: 706f 6c79 676f 6e5f 3120 3d20 4765 6f6d  polygon_1 = Geom
-00028770: 6574 7279 4d69 7869 6e28 292e 626f 6479  etryMixin().body
-00028780: 7061 7274 735f 746f 5f70 6f6c 7967 6f6e  parts_to_polygon
-00028790: 286e 702e 6172 7261 7928 5b5b 302c 2031  (np.array([[0, 1
-000287a0: 3030 5d2c 5b31 3030 2c20 3130 305d 2c5b  00],[100, 100],[
-000287b0: 302c 2030 5d2c 5b31 3030 2c20 305d 5d29  0, 0],[100, 0]])
-000287c0: 290a 2320 706f 6c79 676f 6e5f 3220 3d20  ).# polygon_2 = 
-000287d0: 4765 6f6d 6574 7279 4d69 7869 6e28 292e  GeometryMixin().
-000287e0: 626f 6479 7061 7274 735f 746f 5f70 6f6c  bodyparts_to_pol
-000287f0: 7967 6f6e 286e 702e 6172 7261 7928 5b5b  ygon(np.array([[
-00028800: 3235 2c20 3735 5d2c 5b37 352c 2037 355d  25, 75],[75, 75]
-00028810: 2c5b 3235 2c20 3235 5d2c 5b37 352c 2032  ,[25, 25],[75, 2
-00028820: 355d 5d29 290a 2320 7920 3d20 4765 6f6d  5]])).# y = Geom
-00028830: 6574 7279 4d69 7869 6e28 292e 636f 6d70  etryMixin().comp
-00028840: 7574 655f 7063 745f 7368 6170 655f 6f76  ute_pct_shape_ov
-00028850: 6572 6c61 7028 7368 6170 6573 3d5b 706f  erlap(shapes=[po
-00028860: 6c79 676f 6e5f 312c 2070 6f6c 7967 6f6e  lygon_1, polygon
-00028870: 5f32 5d2c 2064 656e 6f6d 696e 6174 6f72  _2], denominator
-00028880: 3d27 7368 6170 655f 3227 290a            ='shape_2').
+00021b80: 6572 2864 6174 613a 206e 702e 6e64 6172  er(data: np.ndar
+00021b90: 7261 792c 2067 656f 6d65 7472 6965 733a  ray, geometries:
+00021ba0: 2044 6963 745b 5475 706c 655b 696e 742c   Dict[Tuple[int,
+00021bb0: 2069 6e74 5d2c 2050 6f6c 7967 6f6e 5d2c   int], Polygon],
+00021bc0: 2076 6572 626f 7365 3a20 626f 6f6c 0a20   verbose: bool. 
+00021bd0: 2020 2029 3a0a 2020 2020 2020 2020 6461     ):.        da
+00021be0: 7461 5f70 6f69 6e74 203d 2050 6f69 6e74  ta_point = Point
+00021bf0: 2864 6174 615b 313a 5d29 0a20 2020 2020  (data[1:]).     
+00021c00: 2020 2069 6620 7665 7262 6f73 653a 0a20     if verbose:. 
+00021c10: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00021c20: 2866 2250 726f 6365 7373 696e 6720 616e  (f"Processing an
+00021c30: 696d 616c 2067 7269 6420 7371 7561 7265  imal grid square
+00021c40: 206c 6f63 6174 696f 6e20 696e 2066 7261   location in fra
+00021c50: 6d65 207b 696e 7428 6461 7461 5b30 5d29  me {int(data[0])
+00021c60: 7d2e 2e2e 2229 0a20 2020 2020 2020 2066  }...").        f
+00021c70: 6f72 206b 2c20 7220 696e 2067 656f 6d65  or k, r in geome
+00021c80: 7472 6965 732e 6974 656d 7328 293a 0a20  tries.items():. 
+00021c90: 2020 2020 2020 2020 2020 2069 6620 722e             if r.
+00021ca0: 636f 6e74 6169 6e73 2864 6174 615f 706f  contains(data_po
+00021cb0: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
+00021cc0: 2020 2020 2020 7265 7475 726e 2028 696e        return (in
+00021cd0: 7428 6461 7461 5b30 5d29 2c20 6b5b 305d  t(data[0]), k[0]
+00021ce0: 2c20 6b5b 315d 290a 2020 2020 2020 2020  , k[1]).        
+00021cf0: 7265 7475 726e 2028 696e 7428 6461 7461  return (int(data
+00021d00: 5b30 5d29 2c20 2d31 2c20 2d31 290a 0a20  [0]), -1, -1).. 
+00021d10: 2020 2064 6566 2063 756d 7375 6d5f 636f     def cumsum_co
+00021d20: 6f72 645f 6765 6f6d 6574 7269 6573 2873  ord_geometries(s
+00021d30: 656c 662c 0a20 2020 2020 2020 2020 2020  elf,.           
+00021d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021d50: 2020 2020 2064 6174 613a 206e 702e 6e64       data: np.nd
+00021d60: 6172 7261 792c 0a20 2020 2020 2020 2020  array,.         
+00021d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021d80: 2020 2020 2020 2067 656f 6d65 7472 6965         geometrie
+00021d90: 733a 2044 6963 745b 5475 706c 655b 696e  s: Dict[Tuple[in
+00021da0: 742c 2069 6e74 5d2c 2050 6f6c 7967 6f6e  t, int], Polygon
+00021db0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+00021dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021dd0: 2020 2066 7073 3a20 4f70 7469 6f6e 616c     fps: Optional
+00021de0: 5b69 6e74 5d20 3d20 4e6f 6e65 2c0a 2020  [int] = None,.  
+00021df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021e00: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00021e10: 7265 5f63 6e74 3a20 4f70 7469 6f6e 616c  re_cnt: Optional
+00021e20: 5b69 6e74 5d20 3d20 2d31 2c0a 2020 2020  [int] = -1,.    
+00021e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021e40: 2020 2020 2020 2020 2020 2020 7665 7262              verb
+00021e50: 6f73 653a 204f 7074 696f 6e61 6c5b 626f  ose: Optional[bo
+00021e60: 6f6c 5d20 3d20 5472 7565 293a 0a0a 2020  ol] = True):..  
+00021e70: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00021e80: 2020 436f 6d70 7574 6520 7468 6520 6375    Compute the cu
+00021e90: 6d75 6c61 7469 7665 2074 696d 6520 6120  mulative time a 
+00021ea0: 626f 6479 2d70 6172 7420 6861 7320 7370  body-part has sp
+00021eb0: 656e 7420 696e 7369 6465 2061 2067 7269  ent inside a gri
+00021ec0: 6420 6f66 2067 656f 6d65 7472 6965 7320  d of geometries 
+00021ed0: 7573 696e 6720 6d75 6c74 6970 726f 6365  using multiproce
+00021ee0: 7373 696e 672e 0a0a 2020 2020 2020 2020  ssing...        
+00021ef0: 3a70 6172 616d 206e 702e 6e64 6172 7261  :param np.ndarra
+00021f00: 7920 6461 7461 3a20 496e 7075 7420 6461  y data: Input da
+00021f10: 7461 2061 7272 6179 2077 6865 7265 2072  ta array where r
+00021f20: 6f77 7320 7265 7072 6573 656e 7420 6672  ows represent fr
+00021f30: 616d 6573 2061 6e64 2063 6f6c 756d 6e73  ames and columns
+00021f40: 2072 6570 7265 7365 6e74 2062 6f64 792d   represent body-
+00021f50: 7061 7274 2078 2061 6e64 2079 2063 6f6f  part x and y coo
+00021f60: 7264 696e 6174 6573 2e0a 2020 2020 2020  rdinates..      
+00021f70: 2020 3a70 6172 616d 2044 6963 745b 5475    :param Dict[Tu
+00021f80: 706c 655b 696e 742c 2069 6e74 5d2c 2050  ple[int, int], P
+00021f90: 6f6c 7967 6f6e 5d20 6765 6f6d 6574 7269  olygon] geometri
+00021fa0: 6573 3a20 4469 6374 696f 6e61 7279 206f  es: Dictionary o
+00021fb0: 6620 706f 6c79 676f 6e73 2072 6570 7265  f polygons repre
+00021fc0: 7365 6e74 696e 6720 7370 6174 6961 6c20  senting spatial 
+00021fd0: 7265 6769 6f6e 732e 2043 7265 6174 6564  regions. Created
+00021fe0: 2062 7920 6060 4765 6f6d 6574 7279 4d69   by ``GeometryMi
+00021ff0: 7869 6e2e 6275 636b 6574 5f69 6d67 5f69  xin.bucket_img_i
+00022000: 6e74 6f5f 7371 7561 7265 7360 602e 0a20  nto_squares``.. 
+00022010: 2020 2020 2020 203a 7061 7261 6d20 4f70         :param Op
+00022020: 7469 6f6e 616c 5b69 6e74 5d20 6670 733a  tional[int] fps:
+00022030: 2046 7261 6d65 7320 7065 7220 7365 636f   Frames per seco
+00022040: 6e64 2028 6670 7329 2066 6f72 2074 696d  nd (fps) for tim
+00022050: 6520 6e6f 726d 616c 697a 6174 696f 6e2e  e normalization.
+00022060: 2049 6620 4e6f 6e65 2c20 6375 6d75 6c61   If None, cumula
+00022070: 7469 7665 2073 756d 206f 6620 6672 616d  tive sum of fram
+00022080: 6520 636f 756e 7420 6973 2072 6574 7572  e count is retur
+00022090: 6e65 642e 0a0a 2020 2020 2020 2020 3a65  ned...        :e
+000220a0: 7861 6d70 6c65 3a0a 2020 2020 2020 2020  xample:.        
+000220b0: 3e3e 3e20 696d 675f 6765 6f6d 6574 7269  >>> img_geometri
+000220c0: 6573 203d 2047 656f 6d65 7472 794d 6978  es = GeometryMix
+000220d0: 696e 2e62 7563 6b65 745f 696d 675f 696e  in.bucket_img_in
+000220e0: 746f 5f67 7269 645f 7371 7561 7265 2869  to_grid_square(i
+000220f0: 6d67 5f73 697a 653d 2836 3430 2c20 3634  mg_size=(640, 64
+00022100: 3029 2c20 6275 636b 6574 5f67 7269 645f  0), bucket_grid_
+00022110: 7369 7a65 3d28 3130 2c20 3130 292c 2070  size=(10, 10), p
+00022120: 785f 7065 725f 6d6d 3d31 290a 2020 2020  x_per_mm=1).    
+00022130: 2020 2020 3e3e 3e20 6270 5f61 7272 203d      >>> bp_arr =
+00022140: 206e 702e 7261 6e64 6f6d 2e72 616e 6469   np.random.randi
+00022150: 6e74 2830 2c20 3634 302c 2028 3530 3030  nt(0, 640, (5000
+00022160: 2c20 3229 290a 2020 2020 2020 2020 3e3e  , 2)).        >>
+00022170: 3e20 6765 6f5f 6461 7461 203d 2047 656f  > geo_data = Geo
+00022180: 6d65 7472 794d 6978 696e 2829 2e63 756d  metryMixin().cum
+00022190: 7375 6d5f 636f 6f72 645f 6765 6f6d 6574  sum_coord_geomet
+000221a0: 7269 6573 2864 6174 613d 6270 5f61 7272  ries(data=bp_arr
+000221b0: 2c20 6765 6f6d 6574 7269 6573 3d69 6d67  , geometries=img
+000221c0: 5f67 656f 6d65 7472 6965 735b 305d 2c20  _geometries[0], 
+000221d0: 7665 7262 6f73 653d 4661 6c73 652c 2066  verbose=False, f
+000221e0: 7073 3d31 290a 2020 2020 2020 2020 2222  ps=1).        ""
+000221f0: 220a 0a20 2020 2020 2020 2074 696d 6572  "..        timer
+00022200: 203d 2053 696d 6261 5469 6d65 7228 7374   = SimbaTimer(st
+00022210: 6172 743d 5472 7565 290a 2020 2020 2020  art=True).      
+00022220: 2020 6368 6563 6b5f 696e 7374 616e 6365    check_instance
+00022230: 280a 2020 2020 2020 2020 2020 2020 736f  (.            so
+00022240: 7572 6365 3d66 227b 7365 6c66 2e5f 5f63  urce=f"{self.__c
+00022250: 6c61 7373 5f5f 2e5f 5f6e 616d 655f 5f7d  lass__.__name__}
+00022260: 2064 6174 6122 2c0a 2020 2020 2020 2020   data",.        
+00022270: 2020 2020 696e 7374 616e 6365 3d64 6174      instance=dat
+00022280: 612c 0a20 2020 2020 2020 2020 2020 2061  a,.            a
+00022290: 6363 6570 7465 645f 7479 7065 733d 6e70  ccepted_types=np
+000222a0: 2e6e 6461 7272 6179 2c0a 2020 2020 2020  .ndarray,.      
+000222b0: 2020 290a 2020 2020 2020 2020 6966 2028    ).        if (
+000222c0: 6461 7461 2e73 6861 7065 5b31 5d20 213d  data.shape[1] !=
+000222d0: 2032 2920 6f72 2028 6461 7461 2e6e 6469   2) or (data.ndi
+000222e0: 6d20 213d 2032 293a 0a20 2020 2020 2020  m != 2):.       
+000222f0: 2020 2020 2072 6169 7365 2043 6f75 6e74       raise Count
+00022300: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+00022310: 2020 2020 2020 206d 7367 3d66 2241 204e         msg=f"A N
+00022320: 2078 2032 2061 7272 6179 2069 7320 7265   x 2 array is re
+00022330: 7175 6972 6564 2028 676f 7420 7b64 6174  quired (got {dat
+00022340: 612e 7368 6170 657d 2922 2c0a 2020 2020  a.shape})",.    
+00022350: 2020 2020 2020 2020 2020 2020 736f 7572              sour
+00022360: 6365 3d73 656c 662e 5f5f 636c 6173 735f  ce=self.__class_
+00022370: 5f2e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  _.__name__,.    
+00022380: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00022390: 2020 6966 2066 7073 2069 7320 6e6f 7420    if fps is not 
+000223a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+000223b0: 2020 6368 6563 6b5f 696e 7428 6e61 6d65    check_int(name
+000223c0: 3d22 6670 7322 2c20 7661 6c75 653d 6670  ="fps", value=fp
+000223d0: 732c 206d 696e 5f76 616c 7565 3d31 290a  s, min_value=1).
+000223e0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000223f0: 2020 2020 2020 2020 2020 6670 7320 3d20            fps = 
+00022400: 310a 2020 2020 2020 2020 6368 6563 6b5f  1.        check_
+00022410: 696e 7428 6e61 6d65 3d22 636f 7265 5f63  int(name="core_c
+00022420: 6e74 222c 2076 616c 7565 3d63 6f72 655f  nt", value=core_
+00022430: 636e 742c 206d 696e 5f76 616c 7565 3d2d  cnt, min_value=-
+00022440: 3129 0a20 2020 2020 2020 2069 6620 636f  1).        if co
+00022450: 7265 5f63 6e74 203d 3d20 2d31 3a0a 2020  re_cnt == -1:.  
+00022460: 2020 2020 2020 2020 2020 636f 7265 5f63            core_c
+00022470: 6e74 203d 2066 696e 645f 636f 7265 5f63  nt = find_core_c
+00022480: 6e74 2829 5b30 5d0a 2020 2020 2020 2020  nt()[0].        
+00022490: 772c 2068 203d 2030 2c20 300a 2020 2020  w, h = 0, 0.    
+000224a0: 2020 2020 666f 7220 6b20 696e 2067 656f      for k in geo
+000224b0: 6d65 7472 6965 732e 6b65 7973 2829 3a0a  metries.keys():.
+000224c0: 2020 2020 2020 2020 2020 2020 772c 2068              w, h
+000224d0: 203d 206d 6178 2877 2c20 6b5b 305d 292c   = max(w, k[0]),
+000224e0: 206d 6178 2868 2c20 6b5b 315d 290a 2020   max(h, k[1]).  
+000224f0: 2020 2020 2020 6672 6d5f 6964 203d 206e        frm_id = n
+00022500: 702e 6172 616e 6765 2830 2c20 6461 7461  p.arange(0, data
+00022510: 2e73 6861 7065 5b30 5d29 2e72 6573 6861  .shape[0]).resha
+00022520: 7065 282d 312c 2031 290a 2020 2020 2020  pe(-1, 1).      
+00022530: 2020 6461 7461 203d 206e 702e 6873 7461    data = np.hsta
+00022540: 636b 2828 6672 6d5f 6964 2c20 6461 7461  ck((frm_id, data
+00022550: 2929 0a20 2020 2020 2020 2069 6d67 5f61  )).        img_a
+00022560: 7272 203d 206e 702e 7a65 726f 7328 2864  rr = np.zeros((d
+00022570: 6174 612e 7368 6170 655b 305d 2c20 6820  ata.shape[0], h 
+00022580: 2b20 312c 2077 202b 2031 2929 0a20 2020  + 1, w + 1)).   
+00022590: 2020 2020 2077 6974 6820 6d75 6c74 6970       with multip
+000225a0: 726f 6365 7373 696e 672e 506f 6f6c 280a  rocessing.Pool(.
+000225b0: 2020 2020 2020 2020 2020 2020 636f 7265              core
+000225c0: 5f63 6e74 2c20 6d61 7874 6173 6b73 7065  _cnt, maxtaskspe
+000225d0: 7263 6869 6c64 3d44 6566 6175 6c74 732e  rchild=Defaults.
+000225e0: 4d41 5849 4d55 4d5f 4d41 585f 5441 534b  MAXIMUM_MAX_TASK
+000225f0: 5f50 4552 5f43 4849 4c44 2e76 616c 7565  _PER_CHILD.value
+00022600: 0a20 2020 2020 2020 2029 2061 7320 706f  .        ) as po
+00022610: 6f6c 3a0a 2020 2020 2020 2020 2020 2020  ol:.            
+00022620: 636f 6e73 7461 6e74 7320 3d20 6675 6e63  constants = func
+00022630: 746f 6f6c 732e 7061 7274 6961 6c28 0a20  tools.partial(. 
+00022640: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00022650: 656c 662e 5f63 756d 7375 6d5f 636f 6f72  elf._cumsum_coor
+00022660: 645f 6765 6f6d 6574 7269 6573 5f68 656c  d_geometries_hel
+00022670: 7065 722c 0a20 2020 2020 2020 2020 2020  per,.           
+00022680: 2020 2020 2067 656f 6d65 7472 6965 733d       geometries=
+00022690: 6765 6f6d 6574 7269 6573 2c0a 2020 2020  geometries,.    
+000226a0: 2020 2020 2020 2020 2020 2020 7665 7262              verb
+000226b0: 6f73 653d 7665 7262 6f73 652c 0a20 2020  ose=verbose,.   
+000226c0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+000226d0: 2020 2020 2020 2066 6f72 2063 6e74 2c20         for cnt, 
+000226e0: 7265 7375 6c74 2069 6e20 656e 756d 6572  result in enumer
+000226f0: 6174 6528 706f 6f6c 2e69 6d61 7028 636f  ate(pool.imap(co
+00022700: 6e73 7461 6e74 732c 2064 6174 612c 2063  nstants, data, c
+00022710: 6875 6e6b 7369 7a65 3d31 2929 3a0a 2020  hunksize=1)):.  
+00022720: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00022730: 2072 6573 756c 745b 315d 2021 3d20 2d31   result[1] != -1
+00022740: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00022750: 2020 2020 2020 696d 675f 6172 725b 7265        img_arr[re
+00022760: 7375 6c74 5b30 5d2c 2072 6573 756c 745b  sult[0], result[
+00022770: 325d 202d 2031 2c20 7265 7375 6c74 5b31  2] - 1, result[1
+00022780: 5d20 2d20 315d 203d 2031 0a20 2020 2020  ] - 1] = 1.     
+00022790: 2020 2070 6f6f 6c2e 6a6f 696e 2829 0a20     pool.join(). 
+000227a0: 2020 2020 2020 2070 6f6f 6c2e 7465 726d         pool.term
+000227b0: 696e 6174 6528 290a 2020 2020 2020 2020  inate().        
+000227c0: 7469 6d65 722e 7374 6f70 5f74 696d 6572  timer.stop_timer
+000227d0: 2829 0a20 2020 2020 2020 2073 7464 6f75  ().        stdou
+000227e0: 745f 7375 6363 6573 7328 0a20 2020 2020  t_success(.     
+000227f0: 2020 2020 2020 206d 7367 3d22 4375 6d75         msg="Cumu
+00022800: 6c61 7469 7665 2063 6f6f 7264 696e 6174  lative coordinat
+00022810: 6573 2069 6e20 6765 6f6d 6574 7269 6573  es in geometries
+00022820: 2063 6f6d 706c 6574 6522 2c0a 2020 2020   complete",.    
+00022830: 2020 2020 2020 2020 656c 6170 7365 645f          elapsed_
+00022840: 7469 6d65 3d74 696d 6572 2e65 6c61 7073  time=timer.elaps
+00022850: 6564 5f74 696d 655f 7374 722c 0a20 2020  ed_time_str,.   
+00022860: 2020 2020 2029 0a20 2020 2020 2020 2069       ).        i
+00022870: 6620 6670 7320 6973 204e 6f6e 653a 0a20  f fps is None:. 
+00022880: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00022890: 6e20 6e70 2e63 756d 7375 6d28 696d 675f  n np.cumsum(img_
+000228a0: 6172 722c 2061 7869 733d 3029 0a20 2020  arr, axis=0).   
+000228b0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000228c0: 2020 2020 2020 2072 6574 7572 6e20 6e70         return np
+000228d0: 2e63 756d 7375 6d28 696d 675f 6172 722c  .cumsum(img_arr,
+000228e0: 2061 7869 733d 3029 202f 2066 7073 0a0a   axis=0) / fps..
+000228f0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+00022900: 640a 2020 2020 6465 6620 5f63 756d 7375  d.    def _cumsu
+00022910: 6d5f 626f 6f6c 5f68 656c 7065 7228 0a20  m_bool_helper(. 
+00022920: 2020 2020 2020 2064 6174 613a 206e 702e         data: np.
+00022930: 6e64 6172 7261 792c 2067 656f 6d65 7472  ndarray, geometr
+00022940: 6965 733a 2044 6963 745b 5475 706c 655b  ies: Dict[Tuple[
+00022950: 696e 742c 2069 6e74 5d2c 2050 6f6c 7967  int, int], Polyg
+00022960: 6f6e 5d0a 2020 2020 293a 0a20 2020 2020  on].    ):.     
+00022970: 2020 2064 6174 615f 706f 696e 7420 3d20     data_point = 
+00022980: 506f 696e 7428 6461 7461 5b31 3a33 5d29  Point(data[1:3])
+00022990: 0a20 2020 2020 2020 2070 7269 6e74 280a  .        print(.
+000229a0: 2020 2020 2020 2020 2020 2020 6622 5072              f"Pr
+000229b0: 6f63 6573 7369 6e67 2061 6e69 6d61 6c20  ocessing animal 
+000229c0: 6772 6964 2073 7175 6172 6520 6c6f 6361  grid square loca
+000229d0: 7469 6f6e 2066 6f72 2062 6f6f 6c65 616e  tion for boolean
+000229e0: 2069 6e20 6672 616d 6520 7b69 6e74 2864   in frame {int(d
+000229f0: 6174 615b 305d 297d 2e2e 2e22 0a20 2020  ata[0])}...".   
+00022a00: 2020 2020 2029 0a20 2020 2020 2020 2066       ).        f
+00022a10: 6f72 206b 2c20 7220 696e 2067 656f 6d65  or k, r in geome
+00022a20: 7472 6965 732e 6974 656d 7328 293a 0a20  tries.items():. 
+00022a30: 2020 2020 2020 2020 2020 2069 6620 722e             if r.
+00022a40: 636f 6e74 6169 6e73 2864 6174 615f 706f  contains(data_po
+00022a50: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
+00022a60: 2020 2020 2020 7265 7475 726e 2028 696e        return (in
+00022a70: 7428 6461 7461 5b30 5d29 2c20 6b5b 305d  t(data[0]), k[0]
+00022a80: 2c20 6b5b 315d 290a 2020 2020 2020 2020  , k[1]).        
+00022a90: 7265 7475 726e 2028 696e 7428 6461 7461  return (int(data
+00022aa0: 5b30 5d29 2c20 2d31 2c20 2d31 290a 0a20  [0]), -1, -1).. 
+00022ab0: 2020 2064 6566 2063 756d 7375 6d5f 626f     def cumsum_bo
+00022ac0: 6f6c 5f67 656f 6d65 7472 6965 7328 0a20  ol_geometries(. 
+00022ad0: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+00022ae0: 2020 2020 2064 6174 613a 206e 702e 6e64       data: np.nd
+00022af0: 6172 7261 792c 0a20 2020 2020 2020 2067  array,.        g
+00022b00: 656f 6d65 7472 6965 733a 2044 6963 745b  eometries: Dict[
+00022b10: 5475 706c 655b 696e 742c 2069 6e74 5d2c  Tuple[int, int],
+00022b20: 2050 6f6c 7967 6f6e 5d2c 0a20 2020 2020   Polygon],.     
+00022b30: 2020 2062 6f6f 6c5f 6461 7461 3a20 6e70     bool_data: np
+00022b40: 2e6e 6461 7272 6179 2c0a 2020 2020 2020  .ndarray,.      
+00022b50: 2020 6670 733a 204f 7074 696f 6e61 6c5b    fps: Optional[
+00022b60: 666c 6f61 745d 203d 204e 6f6e 652c 0a20  float] = None,. 
+00022b70: 2020 2020 2020 2063 6f72 655f 636e 743a         core_cnt:
+00022b80: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00022b90: 202d 312c 0a20 2020 2029 202d 3e20 6e70   -1,.    ) -> np
+00022ba0: 2e6e 6461 7272 6179 3a0a 2020 2020 2020  .ndarray:.      
+00022bb0: 2020 2222 220a 2020 2020 2020 2020 436f    """.        Co
+00022bc0: 6d70 7574 6520 7468 6520 6375 6d75 6c61  mpute the cumula
+00022bd0: 7469 7665 2073 756d 7320 6f66 2062 6f6f  tive sums of boo
+00022be0: 6c65 616e 2065 7665 6e74 7320 7769 7468  lean events with
+00022bf0: 696e 2070 6f6c 7967 6f6e 2067 656f 6d65  in polygon geome
+00022c00: 7472 6965 7320 6f76 6572 2074 696d 6520  tries over time 
+00022c10: 7573 696e 6720 6d75 6c74 6970 726f 6365  using multiproce
+00022c20: 7373 696e 672e 0a0a 2020 2020 2020 2020  ssing...        
+00022c30: 452e 672e 2c20 636f 6d70 7574 6520 7468  E.g., compute th
+00022c40: 6520 6375 6d75 6c61 7469 7665 2074 696d  e cumulative tim
+00022c50: 6520 6f66 2063 6c61 7373 6966 6965 6420  e of classified 
+00022c60: 6576 656e 7473 2077 6974 6869 6e20 7370  events within sp
+00022c70: 6174 6961 6c20 6c6f 6361 7469 6f6e 7320  atial locations 
+00022c80: 6174 2061 6c6c 2074 696d 652d 706f 696e  at all time-poin
+00022c90: 7473 206f 6620 7468 6520 7669 6465 6f2e  ts of the video.
+00022ca0: 0a0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+00022cb0: 206e 702e 6e64 6172 7261 7920 6461 7461   np.ndarray data
+00022cc0: 3a20 4172 7261 7920 636f 6e74 6169 6e69  : Array containi
+00022cd0: 6e67 2073 7061 7469 616c 2064 6174 6120  ng spatial data 
+00022ce0: 7769 7468 2073 6861 7065 2028 6e2c 2032  with shape (n, 2
+00022cf0: 292e 2045 2e67 2e2c 2032 442d 6172 7261  ). E.g., 2D-arra
+00022d00: 7920 7769 7468 2062 6f64 792d 7061 7274  y with body-part
+00022d10: 2063 6f6f 7264 696e 6174 6573 2e0a 2020   coordinates..  
+00022d20: 2020 2020 2020 3a70 6172 616d 2044 6963        :param Dic
+00022d30: 745b 5475 706c 655b 696e 742c 2069 6e74  t[Tuple[int, int
+00022d40: 5d2c 2050 6f6c 7967 6f6e 5d20 6765 6f6d  ], Polygon] geom
+00022d50: 6574 7269 6573 3a20 4469 6374 696f 6e61  etries: Dictiona
+00022d60: 7279 206f 6620 706f 6c79 676f 6e73 2072  ry of polygons r
+00022d70: 6570 7265 7365 6e74 696e 6720 7370 6174  epresenting spat
+00022d80: 6961 6c20 7265 6769 6f6e 732e 2043 7265  ial regions. Cre
+00022d90: 6174 6564 2062 7920 6060 4765 6f6d 6574  ated by ``Geomet
+00022da0: 7279 4d69 7869 6e2e 6275 636b 6574 5f69  ryMixin.bucket_i
+00022db0: 6d67 5f69 6e74 6f5f 7371 7561 7265 7360  mg_into_squares`
+00022dc0: 602e 0a20 2020 2020 2020 203a 7061 7261  `..        :para
+00022dd0: 6d20 6e70 2e6e 6461 7272 6179 2062 6f6f  m np.ndarray boo
+00022de0: 6c5f 6461 7461 3a20 426f 6f6c 6561 6e20  l_data: Boolean 
+00022df0: 6172 7261 7920 7769 7468 2073 6861 7065  array with shape
+00022e00: 2028 6461 7461 2e73 6861 7065 5b30 5d2c   (data.shape[0],
+00022e10: 2920 6f72 2028 6461 7461 2e73 6861 7065  ) or (data.shape
+00022e20: 5b30 5d2c 2031 2920 696e 6469 6361 7469  [0], 1) indicati
+00022e30: 6e67 2074 6865 2070 7265 7365 6e63 6520  ng the presence 
+00022e40: 6f72 2061 6273 656e 6365 2069 6e20 6561  or absence in ea
+00022e50: 6368 2066 7261 6d65 2e0a 2020 2020 2020  ch frame..      
+00022e60: 2020 3a70 6172 616d 204f 7074 696f 6e61    :param Optiona
+00022e70: 6c5b 666c 6f61 745d 2066 7073 3a20 4672  l[float] fps: Fr
+00022e80: 616d 6573 2070 6572 2073 6563 6f6e 642e  ames per second.
+00022e90: 2049 6620 7072 6f76 6964 6564 2c20 7468   If provided, th
+00022ea0: 6520 7265 7375 6c74 2069 7320 6e6f 726d  e result is norm
+00022eb0: 616c 697a 6564 2062 7920 7468 6520 6672  alized by the fr
+00022ec0: 616d 6520 7261 7465 2e0a 2020 2020 2020  ame rate..      
+00022ed0: 2020 3a70 6172 616d 204f 7074 696f 6e61    :param Optiona
+00022ee0: 6c5b 666c 6f61 745d 2063 6f72 655f 636e  l[float] core_cn
+00022ef0: 743a 204e 756d 6265 7220 6f66 2043 5055  t: Number of CPU
+00022f00: 2063 6f72 6573 2074 6f20 7573 6520 666f   cores to use fo
+00022f10: 7220 7061 7261 6c6c 656c 2070 726f 6365  r parallel proce
+00022f20: 7373 696e 672e 2044 6566 6175 6c74 2069  ssing. Default i
+00022f30: 7320 2d31 2c20 7768 6963 6820 6d65 616e  s -1, which mean
+00022f40: 7320 7573 696e 6720 616c 6c20 6176 6169  s using all avai
+00022f50: 6c61 626c 6520 636f 7265 732e 0a20 2020  lable cores..   
+00022f60: 2020 2020 203a 7265 7475 726e 7320 6e70       :returns np
+00022f70: 2e6e 6461 7272 6179 3a20 4172 7261 7920  .ndarray: Array 
+00022f80: 6f66 2073 697a 6520 2866 7261 6d65 7320  of size (frames 
+00022f90: 7820 686f 7269 7a6f 6e74 616c 2062 696e  x horizontal bin
+00022fa0: 7320 7820 7665 7269 6361 6c20 6269 6e73  s x verical bins
+00022fb0: 2920 7769 7468 2074 696d 6573 2069 6e20  ) with times in 
+00022fc0: 7365 636f 6e64 7320 2869 6620 6670 7320  seconds (if fps 
+00022fd0: 7061 7373 6564 2920 6f72 2066 7261 6d65  passed) or frame
+00022fe0: 7320 2869 6620 6670 7320 6e6f 7420 7061  s (if fps not pa
+00022ff0: 7373 6564 290a 0a20 2020 2020 2020 203a  ssed)..        :
+00023000: 6578 616d 706c 653a 0a20 2020 2020 2020  example:.       
+00023010: 203e 3e3e 2067 656f 6d65 7472 6965 7320   >>> geometries 
+00023020: 3d20 4765 6f6d 6574 7279 4d69 7869 6e2e  = GeometryMixin.
+00023030: 6275 636b 6574 5f69 6d67 5f69 6e74 6f5f  bucket_img_into_
+00023040: 6772 6964 5f73 7175 6172 6528 6275 636b  grid_square(buck
+00023050: 6574 5f73 697a 655f 6d6d 3d35 302c 2069  et_size_mm=50, i
+00023060: 6d67 5f73 697a 653d 2838 3030 2c20 3830  mg_size=(800, 80
+00023070: 3029 202c 2070 785f 7065 725f 6d6d 3d35  0) , px_per_mm=5
+00023080: 2e30 295b 305d 0a20 2020 2020 2020 203e  .0)[0].        >
+00023090: 3e3e 2063 6f6f 7264 5f64 6174 6120 3d20  >> coord_data = 
+000230a0: 6e70 2e72 616e 646f 6d2e 7261 6e64 696e  np.random.randin
+000230b0: 7428 302c 2038 3030 2c20 2835 3030 2c20  t(0, 800, (500, 
+000230c0: 3229 290a 2020 2020 2020 2020 3e3e 3e20  2)).        >>> 
+000230d0: 626f 6f6c 5f64 6174 6120 3d20 6e70 2e72  bool_data = np.r
+000230e0: 616e 646f 6d2e 7261 6e64 696e 7428 302c  andom.randint(0,
+000230f0: 2032 2c20 2835 3030 2c29 290a 2020 2020   2, (500,)).    
+00023100: 2020 2020 3e3e 3e20 7820 3d20 4765 6f6d      >>> x = Geom
+00023110: 6574 7279 4d69 7869 6e28 292e 6375 6d73  etryMixin().cums
+00023120: 756d 5f62 6f6f 6c5f 6765 6f6d 6574 7269  um_bool_geometri
+00023130: 6573 2864 6174 613d 636f 6f72 645f 6461  es(data=coord_da
+00023140: 7461 2c20 6765 6f6d 6574 7269 6573 3d67  ta, geometries=g
+00023150: 656f 6d65 7472 6965 732c 2062 6f6f 6c5f  eometries, bool_
+00023160: 6461 7461 3d62 6f6f 6c5f 6461 7461 2c20  data=bool_data, 
+00023170: 6670 733d 3135 290a 2020 2020 2020 2020  fps=15).        
+00023180: 3e3e 3e20 782e 7368 6170 650a 2020 2020  >>> x.shape.    
+00023190: 2020 2020 3e3e 3e20 2835 3030 2c20 342c      >>> (500, 4,
+000231a0: 2034 290a 2020 2020 2020 2020 2222 220a   4).        """.
+000231b0: 0a20 2020 2020 2020 2063 6865 636b 5f76  .        check_v
+000231c0: 616c 6964 5f61 7272 6179 280a 2020 2020  alid_array(.    
+000231d0: 2020 2020 2020 2020 6461 7461 3d64 6174          data=dat
+000231e0: 612c 0a20 2020 2020 2020 2020 2020 2061  a,.            a
+000231f0: 6363 6570 7465 645f 7369 7a65 733d 5b32  ccepted_sizes=[2
+00023200: 5d2c 0a20 2020 2020 2020 2020 2020 2073  ],.            s
+00023210: 6f75 7263 653d 6622 7b47 656f 6d65 7472  ource=f"{Geometr
+00023220: 794d 6978 696e 2e63 756d 7375 6d5f 626f  yMixin.cumsum_bo
+00023230: 6f6c 5f67 656f 6d65 7472 6965 732e 5f5f  ol_geometries.__
+00023240: 6e61 6d65 5f5f 7d20 6461 7461 222c 0a20  name__} data",. 
+00023250: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00023260: 2063 6865 636b 5f69 6e73 7461 6e63 6528   check_instance(
+00023270: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
+00023280: 7263 653d 6622 7b47 656f 6d65 7472 794d  rce=f"{GeometryM
+00023290: 6978 696e 2e63 756d 7375 6d5f 626f 6f6c  ixin.cumsum_bool
+000232a0: 5f67 656f 6d65 7472 6965 732e 5f5f 6e61  _geometries.__na
+000232b0: 6d65 5f5f 7d20 6765 6f6d 6574 7269 6573  me__} geometries
+000232c0: 222c 0a20 2020 2020 2020 2020 2020 2069  ",.            i
+000232d0: 6e73 7461 6e63 653d 6765 6f6d 6574 7269  nstance=geometri
+000232e0: 6573 2c0a 2020 2020 2020 2020 2020 2020  es,.            
+000232f0: 6163 6365 7074 6564 5f74 7970 6573 3d64  accepted_types=d
+00023300: 6963 742c 0a20 2020 2020 2020 2029 0a20  ict,.        ). 
+00023310: 2020 2020 2020 2063 6865 636b 5f76 616c         check_val
+00023320: 6964 5f61 7272 6179 280a 2020 2020 2020  id_array(.      
+00023330: 2020 2020 2020 6461 7461 3d62 6f6f 6c5f        data=bool_
+00023340: 6461 7461 2c0a 2020 2020 2020 2020 2020  data,.          
+00023350: 2020 6163 6365 7074 6564 5f73 6861 7065    accepted_shape
+00023360: 733d 5b28 6461 7461 2e73 6861 7065 5b30  s=[(data.shape[0
+00023370: 5d2c 2031 292c 2028 6461 7461 2e73 6861  ], 1), (data.sha
+00023380: 7065 5b30 5d2c 295d 2c0a 2020 2020 2020  pe[0],)],.      
+00023390: 2020 2020 2020 736f 7572 6365 3d66 227b        source=f"{
+000233a0: 4765 6f6d 6574 7279 4d69 7869 6e2e 6375  GeometryMixin.cu
+000233b0: 6d73 756d 5f62 6f6f 6c5f 6765 6f6d 6574  msum_bool_geomet
+000233c0: 7269 6573 2e5f 5f6e 616d 655f 5f7d 2062  ries.__name__} b
+000233d0: 6f6f 6c5f 6461 7461 222c 0a20 2020 2020  ool_data",.     
+000233e0: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
+000233f0: 6670 7320 6973 206e 6f74 204e 6f6e 653a  fps is not None:
+00023400: 0a20 2020 2020 2020 2020 2020 2063 6865  .            che
+00023410: 636b 5f66 6c6f 6174 280a 2020 2020 2020  ck_float(.      
+00023420: 2020 2020 2020 2020 2020 6e61 6d65 3d66            name=f
+00023430: 227b 4765 6f6d 6574 7279 4d69 7869 6e2e  "{GeometryMixin.
+00023440: 6375 6d73 756d 5f62 6f6f 6c5f 6765 6f6d  cumsum_bool_geom
+00023450: 6574 7269 6573 2e5f 5f6e 616d 655f 5f7d  etries.__name__}
+00023460: 2066 7073 222c 0a20 2020 2020 2020 2020   fps",.         
+00023470: 2020 2020 2020 2076 616c 7565 3d66 7073         value=fps
+00023480: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00023490: 2020 6d69 6e5f 7661 6c75 653d 312e 302c    min_value=1.0,
+000234a0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+000234b0: 2020 2020 2020 2063 6865 636b 5f69 6e74         check_int
+000234c0: 280a 2020 2020 2020 2020 2020 2020 6e61  (.            na
+000234d0: 6d65 3d66 227b 4765 6f6d 6574 7279 4d69  me=f"{GeometryMi
+000234e0: 7869 6e2e 6375 6d73 756d 5f62 6f6f 6c5f  xin.cumsum_bool_
+000234f0: 6765 6f6d 6574 7269 6573 2e5f 5f6e 616d  geometries.__nam
+00023500: 655f 5f7d 2063 6f72 655f 636e 7422 2c0a  e__} core_cnt",.
+00023510: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+00023520: 653d 636f 7265 5f63 6e74 2c0a 2020 2020  e=core_cnt,.    
+00023530: 2020 2020 2020 2020 6d69 6e5f 7661 6c75          min_valu
+00023540: 653d 2d31 2c0a 2020 2020 2020 2020 290a  e=-1,.        ).
+00023550: 2020 2020 2020 2020 6966 206e 6f74 206e          if not n
+00023560: 702e 6172 7261 795f 6571 7561 6c28 0a20  p.array_equal(. 
+00023570: 2020 2020 2020 2020 2020 206e 702e 736f             np.so
+00023580: 7274 286e 702e 756e 6971 7565 2862 6f6f  rt(np.unique(boo
+00023590: 6c5f 6461 7461 2929 2e61 7374 7970 6528  l_data)).astype(
+000235a0: 696e 7429 2c20 6e70 2e61 7272 6179 285b  int), np.array([
+000235b0: 302c 2031 5d29 0a20 2020 2020 2020 2029  0, 1]).        )
+000235c0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+000235d0: 6973 6520 496e 7661 6c69 6449 6e70 7574  ise InvalidInput
+000235e0: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+000235f0: 2020 2020 2020 206d 7367 3d66 2249 6e76         msg=f"Inv
+00023600: 616c 6964 2062 6f6f 6c65 616e 2064 6174  alid boolean dat
+00023610: 612e 2045 7870 6563 7465 6420 7b6e 702e  a. Expected {np.
+00023620: 6172 7261 7928 5b30 2c20 315d 297d 2062  array([0, 1])} b
+00023630: 7574 2066 6f75 6e64 207b 6e70 2e73 6f72  ut found {np.sor
+00023640: 7428 6e70 2e75 6e69 7175 6528 626f 6f6c  t(np.unique(bool
+00023650: 5f64 6174 6129 292e 6173 7479 7065 2869  _data)).astype(i
+00023660: 6e74 297d 222c 0a20 2020 2020 2020 2020  nt)}",.         
+00023670: 2020 2020 2020 2073 6f75 7263 653d 4765         source=Ge
+00023680: 6f6d 6574 7279 4d69 7869 6e2e 6375 6d73  ometryMixin.cums
+00023690: 756d 5f62 6f6f 6c5f 6765 6f6d 6574 7269  um_bool_geometri
+000236a0: 6573 2e5f 5f6e 616d 655f 5f2c 0a20 2020  es.__name__,.   
+000236b0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+000236c0: 2020 2069 6620 636f 7265 5f63 6e74 203d     if core_cnt =
+000236d0: 3d20 2d31 3a0a 2020 2020 2020 2020 2020  = -1:.          
+000236e0: 2020 636f 7265 5f63 6e74 203d 2066 696e    core_cnt = fin
+000236f0: 645f 636f 7265 5f63 6e74 2829 5b30 5d0a  d_core_cnt()[0].
+00023700: 2020 2020 2020 2020 772c 2068 203d 2030          w, h = 0
+00023710: 2c20 300a 2020 2020 2020 2020 666f 7220  , 0.        for 
+00023720: 6b20 696e 2067 656f 6d65 7472 6965 732e  k in geometries.
+00023730: 6b65 7973 2829 3a0a 2020 2020 2020 2020  keys():.        
+00023740: 2020 2020 772c 2068 203d 206d 6178 2877      w, h = max(w
+00023750: 2c20 6b5b 305d 292c 206d 6178 2868 2c20  , k[0]), max(h, 
+00023760: 6b5b 315d 290a 2020 2020 2020 2020 6672  k[1]).        fr
+00023770: 6d5f 6964 203d 206e 702e 6172 616e 6765  m_id = np.arange
+00023780: 2830 2c20 6461 7461 2e73 6861 7065 5b30  (0, data.shape[0
+00023790: 5d29 2e72 6573 6861 7065 282d 312c 2031  ]).reshape(-1, 1
+000237a0: 290a 2020 2020 2020 2020 6966 2062 6f6f  ).        if boo
+000237b0: 6c5f 6461 7461 2e6e 6469 6d20 3d3d 2031  l_data.ndim == 1
+000237c0: 3a0a 2020 2020 2020 2020 2020 2020 626f  :.            bo
+000237d0: 6f6c 5f64 6174 6120 3d20 626f 6f6c 5f64  ol_data = bool_d
+000237e0: 6174 612e 7265 7368 6170 6528 2d31 2c20  ata.reshape(-1, 
+000237f0: 3129 0a20 2020 2020 2020 2064 6174 6120  1).        data 
+00023800: 3d20 6e70 2e68 7374 6163 6b28 2864 6174  = np.hstack((dat
+00023810: 612c 2062 6f6f 6c5f 6461 7461 2929 0a20  a, bool_data)). 
+00023820: 2020 2020 2020 2064 6174 6120 3d20 6e70         data = np
+00023830: 2e68 7374 6163 6b28 2866 726d 5f69 642c  .hstack((frm_id,
+00023840: 2064 6174 6129 290a 2020 2020 2020 2020   data)).        
+00023850: 696d 675f 6172 7220 3d20 6e70 2e7a 6572  img_arr = np.zer
+00023860: 6f73 2828 6461 7461 2e73 6861 7065 5b30  os((data.shape[0
+00023870: 5d2c 2068 202b 2031 2c20 7720 2b20 3129  ], h + 1, w + 1)
+00023880: 290a 2020 2020 2020 2020 6461 7461 203d  ).        data =
+00023890: 2064 6174 615b 6e70 2e61 7267 7768 6572   data[np.argwher
+000238a0: 6528 2864 6174 615b 3a2c 2033 5d20 3d3d  e((data[:, 3] ==
+000238b0: 2031 2929 5d2e 7265 7368 6170 6528 2d31   1))].reshape(-1
+000238c0: 2c20 3429 0a20 2020 2020 2020 2077 6974  , 4).        wit
+000238d0: 6820 6d75 6c74 6970 726f 6365 7373 696e  h multiprocessin
+000238e0: 672e 506f 6f6c 280a 2020 2020 2020 2020  g.Pool(.        
+000238f0: 2020 2020 636f 7265 5f63 6e74 2c20 6d61      core_cnt, ma
+00023900: 7874 6173 6b73 7065 7263 6869 6c64 3d44  xtasksperchild=D
+00023910: 6566 6175 6c74 732e 4c41 5247 455f 4d41  efaults.LARGE_MA
+00023920: 585f 5441 534b 5f50 4552 5f43 4849 4c44  X_TASK_PER_CHILD
+00023930: 2e76 616c 7565 0a20 2020 2020 2020 2029  .value.        )
+00023940: 2061 7320 706f 6f6c 3a0a 2020 2020 2020   as pool:.      
+00023950: 2020 2020 2020 636f 6e73 7461 6e74 7320        constants 
+00023960: 3d20 6675 6e63 746f 6f6c 732e 7061 7274  = functools.part
+00023970: 6961 6c28 0a20 2020 2020 2020 2020 2020  ial(.           
+00023980: 2020 2020 2073 656c 662e 5f63 756d 7375       self._cumsu
+00023990: 6d5f 626f 6f6c 5f68 656c 7065 722c 2067  m_bool_helper, g
+000239a0: 656f 6d65 7472 6965 733d 6765 6f6d 6574  eometries=geomet
+000239b0: 7269 6573 0a20 2020 2020 2020 2020 2020  ries.           
+000239c0: 2029 0a20 2020 2020 2020 2020 2020 2066   ).            f
+000239d0: 6f72 2063 6e74 2c20 7265 7375 6c74 2069  or cnt, result i
+000239e0: 6e20 656e 756d 6572 6174 6528 706f 6f6c  n enumerate(pool
+000239f0: 2e69 6d61 7028 636f 6e73 7461 6e74 732c  .imap(constants,
+00023a00: 2064 6174 612c 2063 6875 6e6b 7369 7a65   data, chunksize
+00023a10: 3d31 2929 3a0a 2020 2020 2020 2020 2020  =1)):.          
+00023a20: 2020 2020 2020 6966 2072 6573 756c 745b        if result[
+00023a30: 315d 2021 3d20 2d31 3a0a 2020 2020 2020  1] != -1:.      
+00023a40: 2020 2020 2020 2020 2020 2020 2020 696d                im
+00023a50: 675f 6172 725b 7265 7375 6c74 5b30 5d2c  g_arr[result[0],
+00023a60: 2072 6573 756c 745b 325d 202d 2031 2c20   result[2] - 1, 
+00023a70: 7265 7375 6c74 5b31 5d20 2d20 315d 203d  result[1] - 1] =
+00023a80: 2031 0a20 2020 2020 2020 2070 6f6f 6c2e   1.        pool.
+00023a90: 6a6f 696e 2829 0a20 2020 2020 2020 2070  join().        p
+00023aa0: 6f6f 6c2e 7465 726d 696e 6174 6528 290a  ool.terminate().
+00023ab0: 2020 2020 2020 2020 6966 2066 7073 2069          if fps i
+00023ac0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00023ad0: 2020 2020 7265 7475 726e 206e 702e 6375      return np.cu
+00023ae0: 6d73 756d 2869 6d67 5f61 7272 2c20 6178  msum(img_arr, ax
+00023af0: 6973 3d30 290a 2020 2020 2020 2020 656c  is=0).        el
+00023b00: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00023b10: 7265 7475 726e 206e 702e 6375 6d73 756d  return np.cumsum
+00023b20: 2869 6d67 5f61 7272 2c20 6178 6973 3d30  (img_arr, axis=0
+00023b30: 2920 2f20 6670 730a 0a20 2020 2040 7374  ) / fps..    @st
+00023b40: 6174 6963 6d65 7468 6f64 0a20 2020 2064  aticmethod.    d
+00023b50: 6566 205f 6375 6d73 756d 5f61 6e69 6d61  ef _cumsum_anima
+00023b60: 6c5f 6765 6f6d 6574 7269 6573 5f67 7269  l_geometries_gri
+00023b70: 645f 6865 6c70 6572 280a 2020 2020 2020  d_helper(.      
+00023b80: 2020 6461 7461 3a20 6e70 2e6e 6461 7272    data: np.ndarr
+00023b90: 6179 2c0a 2020 2020 2020 2020 6772 6964  ay,.        grid
+00023ba0: 3a20 4469 6374 5b54 7570 6c65 5b69 6e74  : Dict[Tuple[int
+00023bb0: 2c20 696e 745d 2c20 506f 6c79 676f 6e5d  , int], Polygon]
+00023bc0: 2c0a 2020 2020 2020 2020 7369 7a65 3a20  ,.        size: 
+00023bd0: 5475 706c 655b 696e 745d 2c0a 2020 2020  Tuple[int],.    
+00023be0: 2020 2020 7665 7262 6f73 653a 2062 6f6f      verbose: boo
+00023bf0: 6c2c 0a20 2020 2029 3a0a 0a20 2020 2020  l,.    ):..     
+00023c00: 2020 2073 6861 7065 2c20 7265 7375 6c74     shape, result
+00023c10: 7320 3d20 6461 7461 5b31 5d2c 206e 702e  s = data[1], np.
+00023c20: 7a65 726f 7328 2873 697a 655b 305d 202b  zeros((size[0] +
+00023c30: 2031 2c20 7369 7a65 5b31 5d20 2b20 3129   1, size[1] + 1)
+00023c40: 290a 2020 2020 2020 2020 6966 2076 6572  ).        if ver
+00023c50: 626f 7365 3a0a 2020 2020 2020 2020 2020  bose:.          
+00023c60: 2020 7072 696e 7428 6622 5072 6f63 6573    print(f"Proces
+00023c70: 7369 6e67 2061 6e69 6d61 6c20 6772 6964  sing animal grid
+00023c80: 2073 7175 6172 6520 6c6f 6361 7469 6f6e   square location
+00023c90: 2069 6e20 6672 616d 6520 7b69 6e74 2864   in frame {int(d
+00023ca0: 6174 615b 305d 297d 2e2e 2e22 290a 2020  ata[0])}...").  
+00023cb0: 2020 2020 2020 666f 7220 6b2c 2072 2069        for k, r i
+00023cc0: 6e20 6772 6964 2e69 7465 6d73 2829 3a0a  n grid.items():.
+00023cd0: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+00023ce0: 2e69 6e74 6572 7365 6374 7328 7368 6170  .intersects(shap
+00023cf0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00023d00: 2020 2020 7265 7375 6c74 735b 6b5b 305d      results[k[0]
+00023d10: 2c20 6b5b 315d 5d20 3d20 310a 2020 2020  , k[1]] = 1.    
+00023d20: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+00023d30: 7473 0a0a 2020 2020 6465 6620 6375 6d73  ts..    def cums
+00023d40: 756d 5f61 6e69 6d61 6c5f 6765 6f6d 6574  um_animal_geomet
+00023d50: 7269 6573 5f67 7269 6428 0a20 2020 2020  ries_grid(.     
+00023d60: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+00023d70: 2064 6174 613a 204c 6973 745b 506f 6c79   data: List[Poly
+00023d80: 676f 6e5d 2c0a 2020 2020 2020 2020 6772  gon],.        gr
+00023d90: 6964 3a20 4469 6374 5b54 7570 6c65 5b69  id: Dict[Tuple[i
+00023da0: 6e74 2c20 696e 745d 2c20 506f 6c79 676f  nt, int], Polygo
+00023db0: 6e5d 2c0a 2020 2020 2020 2020 6670 733a  n],.        fps:
+00023dc0: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00023dd0: 204e 6f6e 652c 0a20 2020 2020 2020 2063   None,.        c
+00023de0: 6f72 655f 636e 743a 204f 7074 696f 6e61  ore_cnt: Optiona
+00023df0: 6c5b 696e 745d 203d 202d 312c 0a20 2020  l[int] = -1,.   
+00023e00: 2020 2020 2076 6572 626f 7365 3a20 4f70       verbose: Op
+00023e10: 7469 6f6e 616c 5b62 6f6f 6c5d 203d 2054  tional[bool] = T
+00023e20: 7275 652c 0a20 2020 2029 3a0a 0a20 2020  rue,.    ):..   
+00023e30: 2020 2020 2074 696d 6572 203d 2053 696d       timer = Sim
+00023e40: 6261 5469 6d65 7228 7374 6172 743d 5472  baTimer(start=Tr
+00023e50: 7565 290a 2020 2020 2020 2020 6368 6563  ue).        chec
+00023e60: 6b5f 7661 6c69 645f 6c73 7428 0a20 2020  k_valid_lst(.   
+00023e70: 2020 2020 2020 2020 2064 6174 613d 6461           data=da
+00023e80: 7461 2c0a 2020 2020 2020 2020 2020 2020  ta,.            
+00023e90: 736f 7572 6365 3d47 656f 6d65 7472 794d  source=GeometryM
+00023ea0: 6978 696e 2e63 756d 7375 6d5f 616e 696d  ixin.cumsum_anim
+00023eb0: 616c 5f67 656f 6d65 7472 6965 735f 6772  al_geometries_gr
+00023ec0: 6964 2e5f 5f6e 616d 655f 5f2c 0a20 2020  id.__name__,.   
+00023ed0: 2020 2020 2020 2020 2076 616c 6964 5f64           valid_d
+00023ee0: 7479 7065 733d 2850 6f6c 7967 6f6e 2c29  types=(Polygon,)
+00023ef0: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
+00023f00: 2020 2020 6368 6563 6b5f 696e 7374 616e      check_instan
+00023f10: 6365 280a 2020 2020 2020 2020 2020 2020  ce(.            
+00023f20: 736f 7572 6365 3d47 656f 6d65 7472 794d  source=GeometryM
+00023f30: 6978 696e 2e63 756d 7375 6d5f 616e 696d  ixin.cumsum_anim
+00023f40: 616c 5f67 656f 6d65 7472 6965 735f 6772  al_geometries_gr
+00023f50: 6964 2e5f 5f6e 616d 655f 5f2c 0a20 2020  id.__name__,.   
+00023f60: 2020 2020 2020 2020 2069 6e73 7461 6e63           instanc
+00023f70: 653d 6772 6964 2c0a 2020 2020 2020 2020  e=grid,.        
+00023f80: 2020 2020 6163 6365 7074 6564 5f74 7970      accepted_typ
+00023f90: 6573 3d28 6469 6374 2c29 2c0a 2020 2020  es=(dict,),.    
+00023fa0: 2020 2020 290a 2020 2020 2020 2020 6966      ).        if
+00023fb0: 2066 7073 2069 7320 6e6f 7420 4e6f 6e65   fps is not None
+00023fc0: 3a0a 2020 2020 2020 2020 2020 2020 6368  :.            ch
+00023fd0: 6563 6b5f 696e 7428 6e61 6d65 3d22 6670  eck_int(name="fp
+00023fe0: 7322 2c20 7661 6c75 653d 6670 732c 206d  s", value=fps, m
+00023ff0: 696e 5f76 616c 7565 3d31 290a 2020 2020  in_value=1).    
+00024000: 2020 2020 6368 6563 6b5f 696e 7428 6e61      check_int(na
+00024010: 6d65 3d22 636f 7265 5f63 6e74 222c 2076  me="core_cnt", v
+00024020: 616c 7565 3d63 6f72 655f 636e 742c 206d  alue=core_cnt, m
+00024030: 696e 5f76 616c 7565 3d2d 3129 0a20 2020  in_value=-1).   
+00024040: 2020 2020 2069 6620 636f 7265 5f63 6e74       if core_cnt
+00024050: 203d 3d20 2d31 3a0a 2020 2020 2020 2020   == -1:.        
+00024060: 2020 2020 636f 7265 5f63 6e74 203d 2066      core_cnt = f
+00024070: 696e 645f 636f 7265 5f63 6e74 2829 5b30  ind_core_cnt()[0
+00024080: 5d0a 2020 2020 2020 2020 772c 2068 203d  ].        w, h =
+00024090: 2030 2c20 300a 2020 2020 2020 2020 666f   0, 0.        fo
+000240a0: 7220 6b20 696e 2067 7269 642e 6b65 7973  r k in grid.keys
+000240b0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+000240c0: 772c 2068 203d 206d 6178 2877 2c20 6b5b  w, h = max(w, k[
+000240d0: 305d 292c 206d 6178 2868 2c20 6b5b 315d  0]), max(h, k[1]
+000240e0: 290a 2020 2020 2020 2020 6672 6d5f 6964  ).        frm_id
+000240f0: 203d 206e 702e 6172 616e 6765 2830 2c20   = np.arange(0, 
+00024100: 6c65 6e28 6461 7461 2929 2e72 6573 6861  len(data)).resha
+00024110: 7065 282d 312c 2031 290a 2020 2020 2020  pe(-1, 1).      
+00024120: 2020 6461 7461 203d 206e 702e 6873 7461    data = np.hsta
+00024130: 636b 2828 6672 6d5f 6964 2c20 6e70 2e61  ck((frm_id, np.a
+00024140: 7272 6179 2864 6174 6129 2e72 6573 6861  rray(data).resha
+00024150: 7065 282d 312c 2031 2929 290a 2020 2020  pe(-1, 1))).    
+00024160: 2020 2020 696d 675f 6172 7220 3d20 6e70      img_arr = np
+00024170: 2e7a 6572 6f73 2828 6461 7461 2e73 6861  .zeros((data.sha
+00024180: 7065 5b30 5d2c 2068 202b 2031 2c20 7720  pe[0], h + 1, w 
+00024190: 2b20 3129 290a 2020 2020 2020 2020 7769  + 1)).        wi
+000241a0: 7468 206d 756c 7469 7072 6f63 6573 7369  th multiprocessi
+000241b0: 6e67 2e50 6f6f 6c28 0a20 2020 2020 2020  ng.Pool(.       
+000241c0: 2020 2020 2063 6f72 655f 636e 742c 206d       core_cnt, m
+000241d0: 6178 7461 736b 7370 6572 6368 696c 643d  axtasksperchild=
+000241e0: 4465 6661 756c 7473 2e4c 4152 4745 5f4d  Defaults.LARGE_M
+000241f0: 4158 5f54 4153 4b5f 5045 525f 4348 494c  AX_TASK_PER_CHIL
+00024200: 442e 7661 6c75 650a 2020 2020 2020 2020  D.value.        
+00024210: 2920 6173 2070 6f6f 6c3a 0a20 2020 2020  ) as pool:.     
+00024220: 2020 2020 2020 2063 6f6e 7374 616e 7473         constants
+00024230: 203d 2066 756e 6374 6f6f 6c73 2e70 6172   = functools.par
+00024240: 7469 616c 280a 2020 2020 2020 2020 2020  tial(.          
+00024250: 2020 2020 2020 7365 6c66 2e5f 6375 6d73        self._cums
+00024260: 756d 5f61 6e69 6d61 6c5f 6765 6f6d 6574  um_animal_geomet
+00024270: 7269 6573 5f67 7269 645f 6865 6c70 6572  ries_grid_helper
+00024280: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00024290: 2020 6772 6964 3d67 7269 642c 0a20 2020    grid=grid,.   
+000242a0: 2020 2020 2020 2020 2020 2020 2073 697a               siz
+000242b0: 653d 2868 2c20 7729 2c0a 2020 2020 2020  e=(h, w),.      
+000242c0: 2020 2020 2020 2020 2020 7665 7262 6f73            verbos
+000242d0: 653d 7665 7262 6f73 652c 0a20 2020 2020  e=verbose,.     
+000242e0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000242f0: 2020 2020 2066 6f72 2063 6e74 2c20 7265       for cnt, re
+00024300: 7375 6c74 2069 6e20 656e 756d 6572 6174  sult in enumerat
+00024310: 6528 706f 6f6c 2e69 6d61 7028 636f 6e73  e(pool.imap(cons
+00024320: 7461 6e74 732c 2064 6174 612c 2063 6875  tants, data, chu
+00024330: 6e6b 7369 7a65 3d31 2929 3a0a 2020 2020  nksize=1)):.    
+00024340: 2020 2020 2020 2020 2020 2020 696d 675f              img_
+00024350: 6172 725b 636e 745d 203d 2072 6573 756c  arr[cnt] = resul
+00024360: 740a 0a20 2020 2020 2020 2074 696d 6572  t..        timer
+00024370: 2e73 746f 705f 7469 6d65 7228 290a 2020  .stop_timer().  
+00024380: 2020 2020 2020 7374 646f 7574 5f73 7563        stdout_suc
+00024390: 6365 7373 280a 2020 2020 2020 2020 2020  cess(.          
+000243a0: 2020 6d73 673d 2243 756d 756c 6174 6976    msg="Cumulativ
+000243b0: 6520 616e 696d 616c 2067 656f 6d65 7472  e animal geometr
+000243c0: 6965 7320 696e 2067 7269 6420 636f 6d70  ies in grid comp
+000243d0: 6c65 7465 222c 0a20 2020 2020 2020 2020  lete",.         
+000243e0: 2020 2065 6c61 7073 6564 5f74 696d 653d     elapsed_time=
+000243f0: 7469 6d65 722e 656c 6170 7365 645f 7469  timer.elapsed_ti
+00024400: 6d65 5f73 7472 2c0a 2020 2020 2020 2020  me_str,.        
+00024410: 290a 2020 2020 2020 2020 6966 2066 7073  ).        if fps
+00024420: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00024430: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
+00024440: 6375 6d73 756d 2869 6d67 5f61 7272 2c20  cumsum(img_arr, 
+00024450: 6178 6973 3d30 290a 2020 2020 2020 2020  axis=0).        
+00024460: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00024470: 2020 7265 7475 726e 206e 702e 6375 6d73    return np.cums
+00024480: 756d 2869 6d67 5f61 7272 2c20 6178 6973  um(img_arr, axis
+00024490: 3d30 2920 2f20 6670 730a 0a20 2020 2040  =0) / fps..    @
+000244a0: 7374 6174 6963 6d65 7468 6f64 0a20 2020  staticmethod.   
+000244b0: 2064 6566 2068 6175 7364 6f72 6666 5f64   def hausdorff_d
+000244c0: 6973 7461 6e63 6528 0a20 2020 2020 2020  istance(.       
+000244d0: 2067 656f 6d65 7472 6965 733a 204c 6973   geometries: Lis
+000244e0: 745b 4c69 7374 5b55 6e69 6f6e 5b50 6f6c  t[List[Union[Pol
+000244f0: 7967 6f6e 2c20 4c69 6e65 5374 7269 6e67  ygon, LineString
+00024500: 5d5d 5d0a 2020 2020 2920 2d3e 206e 702e  ]]].    ) -> np.
+00024510: 6e64 6172 7261 793a 0a20 2020 2020 2020  ndarray:.       
+00024520: 2022 2222 0a20 2020 2020 2020 2054 6865   """.        The
+00024530: 2048 6175 7364 6f72 6666 2064 6973 7461   Hausdorff dista
+00024540: 6e63 6520 6d65 6173 7572 6520 6f66 2074  nce measure of t
+00024550: 6865 2073 696d 696c 6172 6974 7920 6265  he similarity be
+00024560: 7477 6565 6e20 7469 6d65 2d73 6572 6965  tween time-serie
+00024570: 7320 7365 7175 656e 7469 616c 2067 656f  s sequential geo
+00024580: 6d65 7472 6965 732e 2049 7420 6973 2064  metries. It is d
+00024590: 6566 696e 6564 2061 7320 7468 6520 6d61  efined as the ma
+000245a0: 7869 6d75 6d20 6f66 2074 6865 2064 6973  ximum of the dis
+000245b0: 7461 6e63 6573 0a20 2020 2020 2020 2066  tances.        f
+000245c0: 726f 6d20 6561 6368 2070 6f69 6e74 2069  rom each point i
+000245d0: 6e20 6f6e 6520 7365 7420 746f 2074 6865  n one set to the
+000245e0: 206e 6561 7265 7374 2070 6f69 6e74 2069   nearest point i
+000245f0: 6e20 7468 6520 6f74 6865 7220 7365 742e  n the other set.
+00024600: 0a0a 2020 2020 2020 2020 4861 7573 646f  ..        Hausdo
+00024610: 7266 6620 6469 7374 616e 6365 2063 616e  rff distance can
+00024620: 2062 6520 7573 6564 2074 6f20 6d65 6173   be used to meas
+00024630: 7572 6520 7468 6520 7369 6d69 6c61 7269  ure the similari
+00024640: 7479 206f 6620 7468 6520 6765 6f6d 6574  ty of the geomet
+00024650: 7279 2069 6e20 6f6e 6520 6672 616d 6520  ry in one frame 
+00024660: 7265 6c61 7469 7665 2074 6f20 7468 6520  relative to the 
+00024670: 6765 6f6d 6574 7279 2069 6e20 7468 6520  geometry in the 
+00024680: 6e65 7874 2066 7261 6d65 2e0a 2020 2020  next frame..    
+00024690: 2020 2020 4c61 7267 6572 2076 616c 7565      Larger value
+000246a0: 7320 696e 6469 6361 7465 2074 6861 7420  s indicate that 
+000246b0: 7468 6520 616e 696d 616c 2068 6173 2061  the animal has a
+000246c0: 2064 6966 6665 7265 6e74 2073 6861 7065   different shape
+000246d0: 2074 6861 6e20 696e 2074 6865 2070 7265   than in the pre
+000246e0: 6365 6469 6e67 2073 6861 7065 2e0a 0a20  ceding shape... 
+000246f0: 2020 2020 2020 203a 7061 7261 6d20 4c69         :param Li
+00024700: 7374 5b4c 6973 745b 556e 696f 6e5b 506f  st[List[Union[Po
+00024710: 6c79 676f 6e2c 204c 696e 6553 7472 696e  lygon, LineStrin
+00024720: 675d 5d5d 2067 656f 6d65 7472 6965 733a  g]]] geometries:
+00024730: 204c 6973 7420 6f66 206c 6973 7420 7768   List of list wh
+00024740: 6572 6520 6561 6368 206c 6973 7420 6861  ere each list ha
+00024750: 7320 7477 6f20 6765 6f6d 6574 7269 6573  s two geometries
+00024760: 2e0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
+00024770: 6e20 6e70 2e6e 6461 7272 6179 3a20 3144  n np.ndarray: 1D
+00024780: 2061 7272 6179 206f 6620 6861 7573 646f   array of hausdo
+00024790: 7266 6620 6469 7374 616e 6365 7320 6f66  rff distances of
+000247a0: 2067 656f 6d65 7472 6965 7320 696e 2065   geometries in e
+000247b0: 6163 6820 6c69 7374 2e0a 0a20 2020 2020  ach list...     
+000247c0: 2020 203a 6578 616d 706c 653a 0a20 2020     :example:.   
+000247d0: 2020 2020 203e 3e3e 2078 203d 2050 6f6c       >>> x = Pol
+000247e0: 7967 6f6e 285b 5b30 2c31 5d2c 205b 302c  ygon([[0,1], [0,
+000247f0: 2032 5d2c 205b 312c 315d 5d29 0a20 2020   2], [1,1]]).   
+00024800: 2020 2020 203e 3e3e 2079 203d 2050 6f6c       >>> y = Pol
+00024810: 7967 6f6e 285b 5b30 2c31 5d2c 205b 302c  ygon([[0,1], [0,
+00024820: 2032 5d2c 205b 302c 315d 5d29 0a20 2020   2], [0,1]]).   
+00024830: 2020 2020 203e 3e3e 2047 656f 6d65 7472       >>> Geometr
+00024840: 794d 6978 696e 2e68 6175 7364 6f72 6666  yMixin.hausdorff
+00024850: 5f64 6973 7461 6e63 6528 6765 6f6d 6574  _distance(geomet
+00024860: 7269 6573 3d5b 5b78 2c20 795d 5d29 0a20  ries=[[x, y]]). 
+00024870: 2020 2020 2020 203e 3e3e 205b 312e 5d0a         >>> [1.].
+00024880: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+00024890: 2020 2020 2063 6865 636b 5f69 6e73 7461       check_insta
+000248a0: 6e63 6528 0a20 2020 2020 2020 2020 2020  nce(.           
+000248b0: 2073 6f75 7263 653d 4765 6f6d 6574 7279   source=Geometry
+000248c0: 4d69 7869 6e2e 6861 7573 646f 7266 665f  Mixin.hausdorff_
+000248d0: 6469 7374 616e 6365 2e5f 5f6e 616d 655f  distance.__name_
+000248e0: 5f2c 0a20 2020 2020 2020 2020 2020 2069  _,.            i
+000248f0: 6e73 7461 6e63 653d 6765 6f6d 6574 7269  nstance=geometri
+00024900: 6573 2c0a 2020 2020 2020 2020 2020 2020  es,.            
+00024910: 6163 6365 7074 6564 5f74 7970 6573 3d28  accepted_types=(
+00024920: 6c69 7374 2c29 2c0a 2020 2020 2020 2020  list,),.        
+00024930: 290a 2020 2020 2020 2020 666f 7220 6920  ).        for i 
+00024940: 696e 2067 656f 6d65 7472 6965 733a 0a20  in geometries:. 
+00024950: 2020 2020 2020 2020 2020 2063 6865 636b             check
+00024960: 5f76 616c 6964 5f6c 7374 280a 2020 2020  _valid_lst(.    
+00024970: 2020 2020 2020 2020 2020 2020 736f 7572              sour
+00024980: 6365 3d47 656f 6d65 7472 794d 6978 696e  ce=GeometryMixin
+00024990: 2e68 6175 7364 6f72 6666 5f64 6973 7461  .hausdorff_dista
+000249a0: 6e63 652e 5f5f 6e61 6d65 5f5f 2c0a 2020  nce.__name__,.  
+000249b0: 2020 2020 2020 2020 2020 2020 2020 6461                da
+000249c0: 7461 3d69 2c0a 2020 2020 2020 2020 2020  ta=i,.          
+000249d0: 2020 2020 2020 7661 6c69 645f 6474 7970        valid_dtyp
+000249e0: 6573 3d28 0a20 2020 2020 2020 2020 2020  es=(.           
+000249f0: 2020 2020 2020 2020 2050 6f6c 7967 6f6e           Polygon
+00024a00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00024a10: 2020 2020 2020 4c69 6e65 5374 7269 6e67        LineString
+00024a20: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00024a30: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
+00024a40: 2020 2020 2065 7861 6374 5f6c 656e 3d32       exact_len=2
+00024a50: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
+00024a60: 2020 2020 2020 2020 7265 7375 6c74 7320          results 
+00024a70: 3d20 6e70 2e66 756c 6c28 286c 656e 2867  = np.full((len(g
+00024a80: 656f 6d65 7472 6965 7329 292c 206e 702e  eometries)), np.
+00024a90: 6e61 6e29 0a20 2020 2020 2020 2066 6f72  nan).        for
+00024aa0: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
+00024ab0: 6765 6f6d 6574 7269 6573 2929 3a0a 2020  geometries)):.  
+00024ac0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00024ad0: 735b 695d 203d 2067 656f 6d65 7472 6965  s[i] = geometrie
+00024ae0: 735b 695d 5b30 5d2e 6861 7573 646f 7266  s[i][0].hausdorf
+00024af0: 665f 6469 7374 616e 6365 2867 656f 6d65  f_distance(geome
+00024b00: 7472 6965 735b 695d 5b31 5d29 0a20 2020  tries[i][1]).   
+00024b10: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+00024b20: 6c74 730a 0a20 2020 2064 6566 206d 756c  lts..    def mul
+00024b30: 7469 6672 616d 655f 6861 7573 646f 7266  tiframe_hausdorf
+00024b40: 665f 6469 7374 616e 6365 280a 2020 2020  f_distance(.    
+00024b50: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+00024b60: 2020 6765 6f6d 6574 7269 6573 3a20 4c69    geometries: Li
+00024b70: 7374 5b55 6e69 6f6e 5b50 6f6c 7967 6f6e  st[Union[Polygon
+00024b80: 2c20 4c69 6e65 5374 7269 6e67 5d5d 2c0a  , LineString]],.
+00024b90: 2020 2020 2020 2020 6c61 673a 204f 7074          lag: Opt
+00024ba0: 696f 6e61 6c5b 696e 745d 203d 2031 2c0a  ional[int] = 1,.
+00024bb0: 2020 2020 2020 2020 636f 7265 5f63 6e74          core_cnt
+00024bc0: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+00024bd0: 3d20 2d31 2c0a 2020 2020 2920 2d3e 204c  = -1,.    ) -> L
+00024be0: 6973 745b 666c 6f61 745d 3a0a 2020 2020  ist[float]:.    
+00024bf0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00024c00: 5468 6520 4861 7573 646f 7266 6620 6469  The Hausdorff di
+00024c10: 7374 616e 6365 206d 6561 7375 7265 206f  stance measure o
+00024c20: 6620 7468 6520 7369 6d69 6c61 7269 7479  f the similarity
+00024c30: 2062 6574 7765 656e 2073 6571 7565 6e74   between sequent
+00024c40: 6961 6c20 7469 6d65 2d73 6572 6965 7320  ial time-series 
+00024c50: 2067 656f 6d65 7472 6965 732e 0a0a 2020   geometries...  
+00024c60: 2020 2020 2020 3a65 7861 6d70 6c65 3a0a        :example:.
+00024c70: 2020 2020 2020 2020 3e3e 3e20 6466 203d          >>> df =
+00024c80: 2072 6561 645f 6466 2866 696c 655f 7061   read_df(file_pa
+00024c90: 7468 3d27 2f55 7365 7273 2f73 696d 6f6e  th='/Users/simon
+00024ca0: 2f44 6573 6b74 6f70 2f65 6e76 732f 7369  /Desktop/envs/si
+00024cb0: 6d62 612f 7472 6f75 626c 6573 686f 6f74  mba/troubleshoot
+00024cc0: 696e 672f 6d6f 7573 655f 6f70 656e 5f66  ing/mouse_open_f
+00024cd0: 6965 6c64 2f70 726f 6a65 6374 5f66 6f6c  ield/project_fol
+00024ce0: 6465 722f 6373 762f 6f75 746c 6965 725f  der/csv/outlier_
+00024cf0: 636f 7272 6563 7465 645f 6d6f 7665 6d65  corrected_moveme
+00024d00: 6e74 5f6c 6f63 6174 696f 6e2f 5349 5f44  nt_location/SI_D
+00024d10: 4159 335f 3330 385f 4344 315f 5052 4553  AY3_308_CD1_PRES
+00024d20: 454e 542e 6373 7627 2c20 6669 6c65 5f74  ENT.csv', file_t
+00024d30: 7970 653d 2763 7376 2729 0a20 2020 2020  ype='csv').     
+00024d40: 2020 203e 3e3e 2063 6f6c 7320 3d20 5b78     >>> cols = [x
+00024d50: 2066 6f72 2078 2069 6e20 6466 2e63 6f6c   for x in df.col
+00024d60: 756d 6e73 2069 6620 6e6f 7420 782e 656e  umns if not x.en
+00024d70: 6473 7769 7468 2827 5f70 2729 5d0a 2020  dswith('_p')].  
+00024d80: 2020 2020 2020 3e3e 3e20 6461 7461 203d        >>> data =
+00024d90: 2064 665b 636f 6c73 5d2e 7661 6c75 6573   df[cols].values
+00024da0: 2e72 6573 6861 7065 286c 656e 2864 6629  .reshape(len(df)
+00024db0: 2c20 2d31 202c 2032 292e 6173 7479 7065  , -1 , 2).astype
+00024dc0: 286e 702e 696e 7429 0a20 2020 2020 2020  (np.int).       
+00024dd0: 203e 3e3e 2067 656f 6d65 7472 6965 7320   >>> geometries 
+00024de0: 3d20 4765 6f6d 6574 7279 4d69 7869 6e28  = GeometryMixin(
+00024df0: 292e 6d75 6c74 6966 7261 6d65 5f62 6f64  ).multiframe_bod
+00024e00: 7970 6172 7473 5f74 6f5f 706f 6c79 676f  yparts_to_polygo
+00024e10: 6e28 6461 7461 3d64 6174 612c 2070 6978  n(data=data, pix
+00024e20: 656c 735f 7065 725f 6d6d 3d31 2c20 7061  els_per_mm=1, pa
+00024e30: 7261 6c6c 656c 5f6f 6666 7365 743d 312c  rallel_offset=1,
+00024e40: 2076 6572 626f 7365 3d46 616c 7365 2c20   verbose=False, 
+00024e50: 636f 7265 5f63 6e74 3d2d 3129 0a20 2020  core_cnt=-1).   
+00024e60: 2020 2020 203e 3e3e 2068 6175 7364 6f72       >>> hausdor
+00024e70: 6666 5f64 6973 7461 6e63 6573 203d 2047  ff_distances = G
+00024e80: 656f 6d65 7472 794d 6978 696e 2e6d 756c  eometryMixin.mul
+00024e90: 7469 6672 616d 655f 6861 7573 646f 7266  tiframe_hausdorf
+00024ea0: 665f 6469 7374 616e 6365 2867 656f 6d65  f_distance(geome
+00024eb0: 7472 6965 733d 6765 6f6d 6574 7269 6573  tries=geometries
+00024ec0: 290a 2020 2020 2020 2020 2222 220a 0a20  ).        """.. 
+00024ed0: 2020 2020 2020 2063 6865 636b 5f76 616c         check_val
+00024ee0: 6964 5f6c 7374 280a 2020 2020 2020 2020  id_lst(.        
+00024ef0: 2020 2020 736f 7572 6365 3d47 656f 6d65      source=Geome
+00024f00: 7472 794d 6978 696e 2e6d 756c 7469 6672  tryMixin.multifr
+00024f10: 616d 655f 6861 7573 646f 7266 665f 6469  ame_hausdorff_di
+00024f20: 7374 616e 6365 2e5f 5f6e 616d 655f 5f2c  stance.__name__,
+00024f30: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+00024f40: 613d 6765 6f6d 6574 7269 6573 2c0a 2020  a=geometries,.  
+00024f50: 2020 2020 2020 2020 2020 7661 6c69 645f            valid_
+00024f60: 6474 7970 6573 3d28 0a20 2020 2020 2020  dtypes=(.       
+00024f70: 2020 2020 2020 2020 2050 6f6c 7967 6f6e           Polygon
+00024f80: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00024f90: 2020 4c69 6e65 5374 7269 6e67 2c0a 2020    LineString,.  
+00024fa0: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
+00024fb0: 2020 2020 2020 2020 206d 696e 5f6c 656e           min_len
+00024fc0: 3d31 2c0a 2020 2020 2020 2020 290a 2020  =1,.        ).  
+00024fd0: 2020 2020 2020 6368 6563 6b5f 696e 7428        check_int(
+00024fe0: 0a20 2020 2020 2020 2020 2020 206e 616d  .            nam
+00024ff0: 653d 6622 7b47 656f 6d65 7472 794d 6978  e=f"{GeometryMix
+00025000: 696e 2e6d 756c 7469 6672 616d 655f 6861  in.multiframe_ha
+00025010: 7573 646f 7266 665f 6469 7374 616e 6365  usdorff_distance
+00025020: 2e5f 5f6e 616d 655f 5f7d 2043 4f52 4520  .__name__} CORE 
+00025030: 434f 554e 5422 2c0a 2020 2020 2020 2020  COUNT",.        
+00025040: 2020 2020 7661 6c75 653d 636f 7265 5f63      value=core_c
+00025050: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+00025060: 6d69 6e5f 7661 6c75 653d 2d31 2c0a 2020  min_value=-1,.  
+00025070: 2020 2020 2020 2020 2020 6d61 785f 7661            max_va
+00025080: 6c75 653d 6669 6e64 5f63 6f72 655f 636e  lue=find_core_cn
+00025090: 7428 295b 305d 2c0a 2020 2020 2020 2020  t()[0],.        
+000250a0: 2020 2020 7261 6973 655f 6572 726f 723d      raise_error=
+000250b0: 5472 7565 2c0a 2020 2020 2020 2020 290a  True,.        ).
+000250c0: 2020 2020 2020 2020 6368 6563 6b5f 696e          check_in
+000250d0: 7428 0a20 2020 2020 2020 2020 2020 206e  t(.            n
+000250e0: 616d 653d 6622 7b47 656f 6d65 7472 794d  ame=f"{GeometryM
+000250f0: 6978 696e 2e6d 756c 7469 6672 616d 655f  ixin.multiframe_
+00025100: 6861 7573 646f 7266 665f 6469 7374 616e  hausdorff_distan
+00025110: 6365 2e5f 5f6e 616d 655f 5f7d 204c 4147  ce.__name__} LAG
+00025120: 222c 0a20 2020 2020 2020 2020 2020 2076  ",.            v
+00025130: 616c 7565 3d6c 6167 2c0a 2020 2020 2020  alue=lag,.      
+00025140: 2020 2020 2020 6d69 6e5f 7661 6c75 653d        min_value=
+00025150: 2d31 2c0a 2020 2020 2020 2020 2020 2020  -1,.            
+00025160: 6d61 785f 7661 6c75 653d 6c65 6e28 6765  max_value=len(ge
+00025170: 6f6d 6574 7269 6573 2920 2d20 312c 0a20  ometries) - 1,. 
+00025180: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00025190: 5f65 7272 6f72 3d54 7275 652c 0a20 2020  _error=True,.   
+000251a0: 2020 2020 2029 0a20 2020 2020 2020 2069       ).        i
+000251b0: 6620 636f 7265 5f63 6e74 203d 3d20 2d31  f core_cnt == -1
+000251c0: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+000251d0: 7265 5f63 6e74 203d 2066 696e 645f 636f  re_cnt = find_co
+000251e0: 7265 5f63 6e74 2829 5b30 5d0a 2020 2020  re_cnt()[0].    
+000251f0: 2020 2020 7265 7368 6170 6564 5f67 656f      reshaped_geo
+00025200: 6d65 7472 6965 7320 3d20 5b5d 0a20 2020  metries = [].   
+00025210: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
+00025220: 6e67 6528 6c61 6729 3a0a 2020 2020 2020  nge(lag):.      
+00025230: 2020 2020 2020 7265 7368 6170 6564 5f67        reshaped_g
+00025240: 656f 6d65 7472 6965 732e 6170 7065 6e64  eometries.append
+00025250: 285b 5b67 656f 6d65 7472 6965 735b 695d  ([[geometries[i]
+00025260: 2c20 6765 6f6d 6574 7269 6573 5b69 5d5d  , geometries[i]]
+00025270: 5d29 0a20 2020 2020 2020 2066 6f72 2069  ]).        for i
+00025280: 2069 6e20 7261 6e67 6528 6c61 672c 206c   in range(lag, l
+00025290: 656e 2867 656f 6d65 7472 6965 7329 293a  en(geometries)):
+000252a0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+000252b0: 6861 7065 645f 6765 6f6d 6574 7269 6573  haped_geometries
+000252c0: 2e61 7070 656e 6428 5b5b 6765 6f6d 6574  .append([[geomet
+000252d0: 7269 6573 5b69 202d 206c 6167 5d2c 2067  ries[i - lag], g
+000252e0: 656f 6d65 7472 6965 735b 695d 5d5d 290a  eometries[i]]]).
+000252f0: 2020 2020 2020 2020 7265 7375 6c74 7320          results 
+00025300: 3d20 5b5d 0a20 2020 2020 2020 2077 6974  = [].        wit
+00025310: 6820 6d75 6c74 6970 726f 6365 7373 696e  h multiprocessin
+00025320: 672e 506f 6f6c 280a 2020 2020 2020 2020  g.Pool(.        
+00025330: 2020 2020 636f 7265 5f63 6e74 2c20 6d61      core_cnt, ma
+00025340: 7874 6173 6b73 7065 7263 6869 6c64 3d44  xtasksperchild=D
+00025350: 6566 6175 6c74 732e 4c41 5247 455f 4d41  efaults.LARGE_MA
+00025360: 585f 5441 534b 5f50 4552 5f43 4849 4c44  X_TASK_PER_CHILD
+00025370: 2e76 616c 7565 0a20 2020 2020 2020 2029  .value.        )
+00025380: 2061 7320 706f 6f6c 3a0a 2020 2020 2020   as pool:.      
+00025390: 2020 2020 2020 666f 7220 636e 742c 206d        for cnt, m
+000253a0: 705f 7265 7475 726e 2069 6e20 656e 756d  p_return in enum
+000253b0: 6572 6174 6528 0a20 2020 2020 2020 2020  erate(.         
+000253c0: 2020 2020 2020 2070 6f6f 6c2e 696d 6170         pool.imap
+000253d0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000253e0: 2020 2020 2020 4765 6f6d 6574 7279 4d69        GeometryMi
+000253f0: 7869 6e2e 6861 7573 646f 7266 665f 6469  xin.hausdorff_di
+00025400: 7374 616e 6365 2c20 7265 7368 6170 6564  stance, reshaped
+00025410: 5f67 656f 6d65 7472 6965 732c 2063 6875  _geometries, chu
+00025420: 6e6b 7369 7a65 3d31 0a20 2020 2020 2020  nksize=1.       
+00025430: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00025440: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+00025450: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00025460: 732e 6170 7065 6e64 286d 705f 7265 7475  s.append(mp_retu
+00025470: 726e 5b30 5d29 0a20 2020 2020 2020 2072  rn[0]).        r
+00025480: 6574 7572 6e20 7265 7375 6c74 730a 0a20  eturn results.. 
+00025490: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+000254a0: 0a20 2020 2064 6566 206c 6f63 6174 655f  .    def locate_
+000254b0: 6c69 6e65 5f70 6f69 6e74 280a 2020 2020  line_point(.    
+000254c0: 2020 2020 7061 7468 3a20 556e 696f 6e5b      path: Union[
+000254d0: 4c69 6e65 5374 7269 6e67 2c20 6e70 2e6e  LineString, np.n
+000254e0: 6461 7272 6179 5d2c 0a20 2020 2020 2020  darray],.       
+000254f0: 2067 656f 6d65 7472 793a 2055 6e69 6f6e   geometry: Union
+00025500: 5b4c 696e 6553 7472 696e 672c 2050 6f6c  [LineString, Pol
+00025510: 7967 6f6e 2c20 506f 696e 745d 2c0a 2020  ygon, Point],.  
+00025520: 2020 2020 2020 7078 5f70 6572 5f6d 6d3a        px_per_mm:
+00025530: 204f 7074 696f 6e61 6c5b 666c 6f61 745d   Optional[float]
+00025540: 203d 2031 2c0a 2020 2020 2020 2020 6670   = 1,.        fp
+00025550: 733a 204f 7074 696f 6e61 6c5b 666c 6f61  s: Optional[floa
+00025560: 745d 203d 2031 2c0a 2020 2020 2020 2020  t] = 1,.        
+00025570: 636f 7265 5f63 6e74 3a20 4f70 7469 6f6e  core_cnt: Option
+00025580: 616c 5b69 6e74 5d20 3d20 2d31 2c0a 2020  al[int] = -1,.  
+00025590: 2020 2020 2020 6469 7374 616e 6365 5f6d        distance_m
+000255a0: 696e 3a20 4f70 7469 6f6e 616c 5b62 6f6f  in: Optional[boo
+000255b0: 6c5d 203d 2054 7275 652c 0a20 2020 2020  l] = True,.     
+000255c0: 2020 2074 696d 655f 7072 696f 723a 204f     time_prior: O
+000255d0: 7074 696f 6e61 6c5b 626f 6f6c 5d20 3d20  ptional[bool] = 
+000255e0: 5472 7565 2c0a 2020 2020 2920 2d3e 2044  True,.    ) -> D
+000255f0: 6963 745b 7374 722c 2066 6c6f 6174 5d3a  ict[str, float]:
+00025600: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00025610: 2020 2020 2043 6f6d 7075 7465 2074 6865       Compute the
+00025620: 2074 696d 6520 616e 6420 6469 7374 616e   time and distan
+00025630: 6365 2074 7261 7665 6c6c 6564 2061 6c6f  ce travelled alo
+00025640: 6e67 2061 2070 6174 6820 746f 2072 6561  ng a path to rea
+00025650: 6368 2074 6865 206d 6f73 7420 7072 6f78  ch the most prox
+00025660: 696d 616c 2070 6f69 6e74 2069 6e20 7265  imal point in re
+00025670: 6665 7265 6e63 6520 746f 2061 2073 6563  ference to a sec
+00025680: 6f6e 6420 6765 6f6d 6574 7279 2e0a 0a20  ond geometry... 
+00025690: 2020 2020 2020 202e 2e20 6e6f 7465 3a3a         .. note::
+000256a0: 0a20 2020 2020 2020 2020 2020 2869 2920  .           (i) 
+000256b0: 546f 2063 6f6d 7075 7465 2074 6865 2074  To compute the t
+000256c0: 696d 6520 616e 6420 6469 7374 616e 6365  ime and distance
+000256d0: 2074 7261 7665 6c6c 6564 2074 6f20 616c   travelled to al
+000256e0: 6f6e 6720 6120 7061 7468 2074 6f20 7265  ong a path to re
+000256f0: 6163 6820 7468 6520 6d6f 7374 2064 6973  ach the most dis
+00025700: 7461 6c20 706f 696e 7420 746f 2061 2073  tal point to a s
+00025710: 6563 6f6e 6420 6765 6f6d 6574 7279 2c20  econd geometry, 
+00025720: 7061 7373 2060 6064 6973 7461 6e63 655f  pass ``distance_
+00025730: 6d69 6e20 3d20 4661 6c73 6560 602e 0a0a  min = False``...
+00025740: 2020 2020 2020 2020 2020 2028 6969 2920             (ii) 
+00025750: 546f 2063 6f6d 7075 7465 2074 6865 2074  To compute the t
+00025760: 696d 6520 616e 6420 6469 7374 616e 6365  ime and distance
+00025770: 2074 7261 7665 6c6c 6564 2061 6c6f 6e67   travelled along
+00025780: 2061 2070 6174 6820 2a2a 6166 7465 722a   a path **after*
+00025790: 2a20 7265 6163 6869 6e67 2074 6865 206d  * reaching the m
+000257a0: 6f73 7420 6469 7374 616c 206f 7220 7072  ost distal or pr
+000257b0: 6f78 696d 616c 2070 6f69 6e74 2074 6f20  oximal point to 
+000257c0: 6120 7365 636f 6e64 2067 656f 6d65 7472  a second geometr
+000257d0: 792c 2070 6173 7320 6060 7469 6d65 5f70  y, pass ``time_p
+000257e0: 7269 6f72 203d 2046 616c 7365 6060 2e0a  rior = False``..
+000257f0: 0a20 2020 2020 2020 202e 2e20 696d 6167  .        .. imag
+00025800: 653a 3a20 5f73 7461 7469 632f 696d 672f  e:: _static/img/
+00025810: 6c6f 6361 7465 5f6c 696e 655f 706f 696e  locate_line_poin
+00025820: 742e 706e 670a 2020 2020 2020 2020 2020  t.png.          
+00025830: 203a 7769 6474 683a 2036 3030 0a20 2020   :width: 600.   
+00025840: 2020 2020 2020 2020 3a61 6c69 676e 3a20          :align: 
+00025850: 6365 6e74 6572 0a0a 2020 2020 2020 2020  center..        
+00025860: 3a65 7861 6d70 6c65 3a0a 2020 2020 2020  :example:.      
+00025870: 2020 3e3e 3e20 6c69 6e65 203d 204c 696e    >>> line = Lin
+00025880: 6553 7472 696e 6728 5b5b 3130 2c20 3130  eString([[10, 10
+00025890: 5d2c 205b 372e 352c 2037 2e35 5d2c 205b  ], [7.5, 7.5], [
+000258a0: 3135 2c20 3135 5d2c 205b 372e 352c 2037  15, 15], [7.5, 7
+000258b0: 2e35 5d5d 290a 2020 2020 2020 2020 3e3e  .5]]).        >>
+000258c0: 3e20 706f 6c79 676f 6e20 3d20 506f 6c79  > polygon = Poly
+000258d0: 676f 6e28 5b5b 302c 2035 5d2c 205b 302c  gon([[0, 5], [0,
+000258e0: 2030 5d2c 205b 352c 2030 5d2c 205b 352c   0], [5, 0], [5,
+000258f0: 2035 5d5d 290a 2020 2020 2020 2020 3e3e   5]]).        >>
+00025900: 3e20 4765 6f6d 6574 7279 4d69 7869 6e2e  > GeometryMixin.
+00025910: 6c6f 6361 7465 5f6c 696e 655f 706f 696e  locate_line_poin
+00025920: 7428 7061 7468 3d6c 696e 652c 2067 656f  t(path=line, geo
+00025930: 6d65 7472 793d 706f 6c79 676f 6e29 0a20  metry=polygon). 
+00025940: 2020 2020 2020 203e 3e3e 207b 2764 6973         >>> {'dis
+00025950: 7461 6e63 655f 7661 6c75 6527 3a20 332e  tance_value': 3.
+00025960: 3533 3535 3333 3930 3539 3332 3733 3738  5355339059327378
+00025970: 2c20 2764 6973 7461 6e63 655f 7472 6176  , 'distance_trav
+00025980: 656c 6c65 6427 3a20 332e 3533 3535 3333  elled': 3.535533
+00025990: 3930 3539 3332 3733 3738 2c20 2774 696d  9059327378, 'tim
+000259a0: 655f 7472 6176 656c 6c65 6427 3a20 312e  e_travelled': 1.
+000259b0: 302c 2027 6469 7374 616e 6365 5f69 6e64  0, 'distance_ind
+000259c0: 6578 273a 2031 7d0a 2020 2020 2020 2020  ex': 1}.        
+000259d0: 2222 220a 0a20 2020 2020 2020 2063 6865  """..        che
+000259e0: 636b 5f69 6e73 7461 6e63 6528 0a20 2020  ck_instance(.   
+000259f0: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
+00025a00: 4765 6f6d 6574 7279 4d69 7869 6e2e 6c6f  GeometryMixin.lo
+00025a10: 6361 7465 5f6c 696e 655f 706f 696e 742e  cate_line_point.
+00025a20: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
+00025a30: 2020 2020 2020 696e 7374 616e 6365 3d70        instance=p
+00025a40: 6174 682c 0a20 2020 2020 2020 2020 2020  ath,.           
+00025a50: 2061 6363 6570 7465 645f 7479 7065 733d   accepted_types=
+00025a60: 284c 696e 6553 7472 696e 672c 206e 702e  (LineString, np.
+00025a70: 6e64 6172 7261 7929 2c0a 2020 2020 2020  ndarray),.      
+00025a80: 2020 290a 2020 2020 2020 2020 6368 6563    ).        chec
+00025a90: 6b5f 696e 7374 616e 6365 280a 2020 2020  k_instance(.    
+00025aa0: 2020 2020 2020 2020 736f 7572 6365 3d47          source=G
+00025ab0: 656f 6d65 7472 794d 6978 696e 2e6c 6f63  eometryMixin.loc
+00025ac0: 6174 655f 6c69 6e65 5f70 6f69 6e74 2e5f  ate_line_point._
+00025ad0: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
+00025ae0: 2020 2020 2069 6e73 7461 6e63 653d 6765       instance=ge
+00025af0: 6f6d 6574 7279 2c0a 2020 2020 2020 2020  ometry,.        
+00025b00: 2020 2020 6163 6365 7074 6564 5f74 7970      accepted_typ
+00025b10: 6573 3d28 4c69 6e65 5374 7269 6e67 2c20  es=(LineString, 
+00025b20: 506f 6c79 676f 6e2c 2050 6f69 6e74 292c  Polygon, Point),
+00025b30: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00025b40: 2020 2063 6865 636b 5f69 6e74 280a 2020     check_int(.  
+00025b50: 2020 2020 2020 2020 2020 6e61 6d65 3d22            name="
+00025b60: 434f 5245 2043 4f55 4e54 222c 0a20 2020  CORE COUNT",.   
+00025b70: 2020 2020 2020 2020 2076 616c 7565 3d63           value=c
+00025b80: 6f72 655f 636e 742c 0a20 2020 2020 2020  ore_cnt,.       
+00025b90: 2020 2020 206d 696e 5f76 616c 7565 3d2d       min_value=-
+00025ba0: 312c 0a20 2020 2020 2020 2020 2020 206d  1,.            m
+00025bb0: 6178 5f76 616c 7565 3d66 696e 645f 636f  ax_value=find_co
+00025bc0: 7265 5f63 6e74 2829 5b30 5d2c 0a20 2020  re_cnt()[0],.   
+00025bd0: 2020 2020 2020 2020 2072 6169 7365 5f65           raise_e
+00025be0: 7272 6f72 3d54 7275 652c 0a20 2020 2020  rror=True,.     
+00025bf0: 2020 2029 0a20 2020 2020 2020 2063 6865     ).        che
+00025c00: 636b 5f66 6c6f 6174 280a 2020 2020 2020  ck_float(.      
+00025c10: 2020 2020 2020 6e61 6d65 3d22 5049 5845        name="PIXE
+00025c20: 4c53 2050 4552 204d 4d22 2c20 7661 6c75  LS PER MM", valu
+00025c30: 653d 7078 5f70 6572 5f6d 6d2c 206d 696e  e=px_per_mm, min
+00025c40: 5f76 616c 7565 3d30 2e31 2c20 7261 6973  _value=0.1, rais
+00025c50: 655f 6572 726f 723d 5472 7565 0a20 2020  e_error=True.   
+00025c60: 2020 2020 2029 0a20 2020 2020 2020 2063       ).        c
+00025c70: 6865 636b 5f66 6c6f 6174 286e 616d 653d  heck_float(name=
+00025c80: 2246 5053 222c 2076 616c 7565 3d66 7073  "FPS", value=fps
+00025c90: 2c20 6d69 6e5f 7661 6c75 653d 312c 2072  , min_value=1, r
+00025ca0: 6169 7365 5f65 7272 6f72 3d54 7275 6529  aise_error=True)
+00025cb0: 0a20 2020 2020 2020 2069 6620 636f 7265  .        if core
+00025cc0: 5f63 6e74 203d 3d20 2d31 3a0a 2020 2020  _cnt == -1:.    
+00025cd0: 2020 2020 2020 2020 636f 7265 5f63 6e74          core_cnt
+00025ce0: 203d 2066 696e 645f 636f 7265 5f63 6e74   = find_core_cnt
+00025cf0: 2829 5b30 5d0a 0a20 2020 2020 2020 2069  ()[0]..        i
+00025d00: 6620 6973 696e 7374 616e 6365 2870 6174  f isinstance(pat
+00025d10: 682c 206e 702e 6e64 6172 7261 7929 3a0a  h, np.ndarray):.
+00025d20: 2020 2020 2020 2020 2020 2020 6368 6563              chec
+00025d30: 6b5f 7661 6c69 645f 6172 7261 7928 0a20  k_valid_array(. 
+00025d40: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00025d50: 6174 613d 7061 7468 2c0a 2020 2020 2020  ata=path,.      
+00025d60: 2020 2020 2020 2020 2020 6163 6365 7074            accept
+00025d70: 6564 5f61 7869 735f 315f 7368 6170 653d  ed_axis_1_shape=
+00025d80: 2832 2c29 2c0a 2020 2020 2020 2020 2020  (2,),.          
+00025d90: 2020 2020 2020 6163 6365 7074 6564 5f64        accepted_d
+00025da0: 7479 7065 733d 286e 702e 666c 6f61 7433  types=(np.float3
+00025db0: 322c 206e 702e 666c 6f61 7436 342c 206e  2, np.float64, n
+00025dc0: 702e 696e 7436 342c 206e 702e 696e 7433  p.int64, np.int3
+00025dd0: 3229 2c0a 2020 2020 2020 2020 2020 2020  2),.            
+00025de0: 290a 2020 2020 2020 2020 2020 2020 7061  ).            pa
+00025df0: 7468 203d 204c 696e 6553 7472 696e 6728  th = LineString(
+00025e00: 7061 7468 290a 2020 2020 2020 2020 6966  path).        if
+00025e10: 2069 7369 6e73 7461 6e63 6528 6765 6f6d   isinstance(geom
+00025e20: 6574 7279 2c20 506f 696e 7429 3a0a 2020  etry, Point):.  
+00025e30: 2020 2020 2020 2020 2020 6765 6f6d 6574            geomet
+00025e40: 7279 203d 206e 702e 6172 7261 7928 6765  ry = np.array(ge
+00025e50: 6f6d 6574 7279 2e63 6f6f 7264 7329 0a20  ometry.coords). 
+00025e60: 2020 2020 2020 2020 2020 2064 6973 7461             dista
+00025e70: 6e63 6573 203d 2046 6561 7475 7265 4578  nces = FeatureEx
+00025e80: 7472 6163 7469 6f6e 4d69 7869 6e2e 6672  tractionMixin.fr
+00025e90: 616d 6577 6973 655f 6575 636c 6964 6561  amewise_euclidea
+00025ea0: 6e5f 6469 7374 616e 6365 5f72 6f69 280a  n_distance_roi(.
+00025eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025ec0: 6c6f 6361 7469 6f6e 5f31 3d6e 702e 6172  location_1=np.ar
+00025ed0: 7261 7928 7061 7468 2e63 6f6f 7264 7329  ray(path.coords)
+00025ee0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00025ef0: 2020 6c6f 6361 7469 6f6e 5f32 3d67 656f    location_2=geo
+00025f00: 6d65 7472 792c 0a20 2020 2020 2020 2020  metry,.         
+00025f10: 2020 2020 2020 2070 785f 7065 725f 6d6d         px_per_mm
+00025f20: 3d70 785f 7065 725f 6d6d 2c0a 2020 2020  =px_per_mm,.    
+00025f30: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00025f40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00025f50: 2020 2020 706f 696e 7473 203d 205b 506f      points = [Po
+00025f60: 696e 7428 7829 2066 6f72 2078 2069 6e20  int(x) for x in 
+00025f70: 6e70 2e61 7272 6179 2870 6174 682e 636f  np.array(path.co
+00025f80: 6f72 6473 295d 0a20 2020 2020 2020 2020  ords)].         
+00025f90: 2020 2067 656f 6d65 7472 7920 3d20 5b67     geometry = [g
+00025fa0: 656f 6d65 7472 7920 666f 7220 7820 696e  eometry for x in
+00025fb0: 2072 616e 6765 286c 656e 2870 6f69 6e74   range(len(point
+00025fc0: 7329 295d 0a20 2020 2020 2020 2020 2020  s))].           
+00025fd0: 2064 6973 7461 6e63 6573 203d 2047 656f   distances = Geo
+00025fe0: 6d65 7472 794d 6978 696e 2829 2e6d 756c  metryMixin().mul
+00025ff0: 7469 6672 616d 655f 7368 6170 655f 6469  tiframe_shape_di
+00026000: 7374 616e 6365 280a 2020 2020 2020 2020  stance(.        
+00026010: 2020 2020 2020 2020 7368 6170 655f 313d          shape_1=
+00026020: 706f 696e 7473 2c0a 2020 2020 2020 2020  points,.        
+00026030: 2020 2020 2020 2020 7368 6170 655f 323d          shape_2=
+00026040: 6765 6f6d 6574 7279 2c0a 2020 2020 2020  geometry,.      
+00026050: 2020 2020 2020 2020 2020 7069 7865 6c73            pixels
+00026060: 5f70 6572 5f6d 6d3d 7078 5f70 6572 5f6d  _per_mm=px_per_m
+00026070: 6d2c 0a20 2020 2020 2020 2020 2020 2020  m,.             
+00026080: 2020 2063 6f72 655f 636e 743d 636f 7265     core_cnt=core
+00026090: 5f63 6e74 2c0a 2020 2020 2020 2020 2020  _cnt,.          
+000260a0: 2020 290a 0a20 2020 2020 2020 2069 6620    )..        if 
+000260b0: 6469 7374 616e 6365 5f6d 696e 3a0a 2020  distance_min:.  
+000260c0: 2020 2020 2020 2020 2020 6469 7374 616e            distan
+000260d0: 6365 5f69 6478 203d 206e 702e 6172 676d  ce_idx = np.argm
+000260e0: 696e 2864 6973 7461 6e63 6573 290a 2020  in(distances).  
+000260f0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00026100: 2020 2020 2020 2020 6469 7374 616e 6365          distance
+00026110: 5f69 6478 203d 206e 702e 6172 676d 6178  _idx = np.argmax
+00026120: 2864 6973 7461 6e63 6573 290a 2020 2020  (distances).    
+00026130: 2020 2020 6966 2074 696d 655f 7072 696f      if time_prio
+00026140: 723a 0a20 2020 2020 2020 2020 2020 2064  r:.            d
+00026150: 6973 745f 7472 6176 656c 6c65 6420 3d20  ist_travelled = 
+00026160: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00026170: 2020 6e70 2e73 756d 286e 702e 6162 7328    np.sum(np.abs(
+00026180: 6e70 2e64 6966 6628 6469 7374 616e 6365  np.diff(distance
+00026190: 735b 3a20 6469 7374 616e 6365 5f69 6478  s[: distance_idx
+000261a0: 202b 2031 5d29 2929 202f 2070 785f 7065   + 1]))) / px_pe
+000261b0: 725f 6d6d 0a20 2020 2020 2020 2020 2020  r_mm.           
+000261c0: 2029 0a20 2020 2020 2020 2020 2020 2074   ).            t
+000261d0: 696d 655f 7472 6176 656c 6c65 6420 3d20  ime_travelled = 
+000261e0: 6469 7374 616e 6365 5f69 6478 202f 2066  distance_idx / f
+000261f0: 7073 0a20 2020 2020 2020 2065 6c73 653a  ps.        else:
+00026200: 0a20 2020 2020 2020 2020 2020 2064 6973  .            dis
+00026210: 745f 7472 6176 656c 6c65 6420 3d20 280a  t_travelled = (.
+00026220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026230: 6e70 2e73 756d 286e 702e 6162 7328 6e70  np.sum(np.abs(np
+00026240: 2e64 6966 6628 6469 7374 616e 6365 735b  .diff(distances[
+00026250: 6469 7374 616e 6365 5f69 6478 3a5d 2929  distance_idx:]))
+00026260: 2920 2f20 7078 5f70 6572 5f6d 6d0a 2020  ) / px_per_mm.  
+00026270: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00026280: 2020 2020 2020 2020 7469 6d65 5f74 7261          time_tra
+00026290: 7665 6c6c 6564 203d 2028 6469 7374 616e  velled = (distan
+000262a0: 6365 7320 2d20 6469 7374 616e 6365 5f69  ces - distance_i
+000262b0: 6478 2920 2f20 6670 730a 2020 2020 2020  dx) / fps.      
+000262c0: 2020 6469 7374 5f76 616c 203d 2064 6973    dist_val = dis
+000262d0: 7461 6e63 6573 5b64 6973 7461 6e63 655f  tances[distance_
+000262e0: 6964 785d 202f 2070 785f 7065 725f 6d6d  idx] / px_per_mm
+000262f0: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00026300: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
+00026310: 6469 7374 616e 6365 5f76 616c 7565 223a  distance_value":
+00026320: 2064 6973 745f 7661 6c2c 0a20 2020 2020   dist_val,.     
+00026330: 2020 2020 2020 2022 6469 7374 616e 6365         "distance
+00026340: 5f74 7261 7665 6c6c 6564 223a 2064 6973  _travelled": dis
+00026350: 745f 7472 6176 656c 6c65 642c 0a20 2020  t_travelled,.   
+00026360: 2020 2020 2020 2020 2022 7469 6d65 5f74           "time_t
+00026370: 7261 7665 6c6c 6564 223a 2074 696d 655f  ravelled": time_
+00026380: 7472 6176 656c 6c65 642c 0a20 2020 2020  travelled,.     
+00026390: 2020 2020 2020 2022 6469 7374 616e 6365         "distance
+000263a0: 5f69 6e64 6578 223a 2064 6973 7461 6e63  _index": distanc
+000263b0: 655f 6964 782c 0a20 2020 2020 2020 207d  e_idx,.        }
+000263c0: 0a0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
+000263d0: 686f 640a 2020 2020 406e 6a69 7428 2228  hod.    @njit("(
+000263e0: 666c 6f61 7433 325b 3a2c 3a5d 2c20 666c  float32[:,:], fl
+000263f0: 6f61 7433 325b 3a2c 3a5d 2c20 696e 7436  oat32[:,:], int6
+00026400: 3429 2229 0a20 2020 2064 6566 206c 696e  4)").    def lin
+00026410: 6561 725f 6672 6563 6865 745f 6469 7374  ear_frechet_dist
+00026420: 616e 6365 280a 2020 2020 2020 2020 783a  ance(.        x:
+00026430: 206e 702e 6e64 6172 7261 792c 2079 3a20   np.ndarray, y: 
+00026440: 6e70 2e6e 6461 7272 6179 2c20 7361 6d70  np.ndarray, samp
+00026450: 6c65 3a20 696e 7420 3d20 3130 300a 2020  le: int = 100.  
+00026460: 2020 2920 2d3e 2066 6c6f 6174 3a0a 2020    ) -> float:.  
+00026470: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00026480: 2020 436f 6d70 7574 6520 7468 6520 4c69    Compute the Li
+00026490: 6e65 6172 2046 72c3 a963 6865 7420 4469  near Fr..chet Di
+000264a0: 7374 616e 6365 2062 6574 7765 656e 2074  stance between t
+000264b0: 776f 2074 7261 6a65 6374 6f72 6965 732e  wo trajectories.
+000264c0: 0a0a 2020 2020 2020 2020 5468 6520 4672  ..        The Fr
+000264d0: c3a9 6368 6574 2044 6973 7461 6e63 6520  ..chet Distance 
+000264e0: 6d65 6173 7572 6573 2074 6865 2064 6973  measures the dis
+000264f0: 7369 6d69 6c61 7269 7479 2062 6574 7765  similarity betwe
+00026500: 656e 2074 776f 2063 6f6e 7469 6e75 6f75  en two continuou
+00026510: 730a 2020 2020 2020 2020 6375 7276 6573  s.        curves
+00026520: 206f 7220 7472 616a 6563 746f 7269 6573   or trajectories
+00026530: 2072 6570 7265 7365 6e74 6564 2061 7320   represented as 
+00026540: 7365 7175 656e 6365 7320 6f66 2070 6f69  sequences of poi
+00026550: 6e74 7320 696e 2061 2032 2d64 696d 656e  nts in a 2-dimen
+00026560: 7369 6f6e 616c 0a20 2020 2020 2020 2073  sional.        s
+00026570: 7061 6365 2e0a 0a20 2020 2020 2020 203a  pace...        :
+00026580: 7061 7261 6d20 6e64 6172 7261 7920 6461  param ndarray da
+00026590: 7461 3a20 4669 7273 7420 3244 2061 7272  ta: First 2D arr
+000265a0: 6179 206f 6620 7369 7a65 206c 656e 2866  ay of size len(f
+000265b0: 7261 6d65 7329 2072 6570 7265 7365 6e74  rames) represent
+000265c0: 696e 6720 626f 6479 2d70 6172 7420 636f  ing body-part co
+000265d0: 6f72 6469 6e61 7465 7320 7820 616e 6420  ordinates x and 
+000265e0: 792e 0a20 2020 2020 2020 203a 7061 7261  y..        :para
+000265f0: 6d20 6e64 6172 7261 7920 6461 7461 3a20  m ndarray data: 
+00026600: 5365 636f 6e64 2032 4420 6172 7261 7920  Second 2D array 
+00026610: 6f66 2073 697a 6520 6c65 6e28 6672 616d  of size len(fram
+00026620: 6573 2920 7265 7072 6573 656e 7469 6e67  es) representing
+00026630: 2062 6f64 792d 7061 7274 2063 6f6f 7264   body-part coord
+00026640: 696e 6174 6573 2078 2061 6e64 2079 2e0a  inates x and y..
+00026650: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00026660: 6e74 2073 616d 706c 653a 2054 6865 2064  nt sample: The d
+00026670: 6f77 6e73 616d 706c 696e 6720 6661 6374  ownsampling fact
+00026680: 6f72 2066 6f72 2074 6865 2074 7261 6a65  or for the traje
+00026690: 6374 6f72 6965 7320 2864 6566 6175 6c74  ctories (default
+000266a0: 2069 7320 3130 3049 6620 7361 6d70 6c65   is 100If sample
+000266b0: 203e 2031 2c20 7468 6520 7472 616a 6563   > 1, the trajec
+000266c0: 746f 7269 6573 2061 7265 2064 6f77 6e73  tories are downs
+000266d0: 616d 706c 6564 2062 7920 7365 6c65 6374  ampled by select
+000266e0: 696e 6720 6576 6572 7920 7361 6d70 6c65  ing every sample
+000266f0: 2d74 6820 706f 696e 742e 0a0a 2020 2020  -th point...    
+00026700: 2020 2020 2e2e 206e 6f74 653a 3a0a 2020      .. note::.  
+00026710: 2020 2020 2020 2020 2053 6c69 6768 746c           Slightl
+00026720: 7920 6d6f 6469 6669 6564 2066 726f 6d20  y modified from 
+00026730: 604a 6fc3 a36f 2050 6175 6c6f 2046 6967  `Jo..o Paulo Fig
+00026740: 7565 6972 6120 3c68 7474 7073 3a2f 2f67  ueira <https://g
+00026750: 6974 6875 622e 636f 6d2f 6a6f 616f 6669  ithub.com/joaofi
+00026760: 672f 6469 7363 7265 7465 2d66 7265 6368  g/discrete-frech
+00026770: 6574 2f62 6c6f 622f 6666 3536 3239 6535  et/blob/ff5629e5
+00026780: 6134 3363 6661 6434 3464 3565 3936 3266  a43cfad44d5e962f
+00026790: 3431 3035 6464 3235 6339 3062 3932 3839  4105dd25c90b9289
+000267a0: 2f64 6973 7461 6e63 6573 2f64 6973 6372  /distances/discr
+000267b0: 6574 652e 7079 234c 3637 3e60 5f0a 0a20  ete.py#L67>`_.. 
+000267c0: 2020 2020 2020 203a 6578 616d 706c 653a         :example:
+000267d0: 0a20 2020 2020 2020 203e 3e3e 2078 203d  .        >>> x =
+000267e0: 206e 702e 7261 6e64 6f6d 2e72 616e 6469   np.random.randi
+000267f0: 6e74 2830 2c20 3130 302c 2028 3130 3030  nt(0, 100, (1000
+00026800: 302c 2032 2929 2e61 7374 7970 6528 6e70  0, 2)).astype(np
+00026810: 2e66 6c6f 6174 3332 290a 2020 2020 2020  .float32).      
+00026820: 2020 3e3e 3e20 7920 3d20 6e70 2e72 616e    >>> y = np.ran
+00026830: 646f 6d2e 7261 6e64 696e 7428 302c 2031  dom.randint(0, 1
+00026840: 3030 2c20 2831 3030 3030 2c20 3229 292e  00, (10000, 2)).
+00026850: 6173 7479 7065 286e 702e 666c 6f61 7433  astype(np.float3
+00026860: 3229 0a20 2020 2020 2020 203e 3e3e 2064  2).        >>> d
+00026870: 6973 7461 6e63 6520 3d20 4765 6f6d 6574  istance = Geomet
+00026880: 7279 4d69 7869 6e2e 6c69 6e65 6172 5f66  ryMixin.linear_f
+00026890: 7265 6368 6574 5f64 6973 7461 6e63 6528  rechet_distance(
+000268a0: 783d 782c 2079 3d79 2c20 7361 6d70 6c65  x=x, y=y, sample
+000268b0: 3d31 3030 290a 0a20 2020 2020 2020 2022  =100)..        "
+000268c0: 2222 0a20 2020 2020 2020 2069 6620 7361  "".        if sa
+000268d0: 6d70 6c65 203e 2031 3a0a 2020 2020 2020  mple > 1:.      
+000268e0: 2020 2020 2020 782c 2079 203d 2078 5b3a        x, y = x[:
+000268f0: 3a73 616d 706c 655d 2c20 795b 3a3a 7361  :sample], y[::sa
+00026900: 6d70 6c65 5d0a 2020 2020 2020 2020 6e5f  mple].        n_
+00026910: 702c 206e 5f71 203d 2078 2e73 6861 7065  p, n_q = x.shape
+00026920: 5b30 5d2c 2079 2e73 6861 7065 5b30 5d0a  [0], y.shape[0].
+00026930: 2020 2020 2020 2020 6361 203d 206e 702e          ca = np.
+00026940: 6675 6c6c 2828 6e5f 702c 206e 5f71 292c  full((n_p, n_q),
+00026950: 2030 2e30 290a 2020 2020 2020 2020 666f   0.0).        fo
+00026960: 7220 6920 696e 2070 7261 6e67 6528 6e5f  r i in prange(n_
+00026970: 7029 3a0a 2020 2020 2020 2020 2020 2020  p):.            
+00026980: 666f 7220 6a20 696e 2072 616e 6765 286e  for j in range(n
+00026990: 5f71 293a 0a20 2020 2020 2020 2020 2020  _q):.           
+000269a0: 2020 2020 2064 203d 2078 5b69 5d20 2d20       d = x[i] - 
+000269b0: 795b 6a5d 0a20 2020 2020 2020 2020 2020  y[j].           
+000269c0: 2020 2020 2064 203d 206e 702e 7371 7274       d = np.sqrt
+000269d0: 286e 702e 646f 7428 642c 2064 2929 0a20  (np.dot(d, d)). 
+000269e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000269f0: 6620 6920 3e20 3020 616e 6420 6a20 3e20  f i > 0 and j > 
+00026a00: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00026a10: 2020 2020 2020 2063 615b 692c 206a 5d20         ca[i, j] 
+00026a20: 3d20 6d61 7828 6d69 6e28 6361 5b69 202d  = max(min(ca[i -
+00026a30: 2031 2c20 6a5d 2c20 6361 5b69 202d 2031   1, j], ca[i - 1
+00026a40: 2c20 6a20 2d20 315d 2c20 6361 5b69 2c20  , j - 1], ca[i, 
+00026a50: 6a20 2d20 315d 292c 2064 290a 2020 2020  j - 1]), d).    
+00026a60: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00026a70: 2069 203e 2030 2061 6e64 206a 203d 3d20   i > 0 and j == 
+00026a80: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00026a90: 2020 2020 2020 2063 615b 692c 206a 5d20         ca[i, j] 
+00026aa0: 3d20 6d61 7828 6361 5b69 202d 2031 2c20  = max(ca[i - 1, 
+00026ab0: 305d 2c20 6429 0a20 2020 2020 2020 2020  0], d).         
+00026ac0: 2020 2020 2020 2065 6c69 6620 6920 3d3d         elif i ==
+00026ad0: 2030 2061 6e64 206a 203e 2030 3a0a 2020   0 and j > 0:.  
+00026ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026af0: 2020 6361 5b69 2c20 6a5d 203d 206d 6178    ca[i, j] = max
+00026b00: 2863 615b 302c 206a 202d 2031 5d2c 2064  (ca[0, j - 1], d
+00026b10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00026b20: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00026b30: 2020 2020 2020 2020 2020 2020 6361 5b69              ca[i
+00026b40: 2c20 6a5d 203d 2064 0a20 2020 2020 2020  , j] = d.       
+00026b50: 2072 6574 7572 6e20 6361 5b6e 5f70 202d   return ca[n_p -
+00026b60: 2031 2c20 6e5f 7120 2d20 315d 0a0a 2020   1, n_q - 1]..  
+00026b70: 2020 4073 7461 7469 636d 6574 686f 640a    @staticmethod.
+00026b80: 2020 2020 6465 6620 7369 6d62 615f 726f      def simba_ro
+00026b90: 695f 746f 5f67 656f 6d65 7472 6965 7328  i_to_geometries(
+00026ba0: 0a20 2020 2020 2020 2072 6563 7461 6e67  .        rectang
+00026bb0: 6c65 735f 6466 3a20 7064 2e44 6174 6146  les_df: pd.DataF
+00026bc0: 7261 6d65 2c0a 2020 2020 2020 2020 6369  rame,.        ci
+00026bd0: 7263 6c65 735f 6466 3a20 7064 2e44 6174  rcles_df: pd.Dat
+00026be0: 6146 7261 6d65 2c0a 2020 2020 2020 2020  aFrame,.        
+00026bf0: 706f 6c79 676f 6e73 5f64 663a 2070 642e  polygons_df: pd.
+00026c00: 4461 7461 4672 616d 652c 0a20 2020 2020  DataFrame,.     
+00026c10: 2020 2063 6f6c 6f72 3a20 4f70 7469 6f6e     color: Option
+00026c20: 616c 5b62 6f6f 6c5d 203d 2046 616c 7365  al[bool] = False
+00026c30: 2c0a 2020 2020 2920 2d3e 2064 6963 743a  ,.    ) -> dict:
+00026c40: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00026c50: 2020 2020 2043 6f6e 7665 7274 2053 696d       Convert Sim
+00026c60: 4241 2064 6174 6166 7261 6d65 7320 686f  BA dataframes ho
+00026c70: 6c64 696e 6720 524f 4920 6765 6f6d 6574  lding ROI geomet
+00026c80: 7269 6573 2074 6f20 6e65 7374 6564 2064  ries to nested d
+00026c90: 6963 7469 6f6e 6172 7920 686f 6c64 696e  ictionary holdin
+00026ca0: 6720 5368 6170 6c65 7920 706f 6c79 676f  g Shapley polygo
+00026cb0: 6e73 2e0a 0a20 2020 2020 2020 203a 6578  ns...        :ex
+00026cc0: 616d 706c 653a 0a20 2020 2020 2020 203e  ample:.        >
+00026cd0: 3e3e 2023 636f 6e66 6967 5f70 6174 6820  >> #config_path 
+00026ce0: 3d20 272f 5573 6572 732f 7369 6d6f 6e2f  = '/Users/simon/
+00026cf0: 4465 736b 746f 702f 656e 7673 2f73 696d  Desktop/envs/sim
+00026d00: 6261 2f74 726f 7562 6c65 7368 6f6f 7469  ba/troubleshooti
+00026d10: 6e67 2f73 706f 6e74 656e 6f75 735f 616c  ng/spontenous_al
+00026d20: 7465 726e 6174 696f 6e2f 7072 6f6a 6563  ternation/projec
+00026d30: 745f 666f 6c64 6572 2f70 726f 6a65 6374  t_folder/project
+00026d40: 5f63 6f6e 6669 672e 696e 6927 0a20 2020  _config.ini'.   
+00026d50: 2020 2020 203e 3e3e 2023 636f 6e66 6967       >>> #config
+00026d60: 203d 2043 6f6e 6669 6752 6561 6465 7228   = ConfigReader(
+00026d70: 636f 6e66 6967 5f70 6174 683d 636f 6e66  config_path=conf
+00026d80: 6967 5f70 6174 6829 0a20 2020 2020 2020  ig_path).       
+00026d90: 203e 3e3e 2023 636f 6e66 6967 2e72 6561   >>> #config.rea
+00026da0: 645f 726f 695f 6461 7461 2829 0a20 2020  d_roi_data().   
+00026db0: 2020 2020 203e 3e3e 2023 4765 6f6d 6574       >>> #Geomet
+00026dc0: 7279 4d69 7869 6e2e 7369 6d62 615f 726f  ryMixin.simba_ro
+00026dd0: 695f 746f 5f67 656f 6d65 7472 6965 7328  i_to_geometries(
+00026de0: 7265 6374 616e 676c 6573 5f64 663d 636f  rectangles_df=co
+00026df0: 6e66 6967 2e72 6563 7461 6e67 6c65 735f  nfig.rectangles_
+00026e00: 6466 2c20 6369 7263 6c65 735f 6466 3d63  df, circles_df=c
+00026e10: 6f6e 6669 672e 6369 7263 6c65 735f 6466  onfig.circles_df
+00026e20: 2c20 706f 6c79 676f 6e73 5f64 663d 636f  , polygons_df=co
+00026e30: 6e66 6967 2e70 6f6c 7967 6f6e 5f64 6629  nfig.polygon_df)
+00026e40: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+00026e50: 2020 2020 2020 6368 6563 6b5f 696e 7374        check_inst
+00026e60: 616e 6365 280a 2020 2020 2020 2020 2020  ance(.          
+00026e70: 2020 736f 7572 6365 3d47 656f 6d65 7472    source=Geometr
+00026e80: 794d 6978 696e 2e73 696d 6261 5f72 6f69  yMixin.simba_roi
+00026e90: 5f74 6f5f 6765 6f6d 6574 7269 6573 2e5f  _to_geometries._
+00026ea0: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
+00026eb0: 2020 2020 2069 6e73 7461 6e63 653d 7265       instance=re
+00026ec0: 6374 616e 676c 6573 5f64 662c 0a20 2020  ctangles_df,.   
+00026ed0: 2020 2020 2020 2020 2061 6363 6570 7465           accepte
+00026ee0: 645f 7479 7065 733d 2870 642e 4461 7461  d_types=(pd.Data
+00026ef0: 4672 616d 652c 292c 0a20 2020 2020 2020  Frame,),.       
+00026f00: 2029 0a20 2020 2020 2020 2063 6865 636b   ).        check
+00026f10: 5f69 6e73 7461 6e63 6528 0a20 2020 2020  _instance(.     
+00026f20: 2020 2020 2020 2073 6f75 7263 653d 4765         source=Ge
+00026f30: 6f6d 6574 7279 4d69 7869 6e2e 7369 6d62  ometryMixin.simb
+00026f40: 615f 726f 695f 746f 5f67 656f 6d65 7472  a_roi_to_geometr
+00026f50: 6965 732e 5f5f 6e61 6d65 5f5f 2c0a 2020  ies.__name__,.  
+00026f60: 2020 2020 2020 2020 2020 696e 7374 616e            instan
+00026f70: 6365 3d63 6972 636c 6573 5f64 662c 0a20  ce=circles_df,. 
+00026f80: 2020 2020 2020 2020 2020 2061 6363 6570             accep
+00026f90: 7465 645f 7479 7065 733d 2870 642e 4461  ted_types=(pd.Da
+00026fa0: 7461 4672 616d 652c 292c 0a20 2020 2020  taFrame,),.     
+00026fb0: 2020 2029 0a20 2020 2020 2020 2063 6865     ).        che
+00026fc0: 636b 5f69 6e73 7461 6e63 6528 0a20 2020  ck_instance(.   
+00026fd0: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
+00026fe0: 4765 6f6d 6574 7279 4d69 7869 6e2e 7369  GeometryMixin.si
+00026ff0: 6d62 615f 726f 695f 746f 5f67 656f 6d65  mba_roi_to_geome
+00027000: 7472 6965 732e 5f5f 6e61 6d65 5f5f 2c0a  tries.__name__,.
+00027010: 2020 2020 2020 2020 2020 2020 696e 7374              inst
+00027020: 616e 6365 3d70 6f6c 7967 6f6e 735f 6466  ance=polygons_df
+00027030: 2c0a 2020 2020 2020 2020 2020 2020 6163  ,.            ac
+00027040: 6365 7074 6564 5f74 7970 6573 3d28 7064  cepted_types=(pd
+00027050: 2e44 6174 6146 7261 6d65 2c29 2c0a 2020  .DataFrame,),.  
+00027060: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00027070: 666f 7220 6920 696e 205b 7265 6374 616e  for i in [rectan
+00027080: 676c 6573 5f64 662c 2063 6972 636c 6573  gles_df, circles
+00027090: 5f64 662c 2070 6f6c 7967 6f6e 735f 6466  _df, polygons_df
+000270a0: 5d3a 0a20 2020 2020 2020 2020 2020 2063  ]:.            c
+000270b0: 6865 636b 5f74 6861 745f 636f 6c75 6d6e  heck_that_column
+000270c0: 5f65 7869 7374 280a 2020 2020 2020 2020  _exist(.        
+000270d0: 2020 2020 2020 2020 6466 3d69 2c20 636f          df=i, co
+000270e0: 6c75 6d6e 5f6e 616d 653d 5b22 5669 6465  lumn_name=["Vide
+000270f0: 6f22 2c20 224e 616d 6522 2c20 2254 6167  o", "Name", "Tag
+00027100: 7322 2c20 2243 6f6c 6f72 2042 4752 225d  s", "Color BGR"]
+00027110: 2c20 6669 6c65 5f6e 616d 653d 2222 0a20  , file_name="". 
+00027120: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00027130: 2020 2020 2072 6573 756c 7473 5f72 6f69       results_roi
+00027140: 2c20 7265 7375 6c74 735f 636c 7220 3d20  , results_clr = 
+00027150: 7b7d 2c20 7b7d 0a20 2020 2020 2020 2066  {}, {}.        f
+00027160: 6f72 2076 6964 656f 5f6e 616d 6520 696e  or video_name in
+00027170: 2072 6563 7461 6e67 6c65 735f 6466 5b22   rectangles_df["
+00027180: 5669 6465 6f22 5d2e 756e 6971 7565 2829  Video"].unique()
+00027190: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+000271a0: 2076 6964 656f 5f6e 616d 6520 6e6f 7420   video_name not 
+000271b0: 696e 2072 6573 756c 7473 5f72 6f69 2e6b  in results_roi.k
+000271c0: 6579 7328 293a 0a20 2020 2020 2020 2020  eys():.         
+000271d0: 2020 2020 2020 2072 6573 756c 7473 5f72         results_r
+000271e0: 6f69 5b76 6964 656f 5f6e 616d 655d 203d  oi[video_name] =
+000271f0: 207b 7d0a 2020 2020 2020 2020 2020 2020   {}.            
+00027200: 2020 2020 7265 7375 6c74 735f 636c 725b      results_clr[
+00027210: 7669 6465 6f5f 6e61 6d65 5d20 3d20 7b7d  video_name] = {}
+00027220: 0a20 2020 2020 2020 2020 2020 2076 6964  .            vid
+00027230: 656f 5f73 6861 7065 7320 3d20 7265 6374  eo_shapes = rect
+00027240: 616e 676c 6573 5f64 665b 5b22 5461 6773  angles_df[["Tags
+00027250: 222c 2022 4e61 6d65 222c 2022 436f 6c6f  ", "Name", "Colo
+00027260: 7220 4247 5222 5d5d 5b0a 2020 2020 2020  r BGR"]][.      
+00027270: 2020 2020 2020 2020 2020 7265 6374 616e            rectan
+00027280: 676c 6573 5f64 665b 2256 6964 656f 225d  gles_df["Video"]
+00027290: 203d 3d20 7669 6465 6f5f 6e61 6d65 0a20   == video_name. 
+000272a0: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
+000272b0: 2020 2020 2020 2020 2066 6f72 2073 6861           for sha
+000272c0: 7065 5f6e 616d 6520 696e 2076 6964 656f  pe_name in video
+000272d0: 5f73 6861 7065 735b 224e 616d 6522 5d2e  _shapes["Name"].
+000272e0: 756e 6971 7565 2829 3a0a 2020 2020 2020  unique():.      
+000272f0: 2020 2020 2020 2020 2020 7368 6170 655f            shape_
+00027300: 6461 7461 203d 2076 6964 656f 5f73 6861  data = video_sha
+00027310: 7065 735b 0a20 2020 2020 2020 2020 2020  pes[.           
+00027320: 2020 2020 2020 2020 2076 6964 656f 5f73           video_s
+00027330: 6861 7065 735b 224e 616d 6522 5d20 3d3d  hapes["Name"] ==
+00027340: 2073 6861 7065 5f6e 616d 650a 2020 2020   shape_name.    
+00027350: 2020 2020 2020 2020 2020 2020 5d2e 7265              ].re
+00027360: 7365 745f 696e 6465 7828 6472 6f70 3d54  set_index(drop=T
+00027370: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
+00027380: 2020 2020 2074 6167 732c 206e 616d 6520       tags, name 
+00027390: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+000273a0: 2020 2020 2020 2020 6c69 7374 2873 6861          list(sha
+000273b0: 7065 5f64 6174 615b 2254 6167 7322 5d2e  pe_data["Tags"].
+000273c0: 7661 6c75 6573 5b30 5d2e 7661 6c75 6573  values[0].values
+000273d0: 2829 292c 0a20 2020 2020 2020 2020 2020  ()),.           
+000273e0: 2020 2020 2020 2020 2073 6861 7065 5f64           shape_d
+000273f0: 6174 615b 224e 616d 6522 5d2e 7661 6c75  ata["Name"].valu
+00027400: 6573 5b30 5d2c 0a20 2020 2020 2020 2020  es[0],.         
+00027410: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00027420: 2020 2020 2020 2020 2072 6573 756c 7473           results
+00027430: 5f72 6f69 5b76 6964 656f 5f6e 616d 655d  _roi[video_name]
+00027440: 5b6e 616d 655d 203d 2050 6f6c 7967 6f6e  [name] = Polygon
+00027450: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00027460: 2020 2020 2020 506f 6c79 676f 6e28 7461        Polygon(ta
+00027470: 6773 292e 636f 6e76 6578 5f68 756c 6c2e  gs).convex_hull.
+00027480: 6578 7465 7269 6f72 2e63 6f6f 7264 730a  exterior.coords.
+00027490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000274a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000274b0: 2020 7265 7375 6c74 735f 636c 725b 7669    results_clr[vi
+000274c0: 6465 6f5f 6e61 6d65 5d5b 6e61 6d65 5d20  deo_name][name] 
+000274d0: 3d20 7368 6170 655f 6461 7461 5b22 436f  = shape_data["Co
+000274e0: 6c6f 7220 4247 5222 5d2e 7661 6c75 6573  lor BGR"].values
+000274f0: 5b30 5d0a 2020 2020 2020 2020 666f 7220  [0].        for 
+00027500: 7669 6465 6f5f 6e61 6d65 2069 6e20 706f  video_name in po
+00027510: 6c79 676f 6e73 5f64 665b 2256 6964 656f  lygons_df["Video
+00027520: 225d 2e75 6e69 7175 6528 293a 0a20 2020  "].unique():.   
+00027530: 2020 2020 2020 2020 2069 6620 7669 6465           if vide
+00027540: 6f5f 6e61 6d65 206e 6f74 2069 6e20 7265  o_name not in re
+00027550: 7375 6c74 735f 726f 692e 6b65 7973 2829  sults_roi.keys()
+00027560: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00027570: 2020 7265 7375 6c74 735f 726f 695b 7669    results_roi[vi
+00027580: 6465 6f5f 6e61 6d65 5d20 3d20 7b7d 0a20  deo_name] = {}. 
+00027590: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000275a0: 6573 756c 7473 5f63 6c72 5b76 6964 656f  esults_clr[video
+000275b0: 5f6e 616d 655d 203d 207b 7d0a 2020 2020  _name] = {}.    
+000275c0: 2020 2020 2020 2020 7669 6465 6f5f 7368          video_sh
+000275d0: 6170 6573 203d 2070 6f6c 7967 6f6e 735f  apes = polygons_
+000275e0: 6466 5b5b 2254 6167 7322 2c20 224e 616d  df[["Tags", "Nam
+000275f0: 6522 2c20 2243 6f6c 6f72 2042 4752 225d  e", "Color BGR"]
+00027600: 5d5b 0a20 2020 2020 2020 2020 2020 2020  ][.             
+00027610: 2020 2070 6f6c 7967 6f6e 735f 6466 5b22     polygons_df["
+00027620: 5669 6465 6f22 5d20 3d3d 2076 6964 656f  Video"] == video
+00027630: 5f6e 616d 650a 2020 2020 2020 2020 2020  _name.          
+00027640: 2020 5d0a 2020 2020 2020 2020 2020 2020    ].            
+00027650: 666f 7220 7368 6170 655f 6e61 6d65 2069  for shape_name i
+00027660: 6e20 7669 6465 6f5f 7368 6170 6573 5b22  n video_shapes["
+00027670: 4e61 6d65 225d 2e75 6e69 7175 6528 293a  Name"].unique():
+00027680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027690: 2073 6861 7065 5f64 6174 6120 3d20 7669   shape_data = vi
+000276a0: 6465 6f5f 7368 6170 6573 5b0a 2020 2020  deo_shapes[.    
+000276b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000276c0: 7669 6465 6f5f 7368 6170 6573 5b22 4e61  video_shapes["Na
+000276d0: 6d65 225d 203d 3d20 7368 6170 655f 6e61  me"] == shape_na
+000276e0: 6d65 0a20 2020 2020 2020 2020 2020 2020  me.             
+000276f0: 2020 205d 2e72 6573 6574 5f69 6e64 6578     ].reset_index
+00027700: 2864 726f 703d 5472 7565 290a 2020 2020  (drop=True).    
+00027710: 2020 2020 2020 2020 2020 2020 7461 6773              tags
+00027720: 2c20 6e61 6d65 203d 2028 0a20 2020 2020  , name = (.     
+00027730: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00027740: 6973 7428 7368 6170 655f 6461 7461 5b22  ist(shape_data["
+00027750: 5461 6773 225d 2e76 616c 7565 735b 305d  Tags"].values[0]
+00027760: 2e76 616c 7565 7328 2929 2c0a 2020 2020  .values()),.    
+00027770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027780: 7368 6170 655f 6461 7461 5b22 4e61 6d65  shape_data["Name
+00027790: 225d 2e76 616c 7565 735b 305d 2c0a 2020  "].values[0],.  
+000277a0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+000277b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000277c0: 7265 7375 6c74 735f 726f 695b 7669 6465  results_roi[vide
+000277d0: 6f5f 6e61 6d65 5d5b 6e61 6d65 5d20 3d20  o_name][name] = 
+000277e0: 506f 6c79 676f 6e28 0a20 2020 2020 2020  Polygon(.       
+000277f0: 2020 2020 2020 2020 2020 2020 2050 6f6c               Pol
+00027800: 7967 6f6e 2874 6167 7329 2e63 6f6e 7665  ygon(tags).conve
+00027810: 785f 6875 6c6c 2e65 7874 6572 696f 722e  x_hull.exterior.
+00027820: 636f 6f72 6473 0a20 2020 2020 2020 2020  coords.         
+00027830: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00027840: 2020 2020 2020 2020 2072 6573 756c 7473           results
+00027850: 5f63 6c72 5b76 6964 656f 5f6e 616d 655d  _clr[video_name]
+00027860: 5b6e 616d 655d 203d 2073 6861 7065 5f64  [name] = shape_d
+00027870: 6174 615b 2243 6f6c 6f72 2042 4752 225d  ata["Color BGR"]
+00027880: 2e76 616c 7565 735b 305d 0a20 2020 2020  .values[0].     
+00027890: 2020 2066 6f72 2076 6964 656f 5f6e 616d     for video_nam
+000278a0: 6520 696e 2063 6972 636c 6573 5f64 665b  e in circles_df[
+000278b0: 2256 6964 656f 225d 2e75 6e69 7175 6528  "Video"].unique(
+000278c0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+000278d0: 6620 7669 6465 6f5f 6e61 6d65 206e 6f74  f video_name not
+000278e0: 2069 6e20 7265 7375 6c74 735f 726f 692e   in results_roi.
+000278f0: 6b65 7973 2829 3a0a 2020 2020 2020 2020  keys():.        
+00027900: 2020 2020 2020 2020 7265 7375 6c74 735f          results_
+00027910: 726f 695b 7669 6465 6f5f 6e61 6d65 5d20  roi[video_name] 
+00027920: 3d20 7b7d 0a20 2020 2020 2020 2020 2020  = {}.           
+00027930: 2020 2020 2072 6573 756c 7473 5f63 6c72       results_clr
+00027940: 5b76 6964 656f 5f6e 616d 655d 203d 207b  [video_name] = {
+00027950: 7d0a 2020 2020 2020 2020 2020 2020 7669  }.            vi
+00027960: 6465 6f5f 7368 6170 6573 203d 2063 6972  deo_shapes = cir
+00027970: 636c 6573 5f64 665b 5b22 5461 6773 222c  cles_df[["Tags",
+00027980: 2022 4e61 6d65 222c 2022 436f 6c6f 7220   "Name", "Color 
+00027990: 4247 5222 5d5d 5b0a 2020 2020 2020 2020  BGR"]][.        
+000279a0: 2020 2020 2020 2020 6369 7263 6c65 735f          circles_
+000279b0: 6466 5b22 5669 6465 6f22 5d20 3d3d 2076  df["Video"] == v
+000279c0: 6964 656f 5f6e 616d 650a 2020 2020 2020  ideo_name.      
+000279d0: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
+000279e0: 2020 2020 666f 7220 7368 6170 655f 6e61      for shape_na
+000279f0: 6d65 2069 6e20 7669 6465 6f5f 7368 6170  me in video_shap
+00027a00: 6573 5b22 4e61 6d65 225d 2e75 6e69 7175  es["Name"].uniqu
+00027a10: 6528 293a 0a20 2020 2020 2020 2020 2020  e():.           
+00027a20: 2020 2020 2073 6861 7065 5f64 6174 6120       shape_data 
+00027a30: 3d20 7669 6465 6f5f 7368 6170 6573 5b0a  = video_shapes[.
+00027a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027a50: 2020 2020 7669 6465 6f5f 7368 6170 6573      video_shapes
+00027a60: 5b22 4e61 6d65 225d 203d 3d20 7368 6170  ["Name"] == shap
+00027a70: 655f 6e61 6d65 0a20 2020 2020 2020 2020  e_name.         
+00027a80: 2020 2020 2020 205d 2e72 6573 6574 5f69         ].reset_i
+00027a90: 6e64 6578 2864 726f 703d 5472 7565 290a  ndex(drop=True).
+00027aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027ab0: 7461 6773 2c20 6e61 6d65 2c20 7261 6469  tags, name, radi
+00027ac0: 7573 203d 2028 0a20 2020 2020 2020 2020  us = (.         
+00027ad0: 2020 2020 2020 2020 2020 206c 6973 7428             list(
+00027ae0: 7368 6170 655f 6461 7461 5b22 5461 6773  shape_data["Tags
+00027af0: 225d 2e76 616c 7565 735b 305d 2e76 616c  "].values[0].val
+00027b00: 7565 7328 2929 2c0a 2020 2020 2020 2020  ues()),.        
+00027b10: 2020 2020 2020 2020 2020 2020 7368 6170              shap
+00027b20: 655f 6461 7461 5b22 4e61 6d65 225d 2e76  e_data["Name"].v
+00027b30: 616c 7565 735b 305d 2c0a 2020 2020 2020  alues[0],.      
+00027b40: 2020 2020 2020 2020 2020 2020 2020 7368                sh
+00027b50: 6170 655f 6461 7461 5b22 7261 6469 7573  ape_data["radius
+00027b60: 225d 2e76 616c 7565 735b 305d 2c0a 2020  "].values[0],.  
+00027b70: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00027b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027b90: 7265 7375 6c74 735f 726f 695b 7669 6465  results_roi[vide
+00027ba0: 6f5f 6e61 6d65 5d5b 6e61 6d65 5d20 3d20  o_name][name] = 
+00027bb0: 506f 696e 7428 7461 6773 5b22 4365 6e74  Point(tags["Cent
+00027bc0: 6572 2074 6167 225d 292e 6275 6666 6572  er tag"]).buffer
+00027bd0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00027be0: 2020 2020 2020 6469 7374 616e 6365 3d72        distance=r
+00027bf0: 6164 6975 730a 2020 2020 2020 2020 2020  adius.          
+00027c00: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00027c10: 2020 2020 2020 2020 7265 7375 6c74 735f          results_
+00027c20: 636c 725b 7669 6465 6f5f 6e61 6d65 5d5b  clr[video_name][
+00027c30: 6e61 6d65 5d20 3d20 7368 6170 655f 6461  name] = shape_da
+00027c40: 7461 5b22 436f 6c6f 7220 4247 5222 5d2e  ta["Color BGR"].
+00027c50: 7661 6c75 6573 5b30 5d0a 2020 2020 2020  values[0].      
+00027c60: 2020 6966 206e 6f74 2063 6f6c 6f72 3a0a    if not color:.
+00027c70: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00027c80: 726e 2072 6573 756c 7473 5f72 6f69 2c20  rn results_roi, 
+00027c90: 4e6f 6e65 0a20 2020 2020 2020 2065 6c73  None.        els
+00027ca0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00027cb0: 6574 7572 6e20 7265 7375 6c74 735f 726f  eturn results_ro
+00027cc0: 692c 2072 6573 756c 7473 5f63 6c72 0a0a  i, results_clr..
+00027cd0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+00027ce0: 640a 2020 2020 6465 6620 6669 6c74 6572  d.    def filter
+00027cf0: 5f6c 6f77 5f70 5f62 7073 5f66 6f72 5f73  _low_p_bps_for_s
+00027d00: 6861 7065 7328 783a 206e 702e 6e64 6172  hapes(x: np.ndar
+00027d10: 7261 792c 2070 3a20 6e70 2e6e 6461 7272  ray, p: np.ndarr
+00027d20: 6179 2c20 7468 7265 7368 6f6c 643a 2066  ay, threshold: f
+00027d30: 6c6f 6174 293a 0a20 2020 2020 2020 2022  loat):.        "
+00027d40: 2222 0a20 2020 2020 2020 2046 696c 7465  "".        Filte
+00027d50: 7220 626f 6479 2d70 6172 7420 6461 7461  r body-part data
+00027d60: 2066 6f72 2067 656f 6d65 7472 7920 636f   for geometry co
+00027d70: 6e73 7472 7563 7469 6f6e 2077 6869 6c65  nstruction while
+00027d80: 206d 6169 6e74 6169 6e69 6e67 2076 616c   maintaining val
+00027d90: 6964 2067 656f 6d65 7472 7920 6172 7261  id geometry arra
+00027da0: 7973 2e0a 0a20 2020 2020 2020 2048 6176  ys...        Hav
+00027db0: 696e 6720 6120 3344 2061 7272 6179 2072  ing a 3D array r
+00027dc0: 6570 7265 7365 6e74 696e 6720 626f 6479  epresenting body
+00027dd0: 2d70 6172 7473 2061 6372 6f73 7320 7469  -parts across ti
+00027de0: 6d65 2c20 616e 6420 6120 7365 636f 6e64  me, and a second
+00027df0: 2033 4420 6172 7261 7920 7265 7072 6573   3D array repres
+00027e00: 656e 7469 6e67 2070 726f 6261 6269 6c69  enting probabili
+00027e10: 7469 6573 206f 6620 7468 6f73 650a 2020  ties of those.  
+00027e20: 2020 2020 2020 626f 6479 2d70 6172 7473        body-parts
+00027e30: 2061 6372 6f73 7320 7469 6d65 2c20 7765   across time, we
+00027e40: 2077 616e 7420 746f 2022 7265 6d6f 7665   want to "remove
+00027e50: 2220 626f 6479 2d70 6172 7473 2077 6974  " body-parts wit
+00027e60: 6820 6c6f 7720 6465 7465 6374 696f 6e20  h low detection 
+00027e70: 7072 6f62 6162 696c 6974 6965 7320 7768  probabilities wh
+00027e80: 696c 7374 2061 6c73 6f20 6b65 6570 696e  ilst also keepin
+00027e90: 6720 7468 6520 6172 7261 7920 7369 7a65  g the array size
+00027ea0: 730a 2020 2020 2020 2020 696e 7461 6374  s.        intact
+00027eb0: 2061 6e64 2073 7569 7461 626c 6520 666f   and suitable fo
+00027ec0: 7220 6765 6f6d 6574 7279 2063 6f6e 7374  r geometry const
+00027ed0: 7275 6374 696f 6e2e 2054 6f20 646f 2074  ruction. To do t
+00027ee0: 6869 732c 2077 6520 6669 6e64 2062 6f64  his, we find bod
+00027ef0: 792d 7061 7274 7320 7769 7468 2064 6574  y-parts with det
+00027f00: 6563 7469 6f6e 2070 726f 6261 6269 6c69  ection probabili
+00027f10: 7469 6573 2062 656c 6f77 2074 6865 2074  ties below the t
+00027f20: 6872 6573 686f 6c64 2c20 616e 6420 7265  hreshold, and re
+00027f30: 706c 6163 6520 7468 6573 6520 7769 7468  place these with
+00027f40: 2061 2062 6f64 792d 7061 7274 0a20 2020   a body-part.   
+00027f50: 2020 2020 2074 6861 7420 646f 6573 6e27       that doesn'
+00027f60: 7420 6661 6c6c 2062 656c 6f77 2074 6865  t fall below the
+00027f70: 2064 6574 6563 7469 6f6e 2070 726f 6261   detection proba
+00027f80: 6269 6c69 7479 2074 6872 6573 686f 6c64  bility threshold
+00027f90: 2077 6974 6869 6e20 7468 6520 7361 6d65   within the same
+00027fa0: 2066 7261 6d65 2e20 486f 7765 7665 722c   frame. However,
+00027fb0: 2074 6f20 636f 6e73 7472 7563 7420 6120   to construct a 
+00027fc0: 6765 6f6d 6574 7279 2c20 7765 206e 6565  geometry, we nee
+00027fd0: 6420 3e3d 2033 2075 6e69 7175 6520 6b65  d >= 3 unique ke
+00027fe0: 792d 706f 696e 7420 6c6f 6361 7469 6f6e  y-point location
+00027ff0: 732e 0a20 2020 2020 2020 2054 6875 732c  s..        Thus,
+00028000: 206e 6f20 7375 6273 7469 7475 7469 6f6e   no substitution
+00028010: 2063 616e 2062 6520 6d61 6465 2074 6f20   can be made to 
+00028020: 7768 656e 2074 6865 7265 2061 7265 206c  when there are l
+00028030: 6573 7320 7468 616e 2074 6872 6565 2075  ess than three u
+00028040: 6e69 7175 6520 626f 6479 2d70 6172 7420  nique body-part 
+00028050: 6c6f 6361 7469 6f6e 7320 7769 7468 696e  locations within
+00028060: 2061 2066 7261 6d65 2074 6861 7420 6661   a frame that fa
+00028070: 6c6c 7320 6162 6f76 6520 7468 6520 7468  lls above the th
+00028080: 7265 7368 6f6c 642e 0a0a 2020 2020 2020  reshold...      
+00028090: 2020 3a65 7861 6d70 6c65 3a0a 2020 2020    :example:.    
+000280a0: 2020 2020 3e3e 3e20 7820 3d20 6e70 2e72      >>> x = np.r
+000280b0: 616e 646f 6d2e 7261 6e64 696e 7428 302c  andom.randint(0,
+000280c0: 2035 3030 2c20 2831 3830 3030 2c20 372c   500, (18000, 7,
+000280d0: 2032 2929 0a20 2020 2020 2020 203e 3e3e   2)).        >>>
+000280e0: 2070 203d 206e 702e 7261 6e64 6f6d 2e72   p = np.random.r
+000280f0: 616e 646f 6d28 7369 7a65 3d28 3138 3030  andom(size=(1800
+00028100: 302c 2037 2c20 3129 290a 2020 2020 2020  0, 7, 1)).      
+00028110: 2020 3e3e 3e20 7820 3d20 4765 6f6d 6574    >>> x = Geomet
+00028120: 7279 4d69 7869 6e2e 6669 6c74 6572 5f6c  ryMixin.filter_l
+00028130: 6f77 5f70 5f62 7073 5f66 6f72 5f73 6861  ow_p_bps_for_sha
+00028140: 7065 7328 783d 782c 2070 3d70 2c20 7468  pes(x=x, p=p, th
+00028150: 7265 7368 6f6c 643d 302e 3129 0a20 2020  reshold=0.1).   
+00028160: 2020 2020 203e 3e3e 2078 203d 2078 2e72       >>> x = x.r
+00028170: 6573 6861 7065 2878 2e73 6861 7065 5b30  eshape(x.shape[0
+00028180: 5d2c 2069 6e74 2878 2e73 6861 7065 5b31  ], int(x.shape[1
+00028190: 5d20 2a20 3229 290a 2020 2020 2020 2020  ] * 2)).        
+000281a0: 2222 220a 0a20 2020 2020 2020 2072 6573  """..        res
+000281b0: 756c 7473 203d 206e 702e 636f 7079 2878  ults = np.copy(x
+000281c0: 290a 2020 2020 2020 2020 666f 7220 6920  ).        for i 
+000281d0: 696e 2072 616e 6765 2878 2e73 6861 7065  in range(x.shape
+000281e0: 5b30 5d29 3a0a 2020 2020 2020 2020 2020  [0]):.          
+000281f0: 2020 6265 6c6f 775f 705f 6964 7820 3d20    below_p_idx = 
+00028200: 6e70 2e61 7267 7768 6572 6528 705b 695d  np.argwhere(p[i]
+00028210: 2e66 6c61 7474 656e 2829 203c 2074 6872  .flatten() < thr
+00028220: 6573 686f 6c64 292e 666c 6174 7465 6e28  eshold).flatten(
+00028230: 290a 2020 2020 2020 2020 2020 2020 6162  ).            ab
+00028240: 6f76 655f 705f 6964 7820 3d20 6e70 2e61  ove_p_idx = np.a
+00028250: 7267 7768 6572 6528 705b 695d 2e66 6c61  rgwhere(p[i].fla
+00028260: 7474 656e 2829 203e 3d20 7468 7265 7368  tten() >= thresh
+00028270: 6f6c 6429 2e66 6c61 7474 656e 2829 0a20  old).flatten(). 
+00028280: 2020 2020 2020 2020 2020 2069 6620 2862             if (b
+00028290: 656c 6f77 5f70 5f69 6478 2e73 6861 7065  elow_p_idx.shape
+000282a0: 5b30 5d20 3e20 3029 2061 6e64 2028 6162  [0] > 0) and (ab
+000282b0: 6f76 655f 705f 6964 782e 7368 6170 655b  ove_p_idx.shape[
+000282c0: 305d 203e 3d20 3329 3a0a 2020 2020 2020  0] >= 3):.      
+000282d0: 2020 2020 2020 2020 2020 666f 7220 6a20            for j 
+000282e0: 696e 2062 656c 6f77 5f70 5f69 6478 3a0a  in below_p_idx:.
+000282f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028300: 2020 2020 6e65 775f 7661 6c20 3d20 785b      new_val = x[
+00028310: 695d 5b61 626f 7665 5f70 5f69 6478 5b30  i][above_p_idx[0
+00028320: 5d5d 0a20 2020 2020 2020 2020 2020 2020  ]].             
+00028330: 2020 2020 2020 2072 6573 756c 7473 5b69         results[i
+00028340: 5d5b 6a5d 203d 206e 6577 5f76 616c 0a20  ][j] = new_val. 
+00028350: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00028360: 7375 6c74 730a 0a0a 2320 6461 7461 203d  sults...# data =
+00028370: 206e 702e 6172 7261 7928 5b5b 5b33 3634   np.array([[[364
+00028380: 2c20 3330 385d 2c20 5b33 3833 2c20 3332  , 308], [383, 32
+00028390: 335d 2c20 5b34 3033 2c20 3333 355d 2c20  3], [403, 335], 
+000283a0: 5b34 3233 2c20 3335 315d 5d2c 0a23 2020  [423, 351]],.#  
+000283b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000283c0: 5b5b 3335 362c 2033 3037 5d2c 205b 3337  [[356, 307], [37
+000283d0: 362c 2033 3139 5d2c 205b 3339 362c 2033  6, 319], [396, 3
+000283e0: 3331 5d2c 205b 3431 392c 2033 3437 5d5d  31], [419, 347]]
+000283f0: 2c0a 2320 2020 2020 2020 2020 2020 2020  ,.#             
+00028400: 2020 2020 205b 5b33 3634 2c20 3330 385d       [[364, 308]
+00028410: 2c20 5b33 3833 2c20 3332 335d 2c20 5b34  , [383, 323], [4
+00028420: 3033 2c20 3333 355d 2c20 5b34 3233 2c20  03, 335], [423, 
+00028430: 3335 315d 5d2c 0a23 2020 2020 2020 2020  351]],.#        
+00028440: 2020 2020 2020 2020 2020 5b5b 3336 342c            [[364,
+00028450: 2033 3038 5d2c 205b 332c 2033 3233 5d2c   308], [3, 323],
+00028460: 205b 3430 332c 2033 3335 5d2c 205b 3432   [403, 335], [42
+00028470: 332c 2033 3531 5d5d 2c0a 2320 2020 2020  3, 351]],.#     
+00028480: 2020 2020 2020 2020 2020 2020 205b 5b33               [[3
+00028490: 3634 2c20 3330 385d 2c20 5b33 3833 2c20  64, 308], [383, 
+000284a0: 3332 335d 2c20 5b35 342c 2033 3335 5d2c  323], [54, 335],
+000284b0: 205b 3432 332c 2033 3531 5d5d 2c0a 2320   [423, 351]],.# 
+000284c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000284d0: 205b 5b31 322c 2033 3038 5d2c 205b 3338   [[12, 308], [38
+000284e0: 332c 2033 345d 2c20 5b34 3033 2c20 3333  3, 34], [403, 33
+000284f0: 355d 2c20 5b34 3233 2c20 3335 315d 5d2c  5], [423, 351]],
+00028500: 0a23 2020 2020 2020 2020 2020 2020 2020  .#              
+00028510: 2020 2020 5b5b 3336 342c 2033 3038 5d2c      [[364, 308],
+00028520: 205b 3338 332c 2033 3233 5d2c 205b 3430   [383, 323], [40
+00028530: 332c 2033 3335 5d2c 205b 3130 302c 2033  3, 335], [100, 3
+00028540: 3531 5d5d 5d29 0a23 2047 656f 6d65 7472  51]]]).# Geometr
+00028550: 794d 6978 696e 2829 2e6d 756c 7469 6672  yMixin().multifr
+00028560: 616d 655f 626f 6479 7061 7274 735f 746f  ame_bodyparts_to
+00028570: 5f70 6f6c 7967 6f6e 2864 6174 613d 6461  _polygon(data=da
+00028580: 7461 290a 0a23 0a23 2070 6f6c 7967 6f6e  ta)..#.# polygon
+00028590: 5f31 203d 2047 656f 6d65 7472 794d 6978  _1 = GeometryMix
+000285a0: 696e 2829 2e62 6f64 7970 6172 7473 5f74  in().bodyparts_t
+000285b0: 6f5f 706f 6c79 676f 6e28 6e70 2e61 7272  o_polygon(np.arr
+000285c0: 6179 285b 5b33 3634 2c20 3330 385d 2c5b  ay([[364, 308],[
+000285d0: 3338 332c 2033 3233 5d2c 5b34 3033 2c20  383, 323],[403, 
+000285e0: 3333 355d 2c5b 3432 332c 2033 3531 5d5d  335],[423, 351]]
+000285f0: 2929 0a23 2070 6f6c 7967 6f6e 5f32 203d  )).# polygon_2 =
+00028600: 2047 656f 6d65 7472 794d 6978 696e 2829   GeometryMixin()
+00028610: 2e62 6f64 7970 6172 7473 5f74 6f5f 706f  .bodyparts_to_po
+00028620: 6c79 676f 6e28 6e70 2e61 7272 6179 285b  lygon(np.array([
+00028630: 5b33 3536 2c20 3330 375d 2c5b 3337 362c  [356, 307],[376,
+00028640: 2033 3139 5d2c 5b33 3936 2c20 3333 315d   319],[396, 331]
+00028650: 2c5b 3431 392c 2033 3437 5d5d 2929 0a23  ,[419, 347]])).#
+00028660: 2070 6f6c 7967 6f6e 5f31 203d 205b 706f   polygon_1 = [po
+00028670: 6c79 676f 6e5f 3120 666f 7220 7820 696e  lygon_1 for x in
+00028680: 2072 616e 6765 2831 3030 295d 0a23 2070   range(100)].# p
+00028690: 6f6c 7967 6f6e 5f32 203d 205b 706f 6c79  olygon_2 = [poly
+000286a0: 676f 6e5f 3220 666f 7220 7820 696e 2072  gon_2 for x in r
+000286b0: 616e 6765 2831 3030 295d 0a23 2064 6174  ange(100)].# dat
+000286c0: 6120 3d20 6e70 2e63 6f6c 756d 6e5f 7374  a = np.column_st
+000286d0: 6163 6b28 2870 6f6c 7967 6f6e 5f31 2c20  ack((polygon_1, 
+000286e0: 706f 6c79 676f 6e5f 3229 290a 2320 4765  polygon_2)).# Ge
+000286f0: 6f6d 6574 7279 4d69 7869 6e2e 636f 6d70  ometryMixin.comp
+00028700: 7574 655f 7063 745f 7368 6170 655f 6f76  ute_pct_shape_ov
+00028710: 6572 6c61 7028 7368 6170 6573 3d64 6174  erlap(shapes=dat
+00028720: 6129 0a23 0a23 0a23 0a23 2064 6174 6120  a).#.#.#.# data 
+00028730: 3d20 6e70 2e61 7272 6179 5f73 706c 6974  = np.array_split
+00028740: 2864 6174 612c 2038 290a 230a 230a 230a  (data, 8).#.#.#.
+00028750: 2320 7265 7375 6c74 7320 3d20 4765 6f6d  # results = Geom
+00028760: 6574 7279 4d69 7869 6e28 292e 6d75 6c74  etryMixin().mult
+00028770: 6966 7261 6d65 5f63 6f6d 7075 7465 5f70  iframe_compute_p
+00028780: 6374 5f73 6861 7065 5f6f 7665 726c 6170  ct_shape_overlap
+00028790: 2873 6861 7065 5f31 3d70 6f6c 7967 6f6e  (shape_1=polygon
+000287a0: 5f31 2c20 7368 6170 655f 323d 706f 6c79  _1, shape_2=poly
+000287b0: 676f 6e5f 322c 290a 230a 2320 6e70 2e0a  gon_2,).#.# np..
+000287c0: 0a23 2070 6f6c 7967 6f6e 5f31 203d 2047  .# polygon_1 = G
+000287d0: 656f 6d65 7472 794d 6978 696e 2829 2e62  eometryMixin().b
+000287e0: 6f64 7970 6172 7473 5f74 6f5f 706f 6c79  odyparts_to_poly
+000287f0: 676f 6e28 6e70 2e61 7272 6179 285b 5b30  gon(np.array([[0
+00028800: 2c20 3130 305d 2c5b 3130 302c 2031 3030  , 100],[100, 100
+00028810: 5d2c 5b30 2c20 305d 2c5b 3130 302c 2030  ],[0, 0],[100, 0
+00028820: 5d5d 2929 0a23 2070 6f6c 7967 6f6e 5f32  ]])).# polygon_2
+00028830: 203d 2047 656f 6d65 7472 794d 6978 696e   = GeometryMixin
+00028840: 2829 2e62 6f64 7970 6172 7473 5f74 6f5f  ().bodyparts_to_
+00028850: 706f 6c79 676f 6e28 6e70 2e61 7272 6179  polygon(np.array
+00028860: 285b 5b32 352c 2037 355d 2c5b 3735 2c20  ([[25, 75],[75, 
+00028870: 3735 5d2c 5b32 352c 2032 355d 2c5b 3735  75],[25, 25],[75
+00028880: 2c20 3235 5d5d 2929 0a23 2079 203d 2047  , 25]])).# y = G
+00028890: 656f 6d65 7472 794d 6978 696e 2829 2e63  eometryMixin().c
+000288a0: 6f6d 7075 7465 5f70 6374 5f73 6861 7065  ompute_pct_shape
+000288b0: 5f6f 7665 726c 6170 2873 6861 7065 733d  _overlap(shapes=
+000288c0: 5b70 6f6c 7967 6f6e 5f31 2c20 706f 6c79  [polygon_1, poly
+000288d0: 676f 6e5f 325d 2c20 6465 6e6f 6d69 6e61  gon_2], denomina
+000288e0: 746f 723d 2773 6861 7065 5f32 2729 0a    tor='shape_2').
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/mixins/feature_extraction_circular_mixin.py` & `Simba-UW-tf-dev-1.91.6/simba/mixins/feature_extraction_circular_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/deepethogram_importer.py` & `Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/deepethogram_importer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/BORIS_appender.py` & `Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/BORIS_appender.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/observer_importer.py` & `Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/observer_importer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/boris_source_cleaner.py` & `Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/boris_source_cleaner.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/tools.py` & `Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/tools.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/third_party_appender.py` & `Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/third_party_appender.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/ethovision_import.py` & `Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/ethovision_import.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/BENTO_appender.py` & `Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/BENTO_appender.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/third_party_label_appenders/solomon_importer.py` & `Simba-UW-tf-dev-1.91.6/simba/third_party_label_appenders/solomon_importer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_clf_statistics.py` & `Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_clf_statistics.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_analyzer.py` & `Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_analyzer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_menues.py` & `Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_menues.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_tools.py` & `Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_tools.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_visualizer.py` & `Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_visualizer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/cue_light_tools/cue_light_movement_statistics.py` & `Simba-UW-tf-dev-1.91.6/simba/cue_light_tools/cue_light_movement_statistics.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/config_creator.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/config_creator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/enums.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/enums.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/custom_feature_extractor.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/custom_feature_extractor.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/utils/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/warnings.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/warnings.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/checks.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/checks.py`

 * *Files 1% similar despite different names*

```diff
@@ -796,27 +796,26 @@
         if os.path.basename(file_name) not in files_in_dir:
             raise NoFilesFoundError(
                 msg=f"File name {os.path.basename(file_name)} could not be found in the directory {dir}",
                 source=check_that_dir_has_list_of_filenames.__name__,
             )
 
 
-def check_valid_array(
-    data: np.ndarray,
-    source: Optional[str] = "",
-    accepted_ndims: Optional[List[Tuple[int]]] = None,
-    accepted_sizes: Optional[List[int]] = None,
-    accepted_axis_0_shape: Optional[List[int]] = None,
-    accepted_axis_1_shape: Optional[List[int]] = None,
-    accepted_dtypes: Optional[List[str]] = None,
-    accepted_shapes: Optional[List[Tuple[int]]] = None,
-    min_axis_0: Optional[int] = None,
-    max_axis_1: Optional[int] = None,
-    min_axis_1: Optional[int] = None,
-) -> None:
+def check_valid_array(data: np.ndarray,
+                      source: Optional[str] = "",
+                      accepted_ndims: Optional[List[Tuple[int]]] = None,
+                      accepted_sizes: Optional[List[int]] = None,
+                      accepted_axis_0_shape: Optional[List[int]] = None,
+                      accepted_axis_1_shape: Optional[List[int]] = None,
+                      accepted_dtypes: Optional[List[str]] = None,
+                      accepted_values: Optional[List[Any]] = None,
+                      accepted_shapes: Optional[List[Tuple[int]]] = None,
+                      min_axis_0: Optional[int] = None,
+                      max_axis_1: Optional[int] = None,
+                      min_axis_1: Optional[int] = None) -> None:
     """
     Check if the given  array satisfies specified criteria regarding its dimensions, shape, and data type.
 
     :parameter np.ndarray data: The numpy array to be checked.
     :parameter Optional[str] source: A string identifying the source, name, or purpose of the array for interpretable error messaging.
     :parameter Optional[Tuple[int]] accepted_ndims: List of tuples representing acceptable dimensions. If provided, checks whether the array's number of dimensions matches any tuple in the list.
     :parameter Optional[List[str]] accepted_axis_0_shape: List of accepted number of rows of 2-dimensional array. Will also raise error if value passed and input is not a 2-dimensional array.
@@ -897,14 +896,20 @@
         check_int(name=f"{source} min_axis_1", value=min_axis_1)
         if data.shape[1] < min_axis_1:
             raise ArrayError(
                 msg=f"Array not of acceptable shape. Found  {data.shape[1]} columns, minimum columns accepted: {min_axis_1}, {source}",
                 source=check_valid_array.__name__,
             )
 
+    if accepted_values is not None:
+        check_valid_lst(data=accepted_values, source=f"{source} accepted_values")
+        additional_vals = list(set(np.unique(data)) - set(accepted_values))
+        if len(additional_vals) > 0:
+            raise ArrayError(msg=f"Array contains unacceptable values. Found  {additional_vals}, accepted: {accepted_values}, {source}", source=check_valid_array.__name__,)
+
 
 def check_valid_lst(
     data: list,
     source: Optional[str] = "",
     valid_dtypes: Optional[Tuple[Any]] = None,
     valid_values: Optional[List[Any]] = None,
     min_len: Optional[int] = 1,
@@ -1326,15 +1331,15 @@
         check_file_exist_and_readable(file_path=video)
         video = cv2.VideoCapture(video)
     video_count = int(video.get(cv2.CAP_PROP_FRAME_COUNT))
     if isinstance(data, str):
         check_file_exist_and_readable(file_path=data)
         with open(data, "rb") as fp:
             c_generator = _count_generator(fp.raw.read)
-            data_count = (sum(buffer.count(b"\n") for buffer in c_generator))
+            data_count = (sum(buffer.count(b"\n") for buffer in c_generator)) - 1
     else:
         data_count = len(data)
     if data_count != video_count:
         if not raise_error:
             FrameRangeWarning(msg=f"The video {name} has {video_count} frames, but the associated data file for this video has {data_count} rows", source=check_video_and_data_frm_count_align.__name__)
         else:
             raise FrameRangeError(
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/read_write.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/read_write.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/lookups.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/lookups.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/cli/cli_tools.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/cli/cli_tools.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/errors.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/errors.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/data.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/data.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/utils/printing.py` & `Simba-UW-tf-dev-1.91.6/simba/utils/printing.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/SimBA_logo.ico` & `Simba-UW-tf-dev-1.91.6/simba/SimBA_logo.ico`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_processors/reorganize_keypoint.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_processors/reorganize_keypoint.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_processors/remove_keypoints.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_processors/remove_keypoints.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_processors/pose_reset.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_processors/pose_reset.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_processors/reverse_pose.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_processors/reverse_pose.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/doctests.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/doctests.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/fish_feature_extractor_2023_version_3.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/fish_feature_extractor_2023_version_3.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/dprime.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/dprime.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/linear_fretchet.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/linear_fretchet.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/read_in_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/read_in_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/piotr_120324 3.py.zip` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/piotr_120324 3.py.zip`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/dunn_index.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/dunn_index.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/hausdorff.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/hausdorff.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/peaks.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/peaks.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/fish_feature_extractor_2022.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/fish_feature_extractor_2022.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/colinear_features.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/colinear_features.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/spontaneous_alternation_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/spontaneous_alternation_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/horizontal_videos_concat.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/horizontal_videos_concat.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/convex_hull_3_scratch_3.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/convex_hull_3_scratch_3.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/silhouette_score.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/silhouette_score.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/two_fish_feature_extractor_040924.py.zip` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/two_fish_feature_extractor_040924.py.zip`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/cuda_jit.ipynb` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/cuda_jit.ipynb`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/convex_hull_scratch_1.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/convex_hull_scratch_1.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/directed_hausdorff.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/directed_hausdorff.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/shannon_diversity_index.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/shannon_diversity_index.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/sequential_lag_analysis.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/sequential_lag_analysis.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/wilcoxon.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/wilcoxon.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/ROI_plotter_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/ROI_plotter_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/data.npy` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/data.npy`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/distances.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/distances.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/fish_feature_extractor_2023_version_2.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/fish_feature_extractor_2023_version_2.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/cohens_kappa.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/cohens_kappa.py`

 * *Files 25% similar despite different names*

```diff
@@ -1,11 +1,12 @@
 import numpy as np
 from numba import njit
 from sklearn.metrics import cohen_kappa_score
 import time
+im
 
 @njit("(int64[:],int64[:])")
 def cohens_kappa(sample_1: np.ndarray, sample_2: np.ndarray):
     """
     Jitted compute Cohen's Kappa coefficient for two binary samples.
 
     Cohen's Kappa coefficient between classification sand ground truth taking into account agreement between classifications and ground truth occurring by chance.
@@ -28,45 +29,35 @@
     expected = np.outer(sum0, sum1) / np.sum(sum0)
     w_mat = np.full(shape=(2, 2),fill_value=1)
     w_mat[0, 0] = 0
     w_mat[1, 1] = 0
     return 1 - np.sum(w_mat * data) / np.sum(w_mat * expected)
 
 
+def cohens_kappa_one_against_all(data: pd.DataFrame, labels: np.ndarray):
+    results = {}
+    for lbl in np.unique(labels):
+        cluster_data, non_cluster_data = split_specific_cluster_data(data=data, labels=labels, label=lbl)
+        results[lbl] = {}
+        for field in cluster_data.columns:
+            sample_1 = cluster_data[field].values
+            sample_2 = non_cluster_data[field].values
+            data = np.hstack((sample_1.reshape(-1, 1), sample_2.reshape(-1, 1)))
+            tp = len(np.argwhere((data[:, 0] == 1) & (data[:, 1] == 1)).flatten())
+            tn = len(np.argwhere((data[:, 0] == 0) & (data[:, 1] == 0)).flatten())
+            fp = len(np.argwhere((data[:, 0] == 1) & (data[:, 1] == 0)).flatten())
+            fn = len(np.argwhere((data[:, 0] == 0) & (data[:, 1] == 1)).flatten())
+            data = np.array(([tp, fp], [fn, tn]))
+            sum0 = data.sum(axis=0)
+            sum1 = data.sum(axis=1)
+            expected = np.outer(sum0, sum1) / np.sum(sum0)
+            w_mat = np.full(shape=(2, 2), fill_value=1)
+            w_mat[0, 0] = 0
+            w_mat[1, 1] = 0
+            results[lbl][field] = 1 - np.sum(w_mat * data) / np.sum(w_mat * expected)
 
 
 
-    # unique_vals = np.unique(data)
-    # confusion_matrix = np.zeros((len(unique_vals), len(unique_vals)), dtype=int)
-    # for i in range(len(unique_vals)):
-    #     for j in range(len(unique_vals)):
-    #         confusion_matrix[i, j] = np.sum((data[:, 0] == unique_vals[i]) & (data[:, 1] == unique_vals[j]))
-    # n_classes = confusion_matrix.shape[0]
-
-    # # Compute expected proportion of agreement (chance agreement)
-    # total_possible_agreements = 0
-    # for i in range(data.shape[0]):  # Iterate over rows
-    #     for j in range(data.shape[1]):  # Iterate over columns
-    #         row_total = np.sum(data[i, :])
-    #         col_total = np.sum(data[:, j])
-    #         total_possible_agreements += row_total * col_total
-    #
-    # p_e = total_possible_agreements / (tot_obs * tot_obs)
-    # print(p_e)
-    # kappa = (p_o - p_e) / (1 - p_e)
-    # print(kappa)
-
-# sample_1 = np.random.randint(0, 2, size=(1000000,))
-# sample_2 = np.random.randint(0, 2, size=(1000000,))
-#
-# #sample_1 = np.array([0, 1, 0])
-# #sample_2 = np.array([1, 1, 0])
-# start = time.time()
-# print(cohens_kappa(sample_1=sample_1, sample_2=sample_2))
-# print(time.time() - start)
-# start = time.time()
-# print(cohen_kappa_score(y1=sample_1, y2=sample_2))
-# print(time.time() - start)
 
 
 
 #confusion_matrix()
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/paths.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/paths.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/outliers_tietjen.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/outliers_tietjen.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/train_model.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/train_model.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/img_stack_to_bw.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/img_stack_to_bw.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/amber_tests.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/amber_tests.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/line_locate_point.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/line_locate_point.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/sorensen_dice_coefficient.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/sorensen_dice_coefficient.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/multifrm_to_points.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/multifrm_to_points.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/two_fish_feature_extractor_040924.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/two_fish_feature_extractor_040924.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/ez_path_plot.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/ez_path_plot.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/egocentrical_aligner.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/egocentrical_aligner.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/add_body_part.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/add_body_part.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/grubbs_test.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/grubbs_test.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/slide_circ_mean.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/slide_circ_mean.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/calinski_harabasz.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/calinski_harabasz.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/roi_feature_visualizer_example.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/roi_feature_visualizer_example.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/spontaneuous_alternation_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/spontaneuous_alternation_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/runs_test.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/runs_test.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/pct_counts_in_top_N.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/pct_counts_in_top_N.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/concordance_ratio.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/concordance_ratio.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/total_variation_distance.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/total_variation_distance.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/crop_single_polygon.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/crop_single_polygon.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/ROI_analyzer.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/ROI_analyzer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/joint_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/joint_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/segment_image_horizontal.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/segment_image_horizontal.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/clip_multiple_videos_by_frame_numbers.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/clip_multiple_videos_by_frame_numbers.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/elliptic_envelope.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/elliptic_envelope.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/roi_definition_csvs_to_h5.py.zip` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/roi_definition_csvs_to_h5.py.zip`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/add_body_part.py.zip` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/add_body_part.py.zip`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/roi_feature_visualizer_example.py.zip` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/roi_feature_visualizer_example.py.zip`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/sliding_crosscorrelation.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/sliding_crosscorrelation.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/count_values_in_range.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/count_values_in_range.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/roi_definition_csvs_to_h5.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/roi_definition_csvs_to_h5.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/distance_velocity.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/distance_velocity.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/graph_creator.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/graph_creator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/line_plot_plotly.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/line_plot_plotly.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/termite_rois.csv` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/termite_rois.csv`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/unsupervised_lof.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/unsupervised_lof.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/siegel_tukey.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/siegel_tukey.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/berger_parker.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/berger_parker.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/isolation_forest.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/isolation_forest.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/davis_bouldin.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/davis_bouldin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/vertical_video_concatenator.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/vertical_video_concatenator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/batch_video_to_greyscale.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/batch_video_to_greyscale.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/crop_circles_pop_up.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/crop_circles_pop_up.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/heading.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/heading.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/piotr_120324 2.py.zip` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/piotr_120324 2.py.zip`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/mutual_exclusive.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/mutual_exclusive.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/grangercausalitytests.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/grangercausalitytests.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/multiframe_is_shape_covered.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/multiframe_is_shape_covered.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/redis.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/redis.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/video_color.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/video_color.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/graph_3d_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/graph_3d_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/piotr_120324.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/piotr_120324.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/video_rotator.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/video_rotator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/hartley_fmax.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/hartley_fmax.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/fix_clahe.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/fix_clahe.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/cochran_q.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/cochran_q.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/menhinicks_index.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/menhinicks_index.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/add_probability_cnt_features.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/add_probability_cnt_features.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/brillouins_index.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/brillouins_index.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/spontanous_alternations.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/spontanous_alternations.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/piotr_120324.py.zip` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/piotr_120324.py.zip`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/velocity_aggregator.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/velocity_aggregator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/make_splash.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/make_splash.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/abod.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/abod.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/fish_feature_extractor_2023_version_5.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/fish_feature_extractor_2023_version_5.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/violin.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/violin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/simpson_diversity_index.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/simpson_diversity_index.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/clip_videos_by_frm.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/clip_videos_by_frm.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/piotr_120324 4.py.zip` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/piotr_120324 4.py.zip`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/rotate image.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/rotate image.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/geometry_ex.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/geometry_ex.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/time_stamp_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/time_stamp_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/line_plot.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/line_plot.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/video_rotator_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/video_rotator_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/unsupervised_outliers.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/unsupervised_outliers.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/statistics_ex.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/statistics_ex.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/ROI_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/ROI_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/sliding_displacement.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/sliding_displacement.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/path_plots.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/path_plots.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/wald_wolfowitz.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/wald_wolfowitz.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/sliding_autoc.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/sliding_autoc.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/linestring_path.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/linestring_path.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/cronbach_alpha.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/cronbach_alpha.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/mcnamar.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/mcnamar.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/fish_feature_extractor_2023_version_4.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/fish_feature_extractor_2023_version_4.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/AmberFeatureExtractor.py.zip` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/AmberFeatureExtractor.py.zip`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/mosaic.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/mosaic.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/amber_featurizer.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/amber_featurizer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/make_path_plot.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/make_path_plot.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/margalef_diversification_index.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/margalef_diversification_index.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/biweight_midcorrelation.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/biweight_midcorrelation.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/madmedianrule.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/madmedianrule.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/adjusted_rand_score.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/adjusted_rand_score.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/convex_hull_scratch_2.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/convex_hull_scratch_2.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/sandbox/plotly_gantt.py` & `Simba-UW-tf-dev-1.91.6/simba/sandbox/plotly_gantt.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/directing_animals_to_bodypart_visualizer.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/directing_animals_to_bodypart_visualizer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/gantt_creator.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/gantt_creator.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,25 +1,25 @@
 __author__ = "Simon Nilsson"
 
 import io
 import os
 import shutil
-from typing import Dict, List, Union, Optional
+from typing import Dict, List, Optional, Union
 
 import cv2
 import matplotlib.pyplot as plt
 import numpy as np
 import PIL
 
 from simba.mixins.config_reader import ConfigReader
 from simba.mixins.plotting_mixin import PlottingMixin
-from simba.utils.checks import (check_all_file_names_are_represented_in_video_log,
-                                check_file_exist_and_readable,
-                                check_valid_lst,
-                                check_if_keys_exist_in_dict)
+from simba.utils.checks import (
+    check_all_file_names_are_represented_in_video_log,
+    check_file_exist_and_readable, check_if_keys_exist_in_dict,
+    check_valid_lst)
 from simba.utils.data import detect_bouts
 from simba.utils.enums import Formats
 from simba.utils.errors import NoSpecifiedOutputError
 from simba.utils.lookups import get_named_colors
 from simba.utils.printing import stdout_success
 from simba.utils.read_write import get_fn_ext, read_df
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/tools/tkinter_tools.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/tools/tkinter_tools.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/ROI_plotter_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/ROI_plotter_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/plotting/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/shap_agg_stats_visualizer.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/shap_agg_stats_visualizer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/gantt_creator_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/gantt_creator_mp.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,39 +1,44 @@
 __author__ = "Simon Nilsson"
 
 import time
 import warnings
 
 warnings.simplefilter(action="ignore", category=FutureWarning)
 import functools
+import io
 import multiprocessing
 import os
-import io
-import PIL
 import platform
 import shutil
-import cv2
-import pandas as pd
 from typing import Dict, List, Optional, Union
-import numpy as np
-import matplotlib.pyplot as plt
+
+import cv2
 import matplotlib
-from matplotlib.figure import Figure
+import matplotlib.pyplot as plt
+import numpy as np
+import pandas as pd
+import PIL
 #matplotlib.use('agg')
 from matplotlib.backends.backend_agg import FigureCanvasAgg as FigureCanvas
+from matplotlib.figure import Figure
 
 from simba.mixins.config_reader import ConfigReader
 from simba.mixins.plotting_mixin import PlottingMixin
-from simba.utils.checks import (check_all_file_names_are_represented_in_video_log, check_file_exist_and_readable, check_if_keys_exist_in_dict, check_int, check_that_column_exist, check_valid_lst)
+from simba.utils.checks import (
+    check_all_file_names_are_represented_in_video_log,
+    check_file_exist_and_readable, check_if_keys_exist_in_dict, check_int,
+    check_that_column_exist, check_valid_lst)
 from simba.utils.data import detect_bouts
 from simba.utils.enums import Formats
 from simba.utils.errors import NoSpecifiedOutputError
 from simba.utils.lookups import get_named_colors
 from simba.utils.printing import SimbaTimer, stdout_success
-from simba.utils.read_write import (concatenate_videos_in_folder, find_core_cnt, get_fn_ext, read_df)
+from simba.utils.read_write import (concatenate_videos_in_folder,
+                                    find_core_cnt, get_fn_ext, read_df)
 
 HEIGHT = "height"
 WIDTH = "width"
 FONT_ROTATION = "font rotation"
 FONT_SIZE = "font size"
 STYLE_KEYS = [HEIGHT, WIDTH, FONT_ROTATION, FONT_SIZE]
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/heat_mapper_clf_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/heat_mapper_clf_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/probability_plot_creator.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/probability_plot_creator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/circular_plotting.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/circular_plotting.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/plot_clf_results.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/plot_clf_results.py`

 * *Files 1% similar despite different names*

```diff
@@ -40,30 +40,30 @@
     :param str config_path: path to SimBA project config file in Configparser format
     :param bool rotate: If True, the output video will be rotated 90 degrees from the input.
     :param bool video_setting: If True, SimBA will create compressed videos.
     :param bool frame_setting: If True, SimBA will create individual frames.
     :param Optional[dict] text_settings:
     :param str video_file_path: path to video file to create classification visualizations for.
 
-    Examples
-    ----------
+    :example:
     >>> clf_plotter = PlotSklearnResultsSingleCore(config_path='MyProjectConfig', video_setting=True, frame_setting=False, rotate=False, video_file_path='VideoPath')
     >>> clf_plotter.run()
     """
 
-    def __init__(
-        self,
-        config_path: str,
-        video_setting: bool,
-        frame_setting: bool,
-        text_settings: Optional[Union[Dict[str, float], bool]] = False,
-        video_file_path: Optional[List] = None,
-        rotate: bool = False,
-        print_timers: bool = True,
-    ):
+    def __init__(self,
+                 config_path: Union[str, os.PathLike],
+                 video_setting: Optional[bool] = True,
+                 frame_setting: Optional[bool] = False,
+                 text_settings: Optional[Union[Dict[str, float], bool]] = False,
+                 video_file_path: Optional[List] = None,
+                 rotate: bool = False,
+                 print_timers: bool = True):
+
+
+
         ConfigReader.__init__(self, config_path=config_path)
         TrainModelMixin.__init__(self)
         PlottingMixin.__init__(self)
         log_event(
             logger_name=str(__class__.__name__),
             log_type=TagNames.CLASS_INIT.value,
             msg=self.create_log_msg_from_init_args(locals=locals()),
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/ez_path_plot.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/ez_path_plot.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/plot_clf_results_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/plot_clf_results_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/ROI_feature_visualizer.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/ROI_feature_visualizer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/heat_mapper_location.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/heat_mapper_location.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,33 +1,45 @@
 __author__ = "Simon Nilsson"
 
 import os
-from typing import List
+import shutil
+from typing import Any, Dict, List, Optional, Union
 
 import cv2
 import numpy as np
 import pandas as pd
 from numba import jit, prange
 
 from simba.mixins.config_reader import ConfigReader
 from simba.mixins.geometry_mixin import GeometryMixin
 from simba.mixins.plotting_mixin import PlottingMixin
+from simba.utils.checks import (
+    check_all_file_names_are_represented_in_video_log,
+    check_file_exist_and_readable, check_float, check_if_keys_exist_in_dict,
+    check_int, check_valid_lst)
 from simba.utils.enums import Formats, TagNames
 from simba.utils.errors import NoSpecifiedOutputError
 from simba.utils.printing import SimbaTimer, log_event, stdout_success
 from simba.utils.read_write import get_fn_ext, read_df
 
+STYLE_PALETTE = 'palette'
+STYLE_SHADING = 'shading'
+STYLE_BIN_SIZE = 'bin_size'
+STYLE_MAX_SCALE = 'max_scale'
+
+STYLE_ATTR = [STYLE_PALETTE, STYLE_SHADING, STYLE_BIN_SIZE, STYLE_MAX_SCALE]
 
 class HeatmapperLocationSingleCore(ConfigReader, PlottingMixin):
     """
     Create heatmaps representing the location where animals spend time.
     For improved run-time, see :meth:`simba.heat_mapper_location_mp.HeatMapperLocationMultiprocess` for multiprocess class.
 
     ..note::
        `GitHub visualizations tutorial <https://github.com/sgoldenlab/simba/blob/master/docs/tutorial.md#step-11-visualizations>`__.
+        For improved run-time of videos, see :meth:`simba.heat_mapper_location_mp.HeatMapperLocationMultiprocess` for multiprocess class.
 
     .. image:: _static/img/heatmap_location.gif
        :width: 1000
        :align: center
 
     :param str config_path: path to SimBA project config file in Configparser format
     :param str bodypart: The name of the body-part used to infer the location of the animal.
@@ -40,49 +52,42 @@
 
     :example:
     >>> style_attr = {'palette': 'jet', 'shading': 'gouraud', 'bin_size': 100, 'max_scale': 'auto'}
     >>> heatmapper = HeatmapperLocationSingleCore(config_path='/Users/simon/Desktop/envs/troubleshooting/two_black_animals_14bp/project_folder/project_config.ini', style_attr = style_attr, final_img_setting=True, video_setting=True, frame_setting=False, bodypart='Nose_1', files_found=['/Users/simon/Desktop/envs/troubleshooting/two_black_animals_14bp/project_folder/csv/machine_results/Together_1.csv'])
     >>> heatmapper.run()
     """
 
-    def __init__(
-        self,
-        config_path: str,
-        bodypart: str,
-        style_attr: dict,
-        final_img_setting: bool,
-        video_setting: bool,
-        frame_setting: bool,
-        files_found: List[str],
-    ):
+    def __init__(self,
+                 config_path: Union[str, os.PathLike],
+                 data_paths: List[Union[str, os.PathLike]],
+                 bodypart: str,
+                 style_attr: Dict[str, Any],
+                 final_img_setting: Optional[bool] = True,
+                 video_setting: Optional[bool] = False,
+                 frame_setting: Optional[bool] = False):
 
-        ConfigReader.__init__(self, config_path=config_path)
-        PlottingMixin.__init__(self)
-        log_event(
-            logger_name=str(__class__.__name__),
-            log_type=TagNames.CLASS_INIT.value,
-            msg=self.create_log_msg_from_init_args(locals=locals()),
-        )
+
+        log_event(logger_name=str(__class__.__name__), log_type=TagNames.CLASS_INIT.value, msg=self.create_log_msg_from_init_args(locals=locals()))
         if (not frame_setting) and (not video_setting) and (not final_img_setting):
-            raise NoSpecifiedOutputError(
-                msg="Please choose to select either heatmap videos, frames, and/or final image.",
-                source=self.__class__.__name__,
-            )
+            raise NoSpecifiedOutputError(msg="Please choose to select either heatmap videos, frames, and/or final image.", source=self.__class__.__name__)
 
+        check_file_exist_and_readable(file_path=config_path)
+        check_valid_lst(data=data_paths, valid_dtypes=(str,), min_len=1)
+        check_if_keys_exist_in_dict(data=style_attr, key=STYLE_ATTR, name=f'{self.__class__.__name__} style_attr')
+        ConfigReader.__init__(self, config_path=config_path)
+        PlottingMixin.__init__(self)
         self.frame_setting, self.video_setting = frame_setting, video_setting
         self.final_img_setting, self.bp = final_img_setting, bodypart
         self.style_attr = style_attr
         if not os.path.exists(self.heatmap_location_dir):
             os.makedirs(self.heatmap_location_dir)
-        self.files_found = files_found
+        self.data_paths = data_paths
         self.fourcc = cv2.VideoWriter_fourcc(*Formats.MP4_CODEC.value)
-        self.bp_lst = [self.bp + "_x", self.bp + "_y"]
-        print(
-            "Processing heatmaps for {} video(s)...".format(str(len(self.files_found)))
-        )
+        self.bp_lst = [f"{self.bp}_x", f"{self.bp}_y"]
+        print(f"Processing heatmaps for {len(self.data_paths)} video(s)...")
 
     @staticmethod
     @jit(nopython=True)
     def __calculate_cum_array_final_img(loc_array: np.array):
         final_img = np.full((loc_array.shape[1], loc_array.shape[2]), 0)
         for frm in range(loc_array.shape[0]):
             for row in range(loc_array.shape[1]):
@@ -153,119 +158,87 @@
                     for k in range(sliced_arr.shape[2]):
                         frame_cum_sum[j][k] += sliced_arr[i][j][k]
             cum_sum_arr[frm_idx] = frame_cum_sum
 
         return cum_sum_arr / fps
 
     def run(self):
-        for file_cnt, file_path in enumerate(self.files_found):
+        check_all_file_names_are_represented_in_video_log(video_info_df=self.video_info_df, data_paths=self.data_paths)
+        for file_cnt, file_path in enumerate(self.data_paths):
             video_timer = SimbaTimer(start=True)
             _, self.video_name, _ = get_fn_ext(file_path)
-            self.video_info, self.px_per_mm, self.fps = self.read_video_info(
-                video_name=self.video_name
-            )
-            self.width, self.height = int(
-                self.video_info["Resolution_width"].values[0]
-            ), int(self.video_info["Resolution_height"].values[0])
+            self.video_info, self.px_per_mm, self.fps = self.read_video_info(video_name=self.video_name)
+            self.width, self.height = int(self.video_info["Resolution_width"].values[0]), int(self.video_info["Resolution_height"].values[0])
             if self.video_setting:
-                self.video_save_path = os.path.join(
-                    self.heatmap_location_dir, self.video_name + ".mp4"
-                )
-                self.writer = cv2.VideoWriter(
-                    self.video_save_path,
-                    self.fourcc,
-                    self.fps,
-                    (self.width, self.height),
-                )
+                self.video_save_path = os.path.join(self.heatmap_location_dir, f"{self.video_name}.mp4")
+                self.writer = cv2.VideoWriter(self.video_save_path, self.fourcc, self.fps, (self.width, self.height),)
             if self.frame_setting | self.final_img_setting:
-                self.save_video_folder = os.path.join(
-                    self.heatmap_location_dir, self.video_name
-                )
-                if not os.path.exists(self.save_video_folder):
-                    os.makedirs(self.save_video_folder)
+                self.save_video_folder = os.path.join(self.heatmap_location_dir, self.video_name)
+                if os.path.exists(self.save_video_folder):
+                    shutil.rmtree(self.save_video_folder)
+                os.makedirs(self.save_video_folder)
             self.data_df = read_df(file_path, self.file_type)[self.bp_lst]
-            squares, aspect_ratio = GeometryMixin().bucket_img_into_grid_square(
-                bucket_grid_size_mm=self.style_attr["bin_size"],
-                img_size=(self.width, self.height),
-                px_per_mm=self.px_per_mm,
-            )
-            location_array = GeometryMixin().cumsum_coord_geometries(
-                data=self.data_df.values, fps=self.fps, geometries=squares
-            )
+            squares, aspect_ratio = GeometryMixin().bucket_img_into_grid_square(bucket_grid_size_mm=self.style_attr[STYLE_BIN_SIZE], img_size=(self.width, self.height), px_per_mm=self.px_per_mm)
+            location_array = GeometryMixin().cumsum_coord_geometries(data=self.data_df.values, fps=self.fps, geometries=squares)
 
-            if self.style_attr["max_scale"] == "auto":
+            if self.style_attr[STYLE_MAX_SCALE] == "auto":
                 self.max_scale = np.round(np.max(np.max(location_array[-1], axis=0)), 3)
-                if self.max_scale == 0:
-                    self.max_scale = 1
+                if self.max_scale == 0: self.max_scale = 1
             else:
-                self.max_scale = self.style_attr["max_scale"]
+                check_float(name=f'{self.__class__.__name__} style max scale', value=self.style_attr[STYLE_MAX_SCALE], min_value=10e-6)
+                self.max_scale = self.style_attr[STYLE_MAX_SCALE]
 
             if self.final_img_setting:
-                self.make_location_heatmap_plot(
-                    frm_data=location_array[-1:, :, :][0],
-                    max_scale=self.max_scale,
-                    palette=self.style_attr["palette"],
-                    aspect_ratio=aspect_ratio,
-                    file_name=os.path.join(
-                        self.heatmap_location_dir, self.video_name + "_final_frm.png"
-                    ),
-                    shading=self.style_attr["shading"],
-                    img_size=(self.width, self.height),
-                    final_img=True,
-                )
-                print(
-                    "Final heatmap image saved at {}".format(
-                        os.path.join(self.save_video_folder, "_final_img.png")
-                    )
-                )
+                final_img_save_name = os.path.join(self.heatmap_location_dir, f"{self.video_name}_final_frm.png")
+                self.make_location_heatmap_plot(frm_data=location_array[-1:, :, :][0],
+                                                max_scale=self.max_scale,
+                                                palette=self.style_attr[STYLE_PALETTE],
+                                                aspect_ratio=aspect_ratio,
+                                                file_name=final_img_save_name,
+                                                shading=self.style_attr[STYLE_SHADING],
+                                                img_size=(self.width, self.height))
+                print(f"Final heatmap image saved at {final_img_save_name}")
 
             if (self.frame_setting) or (self.video_setting):
-                for frm_cnt, cumulative_frm in enumerate(
-                    range(location_array.shape[0])
-                ):
-                    img = self.make_location_heatmap_plot(
-                        frm_data=location_array[cumulative_frm, :, :],
-                        max_scale=self.max_scale,
-                        palette=self.style_attr["palette"],
-                        aspect_ratio=aspect_ratio,
-                        file_name=None,
-                        shading=self.style_attr["shading"],
-                        img_size=(self.width, self.height),
-                        final_img=False,
-                    )
+                for frm_cnt, cumulative_frm in enumerate(range(location_array.shape[0])):
+                    img = self.make_location_heatmap_plot(frm_data=location_array[cumulative_frm, :, :],
+                                                          max_scale=self.max_scale,
+                                                          palette=self.style_attr["palette"],
+                                                          aspect_ratio=aspect_ratio,
+                                                          file_name=None,
+                                                          shading=self.style_attr["shading"],
+                                                          img_size=(self.width, self.height))
                     if self.video_setting:
-                        self.writer.write(img)
+                        self.writer.write(img[:, :, :3])
                     if self.frame_setting:
-                        frame_save_path = os.path.join(
-                            self.save_video_folder, str(frm_cnt) + ".png"
-                        )
+                        frame_save_path = os.path.join(self.save_video_folder, f"{frm_cnt}.png")
                         cv2.imwrite(frame_save_path, img)
 
-                    print(
-                        "Heatmap frame: {} / {}. Video: {} ({}/{})".format(
-                            str(frm_cnt + 1),
-                            str(len(self.data_df)),
-                            self.video_name,
-                            str(file_cnt + 1),
-                            len(self.files_found),
-                        )
-                    )
+                    print(f"Heatmap frame: {frm_cnt + 1} / {len(self.data_df)}. Video: {self.video_name} ({file_cnt + 1}/{len(self.data_paths)})")
 
             if self.video_setting:
                 self.writer.release()
             video_timer.stop_timer()
-            print(
-                f"Heatmap plot for video {self.video_name} saved (elapsed time: {video_timer.elapsed_time_str}s"
-            )
+            print(f"Heatmap plot for video {self.video_name} saved (elapsed time: {video_timer.elapsed_time_str}s")
         self.timer.stop_timer()
-        stdout_success(
-            msg=f"Created heatmaps for {str(len(self.files_found))} videos",
-            elapsed_time=self.timer.elapsed_time_str,
-            source=self.__class__.__name__,
-        )
+        stdout_success(msg=f"Created heatmaps for {len(self.data_paths)} videos", elapsed_time=self.timer.elapsed_time_str, source=self.__class__.__name__,)
+
+
+
+
+# test = HeatmapperLocationSingleCore(config_path='/Users/simon/Desktop/envs/simba/troubleshooting/open_field_below/project_folder/project_config.ini',
+#                                       style_attr = {'palette': 'jet', 'shading': 'gouraud', 'bin_size': 100, 'max_scale': 10},
+#                                       final_img_setting=True,
+#                                       video_setting=True,
+#                                       frame_setting=False,
+#                                       bodypart='Snout',
+#                                       data_paths=['/Users/simon/Desktop/envs/simba/troubleshooting/open_field_below/project_folder/csv/outlier_corrected_movement_location/raw_clip1.csv'])
+# test.run()
+
+
 
 
 #
 # test = HeatmapperLocationSingleCore(config_path='/Users/simon/Desktop/envs/simba/troubleshooting/two_black_animals_14bp/project_folder/project_config.ini',
 #                                       style_attr = {'palette': 'jet', 'shading': 'gouraud', 'bin_size': 100, 'max_scale': 'auto'},
 #                                       final_img_setting=True,
 #                                       video_setting=True,
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/probability_plot_creator_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/probability_plot_creator_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/interactive_probability_grapher.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/interactive_probability_grapher.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/plot_pose_in_dir.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/plot_pose_in_dir.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/single_run_model_validation_video.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/single_run_model_validation_video.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/frame_mergerer_ffmpeg.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/frame_mergerer_ffmpeg.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/pose_plotter_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/pose_plotter_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/directing_animals_visualizer_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/directing_animals_visualizer_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/clf_validator.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/clf_validator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/path_plotter_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/path_plotter_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/ROI_feature_visualizer_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/ROI_feature_visualizer_mp.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 __author__ = "Simon Nilsson"
 
 import functools
 import itertools
 import multiprocessing
 import os
 import platform
-from typing import Any, Dict, List, Optional, Union, Tuple
+from typing import Any, Dict, List, Optional, Tuple, Union
 
 import cv2
 import numpy as np
 import pandas as pd
 
 from simba.mixins.config_reader import ConfigReader
 from simba.mixins.plotting_mixin import PlottingMixin
@@ -32,23 +32,15 @@
 ROI_CENTERS = "roi_centers"
 ROI_EAR_TAGS = "roi_ear_tags"
 DIRECTIONALITY = "directionality"
 DIRECTIONALITY_STYLE = "directionality_style"
 BORDER_COLOR = "border_color"
 POSE = "pose_estimation"
 ANIMAL_NAMES = "animal_names"
-STYLE_KEYS = [
-    ROI_CENTERS,
-    ROI_EAR_TAGS,
-    DIRECTIONALITY,
-    BORDER_COLOR,
-    POSE,
-    DIRECTIONALITY_STYLE,
-    ANIMAL_NAMES,
-]
+STYLE_KEYS = [ROI_CENTERS,ROI_EAR_TAGS,DIRECTIONALITY,BORDER_COLOR,POSE,DIRECTIONALITY_STYLE,ANIMAL_NAMES,]
 
 
 def _roi_feature_visualizer_mp(frm_range: Tuple[int, np.ndarray],
                                data_df: pd.DataFrame,
                                text_locations: dict,
                                font_size: float,
                                circle_size: float,
@@ -418,14 +410,23 @@
             concatenate_videos_in_folder(in_folder=self.save_temp_dir, save_path=self.save_path, video_format="mp4", remove_splits=True)
             self.timer.stop_timer()
             pool.terminate()
             pool.join()
             stdout_success(msg=f"Video {self.video_name} complete. Video saved in project_folder/frames/output/ROI_features.", elapsed_time=self.timer.elapsed_time_str)
 
 
+
+# style_attr = {'roi_centers': True, 'roi_ear_tags': True, 'directionality': True, 'directionality_style': 'funnel', 'border_color': (0, 0, 0), 'pose_estimation': True, 'animal_names': True}
+# test = ROIfeatureVisualizerMultiprocess(config_path='/Users/simon/Desktop/envs/simba/troubleshooting/spontenous_alternation/project_folder/project_config.ini',
+#                             video_path='/Users/simon/Desktop/envs/simba/troubleshooting/spontenous_alternation/project_folder/videos/NOR ENCODING FExMP8.mp4',
+#                             style_attr=style_attr,
+#                             body_parts=['Center'], core_cnt=-1)
+# test.run()
+
+
 # style_attr = {'roi_centers': True, 'roi_ear_tags': True, 'directionality': True, 'directionality_style': 'funnel', 'border_color': (0, 0, 0), 'pose_estimation': True, 'animal_names': True}
 # test = ROIfeatureVisualizerMultiprocess(config_path='/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/project_config.ini',
 #                             video_path='/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/videos/2022-06-20_NOB_DOT_4.mp4',
 #                             style_attr=style_attr,
 #                             body_parts=['Nose'], core_cnt=-1)
 # test.run()
 #
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/data_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/data_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/spontaneous_alternation_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/spontaneous_alternation_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/path_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/path_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/distance_plotter_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/distance_plotter_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/ROI_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/ROI_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/geometry_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/geometry_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/clf_validator_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/clf_validator_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/heat_mapper_clf.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/heat_mapper_clf.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/distance_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/distance_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/single_run_model_validation_video_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/single_run_model_validation_video_mp.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/directing_animals_visualizer.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/directing_animals_visualizer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/circular_feature_overlay_plotter.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/circular_feature_overlay_plotter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/plotting/heat_mapper_location_mp.py` & `Simba-UW-tf-dev-1.91.6/simba/plotting/heat_mapper_location_mp.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,78 +1,73 @@
 import functools
 import multiprocessing
 import os
 import platform
-from typing import Dict, List, Tuple
+from typing import Any, Dict, List, Optional, Union
 
 import cv2
-import matplotlib.pyplot as plt
 import numpy as np
-import pandas as pd
 from numba import jit, prange
 
 from simba.mixins.config_reader import ConfigReader
 from simba.mixins.geometry_mixin import GeometryMixin
 from simba.mixins.plotting_mixin import PlottingMixin
+from simba.utils.checks import (
+    check_all_file_names_are_represented_in_video_log,
+    check_file_exist_and_readable, check_float, check_if_keys_exist_in_dict,
+    check_int, check_valid_lst)
 from simba.utils.enums import Defaults, Formats, TagNames
 from simba.utils.errors import NoSpecifiedOutputError
 from simba.utils.printing import SimbaTimer, log_event, stdout_success
 from simba.utils.read_write import (concatenate_videos_in_folder,
                                     find_core_cnt, get_fn_ext, read_df,
                                     remove_a_folder)
 
-
-def _heatmap_location(
-    data: np.array,
-    video_setting: bool,
-    frame_setting: bool,
-    video_temp_dir: str,
-    video_name: str,
-    frame_dir: str,
-    fps: int,
-    style_attr: dict,
-    max_scale: float,
-    aspect_ratio: float,
-    size: tuple,
-    make_location_heatmap_plot: PlottingMixin.make_location_heatmap_plot,
-):
+STYLE_PALETTE = 'palette'
+STYLE_SHADING = 'shading'
+STYLE_BIN_SIZE = 'bin_size'
+STYLE_MAX_SCALE = 'max_scale'
+
+STYLE_ATTR = [STYLE_PALETTE, STYLE_SHADING, STYLE_BIN_SIZE, STYLE_MAX_SCALE]
+
+def _heatmap_location(data: np.array,
+                      video_setting: bool,
+                      frame_setting: bool,
+                      video_temp_dir: str,
+                      video_name: str,
+                      frame_dir: str,
+                      fps: int,
+                      style_attr: dict,
+                      aspect_ratio: float,
+                      size: tuple,
+                      make_location_heatmap_plot: PlottingMixin.make_location_heatmap_plot):
 
     group = int(data[0][0][1])
     if video_setting:
         fourcc = cv2.VideoWriter_fourcc(*Formats.MP4_CODEC.value)
-        video_save_path = os.path.join(video_temp_dir, "{}.mp4".format(str(group)))
+        video_save_path = os.path.join(video_temp_dir, f"{group}.mp4")
         video_writer = cv2.VideoWriter(video_save_path, fourcc, fps, size)
 
     for i in range(data.shape[0]):
         frame_id = int(data[i, 0, 0])
         frm_data = data[i, :, 2:]
 
-        img = make_location_heatmap_plot(
-            frm_data=frm_data,
-            max_scale=float(max_scale),
-            palette=style_attr["palette"],
-            aspect_ratio=aspect_ratio,
-            shading=style_attr["shading"],
-            img_size=size,
-            file_name=None,
-            final_img=False,
-        )
-
-        print(
-            "Heatmap frame created: {}, Video: {}, Processing core: {}".format(
-                str(frame_id + 1), video_name, str(group + 1)
-            )
-        )
-
+        img = PlottingMixin.make_location_heatmap_plot(frm_data=frm_data,
+                                         max_scale=style_attr[STYLE_MAX_SCALE],
+                                         palette=style_attr[STYLE_PALETTE],
+                                         aspect_ratio=aspect_ratio,
+                                         shading=style_attr[STYLE_SHADING],
+                                         img_size=size,
+                                         file_name=None)
         if video_setting:
-            video_writer.write(img)
-
+            video_writer.write(img[:, :, :3])
         if frame_setting:
             file_path = os.path.join(frame_dir, "{}.png".format(frame_id))
             cv2.imwrite(file_path, img)
+        print(f"Heatmap location/frame created: {frame_id + 1}, Video: {video_name}, Processing core: {group} ...")
 
     if video_setting:
         video_writer.release()
 
     return group
 
 
@@ -99,222 +94,154 @@
 
     :example:
     >>> style_attr = {'palette': 'jet', 'shading': 'gouraud', 'bin_size': 100, 'max_scale': 'auto'}
     >>> heatmapper = HeatMapperLocationMultiprocess(config_path='/Users/simon/Desktop/envs/troubleshooting/two_black_animals_14bp/project_folder/project_config.ini', style_attr = style_attr, core_cnt=-1, final_img_setting=True, video_setting=True, frame_setting=False, bodypart='Nose_1', files_found=['/Users/simon/Desktop/envs/troubleshooting/two_black_animals_14bp/project_folder/csv/machine_results/Together_1.csv'])
     >>> heatmapper.run()
     """
 
-    def __init__(
-        self,
-        config_path: str,
-        final_img_setting: bool,
-        video_setting: bool,
-        frame_setting: bool,
-        bodypart: str,
-        files_found: List[str],
-        style_attr: dict,
-        core_cnt: int,
-    ):
+    def __init__(self,
+                 config_path: Union[str, os.PathLike],
+                 data_paths: List[Union[str, os.PathLike]],
+                 bodypart: str,
+                 style_attr: Dict[str, Any],
+                 final_img_setting: Optional[bool] = True,
+                 video_setting: Optional[bool] = False,
+                 frame_setting: Optional[bool] = False,
+                 core_cnt: Optional[int] = -1):
 
         if (not frame_setting) and (not video_setting) and (not final_img_setting):
-            raise NoSpecifiedOutputError(
-                msg="Please choose to select either heatmap videos, frames, and/or final image.",
-                source=self.__class__.__name__,
-            )
+            raise NoSpecifiedOutputError(msg="Please choose to select either heatmap videos, frames, and/or final image.", source=self.__class__.__name__)
+        check_file_exist_and_readable(file_path=config_path)
+        check_valid_lst(data=data_paths, valid_dtypes=(str,), min_len=1)
+        check_if_keys_exist_in_dict(data=style_attr, key=STYLE_ATTR, name=f'{self.__class__.__name__} style_attr')
+        check_int(name=f'{self.__class__.__name__} core_cnt', value=core_cnt, min_value=-1, max_value=find_core_cnt()[0])
+        if core_cnt == -1: core_cnt = find_core_cnt()[0]
+        self.core_cnt = core_cnt
         ConfigReader.__init__(self, config_path=config_path, create_logger=False)
         PlottingMixin.__init__(self)
-        # log_event(logger_name=str(__class__.__name__), log_type=TagNames.CLASS_INIT.value, msg=self.create_log_msg_from_init_args(locals=locals()))
-        if platform.system() == "Darwin":
-            multiprocessing.set_start_method("spawn", force=True)
         self.frame_setting, self.video_setting = frame_setting, video_setting
         self.final_img_setting, self.bp = final_img_setting, bodypart
-        self.style_attr, self.files_found = style_attr, files_found
-        self.bin_size, self.max_scale, self.palette, self.shading, self.core_cnt = (
-            style_attr["bin_size"],
-            style_attr["max_scale"],
-            style_attr["palette"],
-            style_attr["shading"],
-            core_cnt,
-        )
+        self.style_attr, self.data_paths = style_attr, data_paths
         if not os.path.exists(self.heatmap_location_dir):
             os.makedirs(self.heatmap_location_dir)
         self.bp_lst = [self.bp + "_x", self.bp + "_y"]
-        print("Processing {} video(s)...".format(str(len(self.files_found))))
+        if platform.system() == "Darwin":
+            multiprocessing.set_start_method("spawn", force=True)
+        print(f"Processing {len(self.data_paths)} video(s)...")
 
     @staticmethod
     @jit(nopython=True)
     def __insert_group_idx_column(data: np.array, group: int, last_frm_idx: int):
-
         results = np.full((data.shape[0], data.shape[1], data.shape[2] + 2), np.nan)
         group_col = np.full((data.shape[1], 1), group)
         for frm_idx in prange(data.shape[0]):
             h_stack = np.hstack((group_col, data[frm_idx]))
             frm_col = np.full((h_stack.shape[0], 1), frm_idx + last_frm_idx)
             results[frm_idx] = np.hstack((frm_col, h_stack))
         return results
 
     def run(self):
-        for file_cnt, file_path in enumerate(self.files_found):
+        check_all_file_names_are_represented_in_video_log(video_info_df=self.video_info_df, data_paths=self.data_paths)
+        for file_cnt, file_path in enumerate(self.data_paths):
             video_timer = SimbaTimer(start=True)
             _, self.video_name, _ = get_fn_ext(file_path)
-            self.video_info, self.px_per_mm, self.fps = self.read_video_info(
-                video_name=self.video_name
-            )
-            self.width, self.height = int(
-                self.video_info["Resolution_width"].values[0]
-            ), int(self.video_info["Resolution_height"].values[0])
-            self.save_frame_folder_dir = os.path.join(
-                self.heatmap_location_dir, self.video_name
-            )
+            self.video_info, self.px_per_mm, self.fps = self.read_video_info(video_name=self.video_name)
+            self.width, self.height = int(self.video_info["Resolution_width"].values[0]), int(self.video_info["Resolution_height"].values[0])
+            self.save_frame_folder_dir = os.path.join(self.heatmap_location_dir, self.video_name)
             self.video_folder = os.path.join(self.heatmap_location_dir, self.video_name)
-            self.temp_folder = os.path.join(
-                self.heatmap_location_dir, self.video_name, "temp"
-            )
+            self.temp_folder = os.path.join(self.heatmap_location_dir, self.video_name, "temp")
             if self.frame_setting:
                 if os.path.exists(self.save_frame_folder_dir):
                     remove_a_folder(folder_dir=self.save_frame_folder_dir)
-                if not os.path.exists(self.save_frame_folder_dir):
-                    os.makedirs(self.save_frame_folder_dir)
+                os.makedirs(self.save_frame_folder_dir)
             if self.video_setting:
                 if os.path.exists(self.temp_folder):
                     remove_a_folder(folder_dir=self.temp_folder)
                     remove_a_folder(folder_dir=self.video_folder)
                 os.makedirs(self.temp_folder)
-                self.save_video_path = os.path.join(
-                    self.heatmap_location_dir, f"{self.video_name}.mp4"
-                )
+                self.save_video_path = os.path.join(self.heatmap_location_dir, f"{self.video_name}.mp4")
 
-            self.data_df = read_df(
-                file_path=file_path, file_type=self.file_type, usecols=self.bp_lst
-            )
-            squares, aspect_ratio = GeometryMixin().bucket_img_into_grid_square(
-                bucket_grid_size_mm=self.style_attr["bin_size"],
-                img_size=(self.width, self.height),
-                px_per_mm=self.px_per_mm,
-            )
-            cum_sum_squares = GeometryMixin().cumsum_coord_geometries(
-                data=self.data_df.values, fps=self.fps, geometries=squares
-            )
-            if self.max_scale == "auto":
-                self.max_scale = np.round(
-                    np.max(np.max(cum_sum_squares[-1], axis=0)), 3
-                )
-                if self.max_scale == 0:
-                    self.max_scale = 1
+            self.data_df = read_df(file_path=file_path, file_type=self.file_type, usecols=self.bp_lst)
+            squares, aspect_ratio = GeometryMixin().bucket_img_into_grid_square(bucket_grid_size_mm=self.style_attr[STYLE_BIN_SIZE], img_size=(self.width, self.height), px_per_mm=self.px_per_mm)
+            cum_sum_squares = GeometryMixin().cumsum_coord_geometries(data=self.data_df.values, fps=self.fps, geometries=squares)
+            if self.style_attr[STYLE_MAX_SCALE] == "auto":
+                self.style_attr[STYLE_MAX_SCALE]= np.round(np.max(np.max(cum_sum_squares[-1], axis=0)), 3)
+                if self.style_attr[STYLE_MAX_SCALE] == 0: self.style_attr[STYLE_MAX_SCALE] = 1
             else:
-                self.max_scale = self.style_attr["max_scale"]
+                check_float(name=f'{self.__class__.__name__} style max scale', value=self.style_attr["max_scale"], min_value=10e-6)
+                self.style_attr[STYLE_MAX_SCALE] = self.style_attr[STYLE_MAX_SCALE]
 
             if self.final_img_setting:
-                self.make_location_heatmap_plot(
-                    frm_data=cum_sum_squares[-1, :, :],
-                    max_scale=self.max_scale,
-                    palette=self.palette,
-                    aspect_ratio=aspect_ratio,
-                    file_name=os.path.join(
-                        self.heatmap_location_dir, self.video_name + "_final_frm.png"
-                    ),
-                    shading=self.shading,
-                    img_size=(self.width, self.height),
-                    final_img=True,
-                )
+                self.make_location_heatmap_plot(frm_data=cum_sum_squares[-1, :, :],
+                                                max_scale=self.style_attr[STYLE_MAX_SCALE],
+                                                palette=self.style_attr[STYLE_PALETTE],
+                                                aspect_ratio=aspect_ratio,
+                                                file_name=os.path.join(self.heatmap_location_dir, f"{self.video_name}_final_frm.png"),
+                                                shading=self.style_attr[STYLE_SHADING],
+                                                img_size=(self.width, self.height))
 
             if self.video_setting or self.frame_setting:
-                print("Creating video frames...")
+                print("Creating heatmap location video frames...")
                 frame_arrays = np.array_split(cum_sum_squares, self.core_cnt)
                 last_frm_idx = 0
                 for frm_group in range(len(frame_arrays)):
                     split_arr = frame_arrays[frm_group]
-                    frame_arrays[frm_group] = self.__insert_group_idx_column(
-                        data=split_arr, group=frm_group, last_frm_idx=last_frm_idx
-                    )
-                    last_frm_idx = np.max(
-                        frame_arrays[frm_group].reshape(
-                            (frame_arrays[frm_group].shape[0], -1)
-                        )
-                    )
+                    frame_arrays[frm_group] = self.__insert_group_idx_column(data=split_arr, group=frm_group, last_frm_idx=last_frm_idx)
+                    last_frm_idx = np.max(frame_arrays[frm_group].reshape((frame_arrays[frm_group].shape[0], -1)))
 
-                frm_per_core = frame_arrays[0].shape[0]
-                with multiprocessing.Pool(
-                    self.core_cnt, maxtasksperchild=self.maxtasksperchild
-                ) as pool:
-                    constants = functools.partial(
-                        _heatmap_location,
-                        video_setting=self.video_setting,
-                        frame_setting=self.frame_setting,
-                        style_attr=self.style_attr,
-                        fps=self.fps,
-                        video_temp_dir=self.temp_folder,
-                        frame_dir=self.save_frame_folder_dir,
-                        max_scale=self.max_scale,
-                        aspect_ratio=aspect_ratio,
-                        size=(self.width, self.height),
-                        video_name=self.video_name,
-                        make_location_heatmap_plot=self.make_location_heatmap_plot,
-                    )
-                    for cnt, result in enumerate(
-                        pool.imap(
-                            constants,
-                            frame_arrays,
-                            chunksize=self.multiprocess_chunksize,
-                        )
-                    ):
-                        print(
-                            "Image {}/{}, Video {}/{}...".format(
-                                str(int(frm_per_core * (result + 1))),
-                                str(len(self.data_df)),
-                                str(file_cnt + 1),
-                                str(len(self.files_found)),
-                            )
-                        )
+                with multiprocessing.Pool(self.core_cnt, maxtasksperchild=self.maxtasksperchild) as pool:
+                    constants = functools.partial(_heatmap_location,
+                                                  video_setting=self.video_setting,
+                                                  frame_setting=self.frame_setting,
+                                                  style_attr=self.style_attr,
+                                                  fps=self.fps,
+                                                  video_temp_dir=self.temp_folder,
+                                                  frame_dir=self.save_frame_folder_dir,
+                                                  aspect_ratio=aspect_ratio,
+                                                  size=(self.width, self.height),
+                                                  video_name=self.video_name,
+                                                  make_location_heatmap_plot=self.make_location_heatmap_plot)
+                    for cnt, result in enumerate(pool.imap(constants,frame_arrays,chunksize=self.multiprocess_chunksize)):
+                        print(f'Batch {result}/{self.core_cnt} complete... Video: {self.video_name} ({file_cnt+1}/{len(self.data_paths)})')
                     pool.terminate()
                     pool.join()
 
                 if self.video_setting:
-                    print(
-                        "Joining {} multiprocessed heatmap location video...".format(
-                            self.video_name
-                        )
-                    )
-                    concatenate_videos_in_folder(
-                        in_folder=self.temp_folder, save_path=self.save_video_path
-                    )
+                    print(f"Joining {self.video_name} multiprocessed heatmap location video...")
+                    concatenate_videos_in_folder(in_folder=self.temp_folder, save_path=self.save_video_path)
 
                 video_timer.stop_timer()
                 print(
                     "Heatmap video {} complete (elapsed time: {}s) ...".format(
                         self.video_name, video_timer.elapsed_time_str
                     )
                 )
 
             self.timer.stop_timer()
-            stdout_success(
-                msg=f"Heatmap location videos visualizations for {len(self.files_found)} videos created in project_folder/frames/output/heatmaps_locations directory",
-                elapsed_time=self.timer.elapsed_time_str,
-                source=self.__class__.__name__,
-            )
+            stdout_success(msg=f"Heatmap location videos visualizations for {len(self.data_paths)} videos created in {self.heatmap_location_dir} directory", elapsed_time=self.timer.elapsed_time_str, source=self.__class__.__name__)
 
 
 # test = HeatMapperLocationMultiprocess(config_path='/Users/simon/Desktop/envs/troubleshooting/two_black_animals_14bp/project_folder/project_config.ini',
 #                                       style_attr = {'palette': 'jet', 'shading': 'gouraud', 'bin_size': 80, 'max_scale': 'auto'},
 #                                       final_img_setting=True,
 #                                       video_setting=False,
 #                                       frame_setting=False,
 #                                       bodypart='Nose_1',
 #                                       core_cnt=5,
 #                                       files_found=['/Users/simon/Desktop/envs/troubleshooting/two_black_animals_14bp/project_folder/csv/outlier_corrected_movement_location/Together_1.csv'])
 # test.run()
 
-# test = HeatMapperLocationMultiprocess(config_path='/Users/simon/Desktop/envs/troubleshooting/Rat_NOR/project_folder/project_config.ini',
-#                                       style_attr = {'palette': 'jet', 'shading': 'gouraud', 'bin_size': 100, 'max_scale': 'auto'},
+# test = HeatMapperLocationMultiprocess(config_path='/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/project_config.ini',
+#                                       style_attr = {'palette': 'magma', 'shading': 'gouraud', 'bin_size': 100, 'max_scale': 'auto'},
 #                                       final_img_setting=True,
-#                                       video_setting=False,
+#                                       video_setting=True,
 #                                       frame_setting=False,
 #                                       bodypart='Nose',
 #                                       core_cnt=5,
-#                                       files_found=['/Users/simon/Desktop/envs/troubleshooting/Rat_NOR/project_folder/csv/machine_results/2022-06-26_NOB_DOT_4.csv'])
+#                                       data_paths=['/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/csv/machine_results/2022-06-20_NOB_DOT_4.csv'])
 # test.run()
 
 # img = np.zeros((img_size[0], img_size[1], 3)).astype(np.uint8)
 # for i in polygons:
 #     coords = np.array(i.exterior.coords).astype(np.int)
 #     print(coords)
 #     cv2.polylines(img, [coords], True, (0, 0, 50), 2)
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/dash_app/SimBA_dash_app.py` & `Simba-UW-tf-dev-1.91.6/simba/dash_app/SimBA_dash_app.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/dash_app/run_dash_tkinter.py` & `Simba-UW-tf-dev-1.91.6/simba/dash_app/run_dash_tkinter.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/dash_app/dash_app.py` & `Simba-UW-tf-dev-1.91.6/simba/dash_app/dash_app.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/spontaneous_alternation_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/spontaneous_alternation_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/agg_clf_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/agg_clf_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/severity_bout_based_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/severity_bout_based_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/interpolation_smoothing.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/interpolation_smoothing.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/directing_animal_to_bodypart.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/directing_animal_to_bodypart.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/timebins_clf_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/timebins_clf_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/fsttc_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/fsttc_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/boolean_conditional_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/boolean_conditional_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/interpolate_pose.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/interpolate_pose.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/directing_other_animals_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/directing_other_animals_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/gibbs_sampler.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/gibbs_sampler.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/timebins_movement_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/timebins_movement_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/severity_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/severity_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/pup_retrieval_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/pup_retrieval_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/pybursts_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/pybursts_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/severity_frame_based_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/severity_frame_based_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/mutual_exclusivity_corrector.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/mutual_exclusivity_corrector.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/kleinberg_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/kleinberg_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/data_processors/movement_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/data_processors/movement_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/model/train_rf.py` & `Simba-UW-tf-dev-1.91.6/simba/model/train_rf.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/model/inference_batch.py` & `Simba-UW-tf-dev-1.91.6/simba/model/inference_batch.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/model/train_multiclass_rf.py` & `Simba-UW-tf-dev-1.91.6/simba/model/train_multiclass_rf.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/model/inference_multiclass_batch.py` & `Simba-UW-tf-dev-1.91.6/simba/model/inference_multiclass_batch.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/model/grid_search_multiclass_rf.py` & `Simba-UW-tf-dev-1.91.6/simba/model/grid_search_multiclass_rf.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/model/grid_search_rf.py` & `Simba-UW-tf-dev-1.91.6/simba/model/grid_search_rf.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/model/inference_validation.py` & `Simba-UW-tf-dev-1.91.6/simba/model/inference_validation.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/model/train_multilabel_rf.py` & `Simba-UW-tf-dev-1.91.6/simba/model/train_multilabel_rf.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_time_bin_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_time_bin_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_define.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_define.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_reset.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_reset.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_size_standardizer.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_size_standardizer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_analyzer.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_analyzer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_feature_analyzer.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_feature_analyzer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_multiply.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_multiply.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_size_calculations.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_size_calculations.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_zoom.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_zoom.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_directing_analyzer.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_directing_analyzer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_move_shape.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_move_shape.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_menus.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_menus.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_clf_calculator.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_clf_calculator.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/roi_tools/ROI_image.py` & `Simba-UW-tf-dev-1.91.6/simba/roi_tools/ROI_image.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_importers/sleap_csv_importer.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_importers/sleap_csv_importer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_importers/misc/apt_trk_importer.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_importers/misc/apt_trk_importer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_importers/read_DANNCE_mat.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_importers/read_DANNCE_mat.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_importers/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/pose_importers/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_importers/sleap_h5_importer.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_importers/sleap_h5_importer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_importers/madlc_importer.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_importers/madlc_importer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_importers/sleap_slp_importer.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_importers/sleap_slp_importer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_importers/import_mars.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_importers/import_mars.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_importers/dlc_importer_csv.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_importers/dlc_importer_csv.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_importers/trk_importer.py` & `Simba-UW-tf-dev-1.91.6/simba/pose_importers/trk_importer.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/bp_names/bp_names.csv` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/bp_names/bp_names.csv`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/8.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/8.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/9.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/9.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/12.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/12.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/13.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/13.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/11.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/11.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/10.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/10.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/4.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/4.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/5.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/5.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/7.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/7.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/6.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/6.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/2.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/2.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/3.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/3.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/pose_configurations/schematics/1.png` & `Simba-UW-tf-dev-1.91.6/simba/pose_configurations/schematics/1.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/video_processing.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/video_processing.py`

 * *Files 1% similar despite different names*

```diff
@@ -110,7373 +110,7415 @@
 000006d0: 5f61 6c6c 5f76 6964 656f 735f 696e 5f64  _all_videos_in_d
 000006e0: 6972 6563 746f 7279 2c20 6669 6e64 5f63  irectory, find_c
 000006f0: 6f72 655f 636e 742c 2067 6574 5f66 6e5f  ore_cnt, get_fn_
 00000700: 6578 742c 0a20 2020 2067 6574 5f76 6964  ext,.    get_vid
 00000710: 656f 5f6d 6574 615f 6461 7461 2c20 7265  eo_meta_data, re
 00000720: 6164 5f63 6f6e 6669 675f 656e 7472 792c  ad_config_entry,
 00000730: 2072 6561 645f 636f 6e66 6967 5f66 696c   read_config_fil
-00000740: 6529 0a66 726f 6d20 7369 6d62 612e 7574  e).from simba.ut
-00000750: 696c 732e 7761 726e 696e 6773 2069 6d70  ils.warnings imp
-00000760: 6f72 7420 2846 696c 6545 7869 7374 5761  ort (FileExistWa
-00000770: 726e 696e 672c 2049 6e56 616c 6964 5573  rning, InValidUs
-00000780: 6572 496e 7075 7457 6172 6e69 6e67 2c0a  erInputWarning,.
-00000790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000007a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000007b0: 2020 5361 6d65 496e 7075 7441 6e64 4f75    SameInputAndOu
-000007c0: 7470 7574 5761 726e 696e 6729 0a66 726f  tputWarning).fro
-000007d0: 6d20 7369 6d62 612e 7669 6465 6f5f 7072  m simba.video_pr
-000007e0: 6f63 6573 736f 7273 2e65 7874 7261 6374  ocessors.extract
-000007f0: 5f66 7261 6d65 7320 696d 706f 7274 2076  _frames import v
-00000800: 6964 656f 5f74 6f5f 6672 616d 6573 0a66  ideo_to_frames.f
-00000810: 726f 6d20 7369 6d62 612e 7669 6465 6f5f  rom simba.video_
-00000820: 7072 6f63 6573 736f 7273 2e72 6f69 5f73  processors.roi_s
-00000830: 656c 6563 746f 7220 696d 706f 7274 2052  elector import R
-00000840: 4f49 5365 6c65 6374 6f72 0a66 726f 6d20  OISelector.from 
-00000850: 7369 6d62 612e 7669 6465 6f5f 7072 6f63  simba.video_proc
-00000860: 6573 736f 7273 2e72 6f69 5f73 656c 6563  essors.roi_selec
-00000870: 746f 725f 6369 7263 6c65 2069 6d70 6f72  tor_circle impor
-00000880: 7420 524f 4953 656c 6563 746f 7243 6972  t ROISelectorCir
-00000890: 636c 650a 6672 6f6d 2073 696d 6261 2e76  cle.from simba.v
-000008a0: 6964 656f 5f70 726f 6365 7373 6f72 732e  ideo_processors.
-000008b0: 726f 695f 7365 6c65 6374 6f72 5f70 6f6c  roi_selector_pol
-000008c0: 7967 6f6e 2069 6d70 6f72 7420 524f 4953  ygon import ROIS
-000008d0: 656c 6563 746f 7250 6f6c 7967 6f6e 0a0a  electorPolygon..
-000008e0: 4d41 585f 4652 4d5f 5349 5a45 203d 2031  MAX_FRM_SIZE = 1
-000008f0: 3038 302c 2036 3530 0a0a 0a64 6566 2063  080, 650...def c
-00000900: 6861 6e67 655f 696d 675f 666f 726d 6174  hange_img_format
-00000910: 280a 2020 2020 6469 7265 6374 6f72 793a  (.    directory:
-00000920: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
-00000930: 6174 684c 696b 655d 2c0a 2020 2020 6669  athLike],.    fi
-00000940: 6c65 5f74 7970 655f 696e 3a20 7374 722c  le_type_in: str,
-00000950: 0a20 2020 2066 696c 655f 7479 7065 5f6f  .    file_type_o
-00000960: 7574 3a20 7374 722c 0a20 2020 2076 6572  ut: str,.    ver
-00000970: 626f 7365 3a20 4f70 7469 6f6e 616c 5b62  bose: Optional[b
-00000980: 6f6f 6c5d 203d 2046 616c 7365 2c0a 2920  ool] = False,.) 
-00000990: 2d3e 204e 6f6e 653a 0a20 2020 2022 2222  -> None:.    """
-000009a0: 0a20 2020 2043 6f6e 7665 7274 2074 6865  .    Convert the
-000009b0: 2066 696c 6520 7479 7065 206f 6620 616c   file type of al
-000009c0: 6c20 696d 6167 6520 6669 6c65 7320 7769  l image files wi
-000009d0: 7468 696e 2061 2064 6972 6563 746f 7279  thin a directory
-000009e0: 2e0a 0a20 2020 203a 7061 7261 6d65 7465  ...    :paramete
-000009f0: 7220 556e 696f 6e5b 7374 722c 206f 732e  r Union[str, os.
-00000a00: 5061 7468 4c69 6b65 5d20 6469 7265 6374  PathLike] direct
-00000a10: 6f72 793a 2050 6174 6820 746f 2064 6972  ory: Path to dir
-00000a20: 6563 746f 7279 2068 6f6c 6469 6e67 2069  ectory holding i
-00000a30: 6d61 6765 2066 696c 6573 0a20 2020 203a  mage files.    :
-00000a40: 7061 7261 6d65 7465 7220 7374 7220 6669  parameter str fi
-00000a50: 6c65 5f74 7970 655f 696e 3a20 496e 7075  le_type_in: Inpu
-00000a60: 7420 6669 6c65 2074 7970 652c 2065 2e67  t file type, e.g
-00000a70: 2e2c 2027 626d 7027 206f 7220 2770 6e67  ., 'bmp' or 'png
-00000a80: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
-00000a90: 2073 7472 2066 696c 655f 7479 7065 5f6f   str file_type_o
-00000aa0: 7574 3a20 4f75 7470 7574 2066 696c 6520  ut: Output file 
-00000ab0: 7479 7065 2c20 652e 672e 2c20 2762 6d70  type, e.g., 'bmp
-00000ac0: 2720 6f72 2027 706e 672e 0a20 2020 203a  ' or 'png..    :
-00000ad0: 7061 7261 6d65 7465 7220 4f70 7469 6f6e  parameter Option
-00000ae0: 616c 5b62 6f6f 6c5d 2076 6572 626f 7365  al[bool] verbose
-00000af0: 3a20 4966 2054 7275 652c 2070 7269 6e74  : If True, print
-00000b00: 7320 7072 6f67 7265 7373 2e20 4465 6661  s progress. Defa
-00000b10: 756c 7420 4661 6c73 652e 0a0a 2020 2020  ult False...    
-00000b20: 3a65 7861 6d70 6c65 3a0a 2020 2020 3e3e  :example:.    >>
-00000b30: 3e20 5f20 3d20 6368 616e 6765 5f69 6d67  > _ = change_img
-00000b40: 5f66 6f72 6d61 7428 6469 7265 6374 6f72  _format(director
-00000b50: 793d 272f 5573 6572 732f 7369 6d6f 6e2f  y='/Users/simon/
-00000b60: 4465 736b 746f 702f 656e 7673 2f73 696d  Desktop/envs/sim
-00000b70: 6261 2f74 726f 7562 6c65 7368 6f6f 7469  ba/troubleshooti
-00000b80: 6e67 2f74 776f 5f62 6c61 636b 5f61 6e69  ng/two_black_ani
-00000b90: 6d61 6c73 5f31 3462 702f 7465 7374 5f69  mals_14bp/test_i
-00000ba0: 6d67 272c 2066 696c 655f 7479 7065 5f69  mg', file_type_i
-00000bb0: 6e3d 2770 6e67 272c 2066 696c 655f 7479  n='png', file_ty
-00000bc0: 7065 5f6f 7574 3d27 626d 7027 2c20 7665  pe_out='bmp', ve
-00000bd0: 7262 6f73 653d 5472 7565 290a 0a20 2020  rbose=True)..   
-00000be0: 2022 2222 0a20 2020 2063 6865 636b 5f69   """.    check_i
-00000bf0: 665f 6469 725f 6578 6973 7473 2869 6e5f  f_dir_exists(in_
-00000c00: 6469 723d 6469 7265 6374 6f72 792c 2073  dir=directory, s
-00000c10: 6f75 7263 653d 6368 616e 6765 5f69 6d67  ource=change_img
-00000c20: 5f66 6f72 6d61 742e 5f5f 6e61 6d65 5f5f  _format.__name__
-00000c30: 290a 2020 2020 6669 6c65 735f 666f 756e  ).    files_foun
-00000c40: 6420 3d20 676c 6f62 2e67 6c6f 6228 6469  d = glob.glob(di
-00000c50: 7265 6374 6f72 7920 2b20 6622 2f2a 2e7b  rectory + f"/*.{
-00000c60: 6669 6c65 5f74 7970 655f 696e 7d22 290a  file_type_in}").
-00000c70: 2020 2020 6966 206c 656e 2866 696c 6573      if len(files
-00000c80: 5f66 6f75 6e64 2920 3d3d 2030 3a0a 2020  _found) == 0:.  
-00000c90: 2020 2020 2020 7261 6973 6520 4e6f 4669        raise NoFi
-00000ca0: 6c65 7346 6f75 6e64 4572 726f 7228 0a20  lesFoundError(. 
-00000cb0: 2020 2020 2020 2020 2020 2066 2253 494d             f"SIM
-00000cc0: 4241 2045 5252 4f52 3a20 4e6f 207b 6669  BA ERROR: No {fi
-00000cd0: 6c65 5f74 7970 655f 696e 7d20 6669 6c65  le_type_in} file
-00000ce0: 7320 2877 6974 6820 2e7b 6669 6c65 5f74  s (with .{file_t
-00000cf0: 7970 655f 696e 7d20 6669 6c65 2065 7874  ype_in} file ext
-00000d00: 656e 7369 6f6e 2920 666f 756e 6420 696e  ension) found in
-00000d10: 2074 6865 207b 6469 7265 6374 6f72 797d   the {directory}
-00000d20: 2064 6972 6563 746f 7279 222c 0a20 2020   directory",.   
-00000d30: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
-00000d40: 6368 616e 6765 5f69 6d67 5f66 6f72 6d61  change_img_forma
-00000d50: 742e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  t.__name__,.    
-00000d60: 2020 2020 290a 2020 2020 7072 696e 7428      ).    print(
-00000d70: 6622 7b6c 656e 2866 696c 6573 5f66 6f75  f"{len(files_fou
-00000d80: 6e64 297d 2069 6d61 6765 2066 696c 6573  nd)} image files
-00000d90: 2066 6f75 6e64 2069 6e20 7b64 6972 6563   found in {direc
-00000da0: 746f 7279 7d2e 2e2e 2229 0a20 2020 2066  tory}...").    f
-00000db0: 6f72 2066 696c 655f 636e 742c 2066 696c  or file_cnt, fil
-00000dc0: 655f 7061 7468 2069 6e20 656e 756d 6572  e_path in enumer
-00000dd0: 6174 6528 6669 6c65 735f 666f 756e 6429  ate(files_found)
-00000de0: 3a0a 2020 2020 2020 2020 6966 2076 6572  :.        if ver
-00000df0: 626f 7365 3a0a 2020 2020 2020 2020 2020  bose:.          
-00000e00: 2020 7072 696e 7428 6622 436f 6e76 6572    print(f"Conver
-00000e10: 7469 6e67 2066 696c 6520 7b66 696c 655f  ting file {file_
-00000e20: 636e 742b 317d 2f7b 6c65 6e28 6669 6c65  cnt+1}/{len(file
-00000e30: 735f 666f 756e 6429 7d20 2e2e 2e22 290a  s_found)} ...").
-00000e40: 2020 2020 2020 2020 696d 203d 2049 6d61          im = Ima
-00000e50: 6765 2e6f 7065 6e28 6669 6c65 5f70 6174  ge.open(file_pat
-00000e60: 6829 0a20 2020 2020 2020 2073 6176 655f  h).        save_
-00000e70: 6e61 6d65 203d 2066 696c 655f 7061 7468  name = file_path
-00000e80: 2e72 6570 6c61 6365 2822 2e22 202b 2073  .replace("." + s
-00000e90: 7472 2866 696c 655f 7479 7065 5f69 6e29  tr(file_type_in)
-00000ea0: 2c20 222e 2220 2b20 7374 7228 6669 6c65  , "." + str(file
-00000eb0: 5f74 7970 655f 6f75 7429 290a 2020 2020  _type_out)).    
-00000ec0: 2020 2020 696d 2e73 6176 6528 7361 7665      im.save(save
-00000ed0: 5f6e 616d 6529 0a20 2020 2020 2020 206f  _name).        o
-00000ee0: 732e 7265 6d6f 7665 2866 696c 655f 7061  s.remove(file_pa
-00000ef0: 7468 290a 2020 2020 7374 646f 7574 5f73  th).    stdout_s
-00000f00: 7563 6365 7373 280a 2020 2020 2020 2020  uccess(.        
-00000f10: 6d73 673d 6622 5349 4d42 4120 434f 4d50  msg=f"SIMBA COMP
-00000f20: 4c45 5445 3a20 4669 6c65 7320 696e 207b  LETE: Files in {
-00000f30: 6469 7265 6374 6f72 797d 2064 6972 6563  directory} direc
-00000f40: 746f 7279 2063 6f6e 7665 7274 6564 2074  tory converted t
-00000f50: 6f20 7b66 696c 655f 7479 7065 5f6f 7574  o {file_type_out
-00000f60: 7d22 2c0a 2020 2020 2020 2020 736f 7572  }",.        sour
-00000f70: 6365 3d63 6861 6e67 655f 696d 675f 666f  ce=change_img_fo
-00000f80: 726d 6174 2e5f 5f6e 616d 655f 5f2c 0a20  rmat.__name__,. 
-00000f90: 2020 2029 0a0a 0a64 6566 2063 6c61 6865     )...def clahe
-00000fa0: 5f65 6e68 616e 6365 5f76 6964 656f 280a  _enhance_video(.
-00000fb0: 2020 2020 6669 6c65 5f70 6174 683a 2055      file_path: U
-00000fc0: 6e69 6f6e 5b73 7472 2c20 6f73 2e50 6174  nion[str, os.Pat
-00000fd0: 684c 696b 655d 2c0a 2020 2020 636c 6970  hLike],.    clip
-00000fe0: 5f6c 696d 6974 3a20 4f70 7469 6f6e 616c  _limit: Optional
-00000ff0: 5b69 6e74 5d20 3d20 322c 0a20 2020 2074  [int] = 2,.    t
-00001000: 696c 655f 6772 6964 5f73 697a 653a 204f  ile_grid_size: O
-00001010: 7074 696f 6e61 6c5b 5475 706c 655b 696e  ptional[Tuple[in
-00001020: 745d 5d20 3d20 2831 362c 2031 3629 2c0a  t]] = (16, 16),.
-00001030: 2920 2d3e 204e 6f6e 653a 0a20 2020 2022  ) -> None:.    "
-00001040: 2222 0a20 2020 2043 6f6e 7665 7274 2061  "".    Convert a
-00001050: 2073 696e 676c 6520 7669 6465 6f20 6669   single video fi
-00001060: 6c65 2074 6f20 636c 6168 652d 656e 6861  le to clahe-enha
-00001070: 6e63 6564 2067 7265 7973 6361 6c65 202e  nced greyscale .
-00001080: 6176 6920 6669 6c65 2e20 5468 6520 7265  avi file. The re
-00001090: 7375 6c74 2069 7320 7361 7665 6420 7769  sult is saved wi
-000010a0: 7468 2070 7265 6669 780a 2020 2020 6060  th prefix.    ``
-000010b0: 434c 4148 455f 6060 2069 6e20 7468 6520  CLAHE_`` in the 
-000010c0: 7361 6d65 2064 6972 6563 746f 7279 2061  same directory a
-000010d0: 7320 696e 2074 6865 2069 6e70 7574 2066  s in the input f
-000010e0: 696c 652e 0a0a 2020 2020 3a70 6172 616d  ile...    :param
-000010f0: 6574 6572 2055 6e69 6f6e 5b73 7472 2c20  eter Union[str, 
-00001100: 6f73 2e50 6174 684c 696b 655d 2066 696c  os.PathLike] fil
-00001110: 655f 7061 7468 3a20 5061 7468 2074 6f20  e_path: Path to 
-00001120: 7669 6465 6f20 6669 6c65 2e0a 2020 2020  video file..    
-00001130: 3a70 6172 616d 6574 6572 204f 7074 696f  :parameter Optio
-00001140: 6e61 6c5b 696e 745d 2063 6c69 705f 6c69  nal[int] clip_li
-00001150: 6d69 743a 2043 4c41 4845 2061 6d70 6c69  mit: CLAHE ampli
-00001160: 6669 6361 7469 6f6e 206c 696d 6974 2e20  fication limit. 
-00001170: 496e 6363 7265 6173 6564 2063 6c69 7020  Inccreased clip 
-00001180: 6c69 6d69 7420 7265 6475 6365 206e 6f69  limit reduce noi
-00001190: 7365 2069 6e20 6f75 7470 7574 2e20 4465  se in output. De
-000011a0: 6661 756c 743a 2032 2e0a 2020 2020 3a70  fault: 2..    :p
-000011b0: 6172 616d 6574 6572 204f 7074 696f 6e61  arameter Optiona
-000011c0: 6c5b 5475 706c 655b 696e 745d 5d20 7469  l[Tuple[int]] ti
-000011d0: 6c65 5f67 7269 645f 7369 7a65 3a20 5468  le_grid_size: Th
-000011e0: 6520 6869 7374 6f67 7261 6d20 6b65 726e  e histogram kern
-000011f0: 656c 2073 697a 652e 0a0a 2020 2020 3a65  el size...    :e
-00001200: 7861 6d70 6c65 3a0a 2020 2020 3e3e 3e20  xample:.    >>> 
-00001210: 5f20 3d20 636c 6168 655f 656e 6861 6e63  _ = clahe_enhanc
-00001220: 655f 7669 6465 6f28 6669 6c65 5f70 6174  e_video(file_pat
-00001230: 683a 2027 7072 6f6a 6563 745f 666f 6c64  h: 'project_fold
-00001240: 6572 2f76 6964 656f 732f 5669 6465 6f5f  er/videos/Video_
-00001250: 312e 6d70 3427 290a 2020 2020 2222 220a  1.mp4').    """.
-00001260: 0a20 2020 2063 6865 636b 5f66 696c 655f  .    check_file_
-00001270: 6578 6973 745f 616e 645f 7265 6164 6162  exist_and_readab
-00001280: 6c65 2866 696c 655f 7061 7468 3d66 696c  le(file_path=fil
-00001290: 655f 7061 7468 290a 2020 2020 6368 6563  e_path).    chec
-000012a0: 6b5f 696e 7428 0a20 2020 2020 2020 206e  k_int(.        n
-000012b0: 616d 653d 6622 7b63 6c61 6865 5f65 6e68  ame=f"{clahe_enh
-000012c0: 616e 6365 5f76 6964 656f 2e5f 5f6e 616d  ance_video.__nam
-000012d0: 655f 5f7d 2063 6c69 705f 6c69 6d69 7422  e__} clip_limit"
-000012e0: 2c20 7661 6c75 653d 636c 6970 5f6c 696d  , value=clip_lim
-000012f0: 6974 2c20 6d69 6e5f 7661 6c75 653d 300a  it, min_value=0.
-00001300: 2020 2020 290a 2020 2020 7669 6465 6f5f      ).    video_
-00001310: 6d65 7461 5f64 6174 6120 3d20 6765 745f  meta_data = get_
-00001320: 7669 6465 6f5f 6d65 7461 5f64 6174 6128  video_meta_data(
-00001330: 6669 6c65 5f70 6174 6829 0a20 2020 2063  file_path).    c
-00001340: 6865 636b 5f76 616c 6964 5f74 7570 6c65  heck_valid_tuple
-00001350: 280a 2020 2020 2020 2020 783d 7469 6c65  (.        x=tile
-00001360: 5f67 7269 645f 7369 7a65 2c0a 2020 2020  _grid_size,.    
-00001370: 2020 2020 736f 7572 6365 3d63 6c61 6865      source=clahe
-00001380: 5f65 6e68 616e 6365 5f76 6964 656f 2e5f  _enhance_video._
-00001390: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
-000013a0: 2061 6363 6570 7465 645f 6c65 6e67 7468   accepted_length
-000013b0: 733d 2832 2c29 2c0a 2020 2020 2020 2020  s=(2,),.        
-000013c0: 7661 6c69 645f 6474 7970 6573 3d28 696e  valid_dtypes=(in
-000013d0: 742c 292c 0a20 2020 2029 0a20 2020 2069  t,),.    ).    i
-000013e0: 6620 2874 696c 655f 6772 6964 5f73 697a  f (tile_grid_siz
-000013f0: 655b 305d 203e 2076 6964 656f 5f6d 6574  e[0] > video_met
-00001400: 615f 6461 7461 5b22 6865 6967 6874 225d  a_data["height"]
-00001410: 2920 6f72 2028 0a20 2020 2020 2020 2028  ) or (.        (
-00001420: 7469 6c65 5f67 7269 645f 7369 7a65 5b31  tile_grid_size[1
-00001430: 5d20 3e20 7669 6465 6f5f 6d65 7461 5f64  ] > video_meta_d
-00001440: 6174 615b 2277 6964 7468 225d 290a 2020  ata["width"]).  
-00001450: 2020 293a 0a20 2020 2020 2020 2072 6169    ):.        rai
-00001460: 7365 2049 6e76 616c 6964 496e 7075 7445  se InvalidInputE
-00001470: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
-00001480: 2020 6d73 673d 6627 5468 6520 7469 6c65    msg=f'The tile
-00001490: 2067 7269 6420 7369 7a65 2028 7b74 696c   grid size ({til
-000014a0: 655f 6772 6964 5f73 697a 657d 2920 6973  e_grid_size}) is
-000014b0: 206c 6172 6765 7220 7468 616e 2074 6865   larger than the
-000014c0: 2076 6964 656f 2073 697a 6520 287b 7669   video size ({vi
-000014d0: 6465 6f5f 6d65 7461 5f64 6174 615b 2272  deo_meta_data["r
-000014e0: 6573 6f6c 7574 696f 6e5f 7374 7222 5d7d  esolution_str"]}
-000014f0: 2927 2c0a 2020 2020 2020 2020 2020 2020  )',.            
-00001500: 736f 7572 6365 3d63 6c61 6865 5f65 6e68  source=clahe_enh
-00001510: 616e 6365 5f76 6964 656f 2e5f 5f6e 616d  ance_video.__nam
-00001520: 655f 5f2c 0a20 2020 2020 2020 2029 0a20  e__,.        ). 
-00001530: 2020 2064 6972 2c20 6669 6c65 5f6e 616d     dir, file_nam
-00001540: 652c 2066 696c 655f 6578 7420 3d20 6765  e, file_ext = ge
-00001550: 745f 666e 5f65 7874 2866 696c 6570 6174  t_fn_ext(filepat
-00001560: 683d 6669 6c65 5f70 6174 6829 0a20 2020  h=file_path).   
-00001570: 2073 6176 655f 7061 7468 203d 206f 732e   save_path = os.
-00001580: 7061 7468 2e6a 6f69 6e28 6469 722c 2066  path.join(dir, f
-00001590: 2243 4c41 4845 5f7b 6669 6c65 5f6e 616d  "CLAHE_{file_nam
-000015a0: 657d 2e61 7669 2229 0a20 2020 2066 6f75  e}.avi").    fou
-000015b0: 7263 6320 3d20 6376 322e 5669 6465 6f57  rcc = cv2.VideoW
-000015c0: 7269 7465 725f 666f 7572 6363 282a 466f  riter_fourcc(*Fo
-000015d0: 726d 6174 732e 4156 495f 434f 4445 432e  rmats.AVI_CODEC.
-000015e0: 7661 6c75 6529 0a20 2020 2070 7269 6e74  value).    print
-000015f0: 2866 2241 7070 6c79 696e 6720 434c 4148  (f"Applying CLAH
-00001600: 4520 6f6e 2076 6964 656f 207b 6669 6c65  E on video {file
-00001610: 5f6e 616d 657d 2c20 7468 6973 206d 6967  _name}, this mig
-00001620: 6874 2074 616b 6520 6177 6869 6c65 2e2e  ht take awhile..
-00001630: 2e22 290a 2020 2020 6361 7020 3d20 6376  .").    cap = cv
-00001640: 322e 5669 6465 6f43 6170 7475 7265 2866  2.VideoCapture(f
-00001650: 696c 655f 7061 7468 290a 2020 2020 7772  ile_path).    wr
-00001660: 6974 6572 203d 2063 7632 2e56 6964 656f  iter = cv2.Video
-00001670: 5772 6974 6572 280a 2020 2020 2020 2020  Writer(.        
-00001680: 7361 7665 5f70 6174 682c 0a20 2020 2020  save_path,.     
-00001690: 2020 2066 6f75 7263 632c 0a20 2020 2020     fourcc,.     
-000016a0: 2020 2076 6964 656f 5f6d 6574 615f 6461     video_meta_da
-000016b0: 7461 5b22 6670 7322 5d2c 0a20 2020 2020  ta["fps"],.     
-000016c0: 2020 2028 7669 6465 6f5f 6d65 7461 5f64     (video_meta_d
-000016d0: 6174 615b 2277 6964 7468 225d 2c20 7669  ata["width"], vi
-000016e0: 6465 6f5f 6d65 7461 5f64 6174 615b 2268  deo_meta_data["h
-000016f0: 6569 6768 7422 5d29 2c0a 2020 2020 2020  eight"]),.      
-00001700: 2020 302c 0a20 2020 2029 0a20 2020 2063    0,.    ).    c
-00001710: 6c61 6865 5f66 696c 7465 7220 3d20 6376  lahe_filter = cv
-00001720: 322e 6372 6561 7465 434c 4148 4528 0a20  2.createCLAHE(. 
-00001730: 2020 2020 2020 2063 6c69 704c 696d 6974         clipLimit
-00001740: 3d69 6e74 2863 6c69 705f 6c69 6d69 7429  =int(clip_limit)
-00001750: 2c20 7469 6c65 4772 6964 5369 7a65 3d74  , tileGridSize=t
-00001760: 696c 655f 6772 6964 5f73 697a 650a 2020  ile_grid_size.  
-00001770: 2020 290a 2020 2020 6672 6d5f 636e 7420    ).    frm_cnt 
-00001780: 3d20 300a 2020 2020 7472 793a 0a20 2020  = 0.    try:.   
-00001790: 2020 2020 2077 6869 6c65 2054 7275 653a       while True:
-000017a0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000017b0: 2c20 696d 6720 3d20 6361 702e 7265 6164  , img = cap.read
-000017c0: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
-000017d0: 6620 7265 743a 0a20 2020 2020 2020 2020  f ret:.         
-000017e0: 2020 2020 2020 2066 726d 5f63 6e74 202b         frm_cnt +
-000017f0: 3d20 310a 2020 2020 2020 2020 2020 2020  = 1.            
-00001800: 2020 2020 696d 6720 3d20 6376 322e 6376      img = cv2.cv
-00001810: 7443 6f6c 6f72 2869 6d67 2c20 6376 322e  tColor(img, cv2.
-00001820: 434f 4c4f 525f 4247 5232 4752 4159 290a  COLOR_BGR2GRAY).
-00001830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001840: 636c 6168 655f 6672 6d20 3d20 636c 6168  clahe_frm = clah
-00001850: 655f 6669 6c74 6572 2e61 7070 6c79 2869  e_filter.apply(i
-00001860: 6d67 290a 2020 2020 2020 2020 2020 2020  mg).            
-00001870: 2020 2020 7772 6974 6572 2e77 7269 7465      writer.write
-00001880: 2863 6c61 6865 5f66 726d 290a 2020 2020  (clahe_frm).    
-00001890: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-000018a0: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
-000018b0: 2020 2020 2020 2066 2243 4c41 4845 2063         f"CLAHE c
-000018c0: 6f6e 7665 7274 6564 2066 7261 6d65 207b  onverted frame {
-000018d0: 6672 6d5f 636e 747d 2f7b 7669 6465 6f5f  frm_cnt}/{video_
-000018e0: 6d65 7461 5f64 6174 615b 2766 7261 6d65  meta_data['frame
-000018f0: 5f63 6f75 6e74 275d 7d22 0a20 2020 2020  _count']}".     
-00001900: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00001910: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00001920: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-00001930: 7265 616b 0a20 2020 2020 2020 2063 6170  reak.        cap
-00001940: 2e72 656c 6561 7365 2829 0a20 2020 2020  .release().     
-00001950: 2020 2077 7269 7465 722e 7265 6c65 6173     writer.releas
-00001960: 6528 290a 2020 2020 2020 2020 7072 696e  e().        prin
-00001970: 7428 6622 434c 4148 4520 7669 6465 6f20  t(f"CLAHE video 
-00001980: 6372 6561 7465 643a 207b 7361 7665 5f70  created: {save_p
-00001990: 6174 687d 2e22 290a 2020 2020 6578 6365  ath}.").    exce
-000019a0: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-000019b0: 7365 3a0a 2020 2020 2020 2020 7072 696e  se:.        prin
-000019c0: 7428 7365 2e61 7267 7329 0a20 2020 2020  t(se.args).     
-000019d0: 2020 2070 7269 6e74 2866 2243 4c41 4845     print(f"CLAHE
-000019e0: 2063 6f6e 7665 7273 696f 6e20 6661 696c   conversion fail
-000019f0: 6564 2066 6f72 2076 6964 656f 207b 6669  ed for video {fi
-00001a00: 6c65 5f6e 616d 657d 2e22 290a 2020 2020  le_name}.").    
-00001a10: 2020 2020 6361 702e 7265 6c65 6173 6528      cap.release(
-00001a20: 290a 2020 2020 2020 2020 7772 6974 6572  ).        writer
-00001a30: 2e72 656c 6561 7365 2829 0a20 2020 2020  .release().     
-00001a40: 2020 2072 6169 7365 2049 6e76 616c 6964     raise Invalid
-00001a50: 5669 6465 6f46 696c 6545 7272 6f72 280a  VideoFileError(.
-00001a60: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
-00001a70: 6622 436f 756c 6420 6e6f 7420 636f 6e76  f"Could not conv
-00001a80: 6572 7420 6669 6c65 207b 6669 6c65 5f70  ert file {file_p
-00001a90: 6174 687d 2074 6f20 434c 4148 4520 656e  ath} to CLAHE en
-00001aa0: 6861 6e63 6564 2076 6964 656f 222c 0a20  hanced video",. 
-00001ab0: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-00001ac0: 653d 636c 6168 655f 656e 6861 6e63 655f  e=clahe_enhance_
-00001ad0: 7669 6465 6f2e 5f5f 6e61 6d65 5f5f 2c0a  video.__name__,.
-00001ae0: 2020 2020 2020 2020 290a 0a0a 6465 6620          )...def 
-00001af0: 6578 7472 6163 745f 6672 616d 655f 7261  extract_frame_ra
-00001b00: 6e67 6528 0a20 2020 2066 696c 655f 7061  nge(.    file_pa
-00001b10: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
-00001b20: 732e 5061 7468 4c69 6b65 5d2c 2073 7461  s.PathLike], sta
-00001b30: 7274 5f66 7261 6d65 3a20 696e 742c 2065  rt_frame: int, e
-00001b40: 6e64 5f66 7261 6d65 3a20 696e 740a 2920  nd_frame: int.) 
-00001b50: 2d3e 204e 6f6e 653a 0a20 2020 2022 2222  -> None:.    """
-00001b60: 0a20 2020 2045 7874 7261 6374 2061 2075  .    Extract a u
-00001b70: 7365 722d 6465 6669 6e65 6420 7261 6e67  ser-defined rang
-00001b80: 6520 6f66 2066 7261 6d65 7320 6672 6f6d  e of frames from
-00001b90: 2061 2076 6964 656f 2066 696c 6520 746f   a video file to
-00001ba0: 2060 706e 6760 2066 6f72 6d61 742e 2049   `png` format. I
-00001bb0: 6d61 6765 730a 2020 2020 6172 6520 7361  mages.    are sa
-00001bc0: 7665 6420 696e 2061 2066 6f6c 6465 7220  ved in a folder 
-00001bd0: 7769 7468 2074 6865 2073 7566 6669 7820  with the suffix 
-00001be0: 605f 6672 616d 6573 6020 7769 7468 696e  `_frames` within
-00001bf0: 2074 6865 2073 616d 6520 6469 7265 6374   the same direct
-00001c00: 6f72 7920 6173 2074 6865 2076 6964 656f  ory as the video
-00001c10: 2066 696c 652e 0a0a 2020 2020 3a70 6172   file...    :par
-00001c20: 616d 6574 6572 2055 6e69 6f6e 5b73 7472  ameter Union[str
-00001c30: 2c20 6f73 2e50 6174 684c 696b 655d 2066  , os.PathLike] f
-00001c40: 696c 655f 7061 7468 3a20 5061 7468 2074  ile_path: Path t
-00001c50: 6f20 7669 6465 6f20 6669 6c65 0a20 2020  o video file.   
-00001c60: 203a 7061 7261 6d65 7465 7220 696e 7420   :parameter int 
-00001c70: 7374 6172 745f 6672 616d 653a 2046 6972  start_frame: Fir
-00001c80: 7374 2066 7261 6d65 2069 6e20 7261 6e67  st frame in rang
-00001c90: 6520 746f 2065 7874 7261 6374 0a20 2020  e to extract.   
-00001ca0: 203a 7061 7261 6d65 7465 7220 696e 7420   :parameter int 
-00001cb0: 656e 645f 6672 616d 653a 204c 6173 7420  end_frame: Last 
-00001cc0: 6672 616d 6520 696e 2072 616e 6765 2074  frame in range t
-00001cd0: 6f20 6578 7472 6163 742e 0a0a 2020 2020  o extract...    
-00001ce0: 3a65 7861 6d70 6c65 3a0a 2020 2020 3e3e  :example:.    >>
-00001cf0: 3e20 5f20 3d20 6578 7472 6163 745f 6672  > _ = extract_fr
-00001d00: 616d 655f 7261 6e67 6528 6669 6c65 5f70  ame_range(file_p
-00001d10: 6174 683d 2770 726f 6a65 6374 5f66 6f6c  ath='project_fol
-00001d20: 6465 722f 7669 6465 6f73 2f56 6964 656f  der/videos/Video
-00001d30: 5f31 2e6d 7034 272c 2073 7461 7274 5f66  _1.mp4', start_f
-00001d40: 7261 6d65 3d31 3030 2c20 656e 645f 6672  rame=100, end_fr
-00001d50: 616d 653d 3530 3029 0a20 2020 2022 2222  ame=500).    """
-00001d60: 0a0a 2020 2020 6368 6563 6b5f 6669 6c65  ..    check_file
-00001d70: 5f65 7869 7374 5f61 6e64 5f72 6561 6461  _exist_and_reada
-00001d80: 626c 6528 6669 6c65 5f70 6174 683d 6669  ble(file_path=fi
-00001d90: 6c65 5f70 6174 6829 0a20 2020 2076 6964  le_path).    vid
-00001da0: 656f 5f6d 6574 615f 6461 7461 203d 2067  eo_meta_data = g
-00001db0: 6574 5f76 6964 656f 5f6d 6574 615f 6461  et_video_meta_da
-00001dc0: 7461 2866 696c 655f 7061 7468 290a 2020  ta(file_path).  
-00001dd0: 2020 6368 6563 6b5f 696e 7428 6e61 6d65    check_int(name
-00001de0: 3d22 7374 6172 7420 6672 616d 6522 2c20  ="start frame", 
-00001df0: 7661 6c75 653d 7374 6172 745f 6672 616d  value=start_fram
-00001e00: 652c 206d 696e 5f76 616c 7565 3d30 290a  e, min_value=0).
-00001e10: 2020 2020 6669 6c65 5f64 6972 2c20 6669      file_dir, fi
-00001e20: 6c65 5f6e 616d 652c 2066 696c 655f 6578  le_name, file_ex
-00001e30: 7420 3d20 6765 745f 666e 5f65 7874 2866  t = get_fn_ext(f
-00001e40: 696c 6570 6174 683d 6669 6c65 5f70 6174  ilepath=file_pat
-00001e50: 6829 0a20 2020 2063 6865 636b 5f69 6e74  h).    check_int
-00001e60: 280a 2020 2020 2020 2020 6e61 6d65 3d22  (.        name="
-00001e70: 656e 6420 6672 616d 6522 2c20 7661 6c75  end frame", valu
-00001e80: 653d 656e 645f 6672 616d 652c 206d 6178  e=end_frame, max
-00001e90: 5f76 616c 7565 3d76 6964 656f 5f6d 6574  _value=video_met
-00001ea0: 615f 6461 7461 5b22 6672 616d 655f 636f  a_data["frame_co
-00001eb0: 756e 7422 5d0a 2020 2020 290a 2020 2020  unt"].    ).    
-00001ec0: 6672 616d 655f 7261 6e67 6520 3d20 6c69  frame_range = li
-00001ed0: 7374 2872 616e 6765 2869 6e74 2873 7461  st(range(int(sta
-00001ee0: 7274 5f66 7261 6d65 292c 2069 6e74 2865  rt_frame), int(e
-00001ef0: 6e64 5f66 7261 6d65 2920 2b20 3129 290a  nd_frame) + 1)).
-00001f00: 2020 2020 7361 7665 5f64 6972 203d 206f      save_dir = o
-00001f10: 732e 7061 7468 2e6a 6f69 6e28 6669 6c65  s.path.join(file
-00001f20: 5f64 6972 2c20 6669 6c65 5f6e 616d 6520  _dir, file_name 
-00001f30: 2b20 225f 6672 616d 6573 2229 0a20 2020  + "_frames").   
-00001f40: 2063 6170 203d 2063 7632 2e56 6964 656f   cap = cv2.Video
-00001f50: 4361 7074 7572 6528 6669 6c65 5f70 6174  Capture(file_pat
-00001f60: 6829 0a20 2020 2069 6620 6e6f 7420 6f73  h).    if not os
-00001f70: 2e70 6174 682e 6578 6973 7473 2873 6176  .path.exists(sav
-00001f80: 655f 6469 7229 3a0a 2020 2020 2020 2020  e_dir):.        
-00001f90: 6f73 2e6d 616b 6564 6972 7328 7361 7665  os.makedirs(save
-00001fa0: 5f64 6972 290a 2020 2020 666f 7220 6672  _dir).    for fr
-00001fb0: 6d5f 636e 742c 2066 726d 5f6e 756d 6265  m_cnt, frm_numbe
-00001fc0: 7220 696e 2065 6e75 6d65 7261 7465 2866  r in enumerate(f
-00001fd0: 7261 6d65 5f72 616e 6765 293a 0a20 2020  rame_range):.   
-00001fe0: 2020 2020 2063 6170 2e73 6574 2831 2c20       cap.set(1, 
-00001ff0: 6672 6d5f 6e75 6d62 6572 290a 2020 2020  frm_number).    
-00002000: 2020 2020 7265 742c 2066 7261 6d65 203d      ret, frame =
-00002010: 2063 6170 2e72 6561 6428 290a 2020 2020   cap.read().    
-00002020: 2020 2020 6672 6d5f 7361 7665 5f70 6174      frm_save_pat
-00002030: 6820 3d20 6f73 2e70 6174 682e 6a6f 696e  h = os.path.join
-00002040: 2873 6176 655f 6469 722c 2066 227b 6672  (save_dir, f"{fr
-00002050: 6d5f 6e75 6d62 6572 7d2e 706e 6722 290a  m_number}.png").
-00002060: 2020 2020 2020 2020 6376 322e 696d 7772          cv2.imwr
-00002070: 6974 6528 6672 6d5f 7361 7665 5f70 6174  ite(frm_save_pat
-00002080: 682c 2066 7261 6d65 290a 2020 2020 2020  h, frame).      
-00002090: 2020 7072 696e 7428 6622 4672 616d 6520    print(f"Frame 
-000020a0: 7b66 726d 5f6e 756d 6265 727d 2073 6176  {frm_number} sav
-000020b0: 6564 2028 4672 616d 6520 7b66 726d 5f63  ed (Frame {frm_c
-000020c0: 6e74 7d2f 7b6c 656e 2866 7261 6d65 5f72  nt}/{len(frame_r
-000020d0: 616e 6765 292d 317d 2922 290a 2020 2020  ange)-1})").    
-000020e0: 7374 646f 7574 5f73 7563 6365 7373 280a  stdout_success(.
-000020f0: 2020 2020 2020 2020 6d73 673d 6622 7b6c          msg=f"{l
-00002100: 656e 2866 7261 6d65 5f72 616e 6765 292d  en(frame_range)-
-00002110: 317d 2066 7261 6d65 7320 6578 7472 6163  1} frames extrac
-00002120: 7465 6420 666f 7220 7669 6465 6f20 7b66  ted for video {f
-00002130: 696c 655f 6e61 6d65 7d20 7361 7665 6420  ile_name} saved 
-00002140: 696e 207b 7361 7665 5f64 6972 7d22 2c0a  in {save_dir}",.
-00002150: 2020 2020 2020 2020 736f 7572 6365 3d65          source=e
-00002160: 7874 7261 6374 5f66 7261 6d65 5f72 616e  xtract_frame_ran
-00002170: 6765 2e5f 5f6e 616d 655f 5f2c 0a20 2020  ge.__name__,.   
-00002180: 2029 0a0a 0a64 6566 2063 6861 6e67 655f   )...def change_
-00002190: 7369 6e67 6c65 5f76 6964 656f 5f66 7073  single_video_fps
-000021a0: 280a 2020 2020 6669 6c65 5f70 6174 683a  (.    file_path:
-000021b0: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
-000021c0: 6174 684c 696b 655d 2c20 6670 733a 2069  athLike], fps: i
-000021d0: 6e74 2c20 6770 753a 204f 7074 696f 6e61  nt, gpu: Optiona
-000021e0: 6c5b 626f 6f6c 5d20 3d20 4661 6c73 650a  l[bool] = False.
-000021f0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2022  ) -> None:.    "
-00002200: 2222 0a20 2020 2043 6861 6e67 6520 7468  "".    Change th
-00002210: 6520 6670 7320 6f66 2061 2073 696e 676c  e fps of a singl
-00002220: 6520 7669 6465 6f20 6669 6c65 2e20 5265  e video file. Re
-00002230: 7375 6c74 7320 6172 6520 7374 6f72 6564  sults are stored
-00002240: 2069 6e20 7468 6520 7361 6d65 2064 6972   in the same dir
-00002250: 6563 746f 7279 2061 7320 696e 2074 6865  ectory as in the
-00002260: 2069 6e70 7574 2066 696c 6520 7769 7468   input file with
-00002270: 0a20 2020 2074 6865 2073 7566 6669 7820  .    the suffix 
-00002280: 6060 5f66 7073 5f6e 6577 5f66 7073 6060  ``_fps_new_fps``
-00002290: 2e0a 0a20 2020 202e 2e20 6e6f 7465 3a3a  ...    .. note::
-000022a0: 0a20 2020 2020 2020 546f 2063 6861 6e67  .       To chang
-000022b0: 6520 7468 6520 4650 5320 6f66 2061 6c6c  e the FPS of all
-000022c0: 2076 6964 656f 7320 696e 2061 2064 6972   videos in a dir
-000022d0: 6563 746f 7279 2c20 7573 6520 6060 7369  ectory, use ``si
-000022e0: 6d62 612e 7669 6465 6f5f 7072 6f63 6573  mba.video_proces
-000022f0: 736f 7273 2e76 6964 656f 5f70 726f 6365  sors.video_proce
-00002300: 7373 696e 672e 6368 616e 6765 5f66 7073  ssing.change_fps
-00002310: 5f6f 665f 6d75 6c74 6970 6c65 5f76 6964  _of_multiple_vid
-00002320: 656f 7360 602e 0a0a 2020 2020 3a70 6172  eos``...    :par
-00002330: 616d 6574 6572 2055 6e69 6f6e 5b73 7472  ameter Union[str
-00002340: 2c20 6f73 2e50 6174 684c 696b 655d 2066  , os.PathLike] f
-00002350: 696c 655f 7061 7468 3a20 5061 7468 2074  ile_path: Path t
-00002360: 6f20 7669 6465 6f20 6669 6c65 0a20 2020  o video file.   
-00002370: 203a 7061 7261 6d65 7465 7220 696e 7420   :parameter int 
-00002380: 6670 733a 2046 7073 206f 6620 7468 6520  fps: Fps of the 
-00002390: 6e65 7720 7669 6465 6f20 6669 6c65 2e0a  new video file..
-000023a0: 2020 2020 3a70 6172 616d 6574 6572 204f      :parameter O
-000023b0: 7074 696f 6e61 6c5b 626f 6f6c 5d20 6770  ptional[bool] gp
-000023c0: 753a 2049 6620 5472 7565 2c20 7573 6520  u: If True, use 
-000023d0: 4e56 4944 4541 2047 5055 2063 6f64 6563  NVIDEA GPU codec
-000023e0: 732e 2044 6566 6175 6c74 2046 616c 7365  s. Default False
-000023f0: 2e0a 0a20 2020 203a 6578 616d 706c 653a  ...    :example:
-00002400: 0a20 2020 203e 3e3e 205f 203d 2063 6861  .    >>> _ = cha
-00002410: 6e67 655f 7369 6e67 6c65 5f76 6964 656f  nge_single_video
-00002420: 5f66 7073 2866 696c 655f 7061 7468 3d27  _fps(file_path='
-00002430: 7072 6f6a 6563 745f 666f 6c64 6572 2f76  project_folder/v
-00002440: 6964 656f 732f 5669 6465 6f5f 312e 6d70  ideos/Video_1.mp
-00002450: 3427 2c20 6670 733d 3135 290a 2020 2020  4', fps=15).    
-00002460: 2222 220a 0a20 2020 2074 696d 6572 203d  """..    timer =
-00002470: 2053 696d 6261 5469 6d65 7228 7374 6172   SimbaTimer(star
-00002480: 743d 5472 7565 290a 2020 2020 6368 6563  t=True).    chec
-00002490: 6b5f 6666 6d70 6567 5f61 7661 696c 6162  k_ffmpeg_availab
-000024a0: 6c65 2872 6169 7365 5f65 7272 6f72 3d54  le(raise_error=T
-000024b0: 7275 6529 0a20 2020 2069 6620 6770 7520  rue).    if gpu 
-000024c0: 616e 6420 6e6f 7420 6368 6563 6b5f 6e76  and not check_nv
-000024d0: 6964 6561 5f67 7075 5f61 7661 696c 6162  idea_gpu_availab
-000024e0: 6c65 2829 3a0a 2020 2020 2020 2020 7261  le():.        ra
-000024f0: 6973 6520 4646 4d50 4547 436f 6465 6347  ise FFMPEGCodecG
-00002500: 5055 4572 726f 7228 0a20 2020 2020 2020  PUError(.       
-00002510: 2020 2020 206d 7367 3d22 4e6f 2047 5055       msg="No GPU
-00002520: 2066 6f75 6e64 2028 6173 2065 7661 6c75   found (as evalu
-00002530: 6174 6564 2062 7920 6e76 6964 6561 2d73  ated by nvidea-s
-00002540: 6d69 2072 6574 7572 6e69 6e67 204e 6f6e  mi returning Non
-00002550: 6529 222c 0a20 2020 2020 2020 2020 2020  e)",.           
-00002560: 2073 6f75 7263 653d 6368 616e 6765 5f73   source=change_s
-00002570: 696e 676c 655f 7669 6465 6f5f 6670 732e  ingle_video_fps.
-00002580: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
-00002590: 2020 290a 2020 2020 6368 6563 6b5f 6669    ).    check_fi
-000025a0: 6c65 5f65 7869 7374 5f61 6e64 5f72 6561  le_exist_and_rea
-000025b0: 6461 626c 6528 6669 6c65 5f70 6174 683d  dable(file_path=
-000025c0: 6669 6c65 5f70 6174 6829 0a20 2020 2063  file_path).    c
-000025d0: 6865 636b 5f69 6e74 286e 616d 653d 224e  heck_int(name="N
-000025e0: 6577 2066 7073 222c 2076 616c 7565 3d66  ew fps", value=f
-000025f0: 7073 290a 2020 2020 7669 6465 6f5f 6d65  ps).    video_me
-00002600: 7461 5f64 6174 6120 3d20 6765 745f 7669  ta_data = get_vi
-00002610: 6465 6f5f 6d65 7461 5f64 6174 6128 7669  deo_meta_data(vi
-00002620: 6465 6f5f 7061 7468 3d66 696c 655f 7061  deo_path=file_pa
-00002630: 7468 290a 2020 2020 6469 725f 6e61 6d65  th).    dir_name
-00002640: 2c20 6669 6c65 5f6e 616d 652c 2065 7874  , file_name, ext
-00002650: 203d 2067 6574 5f66 6e5f 6578 7428 6669   = get_fn_ext(fi
-00002660: 6c65 7061 7468 3d66 696c 655f 7061 7468  lepath=file_path
-00002670: 290a 2020 2020 6966 2069 6e74 2866 7073  ).    if int(fps
-00002680: 2920 3d3d 2069 6e74 2876 6964 656f 5f6d  ) == int(video_m
-00002690: 6574 615f 6461 7461 5b22 6670 7322 5d29  eta_data["fps"])
-000026a0: 3a0a 2020 2020 2020 2020 5361 6d65 496e  :.        SameIn
-000026b0: 7075 7441 6e64 4f75 7470 7574 5761 726e  putAndOutputWarn
-000026c0: 696e 6728 0a20 2020 2020 2020 2020 2020  ing(.           
-000026d0: 206d 7367 3d66 2254 6865 206e 6577 2066   msg=f"The new f
-000026e0: 7073 2069 7320 7468 6520 7361 6d65 2061  ps is the same a
-000026f0: 7320 7468 6520 696e 7075 7420 6670 7320  s the input fps 
-00002700: 666f 7220 7669 6465 6f20 7b66 696c 655f  for video {file_
-00002710: 6e61 6d65 7d20 287b 7374 7228 6670 7329  name} ({str(fps)
-00002720: 7d29 222c 0a20 2020 2020 2020 2020 2020  })",.           
-00002730: 2073 6f75 7263 653d 6368 616e 6765 5f73   source=change_s
-00002740: 696e 676c 655f 7669 6465 6f5f 6670 732e  ingle_video_fps.
-00002750: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
-00002760: 2020 290a 2020 2020 7361 7665 5f70 6174    ).    save_pat
-00002770: 6820 3d20 6f73 2e70 6174 682e 6a6f 696e  h = os.path.join
-00002780: 280a 2020 2020 2020 2020 6469 725f 6e61  (.        dir_na
-00002790: 6d65 2c20 6669 6c65 5f6e 616d 6520 2b20  me, file_name + 
-000027a0: 225f 6670 735f 7b7d 7b7d 222e 666f 726d  "_fps_{}{}".form
-000027b0: 6174 2873 7472 2866 7073 292c 2073 7472  at(str(fps), str
-000027c0: 2865 7874 2929 0a20 2020 2029 0a20 2020  (ext)).    ).   
-000027d0: 2070 7269 6e74 2866 2243 6f6e 7665 7274   print(f"Convert
-000027e0: 696e 6720 7468 6520 4650 5320 746f 207b  ing the FPS to {
-000027f0: 6670 737d 2066 6f72 2076 6964 656f 207b  fps} for video {
-00002800: 6669 6c65 5f6e 616d 657d 202e 2e2e 2229  file_name} ...")
-00002810: 0a20 2020 2069 6620 6f73 2e70 6174 682e  .    if os.path.
-00002820: 6973 6669 6c65 2873 6176 655f 7061 7468  isfile(save_path
-00002830: 293a 0a20 2020 2020 2020 2046 696c 6545  ):.        FileE
-00002840: 7869 7374 5761 726e 696e 6728 0a20 2020  xistWarning(.   
-00002850: 2020 2020 2020 2020 206d 7367 3d66 224f           msg=f"O
-00002860: 7665 7277 7269 7469 6e67 2065 7869 7374  verwriting exist
-00002870: 696e 6720 6669 6c65 2061 7420 7b73 6176  ing file at {sav
-00002880: 655f 7061 7468 7d2e 2e2e 222c 0a20 2020  e_path}...",.   
-00002890: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
-000028a0: 6368 616e 6765 5f73 696e 676c 655f 7669  change_single_vi
-000028b0: 6465 6f5f 6670 732e 5f5f 6e61 6d65 5f5f  deo_fps.__name__
-000028c0: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-000028d0: 6966 2067 7075 3a0a 2020 2020 2020 2020  if gpu:.        
-000028e0: 636f 6d6d 616e 6420 3d20 6627 6666 6d70  command = f'ffmp
-000028f0: 6567 202d 6877 6163 6365 6c20 6175 746f  eg -hwaccel auto
-00002900: 202d 633a 7620 6832 3634 5f63 7576 6964   -c:v h264_cuvid
-00002910: 202d 6920 227b 6669 6c65 5f70 6174 687d   -i "{file_path}
-00002920: 2220 2d76 6620 2266 7073 3d7b 6670 737d  " -vf "fps={fps}
-00002930: 2220 2d63 3a76 2068 3236 345f 6e76 656e  " -c:v h264_nven
-00002940: 6320 2d63 3a61 2063 6f70 7920 227b 7361  c -c:a copy "{sa
-00002950: 7665 5f70 6174 687d 2220 2d79 270a 2020  ve_path}" -y'.  
-00002960: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00002970: 636f 6d6d 616e 6420 3d20 6627 6666 6d70  command = f'ffmp
-00002980: 6567 202d 6920 227b 6669 6c65 5f70 6174  eg -i "{file_pat
-00002990: 687d 2220 2d66 696c 7465 723a 7620 6670  h}" -filter:v fp
-000029a0: 733d 6670 733d 7b66 7073 7d20 2d63 3a76  s=fps={fps} -c:v
-000029b0: 206c 6962 7832 3634 202d 633a 6120 6161   libx264 -c:a aa
-000029c0: 6320 227b 7361 7665 5f70 6174 687d 2220  c "{save_path}" 
-000029d0: 2d79 270a 2020 2020 7375 6270 726f 6365  -y'.    subproce
-000029e0: 7373 2e63 616c 6c28 636f 6d6d 616e 642c  ss.call(command,
-000029f0: 2073 6865 6c6c 3d54 7275 6529 0a20 2020   shell=True).   
-00002a00: 2074 696d 6572 2e73 746f 705f 7469 6d65   timer.stop_time
-00002a10: 7228 290a 2020 2020 7374 646f 7574 5f73  r().    stdout_s
-00002a20: 7563 6365 7373 280a 2020 2020 2020 2020  uccess(.        
-00002a30: 6d73 673d 6627 5349 4d42 4120 434f 4d50  msg=f'SIMBA COMP
-00002a40: 4c45 5445 3a20 4650 5320 6f66 2076 6964  LETE: FPS of vid
-00002a50: 656f 207b 6669 6c65 5f6e 616d 657d 2063  eo {file_name} c
-00002a60: 6861 6e67 6564 2066 726f 6d20 7b73 7472  hanged from {str
-00002a70: 2876 6964 656f 5f6d 6574 615f 6461 7461  (video_meta_data
-00002a80: 5b22 6670 7322 5d29 7d20 746f 207b 7374  ["fps"])} to {st
-00002a90: 7228 6670 7329 7d20 616e 6420 7361 7665  r(fps)} and save
-00002aa0: 6420 696e 2064 6972 6563 746f 7279 207b  d in directory {
-00002ab0: 7361 7665 5f70 6174 687d 272c 0a20 2020  save_path}',.   
-00002ac0: 2020 2020 2065 6c61 7073 6564 5f74 696d       elapsed_tim
-00002ad0: 653d 7469 6d65 722e 656c 6170 7365 645f  e=timer.elapsed_
-00002ae0: 7469 6d65 5f73 7472 2c0a 2020 2020 2020  time_str,.      
-00002af0: 2020 736f 7572 6365 3d63 6861 6e67 655f    source=change_
-00002b00: 7369 6e67 6c65 5f76 6964 656f 5f66 7073  single_video_fps
-00002b10: 2e5f 5f6e 616d 655f 5f2c 0a20 2020 2029  .__name__,.    )
-00002b20: 0a0a 0a64 6566 2063 6861 6e67 655f 6670  ...def change_fp
-00002b30: 735f 6f66 5f6d 756c 7469 706c 655f 7669  s_of_multiple_vi
-00002b40: 6465 6f73 280a 2020 2020 6469 7265 6374  deos(.    direct
-00002b50: 6f72 793a 2055 6e69 6f6e 5b73 7472 2c20  ory: Union[str, 
-00002b60: 6f73 2e50 6174 684c 696b 655d 2c20 6670  os.PathLike], fp
-00002b70: 733a 2069 6e74 2c20 6770 753a 204f 7074  s: int, gpu: Opt
-00002b80: 696f 6e61 6c5b 626f 6f6c 5d20 3d20 4661  ional[bool] = Fa
-00002b90: 6c73 650a 2920 2d3e 204e 6f6e 653a 0a20  lse.) -> None:. 
-00002ba0: 2020 2022 2222 0a20 2020 2043 6861 6e67     """.    Chang
-00002bb0: 6520 7468 6520 6670 7320 6f66 2061 6c6c  e the fps of all
-00002bc0: 2076 6964 656f 2066 696c 6573 2069 6e20   video files in 
-00002bd0: 6120 666f 6c64 6572 2e20 5265 7375 6c74  a folder. Result
-00002be0: 7320 6172 6520 7374 6f72 6564 2069 6e20  s are stored in 
-00002bf0: 7468 6520 7361 6d65 2064 6972 6563 746f  the same directo
-00002c00: 7279 2061 7320 696e 2074 6865 2069 6e70  ry as in the inp
-00002c10: 7574 2066 696c 6573 2077 6974 680a 2020  ut files with.  
-00002c20: 2020 7468 6520 7375 6666 6978 2060 605f    the suffix ``_
-00002c30: 6670 735f 6e65 775f 6670 7360 602e 0a0a  fps_new_fps``...
-00002c40: 2020 2020 3a70 6172 616d 6574 6572 2055      :parameter U
-00002c50: 6e69 6f6e 5b73 7472 2c20 6f73 2e50 6174  nion[str, os.Pat
-00002c60: 684c 696b 655d 2064 6972 6563 746f 7279  hLike] directory
-00002c70: 3a20 5061 7468 2074 6f20 7669 6465 6f20  : Path to video 
-00002c80: 6669 6c65 2064 6972 6563 746f 7279 0a20  file directory. 
-00002c90: 2020 203a 7061 7261 6d65 7465 7220 696e     :parameter in
-00002ca0: 7420 6670 733a 2046 7073 206f 6620 7468  t fps: Fps of th
-00002cb0: 6520 6e65 7720 7669 6465 6f20 6669 6c65  e new video file
-00002cc0: 732e 0a20 2020 203a 7061 7261 6d65 7465  s..    :paramete
-00002cd0: 7220 4f70 7469 6f6e 616c 5b62 6f6f 6c5d  r Optional[bool]
-00002ce0: 2067 7075 3a20 4966 2054 7275 652c 2075   gpu: If True, u
-00002cf0: 7365 204e 5649 4445 4120 4750 5520 636f  se NVIDEA GPU co
-00002d00: 6465 6373 2e20 4465 6661 756c 7420 4661  decs. Default Fa
-00002d10: 6c73 652e 0a0a 2020 2020 3a65 7861 6d70  lse...    :examp
-00002d20: 6c65 3a0a 2020 2020 3e3e 3e20 5f20 3d20  le:.    >>> _ = 
-00002d30: 6368 616e 6765 5f66 7073 5f6f 665f 6d75  change_fps_of_mu
-00002d40: 6c74 6970 6c65 5f76 6964 656f 7328 6469  ltiple_videos(di
-00002d50: 7265 6374 6f72 793d 2770 726f 6a65 6374  rectory='project
-00002d60: 5f66 6f6c 6465 722f 7669 6465 6f73 2f56  _folder/videos/V
-00002d70: 6964 656f 5f31 2e6d 7034 272c 2066 7073  ideo_1.mp4', fps
-00002d80: 3d31 3529 0a20 2020 2022 2222 0a0a 2020  =15).    """..  
-00002d90: 2020 7469 6d65 7220 3d20 5369 6d62 6154    timer = SimbaT
-00002da0: 696d 6572 2873 7461 7274 3d54 7275 6529  imer(start=True)
-00002db0: 0a20 2020 2063 6865 636b 5f66 666d 7065  .    check_ffmpe
-00002dc0: 675f 6176 6169 6c61 626c 6528 7261 6973  g_available(rais
-00002dd0: 655f 6572 726f 723d 5472 7565 290a 2020  e_error=True).  
-00002de0: 2020 6966 2067 7075 2061 6e64 206e 6f74    if gpu and not
-00002df0: 2063 6865 636b 5f6e 7669 6465 615f 6770   check_nvidea_gp
-00002e00: 755f 6176 6169 6c61 626c 6528 293a 0a20  u_available():. 
-00002e10: 2020 2020 2020 2072 6169 7365 2046 464d         raise FFM
-00002e20: 5045 4743 6f64 6563 4750 5545 7272 6f72  PEGCodecGPUError
-00002e30: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
-00002e40: 673d 224e 6f20 4750 5520 666f 756e 6420  g="No GPU found 
-00002e50: 2861 7320 6576 616c 7561 7465 6420 6279  (as evaluated by
-00002e60: 206e 7669 6465 612d 736d 6920 7265 7475   nvidea-smi retu
-00002e70: 726e 696e 6720 4e6f 6e65 2922 2c0a 2020  rning None)",.  
-00002e80: 2020 2020 2020 2020 2020 736f 7572 6365            source
-00002e90: 3d63 6861 6e67 655f 6670 735f 6f66 5f6d  =change_fps_of_m
-00002ea0: 756c 7469 706c 655f 7669 6465 6f73 2e5f  ultiple_videos._
-00002eb0: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
-00002ec0: 2029 0a20 2020 2069 6620 6e6f 7420 6f73   ).    if not os
-00002ed0: 2e70 6174 682e 6973 6469 7228 6469 7265  .path.isdir(dire
-00002ee0: 6374 6f72 7929 3a0a 2020 2020 2020 2020  ctory):.        
-00002ef0: 7261 6973 6520 4e6f 7444 6972 6563 746f  raise NotDirecto
-00002f00: 7279 4572 726f 7228 0a20 2020 2020 2020  ryError(.       
-00002f10: 2020 2020 206d 7367 3d66 2253 494d 4241       msg=f"SIMBA
-00002f20: 2045 5252 4f52 3a20 7b64 6972 6563 746f   ERROR: {directo
-00002f30: 7279 7d20 6973 206e 6f74 2061 2076 616c  ry} is not a val
-00002f40: 6964 2064 6972 6563 746f 7279 222c 0a20  id directory",. 
-00002f50: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-00002f60: 653d 6368 616e 6765 5f66 7073 5f6f 665f  e=change_fps_of_
-00002f70: 6d75 6c74 6970 6c65 5f76 6964 656f 732e  multiple_videos.
-00002f80: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
-00002f90: 2020 290a 2020 2020 6368 6563 6b5f 696e    ).    check_in
-00002fa0: 7428 6e61 6d65 3d22 4e65 7720 6670 7322  t(name="New fps"
-00002fb0: 2c20 7661 6c75 653d 6670 7329 0a20 2020  , value=fps).   
-00002fc0: 2076 6964 656f 5f70 6174 6873 203d 205b   video_paths = [
-00002fd0: 5d0a 2020 2020 6669 6c65 5f70 6174 6873  ].    file_paths
-00002fe0: 5f69 6e5f 666f 6c64 6572 203d 205b 6620  _in_folder = [f 
-00002ff0: 666f 7220 6620 696e 2067 6c6f 622e 676c  for f in glob.gl
-00003000: 6f62 2864 6972 6563 746f 7279 202b 2022  ob(directory + "
-00003010: 2f2a 2229 2069 6620 6f73 2e70 6174 682e  /*") if os.path.
-00003020: 6973 6669 6c65 2866 295d 0a20 2020 2066  isfile(f)].    f
-00003030: 6f72 2066 696c 655f 7061 7468 2069 6e20  or file_path in 
-00003040: 6669 6c65 5f70 6174 6873 5f69 6e5f 666f  file_paths_in_fo
-00003050: 6c64 6572 3a0a 2020 2020 2020 2020 5f2c  lder:.        _,
-00003060: 205f 2c20 6578 7420 3d20 6765 745f 666e   _, ext = get_fn
-00003070: 5f65 7874 2866 696c 6570 6174 683d 6669  _ext(filepath=fi
-00003080: 6c65 5f70 6174 6829 0a20 2020 2020 2020  le_path).       
-00003090: 2069 6620 6578 742e 6c6f 7765 7228 2920   if ext.lower() 
-000030a0: 696e 205b 222e 6176 6922 2c20 222e 6d70  in [".avi", ".mp
-000030b0: 3422 2c20 222e 6d6f 7622 2c20 222e 666c  4", ".mov", ".fl
-000030c0: 7622 5d3a 0a20 2020 2020 2020 2020 2020  v"]:.           
-000030d0: 2076 6964 656f 5f70 6174 6873 2e61 7070   video_paths.app
-000030e0: 656e 6428 6669 6c65 5f70 6174 6829 0a20  end(file_path). 
-000030f0: 2020 2069 6620 6c65 6e28 7669 6465 6f5f     if len(video_
-00003100: 7061 7468 7329 203c 2031 3a0a 2020 2020  paths) < 1:.    
-00003110: 2020 2020 7261 6973 6520 4e6f 4669 6c65      raise NoFile
-00003120: 7346 6f75 6e64 4572 726f 7228 0a20 2020  sFoundError(.   
-00003130: 2020 2020 2020 2020 206d 7367 3d22 5349           msg="SI
-00003140: 4d42 4120 4552 524f 523a 204e 6f20 6669  MBA ERROR: No fi
-00003150: 6c65 7320 7769 7468 202e 6d70 342c 202e  les with .mp4, .
-00003160: 6176 692c 202e 6d6f 762c 202e 666c 7620  avi, .mov, .flv 
-00003170: 6669 6c65 2065 6e64 696e 6720 666f 756e  file ending foun
-00003180: 6420 696e 2074 6865 207b 7d20 6469 7265  d in the {} dire
-00003190: 6374 6f72 7922 2e66 6f72 6d61 7428 0a20  ctory".format(. 
-000031a0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-000031b0: 6972 6563 746f 7279 0a20 2020 2020 2020  irectory.       
-000031c0: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
-000031d0: 2020 2020 736f 7572 6365 3d63 6861 6e67      source=chang
-000031e0: 655f 6670 735f 6f66 5f6d 756c 7469 706c  e_fps_of_multipl
-000031f0: 655f 7669 6465 6f73 2e5f 5f6e 616d 655f  e_videos.__name_
-00003200: 5f2c 0a20 2020 2020 2020 2029 0a20 2020  _,.        ).   
-00003210: 2066 6f72 2066 696c 655f 636e 742c 2066   for file_cnt, f
-00003220: 696c 655f 7061 7468 2069 6e20 656e 756d  ile_path in enum
-00003230: 6572 6174 6528 7669 6465 6f5f 7061 7468  erate(video_path
-00003240: 7329 3a0a 2020 2020 2020 2020 7669 6465  s):.        vide
-00003250: 6f5f 7469 6d65 7220 3d20 5369 6d62 6154  o_timer = SimbaT
-00003260: 696d 6572 2873 7461 7274 3d54 7275 6529  imer(start=True)
-00003270: 0a20 2020 2020 2020 2064 6972 5f6e 616d  .        dir_nam
-00003280: 652c 2066 696c 655f 6e61 6d65 2c20 6578  e, file_name, ex
-00003290: 7420 3d20 6765 745f 666e 5f65 7874 2866  t = get_fn_ext(f
-000032a0: 696c 6570 6174 683d 6669 6c65 5f70 6174  ilepath=file_pat
-000032b0: 6829 0a20 2020 2020 2020 2070 7269 6e74  h).        print
-000032c0: 2866 2243 6f6e 7665 7274 696e 6720 4650  (f"Converting FP
-000032d0: 5320 666f 7220 7b66 696c 655f 6e61 6d65  S for {file_name
-000032e0: 7d2e 2e2e 2229 0a20 2020 2020 2020 2073  }...").        s
-000032f0: 6176 655f 7061 7468 203d 206f 732e 7061  ave_path = os.pa
-00003300: 7468 2e6a 6f69 6e28 0a20 2020 2020 2020  th.join(.       
-00003310: 2020 2020 2064 6972 5f6e 616d 652c 2066       dir_name, f
-00003320: 696c 655f 6e61 6d65 202b 2022 5f66 7073  ile_name + "_fps
-00003330: 5f7b 7d7b 7d22 2e66 6f72 6d61 7428 7374  _{}{}".format(st
-00003340: 7228 6670 7329 2c20 7374 7228 6578 7429  r(fps), str(ext)
-00003350: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-00003360: 2020 2020 6966 2067 7075 3a0a 2020 2020      if gpu:.    
-00003370: 2020 2020 2020 2020 636f 6d6d 616e 6420          command 
-00003380: 3d20 6627 6666 6d70 6567 202d 6877 6163  = f'ffmpeg -hwac
-00003390: 6365 6c20 6175 746f 202d 633a 7620 6832  cel auto -c:v h2
-000033a0: 3634 5f63 7576 6964 202d 6920 227b 6669  64_cuvid -i "{fi
-000033b0: 6c65 5f70 6174 687d 2220 2d76 6620 2266  le_path}" -vf "f
-000033c0: 7073 3d7b 6670 737d 2220 2d63 3a76 2068  ps={fps}" -c:v h
-000033d0: 3236 345f 6e76 656e 6320 2d63 3a61 2063  264_nvenc -c:a c
-000033e0: 6f70 7920 227b 7361 7665 5f70 6174 687d  opy "{save_path}
-000033f0: 2220 2d79 270a 2020 2020 2020 2020 656c  " -y'.        el
-00003400: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00003410: 636f 6d6d 616e 6420 3d20 6627 6666 6d70  command = f'ffmp
-00003420: 6567 202d 6920 7b66 696c 655f 7061 7468  eg -i {file_path
-00003430: 7d20 2d66 696c 7465 723a 7620 6670 733d  } -filter:v fps=
-00003440: 6670 733d 7b66 7073 7d20 2d63 3a76 206c  fps={fps} -c:v l
-00003450: 6962 7832 3634 2022 7b73 6176 655f 7061  ibx264 "{save_pa
-00003460: 7468 7d22 202d 7927 0a20 2020 2020 2020  th}" -y'.       
-00003470: 2073 7562 7072 6f63 6573 732e 6361 6c6c   subprocess.call
-00003480: 2863 6f6d 6d61 6e64 2c20 7368 656c 6c3d  (command, shell=
-00003490: 5472 7565 290a 2020 2020 2020 2020 7669  True).        vi
-000034a0: 6465 6f5f 7469 6d65 722e 7374 6f70 5f74  deo_timer.stop_t
-000034b0: 696d 6572 2829 0a20 2020 2020 2020 2070  imer().        p
-000034c0: 7269 6e74 280a 2020 2020 2020 2020 2020  rint(.          
-000034d0: 2020 6622 5669 6465 6f20 7b66 696c 655f    f"Video {file_
-000034e0: 6e61 6d65 7d20 636f 6d70 6c65 7465 2e2e  name} complete..
-000034f0: 2e20 2865 6c61 7073 6564 2074 696d 653a  . (elapsed time:
-00003500: 207b 7669 6465 6f5f 7469 6d65 722e 656c   {video_timer.el
-00003510: 6170 7365 645f 7469 6d65 5f73 7472 7d73  apsed_time_str}s
-00003520: 2922 0a20 2020 2020 2020 2029 0a20 2020  )".        ).   
-00003530: 2074 696d 6572 2e73 746f 705f 7469 6d65   timer.stop_time
-00003540: 7228 290a 2020 2020 7374 646f 7574 5f73  r().    stdout_s
-00003550: 7563 6365 7373 280a 2020 2020 2020 2020  uccess(.        
-00003560: 6d73 673d 6622 5349 4d42 4120 434f 4d50  msg=f"SIMBA COMP
-00003570: 4c45 5445 3a20 4650 5320 6f66 207b 6c65  LETE: FPS of {le
-00003580: 6e28 7669 6465 6f5f 7061 7468 7329 7d20  n(video_paths)} 
-00003590: 7669 6465 6f28 7329 2063 6861 6e67 6564  video(s) changed
-000035a0: 2074 6f20 7b66 7073 7d22 2c0a 2020 2020   to {fps}",.    
-000035b0: 2020 2020 656c 6170 7365 645f 7469 6d65      elapsed_time
-000035c0: 3d74 696d 6572 2e65 6c61 7073 6564 5f74  =timer.elapsed_t
-000035d0: 696d 655f 7374 722c 0a20 2020 2020 2020  ime_str,.       
-000035e0: 2073 6f75 7263 653d 6368 616e 6765 5f66   source=change_f
-000035f0: 7073 5f6f 665f 6d75 6c74 6970 6c65 5f76  ps_of_multiple_v
-00003600: 6964 656f 732e 5f5f 6e61 6d65 5f5f 2c0a  ideos.__name__,.
-00003610: 2020 2020 290a 0a0a 6465 6620 636f 6e76      )...def conv
-00003620: 6572 745f 7669 6465 6f5f 706f 7765 7270  ert_video_powerp
-00003630: 6f69 6e74 5f63 6f6d 7061 7469 626c 655f  oint_compatible_
-00003640: 666f 726d 6174 280a 2020 2020 6669 6c65  format(.    file
-00003650: 5f70 6174 683a 2055 6e69 6f6e 5b73 7472  _path: Union[str
-00003660: 2c20 6f73 2e50 6174 684c 696b 655d 2c20  , os.PathLike], 
-00003670: 6770 753a 204f 7074 696f 6e61 6c5b 626f  gpu: Optional[bo
-00003680: 6f6c 5d20 3d20 4661 6c73 650a 2920 2d3e  ol] = False.) ->
-00003690: 204e 6f6e 653a 0a20 2020 2022 2222 0a20   None:.    """. 
-000036a0: 2020 2043 7265 6174 6520 4d53 2050 6f77     Create MS Pow
-000036b0: 6572 506f 696e 7420 636f 6d70 6174 6962  erPoint compatib
-000036c0: 6c65 2063 6f70 7920 6f66 2061 2076 6964  le copy of a vid
-000036d0: 656f 2066 696c 652e 2054 6865 2072 6573  eo file. The res
-000036e0: 756c 7420 6973 2073 746f 7265 6420 696e  ult is stored in
-000036f0: 2074 6865 2073 616d 6520 6469 7265 6374   the same direct
-00003700: 6f72 7920 6173 2074 6865 0a20 2020 2069  ory as the.    i
-00003710: 6e70 7574 2066 696c 6520 7769 7468 2074  nput file with t
-00003720: 6865 2060 605f 706f 7765 7270 6f69 6e74  he ``_powerpoint
-00003730: 7265 6164 7960 6020 7375 6666 6978 2e0a  ready`` suffix..
-00003740: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
-00003750: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
-00003760: 7468 4c69 6b65 5d20 6669 6c65 5f70 6174  thLike] file_pat
-00003770: 683a 2050 6174 6820 746f 2076 6964 656f  h: Path to video
-00003780: 2066 696c 652e 0a20 2020 203a 7061 7261   file..    :para
-00003790: 6d65 7465 7220 4f70 7469 6f6e 616c 5b62  meter Optional[b
-000037a0: 6f6f 6c5d 2067 7075 3a20 4966 2054 7275  ool] gpu: If Tru
-000037b0: 652c 2075 7365 204e 5649 4445 4120 4750  e, use NVIDEA GP
-000037c0: 5520 636f 6465 6373 2e20 4465 6661 756c  U codecs. Defaul
-000037d0: 7420 4661 6c73 652e 0a0a 2020 2020 3a65  t False...    :e
-000037e0: 7861 6d70 6c65 3a0a 2020 2020 3e3e 3e20  xample:.    >>> 
-000037f0: 5f20 3d20 636f 6e76 6572 745f 7669 6465  _ = convert_vide
-00003800: 6f5f 706f 7765 7270 6f69 6e74 5f63 6f6d  o_powerpoint_com
-00003810: 7061 7469 626c 655f 666f 726d 6174 2866  patible_format(f
-00003820: 696c 655f 7061 7468 3d27 7072 6f6a 6563  ile_path='projec
-00003830: 745f 666f 6c64 6572 2f76 6964 656f 732f  t_folder/videos/
-00003840: 5669 6465 6f5f 312e 6d70 3427 290a 2020  Video_1.mp4').  
-00003850: 2020 2222 220a 0a20 2020 2063 6865 636b    """..    check
-00003860: 5f66 666d 7065 675f 6176 6169 6c61 626c  _ffmpeg_availabl
-00003870: 6528 7261 6973 655f 6572 726f 723d 5472  e(raise_error=Tr
-00003880: 7565 290a 2020 2020 6966 2067 7075 2061  ue).    if gpu a
-00003890: 6e64 206e 6f74 2063 6865 636b 5f6e 7669  nd not check_nvi
-000038a0: 6465 615f 6770 755f 6176 6169 6c61 626c  dea_gpu_availabl
-000038b0: 6528 293a 0a20 2020 2020 2020 2072 6169  e():.        rai
-000038c0: 7365 2046 464d 5045 4743 6f64 6563 4750  se FFMPEGCodecGP
-000038d0: 5545 7272 6f72 280a 2020 2020 2020 2020  UError(.        
-000038e0: 2020 2020 6d73 673d 224e 6f20 4750 5520      msg="No GPU 
-000038f0: 666f 756e 6420 2861 7320 6576 616c 7561  found (as evalua
-00003900: 7465 6420 6279 206e 7669 6465 612d 736d  ted by nvidea-sm
-00003910: 6920 7265 7475 726e 696e 6720 4e6f 6e65  i returning None
-00003920: 2922 2c0a 2020 2020 2020 2020 2020 2020  )",.            
-00003930: 736f 7572 6365 3d63 6f6e 7665 7274 5f76  source=convert_v
-00003940: 6964 656f 5f70 6f77 6572 706f 696e 745f  ideo_powerpoint_
-00003950: 636f 6d70 6174 6962 6c65 5f66 6f72 6d61  compatible_forma
-00003960: 742e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  t.__name__,.    
-00003970: 2020 2020 290a 2020 2020 7469 6d65 7220      ).    timer 
-00003980: 3d20 5369 6d62 6154 696d 6572 2873 7461  = SimbaTimer(sta
-00003990: 7274 3d54 7275 6529 0a20 2020 2063 6865  rt=True).    che
-000039a0: 636b 5f66 696c 655f 6578 6973 745f 616e  ck_file_exist_an
-000039b0: 645f 7265 6164 6162 6c65 2866 696c 655f  d_readable(file_
-000039c0: 7061 7468 3d66 696c 655f 7061 7468 290a  path=file_path).
-000039d0: 2020 2020 6469 722c 2066 696c 655f 6e61      dir, file_na
-000039e0: 6d65 2c20 6578 7420 3d20 6765 745f 666e  me, ext = get_fn
-000039f0: 5f65 7874 2866 696c 6570 6174 683d 6669  _ext(filepath=fi
-00003a00: 6c65 5f70 6174 6829 0a20 2020 2073 6176  le_path).    sav
-00003a10: 655f 6e61 6d65 203d 206f 732e 7061 7468  e_name = os.path
-00003a20: 2e6a 6f69 6e28 6469 722c 2066 696c 655f  .join(dir, file_
-00003a30: 6e61 6d65 202b 2022 5f70 6f77 6572 706f  name + "_powerpo
-00003a40: 696e 7472 6561 6479 2e6d 7034 2229 0a20  intready.mp4"). 
-00003a50: 2020 2069 6620 6f73 2e70 6174 682e 6973     if os.path.is
-00003a60: 6669 6c65 2873 6176 655f 6e61 6d65 293a  file(save_name):
-00003a70: 0a20 2020 2020 2020 2072 6169 7365 2046  .        raise F
-00003a80: 696c 6545 7869 7374 4572 726f 7228 0a20  ileExistError(. 
-00003a90: 2020 2020 2020 2020 2020 206d 7367 3d22             msg="
-00003aa0: 5349 4d42 4120 4552 524f 523a 2054 6865  SIMBA ERROR: The
-00003ab0: 206f 7574 6669 6c65 2066 696c 6520 616c   outfile file al
-00003ac0: 7265 6164 7920 6578 6973 743a 207b 7d2e  ready exist: {}.
-00003ad0: 222e 666f 726d 6174 2873 6176 655f 6e61  ".format(save_na
-00003ae0: 6d65 292c 0a20 2020 2020 2020 2020 2020  me),.           
-00003af0: 2073 6f75 7263 653d 636f 6e76 6572 745f   source=convert_
-00003b00: 7669 6465 6f5f 706f 7765 7270 6f69 6e74  video_powerpoint
-00003b10: 5f63 6f6d 7061 7469 626c 655f 666f 726d  _compatible_form
-00003b20: 6174 2e5f 5f6e 616d 655f 5f2c 0a20 2020  at.__name__,.   
-00003b30: 2020 2020 2029 0a20 2020 2069 6620 6770       ).    if gp
-00003b40: 753a 0a20 2020 2020 2020 2063 6f6d 6d61  u:.        comma
-00003b50: 6e64 203d 2027 6666 6d70 6567 202d 6877  nd = 'ffmpeg -hw
-00003b60: 6163 6365 6c20 6175 746f 202d 633a 7620  accel auto -c:v 
-00003b70: 6832 3634 5f63 7576 6964 202d 6920 227b  h264_cuvid -i "{
-00003b80: 7d22 202d 633a 7620 6832 3634 5f6e 7665  }" -c:v h264_nve
-00003b90: 6e63 202d 7072 6573 6574 2073 6c6f 7720  nc -preset slow 
-00003ba0: 2d70 726f 6669 6c65 3a76 2068 6967 6820  -profile:v high 
-00003bb0: 2d6c 6576 656c 3a76 2034 2e30 202d 7069  -level:v 4.0 -pi
-00003bc0: 785f 666d 7420 7975 7634 3230 7020 2d63  x_fmt yuv420p -c
-00003bd0: 7266 2032 3220 2d63 3a61 2061 6163 2022  rf 22 -c:a aac "
-00003be0: 7b7d 2227 2e66 6f72 6d61 7428 0a20 2020  {}"'.format(.   
-00003bf0: 2020 2020 2020 2020 2066 696c 655f 7061           file_pa
-00003c00: 7468 2c20 7361 7665 5f6e 616d 650a 2020  th, save_name.  
-00003c10: 2020 2020 2020 290a 2020 2020 656c 7365        ).    else
-00003c20: 3a0a 2020 2020 2020 2020 636f 6d6d 616e  :.        comman
-00003c30: 6420 3d20 6627 6666 6d70 6567 202d 6920  d = f'ffmpeg -i 
-00003c40: 227b 6669 6c65 5f70 6174 687d 2220 2d63  "{file_path}" -c
-00003c50: 3a76 206c 6962 7832 3634 202d 7072 6573  :v libx264 -pres
-00003c60: 6574 2073 6c6f 7720 2d70 726f 6669 6c65  et slow -profile
-00003c70: 3a76 2068 6967 6820 2d6c 6576 656c 3a76  :v high -level:v
-00003c80: 2034 2e30 202d 7069 785f 666d 7420 7975   4.0 -pix_fmt yu
-00003c90: 7634 3230 7020 2d63 7266 2032 3220 2d63  v420p -crf 22 -c
-00003ca0: 3a76 206c 6962 7832 3634 202d 636f 6465  :v libx264 -code
-00003cb0: 633a 6120 6161 6320 227b 7361 7665 5f6e  c:a aac "{save_n
-00003cc0: 616d 657d 2220 2d79 270a 2020 2020 7072  ame}" -y'.    pr
-00003cd0: 696e 7428 2243 7265 6174 696e 6720 7669  int("Creating vi
-00003ce0: 6465 6f20 696e 2070 6f77 6572 706f 696e  deo in powerpoin
-00003cf0: 7420 636f 6d70 6174 6962 6c65 2066 6f72  t compatible for
-00003d00: 6d61 742e 2e2e 2022 290a 2020 2020 7375  mat... ").    su
-00003d10: 6270 726f 6365 7373 2e63 616c 6c28 636f  bprocess.call(co
-00003d20: 6d6d 616e 642c 2073 6865 6c6c 3d54 7275  mmand, shell=Tru
-00003d30: 652c 2073 7464 6f75 743d 7375 6270 726f  e, stdout=subpro
-00003d40: 6365 7373 2e50 4950 4529 0a20 2020 2074  cess.PIPE).    t
-00003d50: 696d 6572 2e73 746f 705f 7469 6d65 7228  imer.stop_timer(
-00003d60: 290a 2020 2020 7374 646f 7574 5f73 7563  ).    stdout_suc
-00003d70: 6365 7373 280a 2020 2020 2020 2020 6d73  cess(.        ms
-00003d80: 673d 6622 5349 4d42 4120 434f 4d50 4c45  g=f"SIMBA COMPLE
-00003d90: 5445 3a20 5669 6465 6f20 636f 6e76 6572  TE: Video conver
-00003da0: 7465 6421 207b 7361 7665 5f6e 616d 657d  ted! {save_name}
-00003db0: 2067 656e 6572 6174 6564 2122 2c0a 2020   generated!",.  
-00003dc0: 2020 2020 2020 656c 6170 7365 645f 7469        elapsed_ti
-00003dd0: 6d65 3d74 696d 6572 2e65 6c61 7073 6564  me=timer.elapsed
-00003de0: 5f74 696d 655f 7374 722c 0a20 2020 2020  _time_str,.     
-00003df0: 2020 2073 6f75 7263 653d 636f 6e76 6572     source=conver
-00003e00: 745f 7669 6465 6f5f 706f 7765 7270 6f69  t_video_powerpoi
-00003e10: 6e74 5f63 6f6d 7061 7469 626c 655f 666f  nt_compatible_fo
-00003e20: 726d 6174 2e5f 5f6e 616d 655f 5f2c 0a20  rmat.__name__,. 
-00003e30: 2020 2029 0a0a 0a23 2063 6f6e 7665 7274     )...# convert
-00003e40: 5f76 6964 656f 5f70 6f77 6572 706f 696e  _video_powerpoin
-00003e50: 745f 636f 6d70 6174 6962 6c65 5f66 6f72  t_compatible_for
-00003e60: 6d61 7428 6669 6c65 5f70 6174 683d 7222  mat(file_path=r"
-00003e70: 2f55 7365 7273 2f73 696d 6f6e 2f44 6573  /Users/simon/Des
-00003e80: 6b74 6f70 2f65 6e76 732f 7369 6d62 612f  ktop/envs/simba/
-00003e90: 7472 6f75 626c 6573 686f 6f74 696e 672f  troubleshooting/
-00003ea0: 6d6f 7573 655f 6f70 656e 5f66 6965 6c64  mouse_open_field
-00003eb0: 2f70 726f 6a65 6374 5f66 6f6c 6465 722f  /project_folder/
-00003ec0: 7669 6465 6f73 2f74 6573 742f 5349 5f44  videos/test/SI_D
-00003ed0: 4159 335f 3330 385f 4344 315f 5052 4553  AY3_308_CD1_PRES
-00003ee0: 454e 545f 6670 735f 3130 5f66 7073 5f31  ENT_fps_10_fps_1
-00003ef0: 352e 6d70 3422 2c20 6770 753d 4661 6c73  5.mp4", gpu=Fals
-00003f00: 6529 0a0a 0a64 6566 2063 6f6e 7665 7274  e)...def convert
-00003f10: 5f74 6f5f 6d70 3428 0a20 2020 2066 696c  _to_mp4(.    fil
-00003f20: 655f 7061 7468 3a20 556e 696f 6e5b 7374  e_path: Union[st
-00003f30: 722c 206f 732e 5061 7468 4c69 6b65 5d2c  r, os.PathLike],
-00003f40: 2067 7075 3a20 4f70 7469 6f6e 616c 5b62   gpu: Optional[b
-00003f50: 6f6f 6c5d 203d 2046 616c 7365 0a29 202d  ool] = False.) -
-00003f60: 3e20 4e6f 6e65 3a0a 2020 2020 2222 220a  > None:.    """.
-00003f70: 2020 2020 436f 6e76 6572 7420 6120 7669      Convert a vi
-00003f80: 6465 6f20 6669 6c65 2074 6f20 6d70 3420  deo file to mp4 
-00003f90: 666f 726d 6174 2e20 5468 6520 7265 7375  format. The resu
-00003fa0: 6c74 2069 7320 7374 6f72 6564 2069 6e20  lt is stored in 
-00003fb0: 7468 6520 7361 6d65 2064 6972 6563 746f  the same directo
-00003fc0: 7279 2061 7320 7468 650a 2020 2020 696e  ry as the.    in
-00003fd0: 7075 7420 6669 6c65 2077 6974 6820 7468  put file with th
-00003fe0: 6520 6060 5f63 6f6e 7665 7274 6564 2e6d  e ``_converted.m
-00003ff0: 7034 6060 2073 7566 6669 782e 0a0a 2020  p4`` suffix...  
-00004000: 2020 3a70 6172 616d 6574 6572 2055 6e69    :parameter Uni
-00004010: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
-00004020: 696b 655d 2066 696c 655f 7061 7468 3a20  ike] file_path: 
-00004030: 5061 7468 2074 6f20 7669 6465 6f20 6669  Path to video fi
-00004040: 6c65 2e0a 2020 2020 3a70 6172 616d 6574  le..    :paramet
-00004050: 6572 204f 7074 696f 6e61 6c5b 626f 6f6c  er Optional[bool
-00004060: 5d20 6770 753a 2049 6620 5472 7565 2c20  ] gpu: If True, 
-00004070: 7573 6520 4e56 4944 4541 2047 5055 2063  use NVIDEA GPU c
-00004080: 6f64 6563 732e 2044 6566 6175 6c74 2046  odecs. Default F
-00004090: 616c 7365 2e0a 0a20 2020 203a 6578 616d  alse...    :exam
-000040a0: 706c 653a 0a20 2020 203e 3e3e 205f 203d  ple:.    >>> _ =
-000040b0: 2063 6f6e 7665 7274 5f74 6f5f 6d70 3428   convert_to_mp4(
-000040c0: 6669 6c65 5f70 6174 683d 2770 726f 6a65  file_path='proje
-000040d0: 6374 5f66 6f6c 6465 722f 7669 6465 6f73  ct_folder/videos
-000040e0: 2f56 6964 656f 5f31 2e61 7669 2729 0a20  /Video_1.avi'). 
-000040f0: 2020 2022 2222 0a0a 2020 2020 6368 6563     """..    chec
-00004100: 6b5f 6666 6d70 6567 5f61 7661 696c 6162  k_ffmpeg_availab
-00004110: 6c65 2872 6169 7365 5f65 7272 6f72 3d54  le(raise_error=T
-00004120: 7275 6529 0a20 2020 2069 6620 6770 7520  rue).    if gpu 
-00004130: 616e 6420 6e6f 7420 6368 6563 6b5f 6e76  and not check_nv
-00004140: 6964 6561 5f67 7075 5f61 7661 696c 6162  idea_gpu_availab
-00004150: 6c65 2829 3a0a 2020 2020 2020 2020 7261  le():.        ra
-00004160: 6973 6520 4646 4d50 4547 436f 6465 6347  ise FFMPEGCodecG
-00004170: 5055 4572 726f 7228 0a20 2020 2020 2020  PUError(.       
-00004180: 2020 2020 206d 7367 3d22 4e6f 2047 5055       msg="No GPU
-00004190: 2066 6f75 6e64 2028 6173 2065 7661 6c75   found (as evalu
-000041a0: 6174 6564 2062 7920 6e76 6964 6561 2d73  ated by nvidea-s
-000041b0: 6d69 2072 6574 7572 6e69 6e67 204e 6f6e  mi returning Non
-000041c0: 6529 222c 0a20 2020 2020 2020 2020 2020  e)",.           
-000041d0: 2073 6f75 7263 653d 636f 6e76 6572 745f   source=convert_
-000041e0: 746f 5f6d 7034 2e5f 5f6e 616d 655f 5f2c  to_mp4.__name__,
-000041f0: 0a20 2020 2020 2020 2029 0a20 2020 2074  .        ).    t
-00004200: 696d 6572 203d 2053 696d 6261 5469 6d65  imer = SimbaTime
-00004210: 7228 7374 6172 743d 5472 7565 290a 2020  r(start=True).  
-00004220: 2020 6368 6563 6b5f 6669 6c65 5f65 7869    check_file_exi
-00004230: 7374 5f61 6e64 5f72 6561 6461 626c 6528  st_and_readable(
-00004240: 6669 6c65 5f70 6174 683d 6669 6c65 5f70  file_path=file_p
-00004250: 6174 6829 0a20 2020 2064 6972 2c20 6669  ath).    dir, fi
-00004260: 6c65 5f6e 616d 652c 2065 7874 203d 2067  le_name, ext = g
-00004270: 6574 5f66 6e5f 6578 7428 6669 6c65 7061  et_fn_ext(filepa
-00004280: 7468 3d66 696c 655f 7061 7468 290a 2020  th=file_path).  
-00004290: 2020 7361 7665 5f6e 616d 6520 3d20 6f73    save_name = os
-000042a0: 2e70 6174 682e 6a6f 696e 2864 6972 2c20  .path.join(dir, 
-000042b0: 6669 6c65 5f6e 616d 6520 2b20 225f 636f  file_name + "_co
-000042c0: 6e76 6572 7465 642e 6d70 3422 290a 2020  nverted.mp4").  
-000042d0: 2020 6966 206f 732e 7061 7468 2e69 7366    if os.path.isf
-000042e0: 696c 6528 7361 7665 5f6e 616d 6529 3a0a  ile(save_name):.
-000042f0: 2020 2020 2020 2020 7261 6973 6520 4669          raise Fi
-00004300: 6c65 4578 6973 7445 7272 6f72 280a 2020  leExistError(.  
-00004310: 2020 2020 2020 2020 2020 6d73 673d 2253            msg="S
-00004320: 494d 4241 2045 5252 4f52 3a20 5468 6520  IMBA ERROR: The 
-00004330: 6f75 7466 696c 6520 6669 6c65 2061 6c72  outfile file alr
-00004340: 6561 6479 2065 7869 7374 3a20 7b7d 2e22  eady exist: {}."
-00004350: 2e66 6f72 6d61 7428 7361 7665 5f6e 616d  .format(save_nam
-00004360: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
-00004370: 736f 7572 6365 3d63 6f6e 7665 7274 5f74  source=convert_t
-00004380: 6f5f 6d70 342e 5f5f 6e61 6d65 5f5f 2c0a  o_mp4.__name__,.
-00004390: 2020 2020 2020 2020 290a 2020 2020 6966          ).    if
-000043a0: 2067 7075 3a0a 2020 2020 2020 2020 636f   gpu:.        co
-000043b0: 6d6d 616e 6420 3d20 280a 2020 2020 2020  mmand = (.      
-000043c0: 2020 2020 2020 2766 666d 7065 6720 2d68        'ffmpeg -h
-000043d0: 7761 6363 656c 2061 7574 6f20 2d63 3a76  waccel auto -c:v
-000043e0: 2068 3236 345f 6375 7669 6420 2d69 2022   h264_cuvid -i "
-000043f0: 7b7d 2220 2d63 3a76 2068 3236 345f 6e76  {}" -c:v h264_nv
-00004400: 656e 6320 227b 7d22 272e 666f 726d 6174  enc "{}"'.format
-00004410: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00004420: 2020 6669 6c65 5f70 6174 682c 2073 6176    file_path, sav
-00004430: 655f 6e61 6d65 0a20 2020 2020 2020 2020  e_name.         
-00004440: 2020 2029 0a20 2020 2020 2020 2029 0a20     ).        ). 
-00004450: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00004460: 2063 6f6d 6d61 6e64 203d 2066 2766 666d   command = f'ffm
-00004470: 7065 6720 2d69 2022 7b66 696c 655f 7061  peg -i "{file_pa
-00004480: 7468 7d22 202d 633a 7620 6c69 6278 3236  th}" -c:v libx26
-00004490: 3420 227b 7361 7665 5f6e 616d 657d 2227  4 "{save_name}"'
-000044a0: 0a20 2020 2070 7269 6e74 2822 436f 6e76  .    print("Conv
-000044b0: 6572 7469 6e67 2074 6f20 6d70 342e 2e2e  erting to mp4...
-000044c0: 2022 290a 2020 2020 7375 6270 726f 6365   ").    subproce
-000044d0: 7373 2e63 616c 6c28 636f 6d6d 616e 642c  ss.call(command,
-000044e0: 2073 6865 6c6c 3d54 7275 652c 2073 7464   shell=True, std
-000044f0: 6f75 743d 7375 6270 726f 6365 7373 2e50  out=subprocess.P
-00004500: 4950 4529 0a20 2020 2074 696d 6572 2e73  IPE).    timer.s
-00004510: 746f 705f 7469 6d65 7228 290a 2020 2020  top_timer().    
-00004520: 7374 646f 7574 5f73 7563 6365 7373 280a  stdout_success(.
-00004530: 2020 2020 2020 2020 6d73 673d 6622 5349          msg=f"SI
-00004540: 4d42 4120 434f 4d50 4c45 5445 3a20 5669  MBA COMPLETE: Vi
-00004550: 6465 6f20 636f 6e76 6572 7465 6421 207b  deo converted! {
-00004560: 7361 7665 5f6e 616d 657d 2067 656e 6572  save_name} gener
-00004570: 6174 6564 2122 2c0a 2020 2020 2020 2020  ated!",.        
-00004580: 656c 6170 7365 645f 7469 6d65 3d74 696d  elapsed_time=tim
-00004590: 6572 2e65 6c61 7073 6564 5f74 696d 655f  er.elapsed_time_
-000045a0: 7374 722c 0a20 2020 2020 2020 2073 6f75  str,.        sou
-000045b0: 7263 653d 636f 6e76 6572 745f 746f 5f6d  rce=convert_to_m
-000045c0: 7034 2e5f 5f6e 616d 655f 5f2c 0a20 2020  p4.__name__,.   
-000045d0: 2029 0a0a 0a64 6566 2076 6964 656f 5f74   )...def video_t
-000045e0: 6f5f 6772 6579 7363 616c 6528 0a20 2020  o_greyscale(.   
-000045f0: 2066 696c 655f 7061 7468 3a20 556e 696f   file_path: Unio
-00004600: 6e5b 7374 722c 206f 732e 5061 7468 4c69  n[str, os.PathLi
-00004610: 6b65 5d2c 2067 7075 3a20 4f70 7469 6f6e  ke], gpu: Option
-00004620: 616c 5b62 6f6f 6c5d 203d 2046 616c 7365  al[bool] = False
-00004630: 0a29 202d 3e20 4e6f 6e65 3a0a 2020 2020  .) -> None:.    
-00004640: 2222 220a 2020 2020 436f 6e76 6572 7420  """.    Convert 
-00004650: 6120 7669 6465 6f20 6669 6c65 2074 6f20  a video file to 
-00004660: 6772 6579 7363 616c 6520 6d70 3420 666f  greyscale mp4 fo
-00004670: 726d 6174 2e20 5468 6520 7265 7375 6c74  rmat. The result
-00004680: 2069 7320 7374 6f72 6564 2069 6e20 7468   is stored in th
-00004690: 6520 7361 6d65 2064 6972 6563 746f 7279  e same directory
-000046a0: 2061 7320 7468 650a 2020 2020 696e 7075   as the.    inpu
-000046b0: 7420 6669 6c65 2077 6974 6820 7468 6520  t file with the 
-000046c0: 6060 5f67 7261 7973 6361 6c65 2e6d 7034  ``_grayscale.mp4
-000046d0: 6060 2073 7566 6669 782e 0a0a 2020 2020  `` suffix...    
-000046e0: 3a70 6172 616d 6574 6572 2055 6e69 6f6e  :parameter Union
-000046f0: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
-00004700: 655d 2066 696c 655f 7061 7468 3a20 5061  e] file_path: Pa
-00004710: 7468 2074 6f20 7669 6465 6f20 6669 6c65  th to video file
-00004720: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
-00004730: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
-00004740: 6770 753a 2049 6620 5472 7565 2c20 7573  gpu: If True, us
-00004750: 6520 4e56 4944 4541 2047 5055 2063 6f64  e NVIDEA GPU cod
-00004760: 6563 732e 2044 6566 6175 6c74 2046 616c  ecs. Default Fal
-00004770: 7365 2e0a 2020 2020 3a72 6169 7365 2046  se..    :raise F
-00004780: 464d 5045 4743 6f64 6563 4750 5545 7272  FMPEGCodecGPUErr
-00004790: 6f72 3a20 4966 206e 6f20 4750 5520 6973  or: If no GPU is
-000047a0: 2066 6f75 6e64 2061 6e64 2060 6067 7075   found and ``gpu
-000047b0: 203d 3d20 5472 7565 6060 2e0a 2020 2020   == True``..    
-000047c0: 3a72 6169 7365 2046 696c 6545 7869 7374  :raise FileExist
-000047d0: 4572 726f 723a 2049 6620 7669 6465 6f20  Error: If video 
-000047e0: 6e61 6d65 2077 6974 6820 6060 5f67 7261  name with ``_gra
-000047f0: 7973 6361 6c65 6060 2073 7566 6669 7820  yscale`` suffix 
-00004800: 616c 7265 6164 7920 6578 6973 742e 0a0a  already exist...
-00004810: 2020 2020 3a65 7861 6d70 6c65 3a0a 2020      :example:.  
-00004820: 2020 3e3e 3e20 5f20 3d20 7669 6465 6f5f    >>> _ = video_
-00004830: 746f 5f67 7265 7973 6361 6c65 2866 696c  to_greyscale(fil
-00004840: 655f 7061 7468 3d27 7072 6f6a 6563 745f  e_path='project_
-00004850: 666f 6c64 6572 2f76 6964 656f 732f 5669  folder/videos/Vi
-00004860: 6465 6f5f 312e 6176 6927 290a 2020 2020  deo_1.avi').    
-00004870: 2222 220a 2020 2020 6368 6563 6b5f 6666  """.    check_ff
-00004880: 6d70 6567 5f61 7661 696c 6162 6c65 2872  mpeg_available(r
-00004890: 6169 7365 5f65 7272 6f72 3d54 7275 6529  aise_error=True)
-000048a0: 0a20 2020 2069 6620 6770 7520 616e 6420  .    if gpu and 
-000048b0: 6e6f 7420 6368 6563 6b5f 6e76 6964 6561  not check_nvidea
-000048c0: 5f67 7075 5f61 7661 696c 6162 6c65 2829  _gpu_available()
-000048d0: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
-000048e0: 4646 4d50 4547 436f 6465 6347 5055 4572  FFMPEGCodecGPUEr
-000048f0: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
-00004900: 206d 7367 3d22 4e6f 2047 5055 2066 6f75   msg="No GPU fou
-00004910: 6e64 2028 6173 2065 7661 6c75 6174 6564  nd (as evaluated
-00004920: 2062 7920 6e76 6964 6561 2d73 6d69 2072   by nvidea-smi r
-00004930: 6574 7572 6e69 6e67 204e 6f6e 6529 222c  eturning None)",
-00004940: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
-00004950: 7263 653d 7669 6465 6f5f 746f 5f67 7265  rce=video_to_gre
-00004960: 7973 6361 6c65 2e5f 5f6e 616d 655f 5f2c  yscale.__name__,
-00004970: 0a20 2020 2020 2020 2029 0a20 2020 2074  .        ).    t
-00004980: 696d 6572 203d 2053 696d 6261 5469 6d65  imer = SimbaTime
-00004990: 7228 7374 6172 743d 5472 7565 290a 2020  r(start=True).  
-000049a0: 2020 6368 6563 6b5f 6669 6c65 5f65 7869    check_file_exi
-000049b0: 7374 5f61 6e64 5f72 6561 6461 626c 6528  st_and_readable(
-000049c0: 6669 6c65 5f70 6174 683d 6669 6c65 5f70  file_path=file_p
-000049d0: 6174 6829 0a20 2020 2064 6972 2c20 6669  ath).    dir, fi
-000049e0: 6c65 5f6e 616d 652c 2065 7874 203d 2067  le_name, ext = g
-000049f0: 6574 5f66 6e5f 6578 7428 6669 6c65 7061  et_fn_ext(filepa
-00004a00: 7468 3d66 696c 655f 7061 7468 290a 2020  th=file_path).  
-00004a10: 2020 7361 7665 5f6e 616d 6520 3d20 6f73    save_name = os
-00004a20: 2e70 6174 682e 6a6f 696e 2864 6972 2c20  .path.join(dir, 
-00004a30: 6669 6c65 5f6e 616d 6520 2b20 225f 6772  file_name + "_gr
-00004a40: 6179 7363 616c 652e 6d70 3422 290a 2020  ayscale.mp4").  
-00004a50: 2020 6966 206f 732e 7061 7468 2e69 7366    if os.path.isf
-00004a60: 696c 6528 7361 7665 5f6e 616d 6529 3a0a  ile(save_name):.
-00004a70: 2020 2020 2020 2020 7261 6973 6520 4669          raise Fi
-00004a80: 6c65 4578 6973 7445 7272 6f72 280a 2020  leExistError(.  
-00004a90: 2020 2020 2020 2020 2020 6d73 673d 2253            msg="S
-00004aa0: 494d 4241 2045 5252 4f52 3a20 5468 6520  IMBA ERROR: The 
-00004ab0: 6f75 7466 696c 6520 6669 6c65 2061 6c72  outfile file alr
-00004ac0: 6561 6479 2065 7869 7374 3a20 7b7d 2e22  eady exist: {}."
-00004ad0: 2e66 6f72 6d61 7428 7361 7665 5f6e 616d  .format(save_nam
-00004ae0: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
-00004af0: 736f 7572 6365 3d76 6964 656f 5f74 6f5f  source=video_to_
-00004b00: 6772 6579 7363 616c 652e 5f5f 6e61 6d65  greyscale.__name
-00004b10: 5f5f 2c0a 2020 2020 2020 2020 290a 2020  __,.        ).  
-00004b20: 2020 6966 2067 7075 3a0a 2020 2020 2020    if gpu:.      
-00004b30: 2020 636f 6d6d 616e 6420 3d20 6627 6666    command = f'ff
-00004b40: 6d70 6567 202d 6877 6163 6365 6c20 6175  mpeg -hwaccel au
-00004b50: 746f 202d 633a 7620 6832 3634 5f63 7576  to -c:v h264_cuv
-00004b60: 6964 202d 6920 227b 6669 6c65 5f70 6174  id -i "{file_pat
-00004b70: 687d 2220 2d76 6620 2268 7775 706c 6f61  h}" -vf "hwuploa
-00004b80: 645f 6375 6461 2c68 7764 6f77 6e6c 6f61  d_cuda,hwdownloa
-00004b90: 642c 666f 726d 6174 3d6e 7631 322c 666f  d,format=nv12,fo
-00004ba0: 726d 6174 3d67 7261 7922 202d 633a 7620  rmat=gray" -c:v 
-00004bb0: 6832 3634 5f6e 7665 6e63 202d 633a 6120  h264_nvenc -c:a 
-00004bc0: 636f 7079 2022 7b73 6176 655f 6e61 6d65  copy "{save_name
-00004bd0: 7d22 270a 2020 2020 656c 7365 3a0a 2020  }"'.    else:.  
-00004be0: 2020 2020 2020 636f 6d6d 616e 6420 3d20        command = 
-00004bf0: 6627 6666 6d70 6567 202d 6920 227b 6669  f'ffmpeg -i "{fi
-00004c00: 6c65 5f70 6174 687d 2220 2d76 6620 666f  le_path}" -vf fo
-00004c10: 726d 6174 3d67 7261 7920 2d63 3a76 206c  rmat=gray -c:v l
-00004c20: 6962 7832 3634 2022 7b73 6176 655f 6e61  ibx264 "{save_na
-00004c30: 6d65 7d22 270a 2020 2020 7072 696e 7428  me}"'.    print(
-00004c40: 6622 436f 6e76 6572 7469 6e67 207b 6669  f"Converting {fi
-00004c50: 6c65 5f6e 616d 657d 2074 6f20 6772 6579  le_name} to grey
-00004c60: 7363 616c 652e 2e2e 2022 290a 2020 2020  scale... ").    
-00004c70: 7375 6270 726f 6365 7373 2e63 616c 6c28  subprocess.call(
-00004c80: 636f 6d6d 616e 642c 2073 6865 6c6c 3d54  command, shell=T
-00004c90: 7275 652c 2073 7464 6f75 743d 7375 6270  rue, stdout=subp
-00004ca0: 726f 6365 7373 2e50 4950 4529 0a20 2020  rocess.PIPE).   
-00004cb0: 2074 696d 6572 2e73 746f 705f 7469 6d65   timer.stop_time
-00004cc0: 7228 290a 2020 2020 7374 646f 7574 5f73  r().    stdout_s
-00004cd0: 7563 6365 7373 280a 2020 2020 2020 2020  uccess(.        
-00004ce0: 6d73 673d 6622 5349 4d42 4120 434f 4d50  msg=f"SIMBA COMP
-00004cf0: 4c45 5445 3a20 5669 6465 6f20 636f 6e76  LETE: Video conv
-00004d00: 6572 7465 6421 207b 7361 7665 5f6e 616d  erted! {save_nam
-00004d10: 657d 2067 656e 6572 6174 6564 2122 2c0a  e} generated!",.
-00004d20: 2020 2020 2020 2020 656c 6170 7365 645f          elapsed_
-00004d30: 7469 6d65 3d74 696d 6572 2e65 6c61 7073  time=timer.elaps
-00004d40: 6564 5f74 696d 655f 7374 722c 0a20 2020  ed_time_str,.   
-00004d50: 2020 2020 2073 6f75 7263 653d 7669 6465       source=vide
-00004d60: 6f5f 746f 5f67 7265 7973 6361 6c65 2e5f  o_to_greyscale._
-00004d70: 5f6e 616d 655f 5f2c 0a20 2020 2029 0a0a  _name__,.    )..
-00004d80: 0a64 6566 2062 6174 6368 5f76 6964 656f  .def batch_video
-00004d90: 5f74 6f5f 6772 6579 7363 616c 6528 0a20  _to_greyscale(. 
-00004da0: 2020 2064 6972 6563 746f 7279 3a20 556e     directory: Un
-00004db0: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
-00004dc0: 4c69 6b65 5d2c 2067 7075 3a20 4f70 7469  Like], gpu: Opti
-00004dd0: 6f6e 616c 5b62 6f6f 6c5d 203d 2046 616c  onal[bool] = Fal
-00004de0: 7365 0a29 202d 3e20 4e6f 6e65 3a0a 2020  se.) -> None:.  
-00004df0: 2020 2222 220a 2020 2020 436f 6e76 6572    """.    Conver
-00004e00: 7420 6120 6469 7265 6374 6f72 7920 6f66  t a directory of
-00004e10: 2076 6964 656f 2066 696c 6520 746f 2067   video file to g
-00004e20: 7265 7973 6361 6c65 206d 7034 2066 6f72  reyscale mp4 for
-00004e30: 6d61 742e 2054 6865 2072 6573 756c 7473  mat. The results
-00004e40: 2061 7265 2073 746f 7265 6420 696e 2074   are stored in t
-00004e50: 6865 2073 616d 6520 6469 7265 6374 6f72  he same director
-00004e60: 7920 6173 2074 6865 0a20 2020 2069 6e70  y as the.    inp
-00004e70: 7574 2066 696c 6573 2077 6974 6820 7468  ut files with th
-00004e80: 6520 6060 5f67 7261 7973 6361 6c65 2e6d  e ``_grayscale.m
-00004e90: 7034 6060 2073 7566 6669 782e 0a0a 2020  p4`` suffix...  
-00004ea0: 2020 3a70 6172 616d 6574 6572 2055 6e69    :parameter Uni
-00004eb0: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
-00004ec0: 696b 655d 2064 6972 6563 746f 7279 3a20  ike] directory: 
-00004ed0: 5061 7468 2074 6f20 6469 7265 6374 6f72  Path to director
-00004ee0: 7920 686f 6c64 696e 6720 7669 6465 6f20  y holding video 
-00004ef0: 6669 6c65 7320 696e 2063 6f6c 6f72 2e0a  files in color..
-00004f00: 2020 2020 3a70 6172 616d 6574 6572 204f      :parameter O
-00004f10: 7074 696f 6e61 6c5b 626f 6f6c 5d20 6770  ptional[bool] gp
-00004f20: 753a 2049 6620 5472 7565 2c20 7573 6520  u: If True, use 
-00004f30: 4e56 4944 4541 2047 5055 2063 6f64 6563  NVIDEA GPU codec
-00004f40: 732e 2044 6566 6175 6c74 2046 616c 7365  s. Default False
-00004f50: 2e0a 2020 2020 3a72 6169 7365 2046 464d  ..    :raise FFM
-00004f60: 5045 4743 6f64 6563 4750 5545 7272 6f72  PEGCodecGPUError
-00004f70: 3a20 4966 206e 6f20 4750 5520 6973 2066  : If no GPU is f
-00004f80: 6f75 6e64 2061 6e64 2060 6067 7075 203d  ound and ``gpu =
-00004f90: 3d20 5472 7565 6060 2e0a 0a20 2020 203a  = True``...    :
-00004fa0: 6578 616d 706c 653a 0a20 2020 203e 3e3e  example:.    >>>
-00004fb0: 205f 203d 2062 6174 6368 5f76 6964 656f   _ = batch_video
-00004fc0: 5f74 6f5f 6772 6579 7363 616c 6528 6469  _to_greyscale(di
-00004fd0: 7265 6374 6f72 793d 272f 5573 6572 732f  rectory='/Users/
-00004fe0: 7369 6d6f 6e2f 4465 736b 746f 702f 656e  simon/Desktop/en
-00004ff0: 7673 2f73 696d 6261 2f74 726f 7562 6c65  vs/simba/trouble
-00005000: 7368 6f6f 7469 6e67 2f6d 6f75 7365 5f6f  shooting/mouse_o
-00005010: 7065 6e5f 6669 656c 642f 7072 6f6a 6563  pen_field/projec
-00005020: 745f 666f 6c64 6572 2f76 6964 656f 732f  t_folder/videos/
-00005030: 7465 7374 5f32 2729 0a20 2020 2022 2222  test_2').    """
-00005040: 0a20 2020 2063 6865 636b 5f66 666d 7065  .    check_ffmpe
-00005050: 675f 6176 6169 6c61 626c 6528 7261 6973  g_available(rais
-00005060: 655f 6572 726f 723d 5472 7565 290a 2020  e_error=True).  
-00005070: 2020 6966 2067 7075 2061 6e64 206e 6f74    if gpu and not
-00005080: 2063 6865 636b 5f6e 7669 6465 615f 6770   check_nvidea_gp
-00005090: 755f 6176 6169 6c61 626c 6528 293a 0a20  u_available():. 
-000050a0: 2020 2020 2020 2072 6169 7365 2046 464d         raise FFM
-000050b0: 5045 4743 6f64 6563 4750 5545 7272 6f72  PEGCodecGPUError
-000050c0: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
-000050d0: 673d 224e 6f20 4750 5520 666f 756e 6420  g="No GPU found 
-000050e0: 2861 7320 6576 616c 7561 7465 6420 6279  (as evaluated by
-000050f0: 206e 7669 6465 612d 736d 6920 7265 7475   nvidea-smi retu
-00005100: 726e 696e 6720 4e6f 6e65 2922 2c0a 2020  rning None)",.  
-00005110: 2020 2020 2020 2020 2020 736f 7572 6365            source
-00005120: 3d62 6174 6368 5f76 6964 656f 5f74 6f5f  =batch_video_to_
-00005130: 6772 6579 7363 616c 652e 5f5f 6e61 6d65  greyscale.__name
-00005140: 5f5f 2c0a 2020 2020 2020 2020 290a 2020  __,.        ).  
-00005150: 2020 7469 6d65 7220 3d20 5369 6d62 6154    timer = SimbaT
-00005160: 696d 6572 2873 7461 7274 3d54 7275 6529  imer(start=True)
-00005170: 0a20 2020 2063 6865 636b 5f69 665f 6469  .    check_if_di
-00005180: 725f 6578 6973 7473 2869 6e5f 6469 723d  r_exists(in_dir=
-00005190: 6469 7265 6374 6f72 792c 2073 6f75 7263  directory, sourc
-000051a0: 653d 6261 7463 685f 7669 6465 6f5f 746f  e=batch_video_to
-000051b0: 5f67 7265 7973 6361 6c65 2e5f 5f6e 616d  _greyscale.__nam
-000051c0: 655f 5f29 0a20 2020 2076 6964 656f 5f70  e__).    video_p
-000051d0: 6174 6873 203d 2066 696e 645f 616c 6c5f  aths = find_all_
-000051e0: 7669 6465 6f73 5f69 6e5f 6469 7265 6374  videos_in_direct
-000051f0: 6f72 7928 0a20 2020 2020 2020 2064 6972  ory(.        dir
-00005200: 6563 746f 7279 3d64 6972 6563 746f 7279  ectory=directory
-00005210: 2c20 6173 5f64 6963 743d 5472 7565 2c20  , as_dict=True, 
-00005220: 7261 6973 655f 6572 726f 723d 5472 7565  raise_error=True
-00005230: 0a20 2020 2029 0a20 2020 2066 6f72 2066  .    ).    for f
-00005240: 696c 655f 636e 742c 2028 6669 6c65 5f6e  ile_cnt, (file_n
-00005250: 616d 652c 2066 696c 655f 7061 7468 2920  ame, file_path) 
-00005260: 696e 2065 6e75 6d65 7261 7465 2876 6964  in enumerate(vid
-00005270: 656f 5f70 6174 6873 2e69 7465 6d73 2829  eo_paths.items()
-00005280: 293a 0a20 2020 2020 2020 2076 6964 656f  ):.        video
-00005290: 5f74 696d 6572 203d 2053 696d 6261 5469  _timer = SimbaTi
-000052a0: 6d65 7228 7374 6172 743d 5472 7565 290a  mer(start=True).
-000052b0: 2020 2020 2020 2020 696e 5f64 6972 2c20          in_dir, 
-000052c0: 5f2c 205f 203d 2067 6574 5f66 6e5f 6578  _, _ = get_fn_ex
-000052d0: 7428 6669 6c65 7061 7468 3d66 696c 655f  t(filepath=file_
-000052e0: 7061 7468 290a 2020 2020 2020 2020 7361  path).        sa
-000052f0: 7665 5f6e 616d 6520 3d20 6f73 2e70 6174  ve_name = os.pat
-00005300: 682e 6a6f 696e 2869 6e5f 6469 722c 2066  h.join(in_dir, f
-00005310: 227b 6669 6c65 5f6e 616d 657d 5f67 7261  "{file_name}_gra
-00005320: 7973 6361 6c65 2e6d 7034 2229 0a20 2020  yscale.mp4").   
-00005330: 2020 2020 2069 6620 6770 753a 0a20 2020       if gpu:.   
-00005340: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
-00005350: 203d 2066 2766 666d 7065 6720 2d68 7761   = f'ffmpeg -hwa
-00005360: 6363 656c 2061 7574 6f20 2d63 3a76 2068  ccel auto -c:v h
-00005370: 3236 345f 6375 7669 6420 2d69 2022 7b66  264_cuvid -i "{f
-00005380: 696c 655f 7061 7468 7d22 202d 7666 2022  ile_path}" -vf "
-00005390: 6877 7570 6c6f 6164 5f63 7564 612c 6877  hwupload_cuda,hw
-000053a0: 646f 776e 6c6f 6164 2c66 6f72 6d61 743d  download,format=
-000053b0: 6e76 3132 2c66 6f72 6d61 743d 6772 6179  nv12,format=gray
-000053c0: 2220 2d63 3a76 2068 3236 345f 6e76 656e  " -c:v h264_nven
-000053d0: 6320 2d63 3a61 2063 6f70 7920 227b 7361  c -c:a copy "{sa
-000053e0: 7665 5f6e 616d 657d 2220 2d79 270a 2020  ve_name}" -y'.  
-000053f0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00005400: 2020 2020 2020 2020 636f 6d6d 616e 6420          command 
-00005410: 3d20 6627 6666 6d70 6567 202d 6920 227b  = f'ffmpeg -i "{
-00005420: 6669 6c65 5f70 6174 687d 2220 2d76 6620  file_path}" -vf 
-00005430: 666f 726d 6174 3d67 7261 7920 2d63 3a76  format=gray -c:v
-00005440: 206c 6962 7832 3634 2022 7b73 6176 655f   libx264 "{save_
-00005450: 6e61 6d65 7d22 202d 6869 6465 5f62 616e  name}" -hide_ban
-00005460: 6e65 7220 2d6c 6f67 6c65 7665 6c20 6572  ner -loglevel er
-00005470: 726f 7220 2d79 270a 2020 2020 2020 2020  ror -y'.        
-00005480: 7072 696e 7428 0a20 2020 2020 2020 2020  print(.         
-00005490: 2020 2066 2243 6f6e 7665 7274 696e 6720     f"Converting 
-000054a0: 7b66 696c 655f 6e61 6d65 7d20 746f 2067  {file_name} to g
-000054b0: 7265 7973 6361 6c65 2028 5669 6465 6f20  reyscale (Video 
-000054c0: 7b66 696c 655f 636e 742b 317d 2f7b 6c65  {file_cnt+1}/{le
-000054d0: 6e28 6c69 7374 2876 6964 656f 5f70 6174  n(list(video_pat
-000054e0: 6873 2e6b 6579 7328 2929 297d 292e 2e2e  hs.keys()))})...
-000054f0: 2022 0a20 2020 2020 2020 2029 0a20 2020   ".        ).   
-00005500: 2020 2020 2073 7562 7072 6f63 6573 732e       subprocess.
-00005510: 6361 6c6c 2863 6f6d 6d61 6e64 2c20 7368  call(command, sh
-00005520: 656c 6c3d 5472 7565 2c20 7374 646f 7574  ell=True, stdout
-00005530: 3d73 7562 7072 6f63 6573 732e 5049 5045  =subprocess.PIPE
-00005540: 290a 2020 2020 2020 2020 7669 6465 6f5f  ).        video_
-00005550: 7469 6d65 722e 7374 6f70 5f74 696d 6572  timer.stop_timer
-00005560: 2829 0a20 2020 2020 2020 2070 7269 6e74  ().        print
-00005570: 280a 2020 2020 2020 2020 2020 2020 6622  (.            f"
-00005580: 5669 6465 6f20 7b73 6176 655f 6e61 6d65  Video {save_name
-00005590: 7d20 636f 6d70 6c65 7465 2c20 2865 6c61  } complete, (ela
-000055a0: 7073 6564 2074 696d 653a 207b 7669 6465  psed time: {vide
-000055b0: 6f5f 7469 6d65 722e 656c 6170 7365 645f  o_timer.elapsed_
-000055c0: 7469 6d65 5f73 7472 7d73 2922 0a20 2020  time_str}s)".   
-000055d0: 2020 2020 2029 0a20 2020 2074 696d 6572       ).    timer
-000055e0: 2e73 746f 705f 7469 6d65 7228 290a 2020  .stop_timer().  
-000055f0: 2020 7374 646f 7574 5f73 7563 6365 7373    stdout_success
-00005600: 280a 2020 2020 2020 2020 6d73 673d 6622  (.        msg=f"
-00005610: 7b6c 656e 286c 6973 7428 7669 6465 6f5f  {len(list(video_
-00005620: 7061 7468 732e 6b65 7973 2829 2929 7d20  paths.keys()))} 
-00005630: 7669 6465 6f28 7329 2063 6f6e 7665 7274  video(s) convert
-00005640: 6564 2074 6f20 6772 6573 7973 6361 6c65  ed to gresyscale
-00005650: 2120 5361 7665 6420 696e 207b 6469 7265  ! Saved in {dire
-00005660: 6374 6f72 797d 2077 6974 6820 275f 6772  ctory} with '_gr
-00005670: 6579 7363 616c 6527 2073 7566 6669 7822  eyscale' suffix"
-00005680: 2c0a 2020 2020 2020 2020 656c 6170 7365  ,.        elapse
-00005690: 645f 7469 6d65 3d74 696d 6572 2e65 6c61  d_time=timer.ela
-000056a0: 7073 6564 5f74 696d 655f 7374 722c 0a20  psed_time_str,. 
-000056b0: 2020 2020 2020 2073 6f75 7263 653d 6261         source=ba
-000056c0: 7463 685f 7669 6465 6f5f 746f 5f67 7265  tch_video_to_gre
-000056d0: 7973 6361 6c65 2e5f 5f6e 616d 655f 5f2c  yscale.__name__,
-000056e0: 0a20 2020 2029 0a0a 0a64 6566 2073 7570  .    )...def sup
-000056f0: 6572 696d 706f 7365 5f66 7261 6d65 5f63  erimpose_frame_c
-00005700: 6f75 6e74 280a 2020 2020 6669 6c65 5f70  ount(.    file_p
-00005710: 6174 683a 2055 6e69 6f6e 5b73 7472 2c20  ath: Union[str, 
-00005720: 6f73 2e50 6174 684c 696b 655d 2c20 6770  os.PathLike], gp
-00005730: 753a 204f 7074 696f 6e61 6c5b 626f 6f6c  u: Optional[bool
-00005740: 5d20 3d20 4661 6c73 650a 2920 2d3e 204e  ] = False.) -> N
-00005750: 6f6e 653a 0a20 2020 2022 2222 0a20 2020  one:.    """.   
-00005760: 2053 7570 6572 696d 706f 7365 2066 7261   Superimpose fra
-00005770: 6d65 2063 6f75 6e74 206f 6e20 6120 7669  me count on a vi
-00005780: 6465 6f20 6669 6c65 2e20 5468 6520 7265  deo file. The re
-00005790: 7375 6c74 2069 7320 7374 6f72 6564 2069  sult is stored i
-000057a0: 6e20 7468 6520 7361 6d65 2064 6972 6563  n the same direc
-000057b0: 746f 7279 2061 7320 7468 650a 2020 2020  tory as the.    
-000057c0: 696e 7075 7420 6669 6c65 2077 6974 6820  input file with 
-000057d0: 7468 6520 6060 5f66 7261 6d65 5f6e 6f2e  the ``_frame_no.
-000057e0: 6d70 3460 6020 7375 6666 6978 2e0a 0a20  mp4`` suffix... 
-000057f0: 2020 203a 7061 7261 6d65 7465 7220 556e     :parameter Un
-00005800: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
-00005810: 4c69 6b65 5d20 6669 6c65 5f70 6174 683a  Like] file_path:
-00005820: 2050 6174 6820 746f 2076 6964 656f 2066   Path to video f
-00005830: 696c 652e 0a20 2020 203a 7061 7261 6d65  ile..    :parame
-00005840: 7465 7220 4f70 7469 6f6e 616c 5b62 6f6f  ter Optional[boo
-00005850: 6c5d 2067 7075 3a20 4966 2054 7275 652c  l] gpu: If True,
-00005860: 2075 7365 204e 5649 4445 4120 4750 5520   use NVIDEA GPU 
-00005870: 636f 6465 6373 2e20 4465 6661 756c 7420  codecs. Default 
-00005880: 4661 6c73 652e 0a0a 2020 2020 3a65 7861  False...    :exa
-00005890: 6d70 6c65 3a0a 2020 2020 3e3e 3e20 5f20  mple:.    >>> _ 
-000058a0: 3d20 7375 7065 7269 6d70 6f73 655f 6672  = superimpose_fr
-000058b0: 616d 655f 636f 756e 7428 6669 6c65 5f70  ame_count(file_p
-000058c0: 6174 683d 2770 726f 6a65 6374 5f66 6f6c  ath='project_fol
-000058d0: 6465 722f 7669 6465 6f73 2f56 6964 656f  der/videos/Video
-000058e0: 5f31 2e61 7669 2729 0a20 2020 2022 2222  _1.avi').    """
-000058f0: 0a20 2020 2063 6865 636b 5f66 666d 7065  .    check_ffmpe
-00005900: 675f 6176 6169 6c61 626c 6528 7261 6973  g_available(rais
-00005910: 655f 6572 726f 723d 5472 7565 290a 2020  e_error=True).  
-00005920: 2020 7369 6d62 615f 6377 203d 206f 732e    simba_cw = os.
-00005930: 7061 7468 2e64 6972 6e61 6d65 2873 696d  path.dirname(sim
-00005940: 6261 2e5f 5f66 696c 655f 5f29 0a20 2020  ba.__file__).   
-00005950: 2073 696d 6261 5f66 6f6e 745f 7061 7468   simba_font_path
-00005960: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-00005970: 7369 6d62 615f 6377 2c20 2261 7373 6574  simba_cw, "asset
-00005980: 7322 2c20 2255 6275 6e74 754d 6f6e 6f2d  s", "UbuntuMono-
-00005990: 5265 6775 6c61 722e 7474 6622 290a 2020  Regular.ttf").  
-000059a0: 2020 7469 6d65 7220 3d20 5369 6d62 6154    timer = SimbaT
-000059b0: 696d 6572 2873 7461 7274 3d54 7275 6529  imer(start=True)
-000059c0: 0a20 2020 2069 6620 6e6f 7420 6f73 2e70  .    if not os.p
-000059d0: 6174 682e 6973 6669 6c65 2873 696d 6261  ath.isfile(simba
-000059e0: 5f66 6f6e 745f 7061 7468 293a 0a20 2020  _font_path):.   
-000059f0: 2020 2020 2069 6620 706c 6174 666f 726d       if platform
-00005a00: 2e73 7973 7465 6d28 2920 3d3d 204f 532e  .system() == OS.
-00005a10: 5749 4e44 4f57 532e 7661 6c75 653a 0a20  WINDOWS.value:. 
-00005a20: 2020 2020 2020 2020 2020 2073 696d 6261             simba
-00005a30: 5f66 6f6e 745f 7061 7468 203d 2022 433a  _font_path = "C:
-00005a40: 2f57 696e 646f 7773 2f66 6f6e 7473 2f61  /Windows/fonts/a
-00005a50: 7269 616c 2e74 7466 220a 2020 2020 2020  rial.ttf".      
-00005a60: 2020 2020 2020 6966 206e 6f74 206f 732e        if not os.
-00005a70: 7061 7468 2e69 7366 696c 6528 7369 6d62  path.isfile(simb
-00005a80: 615f 666f 6e74 5f70 6174 6829 3a0a 2020  a_font_path):.  
-00005a90: 2020 2020 2020 2020 2020 2020 2020 7369                si
-00005aa0: 6d62 615f 666f 6e74 5f70 6174 6820 3d20  mba_font_path = 
-00005ab0: 6f73 2e6c 6973 7464 6972 2872 2243 3a2f  os.listdir(r"C:/
-00005ac0: 5769 6e64 6f77 732f 666f 6e74 7322 295b  Windows/fonts")[
-00005ad0: 305d 0a20 2020 2020 2020 2020 2020 2073  0].            s
-00005ae0: 696d 6261 5f66 6f6e 745f 7061 7468 203d  imba_font_path =
-00005af0: 2073 696d 6261 5f66 6f6e 745f 7061 7468   simba_font_path
-00005b00: 5b32 3a5d 2e72 6570 6c61 6365 2822 5c5c  [2:].replace("\\
-00005b10: 222c 2022 2f22 290a 2020 2020 2020 2020  ", "/").        
-00005b20: 656c 6966 2028 706c 6174 666f 726d 2e73  elif (platform.s
-00005b30: 7973 7465 6d28 2920 3d3d 204f 532e 4d41  ystem() == OS.MA
-00005b40: 432e 7661 6c75 6529 206f 7220 280a 2020  C.value) or (.  
-00005b50: 2020 2020 2020 2020 2020 706c 6174 666f            platfo
-00005b60: 726d 2e73 7973 7465 6d28 2920 3d3d 204f  rm.system() == O
-00005b70: 532e 4c49 4e55 582e 7661 6c75 650a 2020  S.LINUX.value.  
-00005b80: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
-00005b90: 2020 2020 2073 696d 6261 5f66 6f6e 745f       simba_font_
-00005ba0: 7061 7468 203d 2022 4172 6961 6c2e 7474  path = "Arial.tt
-00005bb0: 6622 0a20 2020 2065 6c73 653a 0a20 2020  f".    else:.   
-00005bc0: 2020 2020 2069 6620 706c 6174 666f 726d       if platform
-00005bd0: 2e73 7973 7465 6d28 2920 3d3d 204f 532e  .system() == OS.
-00005be0: 5749 4e44 4f57 532e 7661 6c75 653a 0a20  WINDOWS.value:. 
-00005bf0: 2020 2020 2020 2020 2020 2073 696d 6261             simba
-00005c00: 5f66 6f6e 745f 7061 7468 203d 2073 7472  _font_path = str
-00005c10: 2873 696d 6261 5f66 6f6e 745f 7061 7468  (simba_font_path
-00005c20: 5b32 3a5d 2e72 6570 6c61 6365 2822 5c5c  [2:].replace("\\
-00005c30: 222c 2022 2f22 2929 0a20 2020 2063 6865  ", "/")).    che
-00005c40: 636b 5f66 696c 655f 6578 6973 745f 616e  ck_file_exist_an
-00005c50: 645f 7265 6164 6162 6c65 2866 696c 655f  d_readable(file_
-00005c60: 7061 7468 3d66 696c 655f 7061 7468 290a  path=file_path).
-00005c70: 2020 2020 6469 722c 2066 696c 655f 6e61      dir, file_na
-00005c80: 6d65 2c20 6578 7420 3d20 6765 745f 666e  me, ext = get_fn
-00005c90: 5f65 7874 2866 696c 6570 6174 683d 6669  _ext(filepath=fi
-00005ca0: 6c65 5f70 6174 6829 0a20 2020 2073 6176  le_path).    sav
-00005cb0: 655f 6e61 6d65 203d 206f 732e 7061 7468  e_name = os.path
-00005cc0: 2e6a 6f69 6e28 6469 722c 2066 696c 655f  .join(dir, file_
-00005cd0: 6e61 6d65 202b 2022 5f66 7261 6d65 5f6e  name + "_frame_n
-00005ce0: 6f2e 6d70 3422 290a 2020 2020 7072 696e  o.mp4").    prin
-00005cf0: 7428 6622 5375 7065 7269 6d70 6f73 696e  t(f"Superimposin
-00005d00: 6720 6672 616d 6520 6e75 6d62 6572 7320  g frame numbers 
-00005d10: 7573 696e 6720 666f 6e74 2070 6174 6820  using font path 
-00005d20: 7b73 696d 6261 5f66 6f6e 745f 7061 7468  {simba_font_path
-00005d30: 7d2e 2e2e 2e2e 2e20 2229 0a20 2020 2074  }...... ").    t
-00005d40: 7279 3a0a 2020 2020 2020 2020 6966 2067  ry:.        if g
-00005d50: 7075 3a0a 2020 2020 2020 2020 2020 2020  pu:.            
-00005d60: 636f 6d6d 616e 6420 3d20 6627 6666 6d70  command = f'ffmp
-00005d70: 6567 202d 6877 6163 6365 6c20 6175 746f  eg -hwaccel auto
-00005d80: 202d 633a 7620 6832 3634 5f63 7576 6964   -c:v h264_cuvid
-00005d90: 202d 6920 227b 6669 6c65 5f70 6174 687d   -i "{file_path}
-00005da0: 2220 2d76 6620 2264 7261 7774 6578 743d  " -vf "drawtext=
-00005db0: 666f 6e74 6669 6c65 3d7b 7369 6d62 615f  fontfile={simba_
-00005dc0: 666f 6e74 5f70 6174 687d 3a74 6578 743d  font_path}:text=
-00005dd0: 257b 7b6e 7d7d 3a78 3d28 772d 7477 292f  %{{n}}:x=(w-tw)/
-00005de0: 323a 793d 682d 7468 2d31 303a 666f 6e74  2:y=h-th-10:font
-00005df0: 636f 6c6f 723d 7768 6974 653a 626f 783d  color=white:box=
-00005e00: 313a 626f 7863 6f6c 6f72 3d77 6869 7465  1:boxcolor=white
-00005e10: 4030 2e35 2220 2d63 3a76 2068 3236 345f  @0.5" -c:v h264_
-00005e20: 6e76 656e 6320 2d63 3a61 2063 6f70 7920  nvenc -c:a copy 
-00005e30: 227b 7361 7665 5f6e 616d 657d 2220 2d79  "{save_name}" -y
-00005e40: 270a 2020 2020 2020 2020 656c 7365 3a0a  '.        else:.
-00005e50: 2020 2020 2020 2020 2020 2020 636f 6d6d              comm
-00005e60: 616e 6420 3d20 6627 6666 6d70 6567 202d  and = f'ffmpeg -
-00005e70: 7920 2d69 2022 7b66 696c 655f 7061 7468  y -i "{file_path
-00005e80: 7d22 202d 7666 2022 6472 6177 7465 7874  }" -vf "drawtext
-00005e90: 3d66 6f6e 7466 696c 653d 7b73 696d 6261  =fontfile={simba
-00005ea0: 5f66 6f6e 745f 7061 7468 7d3a 2074 6578  _font_path}: tex
-00005eb0: 743d 5c27 257b 7b66 7261 6d65 5f6e 756d  t=\'%{{frame_num
-00005ec0: 7d7d 5c27 3a20 7374 6172 745f 6e75 6d62  }}\': start_numb
-00005ed0: 6572 3d30 3a20 783d 2877 2d74 7729 2f32  er=0: x=(w-tw)/2
-00005ee0: 3a20 793d 682d 2832 2a6c 6829 3a20 666f  : y=h-(2*lh): fo
-00005ef0: 6e74 636f 6c6f 723d 626c 6163 6b3a 2066  ntcolor=black: f
-00005f00: 6f6e 7473 697a 653d 3230 3a20 626f 783d  ontsize=20: box=
-00005f10: 313a 2062 6f78 636f 6c6f 723d 7768 6974  1: boxcolor=whit
-00005f20: 653a 2062 6f78 626f 7264 6572 773d 3522  e: boxborderw=5"
-00005f30: 202d 633a 6120 636f 7079 2022 7b73 6176   -c:a copy "{sav
-00005f40: 655f 6e61 6d65 7d22 202d 7927 0a20 2020  e_name}" -y'.   
-00005f50: 2020 2020 2070 7269 6e74 2866 2255 7369       print(f"Usi
+00000740: 652c 0a20 2020 2072 6561 645f 6672 6d5f  e,.    read_frm_
+00000750: 6f66 5f76 6964 656f 290a 6672 6f6d 2073  of_video).from s
+00000760: 696d 6261 2e75 7469 6c73 2e77 6172 6e69  imba.utils.warni
+00000770: 6e67 7320 696d 706f 7274 2028 4669 6c65  ngs import (File
+00000780: 4578 6973 7457 6172 6e69 6e67 2c20 496e  ExistWarning, In
+00000790: 5661 6c69 6455 7365 7249 6e70 7574 5761  ValidUserInputWa
+000007a0: 726e 696e 672c 0a20 2020 2020 2020 2020  rning,.         
+000007b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000007c0: 2020 2020 2020 2020 2053 616d 6549 6e70           SameInp
+000007d0: 7574 416e 644f 7574 7075 7457 6172 6e69  utAndOutputWarni
+000007e0: 6e67 290a 6672 6f6d 2073 696d 6261 2e76  ng).from simba.v
+000007f0: 6964 656f 5f70 726f 6365 7373 6f72 732e  ideo_processors.
+00000800: 6578 7472 6163 745f 6672 616d 6573 2069  extract_frames i
+00000810: 6d70 6f72 7420 7669 6465 6f5f 746f 5f66  mport video_to_f
+00000820: 7261 6d65 730a 6672 6f6d 2073 696d 6261  rames.from simba
+00000830: 2e76 6964 656f 5f70 726f 6365 7373 6f72  .video_processor
+00000840: 732e 726f 695f 7365 6c65 6374 6f72 2069  s.roi_selector i
+00000850: 6d70 6f72 7420 524f 4953 656c 6563 746f  mport ROISelecto
+00000860: 720a 6672 6f6d 2073 696d 6261 2e76 6964  r.from simba.vid
+00000870: 656f 5f70 726f 6365 7373 6f72 732e 726f  eo_processors.ro
+00000880: 695f 7365 6c65 6374 6f72 5f63 6972 636c  i_selector_circl
+00000890: 6520 696d 706f 7274 2052 4f49 5365 6c65  e import ROISele
+000008a0: 6374 6f72 4369 7263 6c65 0a66 726f 6d20  ctorCircle.from 
+000008b0: 7369 6d62 612e 7669 6465 6f5f 7072 6f63  simba.video_proc
+000008c0: 6573 736f 7273 2e72 6f69 5f73 656c 6563  essors.roi_selec
+000008d0: 746f 725f 706f 6c79 676f 6e20 696d 706f  tor_polygon impo
+000008e0: 7274 2052 4f49 5365 6c65 6374 6f72 506f  rt ROISelectorPo
+000008f0: 6c79 676f 6e0a 0a4d 4158 5f46 524d 5f53  lygon..MAX_FRM_S
+00000900: 495a 4520 3d20 3130 3830 2c20 3635 300a  IZE = 1080, 650.
+00000910: 0a0a 6465 6620 6368 616e 6765 5f69 6d67  ..def change_img
+00000920: 5f66 6f72 6d61 7428 0a20 2020 2064 6972  _format(.    dir
+00000930: 6563 746f 7279 3a20 556e 696f 6e5b 7374  ectory: Union[st
+00000940: 722c 206f 732e 5061 7468 4c69 6b65 5d2c  r, os.PathLike],
+00000950: 0a20 2020 2066 696c 655f 7479 7065 5f69  .    file_type_i
+00000960: 6e3a 2073 7472 2c0a 2020 2020 6669 6c65  n: str,.    file
+00000970: 5f74 7970 655f 6f75 743a 2073 7472 2c0a  _type_out: str,.
+00000980: 2020 2020 7665 7262 6f73 653a 204f 7074      verbose: Opt
+00000990: 696f 6e61 6c5b 626f 6f6c 5d20 3d20 4661  ional[bool] = Fa
+000009a0: 6c73 652c 0a29 202d 3e20 4e6f 6e65 3a0a  lse,.) -> None:.
+000009b0: 2020 2020 2222 220a 2020 2020 436f 6e76      """.    Conv
+000009c0: 6572 7420 7468 6520 6669 6c65 2074 7970  ert the file typ
+000009d0: 6520 6f66 2061 6c6c 2069 6d61 6765 2066  e of all image f
+000009e0: 696c 6573 2077 6974 6869 6e20 6120 6469  iles within a di
+000009f0: 7265 6374 6f72 792e 0a0a 2020 2020 3a70  rectory...    :p
+00000a00: 6172 616d 6574 6572 2055 6e69 6f6e 5b73  arameter Union[s
+00000a10: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
+00000a20: 2064 6972 6563 746f 7279 3a20 5061 7468   directory: Path
+00000a30: 2074 6f20 6469 7265 6374 6f72 7920 686f   to directory ho
+00000a40: 6c64 696e 6720 696d 6167 6520 6669 6c65  lding image file
+00000a50: 730a 2020 2020 3a70 6172 616d 6574 6572  s.    :parameter
+00000a60: 2073 7472 2066 696c 655f 7479 7065 5f69   str file_type_i
+00000a70: 6e3a 2049 6e70 7574 2066 696c 6520 7479  n: Input file ty
+00000a80: 7065 2c20 652e 672e 2c20 2762 6d70 2720  pe, e.g., 'bmp' 
+00000a90: 6f72 2027 706e 672e 0a20 2020 203a 7061  or 'png..    :pa
+00000aa0: 7261 6d65 7465 7220 7374 7220 6669 6c65  rameter str file
+00000ab0: 5f74 7970 655f 6f75 743a 204f 7574 7075  _type_out: Outpu
+00000ac0: 7420 6669 6c65 2074 7970 652c 2065 2e67  t file type, e.g
+00000ad0: 2e2c 2027 626d 7027 206f 7220 2770 6e67  ., 'bmp' or 'png
+00000ae0: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
+00000af0: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
+00000b00: 7665 7262 6f73 653a 2049 6620 5472 7565  verbose: If True
+00000b10: 2c20 7072 696e 7473 2070 726f 6772 6573  , prints progres
+00000b20: 732e 2044 6566 6175 6c74 2046 616c 7365  s. Default False
+00000b30: 2e0a 0a20 2020 203a 6578 616d 706c 653a  ...    :example:
+00000b40: 0a20 2020 203e 3e3e 205f 203d 2063 6861  .    >>> _ = cha
+00000b50: 6e67 655f 696d 675f 666f 726d 6174 2864  nge_img_format(d
+00000b60: 6972 6563 746f 7279 3d27 2f55 7365 7273  irectory='/Users
+00000b70: 2f73 696d 6f6e 2f44 6573 6b74 6f70 2f65  /simon/Desktop/e
+00000b80: 6e76 732f 7369 6d62 612f 7472 6f75 626c  nvs/simba/troubl
+00000b90: 6573 686f 6f74 696e 672f 7477 6f5f 626c  eshooting/two_bl
+00000ba0: 6163 6b5f 616e 696d 616c 735f 3134 6270  ack_animals_14bp
+00000bb0: 2f74 6573 745f 696d 6727 2c20 6669 6c65  /test_img', file
+00000bc0: 5f74 7970 655f 696e 3d27 706e 6727 2c20  _type_in='png', 
+00000bd0: 6669 6c65 5f74 7970 655f 6f75 743d 2762  file_type_out='b
+00000be0: 6d70 272c 2076 6572 626f 7365 3d54 7275  mp', verbose=Tru
+00000bf0: 6529 0a0a 2020 2020 2222 220a 2020 2020  e)..    """.    
+00000c00: 6368 6563 6b5f 6966 5f64 6972 5f65 7869  check_if_dir_exi
+00000c10: 7374 7328 696e 5f64 6972 3d64 6972 6563  sts(in_dir=direc
+00000c20: 746f 7279 2c20 736f 7572 6365 3d63 6861  tory, source=cha
+00000c30: 6e67 655f 696d 675f 666f 726d 6174 2e5f  nge_img_format._
+00000c40: 5f6e 616d 655f 5f29 0a20 2020 2066 696c  _name__).    fil
+00000c50: 6573 5f66 6f75 6e64 203d 2067 6c6f 622e  es_found = glob.
+00000c60: 676c 6f62 2864 6972 6563 746f 7279 202b  glob(directory +
+00000c70: 2066 222f 2a2e 7b66 696c 655f 7479 7065   f"/*.{file_type
+00000c80: 5f69 6e7d 2229 0a20 2020 2069 6620 6c65  _in}").    if le
+00000c90: 6e28 6669 6c65 735f 666f 756e 6429 203d  n(files_found) =
+00000ca0: 3d20 303a 0a20 2020 2020 2020 2072 6169  = 0:.        rai
+00000cb0: 7365 204e 6f46 696c 6573 466f 756e 6445  se NoFilesFoundE
+00000cc0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+00000cd0: 2020 6622 5349 4d42 4120 4552 524f 523a    f"SIMBA ERROR:
+00000ce0: 204e 6f20 7b66 696c 655f 7479 7065 5f69   No {file_type_i
+00000cf0: 6e7d 2066 696c 6573 2028 7769 7468 202e  n} files (with .
+00000d00: 7b66 696c 655f 7479 7065 5f69 6e7d 2066  {file_type_in} f
+00000d10: 696c 6520 6578 7465 6e73 696f 6e29 2066  ile extension) f
+00000d20: 6f75 6e64 2069 6e20 7468 6520 7b64 6972  ound in the {dir
+00000d30: 6563 746f 7279 7d20 6469 7265 6374 6f72  ectory} director
+00000d40: 7922 2c0a 2020 2020 2020 2020 2020 2020  y",.            
+00000d50: 736f 7572 6365 3d63 6861 6e67 655f 696d  source=change_im
+00000d60: 675f 666f 726d 6174 2e5f 5f6e 616d 655f  g_format.__name_
+00000d70: 5f2c 0a20 2020 2020 2020 2029 0a20 2020  _,.        ).   
+00000d80: 2070 7269 6e74 2866 227b 6c65 6e28 6669   print(f"{len(fi
+00000d90: 6c65 735f 666f 756e 6429 7d20 696d 6167  les_found)} imag
+00000da0: 6520 6669 6c65 7320 666f 756e 6420 696e  e files found in
+00000db0: 207b 6469 7265 6374 6f72 797d 2e2e 2e22   {directory}..."
+00000dc0: 290a 2020 2020 666f 7220 6669 6c65 5f63  ).    for file_c
+00000dd0: 6e74 2c20 6669 6c65 5f70 6174 6820 696e  nt, file_path in
+00000de0: 2065 6e75 6d65 7261 7465 2866 696c 6573   enumerate(files
+00000df0: 5f66 6f75 6e64 293a 0a20 2020 2020 2020  _found):.       
+00000e00: 2069 6620 7665 7262 6f73 653a 0a20 2020   if verbose:.   
+00000e10: 2020 2020 2020 2020 2070 7269 6e74 2866           print(f
+00000e20: 2243 6f6e 7665 7274 696e 6720 6669 6c65  "Converting file
+00000e30: 207b 6669 6c65 5f63 6e74 2b31 7d2f 7b6c   {file_cnt+1}/{l
+00000e40: 656e 2866 696c 6573 5f66 6f75 6e64 297d  en(files_found)}
+00000e50: 202e 2e2e 2229 0a20 2020 2020 2020 2069   ...").        i
+00000e60: 6d20 3d20 496d 6167 652e 6f70 656e 2866  m = Image.open(f
+00000e70: 696c 655f 7061 7468 290a 2020 2020 2020  ile_path).      
+00000e80: 2020 7361 7665 5f6e 616d 6520 3d20 6669    save_name = fi
+00000e90: 6c65 5f70 6174 682e 7265 706c 6163 6528  le_path.replace(
+00000ea0: 222e 2220 2b20 7374 7228 6669 6c65 5f74  "." + str(file_t
+00000eb0: 7970 655f 696e 292c 2022 2e22 202b 2073  ype_in), "." + s
+00000ec0: 7472 2866 696c 655f 7479 7065 5f6f 7574  tr(file_type_out
+00000ed0: 2929 0a20 2020 2020 2020 2069 6d2e 7361  )).        im.sa
+00000ee0: 7665 2873 6176 655f 6e61 6d65 290a 2020  ve(save_name).  
+00000ef0: 2020 2020 2020 6f73 2e72 656d 6f76 6528        os.remove(
+00000f00: 6669 6c65 5f70 6174 6829 0a20 2020 2073  file_path).    s
+00000f10: 7464 6f75 745f 7375 6363 6573 7328 0a20  tdout_success(. 
+00000f20: 2020 2020 2020 206d 7367 3d66 2253 494d         msg=f"SIM
+00000f30: 4241 2043 4f4d 504c 4554 453a 2046 696c  BA COMPLETE: Fil
+00000f40: 6573 2069 6e20 7b64 6972 6563 746f 7279  es in {directory
+00000f50: 7d20 6469 7265 6374 6f72 7920 636f 6e76  } directory conv
+00000f60: 6572 7465 6420 746f 207b 6669 6c65 5f74  erted to {file_t
+00000f70: 7970 655f 6f75 747d 222c 0a20 2020 2020  ype_out}",.     
+00000f80: 2020 2073 6f75 7263 653d 6368 616e 6765     source=change
+00000f90: 5f69 6d67 5f66 6f72 6d61 742e 5f5f 6e61  _img_format.__na
+00000fa0: 6d65 5f5f 2c0a 2020 2020 290a 0a0a 6465  me__,.    )...de
+00000fb0: 6620 636c 6168 655f 656e 6861 6e63 655f  f clahe_enhance_
+00000fc0: 7669 6465 6f28 0a20 2020 2066 696c 655f  video(.    file_
+00000fd0: 7061 7468 3a20 556e 696f 6e5b 7374 722c  path: Union[str,
+00000fe0: 206f 732e 5061 7468 4c69 6b65 5d2c 0a20   os.PathLike],. 
+00000ff0: 2020 2063 6c69 705f 6c69 6d69 743a 204f     clip_limit: O
+00001000: 7074 696f 6e61 6c5b 696e 745d 203d 2032  ptional[int] = 2
+00001010: 2c0a 2020 2020 7469 6c65 5f67 7269 645f  ,.    tile_grid_
+00001020: 7369 7a65 3a20 4f70 7469 6f6e 616c 5b54  size: Optional[T
+00001030: 7570 6c65 5b69 6e74 5d5d 203d 2028 3136  uple[int]] = (16
+00001040: 2c20 3136 292c 0a20 2020 206f 7574 5f70  , 16),.    out_p
+00001050: 6174 683a 204f 7074 696f 6e61 6c5b 556e  ath: Optional[Un
+00001060: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
+00001070: 4c69 6b65 5d5d 203d 204e 6f6e 6529 202d  Like]] = None) -
+00001080: 3e20 4e6f 6e65 3a0a 0a20 2020 2022 2222  > None:..    """
+00001090: 0a20 2020 2043 6f6e 7665 7274 2061 2073  .    Convert a s
+000010a0: 696e 676c 6520 7669 6465 6f20 6669 6c65  ingle video file
+000010b0: 2074 6f20 636c 6168 652d 656e 6861 6e63   to clahe-enhanc
+000010c0: 6564 2067 7265 7973 6361 6c65 202e 6176  ed greyscale .av
+000010d0: 6920 6669 6c65 2e20 5468 6520 7265 7375  i file. The resu
+000010e0: 6c74 2069 7320 7361 7665 6420 7769 7468  lt is saved with
+000010f0: 2070 7265 6669 780a 2020 2020 6060 434c   prefix.    ``CL
+00001100: 4148 455f 6060 2069 6e20 7468 6520 7361  AHE_`` in the sa
+00001110: 6d65 2064 6972 6563 746f 7279 2061 7320  me directory as 
+00001120: 696e 2074 6865 2069 6e70 7574 2066 696c  in the input fil
+00001130: 6520 6966 206f 7574 5f70 6174 6820 6973  e if out_path is
+00001140: 206e 6f74 2070 6173 7365 642e 2045 6c73   not passed. Els
+00001150: 6520 7361 7665 6420 6174 2074 6865 206f  e saved at the o
+00001160: 7574 5f70 6174 682e 0a0a 2020 2020 2e2e  ut_path...    ..
+00001170: 2069 6d61 6765 3a3a 205f 7374 6174 6963   image:: _static
+00001180: 2f69 6d67 2f63 6c61 6865 5f65 6e68 616e  /img/clahe_enhan
+00001190: 6365 5f76 6964 656f 2e67 6966 0a20 2020  ce_video.gif.   
+000011a0: 2020 2020 3a77 6964 7468 3a20 3830 300a      :width: 800.
+000011b0: 2020 2020 2020 203a 616c 6967 6e3a 2063         :align: c
+000011c0: 656e 7465 720a 0a20 2020 203a 7061 7261  enter..    :para
+000011d0: 6d65 7465 7220 556e 696f 6e5b 7374 722c  meter Union[str,
+000011e0: 206f 732e 5061 7468 4c69 6b65 5d20 6669   os.PathLike] fi
+000011f0: 6c65 5f70 6174 683a 2050 6174 6820 746f  le_path: Path to
+00001200: 2076 6964 656f 2066 696c 652e 0a20 2020   video file..   
+00001210: 203a 7061 7261 6d65 7465 7220 4f70 7469   :parameter Opti
+00001220: 6f6e 616c 5b69 6e74 5d20 636c 6970 5f6c  onal[int] clip_l
+00001230: 696d 6974 3a20 434c 4148 4520 616d 706c  imit: CLAHE ampl
+00001240: 6966 6963 6174 696f 6e20 6c69 6d69 742e  ification limit.
+00001250: 2049 6e63 6372 6561 7365 6420 636c 6970   Inccreased clip
+00001260: 206c 696d 6974 2072 6564 7563 6520 6e6f   limit reduce no
+00001270: 6973 6520 696e 206f 7574 7075 742e 2044  ise in output. D
+00001280: 6566 6175 6c74 3a20 322e 0a20 2020 203a  efault: 2..    :
+00001290: 7061 7261 6d65 7465 7220 4f70 7469 6f6e  parameter Option
+000012a0: 616c 5b54 7570 6c65 5b69 6e74 5d5d 2074  al[Tuple[int]] t
+000012b0: 696c 655f 6772 6964 5f73 697a 653a 2054  ile_grid_size: T
+000012c0: 6865 2068 6973 746f 6772 616d 206b 6572  he histogram ker
+000012d0: 6e65 6c20 7369 7a65 2e0a 0a20 2020 203a  nel size...    :
+000012e0: 6578 616d 706c 653a 0a20 2020 203e 3e3e  example:.    >>>
+000012f0: 205f 203d 2063 6c61 6865 5f65 6e68 616e   _ = clahe_enhan
+00001300: 6365 5f76 6964 656f 2866 696c 655f 7061  ce_video(file_pa
+00001310: 7468 3a20 2770 726f 6a65 6374 5f66 6f6c  th: 'project_fol
+00001320: 6465 722f 7669 6465 6f73 2f56 6964 656f  der/videos/Video
+00001330: 5f31 2e6d 7034 2729 0a20 2020 2022 2222  _1.mp4').    """
+00001340: 0a0a 2020 2020 6368 6563 6b5f 6669 6c65  ..    check_file
+00001350: 5f65 7869 7374 5f61 6e64 5f72 6561 6461  _exist_and_reada
+00001360: 626c 6528 6669 6c65 5f70 6174 683d 6669  ble(file_path=fi
+00001370: 6c65 5f70 6174 6829 0a20 2020 2063 6865  le_path).    che
+00001380: 636b 5f69 6e74 286e 616d 653d 6622 7b63  ck_int(name=f"{c
+00001390: 6c61 6865 5f65 6e68 616e 6365 5f76 6964  lahe_enhance_vid
+000013a0: 656f 2e5f 5f6e 616d 655f 5f7d 2063 6c69  eo.__name__} cli
+000013b0: 705f 6c69 6d69 7422 2c20 7661 6c75 653d  p_limit", value=
+000013c0: 636c 6970 5f6c 696d 6974 2c20 6d69 6e5f  clip_limit, min_
+000013d0: 7661 6c75 653d 3029 0a20 2020 2076 6964  value=0).    vid
+000013e0: 656f 5f6d 6574 615f 6461 7461 203d 2067  eo_meta_data = g
+000013f0: 6574 5f76 6964 656f 5f6d 6574 615f 6461  et_video_meta_da
+00001400: 7461 2866 696c 655f 7061 7468 290a 2020  ta(file_path).  
+00001410: 2020 6368 6563 6b5f 7661 6c69 645f 7475    check_valid_tu
+00001420: 706c 6528 0a20 2020 2020 2020 2078 3d74  ple(.        x=t
+00001430: 696c 655f 6772 6964 5f73 697a 652c 0a20  ile_grid_size,. 
+00001440: 2020 2020 2020 2073 6f75 7263 653d 6627         source=f'
+00001450: 7b63 6c61 6865 5f65 6e68 616e 6365 5f76  {clahe_enhance_v
+00001460: 6964 656f 2e5f 5f6e 616d 655f 5f7d 2074  ideo.__name__} t
+00001470: 696c 655f 6772 6964 5f73 697a 6527 2c0a  ile_grid_size',.
+00001480: 2020 2020 2020 2020 6163 6365 7074 6564          accepted
+00001490: 5f6c 656e 6774 6873 3d28 322c 292c 0a20  _lengths=(2,),. 
+000014a0: 2020 2020 2020 2076 616c 6964 5f64 7479         valid_dty
+000014b0: 7065 733d 2869 6e74 2c29 2c0a 2020 2020  pes=(int,),.    
+000014c0: 290a 2020 2020 6966 2028 7469 6c65 5f67  ).    if (tile_g
+000014d0: 7269 645f 7369 7a65 5b30 5d20 3e20 7669  rid_size[0] > vi
+000014e0: 6465 6f5f 6d65 7461 5f64 6174 615b 2268  deo_meta_data["h
+000014f0: 6569 6768 7422 5d29 206f 7220 280a 2020  eight"]) or (.  
+00001500: 2020 2020 2020 2874 696c 655f 6772 6964        (tile_grid
+00001510: 5f73 697a 655b 315d 203e 2076 6964 656f  _size[1] > video
+00001520: 5f6d 6574 615f 6461 7461 5b22 7769 6474  _meta_data["widt
+00001530: 6822 5d29 0a20 2020 2029 3a0a 2020 2020  h"]).    ):.    
+00001540: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
+00001550: 6449 6e70 7574 4572 726f 7228 0a20 2020  dInputError(.   
+00001560: 2020 2020 2020 2020 206d 7367 3d66 2754           msg=f'T
+00001570: 6865 2074 696c 6520 6772 6964 2073 697a  he tile grid siz
+00001580: 6520 287b 7469 6c65 5f67 7269 645f 7369  e ({tile_grid_si
+00001590: 7a65 7d29 2069 7320 6c61 7267 6572 2074  ze}) is larger t
+000015a0: 6861 6e20 7468 6520 7669 6465 6f20 7369  han the video si
+000015b0: 7a65 2028 7b76 6964 656f 5f6d 6574 615f  ze ({video_meta_
+000015c0: 6461 7461 5b22 7265 736f 6c75 7469 6f6e  data["resolution
+000015d0: 5f73 7472 225d 7d29 272c 0a20 2020 2020  _str"]})',.     
+000015e0: 2020 2020 2020 2073 6f75 7263 653d 636c         source=cl
+000015f0: 6168 655f 656e 6861 6e63 655f 7669 6465  ahe_enhance_vide
+00001600: 6f2e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  o.__name__,.    
+00001610: 2020 2020 290a 2020 2020 6469 722c 2066      ).    dir, f
+00001620: 696c 655f 6e61 6d65 2c20 6669 6c65 5f65  ile_name, file_e
+00001630: 7874 203d 2067 6574 5f66 6e5f 6578 7428  xt = get_fn_ext(
+00001640: 6669 6c65 7061 7468 3d66 696c 655f 7061  filepath=file_pa
+00001650: 7468 290a 2020 2020 6966 206f 7574 5f70  th).    if out_p
+00001660: 6174 6820 6973 204e 6f6e 653a 0a20 2020  ath is None:.   
+00001670: 2020 2020 2073 6176 655f 7061 7468 203d       save_path =
+00001680: 206f 732e 7061 7468 2e6a 6f69 6e28 6469   os.path.join(di
+00001690: 722c 2066 2243 4c41 4845 5f7b 6669 6c65  r, f"CLAHE_{file
+000016a0: 5f6e 616d 657d 2e61 7669 2229 0a20 2020  _name}.avi").   
+000016b0: 2065 6c73 653a 0a20 2020 2020 2020 2063   else:.        c
+000016c0: 6865 636b 5f69 665f 6469 725f 6578 6973  heck_if_dir_exis
+000016d0: 7473 2869 6e5f 6469 723d 6f73 2e70 6174  ts(in_dir=os.pat
+000016e0: 682e 6469 726e 616d 6528 6f75 745f 7061  h.dirname(out_pa
+000016f0: 7468 292c 2073 6f75 7263 653d 6627 7b63  th), source=f'{c
+00001700: 6c61 6865 5f65 6e68 616e 6365 5f76 6964  lahe_enhance_vid
+00001710: 656f 2e5f 5f6e 616d 655f 5f7d 206f 7574  eo.__name__} out
+00001720: 5f70 6174 6827 290a 2020 2020 2020 2020  _path').        
+00001730: 7361 7665 5f70 6174 6820 3d20 6f75 745f  save_path = out_
+00001740: 7061 7468 0a20 2020 2066 6f75 7263 6320  path.    fourcc 
+00001750: 3d20 6376 322e 5669 6465 6f57 7269 7465  = cv2.VideoWrite
+00001760: 725f 666f 7572 6363 282a 466f 726d 6174  r_fourcc(*Format
+00001770: 732e 4156 495f 434f 4445 432e 7661 6c75  s.AVI_CODEC.valu
+00001780: 6529 0a20 2020 2070 7269 6e74 2866 2241  e).    print(f"A
+00001790: 7070 6c79 696e 6720 434c 4148 4520 6f6e  pplying CLAHE on
+000017a0: 2076 6964 656f 207b 6669 6c65 5f6e 616d   video {file_nam
+000017b0: 657d 2c20 7468 6973 206d 6967 6874 2074  e}, this might t
+000017c0: 616b 6520 6177 6869 6c65 2e2e 2e22 290a  ake awhile...").
+000017d0: 2020 2020 6361 7020 3d20 6376 322e 5669      cap = cv2.Vi
+000017e0: 6465 6f43 6170 7475 7265 2866 696c 655f  deoCapture(file_
+000017f0: 7061 7468 290a 2020 2020 7772 6974 6572  path).    writer
+00001800: 203d 2063 7632 2e56 6964 656f 5772 6974   = cv2.VideoWrit
+00001810: 6572 280a 2020 2020 2020 2020 7361 7665  er(.        save
+00001820: 5f70 6174 682c 0a20 2020 2020 2020 2066  _path,.        f
+00001830: 6f75 7263 632c 0a20 2020 2020 2020 2076  ourcc,.        v
+00001840: 6964 656f 5f6d 6574 615f 6461 7461 5b22  ideo_meta_data["
+00001850: 6670 7322 5d2c 0a20 2020 2020 2020 2028  fps"],.        (
+00001860: 7669 6465 6f5f 6d65 7461 5f64 6174 615b  video_meta_data[
+00001870: 2277 6964 7468 225d 2c20 7669 6465 6f5f  "width"], video_
+00001880: 6d65 7461 5f64 6174 615b 2268 6569 6768  meta_data["heigh
+00001890: 7422 5d29 2c0a 2020 2020 2020 2020 302c  t"]),.        0,
+000018a0: 0a20 2020 2029 0a20 2020 2063 6c61 6865  .    ).    clahe
+000018b0: 5f66 696c 7465 7220 3d20 6376 322e 6372  _filter = cv2.cr
+000018c0: 6561 7465 434c 4148 4528 0a20 2020 2020  eateCLAHE(.     
+000018d0: 2020 2063 6c69 704c 696d 6974 3d69 6e74     clipLimit=int
+000018e0: 2863 6c69 705f 6c69 6d69 7429 2c20 7469  (clip_limit), ti
+000018f0: 6c65 4772 6964 5369 7a65 3d74 696c 655f  leGridSize=tile_
+00001900: 6772 6964 5f73 697a 650a 2020 2020 290a  grid_size.    ).
+00001910: 2020 2020 6672 6d5f 636e 7420 3d20 300a      frm_cnt = 0.
+00001920: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00001930: 2077 6869 6c65 2054 7275 653a 0a20 2020   while True:.   
+00001940: 2020 2020 2020 2020 2072 6574 2c20 696d           ret, im
+00001950: 6720 3d20 6361 702e 7265 6164 2829 0a20  g = cap.read(). 
+00001960: 2020 2020 2020 2020 2020 2069 6620 7265             if re
+00001970: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00001980: 2020 2066 726d 5f63 6e74 202b 3d20 310a     frm_cnt += 1.
+00001990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000019a0: 696d 6720 3d20 6376 322e 6376 7443 6f6c  img = cv2.cvtCol
+000019b0: 6f72 2869 6d67 2c20 6376 322e 434f 4c4f  or(img, cv2.COLO
+000019c0: 525f 4247 5232 4752 4159 290a 2020 2020  R_BGR2GRAY).    
+000019d0: 2020 2020 2020 2020 2020 2020 636c 6168              clah
+000019e0: 655f 6672 6d20 3d20 636c 6168 655f 6669  e_frm = clahe_fi
+000019f0: 6c74 6572 2e61 7070 6c79 2869 6d67 290a  lter.apply(img).
+00001a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001a10: 7772 6974 6572 2e77 7269 7465 2863 6c61  writer.write(cla
+00001a20: 6865 5f66 726d 290a 2020 2020 2020 2020  he_frm).        
+00001a30: 2020 2020 2020 2020 7072 696e 7428 0a20          print(. 
+00001a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001a50: 2020 2066 2243 4c41 4845 2063 6f6e 7665     f"CLAHE conve
+00001a60: 7274 6564 2066 7261 6d65 207b 6672 6d5f  rted frame {frm_
+00001a70: 636e 747d 2f7b 7669 6465 6f5f 6d65 7461  cnt}/{video_meta
+00001a80: 5f64 6174 615b 2766 7261 6d65 5f63 6f75  _data['frame_cou
+00001a90: 6e74 275d 7d20 287b 6669 6c65 5f6e 616d  nt']} ({file_nam
+00001aa0: 657d 292e 2e2e 220a 2020 2020 2020 2020  e})...".        
+00001ab0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00001ac0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00001ad0: 2020 2020 2020 2020 2020 2020 6272 6561              brea
+00001ae0: 6b0a 2020 2020 2020 2020 6361 702e 7265  k.        cap.re
+00001af0: 6c65 6173 6528 290a 2020 2020 2020 2020  lease().        
+00001b00: 7772 6974 6572 2e72 656c 6561 7365 2829  writer.release()
+00001b10: 0a20 2020 2020 2020 2070 7269 6e74 2866  .        print(f
+00001b20: 2243 4c41 4845 2076 6964 656f 2063 7265  "CLAHE video cre
+00001b30: 6174 6564 3a20 7b73 6176 655f 7061 7468  ated: {save_path
+00001b40: 7d2e 2229 0a20 2020 2065 7863 6570 7420  }.").    except 
+00001b50: 4578 6365 7074 696f 6e20 6173 2073 653a  Exception as se:
+00001b60: 0a20 2020 2020 2020 2070 7269 6e74 2873  .        print(s
+00001b70: 652e 6172 6773 290a 2020 2020 2020 2020  e.args).        
+00001b80: 7072 696e 7428 6622 434c 4148 4520 636f  print(f"CLAHE co
+00001b90: 6e76 6572 7369 6f6e 2066 6169 6c65 6420  nversion failed 
+00001ba0: 666f 7220 7669 6465 6f20 7b66 696c 655f  for video {file_
+00001bb0: 6e61 6d65 7d2e 2229 0a20 2020 2020 2020  name}.").       
+00001bc0: 2063 6170 2e72 656c 6561 7365 2829 0a20   cap.release(). 
+00001bd0: 2020 2020 2020 2077 7269 7465 722e 7265         writer.re
+00001be0: 6c65 6173 6528 290a 2020 2020 2020 2020  lease().        
+00001bf0: 7261 6973 6520 496e 7661 6c69 6456 6964  raise InvalidVid
+00001c00: 656f 4669 6c65 4572 726f 7228 0a20 2020  eoFileError(.   
+00001c10: 2020 2020 2020 2020 206d 7367 3d66 2243           msg=f"C
+00001c20: 6f75 6c64 206e 6f74 2063 6f6e 7665 7274  ould not convert
+00001c30: 2066 696c 6520 7b66 696c 655f 7061 7468   file {file_path
+00001c40: 7d20 746f 2043 4c41 4845 2065 6e68 616e  } to CLAHE enhan
+00001c50: 6365 6420 7669 6465 6f22 2c0a 2020 2020  ced video",.    
+00001c60: 2020 2020 2020 2020 736f 7572 6365 3d63          source=c
+00001c70: 6c61 6865 5f65 6e68 616e 6365 5f76 6964  lahe_enhance_vid
+00001c80: 656f 2e5f 5f6e 616d 655f 5f2c 0a20 2020  eo.__name__,.   
+00001c90: 2020 2020 2029 0a0a 0a64 6566 2065 7874       )...def ext
+00001ca0: 7261 6374 5f66 7261 6d65 5f72 616e 6765  ract_frame_range
+00001cb0: 280a 2020 2020 6669 6c65 5f70 6174 683a  (.    file_path:
+00001cc0: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
+00001cd0: 6174 684c 696b 655d 2c20 7374 6172 745f  athLike], start_
+00001ce0: 6672 616d 653a 2069 6e74 2c20 656e 645f  frame: int, end_
+00001cf0: 6672 616d 653a 2069 6e74 0a29 202d 3e20  frame: int.) -> 
+00001d00: 4e6f 6e65 3a0a 2020 2020 2222 220a 2020  None:.    """.  
+00001d10: 2020 4578 7472 6163 7420 6120 7573 6572    Extract a user
+00001d20: 2d64 6566 696e 6564 2072 616e 6765 206f  -defined range o
+00001d30: 6620 6672 616d 6573 2066 726f 6d20 6120  f frames from a 
+00001d40: 7669 6465 6f20 6669 6c65 2074 6f20 6070  video file to `p
+00001d50: 6e67 6020 666f 726d 6174 2e20 496d 6167  ng` format. Imag
+00001d60: 6573 0a20 2020 2061 7265 2073 6176 6564  es.    are saved
+00001d70: 2069 6e20 6120 666f 6c64 6572 2077 6974   in a folder wit
+00001d80: 6820 7468 6520 7375 6666 6978 2060 5f66  h the suffix `_f
+00001d90: 7261 6d65 7360 2077 6974 6869 6e20 7468  rames` within th
+00001da0: 6520 7361 6d65 2064 6972 6563 746f 7279  e same directory
+00001db0: 2061 7320 7468 6520 7669 6465 6f20 6669   as the video fi
+00001dc0: 6c65 2e0a 0a20 2020 203a 7061 7261 6d65  le...    :parame
+00001dd0: 7465 7220 556e 696f 6e5b 7374 722c 206f  ter Union[str, o
+00001de0: 732e 5061 7468 4c69 6b65 5d20 6669 6c65  s.PathLike] file
+00001df0: 5f70 6174 683a 2050 6174 6820 746f 2076  _path: Path to v
+00001e00: 6964 656f 2066 696c 650a 2020 2020 3a70  ideo file.    :p
+00001e10: 6172 616d 6574 6572 2069 6e74 2073 7461  arameter int sta
+00001e20: 7274 5f66 7261 6d65 3a20 4669 7273 7420  rt_frame: First 
+00001e30: 6672 616d 6520 696e 2072 616e 6765 2074  frame in range t
+00001e40: 6f20 6578 7472 6163 740a 2020 2020 3a70  o extract.    :p
+00001e50: 6172 616d 6574 6572 2069 6e74 2065 6e64  arameter int end
+00001e60: 5f66 7261 6d65 3a20 4c61 7374 2066 7261  _frame: Last fra
+00001e70: 6d65 2069 6e20 7261 6e67 6520 746f 2065  me in range to e
+00001e80: 7874 7261 6374 2e0a 0a20 2020 203a 6578  xtract...    :ex
+00001e90: 616d 706c 653a 0a20 2020 203e 3e3e 205f  ample:.    >>> _
+00001ea0: 203d 2065 7874 7261 6374 5f66 7261 6d65   = extract_frame
+00001eb0: 5f72 616e 6765 2866 696c 655f 7061 7468  _range(file_path
+00001ec0: 3d27 7072 6f6a 6563 745f 666f 6c64 6572  ='project_folder
+00001ed0: 2f76 6964 656f 732f 5669 6465 6f5f 312e  /videos/Video_1.
+00001ee0: 6d70 3427 2c20 7374 6172 745f 6672 616d  mp4', start_fram
+00001ef0: 653d 3130 302c 2065 6e64 5f66 7261 6d65  e=100, end_frame
+00001f00: 3d35 3030 290a 2020 2020 2222 220a 0a20  =500).    """.. 
+00001f10: 2020 2063 6865 636b 5f66 696c 655f 6578     check_file_ex
+00001f20: 6973 745f 616e 645f 7265 6164 6162 6c65  ist_and_readable
+00001f30: 2866 696c 655f 7061 7468 3d66 696c 655f  (file_path=file_
+00001f40: 7061 7468 290a 2020 2020 7669 6465 6f5f  path).    video_
+00001f50: 6d65 7461 5f64 6174 6120 3d20 6765 745f  meta_data = get_
+00001f60: 7669 6465 6f5f 6d65 7461 5f64 6174 6128  video_meta_data(
+00001f70: 6669 6c65 5f70 6174 6829 0a20 2020 2063  file_path).    c
+00001f80: 6865 636b 5f69 6e74 286e 616d 653d 2273  heck_int(name="s
+00001f90: 7461 7274 2066 7261 6d65 222c 2076 616c  tart frame", val
+00001fa0: 7565 3d73 7461 7274 5f66 7261 6d65 2c20  ue=start_frame, 
+00001fb0: 6d69 6e5f 7661 6c75 653d 3029 0a20 2020  min_value=0).   
+00001fc0: 2066 696c 655f 6469 722c 2066 696c 655f   file_dir, file_
+00001fd0: 6e61 6d65 2c20 6669 6c65 5f65 7874 203d  name, file_ext =
+00001fe0: 2067 6574 5f66 6e5f 6578 7428 6669 6c65   get_fn_ext(file
+00001ff0: 7061 7468 3d66 696c 655f 7061 7468 290a  path=file_path).
+00002000: 2020 2020 6368 6563 6b5f 696e 7428 0a20      check_int(. 
+00002010: 2020 2020 2020 206e 616d 653d 2265 6e64         name="end
+00002020: 2066 7261 6d65 222c 2076 616c 7565 3d65   frame", value=e
+00002030: 6e64 5f66 7261 6d65 2c20 6d61 785f 7661  nd_frame, max_va
+00002040: 6c75 653d 7669 6465 6f5f 6d65 7461 5f64  lue=video_meta_d
+00002050: 6174 615b 2266 7261 6d65 5f63 6f75 6e74  ata["frame_count
+00002060: 225d 0a20 2020 2029 0a20 2020 2066 7261  "].    ).    fra
+00002070: 6d65 5f72 616e 6765 203d 206c 6973 7428  me_range = list(
+00002080: 7261 6e67 6528 696e 7428 7374 6172 745f  range(int(start_
+00002090: 6672 616d 6529 2c20 696e 7428 656e 645f  frame), int(end_
+000020a0: 6672 616d 6529 202b 2031 2929 0a20 2020  frame) + 1)).   
+000020b0: 2073 6176 655f 6469 7220 3d20 6f73 2e70   save_dir = os.p
+000020c0: 6174 682e 6a6f 696e 2866 696c 655f 6469  ath.join(file_di
+000020d0: 722c 2066 696c 655f 6e61 6d65 202b 2022  r, file_name + "
+000020e0: 5f66 7261 6d65 7322 290a 2020 2020 6361  _frames").    ca
+000020f0: 7020 3d20 6376 322e 5669 6465 6f43 6170  p = cv2.VideoCap
+00002100: 7475 7265 2866 696c 655f 7061 7468 290a  ture(file_path).
+00002110: 2020 2020 6966 206e 6f74 206f 732e 7061      if not os.pa
+00002120: 7468 2e65 7869 7374 7328 7361 7665 5f64  th.exists(save_d
+00002130: 6972 293a 0a20 2020 2020 2020 206f 732e  ir):.        os.
+00002140: 6d61 6b65 6469 7273 2873 6176 655f 6469  makedirs(save_di
+00002150: 7229 0a20 2020 2066 6f72 2066 726d 5f63  r).    for frm_c
+00002160: 6e74 2c20 6672 6d5f 6e75 6d62 6572 2069  nt, frm_number i
+00002170: 6e20 656e 756d 6572 6174 6528 6672 616d  n enumerate(fram
+00002180: 655f 7261 6e67 6529 3a0a 2020 2020 2020  e_range):.      
+00002190: 2020 6361 702e 7365 7428 312c 2066 726d    cap.set(1, frm
+000021a0: 5f6e 756d 6265 7229 0a20 2020 2020 2020  _number).       
+000021b0: 2072 6574 2c20 6672 616d 6520 3d20 6361   ret, frame = ca
+000021c0: 702e 7265 6164 2829 0a20 2020 2020 2020  p.read().       
+000021d0: 2066 726d 5f73 6176 655f 7061 7468 203d   frm_save_path =
+000021e0: 206f 732e 7061 7468 2e6a 6f69 6e28 7361   os.path.join(sa
+000021f0: 7665 5f64 6972 2c20 6622 7b66 726d 5f6e  ve_dir, f"{frm_n
+00002200: 756d 6265 727d 2e70 6e67 2229 0a20 2020  umber}.png").   
+00002210: 2020 2020 2063 7632 2e69 6d77 7269 7465       cv2.imwrite
+00002220: 2866 726d 5f73 6176 655f 7061 7468 2c20  (frm_save_path, 
+00002230: 6672 616d 6529 0a20 2020 2020 2020 2070  frame).        p
+00002240: 7269 6e74 2866 2246 7261 6d65 207b 6672  rint(f"Frame {fr
+00002250: 6d5f 6e75 6d62 6572 7d20 7361 7665 6420  m_number} saved 
+00002260: 2846 7261 6d65 207b 6672 6d5f 636e 747d  (Frame {frm_cnt}
+00002270: 2f7b 6c65 6e28 6672 616d 655f 7261 6e67  /{len(frame_rang
+00002280: 6529 2d31 7d29 2229 0a20 2020 2073 7464  e)-1})").    std
+00002290: 6f75 745f 7375 6363 6573 7328 0a20 2020  out_success(.   
+000022a0: 2020 2020 206d 7367 3d66 227b 6c65 6e28       msg=f"{len(
+000022b0: 6672 616d 655f 7261 6e67 6529 2d31 7d20  frame_range)-1} 
+000022c0: 6672 616d 6573 2065 7874 7261 6374 6564  frames extracted
+000022d0: 2066 6f72 2076 6964 656f 207b 6669 6c65   for video {file
+000022e0: 5f6e 616d 657d 2073 6176 6564 2069 6e20  _name} saved in 
+000022f0: 7b73 6176 655f 6469 727d 222c 0a20 2020  {save_dir}",.   
+00002300: 2020 2020 2073 6f75 7263 653d 6578 7472       source=extr
+00002310: 6163 745f 6672 616d 655f 7261 6e67 652e  act_frame_range.
+00002320: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 290a  __name__,.    ).
+00002330: 0a0a 6465 6620 6368 616e 6765 5f73 696e  ..def change_sin
+00002340: 676c 655f 7669 6465 6f5f 6670 7328 0a20  gle_video_fps(. 
+00002350: 2020 2066 696c 655f 7061 7468 3a20 556e     file_path: Un
+00002360: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
+00002370: 4c69 6b65 5d2c 2066 7073 3a20 696e 742c  Like], fps: int,
+00002380: 2067 7075 3a20 4f70 7469 6f6e 616c 5b62   gpu: Optional[b
+00002390: 6f6f 6c5d 203d 2046 616c 7365 0a29 202d  ool] = False.) -
+000023a0: 3e20 4e6f 6e65 3a0a 2020 2020 2222 220a  > None:.    """.
+000023b0: 2020 2020 4368 616e 6765 2074 6865 2066      Change the f
+000023c0: 7073 206f 6620 6120 7369 6e67 6c65 2076  ps of a single v
+000023d0: 6964 656f 2066 696c 652e 2052 6573 756c  ideo file. Resul
+000023e0: 7473 2061 7265 2073 746f 7265 6420 696e  ts are stored in
+000023f0: 2074 6865 2073 616d 6520 6469 7265 6374   the same direct
+00002400: 6f72 7920 6173 2069 6e20 7468 6520 696e  ory as in the in
+00002410: 7075 7420 6669 6c65 2077 6974 680a 2020  put file with.  
+00002420: 2020 7468 6520 7375 6666 6978 2060 605f    the suffix ``_
+00002430: 6670 735f 6e65 775f 6670 7360 602e 0a0a  fps_new_fps``...
+00002440: 2020 2020 2e2e 206e 6f74 653a 3a0a 2020      .. note::.  
+00002450: 2020 2020 2054 6f20 6368 616e 6765 2074       To change t
+00002460: 6865 2046 5053 206f 6620 616c 6c20 7669  he FPS of all vi
+00002470: 6465 6f73 2069 6e20 6120 6469 7265 6374  deos in a direct
+00002480: 6f72 792c 2075 7365 2060 6073 696d 6261  ory, use ``simba
+00002490: 2e76 6964 656f 5f70 726f 6365 7373 6f72  .video_processor
+000024a0: 732e 7669 6465 6f5f 7072 6f63 6573 7369  s.video_processi
+000024b0: 6e67 2e63 6861 6e67 655f 6670 735f 6f66  ng.change_fps_of
+000024c0: 5f6d 756c 7469 706c 655f 7669 6465 6f73  _multiple_videos
+000024d0: 6060 2e0a 0a20 2020 203a 7061 7261 6d65  ``...    :parame
+000024e0: 7465 7220 556e 696f 6e5b 7374 722c 206f  ter Union[str, o
+000024f0: 732e 5061 7468 4c69 6b65 5d20 6669 6c65  s.PathLike] file
+00002500: 5f70 6174 683a 2050 6174 6820 746f 2076  _path: Path to v
+00002510: 6964 656f 2066 696c 650a 2020 2020 3a70  ideo file.    :p
+00002520: 6172 616d 6574 6572 2069 6e74 2066 7073  arameter int fps
+00002530: 3a20 4670 7320 6f66 2074 6865 206e 6577  : Fps of the new
+00002540: 2076 6964 656f 2066 696c 652e 0a20 2020   video file..   
+00002550: 203a 7061 7261 6d65 7465 7220 4f70 7469   :parameter Opti
+00002560: 6f6e 616c 5b62 6f6f 6c5d 2067 7075 3a20  onal[bool] gpu: 
+00002570: 4966 2054 7275 652c 2075 7365 204e 5649  If True, use NVI
+00002580: 4445 4120 4750 5520 636f 6465 6373 2e20  DEA GPU codecs. 
+00002590: 4465 6661 756c 7420 4661 6c73 652e 0a0a  Default False...
+000025a0: 2020 2020 3a65 7861 6d70 6c65 3a0a 2020      :example:.  
+000025b0: 2020 3e3e 3e20 5f20 3d20 6368 616e 6765    >>> _ = change
+000025c0: 5f73 696e 676c 655f 7669 6465 6f5f 6670  _single_video_fp
+000025d0: 7328 6669 6c65 5f70 6174 683d 2770 726f  s(file_path='pro
+000025e0: 6a65 6374 5f66 6f6c 6465 722f 7669 6465  ject_folder/vide
+000025f0: 6f73 2f56 6964 656f 5f31 2e6d 7034 272c  os/Video_1.mp4',
+00002600: 2066 7073 3d31 3529 0a20 2020 2022 2222   fps=15).    """
+00002610: 0a0a 2020 2020 7469 6d65 7220 3d20 5369  ..    timer = Si
+00002620: 6d62 6154 696d 6572 2873 7461 7274 3d54  mbaTimer(start=T
+00002630: 7275 6529 0a20 2020 2063 6865 636b 5f66  rue).    check_f
+00002640: 666d 7065 675f 6176 6169 6c61 626c 6528  fmpeg_available(
+00002650: 7261 6973 655f 6572 726f 723d 5472 7565  raise_error=True
+00002660: 290a 2020 2020 6966 2067 7075 2061 6e64  ).    if gpu and
+00002670: 206e 6f74 2063 6865 636b 5f6e 7669 6465   not check_nvide
+00002680: 615f 6770 755f 6176 6169 6c61 626c 6528  a_gpu_available(
+00002690: 293a 0a20 2020 2020 2020 2072 6169 7365  ):.        raise
+000026a0: 2046 464d 5045 4743 6f64 6563 4750 5545   FFMPEGCodecGPUE
+000026b0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+000026c0: 2020 6d73 673d 224e 6f20 4750 5520 666f    msg="No GPU fo
+000026d0: 756e 6420 2861 7320 6576 616c 7561 7465  und (as evaluate
+000026e0: 6420 6279 206e 7669 6465 612d 736d 6920  d by nvidea-smi 
+000026f0: 7265 7475 726e 696e 6720 4e6f 6e65 2922  returning None)"
+00002700: 2c0a 2020 2020 2020 2020 2020 2020 736f  ,.            so
+00002710: 7572 6365 3d63 6861 6e67 655f 7369 6e67  urce=change_sing
+00002720: 6c65 5f76 6964 656f 5f66 7073 2e5f 5f6e  le_video_fps.__n
+00002730: 616d 655f 5f2c 0a20 2020 2020 2020 2029  ame__,.        )
+00002740: 0a20 2020 2063 6865 636b 5f66 696c 655f  .    check_file_
+00002750: 6578 6973 745f 616e 645f 7265 6164 6162  exist_and_readab
+00002760: 6c65 2866 696c 655f 7061 7468 3d66 696c  le(file_path=fil
+00002770: 655f 7061 7468 290a 2020 2020 6368 6563  e_path).    chec
+00002780: 6b5f 696e 7428 6e61 6d65 3d22 4e65 7720  k_int(name="New 
+00002790: 6670 7322 2c20 7661 6c75 653d 6670 7329  fps", value=fps)
+000027a0: 0a20 2020 2076 6964 656f 5f6d 6574 615f  .    video_meta_
+000027b0: 6461 7461 203d 2067 6574 5f76 6964 656f  data = get_video
+000027c0: 5f6d 6574 615f 6461 7461 2876 6964 656f  _meta_data(video
+000027d0: 5f70 6174 683d 6669 6c65 5f70 6174 6829  _path=file_path)
+000027e0: 0a20 2020 2064 6972 5f6e 616d 652c 2066  .    dir_name, f
+000027f0: 696c 655f 6e61 6d65 2c20 6578 7420 3d20  ile_name, ext = 
+00002800: 6765 745f 666e 5f65 7874 2866 696c 6570  get_fn_ext(filep
+00002810: 6174 683d 6669 6c65 5f70 6174 6829 0a20  ath=file_path). 
+00002820: 2020 2069 6620 696e 7428 6670 7329 203d     if int(fps) =
+00002830: 3d20 696e 7428 7669 6465 6f5f 6d65 7461  = int(video_meta
+00002840: 5f64 6174 615b 2266 7073 225d 293a 0a20  _data["fps"]):. 
+00002850: 2020 2020 2020 2053 616d 6549 6e70 7574         SameInput
+00002860: 416e 644f 7574 7075 7457 6172 6e69 6e67  AndOutputWarning
+00002870: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
+00002880: 673d 6622 5468 6520 6e65 7720 6670 7320  g=f"The new fps 
+00002890: 6973 2074 6865 2073 616d 6520 6173 2074  is the same as t
+000028a0: 6865 2069 6e70 7574 2066 7073 2066 6f72  he input fps for
+000028b0: 2076 6964 656f 207b 6669 6c65 5f6e 616d   video {file_nam
+000028c0: 657d 2028 7b73 7472 2866 7073 297d 2922  e} ({str(fps)})"
+000028d0: 2c0a 2020 2020 2020 2020 2020 2020 736f  ,.            so
+000028e0: 7572 6365 3d63 6861 6e67 655f 7369 6e67  urce=change_sing
+000028f0: 6c65 5f76 6964 656f 5f66 7073 2e5f 5f6e  le_video_fps.__n
+00002900: 616d 655f 5f2c 0a20 2020 2020 2020 2029  ame__,.        )
+00002910: 0a20 2020 2073 6176 655f 7061 7468 203d  .    save_path =
+00002920: 206f 732e 7061 7468 2e6a 6f69 6e28 0a20   os.path.join(. 
+00002930: 2020 2020 2020 2064 6972 5f6e 616d 652c         dir_name,
+00002940: 2066 696c 655f 6e61 6d65 202b 2022 5f66   file_name + "_f
+00002950: 7073 5f7b 7d7b 7d22 2e66 6f72 6d61 7428  ps_{}{}".format(
+00002960: 7374 7228 6670 7329 2c20 7374 7228 6578  str(fps), str(ex
+00002970: 7429 290a 2020 2020 290a 2020 2020 7072  t)).    ).    pr
+00002980: 696e 7428 6622 436f 6e76 6572 7469 6e67  int(f"Converting
+00002990: 2074 6865 2046 5053 2074 6f20 7b66 7073   the FPS to {fps
+000029a0: 7d20 666f 7220 7669 6465 6f20 7b66 696c  } for video {fil
+000029b0: 655f 6e61 6d65 7d20 2e2e 2e22 290a 2020  e_name} ...").  
+000029c0: 2020 6966 206f 732e 7061 7468 2e69 7366    if os.path.isf
+000029d0: 696c 6528 7361 7665 5f70 6174 6829 3a0a  ile(save_path):.
+000029e0: 2020 2020 2020 2020 4669 6c65 4578 6973          FileExis
+000029f0: 7457 6172 6e69 6e67 280a 2020 2020 2020  tWarning(.      
+00002a00: 2020 2020 2020 6d73 673d 6622 4f76 6572        msg=f"Over
+00002a10: 7772 6974 696e 6720 6578 6973 7469 6e67  writing existing
+00002a20: 2066 696c 6520 6174 207b 7361 7665 5f70   file at {save_p
+00002a30: 6174 687d 2e2e 2e22 2c0a 2020 2020 2020  ath}...",.      
+00002a40: 2020 2020 2020 736f 7572 6365 3d63 6861        source=cha
+00002a50: 6e67 655f 7369 6e67 6c65 5f76 6964 656f  nge_single_video
+00002a60: 5f66 7073 2e5f 5f6e 616d 655f 5f2c 0a20  _fps.__name__,. 
+00002a70: 2020 2020 2020 2029 0a20 2020 2069 6620         ).    if 
+00002a80: 6770 753a 0a20 2020 2020 2020 2063 6f6d  gpu:.        com
+00002a90: 6d61 6e64 203d 2066 2766 666d 7065 6720  mand = f'ffmpeg 
+00002aa0: 2d68 7761 6363 656c 2061 7574 6f20 2d63  -hwaccel auto -c
+00002ab0: 3a76 2068 3236 345f 6375 7669 6420 2d69  :v h264_cuvid -i
+00002ac0: 2022 7b66 696c 655f 7061 7468 7d22 202d   "{file_path}" -
+00002ad0: 7666 2022 6670 733d 7b66 7073 7d22 202d  vf "fps={fps}" -
+00002ae0: 633a 7620 6832 3634 5f6e 7665 6e63 202d  c:v h264_nvenc -
+00002af0: 633a 6120 636f 7079 2022 7b73 6176 655f  c:a copy "{save_
+00002b00: 7061 7468 7d22 202d 7927 0a20 2020 2065  path}" -y'.    e
+00002b10: 6c73 653a 0a20 2020 2020 2020 2063 6f6d  lse:.        com
+00002b20: 6d61 6e64 203d 2066 2766 666d 7065 6720  mand = f'ffmpeg 
+00002b30: 2d69 2022 7b66 696c 655f 7061 7468 7d22  -i "{file_path}"
+00002b40: 202d 6669 6c74 6572 3a76 2066 7073 3d66   -filter:v fps=f
+00002b50: 7073 3d7b 6670 737d 202d 633a 7620 6c69  ps={fps} -c:v li
+00002b60: 6278 3236 3420 2d63 3a61 2061 6163 2022  bx264 -c:a aac "
+00002b70: 7b73 6176 655f 7061 7468 7d22 202d 7927  {save_path}" -y'
+00002b80: 0a20 2020 2073 7562 7072 6f63 6573 732e  .    subprocess.
+00002b90: 6361 6c6c 2863 6f6d 6d61 6e64 2c20 7368  call(command, sh
+00002ba0: 656c 6c3d 5472 7565 290a 2020 2020 7469  ell=True).    ti
+00002bb0: 6d65 722e 7374 6f70 5f74 696d 6572 2829  mer.stop_timer()
+00002bc0: 0a20 2020 2073 7464 6f75 745f 7375 6363  .    stdout_succ
+00002bd0: 6573 7328 0a20 2020 2020 2020 206d 7367  ess(.        msg
+00002be0: 3d66 2753 494d 4241 2043 4f4d 504c 4554  =f'SIMBA COMPLET
+00002bf0: 453a 2046 5053 206f 6620 7669 6465 6f20  E: FPS of video 
+00002c00: 7b66 696c 655f 6e61 6d65 7d20 6368 616e  {file_name} chan
+00002c10: 6765 6420 6672 6f6d 207b 7374 7228 7669  ged from {str(vi
+00002c20: 6465 6f5f 6d65 7461 5f64 6174 615b 2266  deo_meta_data["f
+00002c30: 7073 225d 297d 2074 6f20 7b73 7472 2866  ps"])} to {str(f
+00002c40: 7073 297d 2061 6e64 2073 6176 6564 2069  ps)} and saved i
+00002c50: 6e20 6469 7265 6374 6f72 7920 7b73 6176  n directory {sav
+00002c60: 655f 7061 7468 7d27 2c0a 2020 2020 2020  e_path}',.      
+00002c70: 2020 656c 6170 7365 645f 7469 6d65 3d74    elapsed_time=t
+00002c80: 696d 6572 2e65 6c61 7073 6564 5f74 696d  imer.elapsed_tim
+00002c90: 655f 7374 722c 0a20 2020 2020 2020 2073  e_str,.        s
+00002ca0: 6f75 7263 653d 6368 616e 6765 5f73 696e  ource=change_sin
+00002cb0: 676c 655f 7669 6465 6f5f 6670 732e 5f5f  gle_video_fps.__
+00002cc0: 6e61 6d65 5f5f 2c0a 2020 2020 290a 0a0a  name__,.    )...
+00002cd0: 6465 6620 6368 616e 6765 5f66 7073 5f6f  def change_fps_o
+00002ce0: 665f 6d75 6c74 6970 6c65 5f76 6964 656f  f_multiple_video
+00002cf0: 7328 0a20 2020 2064 6972 6563 746f 7279  s(.    directory
+00002d00: 3a20 556e 696f 6e5b 7374 722c 206f 732e  : Union[str, os.
+00002d10: 5061 7468 4c69 6b65 5d2c 2066 7073 3a20  PathLike], fps: 
+00002d20: 696e 742c 2067 7075 3a20 4f70 7469 6f6e  int, gpu: Option
+00002d30: 616c 5b62 6f6f 6c5d 203d 2046 616c 7365  al[bool] = False
+00002d40: 0a29 202d 3e20 4e6f 6e65 3a0a 2020 2020  .) -> None:.    
+00002d50: 2222 220a 2020 2020 4368 616e 6765 2074  """.    Change t
+00002d60: 6865 2066 7073 206f 6620 616c 6c20 7669  he fps of all vi
+00002d70: 6465 6f20 6669 6c65 7320 696e 2061 2066  deo files in a f
+00002d80: 6f6c 6465 722e 2052 6573 756c 7473 2061  older. Results a
+00002d90: 7265 2073 746f 7265 6420 696e 2074 6865  re stored in the
+00002da0: 2073 616d 6520 6469 7265 6374 6f72 7920   same directory 
+00002db0: 6173 2069 6e20 7468 6520 696e 7075 7420  as in the input 
+00002dc0: 6669 6c65 7320 7769 7468 0a20 2020 2074  files with.    t
+00002dd0: 6865 2073 7566 6669 7820 6060 5f66 7073  he suffix ``_fps
+00002de0: 5f6e 6577 5f66 7073 6060 2e0a 0a20 2020  _new_fps``...   
+00002df0: 203a 7061 7261 6d65 7465 7220 556e 696f   :parameter Unio
+00002e00: 6e5b 7374 722c 206f 732e 5061 7468 4c69  n[str, os.PathLi
+00002e10: 6b65 5d20 6469 7265 6374 6f72 793a 2050  ke] directory: P
+00002e20: 6174 6820 746f 2076 6964 656f 2066 696c  ath to video fil
+00002e30: 6520 6469 7265 6374 6f72 790a 2020 2020  e directory.    
+00002e40: 3a70 6172 616d 6574 6572 2069 6e74 2066  :parameter int f
+00002e50: 7073 3a20 4670 7320 6f66 2074 6865 206e  ps: Fps of the n
+00002e60: 6577 2076 6964 656f 2066 696c 6573 2e0a  ew video files..
+00002e70: 2020 2020 3a70 6172 616d 6574 6572 204f      :parameter O
+00002e80: 7074 696f 6e61 6c5b 626f 6f6c 5d20 6770  ptional[bool] gp
+00002e90: 753a 2049 6620 5472 7565 2c20 7573 6520  u: If True, use 
+00002ea0: 4e56 4944 4541 2047 5055 2063 6f64 6563  NVIDEA GPU codec
+00002eb0: 732e 2044 6566 6175 6c74 2046 616c 7365  s. Default False
+00002ec0: 2e0a 0a20 2020 203a 6578 616d 706c 653a  ...    :example:
+00002ed0: 0a20 2020 203e 3e3e 205f 203d 2063 6861  .    >>> _ = cha
+00002ee0: 6e67 655f 6670 735f 6f66 5f6d 756c 7469  nge_fps_of_multi
+00002ef0: 706c 655f 7669 6465 6f73 2864 6972 6563  ple_videos(direc
+00002f00: 746f 7279 3d27 7072 6f6a 6563 745f 666f  tory='project_fo
+00002f10: 6c64 6572 2f76 6964 656f 732f 5669 6465  lder/videos/Vide
+00002f20: 6f5f 312e 6d70 3427 2c20 6670 733d 3135  o_1.mp4', fps=15
+00002f30: 290a 2020 2020 2222 220a 0a20 2020 2074  ).    """..    t
+00002f40: 696d 6572 203d 2053 696d 6261 5469 6d65  imer = SimbaTime
+00002f50: 7228 7374 6172 743d 5472 7565 290a 2020  r(start=True).  
+00002f60: 2020 6368 6563 6b5f 6666 6d70 6567 5f61    check_ffmpeg_a
+00002f70: 7661 696c 6162 6c65 2872 6169 7365 5f65  vailable(raise_e
+00002f80: 7272 6f72 3d54 7275 6529 0a20 2020 2069  rror=True).    i
+00002f90: 6620 6770 7520 616e 6420 6e6f 7420 6368  f gpu and not ch
+00002fa0: 6563 6b5f 6e76 6964 6561 5f67 7075 5f61  eck_nvidea_gpu_a
+00002fb0: 7661 696c 6162 6c65 2829 3a0a 2020 2020  vailable():.    
+00002fc0: 2020 2020 7261 6973 6520 4646 4d50 4547      raise FFMPEG
+00002fd0: 436f 6465 6347 5055 4572 726f 7228 0a20  CodecGPUError(. 
+00002fe0: 2020 2020 2020 2020 2020 206d 7367 3d22             msg="
+00002ff0: 4e6f 2047 5055 2066 6f75 6e64 2028 6173  No GPU found (as
+00003000: 2065 7661 6c75 6174 6564 2062 7920 6e76   evaluated by nv
+00003010: 6964 6561 2d73 6d69 2072 6574 7572 6e69  idea-smi returni
+00003020: 6e67 204e 6f6e 6529 222c 0a20 2020 2020  ng None)",.     
+00003030: 2020 2020 2020 2073 6f75 7263 653d 6368         source=ch
+00003040: 616e 6765 5f66 7073 5f6f 665f 6d75 6c74  ange_fps_of_mult
+00003050: 6970 6c65 5f76 6964 656f 732e 5f5f 6e61  iple_videos.__na
+00003060: 6d65 5f5f 2c0a 2020 2020 2020 2020 290a  me__,.        ).
+00003070: 2020 2020 6966 206e 6f74 206f 732e 7061      if not os.pa
+00003080: 7468 2e69 7364 6972 2864 6972 6563 746f  th.isdir(directo
+00003090: 7279 293a 0a20 2020 2020 2020 2072 6169  ry):.        rai
+000030a0: 7365 204e 6f74 4469 7265 6374 6f72 7945  se NotDirectoryE
+000030b0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+000030c0: 2020 6d73 673d 6622 5349 4d42 4120 4552    msg=f"SIMBA ER
+000030d0: 524f 523a 207b 6469 7265 6374 6f72 797d  ROR: {directory}
+000030e0: 2069 7320 6e6f 7420 6120 7661 6c69 6420   is not a valid 
+000030f0: 6469 7265 6374 6f72 7922 2c0a 2020 2020  directory",.    
+00003100: 2020 2020 2020 2020 736f 7572 6365 3d63          source=c
+00003110: 6861 6e67 655f 6670 735f 6f66 5f6d 756c  hange_fps_of_mul
+00003120: 7469 706c 655f 7669 6465 6f73 2e5f 5f6e  tiple_videos.__n
+00003130: 616d 655f 5f2c 0a20 2020 2020 2020 2029  ame__,.        )
+00003140: 0a20 2020 2063 6865 636b 5f69 6e74 286e  .    check_int(n
+00003150: 616d 653d 224e 6577 2066 7073 222c 2076  ame="New fps", v
+00003160: 616c 7565 3d66 7073 290a 2020 2020 7669  alue=fps).    vi
+00003170: 6465 6f5f 7061 7468 7320 3d20 5b5d 0a20  deo_paths = []. 
+00003180: 2020 2066 696c 655f 7061 7468 735f 696e     file_paths_in
+00003190: 5f66 6f6c 6465 7220 3d20 5b66 2066 6f72  _folder = [f for
+000031a0: 2066 2069 6e20 676c 6f62 2e67 6c6f 6228   f in glob.glob(
+000031b0: 6469 7265 6374 6f72 7920 2b20 222f 2a22  directory + "/*"
+000031c0: 2920 6966 206f 732e 7061 7468 2e69 7366  ) if os.path.isf
+000031d0: 696c 6528 6629 5d0a 2020 2020 666f 7220  ile(f)].    for 
+000031e0: 6669 6c65 5f70 6174 6820 696e 2066 696c  file_path in fil
+000031f0: 655f 7061 7468 735f 696e 5f66 6f6c 6465  e_paths_in_folde
+00003200: 723a 0a20 2020 2020 2020 205f 2c20 5f2c  r:.        _, _,
+00003210: 2065 7874 203d 2067 6574 5f66 6e5f 6578   ext = get_fn_ex
+00003220: 7428 6669 6c65 7061 7468 3d66 696c 655f  t(filepath=file_
+00003230: 7061 7468 290a 2020 2020 2020 2020 6966  path).        if
+00003240: 2065 7874 2e6c 6f77 6572 2829 2069 6e20   ext.lower() in 
+00003250: 5b22 2e61 7669 222c 2022 2e6d 7034 222c  [".avi", ".mp4",
+00003260: 2022 2e6d 6f76 222c 2022 2e66 6c76 225d   ".mov", ".flv"]
+00003270: 3a0a 2020 2020 2020 2020 2020 2020 7669  :.            vi
+00003280: 6465 6f5f 7061 7468 732e 6170 7065 6e64  deo_paths.append
+00003290: 2866 696c 655f 7061 7468 290a 2020 2020  (file_path).    
+000032a0: 6966 206c 656e 2876 6964 656f 5f70 6174  if len(video_pat
+000032b0: 6873 2920 3c20 313a 0a20 2020 2020 2020  hs) < 1:.       
+000032c0: 2072 6169 7365 204e 6f46 696c 6573 466f   raise NoFilesFo
+000032d0: 756e 6445 7272 6f72 280a 2020 2020 2020  undError(.      
+000032e0: 2020 2020 2020 6d73 673d 2253 494d 4241        msg="SIMBA
+000032f0: 2045 5252 4f52 3a20 4e6f 2066 696c 6573   ERROR: No files
+00003300: 2077 6974 6820 2e6d 7034 2c20 2e61 7669   with .mp4, .avi
+00003310: 2c20 2e6d 6f76 2c20 2e66 6c76 2066 696c  , .mov, .flv fil
+00003320: 6520 656e 6469 6e67 2066 6f75 6e64 2069  e ending found i
+00003330: 6e20 7468 6520 7b7d 2064 6972 6563 746f  n the {} directo
+00003340: 7279 222e 666f 726d 6174 280a 2020 2020  ry".format(.    
+00003350: 2020 2020 2020 2020 2020 2020 6469 7265              dire
+00003360: 6374 6f72 790a 2020 2020 2020 2020 2020  ctory.          
+00003370: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
+00003380: 2073 6f75 7263 653d 6368 616e 6765 5f66   source=change_f
+00003390: 7073 5f6f 665f 6d75 6c74 6970 6c65 5f76  ps_of_multiple_v
+000033a0: 6964 656f 732e 5f5f 6e61 6d65 5f5f 2c0a  ideos.__name__,.
+000033b0: 2020 2020 2020 2020 290a 2020 2020 666f          ).    fo
+000033c0: 7220 6669 6c65 5f63 6e74 2c20 6669 6c65  r file_cnt, file
+000033d0: 5f70 6174 6820 696e 2065 6e75 6d65 7261  _path in enumera
+000033e0: 7465 2876 6964 656f 5f70 6174 6873 293a  te(video_paths):
+000033f0: 0a20 2020 2020 2020 2076 6964 656f 5f74  .        video_t
+00003400: 696d 6572 203d 2053 696d 6261 5469 6d65  imer = SimbaTime
+00003410: 7228 7374 6172 743d 5472 7565 290a 2020  r(start=True).  
+00003420: 2020 2020 2020 6469 725f 6e61 6d65 2c20        dir_name, 
+00003430: 6669 6c65 5f6e 616d 652c 2065 7874 203d  file_name, ext =
+00003440: 2067 6574 5f66 6e5f 6578 7428 6669 6c65   get_fn_ext(file
+00003450: 7061 7468 3d66 696c 655f 7061 7468 290a  path=file_path).
+00003460: 2020 2020 2020 2020 7072 696e 7428 6622          print(f"
+00003470: 436f 6e76 6572 7469 6e67 2046 5053 2066  Converting FPS f
+00003480: 6f72 207b 6669 6c65 5f6e 616d 657d 2e2e  or {file_name}..
+00003490: 2e22 290a 2020 2020 2020 2020 7361 7665  .").        save
+000034a0: 5f70 6174 6820 3d20 6f73 2e70 6174 682e  _path = os.path.
+000034b0: 6a6f 696e 280a 2020 2020 2020 2020 2020  join(.          
+000034c0: 2020 6469 725f 6e61 6d65 2c20 6669 6c65    dir_name, file
+000034d0: 5f6e 616d 6520 2b20 225f 6670 735f 7b7d  _name + "_fps_{}
+000034e0: 7b7d 222e 666f 726d 6174 2873 7472 2866  {}".format(str(f
+000034f0: 7073 292c 2073 7472 2865 7874 2929 0a20  ps), str(ext)). 
+00003500: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00003510: 2069 6620 6770 753a 0a20 2020 2020 2020   if gpu:.       
+00003520: 2020 2020 2063 6f6d 6d61 6e64 203d 2066       command = f
+00003530: 2766 666d 7065 6720 2d68 7761 6363 656c  'ffmpeg -hwaccel
+00003540: 2061 7574 6f20 2d63 3a76 2068 3236 345f   auto -c:v h264_
+00003550: 6375 7669 6420 2d69 2022 7b66 696c 655f  cuvid -i "{file_
+00003560: 7061 7468 7d22 202d 7666 2022 6670 733d  path}" -vf "fps=
+00003570: 7b66 7073 7d22 202d 633a 7620 6832 3634  {fps}" -c:v h264
+00003580: 5f6e 7665 6e63 202d 633a 6120 636f 7079  _nvenc -c:a copy
+00003590: 2022 7b73 6176 655f 7061 7468 7d22 202d   "{save_path}" -
+000035a0: 7927 0a20 2020 2020 2020 2065 6c73 653a  y'.        else:
+000035b0: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+000035c0: 6d61 6e64 203d 2066 2766 666d 7065 6720  mand = f'ffmpeg 
+000035d0: 2d69 207b 6669 6c65 5f70 6174 687d 202d  -i {file_path} -
+000035e0: 6669 6c74 6572 3a76 2066 7073 3d66 7073  filter:v fps=fps
+000035f0: 3d7b 6670 737d 202d 633a 7620 6c69 6278  ={fps} -c:v libx
+00003600: 3236 3420 227b 7361 7665 5f70 6174 687d  264 "{save_path}
+00003610: 2220 2d79 270a 2020 2020 2020 2020 7375  " -y'.        su
+00003620: 6270 726f 6365 7373 2e63 616c 6c28 636f  bprocess.call(co
+00003630: 6d6d 616e 642c 2073 6865 6c6c 3d54 7275  mmand, shell=Tru
+00003640: 6529 0a20 2020 2020 2020 2076 6964 656f  e).        video
+00003650: 5f74 696d 6572 2e73 746f 705f 7469 6d65  _timer.stop_time
+00003660: 7228 290a 2020 2020 2020 2020 7072 696e  r().        prin
+00003670: 7428 0a20 2020 2020 2020 2020 2020 2066  t(.            f
+00003680: 2256 6964 656f 207b 6669 6c65 5f6e 616d  "Video {file_nam
+00003690: 657d 2063 6f6d 706c 6574 652e 2e2e 2028  e} complete... (
+000036a0: 656c 6170 7365 6420 7469 6d65 3a20 7b76  elapsed time: {v
+000036b0: 6964 656f 5f74 696d 6572 2e65 6c61 7073  ideo_timer.elaps
+000036c0: 6564 5f74 696d 655f 7374 727d 7329 220a  ed_time_str}s)".
+000036d0: 2020 2020 2020 2020 290a 2020 2020 7469          ).    ti
+000036e0: 6d65 722e 7374 6f70 5f74 696d 6572 2829  mer.stop_timer()
+000036f0: 0a20 2020 2073 7464 6f75 745f 7375 6363  .    stdout_succ
+00003700: 6573 7328 0a20 2020 2020 2020 206d 7367  ess(.        msg
+00003710: 3d66 2253 494d 4241 2043 4f4d 504c 4554  =f"SIMBA COMPLET
+00003720: 453a 2046 5053 206f 6620 7b6c 656e 2876  E: FPS of {len(v
+00003730: 6964 656f 5f70 6174 6873 297d 2076 6964  ideo_paths)} vid
+00003740: 656f 2873 2920 6368 616e 6765 6420 746f  eo(s) changed to
+00003750: 207b 6670 737d 222c 0a20 2020 2020 2020   {fps}",.       
+00003760: 2065 6c61 7073 6564 5f74 696d 653d 7469   elapsed_time=ti
+00003770: 6d65 722e 656c 6170 7365 645f 7469 6d65  mer.elapsed_time
+00003780: 5f73 7472 2c0a 2020 2020 2020 2020 736f  _str,.        so
+00003790: 7572 6365 3d63 6861 6e67 655f 6670 735f  urce=change_fps_
+000037a0: 6f66 5f6d 756c 7469 706c 655f 7669 6465  of_multiple_vide
+000037b0: 6f73 2e5f 5f6e 616d 655f 5f2c 0a20 2020  os.__name__,.   
+000037c0: 2029 0a0a 0a64 6566 2063 6f6e 7665 7274   )...def convert
+000037d0: 5f76 6964 656f 5f70 6f77 6572 706f 696e  _video_powerpoin
+000037e0: 745f 636f 6d70 6174 6962 6c65 5f66 6f72  t_compatible_for
+000037f0: 6d61 7428 0a20 2020 2066 696c 655f 7061  mat(.    file_pa
+00003800: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
+00003810: 732e 5061 7468 4c69 6b65 5d2c 2067 7075  s.PathLike], gpu
+00003820: 3a20 4f70 7469 6f6e 616c 5b62 6f6f 6c5d  : Optional[bool]
+00003830: 203d 2046 616c 7365 0a29 202d 3e20 4e6f   = False.) -> No
+00003840: 6e65 3a0a 2020 2020 2222 220a 2020 2020  ne:.    """.    
+00003850: 4372 6561 7465 204d 5320 506f 7765 7250  Create MS PowerP
+00003860: 6f69 6e74 2063 6f6d 7061 7469 626c 6520  oint compatible 
+00003870: 636f 7079 206f 6620 6120 7669 6465 6f20  copy of a video 
+00003880: 6669 6c65 2e20 5468 6520 7265 7375 6c74  file. The result
+00003890: 2069 7320 7374 6f72 6564 2069 6e20 7468   is stored in th
+000038a0: 6520 7361 6d65 2064 6972 6563 746f 7279  e same directory
+000038b0: 2061 7320 7468 650a 2020 2020 696e 7075   as the.    inpu
+000038c0: 7420 6669 6c65 2077 6974 6820 7468 6520  t file with the 
+000038d0: 6060 5f70 6f77 6572 706f 696e 7472 6561  ``_powerpointrea
+000038e0: 6479 6060 2073 7566 6669 782e 0a0a 2020  dy`` suffix...  
+000038f0: 2020 3a70 6172 616d 6574 6572 2055 6e69    :parameter Uni
+00003900: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
+00003910: 696b 655d 2066 696c 655f 7061 7468 3a20  ike] file_path: 
+00003920: 5061 7468 2074 6f20 7669 6465 6f20 6669  Path to video fi
+00003930: 6c65 2e0a 2020 2020 3a70 6172 616d 6574  le..    :paramet
+00003940: 6572 204f 7074 696f 6e61 6c5b 626f 6f6c  er Optional[bool
+00003950: 5d20 6770 753a 2049 6620 5472 7565 2c20  ] gpu: If True, 
+00003960: 7573 6520 4e56 4944 4541 2047 5055 2063  use NVIDEA GPU c
+00003970: 6f64 6563 732e 2044 6566 6175 6c74 2046  odecs. Default F
+00003980: 616c 7365 2e0a 0a20 2020 203a 6578 616d  alse...    :exam
+00003990: 706c 653a 0a20 2020 203e 3e3e 205f 203d  ple:.    >>> _ =
+000039a0: 2063 6f6e 7665 7274 5f76 6964 656f 5f70   convert_video_p
+000039b0: 6f77 6572 706f 696e 745f 636f 6d70 6174  owerpoint_compat
+000039c0: 6962 6c65 5f66 6f72 6d61 7428 6669 6c65  ible_format(file
+000039d0: 5f70 6174 683d 2770 726f 6a65 6374 5f66  _path='project_f
+000039e0: 6f6c 6465 722f 7669 6465 6f73 2f56 6964  older/videos/Vid
+000039f0: 656f 5f31 2e6d 7034 2729 0a20 2020 2022  eo_1.mp4').    "
+00003a00: 2222 0a0a 2020 2020 6368 6563 6b5f 6666  ""..    check_ff
+00003a10: 6d70 6567 5f61 7661 696c 6162 6c65 2872  mpeg_available(r
+00003a20: 6169 7365 5f65 7272 6f72 3d54 7275 6529  aise_error=True)
+00003a30: 0a20 2020 2069 6620 6770 7520 616e 6420  .    if gpu and 
+00003a40: 6e6f 7420 6368 6563 6b5f 6e76 6964 6561  not check_nvidea
+00003a50: 5f67 7075 5f61 7661 696c 6162 6c65 2829  _gpu_available()
+00003a60: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+00003a70: 4646 4d50 4547 436f 6465 6347 5055 4572  FFMPEGCodecGPUEr
+00003a80: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+00003a90: 206d 7367 3d22 4e6f 2047 5055 2066 6f75   msg="No GPU fou
+00003aa0: 6e64 2028 6173 2065 7661 6c75 6174 6564  nd (as evaluated
+00003ab0: 2062 7920 6e76 6964 6561 2d73 6d69 2072   by nvidea-smi r
+00003ac0: 6574 7572 6e69 6e67 204e 6f6e 6529 222c  eturning None)",
+00003ad0: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
+00003ae0: 7263 653d 636f 6e76 6572 745f 7669 6465  rce=convert_vide
+00003af0: 6f5f 706f 7765 7270 6f69 6e74 5f63 6f6d  o_powerpoint_com
+00003b00: 7061 7469 626c 655f 666f 726d 6174 2e5f  patible_format._
+00003b10: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
+00003b20: 2029 0a20 2020 2074 696d 6572 203d 2053   ).    timer = S
+00003b30: 696d 6261 5469 6d65 7228 7374 6172 743d  imbaTimer(start=
+00003b40: 5472 7565 290a 2020 2020 6368 6563 6b5f  True).    check_
+00003b50: 6669 6c65 5f65 7869 7374 5f61 6e64 5f72  file_exist_and_r
+00003b60: 6561 6461 626c 6528 6669 6c65 5f70 6174  eadable(file_pat
+00003b70: 683d 6669 6c65 5f70 6174 6829 0a20 2020  h=file_path).   
+00003b80: 2064 6972 2c20 6669 6c65 5f6e 616d 652c   dir, file_name,
+00003b90: 2065 7874 203d 2067 6574 5f66 6e5f 6578   ext = get_fn_ex
+00003ba0: 7428 6669 6c65 7061 7468 3d66 696c 655f  t(filepath=file_
+00003bb0: 7061 7468 290a 2020 2020 7361 7665 5f6e  path).    save_n
+00003bc0: 616d 6520 3d20 6f73 2e70 6174 682e 6a6f  ame = os.path.jo
+00003bd0: 696e 2864 6972 2c20 6669 6c65 5f6e 616d  in(dir, file_nam
+00003be0: 6520 2b20 225f 706f 7765 7270 6f69 6e74  e + "_powerpoint
+00003bf0: 7265 6164 792e 6d70 3422 290a 2020 2020  ready.mp4").    
+00003c00: 6966 206f 732e 7061 7468 2e69 7366 696c  if os.path.isfil
+00003c10: 6528 7361 7665 5f6e 616d 6529 3a0a 2020  e(save_name):.  
+00003c20: 2020 2020 2020 7261 6973 6520 4669 6c65        raise File
+00003c30: 4578 6973 7445 7272 6f72 280a 2020 2020  ExistError(.    
+00003c40: 2020 2020 2020 2020 6d73 673d 2253 494d          msg="SIM
+00003c50: 4241 2045 5252 4f52 3a20 5468 6520 6f75  BA ERROR: The ou
+00003c60: 7466 696c 6520 6669 6c65 2061 6c72 6561  tfile file alrea
+00003c70: 6479 2065 7869 7374 3a20 7b7d 2e22 2e66  dy exist: {}.".f
+00003c80: 6f72 6d61 7428 7361 7665 5f6e 616d 6529  ormat(save_name)
+00003c90: 2c0a 2020 2020 2020 2020 2020 2020 736f  ,.            so
+00003ca0: 7572 6365 3d63 6f6e 7665 7274 5f76 6964  urce=convert_vid
+00003cb0: 656f 5f70 6f77 6572 706f 696e 745f 636f  eo_powerpoint_co
+00003cc0: 6d70 6174 6962 6c65 5f66 6f72 6d61 742e  mpatible_format.
+00003cd0: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
+00003ce0: 2020 290a 2020 2020 6966 2067 7075 3a0a    ).    if gpu:.
+00003cf0: 2020 2020 2020 2020 636f 6d6d 616e 6420          command 
+00003d00: 3d20 2766 666d 7065 6720 2d68 7761 6363  = 'ffmpeg -hwacc
+00003d10: 656c 2061 7574 6f20 2d63 3a76 2068 3236  el auto -c:v h26
+00003d20: 345f 6375 7669 6420 2d69 2022 7b7d 2220  4_cuvid -i "{}" 
+00003d30: 2d63 3a76 2068 3236 345f 6e76 656e 6320  -c:v h264_nvenc 
+00003d40: 2d70 7265 7365 7420 736c 6f77 202d 7072  -preset slow -pr
+00003d50: 6f66 696c 653a 7620 6869 6768 202d 6c65  ofile:v high -le
+00003d60: 7665 6c3a 7620 342e 3020 2d70 6978 5f66  vel:v 4.0 -pix_f
+00003d70: 6d74 2079 7576 3432 3070 202d 6372 6620  mt yuv420p -crf 
+00003d80: 3232 202d 633a 6120 6161 6320 227b 7d22  22 -c:a aac "{}"
+00003d90: 272e 666f 726d 6174 280a 2020 2020 2020  '.format(.      
+00003da0: 2020 2020 2020 6669 6c65 5f70 6174 682c        file_path,
+00003db0: 2073 6176 655f 6e61 6d65 0a20 2020 2020   save_name.     
+00003dc0: 2020 2029 0a20 2020 2065 6c73 653a 0a20     ).    else:. 
+00003dd0: 2020 2020 2020 2063 6f6d 6d61 6e64 203d         command =
+00003de0: 2066 2766 666d 7065 6720 2d69 2022 7b66   f'ffmpeg -i "{f
+00003df0: 696c 655f 7061 7468 7d22 202d 633a 7620  ile_path}" -c:v 
+00003e00: 6c69 6278 3236 3420 2d70 7265 7365 7420  libx264 -preset 
+00003e10: 736c 6f77 202d 7072 6f66 696c 653a 7620  slow -profile:v 
+00003e20: 6869 6768 202d 6c65 7665 6c3a 7620 342e  high -level:v 4.
+00003e30: 3020 2d70 6978 5f66 6d74 2079 7576 3432  0 -pix_fmt yuv42
+00003e40: 3070 202d 6372 6620 3232 202d 633a 7620  0p -crf 22 -c:v 
+00003e50: 6c69 6278 3236 3420 2d63 6f64 6563 3a61  libx264 -codec:a
+00003e60: 2061 6163 2022 7b73 6176 655f 6e61 6d65   aac "{save_name
+00003e70: 7d22 202d 7927 0a20 2020 2070 7269 6e74  }" -y'.    print
+00003e80: 2822 4372 6561 7469 6e67 2076 6964 656f  ("Creating video
+00003e90: 2069 6e20 706f 7765 7270 6f69 6e74 2063   in powerpoint c
+00003ea0: 6f6d 7061 7469 626c 6520 666f 726d 6174  ompatible format
+00003eb0: 2e2e 2e20 2229 0a20 2020 2073 7562 7072  ... ").    subpr
+00003ec0: 6f63 6573 732e 6361 6c6c 2863 6f6d 6d61  ocess.call(comma
+00003ed0: 6e64 2c20 7368 656c 6c3d 5472 7565 2c20  nd, shell=True, 
+00003ee0: 7374 646f 7574 3d73 7562 7072 6f63 6573  stdout=subproces
+00003ef0: 732e 5049 5045 290a 2020 2020 7469 6d65  s.PIPE).    time
+00003f00: 722e 7374 6f70 5f74 696d 6572 2829 0a20  r.stop_timer(). 
+00003f10: 2020 2073 7464 6f75 745f 7375 6363 6573     stdout_succes
+00003f20: 7328 0a20 2020 2020 2020 206d 7367 3d66  s(.        msg=f
+00003f30: 2253 494d 4241 2043 4f4d 504c 4554 453a  "SIMBA COMPLETE:
+00003f40: 2056 6964 656f 2063 6f6e 7665 7274 6564   Video converted
+00003f50: 2120 7b73 6176 655f 6e61 6d65 7d20 6765  ! {save_name} ge
+00003f60: 6e65 7261 7465 6421 222c 0a20 2020 2020  nerated!",.     
+00003f70: 2020 2065 6c61 7073 6564 5f74 696d 653d     elapsed_time=
+00003f80: 7469 6d65 722e 656c 6170 7365 645f 7469  timer.elapsed_ti
+00003f90: 6d65 5f73 7472 2c0a 2020 2020 2020 2020  me_str,.        
+00003fa0: 736f 7572 6365 3d63 6f6e 7665 7274 5f76  source=convert_v
+00003fb0: 6964 656f 5f70 6f77 6572 706f 696e 745f  ideo_powerpoint_
+00003fc0: 636f 6d70 6174 6962 6c65 5f66 6f72 6d61  compatible_forma
+00003fd0: 742e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  t.__name__,.    
+00003fe0: 290a 0a0a 2320 636f 6e76 6572 745f 7669  )...# convert_vi
+00003ff0: 6465 6f5f 706f 7765 7270 6f69 6e74 5f63  deo_powerpoint_c
+00004000: 6f6d 7061 7469 626c 655f 666f 726d 6174  ompatible_format
+00004010: 2866 696c 655f 7061 7468 3d72 222f 5573  (file_path=r"/Us
+00004020: 6572 732f 7369 6d6f 6e2f 4465 736b 746f  ers/simon/Deskto
+00004030: 702f 656e 7673 2f73 696d 6261 2f74 726f  p/envs/simba/tro
+00004040: 7562 6c65 7368 6f6f 7469 6e67 2f6d 6f75  ubleshooting/mou
+00004050: 7365 5f6f 7065 6e5f 6669 656c 642f 7072  se_open_field/pr
+00004060: 6f6a 6563 745f 666f 6c64 6572 2f76 6964  oject_folder/vid
+00004070: 656f 732f 7465 7374 2f53 495f 4441 5933  eos/test/SI_DAY3
+00004080: 5f33 3038 5f43 4431 5f50 5245 5345 4e54  _308_CD1_PRESENT
+00004090: 5f66 7073 5f31 305f 6670 735f 3135 2e6d  _fps_10_fps_15.m
+000040a0: 7034 222c 2067 7075 3d46 616c 7365 290a  p4", gpu=False).
+000040b0: 0a0a 6465 6620 636f 6e76 6572 745f 746f  ..def convert_to
+000040c0: 5f6d 7034 280a 2020 2020 6669 6c65 5f70  _mp4(.    file_p
+000040d0: 6174 683a 2055 6e69 6f6e 5b73 7472 2c20  ath: Union[str, 
+000040e0: 6f73 2e50 6174 684c 696b 655d 2c20 6770  os.PathLike], gp
+000040f0: 753a 204f 7074 696f 6e61 6c5b 626f 6f6c  u: Optional[bool
+00004100: 5d20 3d20 4661 6c73 650a 2920 2d3e 204e  ] = False.) -> N
+00004110: 6f6e 653a 0a20 2020 2022 2222 0a20 2020  one:.    """.   
+00004120: 2043 6f6e 7665 7274 2061 2076 6964 656f   Convert a video
+00004130: 2066 696c 6520 746f 206d 7034 2066 6f72   file to mp4 for
+00004140: 6d61 742e 2054 6865 2072 6573 756c 7420  mat. The result 
+00004150: 6973 2073 746f 7265 6420 696e 2074 6865  is stored in the
+00004160: 2073 616d 6520 6469 7265 6374 6f72 7920   same directory 
+00004170: 6173 2074 6865 0a20 2020 2069 6e70 7574  as the.    input
+00004180: 2066 696c 6520 7769 7468 2074 6865 2060   file with the `
+00004190: 605f 636f 6e76 6572 7465 642e 6d70 3460  `_converted.mp4`
+000041a0: 6020 7375 6666 6978 2e0a 0a20 2020 203a  ` suffix...    :
+000041b0: 7061 7261 6d65 7465 7220 556e 696f 6e5b  parameter Union[
+000041c0: 7374 722c 206f 732e 5061 7468 4c69 6b65  str, os.PathLike
+000041d0: 5d20 6669 6c65 5f70 6174 683a 2050 6174  ] file_path: Pat
+000041e0: 6820 746f 2076 6964 656f 2066 696c 652e  h to video file.
+000041f0: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
+00004200: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 2067  Optional[bool] g
+00004210: 7075 3a20 4966 2054 7275 652c 2075 7365  pu: If True, use
+00004220: 204e 5649 4445 4120 4750 5520 636f 6465   NVIDEA GPU code
+00004230: 6373 2e20 4465 6661 756c 7420 4661 6c73  cs. Default Fals
+00004240: 652e 0a0a 2020 2020 3a65 7861 6d70 6c65  e...    :example
+00004250: 3a0a 2020 2020 3e3e 3e20 5f20 3d20 636f  :.    >>> _ = co
+00004260: 6e76 6572 745f 746f 5f6d 7034 2866 696c  nvert_to_mp4(fil
+00004270: 655f 7061 7468 3d27 7072 6f6a 6563 745f  e_path='project_
+00004280: 666f 6c64 6572 2f76 6964 656f 732f 5669  folder/videos/Vi
+00004290: 6465 6f5f 312e 6176 6927 290a 2020 2020  deo_1.avi').    
+000042a0: 2222 220a 0a20 2020 2063 6865 636b 5f66  """..    check_f
+000042b0: 666d 7065 675f 6176 6169 6c61 626c 6528  fmpeg_available(
+000042c0: 7261 6973 655f 6572 726f 723d 5472 7565  raise_error=True
+000042d0: 290a 2020 2020 6966 2067 7075 2061 6e64  ).    if gpu and
+000042e0: 206e 6f74 2063 6865 636b 5f6e 7669 6465   not check_nvide
+000042f0: 615f 6770 755f 6176 6169 6c61 626c 6528  a_gpu_available(
+00004300: 293a 0a20 2020 2020 2020 2072 6169 7365  ):.        raise
+00004310: 2046 464d 5045 4743 6f64 6563 4750 5545   FFMPEGCodecGPUE
+00004320: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+00004330: 2020 6d73 673d 224e 6f20 4750 5520 666f    msg="No GPU fo
+00004340: 756e 6420 2861 7320 6576 616c 7561 7465  und (as evaluate
+00004350: 6420 6279 206e 7669 6465 612d 736d 6920  d by nvidea-smi 
+00004360: 7265 7475 726e 696e 6720 4e6f 6e65 2922  returning None)"
+00004370: 2c0a 2020 2020 2020 2020 2020 2020 736f  ,.            so
+00004380: 7572 6365 3d63 6f6e 7665 7274 5f74 6f5f  urce=convert_to_
+00004390: 6d70 342e 5f5f 6e61 6d65 5f5f 2c0a 2020  mp4.__name__,.  
+000043a0: 2020 2020 2020 290a 2020 2020 7469 6d65        ).    time
+000043b0: 7220 3d20 5369 6d62 6154 696d 6572 2873  r = SimbaTimer(s
+000043c0: 7461 7274 3d54 7275 6529 0a20 2020 2063  tart=True).    c
+000043d0: 6865 636b 5f66 696c 655f 6578 6973 745f  heck_file_exist_
+000043e0: 616e 645f 7265 6164 6162 6c65 2866 696c  and_readable(fil
+000043f0: 655f 7061 7468 3d66 696c 655f 7061 7468  e_path=file_path
+00004400: 290a 2020 2020 6469 722c 2066 696c 655f  ).    dir, file_
+00004410: 6e61 6d65 2c20 6578 7420 3d20 6765 745f  name, ext = get_
+00004420: 666e 5f65 7874 2866 696c 6570 6174 683d  fn_ext(filepath=
+00004430: 6669 6c65 5f70 6174 6829 0a20 2020 2073  file_path).    s
+00004440: 6176 655f 6e61 6d65 203d 206f 732e 7061  ave_name = os.pa
+00004450: 7468 2e6a 6f69 6e28 6469 722c 2066 696c  th.join(dir, fil
+00004460: 655f 6e61 6d65 202b 2022 5f63 6f6e 7665  e_name + "_conve
+00004470: 7274 6564 2e6d 7034 2229 0a20 2020 2069  rted.mp4").    i
+00004480: 6620 6f73 2e70 6174 682e 6973 6669 6c65  f os.path.isfile
+00004490: 2873 6176 655f 6e61 6d65 293a 0a20 2020  (save_name):.   
+000044a0: 2020 2020 2072 6169 7365 2046 696c 6545       raise FileE
+000044b0: 7869 7374 4572 726f 7228 0a20 2020 2020  xistError(.     
+000044c0: 2020 2020 2020 206d 7367 3d22 5349 4d42         msg="SIMB
+000044d0: 4120 4552 524f 523a 2054 6865 206f 7574  A ERROR: The out
+000044e0: 6669 6c65 2066 696c 6520 616c 7265 6164  file file alread
+000044f0: 7920 6578 6973 743a 207b 7d2e 222e 666f  y exist: {}.".fo
+00004500: 726d 6174 2873 6176 655f 6e61 6d65 292c  rmat(save_name),
+00004510: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
+00004520: 7263 653d 636f 6e76 6572 745f 746f 5f6d  rce=convert_to_m
+00004530: 7034 2e5f 5f6e 616d 655f 5f2c 0a20 2020  p4.__name__,.   
+00004540: 2020 2020 2029 0a20 2020 2069 6620 6770       ).    if gp
+00004550: 753a 0a20 2020 2020 2020 2063 6f6d 6d61  u:.        comma
+00004560: 6e64 203d 2028 0a20 2020 2020 2020 2020  nd = (.         
+00004570: 2020 2027 6666 6d70 6567 202d 6877 6163     'ffmpeg -hwac
+00004580: 6365 6c20 6175 746f 202d 633a 7620 6832  cel auto -c:v h2
+00004590: 3634 5f63 7576 6964 202d 6920 227b 7d22  64_cuvid -i "{}"
+000045a0: 202d 633a 7620 6832 3634 5f6e 7665 6e63   -c:v h264_nvenc
+000045b0: 2022 7b7d 2227 2e66 6f72 6d61 7428 0a20   "{}"'.format(. 
+000045c0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000045d0: 696c 655f 7061 7468 2c20 7361 7665 5f6e  ile_path, save_n
+000045e0: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
+000045f0: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+00004600: 656c 7365 3a0a 2020 2020 2020 2020 636f  else:.        co
+00004610: 6d6d 616e 6420 3d20 6627 6666 6d70 6567  mmand = f'ffmpeg
+00004620: 202d 6920 227b 6669 6c65 5f70 6174 687d   -i "{file_path}
+00004630: 2220 2d63 3a76 206c 6962 7832 3634 2022  " -c:v libx264 "
+00004640: 7b73 6176 655f 6e61 6d65 7d22 270a 2020  {save_name}"'.  
+00004650: 2020 7072 696e 7428 2243 6f6e 7665 7274    print("Convert
+00004660: 696e 6720 746f 206d 7034 2e2e 2e20 2229  ing to mp4... ")
+00004670: 0a20 2020 2073 7562 7072 6f63 6573 732e  .    subprocess.
+00004680: 6361 6c6c 2863 6f6d 6d61 6e64 2c20 7368  call(command, sh
+00004690: 656c 6c3d 5472 7565 2c20 7374 646f 7574  ell=True, stdout
+000046a0: 3d73 7562 7072 6f63 6573 732e 5049 5045  =subprocess.PIPE
+000046b0: 290a 2020 2020 7469 6d65 722e 7374 6f70  ).    timer.stop
+000046c0: 5f74 696d 6572 2829 0a20 2020 2073 7464  _timer().    std
+000046d0: 6f75 745f 7375 6363 6573 7328 0a20 2020  out_success(.   
+000046e0: 2020 2020 206d 7367 3d66 2253 494d 4241       msg=f"SIMBA
+000046f0: 2043 4f4d 504c 4554 453a 2056 6964 656f   COMPLETE: Video
+00004700: 2063 6f6e 7665 7274 6564 2120 7b73 6176   converted! {sav
+00004710: 655f 6e61 6d65 7d20 6765 6e65 7261 7465  e_name} generate
+00004720: 6421 222c 0a20 2020 2020 2020 2065 6c61  d!",.        ela
+00004730: 7073 6564 5f74 696d 653d 7469 6d65 722e  psed_time=timer.
+00004740: 656c 6170 7365 645f 7469 6d65 5f73 7472  elapsed_time_str
+00004750: 2c0a 2020 2020 2020 2020 736f 7572 6365  ,.        source
+00004760: 3d63 6f6e 7665 7274 5f74 6f5f 6d70 342e  =convert_to_mp4.
+00004770: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 290a  __name__,.    ).
+00004780: 0a0a 6465 6620 7669 6465 6f5f 746f 5f67  ..def video_to_g
+00004790: 7265 7973 6361 6c65 2866 696c 655f 7061  reyscale(file_pa
+000047a0: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
+000047b0: 732e 5061 7468 4c69 6b65 5d2c 2067 7075  s.PathLike], gpu
+000047c0: 3a20 4f70 7469 6f6e 616c 5b62 6f6f 6c5d  : Optional[bool]
+000047d0: 203d 2046 616c 7365 2920 2d3e 204e 6f6e   = False) -> Non
+000047e0: 653a 0a20 2020 2022 2222 0a20 2020 2043  e:.    """.    C
+000047f0: 6f6e 7665 7274 2061 2076 6964 656f 2066  onvert a video f
+00004800: 696c 6520 746f 2067 7265 7973 6361 6c65  ile to greyscale
+00004810: 206d 7034 2066 6f72 6d61 742e 2054 6865   mp4 format. The
+00004820: 2072 6573 756c 7420 6973 2073 746f 7265   result is store
+00004830: 6420 696e 2074 6865 2073 616d 6520 6469  d in the same di
+00004840: 7265 6374 6f72 7920 6173 2074 6865 0a20  rectory as the. 
+00004850: 2020 2069 6e70 7574 2066 696c 6520 7769     input file wi
+00004860: 7468 2074 6865 2060 605f 6772 6179 7363  th the ``_graysc
+00004870: 616c 652e 6d70 3460 6020 7375 6666 6978  ale.mp4`` suffix
+00004880: 2e0a 0a20 2020 202e 2e20 696d 6167 653a  ...    .. image:
+00004890: 3a20 5f73 7461 7469 632f 696d 672f 746f  : _static/img/to
+000048a0: 5f67 7265 7973 6361 6c65 2e67 6966 0a20  _greyscale.gif. 
+000048b0: 2020 2020 2020 3a77 6964 7468 3a20 3730        :width: 70
+000048c0: 300a 2020 2020 2020 203a 616c 6967 6e3a  0.       :align:
+000048d0: 2063 656e 7465 720a 0a20 2020 203a 7061   center..    :pa
+000048e0: 7261 6d65 7465 7220 556e 696f 6e5b 7374  rameter Union[st
+000048f0: 722c 206f 732e 5061 7468 4c69 6b65 5d20  r, os.PathLike] 
+00004900: 6669 6c65 5f70 6174 683a 2050 6174 6820  file_path: Path 
+00004910: 746f 2076 6964 656f 2066 696c 652e 0a20  to video file.. 
+00004920: 2020 203a 7061 7261 6d65 7465 7220 4f70     :parameter Op
+00004930: 7469 6f6e 616c 5b62 6f6f 6c5d 2067 7075  tional[bool] gpu
+00004940: 3a20 4966 2054 7275 652c 2075 7365 204e  : If True, use N
+00004950: 5649 4445 4120 4750 5520 636f 6465 6373  VIDEA GPU codecs
+00004960: 2e20 4465 6661 756c 7420 4661 6c73 652e  . Default False.
+00004970: 0a20 2020 203a 7261 6973 6520 4646 4d50  .    :raise FFMP
+00004980: 4547 436f 6465 6347 5055 4572 726f 723a  EGCodecGPUError:
+00004990: 2049 6620 6e6f 2047 5055 2069 7320 666f   If no GPU is fo
+000049a0: 756e 6420 616e 6420 6060 6770 7520 3d3d  und and ``gpu ==
+000049b0: 2054 7275 6560 602e 0a20 2020 203a 7261   True``..    :ra
+000049c0: 6973 6520 4669 6c65 4578 6973 7445 7272  ise FileExistErr
+000049d0: 6f72 3a20 4966 2076 6964 656f 206e 616d  or: If video nam
+000049e0: 6520 7769 7468 2060 605f 6772 6179 7363  e with ``_graysc
+000049f0: 616c 6560 6020 7375 6666 6978 2061 6c72  ale`` suffix alr
+00004a00: 6561 6479 2065 7869 7374 2e0a 0a20 2020  eady exist...   
+00004a10: 203a 6578 616d 706c 653a 0a20 2020 203e   :example:.    >
+00004a20: 3e3e 205f 203d 2076 6964 656f 5f74 6f5f  >> _ = video_to_
+00004a30: 6772 6579 7363 616c 6528 6669 6c65 5f70  greyscale(file_p
+00004a40: 6174 683d 2770 726f 6a65 6374 5f66 6f6c  ath='project_fol
+00004a50: 6465 722f 7669 6465 6f73 2f56 6964 656f  der/videos/Video
+00004a60: 5f31 2e61 7669 2729 0a20 2020 2022 2222  _1.avi').    """
+00004a70: 0a20 2020 2063 6865 636b 5f66 666d 7065  .    check_ffmpe
+00004a80: 675f 6176 6169 6c61 626c 6528 7261 6973  g_available(rais
+00004a90: 655f 6572 726f 723d 5472 7565 290a 2020  e_error=True).  
+00004aa0: 2020 6966 2067 7075 2061 6e64 206e 6f74    if gpu and not
+00004ab0: 2063 6865 636b 5f6e 7669 6465 615f 6770   check_nvidea_gp
+00004ac0: 755f 6176 6169 6c61 626c 6528 293a 0a20  u_available():. 
+00004ad0: 2020 2020 2020 2072 6169 7365 2046 464d         raise FFM
+00004ae0: 5045 4743 6f64 6563 4750 5545 7272 6f72  PEGCodecGPUError
+00004af0: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
+00004b00: 673d 224e 6f20 4750 5520 666f 756e 6420  g="No GPU found 
+00004b10: 2861 7320 6576 616c 7561 7465 6420 6279  (as evaluated by
+00004b20: 206e 7669 6465 612d 736d 6920 7265 7475   nvidea-smi retu
+00004b30: 726e 696e 6720 4e6f 6e65 2922 2c0a 2020  rning None)",.  
+00004b40: 2020 2020 2020 2020 2020 736f 7572 6365            source
+00004b50: 3d76 6964 656f 5f74 6f5f 6772 6579 7363  =video_to_greysc
+00004b60: 616c 652e 5f5f 6e61 6d65 5f5f 2c0a 2020  ale.__name__,.  
+00004b70: 2020 2020 2020 290a 2020 2020 7469 6d65        ).    time
+00004b80: 7220 3d20 5369 6d62 6154 696d 6572 2873  r = SimbaTimer(s
+00004b90: 7461 7274 3d54 7275 6529 0a20 2020 2063  tart=True).    c
+00004ba0: 6865 636b 5f66 696c 655f 6578 6973 745f  heck_file_exist_
+00004bb0: 616e 645f 7265 6164 6162 6c65 2866 696c  and_readable(fil
+00004bc0: 655f 7061 7468 3d66 696c 655f 7061 7468  e_path=file_path
+00004bd0: 290a 2020 2020 6469 722c 2066 696c 655f  ).    dir, file_
+00004be0: 6e61 6d65 2c20 6578 7420 3d20 6765 745f  name, ext = get_
+00004bf0: 666e 5f65 7874 2866 696c 6570 6174 683d  fn_ext(filepath=
+00004c00: 6669 6c65 5f70 6174 6829 0a20 2020 2073  file_path).    s
+00004c10: 6176 655f 6e61 6d65 203d 206f 732e 7061  ave_name = os.pa
+00004c20: 7468 2e6a 6f69 6e28 6469 722c 2066 696c  th.join(dir, fil
+00004c30: 655f 6e61 6d65 202b 2022 5f67 7261 7973  e_name + "_grays
+00004c40: 6361 6c65 2e6d 7034 2229 0a20 2020 2069  cale.mp4").    i
+00004c50: 6620 6f73 2e70 6174 682e 6973 6669 6c65  f os.path.isfile
+00004c60: 2873 6176 655f 6e61 6d65 293a 0a20 2020  (save_name):.   
+00004c70: 2020 2020 2072 6169 7365 2046 696c 6545       raise FileE
+00004c80: 7869 7374 4572 726f 7228 0a20 2020 2020  xistError(.     
+00004c90: 2020 2020 2020 206d 7367 3d22 5349 4d42         msg="SIMB
+00004ca0: 4120 4552 524f 523a 2054 6865 206f 7574  A ERROR: The out
+00004cb0: 6669 6c65 2066 696c 6520 616c 7265 6164  file file alread
+00004cc0: 7920 6578 6973 743a 207b 7d2e 222e 666f  y exist: {}.".fo
+00004cd0: 726d 6174 2873 6176 655f 6e61 6d65 292c  rmat(save_name),
+00004ce0: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
+00004cf0: 7263 653d 7669 6465 6f5f 746f 5f67 7265  rce=video_to_gre
+00004d00: 7973 6361 6c65 2e5f 5f6e 616d 655f 5f2c  yscale.__name__,
+00004d10: 0a20 2020 2020 2020 2029 0a20 2020 2069  .        ).    i
+00004d20: 6620 6770 753a 0a20 2020 2020 2020 2063  f gpu:.        c
+00004d30: 6f6d 6d61 6e64 203d 2066 2766 666d 7065  ommand = f'ffmpe
+00004d40: 6720 2d68 7761 6363 656c 2061 7574 6f20  g -hwaccel auto 
+00004d50: 2d63 3a76 2068 3236 345f 6375 7669 6420  -c:v h264_cuvid 
+00004d60: 2d69 2022 7b66 696c 655f 7061 7468 7d22  -i "{file_path}"
+00004d70: 202d 7666 2022 6877 7570 6c6f 6164 5f63   -vf "hwupload_c
+00004d80: 7564 612c 6877 646f 776e 6c6f 6164 2c66  uda,hwdownload,f
+00004d90: 6f72 6d61 743d 6e76 3132 2c66 6f72 6d61  ormat=nv12,forma
+00004da0: 743d 6772 6179 2220 2d63 3a76 2068 3236  t=gray" -c:v h26
+00004db0: 345f 6e76 656e 6320 2d63 3a61 2063 6f70  4_nvenc -c:a cop
+00004dc0: 7920 227b 7361 7665 5f6e 616d 657d 2227  y "{save_name}"'
+00004dd0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+00004de0: 2020 2063 6f6d 6d61 6e64 203d 2066 2766     command = f'f
+00004df0: 666d 7065 6720 2d69 2022 7b66 696c 655f  fmpeg -i "{file_
+00004e00: 7061 7468 7d22 202d 7666 2066 6f72 6d61  path}" -vf forma
+00004e10: 743d 6772 6179 202d 633a 7620 6c69 6278  t=gray -c:v libx
+00004e20: 3236 3420 227b 7361 7665 5f6e 616d 657d  264 "{save_name}
+00004e30: 2227 0a20 2020 2070 7269 6e74 2866 2243  "'.    print(f"C
+00004e40: 6f6e 7665 7274 696e 6720 7b66 696c 655f  onverting {file_
+00004e50: 6e61 6d65 7d20 746f 2067 7265 7973 6361  name} to greysca
+00004e60: 6c65 2e2e 2e20 2229 0a20 2020 2073 7562  le... ").    sub
+00004e70: 7072 6f63 6573 732e 6361 6c6c 2863 6f6d  process.call(com
+00004e80: 6d61 6e64 2c20 7368 656c 6c3d 5472 7565  mand, shell=True
+00004e90: 2c20 7374 646f 7574 3d73 7562 7072 6f63  , stdout=subproc
+00004ea0: 6573 732e 5049 5045 290a 2020 2020 7469  ess.PIPE).    ti
+00004eb0: 6d65 722e 7374 6f70 5f74 696d 6572 2829  mer.stop_timer()
+00004ec0: 0a20 2020 2073 7464 6f75 745f 7375 6363  .    stdout_succ
+00004ed0: 6573 7328 0a20 2020 2020 2020 206d 7367  ess(.        msg
+00004ee0: 3d66 2253 494d 4241 2043 4f4d 504c 4554  =f"SIMBA COMPLET
+00004ef0: 453a 2056 6964 656f 2063 6f6e 7665 7274  E: Video convert
+00004f00: 6564 2120 7b73 6176 655f 6e61 6d65 7d20  ed! {save_name} 
+00004f10: 6765 6e65 7261 7465 6421 222c 0a20 2020  generated!",.   
+00004f20: 2020 2020 2065 6c61 7073 6564 5f74 696d       elapsed_tim
+00004f30: 653d 7469 6d65 722e 656c 6170 7365 645f  e=timer.elapsed_
+00004f40: 7469 6d65 5f73 7472 2c0a 2020 2020 2020  time_str,.      
+00004f50: 2020 736f 7572 6365 3d76 6964 656f 5f74    source=video_t
+00004f60: 6f5f 6772 6579 7363 616c 652e 5f5f 6e61  o_greyscale.__na
+00004f70: 6d65 5f5f 2c0a 2020 2020 290a 0a0a 6465  me__,.    )...de
+00004f80: 6620 6261 7463 685f 7669 6465 6f5f 746f  f batch_video_to
+00004f90: 5f67 7265 7973 6361 6c65 2864 6972 6563  _greyscale(direc
+00004fa0: 746f 7279 3a20 556e 696f 6e5b 7374 722c  tory: Union[str,
+00004fb0: 206f 732e 5061 7468 4c69 6b65 5d2c 2067   os.PathLike], g
+00004fc0: 7075 3a20 4f70 7469 6f6e 616c 5b62 6f6f  pu: Optional[boo
+00004fd0: 6c5d 203d 2046 616c 7365 2920 2d3e 204e  l] = False) -> N
+00004fe0: 6f6e 653a 0a20 2020 2022 2222 0a20 2020  one:.    """.   
+00004ff0: 2043 6f6e 7665 7274 2061 2064 6972 6563   Convert a direc
+00005000: 746f 7279 206f 6620 7669 6465 6f20 6669  tory of video fi
+00005010: 6c65 2074 6f20 6772 6579 7363 616c 6520  le to greyscale 
+00005020: 6d70 3420 666f 726d 6174 2e20 5468 6520  mp4 format. The 
+00005030: 7265 7375 6c74 7320 6172 6520 7374 6f72  results are stor
+00005040: 6564 2069 6e20 7468 6520 7361 6d65 2064  ed in the same d
+00005050: 6972 6563 746f 7279 2061 7320 7468 650a  irectory as the.
+00005060: 2020 2020 696e 7075 7420 6669 6c65 7320      input files 
+00005070: 7769 7468 2074 6865 2060 605f 6772 6179  with the ``_gray
+00005080: 7363 616c 652e 6d70 3460 6020 7375 6666  scale.mp4`` suff
+00005090: 6978 2e0a 0a20 2020 202e 2e20 696d 6167  ix...    .. imag
+000050a0: 653a 3a20 5f73 7461 7469 632f 696d 672f  e:: _static/img/
+000050b0: 746f 5f67 7265 7973 6361 6c65 2e67 6966  to_greyscale.gif
+000050c0: 0a20 2020 2020 2020 3a77 6964 7468 3a20  .       :width: 
+000050d0: 3730 300a 2020 2020 2020 203a 616c 6967  700.       :alig
+000050e0: 6e3a 2063 656e 7465 720a 0a20 2020 203a  n: center..    :
+000050f0: 7061 7261 6d65 7465 7220 556e 696f 6e5b  parameter Union[
+00005100: 7374 722c 206f 732e 5061 7468 4c69 6b65  str, os.PathLike
+00005110: 5d20 6469 7265 6374 6f72 793a 2050 6174  ] directory: Pat
+00005120: 6820 746f 2064 6972 6563 746f 7279 2068  h to directory h
+00005130: 6f6c 6469 6e67 2076 6964 656f 2066 696c  olding video fil
+00005140: 6573 2069 6e20 636f 6c6f 722e 0a20 2020  es in color..   
+00005150: 203a 7061 7261 6d65 7465 7220 4f70 7469   :parameter Opti
+00005160: 6f6e 616c 5b62 6f6f 6c5d 2067 7075 3a20  onal[bool] gpu: 
+00005170: 4966 2054 7275 652c 2075 7365 204e 5649  If True, use NVI
+00005180: 4445 4120 4750 5520 636f 6465 6373 2e20  DEA GPU codecs. 
+00005190: 4465 6661 756c 7420 4661 6c73 652e 0a20  Default False.. 
+000051a0: 2020 203a 7261 6973 6520 4646 4d50 4547     :raise FFMPEG
+000051b0: 436f 6465 6347 5055 4572 726f 723a 2049  CodecGPUError: I
+000051c0: 6620 6e6f 2047 5055 2069 7320 666f 756e  f no GPU is foun
+000051d0: 6420 616e 6420 6060 6770 7520 3d3d 2054  d and ``gpu == T
+000051e0: 7275 6560 602e 0a0a 2020 2020 3a65 7861  rue``...    :exa
+000051f0: 6d70 6c65 3a0a 2020 2020 3e3e 3e20 5f20  mple:.    >>> _ 
+00005200: 3d20 6261 7463 685f 7669 6465 6f5f 746f  = batch_video_to
+00005210: 5f67 7265 7973 6361 6c65 2864 6972 6563  _greyscale(direc
+00005220: 746f 7279 3d27 2f55 7365 7273 2f73 696d  tory='/Users/sim
+00005230: 6f6e 2f44 6573 6b74 6f70 2f65 6e76 732f  on/Desktop/envs/
+00005240: 7369 6d62 612f 7472 6f75 626c 6573 686f  simba/troublesho
+00005250: 6f74 696e 672f 6d6f 7573 655f 6f70 656e  oting/mouse_open
+00005260: 5f66 6965 6c64 2f70 726f 6a65 6374 5f66  _field/project_f
+00005270: 6f6c 6465 722f 7669 6465 6f73 2f74 6573  older/videos/tes
+00005280: 745f 3227 290a 2020 2020 2222 220a 2020  t_2').    """.  
+00005290: 2020 6368 6563 6b5f 6666 6d70 6567 5f61    check_ffmpeg_a
+000052a0: 7661 696c 6162 6c65 2872 6169 7365 5f65  vailable(raise_e
+000052b0: 7272 6f72 3d54 7275 6529 0a20 2020 2069  rror=True).    i
+000052c0: 6620 6770 7520 616e 6420 6e6f 7420 6368  f gpu and not ch
+000052d0: 6563 6b5f 6e76 6964 6561 5f67 7075 5f61  eck_nvidea_gpu_a
+000052e0: 7661 696c 6162 6c65 2829 3a0a 2020 2020  vailable():.    
+000052f0: 2020 2020 7261 6973 6520 4646 4d50 4547      raise FFMPEG
+00005300: 436f 6465 6347 5055 4572 726f 7228 0a20  CodecGPUError(. 
+00005310: 2020 2020 2020 2020 2020 206d 7367 3d22             msg="
+00005320: 4e6f 2047 5055 2066 6f75 6e64 2028 6173  No GPU found (as
+00005330: 2065 7661 6c75 6174 6564 2062 7920 6e76   evaluated by nv
+00005340: 6964 6561 2d73 6d69 2072 6574 7572 6e69  idea-smi returni
+00005350: 6e67 204e 6f6e 6529 222c 0a20 2020 2020  ng None)",.     
+00005360: 2020 2020 2020 2073 6f75 7263 653d 6261         source=ba
+00005370: 7463 685f 7669 6465 6f5f 746f 5f67 7265  tch_video_to_gre
+00005380: 7973 6361 6c65 2e5f 5f6e 616d 655f 5f2c  yscale.__name__,
+00005390: 0a20 2020 2020 2020 2029 0a20 2020 2074  .        ).    t
+000053a0: 696d 6572 203d 2053 696d 6261 5469 6d65  imer = SimbaTime
+000053b0: 7228 7374 6172 743d 5472 7565 290a 2020  r(start=True).  
+000053c0: 2020 6368 6563 6b5f 6966 5f64 6972 5f65    check_if_dir_e
+000053d0: 7869 7374 7328 696e 5f64 6972 3d64 6972  xists(in_dir=dir
+000053e0: 6563 746f 7279 2c20 736f 7572 6365 3d62  ectory, source=b
+000053f0: 6174 6368 5f76 6964 656f 5f74 6f5f 6772  atch_video_to_gr
+00005400: 6579 7363 616c 652e 5f5f 6e61 6d65 5f5f  eyscale.__name__
+00005410: 290a 2020 2020 7669 6465 6f5f 7061 7468  ).    video_path
+00005420: 7320 3d20 6669 6e64 5f61 6c6c 5f76 6964  s = find_all_vid
+00005430: 656f 735f 696e 5f64 6972 6563 746f 7279  eos_in_directory
+00005440: 280a 2020 2020 2020 2020 6469 7265 6374  (.        direct
+00005450: 6f72 793d 6469 7265 6374 6f72 792c 2061  ory=directory, a
+00005460: 735f 6469 6374 3d54 7275 652c 2072 6169  s_dict=True, rai
+00005470: 7365 5f65 7272 6f72 3d54 7275 650a 2020  se_error=True.  
+00005480: 2020 290a 2020 2020 666f 7220 6669 6c65    ).    for file
+00005490: 5f63 6e74 2c20 2866 696c 655f 6e61 6d65  _cnt, (file_name
+000054a0: 2c20 6669 6c65 5f70 6174 6829 2069 6e20  , file_path) in 
+000054b0: 656e 756d 6572 6174 6528 7669 6465 6f5f  enumerate(video_
+000054c0: 7061 7468 732e 6974 656d 7328 2929 3a0a  paths.items()):.
+000054d0: 2020 2020 2020 2020 7669 6465 6f5f 7469          video_ti
+000054e0: 6d65 7220 3d20 5369 6d62 6154 696d 6572  mer = SimbaTimer
+000054f0: 2873 7461 7274 3d54 7275 6529 0a20 2020  (start=True).   
+00005500: 2020 2020 2069 6e5f 6469 722c 205f 2c20       in_dir, _, 
+00005510: 5f20 3d20 6765 745f 666e 5f65 7874 2866  _ = get_fn_ext(f
+00005520: 696c 6570 6174 683d 6669 6c65 5f70 6174  ilepath=file_pat
+00005530: 6829 0a20 2020 2020 2020 2073 6176 655f  h).        save_
+00005540: 6e61 6d65 203d 206f 732e 7061 7468 2e6a  name = os.path.j
+00005550: 6f69 6e28 696e 5f64 6972 2c20 6622 7b66  oin(in_dir, f"{f
+00005560: 696c 655f 6e61 6d65 7d5f 6772 6179 7363  ile_name}_graysc
+00005570: 616c 652e 6d70 3422 290a 2020 2020 2020  ale.mp4").      
+00005580: 2020 6966 2067 7075 3a0a 2020 2020 2020    if gpu:.      
+00005590: 2020 2020 2020 636f 6d6d 616e 6420 3d20        command = 
+000055a0: 6627 6666 6d70 6567 202d 6877 6163 6365  f'ffmpeg -hwacce
+000055b0: 6c20 6175 746f 202d 633a 7620 6832 3634  l auto -c:v h264
+000055c0: 5f63 7576 6964 202d 6920 227b 6669 6c65  _cuvid -i "{file
+000055d0: 5f70 6174 687d 2220 2d76 6620 2268 7775  _path}" -vf "hwu
+000055e0: 706c 6f61 645f 6375 6461 2c68 7764 6f77  pload_cuda,hwdow
+000055f0: 6e6c 6f61 642c 666f 726d 6174 3d6e 7631  nload,format=nv1
+00005600: 322c 666f 726d 6174 3d67 7261 7922 202d  2,format=gray" -
+00005610: 633a 7620 6832 3634 5f6e 7665 6e63 202d  c:v h264_nvenc -
+00005620: 633a 6120 636f 7079 2022 7b73 6176 655f  c:a copy "{save_
+00005630: 6e61 6d65 7d22 202d 7927 0a20 2020 2020  name}" -y'.     
+00005640: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00005650: 2020 2020 2063 6f6d 6d61 6e64 203d 2066       command = f
+00005660: 2766 666d 7065 6720 2d69 2022 7b66 696c  'ffmpeg -i "{fil
+00005670: 655f 7061 7468 7d22 202d 7666 2066 6f72  e_path}" -vf for
+00005680: 6d61 743d 6772 6179 202d 633a 7620 6c69  mat=gray -c:v li
+00005690: 6278 3236 3420 227b 7361 7665 5f6e 616d  bx264 "{save_nam
+000056a0: 657d 2220 2d68 6964 655f 6261 6e6e 6572  e}" -hide_banner
+000056b0: 202d 6c6f 676c 6576 656c 2065 7272 6f72   -loglevel error
+000056c0: 202d 7927 0a20 2020 2020 2020 2070 7269   -y'.        pri
+000056d0: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
+000056e0: 6622 436f 6e76 6572 7469 6e67 207b 6669  f"Converting {fi
+000056f0: 6c65 5f6e 616d 657d 2074 6f20 6772 6579  le_name} to grey
+00005700: 7363 616c 6520 2856 6964 656f 207b 6669  scale (Video {fi
+00005710: 6c65 5f63 6e74 2b31 7d2f 7b6c 656e 286c  le_cnt+1}/{len(l
+00005720: 6973 7428 7669 6465 6f5f 7061 7468 732e  ist(video_paths.
+00005730: 6b65 7973 2829 2929 7d29 2e2e 2e20 220a  keys()))})... ".
+00005740: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00005750: 2020 7375 6270 726f 6365 7373 2e63 616c    subprocess.cal
+00005760: 6c28 636f 6d6d 616e 642c 2073 6865 6c6c  l(command, shell
+00005770: 3d54 7275 652c 2073 7464 6f75 743d 7375  =True, stdout=su
+00005780: 6270 726f 6365 7373 2e50 4950 4529 0a20  bprocess.PIPE). 
+00005790: 2020 2020 2020 2076 6964 656f 5f74 696d         video_tim
+000057a0: 6572 2e73 746f 705f 7469 6d65 7228 290a  er.stop_timer().
+000057b0: 2020 2020 2020 2020 7072 696e 7428 0a20          print(. 
+000057c0: 2020 2020 2020 2020 2020 2066 2256 6964             f"Vid
+000057d0: 656f 207b 7361 7665 5f6e 616d 657d 2063  eo {save_name} c
+000057e0: 6f6d 706c 6574 652c 2028 656c 6170 7365  omplete, (elapse
+000057f0: 6420 7469 6d65 3a20 7b76 6964 656f 5f74  d time: {video_t
+00005800: 696d 6572 2e65 6c61 7073 6564 5f74 696d  imer.elapsed_tim
+00005810: 655f 7374 727d 7329 220a 2020 2020 2020  e_str}s)".      
+00005820: 2020 290a 2020 2020 7469 6d65 722e 7374    ).    timer.st
+00005830: 6f70 5f74 696d 6572 2829 0a20 2020 2073  op_timer().    s
+00005840: 7464 6f75 745f 7375 6363 6573 7328 0a20  tdout_success(. 
+00005850: 2020 2020 2020 206d 7367 3d66 227b 6c65         msg=f"{le
+00005860: 6e28 6c69 7374 2876 6964 656f 5f70 6174  n(list(video_pat
+00005870: 6873 2e6b 6579 7328 2929 297d 2076 6964  hs.keys()))} vid
+00005880: 656f 2873 2920 636f 6e76 6572 7465 6420  eo(s) converted 
+00005890: 746f 2067 7265 7379 7363 616c 6521 2053  to gresyscale! S
+000058a0: 6176 6564 2069 6e20 7b64 6972 6563 746f  aved in {directo
+000058b0: 7279 7d20 7769 7468 2027 5f67 7265 7973  ry} with '_greys
+000058c0: 6361 6c65 2720 7375 6666 6978 222c 0a20  cale' suffix",. 
+000058d0: 2020 2020 2020 2065 6c61 7073 6564 5f74         elapsed_t
+000058e0: 696d 653d 7469 6d65 722e 656c 6170 7365  ime=timer.elapse
+000058f0: 645f 7469 6d65 5f73 7472 2c0a 2020 2020  d_time_str,.    
+00005900: 2020 2020 736f 7572 6365 3d62 6174 6368      source=batch
+00005910: 5f76 6964 656f 5f74 6f5f 6772 6579 7363  _video_to_greysc
+00005920: 616c 652e 5f5f 6e61 6d65 5f5f 2c0a 2020  ale.__name__,.  
+00005930: 2020 290a 0a0a 6465 6620 7375 7065 7269    )...def superi
+00005940: 6d70 6f73 655f 6672 616d 655f 636f 756e  mpose_frame_coun
+00005950: 7428 0a20 2020 2066 696c 655f 7061 7468  t(.    file_path
+00005960: 3a20 556e 696f 6e5b 7374 722c 206f 732e  : Union[str, os.
+00005970: 5061 7468 4c69 6b65 5d2c 2067 7075 3a20  PathLike], gpu: 
+00005980: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 203d  Optional[bool] =
+00005990: 2046 616c 7365 0a29 202d 3e20 4e6f 6e65   False.) -> None
+000059a0: 3a0a 2020 2020 2222 220a 2020 2020 5375  :.    """.    Su
+000059b0: 7065 7269 6d70 6f73 6520 6672 616d 6520  perimpose frame 
+000059c0: 636f 756e 7420 6f6e 2061 2076 6964 656f  count on a video
+000059d0: 2066 696c 652e 2054 6865 2072 6573 756c   file. The resul
+000059e0: 7420 6973 2073 746f 7265 6420 696e 2074  t is stored in t
+000059f0: 6865 2073 616d 6520 6469 7265 6374 6f72  he same director
+00005a00: 7920 6173 2074 6865 0a20 2020 2069 6e70  y as the.    inp
+00005a10: 7574 2066 696c 6520 7769 7468 2074 6865  ut file with the
+00005a20: 2060 605f 6672 616d 655f 6e6f 2e6d 7034   ``_frame_no.mp4
+00005a30: 6060 2073 7566 6669 782e 0a0a 2020 2020  `` suffix...    
+00005a40: 3a70 6172 616d 6574 6572 2055 6e69 6f6e  :parameter Union
+00005a50: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
+00005a60: 655d 2066 696c 655f 7061 7468 3a20 5061  e] file_path: Pa
+00005a70: 7468 2074 6f20 7669 6465 6f20 6669 6c65  th to video file
+00005a80: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
+00005a90: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
+00005aa0: 6770 753a 2049 6620 5472 7565 2c20 7573  gpu: If True, us
+00005ab0: 6520 4e56 4944 4541 2047 5055 2063 6f64  e NVIDEA GPU cod
+00005ac0: 6563 732e 2044 6566 6175 6c74 2046 616c  ecs. Default Fal
+00005ad0: 7365 2e0a 0a20 2020 203a 6578 616d 706c  se...    :exampl
+00005ae0: 653a 0a20 2020 203e 3e3e 205f 203d 2073  e:.    >>> _ = s
+00005af0: 7570 6572 696d 706f 7365 5f66 7261 6d65  uperimpose_frame
+00005b00: 5f63 6f75 6e74 2866 696c 655f 7061 7468  _count(file_path
+00005b10: 3d27 7072 6f6a 6563 745f 666f 6c64 6572  ='project_folder
+00005b20: 2f76 6964 656f 732f 5669 6465 6f5f 312e  /videos/Video_1.
+00005b30: 6176 6927 290a 2020 2020 2222 220a 2020  avi').    """.  
+00005b40: 2020 6368 6563 6b5f 6666 6d70 6567 5f61    check_ffmpeg_a
+00005b50: 7661 696c 6162 6c65 2872 6169 7365 5f65  vailable(raise_e
+00005b60: 7272 6f72 3d54 7275 6529 0a20 2020 2073  rror=True).    s
+00005b70: 696d 6261 5f63 7720 3d20 6f73 2e70 6174  imba_cw = os.pat
+00005b80: 682e 6469 726e 616d 6528 7369 6d62 612e  h.dirname(simba.
+00005b90: 5f5f 6669 6c65 5f5f 290a 2020 2020 7369  __file__).    si
+00005ba0: 6d62 615f 666f 6e74 5f70 6174 6820 3d20  mba_font_path = 
+00005bb0: 6f73 2e70 6174 682e 6a6f 696e 2873 696d  os.path.join(sim
+00005bc0: 6261 5f63 772c 2022 6173 7365 7473 222c  ba_cw, "assets",
+00005bd0: 2022 5562 756e 7475 4d6f 6e6f 2d52 6567   "UbuntuMono-Reg
+00005be0: 756c 6172 2e74 7466 2229 0a20 2020 2074  ular.ttf").    t
+00005bf0: 696d 6572 203d 2053 696d 6261 5469 6d65  imer = SimbaTime
+00005c00: 7228 7374 6172 743d 5472 7565 290a 2020  r(start=True).  
+00005c10: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
+00005c20: 2e69 7366 696c 6528 7369 6d62 615f 666f  .isfile(simba_fo
+00005c30: 6e74 5f70 6174 6829 3a0a 2020 2020 2020  nt_path):.      
+00005c40: 2020 6966 2070 6c61 7466 6f72 6d2e 7379    if platform.sy
+00005c50: 7374 656d 2829 203d 3d20 4f53 2e57 494e  stem() == OS.WIN
+00005c60: 444f 5753 2e76 616c 7565 3a0a 2020 2020  DOWS.value:.    
+00005c70: 2020 2020 2020 2020 7369 6d62 615f 666f          simba_fo
+00005c80: 6e74 5f70 6174 6820 3d20 2243 3a2f 5769  nt_path = "C:/Wi
+00005c90: 6e64 6f77 732f 666f 6e74 732f 6172 6961  ndows/fonts/aria
+00005ca0: 6c2e 7474 6622 0a20 2020 2020 2020 2020  l.ttf".         
+00005cb0: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
+00005cc0: 682e 6973 6669 6c65 2873 696d 6261 5f66  h.isfile(simba_f
+00005cd0: 6f6e 745f 7061 7468 293a 0a20 2020 2020  ont_path):.     
+00005ce0: 2020 2020 2020 2020 2020 2073 696d 6261             simba
+00005cf0: 5f66 6f6e 745f 7061 7468 203d 206f 732e  _font_path = os.
+00005d00: 6c69 7374 6469 7228 7222 433a 2f57 696e  listdir(r"C:/Win
+00005d10: 646f 7773 2f66 6f6e 7473 2229 5b30 5d0a  dows/fonts")[0].
+00005d20: 2020 2020 2020 2020 2020 2020 7369 6d62              simb
+00005d30: 615f 666f 6e74 5f70 6174 6820 3d20 7369  a_font_path = si
+00005d40: 6d62 615f 666f 6e74 5f70 6174 685b 323a  mba_font_path[2:
+00005d50: 5d2e 7265 706c 6163 6528 225c 5c22 2c20  ].replace("\\", 
+00005d60: 222f 2229 0a20 2020 2020 2020 2065 6c69  "/").        eli
+00005d70: 6620 2870 6c61 7466 6f72 6d2e 7379 7374  f (platform.syst
+00005d80: 656d 2829 203d 3d20 4f53 2e4d 4143 2e76  em() == OS.MAC.v
+00005d90: 616c 7565 2920 6f72 2028 0a20 2020 2020  alue) or (.     
+00005da0: 2020 2020 2020 2070 6c61 7466 6f72 6d2e         platform.
+00005db0: 7379 7374 656d 2829 203d 3d20 4f53 2e4c  system() == OS.L
+00005dc0: 494e 5558 2e76 616c 7565 0a20 2020 2020  INUX.value.     
+00005dd0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+00005de0: 2020 7369 6d62 615f 666f 6e74 5f70 6174    simba_font_pat
+00005df0: 6820 3d20 2241 7269 616c 2e74 7466 220a  h = "Arial.ttf".
+00005e00: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00005e10: 2020 6966 2070 6c61 7466 6f72 6d2e 7379    if platform.sy
+00005e20: 7374 656d 2829 203d 3d20 4f53 2e57 494e  stem() == OS.WIN
+00005e30: 444f 5753 2e76 616c 7565 3a0a 2020 2020  DOWS.value:.    
+00005e40: 2020 2020 2020 2020 7369 6d62 615f 666f          simba_fo
+00005e50: 6e74 5f70 6174 6820 3d20 7374 7228 7369  nt_path = str(si
+00005e60: 6d62 615f 666f 6e74 5f70 6174 685b 323a  mba_font_path[2:
+00005e70: 5d2e 7265 706c 6163 6528 225c 5c22 2c20  ].replace("\\", 
+00005e80: 222f 2229 290a 2020 2020 6368 6563 6b5f  "/")).    check_
+00005e90: 6669 6c65 5f65 7869 7374 5f61 6e64 5f72  file_exist_and_r
+00005ea0: 6561 6461 626c 6528 6669 6c65 5f70 6174  eadable(file_pat
+00005eb0: 683d 6669 6c65 5f70 6174 6829 0a20 2020  h=file_path).   
+00005ec0: 2064 6972 2c20 6669 6c65 5f6e 616d 652c   dir, file_name,
+00005ed0: 2065 7874 203d 2067 6574 5f66 6e5f 6578   ext = get_fn_ex
+00005ee0: 7428 6669 6c65 7061 7468 3d66 696c 655f  t(filepath=file_
+00005ef0: 7061 7468 290a 2020 2020 7361 7665 5f6e  path).    save_n
+00005f00: 616d 6520 3d20 6f73 2e70 6174 682e 6a6f  ame = os.path.jo
+00005f10: 696e 2864 6972 2c20 6669 6c65 5f6e 616d  in(dir, file_nam
+00005f20: 6520 2b20 225f 6672 616d 655f 6e6f 2e6d  e + "_frame_no.m
+00005f30: 7034 2229 0a20 2020 2070 7269 6e74 2866  p4").    print(f
+00005f40: 2253 7570 6572 696d 706f 7369 6e67 2066  "Superimposing f
+00005f50: 7261 6d65 206e 756d 6265 7273 2075 7369  rame numbers usi
 00005f60: 6e67 2066 6f6e 7420 7061 7468 207b 7369  ng font path {si
 00005f70: 6d62 615f 666f 6e74 5f70 6174 687d 2e2e  mba_font_path}..
-00005f80: 2e22 290a 2020 2020 2020 2020 7375 6270  .").        subp
-00005f90: 726f 6365 7373 2e63 6865 636b 5f6f 7574  rocess.check_out
-00005fa0: 7075 7428 636f 6d6d 616e 642c 2073 6865  put(command, she
-00005fb0: 6c6c 3d54 7275 6529 0a20 2020 2020 2020  ll=True).       
-00005fc0: 2073 7562 7072 6f63 6573 732e 6361 6c6c   subprocess.call
-00005fd0: 2863 6f6d 6d61 6e64 2c20 7368 656c 6c3d  (command, shell=
-00005fe0: 5472 7565 2c20 7374 646f 7574 3d73 7562  True, stdout=sub
-00005ff0: 7072 6f63 6573 732e 5049 5045 290a 2020  process.PIPE).  
-00006000: 2020 6578 6365 7074 2073 7562 7072 6f63    except subproc
-00006010: 6573 732e 4361 6c6c 6564 5072 6f63 6573  ess.CalledProces
-00006020: 7345 7272 6f72 2061 7320 653a 0a20 2020  sError as e:.   
-00006030: 2020 2020 2069 6620 6770 753a 0a20 2020       if gpu:.   
-00006040: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
-00006050: 203d 2066 2766 666d 7065 6720 2d68 7761   = f'ffmpeg -hwa
-00006060: 6363 656c 2061 7574 6f20 2d63 3a76 2068  ccel auto -c:v h
-00006070: 3236 345f 6375 7669 6420 2d69 2022 7b66  264_cuvid -i "{f
-00006080: 696c 655f 7061 7468 7d22 202d 7666 2022  ile_path}" -vf "
-00006090: 6472 6177 7465 7874 3d66 6f6e 7473 697a  drawtext=fontsiz
-000060a0: 653d 3234 3a66 6f6e 7466 696c 653d 7b73  e=24:fontfile={s
-000060b0: 696d 6261 5f66 6f6e 745f 7061 7468 7d3a  imba_font_path}:
-000060c0: 7465 7874 3d25 7b7b 6e7d 7d3a 783d 2877  text=%{{n}}:x=(w
-000060d0: 2d74 7729 2f32 3a79 3d68 2d74 682d 3130  -tw)/2:y=h-th-10
-000060e0: 3a66 6f6e 7463 6f6c 6f72 3d77 6869 7465  :fontcolor=white
-000060f0: 3a62 6f78 3d31 3a62 6f78 636f 6c6f 723d  :box=1:boxcolor=
-00006100: 7768 6974 6540 302e 3522 202d 633a 7620  white@0.5" -c:v 
-00006110: 6832 3634 5f6e 7665 6e63 202d 633a 6120  h264_nvenc -c:a 
-00006120: 636f 7079 2022 7b73 6176 655f 6e61 6d65  copy "{save_name
-00006130: 7d22 202d 7927 0a20 2020 2020 2020 2065  }" -y'.        e
-00006140: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00006150: 2063 6f6d 6d61 6e64 203d 2066 2766 666d   command = f'ffm
-00006160: 7065 6720 2d79 202d 6920 227b 6669 6c65  peg -y -i "{file
-00006170: 5f70 6174 687d 2220 2d76 6620 2264 7261  _path}" -vf "dra
-00006180: 7774 6578 743d 666f 6e74 6669 6c65 3d7b  wtext=fontfile={
-00006190: 7369 6d62 615f 666f 6e74 5f70 6174 687d  simba_font_path}
-000061a0: 3a74 6578 743d 5c27 257b 7b66 7261 6d65  :text=\'%{{frame
-000061b0: 5f6e 756d 7d7d 5c27 3a73 7461 7274 5f6e  _num}}\':start_n
-000061c0: 756d 6265 723d 313a 783d 2877 2d74 7729  umber=1:x=(w-tw)
-000061d0: 2f32 3a79 3d68 2d28 322a 6c68 293a 666f  /2:y=h-(2*lh):fo
-000061e0: 6e74 636f 6c6f 723d 626c 6163 6b3a 666f  ntcolor=black:fo
-000061f0: 6e74 7369 7a65 3d32 303a 626f 783d 313a  ntsize=20:box=1:
-00006200: 626f 7863 6f6c 6f72 3d77 6869 7465 3a62  boxcolor=white:b
-00006210: 6f78 626f 7264 6572 773d 3522 202d 633a  oxborderw=5" -c:
-00006220: 6120 636f 7079 2022 7b73 6176 655f 6e61  a copy "{save_na
-00006230: 6d65 7d22 202d 7927 0a20 2020 2020 2020  me}" -y'.       
-00006240: 2070 7269 6e74 2866 2255 7369 6e67 2066   print(f"Using f
-00006250: 6f6e 7420 7061 7468 207b 7369 6d62 615f  ont path {simba_
-00006260: 666f 6e74 5f70 6174 687d 2e2e 2e22 290a  font_path}...").
-00006270: 2020 2020 2020 2020 7375 6270 726f 6365          subproce
-00006280: 7373 2e63 616c 6c28 636f 6d6d 616e 642c  ss.call(command,
-00006290: 2073 6865 6c6c 3d54 7275 652c 2073 7464   shell=True, std
-000062a0: 6f75 743d 7375 6270 726f 6365 7373 2e50  out=subprocess.P
-000062b0: 4950 4529 0a20 2020 2074 696d 6572 2e73  IPE).    timer.s
-000062c0: 746f 705f 7469 6d65 7228 290a 2020 2020  top_timer().    
-000062d0: 7374 646f 7574 5f73 7563 6365 7373 280a  stdout_success(.
-000062e0: 2020 2020 2020 2020 6d73 673d 6622 5375          msg=f"Su
-000062f0: 7065 7269 6d70 6f73 6564 2076 6964 656f  perimposed video
-00006300: 2063 6f6e 7665 7274 6564 2120 7b73 6176   converted! {sav
-00006310: 655f 6e61 6d65 7d20 6765 6e65 7261 7465  e_name} generate
-00006320: 6421 222c 0a20 2020 2020 2020 2065 6c61  d!",.        ela
-00006330: 7073 6564 5f74 696d 653d 7469 6d65 722e  psed_time=timer.
-00006340: 656c 6170 7365 645f 7469 6d65 5f73 7472  elapsed_time_str
-00006350: 2c0a 2020 2020 290a 0a0a 2320 5f20 3d20  ,.    )...# _ = 
-00006360: 7375 7065 7269 6d70 6f73 655f 6672 616d  superimpose_fram
-00006370: 655f 636f 756e 7428 6669 6c65 5f70 6174  e_count(file_pat
-00006380: 683d 7227 2f55 7365 7273 2f73 696d 6f6e  h=r'/Users/simon
-00006390: 2f44 6573 6b74 6f70 2f65 6e76 732f 7369  /Desktop/envs/si
-000063a0: 6d62 612f 7472 6f75 626c 6573 686f 6f74  mba/troubleshoot
-000063b0: 696e 672f 6d6f 7573 655f 6f70 656e 5f66  ing/mouse_open_f
-000063c0: 6965 6c64 2f70 726f 6a65 6374 5f66 6f6c  ield/project_fol
-000063d0: 6465 722f 7669 6465 6f73 2f53 495f 4441  der/videos/SI_DA
-000063e0: 5933 5f33 3038 5f43 4431 5f50 5245 5345  Y3_308_CD1_PRESE
-000063f0: 4e54 2e6d 7034 272c 2067 7075 3d46 616c  NT.mp4', gpu=Fal
-00006400: 7365 290a 0a0a 6465 6620 7265 6d6f 7665  se)...def remove
-00006410: 5f62 6567 696e 6e69 6e67 5f6f 665f 7669  _beginning_of_vi
-00006420: 6465 6f28 0a20 2020 2066 696c 655f 7061  deo(.    file_pa
-00006430: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
-00006440: 732e 5061 7468 4c69 6b65 5d2c 2074 696d  s.PathLike], tim
-00006450: 653a 2069 6e74 2c20 6770 753a 204f 7074  e: int, gpu: Opt
-00006460: 696f 6e61 6c5b 626f 6f6c 5d20 3d20 4661  ional[bool] = Fa
-00006470: 6c73 650a 2920 2d3e 204e 6f6e 653a 0a20  lse.) -> None:. 
-00006480: 2020 2022 2222 0a20 2020 2052 656d 6f76     """.    Remov
-00006490: 6520 4e20 7365 636f 6e64 7320 6672 6f6d  e N seconds from
-000064a0: 2074 6865 2062 6567 696e 6e69 6e67 206f   the beginning o
-000064b0: 6620 6120 7669 6465 6f20 6669 6c65 2e20  f a video file. 
-000064c0: 5468 6520 7265 7375 6c74 2069 7320 7374  The result is st
-000064d0: 6f72 6564 2069 6e20 7468 6520 7361 6d65  ored in the same
-000064e0: 2064 6972 6563 746f 7279 2061 7320 7468   directory as th
-000064f0: 650a 2020 2020 696e 7075 7420 6669 6c65  e.    input file
-00006500: 2077 6974 6820 7468 6520 6060 5f73 686f   with the ``_sho
-00006510: 7274 656e 2e6d 7034 6060 2073 7566 6669  rten.mp4`` suffi
-00006520: 782e 0a0a 2020 2020 3a70 6172 616d 6574  x...    :paramet
-00006530: 6572 2055 6e69 6f6e 5b73 7472 2c20 6f73  er Union[str, os
-00006540: 2e50 6174 684c 696b 655d 2066 696c 655f  .PathLike] file_
-00006550: 7061 7468 3a20 5061 7468 2074 6f20 7669  path: Path to vi
-00006560: 6465 6f20 6669 6c65 0a20 2020 203a 7061  deo file.    :pa
-00006570: 7261 6d65 7465 7220 696e 7420 7469 6d65  rameter int time
-00006580: 3a20 4e75 6d62 6572 206f 6620 7365 636f  : Number of seco
-00006590: 6e64 7320 746f 2072 656d 6f76 6520 6672  nds to remove fr
-000065a0: 6f6d 2074 6865 2062 6567 696e 6e69 6e67  om the beginning
-000065b0: 206f 6620 7468 6520 7669 6465 6f2e 0a20   of the video.. 
-000065c0: 2020 203a 7061 7261 6d65 7465 7220 4f70     :parameter Op
-000065d0: 7469 6f6e 616c 5b62 6f6f 6c5d 2067 7075  tional[bool] gpu
-000065e0: 3a20 4966 2054 7275 652c 2075 7365 204e  : If True, use N
-000065f0: 5649 4445 4120 4750 5520 636f 6465 6373  VIDEA GPU codecs
-00006600: 2e20 4465 6661 756c 7420 4661 6c73 652e  . Default False.
-00006610: 0a0a 2020 2020 3a65 7861 6d70 6c65 3a0a  ..    :example:.
-00006620: 2020 2020 3e3e 3e20 5f20 3d20 7265 6d6f      >>> _ = remo
-00006630: 7665 5f62 6567 696e 6e69 6e67 5f6f 665f  ve_beginning_of_
-00006640: 7669 6465 6f28 6669 6c65 5f70 6174 683d  video(file_path=
-00006650: 2770 726f 6a65 6374 5f66 6f6c 6465 722f  'project_folder/
-00006660: 7669 6465 6f73 2f56 6964 656f 5f31 2e61  videos/Video_1.a
-00006670: 7669 272c 2074 696d 653d 3130 290a 2020  vi', time=10).  
-00006680: 2020 2222 220a 0a20 2020 2063 6865 636b    """..    check
-00006690: 5f66 666d 7065 675f 6176 6169 6c61 626c  _ffmpeg_availabl
-000066a0: 6528 7261 6973 655f 6572 726f 723d 5472  e(raise_error=Tr
-000066b0: 7565 290a 2020 2020 7469 6d65 7220 3d20  ue).    timer = 
-000066c0: 5369 6d62 6154 696d 6572 2873 7461 7274  SimbaTimer(start
-000066d0: 3d54 7275 6529 0a20 2020 2063 6865 636b  =True).    check
-000066e0: 5f66 696c 655f 6578 6973 745f 616e 645f  _file_exist_and_
-000066f0: 7265 6164 6162 6c65 2866 696c 655f 7061  readable(file_pa
-00006700: 7468 3d66 696c 655f 7061 7468 290a 2020  th=file_path).  
-00006710: 2020 6368 6563 6b5f 696e 7428 6e61 6d65    check_int(name
-00006720: 3d22 4375 7420 7469 6d65 222c 2076 616c  ="Cut time", val
-00006730: 7565 3d74 696d 6529 0a20 2020 2064 6972  ue=time).    dir
-00006740: 2c20 6669 6c65 5f6e 616d 652c 2065 7874  , file_name, ext
-00006750: 203d 2067 6574 5f66 6e5f 6578 7428 6669   = get_fn_ext(fi
-00006760: 6c65 7061 7468 3d66 696c 655f 7061 7468  lepath=file_path
-00006770: 290a 2020 2020 7361 7665 5f6e 616d 6520  ).    save_name 
-00006780: 3d20 6f73 2e70 6174 682e 6a6f 696e 2864  = os.path.join(d
-00006790: 6972 2c20 6669 6c65 5f6e 616d 6520 2b20  ir, file_name + 
-000067a0: 225f 7368 6f72 7465 6e2e 6d70 3422 290a  "_shorten.mp4").
-000067b0: 2020 2020 6966 206f 732e 7061 7468 2e69      if os.path.i
-000067c0: 7366 696c 6528 7361 7665 5f6e 616d 6529  sfile(save_name)
-000067d0: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
-000067e0: 4669 6c65 4578 6973 7445 7272 6f72 280a  FileExistError(.
-000067f0: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
-00006800: 2253 494d 4241 2045 5252 4f52 3a20 5468  "SIMBA ERROR: Th
-00006810: 6520 6f75 7466 696c 6520 6669 6c65 2061  e outfile file a
-00006820: 6c72 6561 6479 2065 7869 7374 3a20 7b7d  lready exist: {}
-00006830: 2e22 2e66 6f72 6d61 7428 7361 7665 5f6e  .".format(save_n
-00006840: 616d 6529 2c0a 2020 2020 2020 2020 2020  ame),.          
-00006850: 2020 736f 7572 6365 3d72 656d 6f76 655f    source=remove_
-00006860: 6265 6769 6e6e 696e 675f 6f66 5f76 6964  beginning_of_vid
-00006870: 656f 2e5f 5f6e 616d 655f 5f2c 0a20 2020  eo.__name__,.   
-00006880: 2020 2020 2029 0a20 2020 2069 6620 6770       ).    if gp
-00006890: 753a 0a20 2020 2020 2020 2069 6620 6e6f  u:.        if no
-000068a0: 7420 6368 6563 6b5f 6e76 6964 6561 5f67  t check_nvidea_g
-000068b0: 7075 5f61 7661 696c 6162 6c65 2829 3a0a  pu_available():.
-000068c0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000068d0: 6520 4646 4d50 4547 436f 6465 6347 5055  e FFMPEGCodecGPU
-000068e0: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
-000068f0: 2020 2020 2020 206d 7367 3d22 4e6f 2047         msg="No G
-00006900: 5055 2066 6f75 6e64 2028 6173 2065 7661  PU found (as eva
-00006910: 6c75 6174 6564 2062 7920 6e76 6964 6561  luated by nvidea
-00006920: 2d73 6d69 2072 6574 7572 6e69 6e67 204e  -smi returning N
-00006930: 6f6e 6529 222c 0a20 2020 2020 2020 2020  one)",.         
-00006940: 2020 2020 2020 2073 6f75 7263 653d 7265         source=re
-00006950: 6d6f 7665 5f62 6567 696e 6e69 6e67 5f6f  move_beginning_o
-00006960: 665f 7669 6465 6f2e 5f5f 6e61 6d65 5f5f  f_video.__name__
-00006970: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
-00006980: 2020 2020 2020 2020 636f 6d6d 616e 6420          command 
-00006990: 3d20 2766 666d 7065 6720 2d68 7761 6363  = 'ffmpeg -hwacc
-000069a0: 656c 2061 7574 6f20 2d63 3a76 2068 3236  el auto -c:v h26
-000069b0: 345f 6375 7669 6420 2d73 7320 7b7d 202d  4_cuvid -ss {} -
-000069c0: 6920 227b 7d22 202d 633a 7620 6832 3634  i "{}" -c:v h264
-000069d0: 5f6e 7665 6e63 202d 633a 6120 6161 6320  _nvenc -c:a aac 
-000069e0: 227b 7d22 272e 666f 726d 6174 280a 2020  "{}"'.format(.  
-000069f0: 2020 2020 2020 2020 2020 696e 7428 7469            int(ti
-00006a00: 6d65 292c 2066 696c 655f 7061 7468 2c20  me), file_path, 
-00006a10: 7361 7665 5f6e 616d 650a 2020 2020 2020  save_name.      
-00006a20: 2020 290a 2020 2020 656c 7365 3a0a 2020    ).    else:.  
-00006a30: 2020 2020 2020 636f 6d6d 616e 6420 3d20        command = 
-00006a40: 6627 6666 6d70 6567 202d 7373 207b 696e  f'ffmpeg -ss {in
-00006a50: 7428 7469 6d65 297d 202d 6920 227b 6669  t(time)} -i "{fi
-00006a60: 6c65 5f70 6174 687d 2220 2d63 3a76 206c  le_path}" -c:v l
-00006a70: 6962 7832 3634 202d 633a 6120 6161 6320  ibx264 -c:a aac 
-00006a80: 227b 7361 7665 5f6e 616d 657d 2227 0a20  "{save_name}"'. 
-00006a90: 2020 2070 7269 6e74 2822 5368 6f72 7465     print("Shorte
-00006aa0: 6e69 6e67 2076 6964 656f 2e2e 2e20 2229  ning video... ")
-00006ab0: 0a20 2020 2073 7562 7072 6f63 6573 732e  .    subprocess.
-00006ac0: 6361 6c6c 2863 6f6d 6d61 6e64 2c20 7368  call(command, sh
-00006ad0: 656c 6c3d 5472 7565 2c20 7374 646f 7574  ell=True, stdout
-00006ae0: 3d73 7562 7072 6f63 6573 732e 5049 5045  =subprocess.PIPE
-00006af0: 290a 2020 2020 7469 6d65 722e 7374 6f70  ).    timer.stop
-00006b00: 5f74 696d 6572 2829 0a20 2020 2073 7464  _timer().    std
-00006b10: 6f75 745f 7375 6363 6573 7328 0a20 2020  out_success(.   
-00006b20: 2020 2020 206d 7367 3d66 2253 494d 4241       msg=f"SIMBA
-00006b30: 2043 4f4d 504c 4554 453a 2056 6964 656f   COMPLETE: Video
-00006b40: 2063 6f6e 7665 7274 6564 2120 7b73 6176   converted! {sav
-00006b50: 655f 6e61 6d65 7d20 6765 6e65 7261 7465  e_name} generate
-00006b60: 6421 222c 0a20 2020 2020 2020 2065 6c61  d!",.        ela
-00006b70: 7073 6564 5f74 696d 653d 7469 6d65 722e  psed_time=timer.
-00006b80: 656c 6170 7365 645f 7469 6d65 5f73 7472  elapsed_time_str
-00006b90: 2c0a 2020 2020 2020 2020 736f 7572 6365  ,.        source
-00006ba0: 3d72 656d 6f76 655f 6265 6769 6e6e 696e  =remove_beginnin
-00006bb0: 675f 6f66 5f76 6964 656f 2e5f 5f6e 616d  g_of_video.__nam
-00006bc0: 655f 5f2c 0a20 2020 2029 0a0a 0a23 2072  e__,.    )...# r
-00006bd0: 656d 6f76 655f 6265 6769 6e6e 696e 675f  emove_beginning_
-00006be0: 6f66 5f76 6964 656f 2866 696c 655f 7061  of_video(file_pa
-00006bf0: 7468 3d72 272f 5573 6572 732f 7369 6d6f  th=r'/Users/simo
-00006c00: 6e2f 4465 736b 746f 702f 656e 7673 2f73  n/Desktop/envs/s
-00006c10: 696d 6261 2f74 726f 7562 6c65 7368 6f6f  imba/troubleshoo
-00006c20: 7469 6e67 2f6d 6f75 7365 5f6f 7065 6e5f  ting/mouse_open_
-00006c30: 6669 656c 642f 7072 6f6a 6563 745f 666f  field/project_fo
-00006c40: 6c64 6572 2f76 6964 656f 732f 5349 5f44  lder/videos/SI_D
-00006c50: 4159 335f 3330 385f 4344 315f 5052 4553  AY3_308_CD1_PRES
-00006c60: 454e 545f 6672 616d 655f 6e6f 2e6d 7034  ENT_frame_no.mp4
-00006c70: 272c 2074 696d 653d 3130 2c20 6770 753d  ', time=10, gpu=
-00006c80: 4661 6c73 6529 0a0a 0a64 6566 2063 6c69  False)...def cli
-00006c90: 705f 7669 6465 6f5f 696e 5f72 616e 6765  p_video_in_range
-00006ca0: 280a 2020 2020 6669 6c65 5f70 6174 683a  (.    file_path:
-00006cb0: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
-00006cc0: 6174 684c 696b 655d 2c0a 2020 2020 7374  athLike],.    st
-00006cd0: 6172 745f 7469 6d65 3a20 7374 722c 0a20  art_time: str,. 
-00006ce0: 2020 2065 6e64 5f74 696d 653a 2073 7472     end_time: str
-00006cf0: 2c0a 2020 2020 6f75 745f 6469 723a 204f  ,.    out_dir: O
-00006d00: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
-00006d10: 722c 206f 732e 5061 7468 4c69 6b65 5d5d  r, os.PathLike]]
-00006d20: 203d 204e 6f6e 652c 0a20 2020 206f 7665   = None,.    ove
-00006d30: 7277 7269 7465 3a20 4f70 7469 6f6e 616c  rwrite: Optional
-00006d40: 5b62 6f6f 6c5d 203d 2046 616c 7365 2c0a  [bool] = False,.
-00006d50: 2020 2020 696e 636c 7564 655f 636c 6970      include_clip
-00006d60: 5f74 696d 655f 696e 5f66 696c 656e 616d  _time_in_filenam
-00006d70: 653a 204f 7074 696f 6e61 6c5b 626f 6f6c  e: Optional[bool
-00006d80: 5d20 3d20 4661 6c73 652c 0a20 2020 2067  ] = False,.    g
-00006d90: 7075 3a20 4f70 7469 6f6e 616c 5b62 6f6f  pu: Optional[boo
-00006da0: 6c5d 203d 2046 616c 7365 2c0a 2920 2d3e  l] = False,.) ->
-00006db0: 204e 6f6e 653a 0a20 2020 2022 2222 0a20   None:.    """. 
-00006dc0: 2020 2043 6c69 7020 7669 6465 6f20 7769     Clip video wi
-00006dd0: 7468 696e 2061 2073 7065 6369 6669 6320  thin a specific 
-00006de0: 7261 6e67 652e 2054 6865 2072 6573 756c  range. The resul
-00006df0: 7420 6973 2073 746f 7265 6420 696e 2074  t is stored in t
-00006e00: 6865 2073 616d 6520 6469 7265 6374 6f72  he same director
-00006e10: 7920 6173 2074 6865 0a20 2020 2069 6e70  y as the.    inp
-00006e20: 7574 2066 696c 6520 7769 7468 2074 6865  ut file with the
-00006e30: 2060 605f 636c 6970 7065 642e 6d70 3460   ``_clipped.mp4`
-00006e40: 6020 7375 6666 6978 2e0a 0a20 2020 203a  ` suffix...    :
-00006e50: 7061 7261 6d65 7465 7220 556e 696f 6e5b  parameter Union[
-00006e60: 7374 722c 206f 732e 5061 7468 4c69 6b65  str, os.PathLike
-00006e70: 5d20 6669 6c65 5f70 6174 683a 2050 6174  ] file_path: Pat
-00006e80: 6820 746f 2076 6964 656f 2066 696c 650a  h to video file.
-00006e90: 2020 2020 3a70 6172 616d 6574 6572 2073      :parameter s
-00006ea0: 7472 2073 7461 7274 5f74 696d 653a 2053  tr start_time: S
-00006eb0: 7461 7274 2074 696d 6520 696e 2048 483a  tart time in HH:
-00006ec0: 4d4d 3a53 5320 666f 726d 6174 2e0a 2020  MM:SS format..  
-00006ed0: 2020 3a70 6172 616d 6574 6572 2073 7472    :parameter str
-00006ee0: 2065 6e64 5f74 696d 653a 2045 6e64 2074   end_time: End t
-00006ef0: 696d 6520 696e 2048 483a 4d4d 3a53 5320  ime in HH:MM:SS 
-00006f00: 666f 726d 6174 2e0a 2020 2020 3a70 6172  format..    :par
-00006f10: 616d 6574 6572 204f 7074 696f 6e61 6c5b  ameter Optional[
-00006f20: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
-00006f30: 7468 4c69 6b65 5d5d 206f 7574 5f64 6972  thLike]] out_dir
-00006f40: 3a20 4966 204e 6f6e 652c 2074 6865 6e20  : If None, then 
-00006f50: 7468 6520 636c 6970 2077 696c 6c20 6265  the clip will be
-00006f60: 2073 746f 7265 6420 696e 2074 6865 2073   stored in the s
-00006f70: 616d 6520 6469 7220 6173 2074 6865 2069  ame dir as the i
-00006f80: 6e70 7574 2076 6964 656f 2e20 4966 2064  nput video. If d
-00006f90: 6972 6563 746f 7279 2c20 7468 656e 2074  irectory, then t
-00006fa0: 6865 206c 6f63 6174 696f 6e20 6f66 2074  he location of t
-00006fb0: 6865 206f 7574 7075 7420 6669 6c65 732e  he output files.
-00006fc0: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
-00006fd0: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 2069  Optional[bool] i
-00006fe0: 6e63 6c75 6465 5f63 6c69 705f 7469 6d65  nclude_clip_time
-00006ff0: 5f69 6e5f 6669 6c65 6e61 6d65 3a20 4966  _in_filename: If
-00007000: 2054 7275 652c 2069 6e63 6c75 6465 2074   True, include t
-00007010: 6865 2063 6c69 7020 7374 6172 7420 616e  he clip start an
-00007020: 6420 656e 6420 696e 2048 482d 4d4d 2d53  d end in HH-MM-S
-00007030: 5320 666f 726d 6174 2061 7320 7375 6666  S format as suff
-00007040: 6978 2069 6e20 7468 6520 6669 6c65 6e61  ix in the filena
-00007050: 6d65 2e20 4966 2046 616c 7365 2c20 7468  me. If False, th
-00007060: 656e 2075 7365 2069 6e74 6567 6572 2073  en use integer s
-00007070: 7566 6669 6320 7265 7072 6573 656e 7469  uffic representi
-00007080: 6e67 2074 6865 2063 6f75 6e74 2e0a 2020  ng the count..  
-00007090: 2020 3a70 6172 616d 6574 6572 204f 7074    :parameter Opt
-000070a0: 696f 6e61 6c5b 626f 6f6c 5d20 6f76 6572  ional[bool] over
-000070b0: 7772 6974 653a 2049 6620 5472 7565 2c20  write: If True, 
-000070c0: 7468 6520 6f76 6572 7772 6974 6520 6f75  the overwrite ou
-000070d0: 7470 7574 2066 696c 6520 6966 2070 6174  tput file if pat
-000070e0: 6820 616c 7265 6164 7920 6578 6973 742e  h already exist.
-000070f0: 2049 6620 4661 6c73 652c 2074 6865 6e20   If False, then 
-00007100: 7261 6973 6520 4669 6c65 4578 6973 7445  raise FileExistE
-00007110: 7272 6f72 2e0a 2020 2020 3a70 6172 616d  rror..    :param
-00007120: 6574 6572 204f 7074 696f 6e61 6c5b 626f  eter Optional[bo
-00007130: 6f6c 5d20 6770 753a 2049 6620 5472 7565  ol] gpu: If True
-00007140: 2c20 7573 6520 4e56 4944 4541 2047 5055  , use NVIDEA GPU
-00007150: 2063 6f64 6563 732e 2044 6566 6175 6c74   codecs. Default
-00007160: 2046 616c 7365 2e0a 0a20 2020 203a 6578   False...    :ex
-00007170: 616d 706c 653a 0a20 2020 203e 3e3e 205f  ample:.    >>> _
-00007180: 203d 2063 6c69 705f 7669 6465 6f5f 696e   = clip_video_in
-00007190: 5f72 616e 6765 2866 696c 655f 7061 7468  _range(file_path
-000071a0: 3d27 7072 6f6a 6563 745f 666f 6c64 6572  ='project_folder
-000071b0: 2f76 6964 656f 732f 5669 6465 6f5f 312e  /videos/Video_1.
-000071c0: 6176 6927 2c20 7374 6172 745f 7469 6d65  avi', start_time
-000071d0: 3d27 3030 3a30 303a 3035 272c 2065 6e64  ='00:00:05', end
-000071e0: 5f74 696d 653d 2730 303a 3030 3a31 3027  _time='00:00:10'
-000071f0: 290a 2020 2020 2222 220a 0a20 2020 2063  ).    """..    c
-00007200: 6865 636b 5f66 666d 7065 675f 6176 6169  heck_ffmpeg_avai
-00007210: 6c61 626c 6528 7261 6973 655f 6572 726f  lable(raise_erro
-00007220: 723d 5472 7565 290a 2020 2020 6966 2067  r=True).    if g
-00007230: 7075 2061 6e64 206e 6f74 2063 6865 636b  pu and not check
-00007240: 5f6e 7669 6465 615f 6770 755f 6176 6169  _nvidea_gpu_avai
-00007250: 6c61 626c 6528 293a 0a20 2020 2020 2020  lable():.       
-00007260: 2072 6169 7365 2046 464d 5045 4743 6f64   raise FFMPEGCod
-00007270: 6563 4750 5545 7272 6f72 280a 2020 2020  ecGPUError(.    
-00007280: 2020 2020 2020 2020 6d73 673d 224e 6f20          msg="No 
-00007290: 4750 5520 666f 756e 6420 2861 7320 6576  GPU found (as ev
-000072a0: 616c 7561 7465 6420 6279 206e 7669 6465  aluated by nvide
-000072b0: 612d 736d 6920 7265 7475 726e 696e 6720  a-smi returning 
-000072c0: 4e6f 6e65 2922 2c0a 2020 2020 2020 2020  None)",.        
-000072d0: 2020 2020 736f 7572 6365 3d63 6c69 705f      source=clip_
-000072e0: 7669 6465 6f5f 696e 5f72 616e 6765 2e5f  video_in_range._
-000072f0: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
-00007300: 2029 0a20 2020 2074 696d 6572 203d 2053   ).    timer = S
-00007310: 696d 6261 5469 6d65 7228 7374 6172 743d  imbaTimer(start=
-00007320: 5472 7565 290a 2020 2020 6368 6563 6b5f  True).    check_
-00007330: 6669 6c65 5f65 7869 7374 5f61 6e64 5f72  file_exist_and_r
-00007340: 6561 6461 626c 6528 6669 6c65 5f70 6174  eadable(file_pat
-00007350: 683d 6669 6c65 5f70 6174 6829 0a20 2020  h=file_path).   
-00007360: 2064 6972 2c20 6669 6c65 5f6e 616d 652c   dir, file_name,
-00007370: 2065 7874 203d 2067 6574 5f66 6e5f 6578   ext = get_fn_ex
-00007380: 7428 6669 6c65 7061 7468 3d66 696c 655f  t(filepath=file_
-00007390: 7061 7468 290a 2020 2020 6966 206f 7574  path).    if out
-000073a0: 5f64 6972 2069 7320 6e6f 7420 4e6f 6e65  _dir is not None
-000073b0: 3a0a 2020 2020 2020 2020 6368 6563 6b5f  :.        check_
-000073c0: 6966 5f64 6972 5f65 7869 7374 7328 696e  if_dir_exists(in
-000073d0: 5f64 6972 3d6f 7574 5f64 6972 290a 2020  _dir=out_dir).  
-000073e0: 2020 2020 2020 6469 7220 3d20 6f75 745f        dir = out_
-000073f0: 6469 720a 2020 2020 6368 6563 6b5f 6966  dir.    check_if
-00007400: 5f73 7472 696e 675f 7661 6c75 655f 6973  _string_value_is
-00007410: 5f76 616c 6964 5f76 6964 656f 5f74 696d  _valid_video_tim
-00007420: 6573 7461 6d70 2876 616c 7565 3d73 7461  estamp(value=sta
-00007430: 7274 5f74 696d 652c 206e 616d 653d 2253  rt_time, name="S
-00007440: 5441 5254 2054 494d 4522 290a 2020 2020  TART TIME").    
-00007450: 6368 6563 6b5f 6966 5f73 7472 696e 675f  check_if_string_
-00007460: 7661 6c75 655f 6973 5f76 616c 6964 5f76  value_is_valid_v
-00007470: 6964 656f 5f74 696d 6573 7461 6d70 2876  ideo_timestamp(v
-00007480: 616c 7565 3d65 6e64 5f74 696d 652c 206e  alue=end_time, n
-00007490: 616d 653d 2245 4e44 2054 494d 4522 290a  ame="END TIME").
-000074a0: 2020 2020 6368 6563 6b5f 7468 6174 5f68      check_that_h
-000074b0: 686d 6d73 735f 7374 6172 745f 6973 5f62  hmmss_start_is_b
-000074c0: 6566 6f72 655f 656e 6428 0a20 2020 2020  efore_end(.     
-000074d0: 2020 2073 7461 7274 5f74 696d 653d 7374     start_time=st
-000074e0: 6172 745f 7469 6d65 2c20 656e 645f 7469  art_time, end_ti
-000074f0: 6d65 3d65 6e64 5f74 696d 652c 206e 616d  me=end_time, nam
-00007500: 653d 6622 7b66 696c 655f 6e61 6d65 7d20  e=f"{file_name} 
-00007510: 7469 6d65 7374 616d 7073 220a 2020 2020  timestamps".    
-00007520: 290a 2020 2020 6966 206e 6f74 2069 6e63  ).    if not inc
-00007530: 6c75 6465 5f63 6c69 705f 7469 6d65 5f69  lude_clip_time_i
-00007540: 6e5f 6669 6c65 6e61 6d65 3a0a 2020 2020  n_filename:.    
-00007550: 2020 2020 7361 7665 5f6e 616d 6520 3d20      save_name = 
-00007560: 6f73 2e70 6174 682e 6a6f 696e 2864 6972  os.path.join(dir
-00007570: 2c20 6669 6c65 5f6e 616d 6520 2b20 225f  , file_name + "_
-00007580: 636c 6970 7065 642e 6d70 3422 290a 2020  clipped.mp4").  
-00007590: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000075a0: 7361 7665 5f6e 616d 6520 3d20 6f73 2e70  save_name = os.p
-000075b0: 6174 682e 6a6f 696e 280a 2020 2020 2020  ath.join(.      
-000075c0: 2020 2020 2020 6469 722c 0a20 2020 2020        dir,.     
-000075d0: 2020 2020 2020 2066 696c 655f 6e61 6d65         file_name
-000075e0: 0a20 2020 2020 2020 2020 2020 202b 2066  .            + f
-000075f0: 275f 7b73 7461 7274 5f74 696d 652e 7265  '_{start_time.re
-00007600: 706c 6163 6528 223a 222c 2022 2d22 297d  place(":", "-")}
-00007610: 5f7b 656e 645f 7469 6d65 2e72 6570 6c61  _{end_time.repla
-00007620: 6365 2822 3a22 2c20 222d 2229 7d2e 6d70  ce(":", "-")}.mp
-00007630: 3427 2c0a 2020 2020 2020 2020 290a 2020  4',.        ).  
-00007640: 2020 6966 206f 732e 7061 7468 2e69 7366    if os.path.isf
-00007650: 696c 6528 7361 7665 5f6e 616d 6529 2061  ile(save_name) a
-00007660: 6e64 2028 6e6f 7420 6f76 6572 7772 6974  nd (not overwrit
-00007670: 6529 3a0a 2020 2020 2020 2020 7261 6973  e):.        rais
-00007680: 6520 4669 6c65 4578 6973 7445 7272 6f72  e FileExistError
-00007690: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
-000076a0: 673d 6622 5349 4d42 4120 4552 524f 523a  g=f"SIMBA ERROR:
-000076b0: 2054 6865 206f 7574 6669 6c65 2066 696c   The outfile fil
-000076c0: 6520 616c 7265 6164 7920 6578 6973 743a  e already exist:
-000076d0: 207b 7361 7665 5f6e 616d 657d 2e22 2c0a   {save_name}.",.
-000076e0: 2020 2020 2020 2020 2020 2020 736f 7572              sour
-000076f0: 6365 3d63 6c69 705f 7669 6465 6f5f 696e  ce=clip_video_in
-00007700: 5f72 616e 6765 2e5f 5f6e 616d 655f 5f2c  _range.__name__,
-00007710: 0a20 2020 2020 2020 2029 0a20 2020 2069  .        ).    i
-00007720: 6620 6770 753a 0a20 2020 2020 2020 2063  f gpu:.        c
-00007730: 6f6d 6d61 6e64 203d 2066 2766 666d 7065  ommand = f'ffmpe
-00007740: 6720 2d68 7761 6363 656c 2061 7574 6f20  g -hwaccel auto 
-00007750: 2d63 3a76 2068 3236 345f 6375 7669 6420  -c:v h264_cuvid 
-00007760: 2d69 2022 7b66 696c 655f 7061 7468 7d22  -i "{file_path}"
-00007770: 202d 7373 207b 7374 6172 745f 7469 6d65   -ss {start_time
-00007780: 7d20 2d74 6f20 7b65 6e64 5f74 696d 657d  } -to {end_time}
-00007790: 202d 6173 796e 6320 3120 227b 7361 7665   -async 1 "{save
-000077a0: 5f6e 616d 657d 2220 2d79 270a 2020 2020  _name}" -y'.    
-000077b0: 656c 7365 3a0a 2020 2020 2020 2020 636f  else:.        co
-000077c0: 6d6d 616e 6420 3d20 6627 6666 6d70 6567  mmand = f'ffmpeg
-000077d0: 202d 6920 227b 6669 6c65 5f70 6174 687d   -i "{file_path}
-000077e0: 2220 2d73 7320 7b73 7461 7274 5f74 696d  " -ss {start_tim
-000077f0: 657d 202d 746f 207b 656e 645f 7469 6d65  e} -to {end_time
-00007800: 7d20 2d61 7379 6e63 2031 202d 633a 7620  } -async 1 -c:v 
-00007810: 6c69 6276 7078 2d76 7039 2022 7b73 6176  libvpx-vp9 "{sav
-00007820: 655f 6e61 6d65 7d22 202d 7927 0a20 2020  e_name}" -y'.   
-00007830: 2070 7269 6e74 2866 2243 6c69 7070 696e   print(f"Clippin
-00007840: 6720 7669 6465 6f20 7b66 696c 655f 6e61  g video {file_na
-00007850: 6d65 7d20 6265 7477 6565 6e20 7b73 7461  me} between {sta
-00007860: 7274 5f74 696d 657d 2061 6e64 207b 656e  rt_time} and {en
-00007870: 645f 7469 6d65 7d2e 2e2e 2022 290a 2020  d_time}... ").  
-00007880: 2020 7375 6270 726f 6365 7373 2e63 616c    subprocess.cal
-00007890: 6c28 636f 6d6d 616e 642c 2073 6865 6c6c  l(command, shell
-000078a0: 3d54 7275 652c 2073 7464 6f75 743d 7375  =True, stdout=su
-000078b0: 6270 726f 6365 7373 2e50 4950 4529 0a20  bprocess.PIPE). 
-000078c0: 2020 2074 696d 6572 2e73 746f 705f 7469     timer.stop_ti
-000078d0: 6d65 7228 290a 2020 2020 7374 646f 7574  mer().    stdout
-000078e0: 5f73 7563 6365 7373 280a 2020 2020 2020  _success(.      
-000078f0: 2020 6d73 673d 6622 5669 6465 6f20 636f    msg=f"Video co
-00007900: 6e76 6572 7465 6421 207b 7361 7665 5f6e  nverted! {save_n
-00007910: 616d 657d 2067 656e 6572 6174 6564 2122  ame} generated!"
-00007920: 2c0a 2020 2020 2020 2020 656c 6170 7365  ,.        elapse
-00007930: 645f 7469 6d65 3d74 696d 6572 2e65 6c61  d_time=timer.ela
-00007940: 7073 6564 5f74 696d 655f 7374 722c 0a20  psed_time_str,. 
-00007950: 2020 2020 2020 2073 6f75 7263 653d 636c         source=cl
-00007960: 6970 5f76 6964 656f 5f69 6e5f 7261 6e67  ip_video_in_rang
-00007970: 652e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  e.__name__,.    
-00007980: 290a 0a0a 6465 6620 646f 776e 7361 6d70  )...def downsamp
-00007990: 6c65 5f76 6964 656f 280a 2020 2020 6669  le_video(.    fi
-000079a0: 6c65 5f70 6174 683a 2055 6e69 6f6e 5b73  le_path: Union[s
-000079b0: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
-000079c0: 2c0a 2020 2020 7669 6465 6f5f 6865 6967  ,.    video_heig
-000079d0: 6874 3a20 696e 742c 0a20 2020 2076 6964  ht: int,.    vid
-000079e0: 656f 5f77 6964 7468 3a20 696e 742c 0a20  eo_width: int,. 
-000079f0: 2020 2067 7075 3a20 4f70 7469 6f6e 616c     gpu: Optional
-00007a00: 5b62 6f6f 6c5d 203d 2046 616c 7365 2c0a  [bool] = False,.
-00007a10: 2920 2d3e 204e 6f6e 653a 0a20 2020 2022  ) -> None:.    "
-00007a20: 2222 0a20 2020 2044 6f77 6e2d 7361 6d70  "".    Down-samp
-00007a30: 6c65 2061 2076 6964 656f 2066 696c 652e  le a video file.
-00007a40: 2054 6865 2072 6573 756c 7420 6973 2073   The result is s
-00007a50: 746f 7265 6420 696e 2074 6865 2073 616d  tored in the sam
-00007a60: 6520 6469 7265 6374 6f72 7920 6173 2074  e directory as t
-00007a70: 6865 0a20 2020 2069 6e70 7574 2066 696c  he.    input fil
-00007a80: 6520 7769 7468 2074 6865 2060 605f 646f  e with the ``_do
-00007a90: 776e 7361 6d70 6c65 642e 6d70 3460 6020  wnsampled.mp4`` 
-00007aa0: 7375 6666 6978 2e0a 0a20 2020 203a 7061  suffix...    :pa
-00007ab0: 7261 6d65 7465 7220 556e 696f 6e5b 7374  rameter Union[st
-00007ac0: 722c 206f 732e 5061 7468 4c69 6b65 5d20  r, os.PathLike] 
-00007ad0: 6669 6c65 5f70 6174 683a 2050 6174 6820  file_path: Path 
-00007ae0: 746f 2076 6964 656f 2066 696c 652e 0a20  to video file.. 
-00007af0: 2020 203a 7061 7261 6d65 7465 7220 696e     :parameter in
-00007b00: 7420 7669 6465 6f5f 6865 6967 6874 3a20  t video_height: 
-00007b10: 6865 6967 6874 206f 6620 6e65 7720 7669  height of new vi
-00007b20: 6465 6f2e 0a20 2020 203a 7061 7261 6d65  deo..    :parame
-00007b30: 7465 7220 696e 7420 7669 6465 6f5f 7769  ter int video_wi
-00007b40: 6474 683a 2077 6964 7468 206f 6620 6e65  dth: width of ne
-00007b50: 7720 7669 6465 6f2e 0a20 2020 203a 7061  w video..    :pa
-00007b60: 7261 6d65 7465 7220 4f70 7469 6f6e 616c  rameter Optional
-00007b70: 5b62 6f6f 6c5d 2067 7075 3a20 4966 2054  [bool] gpu: If T
-00007b80: 7275 652c 2075 7365 204e 5649 4445 4120  rue, use NVIDEA 
-00007b90: 4750 5520 636f 6465 6373 2e20 4465 6661  GPU codecs. Defa
-00007ba0: 756c 7420 4661 6c73 652e 0a0a 2020 2020  ult False...    
-00007bb0: 3a65 7861 6d70 6c65 3a0a 2020 2020 3e3e  :example:.    >>
-00007bc0: 3e20 5f20 3d20 646f 776e 7361 6d70 6c65  > _ = downsample
-00007bd0: 5f76 6964 656f 2866 696c 655f 7061 7468  _video(file_path
-00007be0: 3d27 7072 6f6a 6563 745f 666f 6c64 6572  ='project_folder
-00007bf0: 2f76 6964 656f 732f 5669 6465 6f5f 312e  /videos/Video_1.
-00007c00: 6176 6927 2c20 7669 6465 6f5f 6865 6967  avi', video_heig
-00007c10: 6874 3d36 3030 2c20 7669 6465 6f5f 7769  ht=600, video_wi
-00007c20: 6474 683d 3430 3029 0a20 2020 2022 2222  dth=400).    """
-00007c30: 0a20 2020 2063 6865 636b 5f66 666d 7065  .    check_ffmpe
-00007c40: 675f 6176 6169 6c61 626c 6528 7261 6973  g_available(rais
-00007c50: 655f 6572 726f 723d 5472 7565 290a 2020  e_error=True).  
-00007c60: 2020 6966 2067 7075 2061 6e64 206e 6f74    if gpu and not
-00007c70: 2063 6865 636b 5f6e 7669 6465 615f 6770   check_nvidea_gp
-00007c80: 755f 6176 6169 6c61 626c 6528 293a 0a20  u_available():. 
-00007c90: 2020 2020 2020 2072 6169 7365 2046 464d         raise FFM
-00007ca0: 5045 4743 6f64 6563 4750 5545 7272 6f72  PEGCodecGPUError
-00007cb0: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
-00007cc0: 673d 224e 6f20 4750 5520 666f 756e 6420  g="No GPU found 
-00007cd0: 2861 7320 6576 616c 7561 7465 6420 6279  (as evaluated by
-00007ce0: 206e 7669 6465 612d 736d 6920 7265 7475   nvidea-smi retu
-00007cf0: 726e 696e 6720 4e6f 6e65 2922 2c0a 2020  rning None)",.  
-00007d00: 2020 2020 2020 2020 2020 736f 7572 6365            source
-00007d10: 3d64 6f77 6e73 616d 706c 655f 7669 6465  =downsample_vide
-00007d20: 6f2e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  o.__name__,.    
-00007d30: 2020 2020 290a 2020 2020 7469 6d65 7220      ).    timer 
-00007d40: 3d20 5369 6d62 6154 696d 6572 2873 7461  = SimbaTimer(sta
-00007d50: 7274 3d54 7275 6529 0a20 2020 2063 6865  rt=True).    che
-00007d60: 636b 5f69 6e74 286e 616d 653d 2256 6964  ck_int(name="Vid
-00007d70: 656f 2068 6569 6768 7422 2c20 7661 6c75  eo height", valu
-00007d80: 653d 7669 6465 6f5f 6865 6967 6874 290a  e=video_height).
-00007d90: 2020 2020 6368 6563 6b5f 696e 7428 6e61      check_int(na
-00007da0: 6d65 3d22 5669 6465 6f20 7769 6474 6822  me="Video width"
-00007db0: 2c20 7661 6c75 653d 7669 6465 6f5f 7769  , value=video_wi
-00007dc0: 6474 6829 0a20 2020 2063 6865 636b 5f66  dth).    check_f
-00007dd0: 696c 655f 6578 6973 745f 616e 645f 7265  ile_exist_and_re
-00007de0: 6164 6162 6c65 2866 696c 655f 7061 7468  adable(file_path
-00007df0: 3d66 696c 655f 7061 7468 290a 2020 2020  =file_path).    
-00007e00: 6469 722c 2066 696c 655f 6e61 6d65 2c20  dir, file_name, 
-00007e10: 6578 7420 3d20 6765 745f 666e 5f65 7874  ext = get_fn_ext
-00007e20: 2866 696c 6570 6174 683d 6669 6c65 5f70  (filepath=file_p
-00007e30: 6174 6829 0a20 2020 2073 6176 655f 6e61  ath).    save_na
-00007e40: 6d65 203d 206f 732e 7061 7468 2e6a 6f69  me = os.path.joi
-00007e50: 6e28 6469 722c 2066 696c 655f 6e61 6d65  n(dir, file_name
-00007e60: 202b 2022 5f64 6f77 6e73 616d 706c 6564   + "_downsampled
-00007e70: 2e6d 7034 2229 0a20 2020 2069 6620 6f73  .mp4").    if os
-00007e80: 2e70 6174 682e 6973 6669 6c65 2873 6176  .path.isfile(sav
-00007e90: 655f 6e61 6d65 293a 0a20 2020 2020 2020  e_name):.       
-00007ea0: 2072 6169 7365 2046 696c 6545 7869 7374   raise FileExist
-00007eb0: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
-00007ec0: 2020 2022 5349 4d42 4120 4552 524f 523a     "SIMBA ERROR:
-00007ed0: 2054 6865 206f 7574 6669 6c65 2066 696c   The outfile fil
-00007ee0: 6520 616c 7265 6164 7920 6578 6973 743a  e already exist:
-00007ef0: 207b 7d2e 222e 666f 726d 6174 2873 6176   {}.".format(sav
-00007f00: 655f 6e61 6d65 292c 0a20 2020 2020 2020  e_name),.       
-00007f10: 2020 2020 2073 6f75 7263 653d 646f 776e       source=down
-00007f20: 7361 6d70 6c65 5f76 6964 656f 2e5f 5f6e  sample_video.__n
-00007f30: 616d 655f 5f2c 0a20 2020 2020 2020 2029  ame__,.        )
-00007f40: 0a20 2020 2069 6620 6770 753a 0a20 2020  .    if gpu:.   
-00007f50: 2020 2020 2063 6f6d 6d61 6e64 203d 2066       command = f
-00007f60: 2766 666d 7065 6720 2d79 202d 6877 6163  'ffmpeg -y -hwac
-00007f70: 6365 6c20 6175 746f 202d 633a 7620 6832  cel auto -c:v h2
-00007f80: 3634 5f63 7576 6964 202d 6920 227b 6669  64_cuvid -i "{fi
-00007f90: 6c65 5f70 6174 687d 2220 2d76 6620 2273  le_path}" -vf "s
-00007fa0: 6361 6c65 3d77 3d7b 7669 6465 6f5f 7769  cale=w={video_wi
-00007fb0: 6474 687d 3a68 3d7b 7669 6465 6f5f 6865  dth}:h={video_he
-00007fc0: 6967 6874 7d3a 666f 7263 655f 6f72 6967  ight}:force_orig
-00007fd0: 696e 616c 5f61 7370 6563 745f 7261 7469  inal_aspect_rati
-00007fe0: 6f3d 6465 6372 6561 7365 3a66 6c61 6773  o=decrease:flags
-00007ff0: 3d62 6963 7562 6963 2220 2d63 3a76 2068  =bicubic" -c:v h
-00008000: 3236 345f 6e76 656e 6320 227b 7361 7665  264_nvenc "{save
-00008010: 5f6e 616d 657d 2227 0a20 2020 2065 6c73  _name}"'.    els
-00008020: 653a 0a20 2020 2020 2020 2063 6f6d 6d61  e:.        comma
-00008030: 6e64 203d 2066 2766 666d 7065 6720 2d69  nd = f'ffmpeg -i
-00008040: 2022 7b66 696c 655f 7061 7468 7d22 202d   "{file_path}" -
-00008050: 7666 2073 6361 6c65 3d7b 7669 6465 6f5f  vf scale={video_
-00008060: 7769 6474 687d 3a7b 7669 6465 6f5f 6865  width}:{video_he
-00008070: 6967 6874 7d20 2d63 3a76 206c 6962 7832  ight} -c:v libx2
-00008080: 3634 2022 7b73 6176 655f 6e61 6d65 7d22  64 "{save_name}"
-00008090: 202d 6869 6465 5f62 616e 6e65 7227 0a20   -hide_banner'. 
-000080a0: 2020 2070 7269 6e74 2822 446f 776e 2d73     print("Down-s
-000080b0: 616d 706c 696e 6720 7669 6465 6f2e 2e2e  ampling video...
-000080c0: 2022 290a 2020 2020 7375 6270 726f 6365   ").    subproce
-000080d0: 7373 2e63 616c 6c28 636f 6d6d 616e 642c  ss.call(command,
-000080e0: 2073 6865 6c6c 3d54 7275 652c 2073 7464   shell=True, std
-000080f0: 6f75 743d 7375 6270 726f 6365 7373 2e50  out=subprocess.P
-00008100: 4950 4529 0a20 2020 2074 696d 6572 2e73  IPE).    timer.s
-00008110: 746f 705f 7469 6d65 7228 290a 2020 2020  top_timer().    
-00008120: 7374 646f 7574 5f73 7563 6365 7373 280a  stdout_success(.
-00008130: 2020 2020 2020 2020 6d73 673d 6622 5349          msg=f"SI
-00008140: 4d42 4120 434f 4d50 4c45 5445 3a20 5669  MBA COMPLETE: Vi
-00008150: 6465 6f20 636f 6e76 6572 7465 6421 207b  deo converted! {
-00008160: 7361 7665 5f6e 616d 657d 2067 656e 6572  save_name} gener
-00008170: 6174 6564 2122 2c0a 2020 2020 2020 2020  ated!",.        
-00008180: 656c 6170 7365 645f 7469 6d65 3d74 696d  elapsed_time=tim
-00008190: 6572 2e65 6c61 7073 6564 5f74 696d 655f  er.elapsed_time_
-000081a0: 7374 722c 0a20 2020 2020 2020 2073 6f75  str,.        sou
-000081b0: 7263 653d 646f 776e 7361 6d70 6c65 5f76  rce=downsample_v
-000081c0: 6964 656f 2e5f 5f6e 616d 655f 5f2c 0a20  ideo.__name__,. 
-000081d0: 2020 2029 0a0a 0a64 6566 2067 6966 5f63     )...def gif_c
-000081e0: 7265 6174 6f72 280a 2020 2020 6669 6c65  reator(.    file
-000081f0: 5f70 6174 683a 2055 6e69 6f6e 5b73 7472  _path: Union[str
-00008200: 2c20 6f73 2e50 6174 684c 696b 655d 2c0a  , os.PathLike],.
-00008210: 2020 2020 7374 6172 745f 7469 6d65 3a20      start_time: 
-00008220: 696e 742c 0a20 2020 2064 7572 6174 696f  int,.    duratio
-00008230: 6e3a 2069 6e74 2c0a 2020 2020 7769 6474  n: int,.    widt
-00008240: 683a 2069 6e74 2c0a 2020 2020 6770 753a  h: int,.    gpu:
-00008250: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
-00008260: 3d20 4661 6c73 652c 0a29 202d 3e20 4e6f  = False,.) -> No
-00008270: 6e65 3a0a 2020 2020 2222 220a 2020 2020  ne:.    """.    
-00008280: 4372 6561 7465 2061 2073 616d 706c 6520  Create a sample 
-00008290: 6769 6620 6672 6f6d 2061 2076 6964 656f  gif from a video
-000082a0: 2066 696c 652e 2054 6865 2072 6573 756c   file. The resul
-000082b0: 7420 6973 2073 746f 7265 6420 696e 2074  t is stored in t
-000082c0: 6865 2073 616d 6520 6469 7265 6374 6f72  he same director
-000082d0: 7920 6173 2074 6865 0a20 2020 2069 6e70  y as the.    inp
-000082e0: 7574 2066 696c 6520 7769 7468 2074 6865  ut file with the
-000082f0: 2060 602e 6769 6660 6020 6669 6c65 2d65   ``.gif`` file-e
-00008300: 6e64 696e 672e 0a0a 2020 2020 2e2e 206e  nding...    .. n
-00008310: 6f74 653a 3a0a 2020 2020 2020 2054 6865  ote::.       The
-00008320: 2068 6569 6768 7420 6973 2061 7574 6f2d   height is auto-
-00008330: 636f 6d70 7574 6564 2074 6f20 7265 7461  computed to reta
-00008340: 696e 2061 7370 6563 7420 7261 7469 6f0a  in aspect ratio.
-00008350: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
-00008360: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
-00008370: 7468 4c69 6b65 5d20 6669 6c65 5f70 6174  thLike] file_pat
-00008380: 683a 2050 6174 6820 746f 2076 6964 656f  h: Path to video
-00008390: 2066 696c 652e 0a20 2020 203a 7061 7261   file..    :para
-000083a0: 6d65 7465 7220 696e 7420 7374 6172 745f  meter int start_
-000083b0: 7469 6d65 3a20 5374 6172 7420 7469 6d65  time: Start time
-000083c0: 206f 6620 7468 6520 6769 6620 696e 2072   of the gif in r
-000083d0: 656c 6174 696f 6e20 746f 2074 6865 2076  elation to the v
-000083e0: 6964 656f 2069 6e20 7365 636f 6e64 732e  ideo in seconds.
-000083f0: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
-00008400: 696e 7420 6475 7261 7469 6f6e 3a20 4475  int duration: Du
-00008410: 7261 7469 6f6e 206f 6620 7468 6520 6769  ration of the gi
-00008420: 662e 0a20 2020 203a 7061 7261 6d65 7465  f..    :paramete
-00008430: 7220 696e 7420 7769 6474 683a 2057 6964  r int width: Wid
-00008440: 7468 206f 6620 7468 6520 6769 662e 0a20  th of the gif.. 
-00008450: 2020 203a 7061 7261 6d65 7465 7220 4f70     :parameter Op
-00008460: 7469 6f6e 616c 5b62 6f6f 6c5d 2067 7075  tional[bool] gpu
-00008470: 3a20 4966 2054 7275 652c 2075 7365 204e  : If True, use N
-00008480: 5649 4445 4120 4750 5520 636f 6465 6373  VIDEA GPU codecs
-00008490: 2e20 4465 6661 756c 7420 4661 6c73 652e  . Default False.
-000084a0: 0a0a 2020 2020 3a65 7861 6d70 6c65 3a0a  ..    :example:.
-000084b0: 2020 2020 3e3e 3e20 5f20 3d20 6769 665f      >>> _ = gif_
-000084c0: 6372 6561 746f 7228 6669 6c65 5f70 6174  creator(file_pat
-000084d0: 683d 2770 726f 6a65 6374 5f66 6f6c 6465  h='project_folde
-000084e0: 722f 7669 6465 6f73 2f56 6964 656f 5f31  r/videos/Video_1
-000084f0: 2e61 7669 272c 2073 7461 7274 5f74 696d  .avi', start_tim
-00008500: 653d 352c 2064 7572 6174 696f 6e3d 3130  e=5, duration=10
-00008510: 2c20 7769 6474 683d 3630 3029 0a20 2020  , width=600).   
-00008520: 2022 2222 0a0a 2020 2020 6368 6563 6b5f   """..    check_
-00008530: 6666 6d70 6567 5f61 7661 696c 6162 6c65  ffmpeg_available
-00008540: 2872 6169 7365 5f65 7272 6f72 3d54 7275  (raise_error=Tru
-00008550: 6529 0a20 2020 2069 6620 6770 7520 616e  e).    if gpu an
-00008560: 6420 6e6f 7420 6368 6563 6b5f 6e76 6964  d not check_nvid
-00008570: 6561 5f67 7075 5f61 7661 696c 6162 6c65  ea_gpu_available
-00008580: 2829 3a0a 2020 2020 2020 2020 7261 6973  ():.        rais
-00008590: 6520 4646 4d50 4547 436f 6465 6347 5055  e FFMPEGCodecGPU
-000085a0: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
-000085b0: 2020 206d 7367 3d22 4e56 4944 4541 2047     msg="NVIDEA G
-000085c0: 5055 206e 6f74 2061 7661 696c 6162 6c65  PU not available
-000085d0: 2028 6173 2065 7661 6c75 6174 6564 2062   (as evaluated b
-000085e0: 7920 6e76 6964 6561 2d73 6d69 2072 6574  y nvidea-smi ret
-000085f0: 7572 6e69 6e67 204e 6f6e 6522 2c0a 2020  urning None",.  
-00008600: 2020 2020 2020 2020 2020 736f 7572 6365            source
-00008610: 3d67 6966 5f63 7265 6174 6f72 2e5f 5f6e  =gif_creator.__n
-00008620: 616d 655f 5f2c 0a20 2020 2020 2020 2029  ame__,.        )
-00008630: 0a20 2020 2074 696d 6572 203d 2053 696d  .    timer = Sim
-00008640: 6261 5469 6d65 7228 7374 6172 743d 5472  baTimer(start=Tr
-00008650: 7565 290a 2020 2020 6368 6563 6b5f 6669  ue).    check_fi
-00008660: 6c65 5f65 7869 7374 5f61 6e64 5f72 6561  le_exist_and_rea
-00008670: 6461 626c 6528 6669 6c65 5f70 6174 683d  dable(file_path=
-00008680: 6669 6c65 5f70 6174 6829 0a20 2020 2063  file_path).    c
-00008690: 6865 636b 5f69 6e74 286e 616d 653d 2253  heck_int(name="S
-000086a0: 7461 7274 2074 696d 6522 2c20 7661 6c75  tart time", valu
-000086b0: 653d 7374 6172 745f 7469 6d65 2c20 6d69  e=start_time, mi
-000086c0: 6e5f 7661 6c75 653d 3029 0a20 2020 2063  n_value=0).    c
-000086d0: 6865 636b 5f69 6e74 286e 616d 653d 2244  heck_int(name="D
-000086e0: 7572 6174 696f 6e22 2c20 7661 6c75 653d  uration", value=
-000086f0: 6475 7261 7469 6f6e 2c20 6d69 6e5f 7661  duration, min_va
-00008700: 6c75 653d 3129 0a20 2020 2063 6865 636b  lue=1).    check
-00008710: 5f69 6e74 286e 616d 653d 2257 6964 7468  _int(name="Width
-00008720: 222c 2076 616c 7565 3d77 6964 7468 290a  ", value=width).
-00008730: 2020 2020 7669 6465 6f5f 6d65 7461 5f64      video_meta_d
-00008740: 6174 6120 3d20 6765 745f 7669 6465 6f5f  ata = get_video_
-00008750: 6d65 7461 5f64 6174 6128 6669 6c65 5f70  meta_data(file_p
-00008760: 6174 6829 0a20 2020 2069 6620 2869 6e74  ath).    if (int
-00008770: 2873 7461 7274 5f74 696d 6529 202b 2069  (start_time) + i
-00008780: 6e74 2864 7572 6174 696f 6e29 2920 3e20  nt(duration)) > 
-00008790: 7669 6465 6f5f 6d65 7461 5f64 6174 615b  video_meta_data[
-000087a0: 2276 6964 656f 5f6c 656e 6774 685f 7322  "video_length_s"
-000087b0: 5d3a 0a20 2020 2020 2020 2072 6169 7365  ]:.        raise
-000087c0: 2046 7261 6d65 5261 6e67 6545 7272 6f72   FrameRangeError
-000087d0: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
-000087e0: 673d 6627 5468 6520 656e 6420 6f66 2074  g=f'The end of t
-000087f0: 6865 2067 6966 2028 7374 6172 7420 7469  he gif (start ti
-00008800: 6d65 3a20 7b73 7461 7274 5f74 696d 657d  me: {start_time}
-00008810: 202b 2064 7572 6174 696f 6e3a 207b 6475   + duration: {du
-00008820: 7261 7469 6f6e 7d29 2069 7320 6c6f 6e67  ration}) is long
-00008830: 6572 2074 6861 6e20 7468 6520 7b66 696c  er than the {fil
-00008840: 655f 7061 7468 7d20 7669 6465 6f3a 207b  e_path} video: {
-00008850: 7669 6465 6f5f 6d65 7461 5f64 6174 615b  video_meta_data[
-00008860: 2276 6964 656f 5f6c 656e 6774 685f 7322  "video_length_s"
-00008870: 5d7d 7327 2c0a 2020 2020 2020 2020 2020  ]}s',.          
-00008880: 2020 736f 7572 6365 3d67 6966 5f63 7265    source=gif_cre
-00008890: 6174 6f72 2e5f 5f6e 616d 655f 5f2c 0a20  ator.__name__,. 
-000088a0: 2020 2020 2020 2029 0a0a 2020 2020 6469         )..    di
-000088b0: 722c 2066 696c 655f 6e61 6d65 2c20 6578  r, file_name, ex
-000088c0: 7420 3d20 6765 745f 666e 5f65 7874 2866  t = get_fn_ext(f
-000088d0: 696c 6570 6174 683d 6669 6c65 5f70 6174  ilepath=file_pat
-000088e0: 6829 0a20 2020 2073 6176 655f 6e61 6d65  h).    save_name
-000088f0: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-00008900: 6469 722c 2066 696c 655f 6e61 6d65 202b  dir, file_name +
-00008910: 2022 2e67 6966 2229 0a20 2020 2069 6620   ".gif").    if 
-00008920: 6f73 2e70 6174 682e 6973 6669 6c65 2873  os.path.isfile(s
-00008930: 6176 655f 6e61 6d65 293a 0a20 2020 2020  ave_name):.     
-00008940: 2020 2072 6169 7365 2046 696c 6545 7869     raise FileExi
-00008950: 7374 4572 726f 7228 0a20 2020 2020 2020  stError(.       
-00008960: 2020 2020 2022 5349 4d42 4120 4552 524f       "SIMBA ERRO
-00008970: 523a 2054 6865 206f 7574 6669 6c65 2066  R: The outfile f
-00008980: 696c 6520 616c 7265 6164 7920 6578 6973  ile already exis
-00008990: 743a 207b 7d2e 222e 666f 726d 6174 2873  t: {}.".format(s
-000089a0: 6176 655f 6e61 6d65 292c 0a20 2020 2020  ave_name),.     
-000089b0: 2020 2020 2020 2073 6f75 7263 653d 6769         source=gi
-000089c0: 665f 6372 6561 746f 722e 5f5f 6e61 6d65  f_creator.__name
-000089d0: 5f5f 2c0a 2020 2020 2020 2020 290a 2020  __,.        ).  
-000089e0: 2020 6966 2067 7075 3a0a 2020 2020 2020    if gpu:.      
-000089f0: 2020 636f 6d6d 616e 6420 3d20 6627 6666    command = f'ff
-00008a00: 6d70 6567 202d 6877 6163 6365 6c20 6175  mpeg -hwaccel au
-00008a10: 746f 202d 633a 7620 6832 3634 5f63 7576  to -c:v h264_cuv
-00008a20: 6964 202d 7373 207b 7374 6172 745f 7469  id -ss {start_ti
-00008a30: 6d65 7d20 2d69 2022 7b66 696c 655f 7061  me} -i "{file_pa
-00008a40: 7468 7d22 202d 746f 207b 6475 7261 7469  th}" -to {durati
-00008a50: 6f6e 7d20 2d76 6620 2266 7073 3d31 302c  on} -vf "fps=10,
-00008a60: 7363 616c 653d 7b77 6964 7468 7d3a 2d31  scale={width}:-1
-00008a70: 2220 2d63 3a76 2067 6966 202d 7069 785f  " -c:v gif -pix_
-00008a80: 666d 7420 7267 6232 3420 2d79 2022 7b73  fmt rgb24 -y "{s
-00008a90: 6176 655f 6e61 6d65 7d22 202d 7927 0a20  ave_name}" -y'. 
-00008aa0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00008ab0: 2063 6f6d 6d61 6e64 203d 2066 2766 666d   command = f'ffm
-00008ac0: 7065 6720 2d73 7320 7b73 7461 7274 5f74  peg -ss {start_t
-00008ad0: 696d 657d 202d 7420 7b64 7572 6174 696f  ime} -t {duratio
-00008ae0: 6e7d 202d 6920 227b 6669 6c65 5f70 6174  n} -i "{file_pat
-00008af0: 687d 2220 2d66 696c 7465 725f 636f 6d70  h}" -filter_comp
-00008b00: 6c65 7820 225b 303a 765d 2066 7073 3d31  lex "[0:v] fps=1
-00008b10: 352c 7363 616c 653d 773d 7b77 6964 7468  5,scale=w={width
-00008b20: 7d3a 683d 2d31 2c73 706c 6974 205b 615d  }:h=-1,split [a]
-00008b30: 5b62 5d3b 5b61 5d20 7061 6c65 7474 6567  [b];[a] paletteg
-00008b40: 656e 3d73 7461 7473 5f6d 6f64 653d 7369  en=stats_mode=si
-00008b50: 6e67 6c65 205b 705d 3b5b 625d 5b70 5d20  ngle [p];[b][p] 
-00008b60: 7061 6c65 7474 6575 7365 3d6e 6577 3d31  paletteuse=new=1
-00008b70: 2220 227b 7361 7665 5f6e 616d 657d 2227  " "{save_name}"'
-00008b80: 0a20 2020 2070 7269 6e74 2822 4372 6561  .    print("Crea
-00008b90: 7469 6e67 2067 6966 2073 616d 706c 652e  ting gif sample.
-00008ba0: 2e2e 2022 290a 2020 2020 7375 6270 726f  .. ").    subpro
-00008bb0: 6365 7373 2e63 616c 6c28 636f 6d6d 616e  cess.call(comman
-00008bc0: 642c 2073 6865 6c6c 3d54 7275 652c 2073  d, shell=True, s
-00008bd0: 7464 6f75 743d 7375 6270 726f 6365 7373  tdout=subprocess
-00008be0: 2e50 4950 4529 0a20 2020 2074 696d 6572  .PIPE).    timer
-00008bf0: 2e73 746f 705f 7469 6d65 7228 290a 2020  .stop_timer().  
-00008c00: 2020 7374 646f 7574 5f73 7563 6365 7373    stdout_success
-00008c10: 280a 2020 2020 2020 2020 6d73 673d 6622  (.        msg=f"
-00008c20: 5349 4d42 4120 434f 4d50 4c45 5445 3a20  SIMBA COMPLETE: 
-00008c30: 5669 6465 6f20 636f 6e76 6572 7465 6421  Video converted!
-00008c40: 207b 7361 7665 5f6e 616d 657d 2067 656e   {save_name} gen
-00008c50: 6572 6174 6564 2122 2c0a 2020 2020 2020  erated!",.      
-00008c60: 2020 656c 6170 7365 645f 7469 6d65 3d74    elapsed_time=t
-00008c70: 696d 6572 2e65 6c61 7073 6564 5f74 696d  imer.elapsed_tim
-00008c80: 655f 7374 722c 0a20 2020 2020 2020 2073  e_str,.        s
-00008c90: 6f75 7263 653d 6769 665f 6372 6561 746f  ource=gif_creato
-00008ca0: 722e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  r.__name__,.    
-00008cb0: 290a 0a0a 2320 6769 665f 6372 6561 746f  )...# gif_creato
-00008cc0: 7228 6669 6c65 5f70 6174 683d 7227 2f55  r(file_path=r'/U
-00008cd0: 7365 7273 2f73 696d 6f6e 2f44 6573 6b74  sers/simon/Deskt
-00008ce0: 6f70 2f65 6e76 732f 7369 6d62 612f 7472  op/envs/simba/tr
-00008cf0: 6f75 626c 6573 686f 6f74 696e 672f 6d6f  oubleshooting/mo
-00008d00: 7573 655f 6f70 656e 5f66 6965 6c64 2f70  use_open_field/p
-00008d10: 726f 6a65 6374 5f66 6f6c 6465 722f 7669  roject_folder/vi
-00008d20: 6465 6f73 2f53 495f 4441 5933 5f33 3038  deos/SI_DAY3_308
-00008d30: 5f43 4431 5f50 5245 5345 4e54 2e6d 7034  _CD1_PRESENT.mp4
-00008d40: 272c 2073 7461 7274 5f74 696d 653d 352c  ', start_time=5,
-00008d50: 2064 7572 6174 696f 6e3d 3135 2c20 7769   duration=15, wi
-00008d60: 6474 683d 3630 302c 2067 7075 3d46 616c  dth=600, gpu=Fal
-00008d70: 7365 290a 0a0a 6465 6620 6261 7463 685f  se)...def batch_
-00008d80: 636f 6e76 6572 745f 7669 6465 6f5f 666f  convert_video_fo
-00008d90: 726d 6174 280a 2020 2020 6469 7265 6374  rmat(.    direct
-00008da0: 6f72 793a 2055 6e69 6f6e 5b73 7472 2c20  ory: Union[str, 
-00008db0: 6f73 2e50 6174 684c 696b 655d 2c0a 2020  os.PathLike],.  
-00008dc0: 2020 696e 7075 745f 666f 726d 6174 3a20    input_format: 
-00008dd0: 7374 722c 0a20 2020 206f 7574 7075 745f  str,.    output_
-00008de0: 666f 726d 6174 3a20 7374 722c 0a20 2020  format: str,.   
-00008df0: 2067 7075 3a20 4f70 7469 6f6e 616c 5b62   gpu: Optional[b
-00008e00: 6f6f 6c5d 203d 2046 616c 7365 2c0a 2920  ool] = False,.) 
-00008e10: 2d3e 204e 6f6e 653a 0a20 2020 2022 2222  -> None:.    """
-00008e20: 0a20 2020 2042 6174 6368 2063 6f6e 7665  .    Batch conve
-00008e30: 7274 2061 6c6c 2076 6964 656f 7320 696e  rt all videos in
-00008e40: 2061 2066 6f6c 6465 7220 6f66 2073 7065   a folder of spe
-00008e50: 6369 6669 6320 666f 726d 6174 2069 6e74  cific format int
-00008e60: 6f20 6120 6469 6666 6572 656e 7420 7669  o a different vi
-00008e70: 6465 6f20 666f 726d 6174 2e20 5468 6520  deo format. The 
-00008e80: 7265 7375 6c74 7320 6172 650a 2020 2020  results are.    
-00008e90: 7374 6f72 6564 2069 6e20 7468 6520 7361  stored in the sa
-00008ea0: 6d65 2064 6972 6563 746f 7279 2061 7320  me directory as 
-00008eb0: 7468 6520 696e 7075 7420 6669 6c65 732e  the input files.
-00008ec0: 0a0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
-00008ed0: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
-00008ee0: 6174 684c 696b 655d 2064 6972 6563 746f  athLike] directo
-00008ef0: 7279 3a20 5061 7468 2074 6f20 7669 6465  ry: Path to vide
-00008f00: 6f20 6669 6c65 2064 6972 6563 746f 7279  o file directory
-00008f10: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
-00008f20: 2073 7472 2069 6e70 7574 5f66 6f72 6d61   str input_forma
-00008f30: 743a 2046 6f72 6d61 7420 6f66 2074 6865  t: Format of the
-00008f40: 2069 6e70 7574 2066 696c 6573 2028 652e   input files (e.
-00008f50: 672e 2c20 6176 6929 2e0a 2020 2020 3a70  g., avi)..    :p
-00008f60: 6172 616d 6574 6572 2073 7472 206f 7574  arameter str out
-00008f70: 7075 745f 666f 726d 6174 3a20 466f 726d  put_format: Form
-00008f80: 6174 206f 6620 7468 6520 6f75 7470 7574  at of the output
-00008f90: 2066 696c 6573 2028 652e 672e 2c20 6d70   files (e.g., mp
-00008fa0: 3429 2e0a 2020 2020 3a70 6172 616d 6574  4)..    :paramet
-00008fb0: 6572 204f 7074 696f 6e61 6c5b 626f 6f6c  er Optional[bool
-00008fc0: 5d20 6770 753a 2049 6620 5472 7565 2c20  ] gpu: If True, 
-00008fd0: 7573 6520 4e56 4944 4541 2047 5055 2063  use NVIDEA GPU c
-00008fe0: 6f64 6563 732e 2044 6566 6175 6c74 2046  odecs. Default F
-00008ff0: 616c 7365 2e0a 0a20 2020 203a 6578 616d  alse...    :exam
-00009000: 706c 653a 0a20 2020 203e 3e3e 205f 203d  ple:.    >>> _ =
-00009010: 2062 6174 6368 5f63 6f6e 7665 7274 5f76   batch_convert_v
-00009020: 6964 656f 5f66 6f72 6d61 7428 6469 7265  ideo_format(dire
-00009030: 6374 6f72 793d 2770 726f 6a65 6374 5f66  ctory='project_f
-00009040: 6f6c 6465 722f 7669 6465 6f73 272c 2069  older/videos', i
-00009050: 6e70 7574 5f66 6f72 6d61 743d 2761 7669  nput_format='avi
-00009060: 272c 206f 7574 7075 745f 666f 726d 6174  ', output_format
-00009070: 3d27 6d70 3427 290a 2020 2020 2222 220a  ='mp4').    """.
-00009080: 0a20 2020 2063 6865 636b 5f66 666d 7065  .    check_ffmpe
-00009090: 675f 6176 6169 6c61 626c 6528 7261 6973  g_available(rais
-000090a0: 655f 6572 726f 723d 5472 7565 290a 2020  e_error=True).  
-000090b0: 2020 6966 2067 7075 2061 6e64 206e 6f74    if gpu and not
-000090c0: 2063 6865 636b 5f6e 7669 6465 615f 6770   check_nvidea_gp
-000090d0: 755f 6176 6169 6c61 626c 6528 293a 0a20  u_available():. 
-000090e0: 2020 2020 2020 2072 6169 7365 2046 464d         raise FFM
-000090f0: 5045 4743 6f64 6563 4750 5545 7272 6f72  PEGCodecGPUError
-00009100: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
-00009110: 673d 224e 5649 4445 4120 4750 5520 6e6f  g="NVIDEA GPU no
-00009120: 7420 6176 6169 6c61 626c 6520 2861 7320  t available (as 
-00009130: 6576 616c 7561 7465 6420 6279 206e 7669  evaluated by nvi
-00009140: 6465 612d 736d 6920 7265 7475 726e 696e  dea-smi returnin
-00009150: 6720 4e6f 6e65 222c 0a20 2020 2020 2020  g None",.       
-00009160: 2020 2020 2073 6f75 7263 653d 6261 7463       source=batc
-00009170: 685f 636f 6e76 6572 745f 7669 6465 6f5f  h_convert_video_
-00009180: 666f 726d 6174 2e5f 5f6e 616d 655f 5f2c  format.__name__,
-00009190: 0a20 2020 2020 2020 2029 0a20 2020 2069  .        ).    i
-000091a0: 6620 696e 7075 745f 666f 726d 6174 203d  f input_format =
-000091b0: 3d20 6f75 7470 7574 5f66 6f72 6d61 743a  = output_format:
-000091c0: 0a20 2020 2020 2020 2072 6169 7365 2049  .        raise I
-000091d0: 6e76 616c 6964 4669 6c65 5479 7065 4572  nvalidFileTypeEr
-000091e0: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
-000091f0: 206d 7367 3d66 2254 6865 2069 6e70 7574   msg=f"The input
-00009200: 2066 6f72 6d61 7420 287b 696e 7075 745f   format ({input_
-00009210: 666f 726d 6174 7d29 2069 7320 7468 6520  format}) is the 
-00009220: 7361 6d65 2061 7320 7468 6520 6f75 7470  same as the outp
-00009230: 7574 2066 6f72 6d61 7420 287b 6f75 7470  ut format ({outp
-00009240: 7574 5f66 6f72 6d61 747d 2922 2c0a 2020  ut_format})",.  
-00009250: 2020 2020 2020 2020 2020 736f 7572 6365            source
-00009260: 3d62 6174 6368 5f63 6f6e 7665 7274 5f76  =batch_convert_v
-00009270: 6964 656f 5f66 6f72 6d61 742e 5f5f 6e61  ideo_format.__na
-00009280: 6d65 5f5f 2c0a 2020 2020 2020 2020 290a  me__,.        ).
-00009290: 2020 2020 6966 206e 6f74 206f 732e 7061      if not os.pa
-000092a0: 7468 2e69 7364 6972 2864 6972 6563 746f  th.isdir(directo
-000092b0: 7279 293a 0a20 2020 2020 2020 2072 6169  ry):.        rai
-000092c0: 7365 204e 6f74 4469 7265 6374 6f72 7945  se NotDirectoryE
-000092d0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
-000092e0: 2020 6d73 673d 2253 494d 4241 2045 5252    msg="SIMBA ERR
-000092f0: 4f52 3a20 7b7d 2069 7320 6e6f 7420 6120  OR: {} is not a 
-00009300: 7661 6c69 6420 6469 7265 6374 6f72 7922  valid directory"
-00009310: 2e66 6f72 6d61 7428 6469 7265 6374 6f72  .format(director
-00009320: 7929 2c0a 2020 2020 2020 2020 2020 2020  y),.            
-00009330: 736f 7572 6365 3d62 6174 6368 5f63 6f6e  source=batch_con
-00009340: 7665 7274 5f76 6964 656f 5f66 6f72 6d61  vert_video_forma
-00009350: 742e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  t.__name__,.    
-00009360: 2020 2020 290a 2020 2020 7669 6465 6f5f      ).    video_
-00009370: 7061 7468 7320 3d20 5b5d 0a20 2020 2066  paths = [].    f
-00009380: 696c 655f 7061 7468 735f 696e 5f66 6f6c  ile_paths_in_fol
-00009390: 6465 7220 3d20 5b66 2066 6f72 2066 2069  der = [f for f i
-000093a0: 6e20 676c 6f62 2e67 6c6f 6228 6469 7265  n glob.glob(dire
-000093b0: 6374 6f72 7920 2b20 222f 2a22 2920 6966  ctory + "/*") if
-000093c0: 206f 732e 7061 7468 2e69 7366 696c 6528   os.path.isfile(
-000093d0: 6629 5d0a 2020 2020 666f 7220 6669 6c65  f)].    for file
-000093e0: 5f70 6174 6820 696e 2066 696c 655f 7061  _path in file_pa
-000093f0: 7468 735f 696e 5f66 6f6c 6465 723a 0a20  ths_in_folder:. 
-00009400: 2020 2020 2020 205f 2c20 5f2c 2065 7874         _, _, ext
-00009410: 203d 2067 6574 5f66 6e5f 6578 7428 6669   = get_fn_ext(fi
-00009420: 6c65 7061 7468 3d66 696c 655f 7061 7468  lepath=file_path
-00009430: 290a 2020 2020 2020 2020 6966 2065 7874  ).        if ext
-00009440: 2e6c 6f77 6572 2829 203d 3d20 222e 7b7d  .lower() == ".{}
-00009450: 222e 666f 726d 6174 2869 6e70 7574 5f66  ".format(input_f
-00009460: 6f72 6d61 742e 6c6f 7765 7228 2929 3a0a  ormat.lower()):.
-00009470: 2020 2020 2020 2020 2020 2020 7669 6465              vide
-00009480: 6f5f 7061 7468 732e 6170 7065 6e64 2866  o_paths.append(f
-00009490: 696c 655f 7061 7468 290a 2020 2020 6966  ile_path).    if
-000094a0: 206c 656e 2876 6964 656f 5f70 6174 6873   len(video_paths
-000094b0: 2920 3c20 313a 0a20 2020 2020 2020 2072  ) < 1:.        r
-000094c0: 6169 7365 204e 6f46 696c 6573 466f 756e  aise NoFilesFoun
-000094d0: 6445 7272 6f72 280a 2020 2020 2020 2020  dError(.        
-000094e0: 2020 2020 6d73 673d 2253 494d 4241 2045      msg="SIMBA E
-000094f0: 5252 4f52 3a20 4e6f 2066 696c 6573 2077  RROR: No files w
-00009500: 6974 6820 2e7b 7d20 6669 6c65 2065 7874  ith .{} file ext
-00009510: 656e 7369 6f6e 2066 6f75 6e64 2069 6e20  ension found in 
-00009520: 7468 6520 7b7d 2064 6972 6563 746f 7279  the {} directory
-00009530: 222e 666f 726d 6174 280a 2020 2020 2020  ".format(.      
-00009540: 2020 2020 2020 2020 2020 696e 7075 745f            input_
-00009550: 666f 726d 6174 2c20 6469 7265 6374 6f72  format, director
-00009560: 790a 2020 2020 2020 2020 2020 2020 292c  y.            ),
+00005f80: 2e2e 2e2e 2022 290a 2020 2020 7472 793a  .... ").    try:
+00005f90: 0a20 2020 2020 2020 2069 6620 6770 753a  .        if gpu:
+00005fa0: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+00005fb0: 6d61 6e64 203d 2066 2766 666d 7065 6720  mand = f'ffmpeg 
+00005fc0: 2d68 7761 6363 656c 2061 7574 6f20 2d63  -hwaccel auto -c
+00005fd0: 3a76 2068 3236 345f 6375 7669 6420 2d69  :v h264_cuvid -i
+00005fe0: 2022 7b66 696c 655f 7061 7468 7d22 202d   "{file_path}" -
+00005ff0: 7666 2022 6472 6177 7465 7874 3d66 6f6e  vf "drawtext=fon
+00006000: 7466 696c 653d 7b73 696d 6261 5f66 6f6e  tfile={simba_fon
+00006010: 745f 7061 7468 7d3a 7465 7874 3d25 7b7b  t_path}:text=%{{
+00006020: 6e7d 7d3a 783d 2877 2d74 7729 2f32 3a79  n}}:x=(w-tw)/2:y
+00006030: 3d68 2d74 682d 3130 3a66 6f6e 7463 6f6c  =h-th-10:fontcol
+00006040: 6f72 3d77 6869 7465 3a62 6f78 3d31 3a62  or=white:box=1:b
+00006050: 6f78 636f 6c6f 723d 7768 6974 6540 302e  oxcolor=white@0.
+00006060: 3522 202d 633a 7620 6832 3634 5f6e 7665  5" -c:v h264_nve
+00006070: 6e63 202d 633a 6120 636f 7079 2022 7b73  nc -c:a copy "{s
+00006080: 6176 655f 6e61 6d65 7d22 202d 7927 0a20  ave_name}" -y'. 
+00006090: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000060a0: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
+000060b0: 203d 2066 2766 666d 7065 6720 2d79 202d   = f'ffmpeg -y -
+000060c0: 6920 227b 6669 6c65 5f70 6174 687d 2220  i "{file_path}" 
+000060d0: 2d76 6620 2264 7261 7774 6578 743d 666f  -vf "drawtext=fo
+000060e0: 6e74 6669 6c65 3d7b 7369 6d62 615f 666f  ntfile={simba_fo
+000060f0: 6e74 5f70 6174 687d 3a20 7465 7874 3d5c  nt_path}: text=\
+00006100: 2725 7b7b 6672 616d 655f 6e75 6d7d 7d5c  '%{{frame_num}}\
+00006110: 273a 2073 7461 7274 5f6e 756d 6265 723d  ': start_number=
+00006120: 303a 2078 3d28 772d 7477 292f 323a 2079  0: x=(w-tw)/2: y
+00006130: 3d68 2d28 322a 6c68 293a 2066 6f6e 7463  =h-(2*lh): fontc
+00006140: 6f6c 6f72 3d62 6c61 636b 3a20 666f 6e74  olor=black: font
+00006150: 7369 7a65 3d32 303a 2062 6f78 3d31 3a20  size=20: box=1: 
+00006160: 626f 7863 6f6c 6f72 3d77 6869 7465 3a20  boxcolor=white: 
+00006170: 626f 7862 6f72 6465 7277 3d35 2220 2d63  boxborderw=5" -c
+00006180: 3a61 2063 6f70 7920 227b 7361 7665 5f6e  :a copy "{save_n
+00006190: 616d 657d 2220 2d79 270a 2020 2020 2020  ame}" -y'.      
+000061a0: 2020 7072 696e 7428 6622 5573 696e 6720    print(f"Using 
+000061b0: 666f 6e74 2070 6174 6820 7b73 696d 6261  font path {simba
+000061c0: 5f66 6f6e 745f 7061 7468 7d2e 2e2e 2229  _font_path}...")
+000061d0: 0a20 2020 2020 2020 2073 7562 7072 6f63  .        subproc
+000061e0: 6573 732e 6368 6563 6b5f 6f75 7470 7574  ess.check_output
+000061f0: 2863 6f6d 6d61 6e64 2c20 7368 656c 6c3d  (command, shell=
+00006200: 5472 7565 290a 2020 2020 2020 2020 7375  True).        su
+00006210: 6270 726f 6365 7373 2e63 616c 6c28 636f  bprocess.call(co
+00006220: 6d6d 616e 642c 2073 6865 6c6c 3d54 7275  mmand, shell=Tru
+00006230: 652c 2073 7464 6f75 743d 7375 6270 726f  e, stdout=subpro
+00006240: 6365 7373 2e50 4950 4529 0a20 2020 2065  cess.PIPE).    e
+00006250: 7863 6570 7420 7375 6270 726f 6365 7373  xcept subprocess
+00006260: 2e43 616c 6c65 6450 726f 6365 7373 4572  .CalledProcessEr
+00006270: 726f 7220 6173 2065 3a0a 2020 2020 2020  ror as e:.      
+00006280: 2020 6966 2067 7075 3a0a 2020 2020 2020    if gpu:.      
+00006290: 2020 2020 2020 636f 6d6d 616e 6420 3d20        command = 
+000062a0: 6627 6666 6d70 6567 202d 6877 6163 6365  f'ffmpeg -hwacce
+000062b0: 6c20 6175 746f 202d 633a 7620 6832 3634  l auto -c:v h264
+000062c0: 5f63 7576 6964 202d 6920 227b 6669 6c65  _cuvid -i "{file
+000062d0: 5f70 6174 687d 2220 2d76 6620 2264 7261  _path}" -vf "dra
+000062e0: 7774 6578 743d 666f 6e74 7369 7a65 3d32  wtext=fontsize=2
+000062f0: 343a 666f 6e74 6669 6c65 3d7b 7369 6d62  4:fontfile={simb
+00006300: 615f 666f 6e74 5f70 6174 687d 3a74 6578  a_font_path}:tex
+00006310: 743d 257b 7b6e 7d7d 3a78 3d28 772d 7477  t=%{{n}}:x=(w-tw
+00006320: 292f 323a 793d 682d 7468 2d31 303a 666f  )/2:y=h-th-10:fo
+00006330: 6e74 636f 6c6f 723d 7768 6974 653a 626f  ntcolor=white:bo
+00006340: 783d 313a 626f 7863 6f6c 6f72 3d77 6869  x=1:boxcolor=whi
+00006350: 7465 4030 2e35 2220 2d63 3a76 2068 3236  te@0.5" -c:v h26
+00006360: 345f 6e76 656e 6320 2d63 3a61 2063 6f70  4_nvenc -c:a cop
+00006370: 7920 227b 7361 7665 5f6e 616d 657d 2220  y "{save_name}" 
+00006380: 2d79 270a 2020 2020 2020 2020 656c 7365  -y'.        else
+00006390: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+000063a0: 6d6d 616e 6420 3d20 6627 6666 6d70 6567  mmand = f'ffmpeg
+000063b0: 202d 7920 2d69 2022 7b66 696c 655f 7061   -y -i "{file_pa
+000063c0: 7468 7d22 202d 7666 2022 6472 6177 7465  th}" -vf "drawte
+000063d0: 7874 3d66 6f6e 7466 696c 653d 7b73 696d  xt=fontfile={sim
+000063e0: 6261 5f66 6f6e 745f 7061 7468 7d3a 7465  ba_font_path}:te
+000063f0: 7874 3d5c 2725 7b7b 6672 616d 655f 6e75  xt=\'%{{frame_nu
+00006400: 6d7d 7d5c 273a 7374 6172 745f 6e75 6d62  m}}\':start_numb
+00006410: 6572 3d31 3a78 3d28 772d 7477 292f 323a  er=1:x=(w-tw)/2:
+00006420: 793d 682d 2832 2a6c 6829 3a66 6f6e 7463  y=h-(2*lh):fontc
+00006430: 6f6c 6f72 3d62 6c61 636b 3a66 6f6e 7473  olor=black:fonts
+00006440: 697a 653d 3230 3a62 6f78 3d31 3a62 6f78  ize=20:box=1:box
+00006450: 636f 6c6f 723d 7768 6974 653a 626f 7862  color=white:boxb
+00006460: 6f72 6465 7277 3d35 2220 2d63 3a61 2063  orderw=5" -c:a c
+00006470: 6f70 7920 227b 7361 7665 5f6e 616d 657d  opy "{save_name}
+00006480: 2220 2d79 270a 2020 2020 2020 2020 7072  " -y'.        pr
+00006490: 696e 7428 6622 5573 696e 6720 666f 6e74  int(f"Using font
+000064a0: 2070 6174 6820 7b73 696d 6261 5f66 6f6e   path {simba_fon
+000064b0: 745f 7061 7468 7d2e 2e2e 2229 0a20 2020  t_path}...").   
+000064c0: 2020 2020 2073 7562 7072 6f63 6573 732e       subprocess.
+000064d0: 6361 6c6c 2863 6f6d 6d61 6e64 2c20 7368  call(command, sh
+000064e0: 656c 6c3d 5472 7565 2c20 7374 646f 7574  ell=True, stdout
+000064f0: 3d73 7562 7072 6f63 6573 732e 5049 5045  =subprocess.PIPE
+00006500: 290a 2020 2020 7469 6d65 722e 7374 6f70  ).    timer.stop
+00006510: 5f74 696d 6572 2829 0a20 2020 2073 7464  _timer().    std
+00006520: 6f75 745f 7375 6363 6573 7328 0a20 2020  out_success(.   
+00006530: 2020 2020 206d 7367 3d66 2253 7570 6572       msg=f"Super
+00006540: 696d 706f 7365 6420 7669 6465 6f20 636f  imposed video co
+00006550: 6e76 6572 7465 6421 207b 7361 7665 5f6e  nverted! {save_n
+00006560: 616d 657d 2067 656e 6572 6174 6564 2122  ame} generated!"
+00006570: 2c0a 2020 2020 2020 2020 656c 6170 7365  ,.        elapse
+00006580: 645f 7469 6d65 3d74 696d 6572 2e65 6c61  d_time=timer.ela
+00006590: 7073 6564 5f74 696d 655f 7374 722c 0a20  psed_time_str,. 
+000065a0: 2020 2029 0a0a 0a23 205f 203d 2073 7570     )...# _ = sup
+000065b0: 6572 696d 706f 7365 5f66 7261 6d65 5f63  erimpose_frame_c
+000065c0: 6f75 6e74 2866 696c 655f 7061 7468 3d72  ount(file_path=r
+000065d0: 272f 5573 6572 732f 7369 6d6f 6e2f 4465  '/Users/simon/De
+000065e0: 736b 746f 702f 656e 7673 2f73 696d 6261  sktop/envs/simba
+000065f0: 2f74 726f 7562 6c65 7368 6f6f 7469 6e67  /troubleshooting
+00006600: 2f6d 6f75 7365 5f6f 7065 6e5f 6669 656c  /mouse_open_fiel
+00006610: 642f 7072 6f6a 6563 745f 666f 6c64 6572  d/project_folder
+00006620: 2f76 6964 656f 732f 5349 5f44 4159 335f  /videos/SI_DAY3_
+00006630: 3330 385f 4344 315f 5052 4553 454e 542e  308_CD1_PRESENT.
+00006640: 6d70 3427 2c20 6770 753d 4661 6c73 6529  mp4', gpu=False)
+00006650: 0a0a 0a64 6566 2072 656d 6f76 655f 6265  ...def remove_be
+00006660: 6769 6e6e 696e 675f 6f66 5f76 6964 656f  ginning_of_video
+00006670: 280a 2020 2020 6669 6c65 5f70 6174 683a  (.    file_path:
+00006680: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
+00006690: 6174 684c 696b 655d 2c20 7469 6d65 3a20  athLike], time: 
+000066a0: 696e 742c 2067 7075 3a20 4f70 7469 6f6e  int, gpu: Option
+000066b0: 616c 5b62 6f6f 6c5d 203d 2046 616c 7365  al[bool] = False
+000066c0: 0a29 202d 3e20 4e6f 6e65 3a0a 2020 2020  .) -> None:.    
+000066d0: 2222 220a 2020 2020 5265 6d6f 7665 204e  """.    Remove N
+000066e0: 2073 6563 6f6e 6473 2066 726f 6d20 7468   seconds from th
+000066f0: 6520 6265 6769 6e6e 696e 6720 6f66 2061  e beginning of a
+00006700: 2076 6964 656f 2066 696c 652e 2054 6865   video file. The
+00006710: 2072 6573 756c 7420 6973 2073 746f 7265   result is store
+00006720: 6420 696e 2074 6865 2073 616d 6520 6469  d in the same di
+00006730: 7265 6374 6f72 7920 6173 2074 6865 0a20  rectory as the. 
+00006740: 2020 2069 6e70 7574 2066 696c 6520 7769     input file wi
+00006750: 7468 2074 6865 2060 605f 7368 6f72 7465  th the ``_shorte
+00006760: 6e2e 6d70 3460 6020 7375 6666 6978 2e0a  n.mp4`` suffix..
+00006770: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
+00006780: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
+00006790: 7468 4c69 6b65 5d20 6669 6c65 5f70 6174  thLike] file_pat
+000067a0: 683a 2050 6174 6820 746f 2076 6964 656f  h: Path to video
+000067b0: 2066 696c 650a 2020 2020 3a70 6172 616d   file.    :param
+000067c0: 6574 6572 2069 6e74 2074 696d 653a 204e  eter int time: N
+000067d0: 756d 6265 7220 6f66 2073 6563 6f6e 6473  umber of seconds
+000067e0: 2074 6f20 7265 6d6f 7665 2066 726f 6d20   to remove from 
+000067f0: 7468 6520 6265 6769 6e6e 696e 6720 6f66  the beginning of
+00006800: 2074 6865 2076 6964 656f 2e0a 2020 2020   the video..    
+00006810: 3a70 6172 616d 6574 6572 204f 7074 696f  :parameter Optio
+00006820: 6e61 6c5b 626f 6f6c 5d20 6770 753a 2049  nal[bool] gpu: I
+00006830: 6620 5472 7565 2c20 7573 6520 4e56 4944  f True, use NVID
+00006840: 4541 2047 5055 2063 6f64 6563 732e 2044  EA GPU codecs. D
+00006850: 6566 6175 6c74 2046 616c 7365 2e0a 0a20  efault False... 
+00006860: 2020 203a 6578 616d 706c 653a 0a20 2020     :example:.   
+00006870: 203e 3e3e 205f 203d 2072 656d 6f76 655f   >>> _ = remove_
+00006880: 6265 6769 6e6e 696e 675f 6f66 5f76 6964  beginning_of_vid
+00006890: 656f 2866 696c 655f 7061 7468 3d27 7072  eo(file_path='pr
+000068a0: 6f6a 6563 745f 666f 6c64 6572 2f76 6964  oject_folder/vid
+000068b0: 656f 732f 5669 6465 6f5f 312e 6176 6927  eos/Video_1.avi'
+000068c0: 2c20 7469 6d65 3d31 3029 0a20 2020 2022  , time=10).    "
+000068d0: 2222 0a0a 2020 2020 6368 6563 6b5f 6666  ""..    check_ff
+000068e0: 6d70 6567 5f61 7661 696c 6162 6c65 2872  mpeg_available(r
+000068f0: 6169 7365 5f65 7272 6f72 3d54 7275 6529  aise_error=True)
+00006900: 0a20 2020 2074 696d 6572 203d 2053 696d  .    timer = Sim
+00006910: 6261 5469 6d65 7228 7374 6172 743d 5472  baTimer(start=Tr
+00006920: 7565 290a 2020 2020 6368 6563 6b5f 6669  ue).    check_fi
+00006930: 6c65 5f65 7869 7374 5f61 6e64 5f72 6561  le_exist_and_rea
+00006940: 6461 626c 6528 6669 6c65 5f70 6174 683d  dable(file_path=
+00006950: 6669 6c65 5f70 6174 6829 0a20 2020 2063  file_path).    c
+00006960: 6865 636b 5f69 6e74 286e 616d 653d 2243  heck_int(name="C
+00006970: 7574 2074 696d 6522 2c20 7661 6c75 653d  ut time", value=
+00006980: 7469 6d65 290a 2020 2020 6469 722c 2066  time).    dir, f
+00006990: 696c 655f 6e61 6d65 2c20 6578 7420 3d20  ile_name, ext = 
+000069a0: 6765 745f 666e 5f65 7874 2866 696c 6570  get_fn_ext(filep
+000069b0: 6174 683d 6669 6c65 5f70 6174 6829 0a20  ath=file_path). 
+000069c0: 2020 2073 6176 655f 6e61 6d65 203d 206f     save_name = o
+000069d0: 732e 7061 7468 2e6a 6f69 6e28 6469 722c  s.path.join(dir,
+000069e0: 2066 696c 655f 6e61 6d65 202b 2022 5f73   file_name + "_s
+000069f0: 686f 7274 656e 2e6d 7034 2229 0a20 2020  horten.mp4").   
+00006a00: 2069 6620 6f73 2e70 6174 682e 6973 6669   if os.path.isfi
+00006a10: 6c65 2873 6176 655f 6e61 6d65 293a 0a20  le(save_name):. 
+00006a20: 2020 2020 2020 2072 6169 7365 2046 696c         raise Fil
+00006a30: 6545 7869 7374 4572 726f 7228 0a20 2020  eExistError(.   
+00006a40: 2020 2020 2020 2020 206d 7367 3d22 5349           msg="SI
+00006a50: 4d42 4120 4552 524f 523a 2054 6865 206f  MBA ERROR: The o
+00006a60: 7574 6669 6c65 2066 696c 6520 616c 7265  utfile file alre
+00006a70: 6164 7920 6578 6973 743a 207b 7d2e 222e  ady exist: {}.".
+00006a80: 666f 726d 6174 2873 6176 655f 6e61 6d65  format(save_name
+00006a90: 292c 0a20 2020 2020 2020 2020 2020 2073  ),.            s
+00006aa0: 6f75 7263 653d 7265 6d6f 7665 5f62 6567  ource=remove_beg
+00006ab0: 696e 6e69 6e67 5f6f 665f 7669 6465 6f2e  inning_of_video.
+00006ac0: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
+00006ad0: 2020 290a 2020 2020 6966 2067 7075 3a0a    ).    if gpu:.
+00006ae0: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
+00006af0: 6865 636b 5f6e 7669 6465 615f 6770 755f  heck_nvidea_gpu_
+00006b00: 6176 6169 6c61 626c 6528 293a 0a20 2020  available():.   
+00006b10: 2020 2020 2020 2020 2072 6169 7365 2046           raise F
+00006b20: 464d 5045 4743 6f64 6563 4750 5545 7272  FMPEGCodecGPUErr
+00006b30: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
+00006b40: 2020 2020 6d73 673d 224e 6f20 4750 5520      msg="No GPU 
+00006b50: 666f 756e 6420 2861 7320 6576 616c 7561  found (as evalua
+00006b60: 7465 6420 6279 206e 7669 6465 612d 736d  ted by nvidea-sm
+00006b70: 6920 7265 7475 726e 696e 6720 4e6f 6e65  i returning None
+00006b80: 2922 2c0a 2020 2020 2020 2020 2020 2020  )",.            
+00006b90: 2020 2020 736f 7572 6365 3d72 656d 6f76      source=remov
+00006ba0: 655f 6265 6769 6e6e 696e 675f 6f66 5f76  e_beginning_of_v
+00006bb0: 6964 656f 2e5f 5f6e 616d 655f 5f2c 0a20  ideo.__name__,. 
+00006bc0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00006bd0: 2020 2020 2063 6f6d 6d61 6e64 203d 2027       command = '
+00006be0: 6666 6d70 6567 202d 6877 6163 6365 6c20  ffmpeg -hwaccel 
+00006bf0: 6175 746f 202d 633a 7620 6832 3634 5f63  auto -c:v h264_c
+00006c00: 7576 6964 202d 7373 207b 7d20 2d69 2022  uvid -ss {} -i "
+00006c10: 7b7d 2220 2d63 3a76 2068 3236 345f 6e76  {}" -c:v h264_nv
+00006c20: 656e 6320 2d63 3a61 2061 6163 2022 7b7d  enc -c:a aac "{}
+00006c30: 2227 2e66 6f72 6d61 7428 0a20 2020 2020  "'.format(.     
+00006c40: 2020 2020 2020 2069 6e74 2874 696d 6529         int(time)
+00006c50: 2c20 6669 6c65 5f70 6174 682c 2073 6176  , file_path, sav
+00006c60: 655f 6e61 6d65 0a20 2020 2020 2020 2029  e_name.        )
+00006c70: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+00006c80: 2020 2063 6f6d 6d61 6e64 203d 2066 2766     command = f'f
+00006c90: 666d 7065 6720 2d73 7320 7b69 6e74 2874  fmpeg -ss {int(t
+00006ca0: 696d 6529 7d20 2d69 2022 7b66 696c 655f  ime)} -i "{file_
+00006cb0: 7061 7468 7d22 202d 633a 7620 6c69 6278  path}" -c:v libx
+00006cc0: 3236 3420 2d63 3a61 2061 6163 2022 7b73  264 -c:a aac "{s
+00006cd0: 6176 655f 6e61 6d65 7d22 270a 2020 2020  ave_name}"'.    
+00006ce0: 7072 696e 7428 2253 686f 7274 656e 696e  print("Shortenin
+00006cf0: 6720 7669 6465 6f2e 2e2e 2022 290a 2020  g video... ").  
+00006d00: 2020 7375 6270 726f 6365 7373 2e63 616c    subprocess.cal
+00006d10: 6c28 636f 6d6d 616e 642c 2073 6865 6c6c  l(command, shell
+00006d20: 3d54 7275 652c 2073 7464 6f75 743d 7375  =True, stdout=su
+00006d30: 6270 726f 6365 7373 2e50 4950 4529 0a20  bprocess.PIPE). 
+00006d40: 2020 2074 696d 6572 2e73 746f 705f 7469     timer.stop_ti
+00006d50: 6d65 7228 290a 2020 2020 7374 646f 7574  mer().    stdout
+00006d60: 5f73 7563 6365 7373 280a 2020 2020 2020  _success(.      
+00006d70: 2020 6d73 673d 6622 5349 4d42 4120 434f    msg=f"SIMBA CO
+00006d80: 4d50 4c45 5445 3a20 5669 6465 6f20 636f  MPLETE: Video co
+00006d90: 6e76 6572 7465 6421 207b 7361 7665 5f6e  nverted! {save_n
+00006da0: 616d 657d 2067 656e 6572 6174 6564 2122  ame} generated!"
+00006db0: 2c0a 2020 2020 2020 2020 656c 6170 7365  ,.        elapse
+00006dc0: 645f 7469 6d65 3d74 696d 6572 2e65 6c61  d_time=timer.ela
+00006dd0: 7073 6564 5f74 696d 655f 7374 722c 0a20  psed_time_str,. 
+00006de0: 2020 2020 2020 2073 6f75 7263 653d 7265         source=re
+00006df0: 6d6f 7665 5f62 6567 696e 6e69 6e67 5f6f  move_beginning_o
+00006e00: 665f 7669 6465 6f2e 5f5f 6e61 6d65 5f5f  f_video.__name__
+00006e10: 2c0a 2020 2020 290a 0a0a 2320 7265 6d6f  ,.    )...# remo
+00006e20: 7665 5f62 6567 696e 6e69 6e67 5f6f 665f  ve_beginning_of_
+00006e30: 7669 6465 6f28 6669 6c65 5f70 6174 683d  video(file_path=
+00006e40: 7227 2f55 7365 7273 2f73 696d 6f6e 2f44  r'/Users/simon/D
+00006e50: 6573 6b74 6f70 2f65 6e76 732f 7369 6d62  esktop/envs/simb
+00006e60: 612f 7472 6f75 626c 6573 686f 6f74 696e  a/troubleshootin
+00006e70: 672f 6d6f 7573 655f 6f70 656e 5f66 6965  g/mouse_open_fie
+00006e80: 6c64 2f70 726f 6a65 6374 5f66 6f6c 6465  ld/project_folde
+00006e90: 722f 7669 6465 6f73 2f53 495f 4441 5933  r/videos/SI_DAY3
+00006ea0: 5f33 3038 5f43 4431 5f50 5245 5345 4e54  _308_CD1_PRESENT
+00006eb0: 5f66 7261 6d65 5f6e 6f2e 6d70 3427 2c20  _frame_no.mp4', 
+00006ec0: 7469 6d65 3d31 302c 2067 7075 3d46 616c  time=10, gpu=Fal
+00006ed0: 7365 290a 0a0a 6465 6620 636c 6970 5f76  se)...def clip_v
+00006ee0: 6964 656f 5f69 6e5f 7261 6e67 6528 0a20  ideo_in_range(. 
+00006ef0: 2020 2066 696c 655f 7061 7468 3a20 556e     file_path: Un
+00006f00: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
+00006f10: 4c69 6b65 5d2c 0a20 2020 2073 7461 7274  Like],.    start
+00006f20: 5f74 696d 653a 2073 7472 2c0a 2020 2020  _time: str,.    
+00006f30: 656e 645f 7469 6d65 3a20 7374 722c 0a20  end_time: str,. 
+00006f40: 2020 206f 7574 5f64 6972 3a20 4f70 7469     out_dir: Opti
+00006f50: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
+00006f60: 6f73 2e50 6174 684c 696b 655d 5d20 3d20  os.PathLike]] = 
+00006f70: 4e6f 6e65 2c0a 2020 2020 6f76 6572 7772  None,.    overwr
+00006f80: 6974 653a 204f 7074 696f 6e61 6c5b 626f  ite: Optional[bo
+00006f90: 6f6c 5d20 3d20 4661 6c73 652c 0a20 2020  ol] = False,.   
+00006fa0: 2069 6e63 6c75 6465 5f63 6c69 705f 7469   include_clip_ti
+00006fb0: 6d65 5f69 6e5f 6669 6c65 6e61 6d65 3a20  me_in_filename: 
+00006fc0: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 203d  Optional[bool] =
+00006fd0: 2046 616c 7365 2c0a 2020 2020 6770 753a   False,.    gpu:
+00006fe0: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
+00006ff0: 3d20 4661 6c73 652c 0a29 202d 3e20 4e6f  = False,.) -> No
+00007000: 6e65 3a0a 2020 2020 2222 220a 2020 2020  ne:.    """.    
+00007010: 436c 6970 2076 6964 656f 2077 6974 6869  Clip video withi
+00007020: 6e20 6120 7370 6563 6966 6963 2072 616e  n a specific ran
+00007030: 6765 2e20 5468 6520 7265 7375 6c74 2069  ge. The result i
+00007040: 7320 7374 6f72 6564 2069 6e20 7468 6520  s stored in the 
+00007050: 7361 6d65 2064 6972 6563 746f 7279 2061  same directory a
+00007060: 7320 7468 650a 2020 2020 696e 7075 7420  s the.    input 
+00007070: 6669 6c65 2077 6974 6820 7468 6520 6060  file with the ``
+00007080: 5f63 6c69 7070 6564 2e6d 7034 6060 2073  _clipped.mp4`` s
+00007090: 7566 6669 782e 0a0a 2020 2020 3a70 6172  uffix...    :par
+000070a0: 616d 6574 6572 2055 6e69 6f6e 5b73 7472  ameter Union[str
+000070b0: 2c20 6f73 2e50 6174 684c 696b 655d 2066  , os.PathLike] f
+000070c0: 696c 655f 7061 7468 3a20 5061 7468 2074  ile_path: Path t
+000070d0: 6f20 7669 6465 6f20 6669 6c65 0a20 2020  o video file.   
+000070e0: 203a 7061 7261 6d65 7465 7220 7374 7220   :parameter str 
+000070f0: 7374 6172 745f 7469 6d65 3a20 5374 6172  start_time: Star
+00007100: 7420 7469 6d65 2069 6e20 4848 3a4d 4d3a  t time in HH:MM:
+00007110: 5353 2066 6f72 6d61 742e 0a20 2020 203a  SS format..    :
+00007120: 7061 7261 6d65 7465 7220 7374 7220 656e  parameter str en
+00007130: 645f 7469 6d65 3a20 456e 6420 7469 6d65  d_time: End time
+00007140: 2069 6e20 4848 3a4d 4d3a 5353 2066 6f72   in HH:MM:SS for
+00007150: 6d61 742e 0a20 2020 203a 7061 7261 6d65  mat..    :parame
+00007160: 7465 7220 4f70 7469 6f6e 616c 5b55 6e69  ter Optional[Uni
+00007170: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
+00007180: 696b 655d 5d20 6f75 745f 6469 723a 2049  ike]] out_dir: I
+00007190: 6620 4e6f 6e65 2c20 7468 656e 2074 6865  f None, then the
+000071a0: 2063 6c69 7020 7769 6c6c 2062 6520 7374   clip will be st
+000071b0: 6f72 6564 2069 6e20 7468 6520 7361 6d65  ored in the same
+000071c0: 2064 6972 2061 7320 7468 6520 696e 7075   dir as the inpu
+000071d0: 7420 7669 6465 6f2e 2049 6620 6469 7265  t video. If dire
+000071e0: 6374 6f72 792c 2074 6865 6e20 7468 6520  ctory, then the 
+000071f0: 6c6f 6361 7469 6f6e 206f 6620 7468 6520  location of the 
+00007200: 6f75 7470 7574 2066 696c 6573 2e0a 2020  output files..  
+00007210: 2020 3a70 6172 616d 6574 6572 204f 7074    :parameter Opt
+00007220: 696f 6e61 6c5b 626f 6f6c 5d20 696e 636c  ional[bool] incl
+00007230: 7564 655f 636c 6970 5f74 696d 655f 696e  ude_clip_time_in
+00007240: 5f66 696c 656e 616d 653a 2049 6620 5472  _filename: If Tr
+00007250: 7565 2c20 696e 636c 7564 6520 7468 6520  ue, include the 
+00007260: 636c 6970 2073 7461 7274 2061 6e64 2065  clip start and e
+00007270: 6e64 2069 6e20 4848 2d4d 4d2d 5353 2066  nd in HH-MM-SS f
+00007280: 6f72 6d61 7420 6173 2073 7566 6669 7820  ormat as suffix 
+00007290: 696e 2074 6865 2066 696c 656e 616d 652e  in the filename.
+000072a0: 2049 6620 4661 6c73 652c 2074 6865 6e20   If False, then 
+000072b0: 7573 6520 696e 7465 6765 7220 7375 6666  use integer suff
+000072c0: 6963 2072 6570 7265 7365 6e74 696e 6720  ic representing 
+000072d0: 7468 6520 636f 756e 742e 0a20 2020 203a  the count..    :
+000072e0: 7061 7261 6d65 7465 7220 4f70 7469 6f6e  parameter Option
+000072f0: 616c 5b62 6f6f 6c5d 206f 7665 7277 7269  al[bool] overwri
+00007300: 7465 3a20 4966 2054 7275 652c 2074 6865  te: If True, the
+00007310: 206f 7665 7277 7269 7465 206f 7574 7075   overwrite outpu
+00007320: 7420 6669 6c65 2069 6620 7061 7468 2061  t file if path a
+00007330: 6c72 6561 6479 2065 7869 7374 2e20 4966  lready exist. If
+00007340: 2046 616c 7365 2c20 7468 656e 2072 6169   False, then rai
+00007350: 7365 2046 696c 6545 7869 7374 4572 726f  se FileExistErro
+00007360: 722e 0a20 2020 203a 7061 7261 6d65 7465  r..    :paramete
+00007370: 7220 4f70 7469 6f6e 616c 5b62 6f6f 6c5d  r Optional[bool]
+00007380: 2067 7075 3a20 4966 2054 7275 652c 2075   gpu: If True, u
+00007390: 7365 204e 5649 4445 4120 4750 5520 636f  se NVIDEA GPU co
+000073a0: 6465 6373 2e20 4465 6661 756c 7420 4661  decs. Default Fa
+000073b0: 6c73 652e 0a0a 2020 2020 3a65 7861 6d70  lse...    :examp
+000073c0: 6c65 3a0a 2020 2020 3e3e 3e20 5f20 3d20  le:.    >>> _ = 
+000073d0: 636c 6970 5f76 6964 656f 5f69 6e5f 7261  clip_video_in_ra
+000073e0: 6e67 6528 6669 6c65 5f70 6174 683d 2770  nge(file_path='p
+000073f0: 726f 6a65 6374 5f66 6f6c 6465 722f 7669  roject_folder/vi
+00007400: 6465 6f73 2f56 6964 656f 5f31 2e61 7669  deos/Video_1.avi
+00007410: 272c 2073 7461 7274 5f74 696d 653d 2730  ', start_time='0
+00007420: 303a 3030 3a30 3527 2c20 656e 645f 7469  0:00:05', end_ti
+00007430: 6d65 3d27 3030 3a30 303a 3130 2729 0a20  me='00:00:10'). 
+00007440: 2020 2022 2222 0a0a 2020 2020 6368 6563     """..    chec
+00007450: 6b5f 6666 6d70 6567 5f61 7661 696c 6162  k_ffmpeg_availab
+00007460: 6c65 2872 6169 7365 5f65 7272 6f72 3d54  le(raise_error=T
+00007470: 7275 6529 0a20 2020 2069 6620 6770 7520  rue).    if gpu 
+00007480: 616e 6420 6e6f 7420 6368 6563 6b5f 6e76  and not check_nv
+00007490: 6964 6561 5f67 7075 5f61 7661 696c 6162  idea_gpu_availab
+000074a0: 6c65 2829 3a0a 2020 2020 2020 2020 7261  le():.        ra
+000074b0: 6973 6520 4646 4d50 4547 436f 6465 6347  ise FFMPEGCodecG
+000074c0: 5055 4572 726f 7228 0a20 2020 2020 2020  PUError(.       
+000074d0: 2020 2020 206d 7367 3d22 4e6f 2047 5055       msg="No GPU
+000074e0: 2066 6f75 6e64 2028 6173 2065 7661 6c75   found (as evalu
+000074f0: 6174 6564 2062 7920 6e76 6964 6561 2d73  ated by nvidea-s
+00007500: 6d69 2072 6574 7572 6e69 6e67 204e 6f6e  mi returning Non
+00007510: 6529 222c 0a20 2020 2020 2020 2020 2020  e)",.           
+00007520: 2073 6f75 7263 653d 636c 6970 5f76 6964   source=clip_vid
+00007530: 656f 5f69 6e5f 7261 6e67 652e 5f5f 6e61  eo_in_range.__na
+00007540: 6d65 5f5f 2c0a 2020 2020 2020 2020 290a  me__,.        ).
+00007550: 2020 2020 7469 6d65 7220 3d20 5369 6d62      timer = Simb
+00007560: 6154 696d 6572 2873 7461 7274 3d54 7275  aTimer(start=Tru
+00007570: 6529 0a20 2020 2063 6865 636b 5f66 696c  e).    check_fil
+00007580: 655f 6578 6973 745f 616e 645f 7265 6164  e_exist_and_read
+00007590: 6162 6c65 2866 696c 655f 7061 7468 3d66  able(file_path=f
+000075a0: 696c 655f 7061 7468 290a 2020 2020 6469  ile_path).    di
+000075b0: 722c 2066 696c 655f 6e61 6d65 2c20 6578  r, file_name, ex
+000075c0: 7420 3d20 6765 745f 666e 5f65 7874 2866  t = get_fn_ext(f
+000075d0: 696c 6570 6174 683d 6669 6c65 5f70 6174  ilepath=file_pat
+000075e0: 6829 0a20 2020 2069 6620 6f75 745f 6469  h).    if out_di
+000075f0: 7220 6973 206e 6f74 204e 6f6e 653a 0a20  r is not None:. 
+00007600: 2020 2020 2020 2063 6865 636b 5f69 665f         check_if_
+00007610: 6469 725f 6578 6973 7473 2869 6e5f 6469  dir_exists(in_di
+00007620: 723d 6f75 745f 6469 7229 0a20 2020 2020  r=out_dir).     
+00007630: 2020 2064 6972 203d 206f 7574 5f64 6972     dir = out_dir
+00007640: 0a20 2020 2063 6865 636b 5f69 665f 7374  .    check_if_st
+00007650: 7269 6e67 5f76 616c 7565 5f69 735f 7661  ring_value_is_va
+00007660: 6c69 645f 7669 6465 6f5f 7469 6d65 7374  lid_video_timest
+00007670: 616d 7028 7661 6c75 653d 7374 6172 745f  amp(value=start_
+00007680: 7469 6d65 2c20 6e61 6d65 3d22 5354 4152  time, name="STAR
+00007690: 5420 5449 4d45 2229 0a20 2020 2063 6865  T TIME").    che
+000076a0: 636b 5f69 665f 7374 7269 6e67 5f76 616c  ck_if_string_val
+000076b0: 7565 5f69 735f 7661 6c69 645f 7669 6465  ue_is_valid_vide
+000076c0: 6f5f 7469 6d65 7374 616d 7028 7661 6c75  o_timestamp(valu
+000076d0: 653d 656e 645f 7469 6d65 2c20 6e61 6d65  e=end_time, name
+000076e0: 3d22 454e 4420 5449 4d45 2229 0a20 2020  ="END TIME").   
+000076f0: 2063 6865 636b 5f74 6861 745f 6868 6d6d   check_that_hhmm
+00007700: 7373 5f73 7461 7274 5f69 735f 6265 666f  ss_start_is_befo
+00007710: 7265 5f65 6e64 280a 2020 2020 2020 2020  re_end(.        
+00007720: 7374 6172 745f 7469 6d65 3d73 7461 7274  start_time=start
+00007730: 5f74 696d 652c 2065 6e64 5f74 696d 653d  _time, end_time=
+00007740: 656e 645f 7469 6d65 2c20 6e61 6d65 3d66  end_time, name=f
+00007750: 227b 6669 6c65 5f6e 616d 657d 2074 696d  "{file_name} tim
+00007760: 6573 7461 6d70 7322 0a20 2020 2029 0a20  estamps".    ). 
+00007770: 2020 2069 6620 6e6f 7420 696e 636c 7564     if not includ
+00007780: 655f 636c 6970 5f74 696d 655f 696e 5f66  e_clip_time_in_f
+00007790: 696c 656e 616d 653a 0a20 2020 2020 2020  ilename:.       
+000077a0: 2073 6176 655f 6e61 6d65 203d 206f 732e   save_name = os.
+000077b0: 7061 7468 2e6a 6f69 6e28 6469 722c 2066  path.join(dir, f
+000077c0: 696c 655f 6e61 6d65 202b 2022 5f63 6c69  ile_name + "_cli
+000077d0: 7070 6564 2e6d 7034 2229 0a20 2020 2065  pped.mp4").    e
+000077e0: 6c73 653a 0a20 2020 2020 2020 2073 6176  lse:.        sav
+000077f0: 655f 6e61 6d65 203d 206f 732e 7061 7468  e_name = os.path
+00007800: 2e6a 6f69 6e28 0a20 2020 2020 2020 2020  .join(.         
+00007810: 2020 2064 6972 2c0a 2020 2020 2020 2020     dir,.        
+00007820: 2020 2020 6669 6c65 5f6e 616d 650a 2020      file_name.  
+00007830: 2020 2020 2020 2020 2020 2b20 6627 5f7b            + f'_{
+00007840: 7374 6172 745f 7469 6d65 2e72 6570 6c61  start_time.repla
+00007850: 6365 2822 3a22 2c20 222d 2229 7d5f 7b65  ce(":", "-")}_{e
+00007860: 6e64 5f74 696d 652e 7265 706c 6163 6528  nd_time.replace(
+00007870: 223a 222c 2022 2d22 297d 2e6d 7034 272c  ":", "-")}.mp4',
+00007880: 0a20 2020 2020 2020 2029 0a20 2020 2069  .        ).    i
+00007890: 6620 6f73 2e70 6174 682e 6973 6669 6c65  f os.path.isfile
+000078a0: 2873 6176 655f 6e61 6d65 2920 616e 6420  (save_name) and 
+000078b0: 286e 6f74 206f 7665 7277 7269 7465 293a  (not overwrite):
+000078c0: 0a20 2020 2020 2020 2072 6169 7365 2046  .        raise F
+000078d0: 696c 6545 7869 7374 4572 726f 7228 0a20  ileExistError(. 
+000078e0: 2020 2020 2020 2020 2020 206d 7367 3d66             msg=f
+000078f0: 2253 494d 4241 2045 5252 4f52 3a20 5468  "SIMBA ERROR: Th
+00007900: 6520 6f75 7466 696c 6520 6669 6c65 2061  e outfile file a
+00007910: 6c72 6561 6479 2065 7869 7374 3a20 7b73  lready exist: {s
+00007920: 6176 655f 6e61 6d65 7d2e 222c 0a20 2020  ave_name}.",.   
+00007930: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
+00007940: 636c 6970 5f76 6964 656f 5f69 6e5f 7261  clip_video_in_ra
+00007950: 6e67 652e 5f5f 6e61 6d65 5f5f 2c0a 2020  nge.__name__,.  
+00007960: 2020 2020 2020 290a 2020 2020 6966 2067        ).    if g
+00007970: 7075 3a0a 2020 2020 2020 2020 636f 6d6d  pu:.        comm
+00007980: 616e 6420 3d20 6627 6666 6d70 6567 202d  and = f'ffmpeg -
+00007990: 6877 6163 6365 6c20 6175 746f 202d 633a  hwaccel auto -c:
+000079a0: 7620 6832 3634 5f63 7576 6964 202d 6920  v h264_cuvid -i 
+000079b0: 227b 6669 6c65 5f70 6174 687d 2220 2d73  "{file_path}" -s
+000079c0: 7320 7b73 7461 7274 5f74 696d 657d 202d  s {start_time} -
+000079d0: 746f 207b 656e 645f 7469 6d65 7d20 2d61  to {end_time} -a
+000079e0: 7379 6e63 2031 2022 7b73 6176 655f 6e61  sync 1 "{save_na
+000079f0: 6d65 7d22 202d 7927 0a20 2020 2065 6c73  me}" -y'.    els
+00007a00: 653a 0a20 2020 2020 2020 2063 6f6d 6d61  e:.        comma
+00007a10: 6e64 203d 2066 2766 666d 7065 6720 2d69  nd = f'ffmpeg -i
+00007a20: 2022 7b66 696c 655f 7061 7468 7d22 202d   "{file_path}" -
+00007a30: 7373 207b 7374 6172 745f 7469 6d65 7d20  ss {start_time} 
+00007a40: 2d74 6f20 7b65 6e64 5f74 696d 657d 202d  -to {end_time} -
+00007a50: 6173 796e 6320 3120 2d63 3a76 206c 6962  async 1 -c:v lib
+00007a60: 7670 782d 7670 3920 227b 7361 7665 5f6e  vpx-vp9 "{save_n
+00007a70: 616d 657d 2220 2d79 270a 2020 2020 7072  ame}" -y'.    pr
+00007a80: 696e 7428 6622 436c 6970 7069 6e67 2076  int(f"Clipping v
+00007a90: 6964 656f 207b 6669 6c65 5f6e 616d 657d  ideo {file_name}
+00007aa0: 2062 6574 7765 656e 207b 7374 6172 745f   between {start_
+00007ab0: 7469 6d65 7d20 616e 6420 7b65 6e64 5f74  time} and {end_t
+00007ac0: 696d 657d 2e2e 2e20 2229 0a20 2020 2073  ime}... ").    s
+00007ad0: 7562 7072 6f63 6573 732e 6361 6c6c 2863  ubprocess.call(c
+00007ae0: 6f6d 6d61 6e64 2c20 7368 656c 6c3d 5472  ommand, shell=Tr
+00007af0: 7565 2c20 7374 646f 7574 3d73 7562 7072  ue, stdout=subpr
+00007b00: 6f63 6573 732e 5049 5045 290a 2020 2020  ocess.PIPE).    
+00007b10: 7469 6d65 722e 7374 6f70 5f74 696d 6572  timer.stop_timer
+00007b20: 2829 0a20 2020 2073 7464 6f75 745f 7375  ().    stdout_su
+00007b30: 6363 6573 7328 0a20 2020 2020 2020 206d  ccess(.        m
+00007b40: 7367 3d66 2256 6964 656f 2063 6f6e 7665  sg=f"Video conve
+00007b50: 7274 6564 2120 7b73 6176 655f 6e61 6d65  rted! {save_name
+00007b60: 7d20 6765 6e65 7261 7465 6421 222c 0a20  } generated!",. 
+00007b70: 2020 2020 2020 2065 6c61 7073 6564 5f74         elapsed_t
+00007b80: 696d 653d 7469 6d65 722e 656c 6170 7365  ime=timer.elapse
+00007b90: 645f 7469 6d65 5f73 7472 2c0a 2020 2020  d_time_str,.    
+00007ba0: 2020 2020 736f 7572 6365 3d63 6c69 705f      source=clip_
+00007bb0: 7669 6465 6f5f 696e 5f72 616e 6765 2e5f  video_in_range._
+00007bc0: 5f6e 616d 655f 5f2c 0a20 2020 2029 0a0a  _name__,.    )..
+00007bd0: 0a64 6566 2064 6f77 6e73 616d 706c 655f  .def downsample_
+00007be0: 7669 6465 6f28 0a20 2020 2066 696c 655f  video(.    file_
+00007bf0: 7061 7468 3a20 556e 696f 6e5b 7374 722c  path: Union[str,
+00007c00: 206f 732e 5061 7468 4c69 6b65 5d2c 0a20   os.PathLike],. 
+00007c10: 2020 2076 6964 656f 5f68 6569 6768 743a     video_height:
+00007c20: 2069 6e74 2c0a 2020 2020 7669 6465 6f5f   int,.    video_
+00007c30: 7769 6474 683a 2069 6e74 2c0a 2020 2020  width: int,.    
+00007c40: 6770 753a 204f 7074 696f 6e61 6c5b 626f  gpu: Optional[bo
+00007c50: 6f6c 5d20 3d20 4661 6c73 652c 0a29 202d  ol] = False,.) -
+00007c60: 3e20 4e6f 6e65 3a0a 2020 2020 2222 220a  > None:.    """.
+00007c70: 2020 2020 446f 776e 2d73 616d 706c 6520      Down-sample 
+00007c80: 6120 7669 6465 6f20 6669 6c65 2e20 5468  a video file. Th
+00007c90: 6520 7265 7375 6c74 2069 7320 7374 6f72  e result is stor
+00007ca0: 6564 2069 6e20 7468 6520 7361 6d65 2064  ed in the same d
+00007cb0: 6972 6563 746f 7279 2061 7320 7468 650a  irectory as the.
+00007cc0: 2020 2020 696e 7075 7420 6669 6c65 2077      input file w
+00007cd0: 6974 6820 7468 6520 6060 5f64 6f77 6e73  ith the ``_downs
+00007ce0: 616d 706c 6564 2e6d 7034 6060 2073 7566  ampled.mp4`` suf
+00007cf0: 6669 782e 0a0a 2020 2020 3a70 6172 616d  fix...    :param
+00007d00: 6574 6572 2055 6e69 6f6e 5b73 7472 2c20  eter Union[str, 
+00007d10: 6f73 2e50 6174 684c 696b 655d 2066 696c  os.PathLike] fil
+00007d20: 655f 7061 7468 3a20 5061 7468 2074 6f20  e_path: Path to 
+00007d30: 7669 6465 6f20 6669 6c65 2e0a 2020 2020  video file..    
+00007d40: 3a70 6172 616d 6574 6572 2069 6e74 2076  :parameter int v
+00007d50: 6964 656f 5f68 6569 6768 743a 2068 6569  ideo_height: hei
+00007d60: 6768 7420 6f66 206e 6577 2076 6964 656f  ght of new video
+00007d70: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
+00007d80: 2069 6e74 2076 6964 656f 5f77 6964 7468   int video_width
+00007d90: 3a20 7769 6474 6820 6f66 206e 6577 2076  : width of new v
+00007da0: 6964 656f 2e0a 2020 2020 3a70 6172 616d  ideo..    :param
+00007db0: 6574 6572 204f 7074 696f 6e61 6c5b 626f  eter Optional[bo
+00007dc0: 6f6c 5d20 6770 753a 2049 6620 5472 7565  ol] gpu: If True
+00007dd0: 2c20 7573 6520 4e56 4944 4541 2047 5055  , use NVIDEA GPU
+00007de0: 2063 6f64 6563 732e 2044 6566 6175 6c74   codecs. Default
+00007df0: 2046 616c 7365 2e0a 0a20 2020 203a 6578   False...    :ex
+00007e00: 616d 706c 653a 0a20 2020 203e 3e3e 205f  ample:.    >>> _
+00007e10: 203d 2064 6f77 6e73 616d 706c 655f 7669   = downsample_vi
+00007e20: 6465 6f28 6669 6c65 5f70 6174 683d 2770  deo(file_path='p
+00007e30: 726f 6a65 6374 5f66 6f6c 6465 722f 7669  roject_folder/vi
+00007e40: 6465 6f73 2f56 6964 656f 5f31 2e61 7669  deos/Video_1.avi
+00007e50: 272c 2076 6964 656f 5f68 6569 6768 743d  ', video_height=
+00007e60: 3630 302c 2076 6964 656f 5f77 6964 7468  600, video_width
+00007e70: 3d34 3030 290a 2020 2020 2222 220a 2020  =400).    """.  
+00007e80: 2020 6368 6563 6b5f 6666 6d70 6567 5f61    check_ffmpeg_a
+00007e90: 7661 696c 6162 6c65 2872 6169 7365 5f65  vailable(raise_e
+00007ea0: 7272 6f72 3d54 7275 6529 0a20 2020 2069  rror=True).    i
+00007eb0: 6620 6770 7520 616e 6420 6e6f 7420 6368  f gpu and not ch
+00007ec0: 6563 6b5f 6e76 6964 6561 5f67 7075 5f61  eck_nvidea_gpu_a
+00007ed0: 7661 696c 6162 6c65 2829 3a0a 2020 2020  vailable():.    
+00007ee0: 2020 2020 7261 6973 6520 4646 4d50 4547      raise FFMPEG
+00007ef0: 436f 6465 6347 5055 4572 726f 7228 0a20  CodecGPUError(. 
+00007f00: 2020 2020 2020 2020 2020 206d 7367 3d22             msg="
+00007f10: 4e6f 2047 5055 2066 6f75 6e64 2028 6173  No GPU found (as
+00007f20: 2065 7661 6c75 6174 6564 2062 7920 6e76   evaluated by nv
+00007f30: 6964 6561 2d73 6d69 2072 6574 7572 6e69  idea-smi returni
+00007f40: 6e67 204e 6f6e 6529 222c 0a20 2020 2020  ng None)",.     
+00007f50: 2020 2020 2020 2073 6f75 7263 653d 646f         source=do
+00007f60: 776e 7361 6d70 6c65 5f76 6964 656f 2e5f  wnsample_video._
+00007f70: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
+00007f80: 2029 0a20 2020 2074 696d 6572 203d 2053   ).    timer = S
+00007f90: 696d 6261 5469 6d65 7228 7374 6172 743d  imbaTimer(start=
+00007fa0: 5472 7565 290a 2020 2020 6368 6563 6b5f  True).    check_
+00007fb0: 696e 7428 6e61 6d65 3d22 5669 6465 6f20  int(name="Video 
+00007fc0: 6865 6967 6874 222c 2076 616c 7565 3d76  height", value=v
+00007fd0: 6964 656f 5f68 6569 6768 7429 0a20 2020  ideo_height).   
+00007fe0: 2063 6865 636b 5f69 6e74 286e 616d 653d   check_int(name=
+00007ff0: 2256 6964 656f 2077 6964 7468 222c 2076  "Video width", v
+00008000: 616c 7565 3d76 6964 656f 5f77 6964 7468  alue=video_width
+00008010: 290a 2020 2020 6368 6563 6b5f 6669 6c65  ).    check_file
+00008020: 5f65 7869 7374 5f61 6e64 5f72 6561 6461  _exist_and_reada
+00008030: 626c 6528 6669 6c65 5f70 6174 683d 6669  ble(file_path=fi
+00008040: 6c65 5f70 6174 6829 0a20 2020 2064 6972  le_path).    dir
+00008050: 2c20 6669 6c65 5f6e 616d 652c 2065 7874  , file_name, ext
+00008060: 203d 2067 6574 5f66 6e5f 6578 7428 6669   = get_fn_ext(fi
+00008070: 6c65 7061 7468 3d66 696c 655f 7061 7468  lepath=file_path
+00008080: 290a 2020 2020 7361 7665 5f6e 616d 6520  ).    save_name 
+00008090: 3d20 6f73 2e70 6174 682e 6a6f 696e 2864  = os.path.join(d
+000080a0: 6972 2c20 6669 6c65 5f6e 616d 6520 2b20  ir, file_name + 
+000080b0: 225f 646f 776e 7361 6d70 6c65 642e 6d70  "_downsampled.mp
+000080c0: 3422 290a 2020 2020 6966 206f 732e 7061  4").    if os.pa
+000080d0: 7468 2e69 7366 696c 6528 7361 7665 5f6e  th.isfile(save_n
+000080e0: 616d 6529 3a0a 2020 2020 2020 2020 7261  ame):.        ra
+000080f0: 6973 6520 4669 6c65 4578 6973 7445 7272  ise FileExistErr
+00008100: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
+00008110: 2253 494d 4241 2045 5252 4f52 3a20 5468  "SIMBA ERROR: Th
+00008120: 6520 6f75 7466 696c 6520 6669 6c65 2061  e outfile file a
+00008130: 6c72 6561 6479 2065 7869 7374 3a20 7b7d  lready exist: {}
+00008140: 2e22 2e66 6f72 6d61 7428 7361 7665 5f6e  .".format(save_n
+00008150: 616d 6529 2c0a 2020 2020 2020 2020 2020  ame),.          
+00008160: 2020 736f 7572 6365 3d64 6f77 6e73 616d    source=downsam
+00008170: 706c 655f 7669 6465 6f2e 5f5f 6e61 6d65  ple_video.__name
+00008180: 5f5f 2c0a 2020 2020 2020 2020 290a 2020  __,.        ).  
+00008190: 2020 6966 2067 7075 3a0a 2020 2020 2020    if gpu:.      
+000081a0: 2020 636f 6d6d 616e 6420 3d20 6627 6666    command = f'ff
+000081b0: 6d70 6567 202d 7920 2d68 7761 6363 656c  mpeg -y -hwaccel
+000081c0: 2061 7574 6f20 2d63 3a76 2068 3236 345f   auto -c:v h264_
+000081d0: 6375 7669 6420 2d69 2022 7b66 696c 655f  cuvid -i "{file_
+000081e0: 7061 7468 7d22 202d 7666 2022 7363 616c  path}" -vf "scal
+000081f0: 653d 773d 7b76 6964 656f 5f77 6964 7468  e=w={video_width
+00008200: 7d3a 683d 7b76 6964 656f 5f68 6569 6768  }:h={video_heigh
+00008210: 747d 3a66 6f72 6365 5f6f 7269 6769 6e61  t}:force_origina
+00008220: 6c5f 6173 7065 6374 5f72 6174 696f 3d64  l_aspect_ratio=d
+00008230: 6563 7265 6173 653a 666c 6167 733d 6269  ecrease:flags=bi
+00008240: 6375 6269 6322 202d 633a 7620 6832 3634  cubic" -c:v h264
+00008250: 5f6e 7665 6e63 2022 7b73 6176 655f 6e61  _nvenc "{save_na
+00008260: 6d65 7d22 270a 2020 2020 656c 7365 3a0a  me}"'.    else:.
+00008270: 2020 2020 2020 2020 636f 6d6d 616e 6420          command 
+00008280: 3d20 6627 6666 6d70 6567 202d 6920 227b  = f'ffmpeg -i "{
+00008290: 6669 6c65 5f70 6174 687d 2220 2d76 6620  file_path}" -vf 
+000082a0: 7363 616c 653d 7b76 6964 656f 5f77 6964  scale={video_wid
+000082b0: 7468 7d3a 7b76 6964 656f 5f68 6569 6768  th}:{video_heigh
+000082c0: 747d 202d 633a 7620 6c69 6278 3236 3420  t} -c:v libx264 
+000082d0: 227b 7361 7665 5f6e 616d 657d 2220 2d68  "{save_name}" -h
+000082e0: 6964 655f 6261 6e6e 6572 270a 2020 2020  ide_banner'.    
+000082f0: 7072 696e 7428 2244 6f77 6e2d 7361 6d70  print("Down-samp
+00008300: 6c69 6e67 2076 6964 656f 2e2e 2e20 2229  ling video... ")
+00008310: 0a20 2020 2073 7562 7072 6f63 6573 732e  .    subprocess.
+00008320: 6361 6c6c 2863 6f6d 6d61 6e64 2c20 7368  call(command, sh
+00008330: 656c 6c3d 5472 7565 2c20 7374 646f 7574  ell=True, stdout
+00008340: 3d73 7562 7072 6f63 6573 732e 5049 5045  =subprocess.PIPE
+00008350: 290a 2020 2020 7469 6d65 722e 7374 6f70  ).    timer.stop
+00008360: 5f74 696d 6572 2829 0a20 2020 2073 7464  _timer().    std
+00008370: 6f75 745f 7375 6363 6573 7328 0a20 2020  out_success(.   
+00008380: 2020 2020 206d 7367 3d66 2253 494d 4241       msg=f"SIMBA
+00008390: 2043 4f4d 504c 4554 453a 2056 6964 656f   COMPLETE: Video
+000083a0: 2063 6f6e 7665 7274 6564 2120 7b73 6176   converted! {sav
+000083b0: 655f 6e61 6d65 7d20 6765 6e65 7261 7465  e_name} generate
+000083c0: 6421 222c 0a20 2020 2020 2020 2065 6c61  d!",.        ela
+000083d0: 7073 6564 5f74 696d 653d 7469 6d65 722e  psed_time=timer.
+000083e0: 656c 6170 7365 645f 7469 6d65 5f73 7472  elapsed_time_str
+000083f0: 2c0a 2020 2020 2020 2020 736f 7572 6365  ,.        source
+00008400: 3d64 6f77 6e73 616d 706c 655f 7669 6465  =downsample_vide
+00008410: 6f2e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  o.__name__,.    
+00008420: 290a 0a0a 6465 6620 6769 665f 6372 6561  )...def gif_crea
+00008430: 746f 7228 0a20 2020 2066 696c 655f 7061  tor(.    file_pa
+00008440: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
+00008450: 732e 5061 7468 4c69 6b65 5d2c 0a20 2020  s.PathLike],.   
+00008460: 2073 7461 7274 5f74 696d 653a 2069 6e74   start_time: int
+00008470: 2c0a 2020 2020 6475 7261 7469 6f6e 3a20  ,.    duration: 
+00008480: 696e 742c 0a20 2020 2077 6964 7468 3a20  int,.    width: 
+00008490: 696e 742c 0a20 2020 2067 7075 3a20 4f70  int,.    gpu: Op
+000084a0: 7469 6f6e 616c 5b62 6f6f 6c5d 203d 2046  tional[bool] = F
+000084b0: 616c 7365 2c0a 2920 2d3e 204e 6f6e 653a  alse,.) -> None:
+000084c0: 0a20 2020 2022 2222 0a20 2020 2043 7265  .    """.    Cre
+000084d0: 6174 6520 6120 7361 6d70 6c65 2067 6966  ate a sample gif
+000084e0: 2066 726f 6d20 6120 7669 6465 6f20 6669   from a video fi
+000084f0: 6c65 2e20 5468 6520 7265 7375 6c74 2069  le. The result i
+00008500: 7320 7374 6f72 6564 2069 6e20 7468 6520  s stored in the 
+00008510: 7361 6d65 2064 6972 6563 746f 7279 2061  same directory a
+00008520: 7320 7468 650a 2020 2020 696e 7075 7420  s the.    input 
+00008530: 6669 6c65 2077 6974 6820 7468 6520 6060  file with the ``
+00008540: 2e67 6966 6060 2066 696c 652d 656e 6469  .gif`` file-endi
+00008550: 6e67 2e0a 0a20 2020 202e 2e20 6e6f 7465  ng...    .. note
+00008560: 3a3a 0a20 2020 2020 2020 5468 6520 6865  ::.       The he
+00008570: 6967 6874 2069 7320 6175 746f 2d63 6f6d  ight is auto-com
+00008580: 7075 7465 6420 746f 2072 6574 6169 6e20  puted to retain 
+00008590: 6173 7065 6374 2072 6174 696f 0a0a 2020  aspect ratio..  
+000085a0: 2020 3a70 6172 616d 6574 6572 2055 6e69    :parameter Uni
+000085b0: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
+000085c0: 696b 655d 2066 696c 655f 7061 7468 3a20  ike] file_path: 
+000085d0: 5061 7468 2074 6f20 7669 6465 6f20 6669  Path to video fi
+000085e0: 6c65 2e0a 2020 2020 3a70 6172 616d 6574  le..    :paramet
+000085f0: 6572 2069 6e74 2073 7461 7274 5f74 696d  er int start_tim
+00008600: 653a 2053 7461 7274 2074 696d 6520 6f66  e: Start time of
+00008610: 2074 6865 2067 6966 2069 6e20 7265 6c61   the gif in rela
+00008620: 7469 6f6e 2074 6f20 7468 6520 7669 6465  tion to the vide
+00008630: 6f20 696e 2073 6563 6f6e 6473 2e0a 2020  o in seconds..  
+00008640: 2020 3a70 6172 616d 6574 6572 2069 6e74    :parameter int
+00008650: 2064 7572 6174 696f 6e3a 2044 7572 6174   duration: Durat
+00008660: 696f 6e20 6f66 2074 6865 2067 6966 2e0a  ion of the gif..
+00008670: 2020 2020 3a70 6172 616d 6574 6572 2069      :parameter i
+00008680: 6e74 2077 6964 7468 3a20 5769 6474 6820  nt width: Width 
+00008690: 6f66 2074 6865 2067 6966 2e0a 2020 2020  of the gif..    
+000086a0: 3a70 6172 616d 6574 6572 204f 7074 696f  :parameter Optio
+000086b0: 6e61 6c5b 626f 6f6c 5d20 6770 753a 2049  nal[bool] gpu: I
+000086c0: 6620 5472 7565 2c20 7573 6520 4e56 4944  f True, use NVID
+000086d0: 4541 2047 5055 2063 6f64 6563 732e 2044  EA GPU codecs. D
+000086e0: 6566 6175 6c74 2046 616c 7365 2e0a 0a20  efault False... 
+000086f0: 2020 203a 6578 616d 706c 653a 0a20 2020     :example:.   
+00008700: 203e 3e3e 205f 203d 2067 6966 5f63 7265   >>> _ = gif_cre
+00008710: 6174 6f72 2866 696c 655f 7061 7468 3d27  ator(file_path='
+00008720: 7072 6f6a 6563 745f 666f 6c64 6572 2f76  project_folder/v
+00008730: 6964 656f 732f 5669 6465 6f5f 312e 6176  ideos/Video_1.av
+00008740: 6927 2c20 7374 6172 745f 7469 6d65 3d35  i', start_time=5
+00008750: 2c20 6475 7261 7469 6f6e 3d31 302c 2077  , duration=10, w
+00008760: 6964 7468 3d36 3030 290a 2020 2020 2222  idth=600).    ""
+00008770: 220a 0a20 2020 2063 6865 636b 5f66 666d  "..    check_ffm
+00008780: 7065 675f 6176 6169 6c61 626c 6528 7261  peg_available(ra
+00008790: 6973 655f 6572 726f 723d 5472 7565 290a  ise_error=True).
+000087a0: 2020 2020 6966 2067 7075 2061 6e64 206e      if gpu and n
+000087b0: 6f74 2063 6865 636b 5f6e 7669 6465 615f  ot check_nvidea_
+000087c0: 6770 755f 6176 6169 6c61 626c 6528 293a  gpu_available():
+000087d0: 0a20 2020 2020 2020 2072 6169 7365 2046  .        raise F
+000087e0: 464d 5045 4743 6f64 6563 4750 5545 7272  FMPEGCodecGPUErr
+000087f0: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
+00008800: 6d73 673d 224e 5649 4445 4120 4750 5520  msg="NVIDEA GPU 
+00008810: 6e6f 7420 6176 6169 6c61 626c 6520 2861  not available (a
+00008820: 7320 6576 616c 7561 7465 6420 6279 206e  s evaluated by n
+00008830: 7669 6465 612d 736d 6920 7265 7475 726e  videa-smi return
+00008840: 696e 6720 4e6f 6e65 222c 0a20 2020 2020  ing None",.     
+00008850: 2020 2020 2020 2073 6f75 7263 653d 6769         source=gi
+00008860: 665f 6372 6561 746f 722e 5f5f 6e61 6d65  f_creator.__name
+00008870: 5f5f 2c0a 2020 2020 2020 2020 290a 2020  __,.        ).  
+00008880: 2020 7469 6d65 7220 3d20 5369 6d62 6154    timer = SimbaT
+00008890: 696d 6572 2873 7461 7274 3d54 7275 6529  imer(start=True)
+000088a0: 0a20 2020 2063 6865 636b 5f66 696c 655f  .    check_file_
+000088b0: 6578 6973 745f 616e 645f 7265 6164 6162  exist_and_readab
+000088c0: 6c65 2866 696c 655f 7061 7468 3d66 696c  le(file_path=fil
+000088d0: 655f 7061 7468 290a 2020 2020 6368 6563  e_path).    chec
+000088e0: 6b5f 696e 7428 6e61 6d65 3d22 5374 6172  k_int(name="Star
+000088f0: 7420 7469 6d65 222c 2076 616c 7565 3d73  t time", value=s
+00008900: 7461 7274 5f74 696d 652c 206d 696e 5f76  tart_time, min_v
+00008910: 616c 7565 3d30 290a 2020 2020 6368 6563  alue=0).    chec
+00008920: 6b5f 696e 7428 6e61 6d65 3d22 4475 7261  k_int(name="Dura
+00008930: 7469 6f6e 222c 2076 616c 7565 3d64 7572  tion", value=dur
+00008940: 6174 696f 6e2c 206d 696e 5f76 616c 7565  ation, min_value
+00008950: 3d31 290a 2020 2020 6368 6563 6b5f 696e  =1).    check_in
+00008960: 7428 6e61 6d65 3d22 5769 6474 6822 2c20  t(name="Width", 
+00008970: 7661 6c75 653d 7769 6474 6829 0a20 2020  value=width).   
+00008980: 2076 6964 656f 5f6d 6574 615f 6461 7461   video_meta_data
+00008990: 203d 2067 6574 5f76 6964 656f 5f6d 6574   = get_video_met
+000089a0: 615f 6461 7461 2866 696c 655f 7061 7468  a_data(file_path
+000089b0: 290a 2020 2020 6966 2028 696e 7428 7374  ).    if (int(st
+000089c0: 6172 745f 7469 6d65 2920 2b20 696e 7428  art_time) + int(
+000089d0: 6475 7261 7469 6f6e 2929 203e 2076 6964  duration)) > vid
+000089e0: 656f 5f6d 6574 615f 6461 7461 5b22 7669  eo_meta_data["vi
+000089f0: 6465 6f5f 6c65 6e67 7468 5f73 225d 3a0a  deo_length_s"]:.
+00008a00: 2020 2020 2020 2020 7261 6973 6520 4672          raise Fr
+00008a10: 616d 6552 616e 6765 4572 726f 7228 0a20  ameRangeError(. 
+00008a20: 2020 2020 2020 2020 2020 206d 7367 3d66             msg=f
+00008a30: 2754 6865 2065 6e64 206f 6620 7468 6520  'The end of the 
+00008a40: 6769 6620 2873 7461 7274 2074 696d 653a  gif (start time:
+00008a50: 207b 7374 6172 745f 7469 6d65 7d20 2b20   {start_time} + 
+00008a60: 6475 7261 7469 6f6e 3a20 7b64 7572 6174  duration: {durat
+00008a70: 696f 6e7d 2920 6973 206c 6f6e 6765 7220  ion}) is longer 
+00008a80: 7468 616e 2074 6865 207b 6669 6c65 5f70  than the {file_p
+00008a90: 6174 687d 2076 6964 656f 3a20 7b76 6964  ath} video: {vid
+00008aa0: 656f 5f6d 6574 615f 6461 7461 5b22 7669  eo_meta_data["vi
+00008ab0: 6465 6f5f 6c65 6e67 7468 5f73 225d 7d73  deo_length_s"]}s
+00008ac0: 272c 0a20 2020 2020 2020 2020 2020 2073  ',.            s
+00008ad0: 6f75 7263 653d 6769 665f 6372 6561 746f  ource=gif_creato
+00008ae0: 722e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  r.__name__,.    
+00008af0: 2020 2020 290a 0a20 2020 2064 6972 2c20      )..    dir, 
+00008b00: 6669 6c65 5f6e 616d 652c 2065 7874 203d  file_name, ext =
+00008b10: 2067 6574 5f66 6e5f 6578 7428 6669 6c65   get_fn_ext(file
+00008b20: 7061 7468 3d66 696c 655f 7061 7468 290a  path=file_path).
+00008b30: 2020 2020 7361 7665 5f6e 616d 6520 3d20      save_name = 
+00008b40: 6f73 2e70 6174 682e 6a6f 696e 2864 6972  os.path.join(dir
+00008b50: 2c20 6669 6c65 5f6e 616d 6520 2b20 222e  , file_name + ".
+00008b60: 6769 6622 290a 2020 2020 6966 206f 732e  gif").    if os.
+00008b70: 7061 7468 2e69 7366 696c 6528 7361 7665  path.isfile(save
+00008b80: 5f6e 616d 6529 3a0a 2020 2020 2020 2020  _name):.        
+00008b90: 7261 6973 6520 4669 6c65 4578 6973 7445  raise FileExistE
+00008ba0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+00008bb0: 2020 2253 494d 4241 2045 5252 4f52 3a20    "SIMBA ERROR: 
+00008bc0: 5468 6520 6f75 7466 696c 6520 6669 6c65  The outfile file
+00008bd0: 2061 6c72 6561 6479 2065 7869 7374 3a20   already exist: 
+00008be0: 7b7d 2e22 2e66 6f72 6d61 7428 7361 7665  {}.".format(save
+00008bf0: 5f6e 616d 6529 2c0a 2020 2020 2020 2020  _name),.        
+00008c00: 2020 2020 736f 7572 6365 3d67 6966 5f63      source=gif_c
+00008c10: 7265 6174 6f72 2e5f 5f6e 616d 655f 5f2c  reator.__name__,
+00008c20: 0a20 2020 2020 2020 2029 0a20 2020 2069  .        ).    i
+00008c30: 6620 6770 753a 0a20 2020 2020 2020 2063  f gpu:.        c
+00008c40: 6f6d 6d61 6e64 203d 2066 2766 666d 7065  ommand = f'ffmpe
+00008c50: 6720 2d68 7761 6363 656c 2061 7574 6f20  g -hwaccel auto 
+00008c60: 2d63 3a76 2068 3236 345f 6375 7669 6420  -c:v h264_cuvid 
+00008c70: 2d73 7320 7b73 7461 7274 5f74 696d 657d  -ss {start_time}
+00008c80: 202d 6920 227b 6669 6c65 5f70 6174 687d   -i "{file_path}
+00008c90: 2220 2d74 6f20 7b64 7572 6174 696f 6e7d  " -to {duration}
+00008ca0: 202d 7666 2022 6670 733d 3130 2c73 6361   -vf "fps=10,sca
+00008cb0: 6c65 3d7b 7769 6474 687d 3a2d 3122 202d  le={width}:-1" -
+00008cc0: 633a 7620 6769 6620 2d70 6978 5f66 6d74  c:v gif -pix_fmt
+00008cd0: 2072 6762 3234 202d 7920 227b 7361 7665   rgb24 -y "{save
+00008ce0: 5f6e 616d 657d 2220 2d79 270a 2020 2020  _name}" -y'.    
+00008cf0: 656c 7365 3a0a 2020 2020 2020 2020 636f  else:.        co
+00008d00: 6d6d 616e 6420 3d20 6627 6666 6d70 6567  mmand = f'ffmpeg
+00008d10: 202d 7373 207b 7374 6172 745f 7469 6d65   -ss {start_time
+00008d20: 7d20 2d74 207b 6475 7261 7469 6f6e 7d20  } -t {duration} 
+00008d30: 2d69 2022 7b66 696c 655f 7061 7468 7d22  -i "{file_path}"
+00008d40: 202d 6669 6c74 6572 5f63 6f6d 706c 6578   -filter_complex
+00008d50: 2022 5b30 3a76 5d20 6670 733d 3135 2c73   "[0:v] fps=15,s
+00008d60: 6361 6c65 3d77 3d7b 7769 6474 687d 3a68  cale=w={width}:h
+00008d70: 3d2d 312c 7370 6c69 7420 5b61 5d5b 625d  =-1,split [a][b]
+00008d80: 3b5b 615d 2070 616c 6574 7465 6765 6e3d  ;[a] palettegen=
+00008d90: 7374 6174 735f 6d6f 6465 3d73 696e 676c  stats_mode=singl
+00008da0: 6520 5b70 5d3b 5b62 5d5b 705d 2070 616c  e [p];[b][p] pal
+00008db0: 6574 7465 7573 653d 6e65 773d 3122 2022  etteuse=new=1" "
+00008dc0: 7b73 6176 655f 6e61 6d65 7d22 270a 2020  {save_name}"'.  
+00008dd0: 2020 7072 696e 7428 2243 7265 6174 696e    print("Creatin
+00008de0: 6720 6769 6620 7361 6d70 6c65 2e2e 2e20  g gif sample... 
+00008df0: 2229 0a20 2020 2073 7562 7072 6f63 6573  ").    subproces
+00008e00: 732e 6361 6c6c 2863 6f6d 6d61 6e64 2c20  s.call(command, 
+00008e10: 7368 656c 6c3d 5472 7565 2c20 7374 646f  shell=True, stdo
+00008e20: 7574 3d73 7562 7072 6f63 6573 732e 5049  ut=subprocess.PI
+00008e30: 5045 290a 2020 2020 7469 6d65 722e 7374  PE).    timer.st
+00008e40: 6f70 5f74 696d 6572 2829 0a20 2020 2073  op_timer().    s
+00008e50: 7464 6f75 745f 7375 6363 6573 7328 0a20  tdout_success(. 
+00008e60: 2020 2020 2020 206d 7367 3d66 2253 494d         msg=f"SIM
+00008e70: 4241 2043 4f4d 504c 4554 453a 2056 6964  BA COMPLETE: Vid
+00008e80: 656f 2063 6f6e 7665 7274 6564 2120 7b73  eo converted! {s
+00008e90: 6176 655f 6e61 6d65 7d20 6765 6e65 7261  ave_name} genera
+00008ea0: 7465 6421 222c 0a20 2020 2020 2020 2065  ted!",.        e
+00008eb0: 6c61 7073 6564 5f74 696d 653d 7469 6d65  lapsed_time=time
+00008ec0: 722e 656c 6170 7365 645f 7469 6d65 5f73  r.elapsed_time_s
+00008ed0: 7472 2c0a 2020 2020 2020 2020 736f 7572  tr,.        sour
+00008ee0: 6365 3d67 6966 5f63 7265 6174 6f72 2e5f  ce=gif_creator._
+00008ef0: 5f6e 616d 655f 5f2c 0a20 2020 2029 0a0a  _name__,.    )..
+00008f00: 0a23 2067 6966 5f63 7265 6174 6f72 2866  .# gif_creator(f
+00008f10: 696c 655f 7061 7468 3d72 272f 5573 6572  ile_path=r'/User
+00008f20: 732f 7369 6d6f 6e2f 4465 736b 746f 702f  s/simon/Desktop/
+00008f30: 656e 7673 2f73 696d 6261 2f74 726f 7562  envs/simba/troub
+00008f40: 6c65 7368 6f6f 7469 6e67 2f6d 6f75 7365  leshooting/mouse
+00008f50: 5f6f 7065 6e5f 6669 656c 642f 7072 6f6a  _open_field/proj
+00008f60: 6563 745f 666f 6c64 6572 2f76 6964 656f  ect_folder/video
+00008f70: 732f 5349 5f44 4159 335f 3330 385f 4344  s/SI_DAY3_308_CD
+00008f80: 315f 5052 4553 454e 542e 6d70 3427 2c20  1_PRESENT.mp4', 
+00008f90: 7374 6172 745f 7469 6d65 3d35 2c20 6475  start_time=5, du
+00008fa0: 7261 7469 6f6e 3d31 352c 2077 6964 7468  ration=15, width
+00008fb0: 3d36 3030 2c20 6770 753d 4661 6c73 6529  =600, gpu=False)
+00008fc0: 0a0a 0a64 6566 2062 6174 6368 5f63 6f6e  ...def batch_con
+00008fd0: 7665 7274 5f76 6964 656f 5f66 6f72 6d61  vert_video_forma
+00008fe0: 7428 0a20 2020 2064 6972 6563 746f 7279  t(.    directory
+00008ff0: 3a20 556e 696f 6e5b 7374 722c 206f 732e  : Union[str, os.
+00009000: 5061 7468 4c69 6b65 5d2c 0a20 2020 2069  PathLike],.    i
+00009010: 6e70 7574 5f66 6f72 6d61 743a 2073 7472  nput_format: str
+00009020: 2c0a 2020 2020 6f75 7470 7574 5f66 6f72  ,.    output_for
+00009030: 6d61 743a 2073 7472 2c0a 2020 2020 6770  mat: str,.    gp
+00009040: 753a 204f 7074 696f 6e61 6c5b 626f 6f6c  u: Optional[bool
+00009050: 5d20 3d20 4661 6c73 652c 0a29 202d 3e20  ] = False,.) -> 
+00009060: 4e6f 6e65 3a0a 2020 2020 2222 220a 2020  None:.    """.  
+00009070: 2020 4261 7463 6820 636f 6e76 6572 7420    Batch convert 
+00009080: 616c 6c20 7669 6465 6f73 2069 6e20 6120  all videos in a 
+00009090: 666f 6c64 6572 206f 6620 7370 6563 6966  folder of specif
+000090a0: 6963 2066 6f72 6d61 7420 696e 746f 2061  ic format into a
+000090b0: 2064 6966 6665 7265 6e74 2076 6964 656f   different video
+000090c0: 2066 6f72 6d61 742e 2054 6865 2072 6573   format. The res
+000090d0: 756c 7473 2061 7265 0a20 2020 2073 746f  ults are.    sto
+000090e0: 7265 6420 696e 2074 6865 2073 616d 6520  red in the same 
+000090f0: 6469 7265 6374 6f72 7920 6173 2074 6865  directory as the
+00009100: 2069 6e70 7574 2066 696c 6573 2e0a 0a20   input files... 
+00009110: 2020 203a 7061 7261 6d65 7465 7220 556e     :parameter Un
+00009120: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
+00009130: 4c69 6b65 5d20 6469 7265 6374 6f72 793a  Like] directory:
+00009140: 2050 6174 6820 746f 2076 6964 656f 2066   Path to video f
+00009150: 696c 6520 6469 7265 6374 6f72 792e 0a20  ile directory.. 
+00009160: 2020 203a 7061 7261 6d65 7465 7220 7374     :parameter st
+00009170: 7220 696e 7075 745f 666f 726d 6174 3a20  r input_format: 
+00009180: 466f 726d 6174 206f 6620 7468 6520 696e  Format of the in
+00009190: 7075 7420 6669 6c65 7320 2865 2e67 2e2c  put files (e.g.,
+000091a0: 2061 7669 292e 0a20 2020 203a 7061 7261   avi)..    :para
+000091b0: 6d65 7465 7220 7374 7220 6f75 7470 7574  meter str output
+000091c0: 5f66 6f72 6d61 743a 2046 6f72 6d61 7420  _format: Format 
+000091d0: 6f66 2074 6865 206f 7574 7075 7420 6669  of the output fi
+000091e0: 6c65 7320 2865 2e67 2e2c 206d 7034 292e  les (e.g., mp4).
+000091f0: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
+00009200: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 2067  Optional[bool] g
+00009210: 7075 3a20 4966 2054 7275 652c 2075 7365  pu: If True, use
+00009220: 204e 5649 4445 4120 4750 5520 636f 6465   NVIDEA GPU code
+00009230: 6373 2e20 4465 6661 756c 7420 4661 6c73  cs. Default Fals
+00009240: 652e 0a0a 2020 2020 3a65 7861 6d70 6c65  e...    :example
+00009250: 3a0a 2020 2020 3e3e 3e20 5f20 3d20 6261  :.    >>> _ = ba
+00009260: 7463 685f 636f 6e76 6572 745f 7669 6465  tch_convert_vide
+00009270: 6f5f 666f 726d 6174 2864 6972 6563 746f  o_format(directo
+00009280: 7279 3d27 7072 6f6a 6563 745f 666f 6c64  ry='project_fold
+00009290: 6572 2f76 6964 656f 7327 2c20 696e 7075  er/videos', inpu
+000092a0: 745f 666f 726d 6174 3d27 6176 6927 2c20  t_format='avi', 
+000092b0: 6f75 7470 7574 5f66 6f72 6d61 743d 276d  output_format='m
+000092c0: 7034 2729 0a20 2020 2022 2222 0a0a 2020  p4').    """..  
+000092d0: 2020 6368 6563 6b5f 6666 6d70 6567 5f61    check_ffmpeg_a
+000092e0: 7661 696c 6162 6c65 2872 6169 7365 5f65  vailable(raise_e
+000092f0: 7272 6f72 3d54 7275 6529 0a20 2020 2069  rror=True).    i
+00009300: 6620 6770 7520 616e 6420 6e6f 7420 6368  f gpu and not ch
+00009310: 6563 6b5f 6e76 6964 6561 5f67 7075 5f61  eck_nvidea_gpu_a
+00009320: 7661 696c 6162 6c65 2829 3a0a 2020 2020  vailable():.    
+00009330: 2020 2020 7261 6973 6520 4646 4d50 4547      raise FFMPEG
+00009340: 436f 6465 6347 5055 4572 726f 7228 0a20  CodecGPUError(. 
+00009350: 2020 2020 2020 2020 2020 206d 7367 3d22             msg="
+00009360: 4e56 4944 4541 2047 5055 206e 6f74 2061  NVIDEA GPU not a
+00009370: 7661 696c 6162 6c65 2028 6173 2065 7661  vailable (as eva
+00009380: 6c75 6174 6564 2062 7920 6e76 6964 6561  luated by nvidea
+00009390: 2d73 6d69 2072 6574 7572 6e69 6e67 204e  -smi returning N
+000093a0: 6f6e 6522 2c0a 2020 2020 2020 2020 2020  one",.          
+000093b0: 2020 736f 7572 6365 3d62 6174 6368 5f63    source=batch_c
+000093c0: 6f6e 7665 7274 5f76 6964 656f 5f66 6f72  onvert_video_for
+000093d0: 6d61 742e 5f5f 6e61 6d65 5f5f 2c0a 2020  mat.__name__,.  
+000093e0: 2020 2020 2020 290a 2020 2020 6966 2069        ).    if i
+000093f0: 6e70 7574 5f66 6f72 6d61 7420 3d3d 206f  nput_format == o
+00009400: 7574 7075 745f 666f 726d 6174 3a0a 2020  utput_format:.  
+00009410: 2020 2020 2020 7261 6973 6520 496e 7661        raise Inva
+00009420: 6c69 6446 696c 6554 7970 6545 7272 6f72  lidFileTypeError
+00009430: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
+00009440: 673d 6622 5468 6520 696e 7075 7420 666f  g=f"The input fo
+00009450: 726d 6174 2028 7b69 6e70 7574 5f66 6f72  rmat ({input_for
+00009460: 6d61 747d 2920 6973 2074 6865 2073 616d  mat}) is the sam
+00009470: 6520 6173 2074 6865 206f 7574 7075 7420  e as the output 
+00009480: 666f 726d 6174 2028 7b6f 7574 7075 745f  format ({output_
+00009490: 666f 726d 6174 7d29 222c 0a20 2020 2020  format})",.     
+000094a0: 2020 2020 2020 2073 6f75 7263 653d 6261         source=ba
+000094b0: 7463 685f 636f 6e76 6572 745f 7669 6465  tch_convert_vide
+000094c0: 6f5f 666f 726d 6174 2e5f 5f6e 616d 655f  o_format.__name_
+000094d0: 5f2c 0a20 2020 2020 2020 2029 0a20 2020  _,.        ).   
+000094e0: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
+000094f0: 6973 6469 7228 6469 7265 6374 6f72 7929  isdir(directory)
+00009500: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+00009510: 4e6f 7444 6972 6563 746f 7279 4572 726f  NotDirectoryErro
+00009520: 7228 0a20 2020 2020 2020 2020 2020 206d  r(.            m
+00009530: 7367 3d22 5349 4d42 4120 4552 524f 523a  sg="SIMBA ERROR:
+00009540: 207b 7d20 6973 206e 6f74 2061 2076 616c   {} is not a val
+00009550: 6964 2064 6972 6563 746f 7279 222e 666f  id directory".fo
+00009560: 726d 6174 2864 6972 6563 746f 7279 292c  rmat(directory),
 00009570: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
 00009580: 7263 653d 6261 7463 685f 636f 6e76 6572  rce=batch_conver
 00009590: 745f 7669 6465 6f5f 666f 726d 6174 2e5f  t_video_format._
 000095a0: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
-000095b0: 2029 0a20 2020 2066 6f72 2066 696c 655f   ).    for file_
-000095c0: 636e 742c 2066 696c 655f 7061 7468 2069  cnt, file_path i
-000095d0: 6e20 656e 756d 6572 6174 6528 7669 6465  n enumerate(vide
-000095e0: 6f5f 7061 7468 7329 3a0a 2020 2020 2020  o_paths):.      
-000095f0: 2020 7669 6465 6f5f 7469 6d65 7220 3d20    video_timer = 
-00009600: 5369 6d62 6154 696d 6572 2873 7461 7274  SimbaTimer(start
-00009610: 3d54 7275 6529 0a20 2020 2020 2020 2064  =True).        d
-00009620: 6972 5f6e 616d 652c 2066 696c 655f 6e61  ir_name, file_na
-00009630: 6d65 2c20 6578 7420 3d20 6765 745f 666e  me, ext = get_fn
-00009640: 5f65 7874 2866 696c 6570 6174 683d 6669  _ext(filepath=fi
-00009650: 6c65 5f70 6174 6829 0a20 2020 2020 2020  le_path).       
-00009660: 2070 7269 6e74 2866 2250 726f 6365 7373   print(f"Process
-00009670: 696e 6720 7669 6465 6f20 7b66 696c 655f  ing video {file_
-00009680: 6e61 6d65 7d2e 2e2e 2229 0a20 2020 2020  name}...").     
-00009690: 2020 2073 6176 655f 7061 7468 203d 206f     save_path = o
-000096a0: 732e 7061 7468 2e6a 6f69 6e28 0a20 2020  s.path.join(.   
-000096b0: 2020 2020 2020 2020 2064 6972 5f6e 616d           dir_nam
-000096c0: 652c 2066 696c 655f 6e61 6d65 202b 2022  e, file_name + "
-000096d0: 2e7b 7d22 2e66 6f72 6d61 7428 6f75 7470  .{}".format(outp
-000096e0: 7574 5f66 6f72 6d61 742e 6c6f 7765 7228  ut_format.lower(
-000096f0: 2929 0a20 2020 2020 2020 2029 0a20 2020  )).        ).   
-00009700: 2020 2020 2069 6620 6f73 2e70 6174 682e       if os.path.
-00009710: 6973 6669 6c65 2873 6176 655f 7061 7468  isfile(save_path
-00009720: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00009730: 6169 7365 2046 696c 6545 7869 7374 4572  aise FileExistEr
-00009740: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
-00009750: 2020 2020 206d 7367 3d22 5349 4d42 4120       msg="SIMBA 
-00009760: 4552 524f 523a 2054 6865 206f 7574 6669  ERROR: The outfi
-00009770: 6c65 2066 696c 6520 616c 7265 6164 7920  le file already 
-00009780: 6578 6973 743a 207b 7d2e 222e 666f 726d  exist: {}.".form
-00009790: 6174 280a 2020 2020 2020 2020 2020 2020  at(.            
-000097a0: 2020 2020 2020 2020 7361 7665 5f70 6174          save_pat
-000097b0: 680a 2020 2020 2020 2020 2020 2020 2020  h.              
-000097c0: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
-000097d0: 2020 2020 2073 6f75 7263 653d 6261 7463       source=batc
-000097e0: 685f 636f 6e76 6572 745f 7669 6465 6f5f  h_convert_video_
-000097f0: 666f 726d 6174 2e5f 5f6e 616d 655f 5f2c  format.__name__,
-00009800: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00009810: 2020 2020 2020 2069 6620 6770 753a 0a20         if gpu:. 
-00009820: 2020 2020 2020 2020 2020 2063 6f6d 6d61             comma
-00009830: 6e64 203d 2027 6666 6d70 6567 202d 6877  nd = 'ffmpeg -hw
-00009840: 6163 6365 6c20 6175 746f 202d 633a 7620  accel auto -c:v 
-00009850: 6832 3634 5f63 7576 6964 202d 6920 227b  h264_cuvid -i "{
-00009860: 7d22 202d 633a 7620 6832 3634 5f6e 7665  }" -c:v h264_nve
-00009870: 6e63 202d 6371 2032 3320 2d70 7265 7365  nc -cq 23 -prese
-00009880: 743a 7620 6d65 6469 756d 202d 633a 6120  t:v medium -c:a 
-00009890: 636f 7079 2022 7b7d 2227 2e66 6f72 6d61  copy "{}"'.forma
-000098a0: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
-000098b0: 2020 2066 696c 655f 7061 7468 2c20 7361     file_path, sa
-000098c0: 7665 5f70 6174 680a 2020 2020 2020 2020  ve_path.        
-000098d0: 2020 2020 290a 2020 2020 2020 2020 656c      ).        el
-000098e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000098f0: 636f 6d6d 616e 6420 3d20 6627 6666 6d70  command = f'ffmp
-00009900: 6567 202d 7920 2d69 2022 7b66 696c 655f  eg -y -i "{file_
-00009910: 7061 7468 7d22 202d 633a 7620 6c69 6278  path}" -c:v libx
-00009920: 3236 3420 2d63 7266 2032 3120 2d70 7265  264 -crf 21 -pre
-00009930: 7365 7420 6d65 6469 756d 202d 633a 6120  set medium -c:a 
-00009940: 6c69 626d 7033 6c61 6d65 202d 623a 6120  libmp3lame -b:a 
-00009950: 3332 306b 2022 7b73 6176 655f 7061 7468  320k "{save_path
-00009960: 7d22 270a 2020 2020 2020 2020 7375 6270  }"'.        subp
-00009970: 726f 6365 7373 2e63 616c 6c28 636f 6d6d  rocess.call(comm
-00009980: 616e 642c 2073 6865 6c6c 3d54 7275 652c  and, shell=True,
-00009990: 2073 7464 6f75 743d 7375 6270 726f 6365   stdout=subproce
-000099a0: 7373 2e50 4950 4529 0a20 2020 2020 2020  ss.PIPE).       
-000099b0: 2076 6964 656f 5f74 696d 6572 2e73 746f   video_timer.sto
-000099c0: 705f 7469 6d65 7228 290a 2020 2020 2020  p_timer().      
-000099d0: 2020 7072 696e 7428 0a20 2020 2020 2020    print(.       
-000099e0: 2020 2020 2066 2256 6964 656f 207b 6669       f"Video {fi
-000099f0: 6c65 5f6e 616d 657d 2063 6f6d 706c 6574  le_name} complet
-00009a00: 652c 2028 656c 6170 7365 6420 7469 6d65  e, (elapsed time
-00009a10: 3a20 7b76 6964 656f 5f74 696d 6572 2e65  : {video_timer.e
-00009a20: 6c61 7073 6564 5f74 696d 655f 7374 727d  lapsed_time_str}
-00009a30: 7329 2028 5669 6465 6f20 7b66 696c 655f  s) (Video {file_
-00009a40: 636e 7420 2b20 317d 2f7b 6c65 6e28 7669  cnt + 1}/{len(vi
-00009a50: 6465 6f5f 7061 7468 7329 7d29 2e2e 2e22  deo_paths)})..."
-00009a60: 0a20 2020 2020 2020 2029 0a20 2020 2073  .        ).    s
-00009a70: 7464 6f75 745f 7375 6363 6573 7328 0a20  tdout_success(. 
-00009a80: 2020 2020 2020 206d 7367 3d66 2253 494d         msg=f"SIM
-00009a90: 4241 2043 4f4d 504c 4554 453a 207b 7374  BA COMPLETE: {st
-00009aa0: 7228 6c65 6e28 7669 6465 6f5f 7061 7468  r(len(video_path
-00009ab0: 7329 297d 2076 6964 656f 7320 636f 6e76  s))} videos conv
-00009ac0: 6572 7465 6420 696e 207b 6469 7265 6374  erted in {direct
-00009ad0: 6f72 797d 2064 6972 6563 746f 7279 2122  ory} directory!"
-00009ae0: 2c0a 2020 2020 2020 2020 736f 7572 6365  ,.        source
-00009af0: 3d62 6174 6368 5f63 6f6e 7665 7274 5f76  =batch_convert_v
-00009b00: 6964 656f 5f66 6f72 6d61 742e 5f5f 6e61  ideo_format.__na
-00009b10: 6d65 5f5f 2c0a 2020 2020 290a 0a0a 2320  me__,.    )...# 
-00009b20: 5f20 3d20 6261 7463 685f 636f 6e76 6572  _ = batch_conver
-00009b30: 745f 7669 6465 6f5f 666f 726d 6174 2864  t_video_format(d
-00009b40: 6972 6563 746f 7279 3d27 2f55 7365 7273  irectory='/Users
-00009b50: 2f73 696d 6f6e 2f44 6573 6b74 6f70 2f65  /simon/Desktop/e
-00009b60: 6e76 732f 7369 6d62 612f 7472 6f75 626c  nvs/simba/troubl
-00009b70: 6573 686f 6f74 696e 672f 6d6f 7573 655f  eshooting/mouse_
-00009b80: 6f70 656e 5f66 6965 6c64 2f70 726f 6a65  open_field/proje
-00009b90: 6374 5f66 6f6c 6465 722f 7669 6465 6f73  ct_folder/videos
-00009ba0: 2f74 6573 745f 3227 2c69 6e70 7574 5f66  /test_2',input_f
-00009bb0: 6f72 6d61 743d 276d 7034 272c 206f 7574  ormat='mp4', out
-00009bc0: 7075 745f 666f 726d 6174 3d27 6176 6927  put_format='avi'
-00009bd0: 290a 0a0a 6465 6620 6261 7463 685f 6372  )...def batch_cr
-00009be0: 6561 7465 5f66 7261 6d65 7328 6469 7265  eate_frames(dire
-00009bf0: 6374 6f72 793a 2055 6e69 6f6e 5b73 7472  ctory: Union[str
-00009c00: 2c20 6f73 2e50 6174 684c 696b 655d 2920  , os.PathLike]) 
-00009c10: 2d3e 204e 6f6e 653a 0a20 2020 2022 2222  -> None:.    """
-00009c20: 0a20 2020 2045 7874 7261 6374 2061 6c6c  .    Extract all
-00009c30: 2066 7261 6d65 7320 666f 7220 616c 6c20   frames for all 
-00009c40: 7669 6465 6f73 2069 6e20 6120 6469 7265  videos in a dire
-00009c50: 6374 6f72 792e 2052 6573 756c 7473 2061  ctory. Results a
-00009c60: 7265 2073 746f 7265 6420 7769 7468 696e  re stored within
-00009c70: 2073 7562 2d64 6972 6563 746f 7269 6573   sub-directories
-00009c80: 2069 6e20 7468 6520 696e 7075 740a 2020   in the input.  
-00009c90: 2020 6469 7265 6374 6f72 7920 6e61 6d65    directory name
-00009ca0: 6420 6163 636f 7264 696e 6720 746f 2074  d according to t
-00009cb0: 6865 2076 6964 656f 2066 696c 6573 2e0a  he video files..
-00009cc0: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
-00009cd0: 7374 7220 6469 7265 6374 6f72 793a 2050  str directory: P
-00009ce0: 6174 6820 746f 2064 6972 6563 746f 7279  ath to directory
-00009cf0: 2063 6f6e 7461 696e 696e 6720 7669 6465   containing vide
-00009d00: 6f20 6669 6c65 732e 0a0a 2020 2020 3a65  o files...    :e
-00009d10: 7861 6d70 6c65 3a0a 2020 2020 3e3e 3e20  xample:.    >>> 
-00009d20: 5f20 3d20 6261 7463 685f 6372 6561 7465  _ = batch_create
-00009d30: 5f66 7261 6d65 7328 6469 7265 6374 6f72  _frames(director
-00009d40: 793d 2770 726f 6a65 6374 5f66 6f6c 6465  y='project_folde
-00009d50: 722f 7669 6465 6f73 2729 0a20 2020 2022  r/videos').    "
-00009d60: 2222 0a0a 2020 2020 6966 206e 6f74 206f  ""..    if not o
-00009d70: 732e 7061 7468 2e69 7364 6972 2864 6972  s.path.isdir(dir
-00009d80: 6563 746f 7279 293a 0a20 2020 2020 2020  ectory):.       
-00009d90: 2072 6169 7365 204e 6f74 4469 7265 6374   raise NotDirect
-00009da0: 6f72 7945 7272 6f72 280a 2020 2020 2020  oryError(.      
-00009db0: 2020 2020 2020 6d73 673d 2253 494d 4241        msg="SIMBA
-00009dc0: 2045 5252 4f52 3a20 7b7d 2069 7320 6e6f   ERROR: {} is no
-00009dd0: 7420 6120 7661 6c69 6420 6469 7265 6374  t a valid direct
-00009de0: 6f72 7922 2e66 6f72 6d61 7428 6469 7265  ory".format(dire
-00009df0: 6374 6f72 7929 2c0a 2020 2020 2020 2020  ctory),.        
-00009e00: 2020 2020 736f 7572 6365 3d62 6174 6368      source=batch
-00009e10: 5f63 7265 6174 655f 6672 616d 6573 2e5f  _create_frames._
-00009e20: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
-00009e30: 2029 0a20 2020 2076 6964 656f 5f70 6174   ).    video_pat
-00009e40: 6873 203d 205b 5d0a 2020 2020 6669 6c65  hs = [].    file
-00009e50: 5f70 6174 6873 5f69 6e5f 666f 6c64 6572  _paths_in_folder
-00009e60: 203d 205b 6620 666f 7220 6620 696e 2067   = [f for f in g
-00009e70: 6c6f 622e 676c 6f62 2864 6972 6563 746f  lob.glob(directo
-00009e80: 7279 202b 2022 2f2a 2229 2069 6620 6f73  ry + "/*") if os
-00009e90: 2e70 6174 682e 6973 6669 6c65 2866 295d  .path.isfile(f)]
-00009ea0: 0a20 2020 2066 6f72 2066 696c 655f 7061  .    for file_pa
-00009eb0: 7468 2069 6e20 6669 6c65 5f70 6174 6873  th in file_paths
-00009ec0: 5f69 6e5f 666f 6c64 6572 3a0a 2020 2020  _in_folder:.    
-00009ed0: 2020 2020 5f2c 205f 2c20 6578 7420 3d20      _, _, ext = 
-00009ee0: 6765 745f 666e 5f65 7874 2866 696c 6570  get_fn_ext(filep
-00009ef0: 6174 683d 6669 6c65 5f70 6174 6829 0a20  ath=file_path). 
-00009f00: 2020 2020 2020 2069 6620 6578 742e 6c6f         if ext.lo
-00009f10: 7765 7228 2920 696e 205b 222e 6176 6922  wer() in [".avi"
-00009f20: 2c20 222e 6d70 3422 2c20 222e 6d6f 7622  , ".mp4", ".mov"
-00009f30: 2c20 222e 666c 7622 5d3a 0a20 2020 2020  , ".flv"]:.     
-00009f40: 2020 2020 2020 2076 6964 656f 5f70 6174         video_pat
-00009f50: 6873 2e61 7070 656e 6428 6669 6c65 5f70  hs.append(file_p
-00009f60: 6174 6829 0a20 2020 2069 6620 6c65 6e28  ath).    if len(
-00009f70: 7669 6465 6f5f 7061 7468 7329 203c 2031  video_paths) < 1
-00009f80: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
-00009f90: 4e6f 4669 6c65 7346 6f75 6e64 4572 726f  NoFilesFoundErro
-00009fa0: 7228 0a20 2020 2020 2020 2020 2020 206d  r(.            m
-00009fb0: 7367 3d22 5349 4d42 4120 4552 524f 523a  sg="SIMBA ERROR:
-00009fc0: 204e 6f20 6669 6c65 7320 7769 7468 202e   No files with .
-00009fd0: 6d70 342c 202e 6176 692c 202e 6d6f 762c  mp4, .avi, .mov,
-00009fe0: 202e 666c 7620 6669 6c65 2065 6e64 696e   .flv file endin
-00009ff0: 6720 666f 756e 6420 696e 2074 6865 207b  g found in the {
-0000a000: 7d20 6469 7265 6374 6f72 7922 2e66 6f72  } directory".for
-0000a010: 6d61 7428 0a20 2020 2020 2020 2020 2020  mat(.           
-0000a020: 2020 2020 2064 6972 6563 746f 7279 0a20       directory. 
-0000a030: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
-0000a040: 2020 2020 2020 2020 2020 736f 7572 6365            source
-0000a050: 3d62 6174 6368 5f63 7265 6174 655f 6672  =batch_create_fr
-0000a060: 616d 6573 2e5f 5f6e 616d 655f 5f2c 0a20  ames.__name__,. 
-0000a070: 2020 2020 2020 2029 0a20 2020 2066 6f72         ).    for
-0000a080: 2066 696c 655f 636e 742c 2066 696c 655f   file_cnt, file_
-0000a090: 7061 7468 2069 6e20 656e 756d 6572 6174  path in enumerat
-0000a0a0: 6528 7669 6465 6f5f 7061 7468 7329 3a0a  e(video_paths):.
-0000a0b0: 2020 2020 2020 2020 6469 725f 6e61 6d65          dir_name
-0000a0c0: 2c20 6669 6c65 5f6e 616d 652c 2065 7874  , file_name, ext
-0000a0d0: 203d 2067 6574 5f66 6e5f 6578 7428 6669   = get_fn_ext(fi
-0000a0e0: 6c65 7061 7468 3d66 696c 655f 7061 7468  lepath=file_path
-0000a0f0: 290a 2020 2020 2020 2020 7072 696e 7428  ).        print(
-0000a100: 2250 726f 6365 7373 696e 6720 7669 6465  "Processing vide
-0000a110: 6f20 7b7d 2e2e 2e22 2e66 6f72 6d61 7428  o {}...".format(
-0000a120: 6669 6c65 5f6e 616d 6529 290a 2020 2020  file_name)).    
-0000a130: 2020 2020 7361 7665 5f64 6972 203d 206f      save_dir = o
-0000a140: 732e 7061 7468 2e6a 6f69 6e28 6469 725f  s.path.join(dir_
-0000a150: 6e61 6d65 2c20 6669 6c65 5f6e 616d 6529  name, file_name)
-0000a160: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-0000a170: 6f73 2e70 6174 682e 6578 6973 7473 2873  os.path.exists(s
-0000a180: 6176 655f 6469 7229 3a0a 2020 2020 2020  ave_dir):.      
-0000a190: 2020 2020 2020 6f73 2e6d 616b 6564 6972        os.makedir
-0000a1a0: 7328 7361 7665 5f64 6972 290a 2020 2020  s(save_dir).    
-0000a1b0: 2020 2020 7669 6465 6f5f 746f 5f66 7261      video_to_fra
-0000a1c0: 6d65 7328 6669 6c65 5f70 6174 682c 2073  mes(file_path, s
-0000a1d0: 6176 655f 6469 722c 206f 7665 7277 7269  ave_dir, overwri
-0000a1e0: 7465 3d54 7275 652c 2065 7665 7279 3d31  te=True, every=1
-0000a1f0: 2c20 6368 756e 6b5f 7369 7a65 3d31 3030  , chunk_size=100
-0000a200: 3029 0a20 2020 2020 2020 2070 7269 6e74  0).        print
-0000a210: 280a 2020 2020 2020 2020 2020 2020 2256  (.            "V
-0000a220: 6964 656f 207b 7d20 636f 6d70 6c65 7465  ideo {} complete
-0000a230: 2c20 2856 6964 656f 207b 7d2f 7b7d 292e  , (Video {}/{}).
-0000a240: 2e2e 222e 666f 726d 6174 280a 2020 2020  ..".format(.    
-0000a250: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-0000a260: 5f6e 616d 652c 2073 7472 2866 696c 655f  _name, str(file_
-0000a270: 636e 7420 2b20 3129 2c20 7374 7228 6c65  cnt + 1), str(le
-0000a280: 6e28 7669 6465 6f5f 7061 7468 7329 290a  n(video_paths)).
-0000a290: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0000a2a0: 2020 2020 2020 290a 2020 2020 7374 646f        ).    stdo
-0000a2b0: 7574 5f73 7563 6365 7373 280a 2020 2020  ut_success(.    
-0000a2c0: 2020 2020 6d73 673d 6622 7b73 7472 286c      msg=f"{str(l
-0000a2d0: 656e 2876 6964 656f 5f70 6174 6873 2929  en(video_paths))
-0000a2e0: 7d20 7669 6465 6f73 2063 6f6e 7665 7274  } videos convert
-0000a2f0: 6564 2069 6e74 6f20 6672 616d 6573 2069  ed into frames i
-0000a300: 6e20 7b64 6972 6563 746f 7279 7d20 6469  n {directory} di
-0000a310: 7265 6374 6f72 7921 222c 0a20 2020 2020  rectory!",.     
-0000a320: 2020 2073 6f75 7263 653d 6261 7463 685f     source=batch_
-0000a330: 6372 6561 7465 5f66 7261 6d65 732e 5f5f  create_frames.__
-0000a340: 6e61 6d65 5f5f 2c0a 2020 2020 290a 0a0a  name__,.    )...
-0000a350: 6465 6620 6578 7472 6163 745f 6672 616d  def extract_fram
-0000a360: 6573 5f73 696e 676c 655f 7669 6465 6f28  es_single_video(
-0000a370: 6669 6c65 5f70 6174 683a 2055 6e69 6f6e  file_path: Union
-0000a380: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
-0000a390: 655d 2920 2d3e 204e 6f6e 653a 0a20 2020  e]) -> None:.   
-0000a3a0: 2022 2222 0a20 2020 2045 7874 7261 6374   """.    Extract
-0000a3b0: 2061 6c6c 2066 7261 6d65 7320 666f 7220   all frames for 
-0000a3c0: 6120 7369 6e67 6c65 2e20 5265 7375 6c74  a single. Result
-0000a3d0: 7320 6172 6520 7374 6f72 6564 2077 6974  s are stored wit
-0000a3e0: 6869 6e20 6120 7375 6264 6972 6563 746f  hin a subdirecto
-0000a3f0: 7279 2069 6e20 7468 6520 7361 6d65 0a20  ry in the same. 
-0000a400: 2020 2064 6972 6563 746f 7279 2061 7320     directory as 
-0000a410: 7468 6520 696e 7075 7420 6669 6c65 2e0a  the input file..
-0000a420: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
-0000a430: 7374 7220 6669 6c65 5f70 6174 683a 2050  str file_path: P
-0000a440: 6174 6820 746f 2076 6964 656f 2066 696c  ath to video fil
-0000a450: 652e 0a0a 2020 2020 3a65 7861 6d70 6c65  e...    :example
-0000a460: 3a0a 2020 2020 3e3e 3e20 5f20 3d20 6578  :.    >>> _ = ex
-0000a470: 7472 6163 745f 6672 616d 6573 5f73 696e  tract_frames_sin
-0000a480: 676c 655f 7669 6465 6f28 6669 6c65 5f70  gle_video(file_p
-0000a490: 6174 683d 2770 726f 6a65 6374 5f66 6f6c  ath='project_fol
-0000a4a0: 6465 722f 7669 6465 6f73 2f56 6964 656f  der/videos/Video
-0000a4b0: 5f31 2e6d 7034 2729 0a20 2020 2022 2222  _1.mp4').    """
-0000a4c0: 0a0a 2020 2020 7469 6d65 7220 3d20 5369  ..    timer = Si
-0000a4d0: 6d62 6154 696d 6572 2873 7461 7274 3d54  mbaTimer(start=T
-0000a4e0: 7275 6529 0a20 2020 2063 6865 636b 5f66  rue).    check_f
-0000a4f0: 696c 655f 6578 6973 745f 616e 645f 7265  ile_exist_and_re
-0000a500: 6164 6162 6c65 2866 696c 655f 7061 7468  adable(file_path
-0000a510: 3d66 696c 655f 7061 7468 290a 2020 2020  =file_path).    
-0000a520: 5f20 3d20 6765 745f 7669 6465 6f5f 6d65  _ = get_video_me
-0000a530: 7461 5f64 6174 6128 6669 6c65 5f70 6174  ta_data(file_pat
-0000a540: 6829 0a20 2020 2064 6972 5f6e 616d 652c  h).    dir_name,
-0000a550: 2066 696c 655f 6e61 6d65 2c20 6578 7420   file_name, ext 
-0000a560: 3d20 6765 745f 666e 5f65 7874 2866 696c  = get_fn_ext(fil
-0000a570: 6570 6174 683d 6669 6c65 5f70 6174 6829  epath=file_path)
-0000a580: 0a20 2020 2073 6176 655f 6469 7220 3d20  .    save_dir = 
-0000a590: 6f73 2e70 6174 682e 6a6f 696e 2864 6972  os.path.join(dir
-0000a5a0: 5f6e 616d 652c 2066 696c 655f 6e61 6d65  _name, file_name
-0000a5b0: 290a 2020 2020 6966 206e 6f74 206f 732e  ).    if not os.
-0000a5c0: 7061 7468 2e65 7869 7374 7328 7361 7665  path.exists(save
-0000a5d0: 5f64 6972 293a 0a20 2020 2020 2020 206f  _dir):.        o
-0000a5e0: 732e 6d61 6b65 6469 7273 2873 6176 655f  s.makedirs(save_
-0000a5f0: 6469 7229 0a20 2020 2070 7269 6e74 2866  dir).    print(f
-0000a600: 2250 726f 6365 7373 696e 6720 7669 6465  "Processing vide
-0000a610: 6f20 7b66 696c 655f 6e61 6d65 7d2e 2e2e  o {file_name}...
-0000a620: 2229 0a20 2020 2076 6964 656f 5f74 6f5f  ").    video_to_
-0000a630: 6672 616d 6573 2866 696c 655f 7061 7468  frames(file_path
-0000a640: 2c20 7361 7665 5f64 6972 2c20 6f76 6572  , save_dir, over
-0000a650: 7772 6974 653d 5472 7565 2c20 6576 6572  write=True, ever
-0000a660: 793d 312c 2063 6875 6e6b 5f73 697a 653d  y=1, chunk_size=
-0000a670: 3130 3030 290a 2020 2020 7469 6d65 722e  1000).    timer.
-0000a680: 7374 6f70 5f74 696d 6572 2829 0a20 2020  stop_timer().   
-0000a690: 2073 7464 6f75 745f 7375 6363 6573 7328   stdout_success(
-0000a6a0: 0a20 2020 2020 2020 206d 7367 3d66 2256  .        msg=f"V
-0000a6b0: 6964 656f 207b 6669 6c65 5f6e 616d 657d  ideo {file_name}
-0000a6c0: 2063 6f6e 7665 7274 6564 2074 6f20 696d   converted to im
-0000a6d0: 6167 6573 2069 6e20 7b64 6972 5f6e 616d  ages in {dir_nam
-0000a6e0: 657d 2064 6972 6563 746f 7279 2122 2c0a  e} directory!",.
-0000a6f0: 2020 2020 2020 2020 656c 6170 7365 645f          elapsed_
-0000a700: 7469 6d65 3d74 696d 6572 2e65 6c61 7073  time=timer.elaps
-0000a710: 6564 5f74 696d 655f 7374 722c 0a20 2020  ed_time_str,.   
-0000a720: 2020 2020 2073 6f75 7263 653d 6578 7472       source=extr
-0000a730: 6163 745f 6672 616d 6573 5f73 696e 676c  act_frames_singl
-0000a740: 655f 7669 6465 6f2e 5f5f 6e61 6d65 5f5f  e_video.__name__
-0000a750: 2c0a 2020 2020 290a 0a0a 2320 5f20 3d20  ,.    )...# _ = 
-0000a760: 6578 7472 6163 745f 6672 616d 6573 5f73  extract_frames_s
-0000a770: 696e 676c 655f 7669 6465 6f28 6669 6c65  ingle_video(file
-0000a780: 5f70 6174 683d 272f 5573 6572 732f 7369  _path='/Users/si
-0000a790: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
-0000a7a0: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
-0000a7b0: 6f6f 7469 6e67 2f6d 6f75 7365 5f6f 7065  ooting/mouse_ope
-0000a7c0: 6e5f 6669 656c 642f 7072 6f6a 6563 745f  n_field/project_
-0000a7d0: 666f 6c64 6572 2f76 6964 656f 732f 5349  folder/videos/SI
-0000a7e0: 5f44 4159 335f 3330 385f 4344 315f 5052  _DAY3_308_CD1_PR
-0000a7f0: 4553 454e 545f 646f 776e 7361 6d70 6c65  ESENT_downsample
-0000a800: 642e 6d70 3427 290a 0a0a 6465 6620 6d75  d.mp4')...def mu
-0000a810: 6c74 695f 7370 6c69 745f 7669 6465 6f28  lti_split_video(
-0000a820: 0a20 2020 2066 696c 655f 7061 7468 3a20  .    file_path: 
-0000a830: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
-0000a840: 7468 4c69 6b65 5d2c 0a20 2020 2073 7461  thLike],.    sta
-0000a850: 7274 5f74 696d 6573 3a20 4c69 7374 5b73  rt_times: List[s
-0000a860: 7472 5d2c 0a20 2020 2065 6e64 5f74 696d  tr],.    end_tim
-0000a870: 6573 3a20 4c69 7374 5b73 7472 5d2c 0a20  es: List[str],. 
-0000a880: 2020 206f 7574 5f64 6972 3a20 4f70 7469     out_dir: Opti
-0000a890: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
-0000a8a0: 6f73 2e50 6174 684c 696b 655d 5d20 3d20  os.PathLike]] = 
-0000a8b0: 4e6f 6e65 2c0a 2020 2020 696e 636c 7564  None,.    includ
-0000a8c0: 655f 636c 6970 5f74 696d 655f 696e 5f66  e_clip_time_in_f
-0000a8d0: 696c 656e 616d 653a 204f 7074 696f 6e61  ilename: Optiona
-0000a8e0: 6c5b 626f 6f6c 5d20 3d20 4661 6c73 652c  l[bool] = False,
-0000a8f0: 0a20 2020 2067 7075 3a20 4f70 7469 6f6e  .    gpu: Option
-0000a900: 616c 5b62 6f6f 6c5d 203d 2046 616c 7365  al[bool] = False
-0000a910: 2c0a 2920 2d3e 204e 6f6e 653a 0a20 2020  ,.) -> None:.   
-0000a920: 2022 2222 0a20 2020 2044 6976 6964 6520   """.    Divide 
-0000a930: 6120 7669 6465 6f20 6669 6c65 2069 6e74  a video file int
-0000a940: 6f20 6d75 6c74 6970 6c65 2076 6964 656f  o multiple video
-0000a950: 2066 696c 6573 2066 726f 6d20 7370 6563   files from spec
-0000a960: 6966 6965 6420 7374 6172 7420 616e 6420  ified start and 
-0000a970: 7374 6f70 2074 696d 6573 2e0a 0a20 2020  stop times...   
-0000a980: 203a 7061 7261 6d65 7465 7220 7374 7220   :parameter str 
-0000a990: 6669 6c65 5f70 6174 683a 2050 6174 6820  file_path: Path 
-0000a9a0: 746f 2069 6e70 7574 2076 6964 656f 2066  to input video f
-0000a9b0: 696c 652e 0a20 2020 203a 7061 7261 6d65  ile..    :parame
-0000a9c0: 7465 7220 4c69 7374 5b73 7472 5d20 7374  ter List[str] st
-0000a9d0: 6172 745f 7469 6d65 733a 2053 7461 7274  art_times: Start
-0000a9e0: 2074 696d 6573 2069 6e20 4848 3a4d 4d3a   times in HH:MM:
-0000a9f0: 5353 2066 6f72 6d61 742e 0a20 2020 203a  SS format..    :
-0000aa00: 7061 7261 6d65 7465 7220 4c69 7374 5b73  parameter List[s
-0000aa10: 7472 5d20 656e 645f 7469 6d65 733a 2045  tr] end_times: E
-0000aa20: 6e64 2074 696d 6573 2069 6e20 4848 3a4d  nd times in HH:M
-0000aa30: 4d3a 5353 2066 6f72 6d61 742e 0a20 2020  M:SS format..   
-0000aa40: 203a 7061 7261 6d65 7465 7220 4f70 7469   :parameter Opti
-0000aa50: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
-0000aa60: 6f73 2e50 6174 684c 696b 655d 5d20 6f75  os.PathLike]] ou
-0000aa70: 745f 6469 723a 2049 6620 4e6f 6e65 2c20  t_dir: If None, 
-0000aa80: 7468 656e 2074 6865 2063 6c69 7073 2077  then the clips w
-0000aa90: 696c 6c20 6265 2073 746f 7265 6420 696e  ill be stored in
-0000aaa0: 2074 6865 2073 616d 6520 6469 7220 6173   the same dir as
-0000aab0: 2074 6865 2069 6e70 7574 2076 6964 656f   the input video
-0000aac0: 2e20 4966 2064 6972 6563 746f 7279 2c20  . If directory, 
-0000aad0: 7468 656e 2074 6865 206c 6f63 6174 696f  then the locatio
-0000aae0: 6e20 6f66 2074 6865 206f 7574 7075 7420  n of the output 
-0000aaf0: 6669 6c65 732e 0a20 2020 203a 7061 7261  files..    :para
-0000ab00: 6d65 7465 7220 4f70 7469 6f6e 616c 5b62  meter Optional[b
-0000ab10: 6f6f 6c5d 2069 6e63 6c75 6465 5f63 6c69  ool] include_cli
-0000ab20: 705f 7469 6d65 5f69 6e5f 6669 6c65 6e61  p_time_in_filena
-0000ab30: 6d65 3a20 4966 2054 7275 652c 2069 6e63  me: If True, inc
-0000ab40: 6c75 6465 2074 6865 2063 6c69 7020 7374  lude the clip st
-0000ab50: 6172 7420 616e 6420 656e 6420 696e 2048  art and end in H
-0000ab60: 482d 4d4d 2d53 5320 666f 726d 6174 2061  H-MM-SS format a
-0000ab70: 7320 7375 6666 6978 2069 6e20 7468 6520  s suffix in the 
-0000ab80: 6669 6c65 6e61 6d65 2e20 4966 2046 616c  filename. If Fal
-0000ab90: 7365 2c20 7468 656e 2075 7365 2069 6e74  se, then use int
-0000aba0: 6567 6572 2073 7566 6669 6320 7265 7072  eger suffic repr
-0000abb0: 6573 656e 7469 6e67 2074 6865 2063 6f75  esenting the cou
-0000abc0: 6e74 2e0a 2020 2020 3a70 6172 616d 6574  nt..    :paramet
-0000abd0: 6572 204f 7074 696f 6e61 6c5b 626f 6f6c  er Optional[bool
-0000abe0: 5d20 6770 753a 2049 6620 5472 7565 2c20  ] gpu: If True, 
-0000abf0: 7573 6520 4e56 4944 4541 2047 5055 2063  use NVIDEA GPU c
-0000ac00: 6f64 6563 732e 2044 6566 6175 6c74 2046  odecs. Default F
-0000ac10: 616c 7365 2e0a 0a20 2020 203a 6578 616d  alse...    :exam
-0000ac20: 706c 653a 0a20 2020 203e 3e3e 205f 203d  ple:.    >>> _ =
-0000ac30: 206d 756c 7469 5f73 706c 6974 5f76 6964   multi_split_vid
-0000ac40: 656f 2866 696c 655f 7061 7468 3d27 7072  eo(file_path='pr
-0000ac50: 6f6a 6563 745f 666f 6c64 6572 2f76 6964  oject_folder/vid
-0000ac60: 656f 732f 5669 6465 6f5f 312e 6d70 3427  eos/Video_1.mp4'
-0000ac70: 2c20 7374 6172 745f 7469 6d65 733d 5b27  , start_times=['
-0000ac80: 3030 3a30 303a 3035 272c 2027 3030 3a30  00:00:05', '00:0
-0000ac90: 303a 3230 275d 2c20 656e 645f 7469 6d65  0:20'], end_time
-0000aca0: 733d 5b27 3030 3a30 303a 3130 272c 2027  s=['00:00:10', '
-0000acb0: 3030 3a30 303a 3235 275d 290a 2020 2020  00:00:25']).    
-0000acc0: 2222 220a 0a20 2020 2063 6865 636b 5f66  """..    check_f
-0000acd0: 666d 7065 675f 6176 6169 6c61 626c 6528  fmpeg_available(
-0000ace0: 7261 6973 655f 6572 726f 723d 5472 7565  raise_error=True
-0000acf0: 290a 2020 2020 7469 6d65 7220 3d20 5369  ).    timer = Si
-0000ad00: 6d62 6154 696d 6572 2873 7461 7274 3d54  mbaTimer(start=T
-0000ad10: 7275 6529 0a20 2020 2063 6865 636b 5f66  rue).    check_f
-0000ad20: 696c 655f 6578 6973 745f 616e 645f 7265  ile_exist_and_re
-0000ad30: 6164 6162 6c65 2866 696c 655f 7061 7468  adable(file_path
-0000ad40: 3d66 696c 655f 7061 7468 290a 2020 2020  =file_path).    
-0000ad50: 6469 725f 6e61 6d65 2c20 6669 6c65 5f6e  dir_name, file_n
-0000ad60: 616d 652c 2065 7874 203d 2067 6574 5f66  ame, ext = get_f
-0000ad70: 6e5f 6578 7428 6669 6c65 7061 7468 3d66  n_ext(filepath=f
-0000ad80: 696c 655f 7061 7468 290a 2020 2020 6966  ile_path).    if
-0000ad90: 206f 7574 5f64 6972 2069 7320 6e6f 7420   out_dir is not 
-0000ada0: 4e6f 6e65 3a0a 2020 2020 2020 2020 6966  None:.        if
-0000adb0: 206e 6f74 206f 732e 7061 7468 2e69 7364   not os.path.isd
-0000adc0: 6972 286f 7574 5f64 6972 293a 0a20 2020  ir(out_dir):.   
-0000add0: 2020 2020 2020 2020 206f 732e 6d61 6b65           os.make
-0000ade0: 6469 7273 286f 7574 5f64 6972 290a 2020  dirs(out_dir).  
-0000adf0: 2020 2020 2020 6469 725f 6e61 6d65 203d        dir_name =
-0000ae00: 206f 7574 5f64 6972 0a20 2020 2066 6f72   out_dir.    for
-0000ae10: 2073 7461 7274 5f74 696d 655f 636e 742c   start_time_cnt,
-0000ae20: 2073 7461 7274 5f74 696d 6520 696e 2065   start_time in e
-0000ae30: 6e75 6d65 7261 7465 2873 7461 7274 5f74  numerate(start_t
-0000ae40: 696d 6573 293a 0a20 2020 2020 2020 2063  imes):.        c
-0000ae50: 6865 636b 5f69 665f 7374 7269 6e67 5f76  heck_if_string_v
-0000ae60: 616c 7565 5f69 735f 7661 6c69 645f 7669  alue_is_valid_vi
-0000ae70: 6465 6f5f 7469 6d65 7374 616d 7028 0a20  deo_timestamp(. 
-0000ae80: 2020 2020 2020 2020 2020 2076 616c 7565             value
-0000ae90: 3d73 7461 7274 5f74 696d 652c 206e 616d  =start_time, nam
-0000aea0: 653d 6622 5374 6172 7420 7469 6d65 2066  e=f"Start time f
-0000aeb0: 6f72 2063 6c69 7020 7b73 7461 7274 5f74  or clip {start_t
-0000aec0: 696d 655f 636e 742b 317d 220a 2020 2020  ime_cnt+1}".    
-0000aed0: 2020 2020 290a 2020 2020 666f 7220 656e      ).    for en
-0000aee0: 645f 7469 6d65 5f63 6e74 2c20 656e 645f  d_time_cnt, end_
-0000aef0: 7469 6d65 2069 6e20 656e 756d 6572 6174  time in enumerat
-0000af00: 6528 656e 645f 7469 6d65 7329 3a0a 2020  e(end_times):.  
-0000af10: 2020 2020 2020 6368 6563 6b5f 6966 5f73        check_if_s
-0000af20: 7472 696e 675f 7661 6c75 655f 6973 5f76  tring_value_is_v
-0000af30: 616c 6964 5f76 6964 656f 5f74 696d 6573  alid_video_times
-0000af40: 7461 6d70 280a 2020 2020 2020 2020 2020  tamp(.          
-0000af50: 2020 7661 6c75 653d 656e 645f 7469 6d65    value=end_time
-0000af60: 2c20 6e61 6d65 3d66 2245 6e64 2074 696d  , name=f"End tim
-0000af70: 6520 666f 7220 636c 6970 207b 656e 645f  e for clip {end_
-0000af80: 7469 6d65 5f63 6e74 2b31 7d22 0a20 2020  time_cnt+1}".   
-0000af90: 2020 2020 2029 0a20 2020 2066 6f72 2063       ).    for c
-0000afa0: 6c69 705f 636e 742c 2028 7374 6172 745f  lip_cnt, (start_
-0000afb0: 7469 6d65 2c20 656e 645f 7469 6d65 2920  time, end_time) 
-0000afc0: 696e 2065 6e75 6d65 7261 7465 287a 6970  in enumerate(zip
-0000afd0: 2873 7461 7274 5f74 696d 6573 2c20 656e  (start_times, en
-0000afe0: 645f 7469 6d65 7329 293a 0a20 2020 2020  d_times)):.     
-0000aff0: 2020 2063 6865 636b 5f74 6861 745f 6868     check_that_hh
-0000b000: 6d6d 7373 5f73 7461 7274 5f69 735f 6265  mmss_start_is_be
-0000b010: 666f 7265 5f65 6e64 280a 2020 2020 2020  fore_end(.      
-0000b020: 2020 2020 2020 7374 6172 745f 7469 6d65        start_time
-0000b030: 3d73 7461 7274 5f74 696d 652c 2065 6e64  =start_time, end
-0000b040: 5f74 696d 653d 656e 645f 7469 6d65 2c20  _time=end_time, 
-0000b050: 6e61 6d65 3d66 2243 6c69 7020 7b73 7472  name=f"Clip {str
-0000b060: 2863 6c69 705f 636e 742b 3129 7d22 0a20  (clip_cnt+1)}". 
-0000b070: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000b080: 2063 6865 636b 5f69 665f 6868 6d6d 7373   check_if_hhmmss
-0000b090: 5f74 696d 6573 7461 6d70 5f69 735f 7661  _timestamp_is_va
-0000b0a0: 6c69 645f 7061 7274 5f6f 665f 7669 6465  lid_part_of_vide
-0000b0b0: 6f28 0a20 2020 2020 2020 2020 2020 2074  o(.            t
-0000b0c0: 696d 6573 7461 6d70 3d73 7461 7274 5f74  imestamp=start_t
-0000b0d0: 696d 652c 2076 6964 656f 5f70 6174 683d  ime, video_path=
-0000b0e0: 6669 6c65 5f70 6174 680a 2020 2020 2020  file_path.      
-0000b0f0: 2020 290a 2020 2020 2020 2020 6368 6563    ).        chec
-0000b100: 6b5f 6966 5f68 686d 6d73 735f 7469 6d65  k_if_hhmmss_time
-0000b110: 7374 616d 705f 6973 5f76 616c 6964 5f70  stamp_is_valid_p
-0000b120: 6172 745f 6f66 5f76 6964 656f 280a 2020  art_of_video(.  
-0000b130: 2020 2020 2020 2020 2020 7469 6d65 7374            timest
-0000b140: 616d 703d 656e 645f 7469 6d65 2c20 7669  amp=end_time, vi
-0000b150: 6465 6f5f 7061 7468 3d66 696c 655f 7061  deo_path=file_pa
-0000b160: 7468 0a20 2020 2020 2020 2029 0a20 2020  th.        ).   
-0000b170: 2020 2020 2069 6620 6e6f 7420 696e 636c       if not incl
-0000b180: 7564 655f 636c 6970 5f74 696d 655f 696e  ude_clip_time_in
-0000b190: 5f66 696c 656e 616d 653a 0a20 2020 2020  _filename:.     
-0000b1a0: 2020 2020 2020 2073 6176 655f 7061 7468         save_path
-0000b1b0: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-0000b1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b1d0: 2064 6972 5f6e 616d 652c 2066 696c 655f   dir_name, file_
-0000b1e0: 6e61 6d65 202b 2022 5f7b 7d22 2e66 6f72  name + "_{}".for
-0000b1f0: 6d61 7428 7374 7228 636c 6970 5f63 6e74  mat(str(clip_cnt
-0000b200: 202b 2031 2929 202b 2022 2e6d 7034 220a   + 1)) + ".mp4".
-0000b210: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0000b220: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000b230: 2020 2020 2020 2020 7361 7665 5f70 6174          save_pat
-0000b240: 6820 3d20 6f73 2e70 6174 682e 6a6f 696e  h = os.path.join
-0000b250: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000b260: 2020 6469 725f 6e61 6d65 2c0a 2020 2020    dir_name,.    
-0000b270: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-0000b280: 5f6e 616d 650a 2020 2020 2020 2020 2020  _name.          
-0000b290: 2020 2020 2020 2b20 6627 5f7b 7374 6172        + f'_{star
-0000b2a0: 745f 7469 6d65 2e72 6570 6c61 6365 2822  t_time.replace("
-0000b2b0: 3a22 2c20 222d 2229 7d5f 7b65 6e64 5f74  :", "-")}_{end_t
-0000b2c0: 696d 652e 7265 706c 6163 6528 223a 222c  ime.replace(":",
-0000b2d0: 2022 2d22 297d 2e6d 7034 272c 0a20 2020   "-")}.mp4',.   
-0000b2e0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0000b2f0: 2020 2069 6620 6f73 2e70 6174 682e 6973     if os.path.is
-0000b300: 6669 6c65 2873 6176 655f 7061 7468 293a  file(save_path):
-0000b310: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0000b320: 7365 2046 696c 6545 7869 7374 4572 726f  se FileExistErro
-0000b330: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
-0000b340: 2020 206d 7367 3d66 2254 6865 206f 7574     msg=f"The out
-0000b350: 6669 6c65 2066 696c 6520 616c 7265 6164  file file alread
-0000b360: 7920 6578 6973 743a 207b 7361 7665 5f70  y exist: {save_p
-0000b370: 6174 687d 2e22 2c0a 2020 2020 2020 2020  ath}.",.        
-0000b380: 2020 2020 2020 2020 736f 7572 6365 3d6d          source=m
-0000b390: 756c 7469 5f73 706c 6974 5f76 6964 656f  ulti_split_video
-0000b3a0: 2e5f 5f6e 616d 655f 5f2c 0a20 2020 2020  .__name__,.     
-0000b3b0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000b3c0: 2069 6620 6770 753a 0a20 2020 2020 2020   if gpu:.       
-0000b3d0: 2020 2020 2069 6620 6e6f 7420 6368 6563       if not chec
-0000b3e0: 6b5f 6e76 6964 6561 5f67 7075 5f61 7661  k_nvidea_gpu_ava
-0000b3f0: 696c 6162 6c65 2829 3a0a 2020 2020 2020  ilable():.      
-0000b400: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0000b410: 4646 4d50 4547 436f 6465 6347 5055 4572  FFMPEGCodecGPUEr
-0000b420: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
-0000b430: 2020 2020 2020 2020 206d 7367 3d22 4e56           msg="NV
-0000b440: 4944 4541 2047 5055 206e 6f74 2061 7661  IDEA GPU not ava
-0000b450: 696c 6162 6c65 2028 6173 2065 7661 6c75  ilable (as evalu
-0000b460: 6174 6564 2062 7920 6e76 6964 6561 2d73  ated by nvidea-s
-0000b470: 6d69 2072 6574 7572 6e69 6e67 204e 6f6e  mi returning Non
-0000b480: 6522 2c0a 2020 2020 2020 2020 2020 2020  e",.            
-0000b490: 2020 2020 2020 2020 736f 7572 6365 3d6d          source=m
-0000b4a0: 756c 7469 5f73 706c 6974 5f76 6964 656f  ulti_split_video
-0000b4b0: 2e5f 5f6e 616d 655f 5f2c 0a20 2020 2020  .__name__,.     
-0000b4c0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-0000b4d0: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
-0000b4e0: 203d 2027 6666 6d70 6567 202d 6877 6163   = 'ffmpeg -hwac
-0000b4f0: 6365 6c20 6175 746f 202d 6920 227b 7d22  cel auto -i "{}"
-0000b500: 202d 7373 207b 7d20 2d74 6f20 7b7d 202d   -ss {} -to {} -
-0000b510: 633a 7620 6832 3634 5f6e 7665 6e63 202d  c:v h264_nvenc -
-0000b520: 6173 796e 6320 3120 227b 7d22 272e 666f  async 1 "{}"'.fo
-0000b530: 726d 6174 280a 2020 2020 2020 2020 2020  rmat(.          
-0000b540: 2020 2020 2020 6669 6c65 5f70 6174 682c        file_path,
-0000b550: 2073 7461 7274 5f74 696d 652c 2065 6e64   start_time, end
-0000b560: 5f74 696d 652c 2073 6176 655f 7061 7468  _time, save_path
-0000b570: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-0000b580: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0000b590: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
-0000b5a0: 203d 2066 2766 666d 7065 6720 2d69 2022   = f'ffmpeg -i "
-0000b5b0: 7b66 696c 655f 7061 7468 7d22 202d 7373  {file_path}" -ss
-0000b5c0: 207b 7374 6172 745f 7469 6d65 7d20 2d74   {start_time} -t
-0000b5d0: 6f20 7b65 6e64 5f74 696d 657d 202d 6173  o {end_time} -as
-0000b5e0: 796e 6320 3120 227b 7361 7665 5f70 6174  ync 1 "{save_pat
-0000b5f0: 687d 2227 0a20 2020 2020 2020 2070 7269  h}"'.        pri
-0000b600: 6e74 2822 5072 6f63 6573 7369 6e67 2076  nt("Processing v
-0000b610: 6964 656f 2063 6c69 7020 7b7d 2e2e 2e22  ideo clip {}..."
-0000b620: 2e66 6f72 6d61 7428 7374 7228 636c 6970  .format(str(clip
-0000b630: 5f63 6e74 202b 2031 2929 290a 2020 2020  _cnt + 1))).    
-0000b640: 2020 2020 7375 6270 726f 6365 7373 2e63      subprocess.c
-0000b650: 616c 6c28 636f 6d6d 616e 642c 2073 6865  all(command, she
-0000b660: 6c6c 3d54 7275 652c 2073 7464 6f75 743d  ll=True, stdout=
-0000b670: 7375 6270 726f 6365 7373 2e50 4950 4529  subprocess.PIPE)
-0000b680: 0a20 2020 2074 696d 6572 2e73 746f 705f  .    timer.stop_
-0000b690: 7469 6d65 7228 290a 2020 2020 7374 646f  timer().    stdo
-0000b6a0: 7574 5f73 7563 6365 7373 280a 2020 2020  ut_success(.    
-0000b6b0: 2020 2020 6d73 673d 6622 5669 6465 6f20      msg=f"Video 
-0000b6c0: 7b66 696c 655f 6e61 6d65 7d20 636f 6e76  {file_name} conv
-0000b6d0: 6572 7465 6420 696e 746f 207b 7374 7228  erted into {str(
-0000b6e0: 6c65 6e28 7374 6172 745f 7469 6d65 7329  len(start_times)
-0000b6f0: 297d 2063 6c69 7073 2069 6e20 6469 7265  )} clips in dire
-0000b700: 6374 6f72 7920 7b64 6972 5f6e 616d 657d  ctory {dir_name}
-0000b710: 2122 2c0a 2020 2020 2020 2020 656c 6170  !",.        elap
-0000b720: 7365 645f 7469 6d65 3d74 696d 6572 2e65  sed_time=timer.e
-0000b730: 6c61 7073 6564 5f74 696d 655f 7374 722c  lapsed_time_str,
-0000b740: 0a20 2020 2020 2020 2073 6f75 7263 653d  .        source=
-0000b750: 6d75 6c74 695f 7370 6c69 745f 7669 6465  multi_split_vide
-0000b760: 6f2e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  o.__name__,.    
-0000b770: 290a 0a0a 2320 6d75 6c74 695f 7370 6c69  )...# multi_spli
-0000b780: 745f 7669 6465 6f28 6669 6c65 5f70 6174  t_video(file_pat
-0000b790: 683d 7227 2f55 7365 7273 2f73 696d 6f6e  h=r'/Users/simon
-0000b7a0: 2f44 6573 6b74 6f70 2f74 696d 655f 735f  /Desktop/time_s_
-0000b7b0: 636f 6e76 6572 7465 642e 6d70 3427 2c20  converted.mp4', 
-0000b7c0: 7374 6172 745f 7469 6d65 733d 5b27 3030  start_times=['00
-0000b7d0: 3a30 303a 3031 272c 2027 3030 3a30 303a  :00:01', '00:00:
-0000b7e0: 3032 275d 2c20 656e 645f 7469 6d65 733d  02'], end_times=
-0000b7f0: 5b27 3030 3a30 303a 3034 272c 2027 3030  ['00:00:04', '00
-0000b800: 3a30 303a 3035 275d 2c20 6770 753d 4661  :00:05'], gpu=Fa
-0000b810: 6c73 6529 0a0a 0a64 6566 2063 726f 705f  lse)...def crop_
-0000b820: 7369 6e67 6c65 5f76 6964 656f 280a 2020  single_video(.  
-0000b830: 2020 6669 6c65 5f70 6174 683a 2055 6e69    file_path: Uni
-0000b840: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
-0000b850: 696b 655d 2c20 6770 753a 204f 7074 696f  ike], gpu: Optio
-0000b860: 6e61 6c5b 626f 6f6c 5d20 3d20 4661 6c73  nal[bool] = Fals
-0000b870: 650a 2920 2d3e 204e 6f6e 653a 0a20 2020  e.) -> None:.   
-0000b880: 2022 2222 0a20 2020 2043 726f 7020 6120   """.    Crop a 
-0000b890: 7369 6e67 6c65 2076 6964 656f 2075 7369  single video usi
-0000b8a0: 6e67 2060 6073 696d 6261 2e76 6964 656f  ng ``simba.video
-0000b8b0: 5f70 726f 6365 7373 6f72 732e 726f 695f  _processors.roi_
-0000b8c0: 7365 6c65 6374 6f72 2e52 4f49 5365 6c65  selector.ROISele
-0000b8d0: 6374 6f72 6060 2069 6e74 6572 6661 6365  ctor`` interface
-0000b8e0: 2e20 5265 7375 6c74 7320 6973 2073 6176  . Results is sav
-0000b8f0: 6564 2069 6e20 7468 6520 7361 6d65 2064  ed in the same d
-0000b900: 6972 6563 746f 7279 2061 7320 696e 7075  irectory as inpu
-0000b910: 7420 7669 6465 6f20 7769 7468 2074 6865  t video with the
-0000b920: 0a20 2020 2060 605f 6372 6f70 7065 642e  .    ``_cropped.
-0000b930: 6d70 3460 6020 7375 6666 6978 602e 0a0a  mp4`` suffix`...
-0000b940: 2020 2020 3a70 6172 616d 6574 6572 2073      :parameter s
-0000b950: 7472 2066 696c 655f 7061 7468 3a20 5061  tr file_path: Pa
-0000b960: 7468 2074 6f20 7669 6465 6f20 6669 6c65  th to video file
-0000b970: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
-0000b980: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
-0000b990: 6770 753a 2049 6620 5472 7565 2c20 7573  gpu: If True, us
-0000b9a0: 6520 4e56 4944 4541 2047 5055 2063 6f64  e NVIDEA GPU cod
-0000b9b0: 6563 732e 2044 6566 6175 6c74 2046 616c  ecs. Default Fal
-0000b9c0: 7365 2e0a 0a20 2020 203a 6578 616d 706c  se...    :exampl
-0000b9d0: 653a 0a20 2020 203e 3e3e 205f 203d 2063  e:.    >>> _ = c
-0000b9e0: 726f 705f 7369 6e67 6c65 5f76 6964 656f  rop_single_video
-0000b9f0: 2866 696c 655f 7061 7468 3d27 7072 6f6a  (file_path='proj
-0000ba00: 6563 745f 666f 6c64 6572 2f76 6964 656f  ect_folder/video
-0000ba10: 732f 5669 6465 6f5f 312e 6d70 3427 290a  s/Video_1.mp4').
-0000ba20: 2020 2020 2222 220a 0a20 2020 2063 6865      """..    che
-0000ba30: 636b 5f66 666d 7065 675f 6176 6169 6c61  ck_ffmpeg_availa
-0000ba40: 626c 6528 7261 6973 655f 6572 726f 723d  ble(raise_error=
-0000ba50: 5472 7565 290a 2020 2020 6966 2067 7075  True).    if gpu
-0000ba60: 2061 6e64 206e 6f74 2063 6865 636b 5f6e   and not check_n
-0000ba70: 7669 6465 615f 6770 755f 6176 6169 6c61  videa_gpu_availa
-0000ba80: 626c 6528 293a 0a20 2020 2020 2020 2072  ble():.        r
-0000ba90: 6169 7365 2046 464d 5045 4743 6f64 6563  aise FFMPEGCodec
-0000baa0: 4750 5545 7272 6f72 280a 2020 2020 2020  GPUError(.      
-0000bab0: 2020 2020 2020 6d73 673d 224e 5649 4445        msg="NVIDE
-0000bac0: 4120 4750 5520 6e6f 7420 6176 6169 6c61  A GPU not availa
-0000bad0: 626c 6520 2861 7320 6576 616c 7561 7465  ble (as evaluate
-0000bae0: 6420 6279 206e 7669 6465 612d 736d 6920  d by nvidea-smi 
-0000baf0: 7265 7475 726e 696e 6720 4e6f 6e65 222c  returning None",
-0000bb00: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
-0000bb10: 7263 653d 6372 6f70 5f73 696e 676c 655f  rce=crop_single_
-0000bb20: 7669 6465 6f2e 5f5f 6e61 6d65 5f5f 2c0a  video.__name__,.
-0000bb30: 2020 2020 2020 2020 290a 2020 2020 6368          ).    ch
-0000bb40: 6563 6b5f 6669 6c65 5f65 7869 7374 5f61  eck_file_exist_a
-0000bb50: 6e64 5f72 6561 6461 626c 6528 6669 6c65  nd_readable(file
-0000bb60: 5f70 6174 683d 6669 6c65 5f70 6174 6829  _path=file_path)
-0000bb70: 0a20 2020 205f 203d 2067 6574 5f76 6964  .    _ = get_vid
-0000bb80: 656f 5f6d 6574 615f 6461 7461 2876 6964  eo_meta_data(vid
-0000bb90: 656f 5f70 6174 683d 6669 6c65 5f70 6174  eo_path=file_pat
-0000bba0: 6829 0a20 2020 2064 6972 5f6e 616d 652c  h).    dir_name,
-0000bbb0: 2066 696c 655f 6e61 6d65 2c20 6578 7420   file_name, ext 
-0000bbc0: 3d20 6765 745f 666e 5f65 7874 2866 696c  = get_fn_ext(fil
-0000bbd0: 6570 6174 683d 6669 6c65 5f70 6174 6829  epath=file_path)
-0000bbe0: 0a20 2020 2072 6f69 5f73 656c 6563 746f  .    roi_selecto
-0000bbf0: 7220 3d20 524f 4953 656c 6563 746f 7228  r = ROISelector(
-0000bc00: 7061 7468 3d66 696c 655f 7061 7468 290a  path=file_path).
-0000bc10: 2020 2020 726f 695f 7365 6c65 6374 6f72      roi_selector
-0000bc20: 2e72 756e 2829 0a20 2020 2069 6620 280a  .run().    if (.
-0000bc30: 2020 2020 2020 2020 2872 6f69 5f73 656c          (roi_sel
-0000bc40: 6563 746f 722e 746f 705f 6c65 6674 5b30  ector.top_left[0
-0000bc50: 5d20 3c20 3029 0a20 2020 2020 2020 206f  ] < 0).        o
-0000bc60: 7220 2872 6f69 5f73 656c 6563 746f 722e  r (roi_selector.
-0000bc70: 746f 705f 6c65 6674 5b31 5d20 3c20 3029  top_left[1] < 0)
-0000bc80: 0a20 2020 2020 2020 206f 7220 2872 6f69  .        or (roi
-0000bc90: 5f73 656c 6563 746f 722e 626f 7474 6f6d  _selector.bottom
-0000bca0: 5f72 6967 6874 5b30 5d20 3c20 3029 0a20  _right[0] < 0). 
-0000bcb0: 2020 2020 2020 206f 7220 2872 6f69 5f73         or (roi_s
-0000bcc0: 656c 6563 746f 722e 626f 7474 6f6d 5f72  elector.bottom_r
-0000bcd0: 6967 6874 5b31 5d20 3c20 3129 0a20 2020  ight[1] < 1).   
-0000bce0: 2029 3a0a 2020 2020 2020 2020 7261 6973   ):.        rais
-0000bcf0: 6520 436f 756e 7445 7272 6f72 280a 2020  e CountError(.  
-0000bd00: 2020 2020 2020 2020 2020 6d73 673d 2243            msg="C
-0000bd10: 524f 5020 4641 494c 4544 3a20 4361 6e6e  ROP FAILED: Cann
-0000bd20: 6f74 2075 7365 206e 6567 6174 6976 6520  ot use negative 
-0000bd30: 6372 6f70 2063 6f6f 7264 696e 6174 6573  crop coordinates
-0000bd40: 2e22 2c0a 2020 2020 2020 2020 2020 2020  .",.            
-0000bd50: 736f 7572 6365 3d63 726f 705f 6d75 6c74  source=crop_mult
-0000bd60: 6970 6c65 5f76 6964 656f 732e 5f5f 6e61  iple_videos.__na
-0000bd70: 6d65 5f5f 2c0a 2020 2020 2020 2020 290a  me__,.        ).
-0000bd80: 2020 2020 7361 7665 5f70 6174 6820 3d20      save_path = 
-0000bd90: 6f73 2e70 6174 682e 6a6f 696e 2864 6972  os.path.join(dir
-0000bda0: 5f6e 616d 652c 2066 227b 6669 6c65 5f6e  _name, f"{file_n
-0000bdb0: 616d 657d 5f63 726f 7070 6564 2e6d 7034  ame}_cropped.mp4
-0000bdc0: 2229 0a20 2020 2069 6620 6f73 2e70 6174  ").    if os.pat
-0000bdd0: 682e 6973 6669 6c65 2873 6176 655f 7061  h.isfile(save_pa
-0000bde0: 7468 293a 0a20 2020 2020 2020 2072 6169  th):.        rai
-0000bdf0: 7365 2046 696c 6545 7869 7374 4572 726f  se FileExistErro
-0000be00: 7228 0a20 2020 2020 2020 2020 2020 206d  r(.            m
-0000be10: 7367 3d66 2253 494d 4241 2045 5252 4f52  sg=f"SIMBA ERROR
-0000be20: 3a20 5468 6520 6f75 7420 6669 6c65 2020  : The out file  
-0000be30: 616c 7265 6164 7920 6578 6973 743a 207b  already exist: {
-0000be40: 7361 7665 5f70 6174 687d 2e22 2c0a 2020  save_path}.",.  
-0000be50: 2020 2020 2020 2020 2020 736f 7572 6365            source
-0000be60: 3d63 726f 705f 7369 6e67 6c65 5f76 6964  =crop_single_vid
-0000be70: 656f 2e5f 5f6e 616d 655f 5f2c 0a20 2020  eo.__name__,.   
-0000be80: 2020 2020 2029 0a20 2020 2074 696d 6572       ).    timer
-0000be90: 203d 2053 696d 6261 5469 6d65 7228 7374   = SimbaTimer(st
-0000bea0: 6172 743d 5472 7565 290a 2020 2020 6966  art=True).    if
-0000beb0: 2067 7075 3a0a 2020 2020 2020 2020 636f   gpu:.        co
-0000bec0: 6d6d 616e 6420 3d20 6627 6666 6d70 6567  mmand = f'ffmpeg
-0000bed0: 202d 6877 6163 6365 6c20 6175 746f 202d   -hwaccel auto -
-0000bee0: 633a 7620 6832 3634 5f63 7576 6964 202d  c:v h264_cuvid -
-0000bef0: 6920 227b 6669 6c65 5f70 6174 687d 2220  i "{file_path}" 
-0000bf00: 2d76 6620 2263 726f 703d 7b72 6f69 5f73  -vf "crop={roi_s
-0000bf10: 656c 6563 746f 722e 7769 6474 687d 3a7b  elector.width}:{
-0000bf20: 726f 695f 7365 6c65 6374 6f72 2e68 6569  roi_selector.hei
-0000bf30: 6768 747d 3a7b 726f 695f 7365 6c65 6374  ght}:{roi_select
-0000bf40: 6f72 2e74 6f70 5f6c 6566 745b 305d 7d3a  or.top_left[0]}:
-0000bf50: 7b72 6f69 5f73 656c 6563 746f 722e 746f  {roi_selector.to
-0000bf60: 705f 6c65 6674 5b31 5d7d 2220 2d63 3a76  p_left[1]}" -c:v
-0000bf70: 2068 3236 345f 6e76 656e 6320 2d63 3a61   h264_nvenc -c:a
-0000bf80: 2063 6f70 7920 227b 7361 7665 5f70 6174   copy "{save_pat
-0000bf90: 687d 2227 0a20 2020 2065 6c73 653a 0a20  h}"'.    else:. 
-0000bfa0: 2020 2020 2020 2063 6f6d 6d61 6e64 203d         command =
-0000bfb0: 2066 2766 666d 7065 6720 2d79 202d 6920   f'ffmpeg -y -i 
-0000bfc0: 227b 6669 6c65 5f70 6174 687d 2220 2d76  "{file_path}" -v
-0000bfd0: 6620 2263 726f 703d 7b72 6f69 5f73 656c  f "crop={roi_sel
-0000bfe0: 6563 746f 722e 7769 6474 687d 3a7b 726f  ector.width}:{ro
-0000bff0: 695f 7365 6c65 6374 6f72 2e68 6569 6768  i_selector.heigh
-0000c000: 747d 3a7b 726f 695f 7365 6c65 6374 6f72  t}:{roi_selector
-0000c010: 2e74 6f70 5f6c 6566 745b 305d 7d3a 7b72  .top_left[0]}:{r
-0000c020: 6f69 5f73 656c 6563 746f 722e 746f 705f  oi_selector.top_
-0000c030: 6c65 6674 5b31 5d7d 2220 2d63 3a76 206c  left[1]}" -c:v l
-0000c040: 6962 7832 3634 202d 6372 6620 3137 202d  ibx264 -crf 17 -
-0000c050: 633a 6120 636f 7079 2022 7b73 6176 655f  c:a copy "{save_
-0000c060: 7061 7468 7d22 270a 2020 2020 7375 6270  path}"'.    subp
-0000c070: 726f 6365 7373 2e63 616c 6c28 636f 6d6d  rocess.call(comm
-0000c080: 616e 642c 2073 6865 6c6c 3d54 7275 6529  and, shell=True)
-0000c090: 0a20 2020 2074 696d 6572 2e73 746f 705f  .    timer.stop_
-0000c0a0: 7469 6d65 7228 290a 2020 2020 7374 646f  timer().    stdo
-0000c0b0: 7574 5f73 7563 6365 7373 280a 2020 2020  ut_success(.    
-0000c0c0: 2020 2020 6622 5669 6465 6f20 7b66 696c      f"Video {fil
-0000c0d0: 655f 6e61 6d65 7d20 6372 6f70 7065 6420  e_name} cropped 
-0000c0e0: 616e 6420 7361 7665 6420 6174 207b 7361  and saved at {sa
-0000c0f0: 7665 5f70 6174 687d 222c 0a20 2020 2020  ve_path}",.     
-0000c100: 2020 2065 6c61 7073 6564 5f74 696d 653d     elapsed_time=
-0000c110: 7469 6d65 722e 656c 6170 7365 645f 7469  timer.elapsed_ti
-0000c120: 6d65 5f73 7472 2c0a 2020 2020 2020 2020  me_str,.        
-0000c130: 736f 7572 6365 3d63 726f 705f 7369 6e67  source=crop_sing
-0000c140: 6c65 5f76 6964 656f 2e5f 5f6e 616d 655f  le_video.__name_
-0000c150: 5f2c 0a20 2020 2029 0a0a 0a23 205f 203d  _,.    )...# _ =
-0000c160: 2063 726f 705f 7369 6e67 6c65 5f76 6964   crop_single_vid
-0000c170: 656f 2866 696c 655f 7061 7468 3d27 2f55  eo(file_path='/U
-0000c180: 7365 7273 2f73 696d 6f6e 2f44 6573 6b74  sers/simon/Deskt
-0000c190: 6f70 2f65 6e76 732f 7472 6f75 626c 6573  op/envs/troubles
-0000c1a0: 686f 6f74 696e 672f 4152 4553 5f64 6174  hooting/ARES_dat
-0000c1b0: 612f 5465 726d 6974 6520 5465 7374 2031  a/Termite Test 1
-0000c1c0: 2f54 6572 6d69 7465 2054 6573 7420 312e  /Termite Test 1.
-0000c1d0: 6d70 3427 290a 0a23 2063 726f 705f 7369  mp4')..# crop_si
-0000c1e0: 6e67 6c65 5f76 6964 656f 2866 696c 655f  ngle_video(file_
-0000c1f0: 7061 7468 3d72 2743 3a5c 5573 6572 735c  path=r'C:\Users\
-0000c200: 4e61 7065 5f43 6f6d 7075 7465 725f 325c  Nape_Computer_2\
-0000c210: 4465 736b 746f 705c 7465 7374 5f76 6964  Desktop\test_vid
-0000c220: 656f 735c 426f 7831 5f50 4d32 5f64 6179  eos\Box1_PM2_day
-0000c230: 5f35 5f32 3032 3131 3130 3454 3137 3130  _5_20211104T1710
-0000c240: 3231 2e6d 7034 272c 2067 7075 3d46 616c  21.mp4', gpu=Fal
-0000c250: 7365 290a 0a0a 6465 6620 6372 6f70 5f6d  se)...def crop_m
-0000c260: 756c 7469 706c 655f 7669 6465 6f73 280a  ultiple_videos(.
-0000c270: 2020 2020 6469 7265 6374 6f72 795f 7061      directory_pa
-0000c280: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
-0000c290: 732e 5061 7468 4c69 6b65 5d2c 0a20 2020  s.PathLike],.   
-0000c2a0: 206f 7574 7075 745f 7061 7468 3a20 556e   output_path: Un
-0000c2b0: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
-0000c2c0: 4c69 6b65 5d2c 0a20 2020 2067 7075 3a20  Like],.    gpu: 
-0000c2d0: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 203d  Optional[bool] =
-0000c2e0: 2046 616c 7365 2c0a 2920 2d3e 204e 6f6e   False,.) -> Non
-0000c2f0: 653a 0a20 2020 2022 2222 0a20 2020 2043  e:.    """.    C
-0000c300: 726f 7020 6d75 6c74 6970 6c65 2076 6964  rop multiple vid
-0000c310: 656f 7320 696e 2061 2066 6f6c 6465 7220  eos in a folder 
-0000c320: 6163 636f 7264 696e 6720 746f 2063 726f  according to cro
-0000c330: 702d 636f 6f72 6469 6e61 7465 7320 6465  p-coordinates de
-0000c340: 6669 6e65 6420 696e 2074 6865 202a 2a66  fined in the **f
-0000c350: 6972 7374 2a2a 2076 6964 656f 2e0a 0a20  irst** video... 
-0000c360: 2020 203a 7061 7261 6d65 7465 7220 7374     :parameter st
-0000c370: 7220 6469 7265 6374 6f72 795f 7061 7468  r directory_path
-0000c380: 3a20 4469 7265 6374 6f72 7920 636f 6e74  : Directory cont
-0000c390: 6169 6e69 6e67 2069 6e70 7574 2076 6964  aining input vid
-0000c3a0: 656f 732e 0a20 2020 203a 7061 7261 6d65  eos..    :parame
-0000c3b0: 7465 7220 7374 7220 6f75 7470 7574 5f70  ter str output_p
-0000c3c0: 6174 683a 2044 6972 6563 746f 7279 2077  ath: Directory w
-0000c3d0: 6865 7265 2074 6f20 7361 7665 2074 6865  here to save the
-0000c3e0: 2063 726f 7070 6564 2076 6964 656f 732e   cropped videos.
-0000c3f0: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
-0000c400: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 2067  Optional[bool] g
-0000c410: 7075 3a20 4966 2054 7275 652c 2075 7365  pu: If True, use
-0000c420: 204e 5649 4445 4120 4750 5520 636f 6465   NVIDEA GPU code
-0000c430: 6373 2e20 4465 6661 756c 7420 4661 6c73  cs. Default Fals
-0000c440: 652e 0a0a 2020 2020 3a65 7861 6d70 6c65  e...    :example
-0000c450: 3a0a 2020 2020 3e3e 3e20 5f20 3d20 6372  :.    >>> _ = cr
-0000c460: 6f70 5f6d 756c 7469 706c 655f 7669 6465  op_multiple_vide
-0000c470: 6f73 2864 6972 6563 746f 7279 5f70 6174  os(directory_pat
-0000c480: 683d 2770 726f 6a65 6374 5f66 6f6c 6465  h='project_folde
-0000c490: 722f 7669 6465 6f73 272c 206f 7574 7075  r/videos', outpu
-0000c4a0: 745f 7061 7468 3d27 7072 6f6a 6563 745f  t_path='project_
-0000c4b0: 666f 6c64 6572 2f76 6964 656f 732f 6d79  folder/videos/my
-0000c4c0: 5f6e 6577 5f66 6f6c 6465 7227 290a 2020  _new_folder').  
-0000c4d0: 2020 2222 220a 0a20 2020 2063 6865 636b    """..    check
-0000c4e0: 5f66 666d 7065 675f 6176 6169 6c61 626c  _ffmpeg_availabl
-0000c4f0: 6528 7261 6973 655f 6572 726f 723d 5472  e(raise_error=Tr
-0000c500: 7565 290a 2020 2020 6966 2067 7075 2061  ue).    if gpu a
-0000c510: 6e64 206e 6f74 2063 6865 636b 5f6e 7669  nd not check_nvi
-0000c520: 6465 615f 6770 755f 6176 6169 6c61 626c  dea_gpu_availabl
-0000c530: 6528 293a 0a20 2020 2020 2020 2072 6169  e():.        rai
-0000c540: 7365 2046 464d 5045 4743 6f64 6563 4750  se FFMPEGCodecGP
-0000c550: 5545 7272 6f72 280a 2020 2020 2020 2020  UError(.        
-0000c560: 2020 2020 6d73 673d 224e 5649 4445 4120      msg="NVIDEA 
-0000c570: 4750 5520 6e6f 7420 6176 6169 6c61 626c  GPU not availabl
-0000c580: 6520 2861 7320 6576 616c 7561 7465 6420  e (as evaluated 
-0000c590: 6279 206e 7669 6465 612d 736d 6920 7265  by nvidea-smi re
-0000c5a0: 7475 726e 696e 6720 4e6f 6e65 222c 0a20  turning None",. 
-0000c5b0: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-0000c5c0: 653d 6372 6f70 5f6d 756c 7469 706c 655f  e=crop_multiple_
-0000c5d0: 7669 6465 6f73 2e5f 5f6e 616d 655f 5f2c  videos.__name__,
-0000c5e0: 0a20 2020 2020 2020 2029 0a20 2020 2069  .        ).    i
-0000c5f0: 6620 6e6f 7420 6f73 2e70 6174 682e 6973  f not os.path.is
-0000c600: 6469 7228 6469 7265 6374 6f72 795f 7061  dir(directory_pa
-0000c610: 7468 293a 0a20 2020 2020 2020 2072 6169  th):.        rai
-0000c620: 7365 204e 6f74 4469 7265 6374 6f72 7945  se NotDirectoryE
-0000c630: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
-0000c640: 2020 6d73 673d 2253 494d 4241 2045 5252    msg="SIMBA ERR
-0000c650: 4f52 3a20 7b7d 2069 7320 6e6f 7420 6120  OR: {} is not a 
-0000c660: 7661 6c69 6420 6469 7265 6374 6f72 7922  valid directory"
-0000c670: 2e66 6f72 6d61 7428 6469 7265 6374 6f72  .format(director
-0000c680: 795f 7061 7468 292c 0a20 2020 2020 2020  y_path),.       
-0000c690: 2020 2020 2073 6f75 7263 653d 6372 6f70       source=crop
-0000c6a0: 5f6d 756c 7469 706c 655f 7669 6465 6f73  _multiple_videos
-0000c6b0: 2e5f 5f6e 616d 655f 5f2c 0a20 2020 2020  .__name__,.     
-0000c6c0: 2020 2029 0a20 2020 2076 6964 656f 5f70     ).    video_p
-0000c6d0: 6174 6873 203d 205b 5d0a 2020 2020 6669  aths = [].    fi
-0000c6e0: 6c65 5f70 6174 6873 5f69 6e5f 666f 6c64  le_paths_in_fold
-0000c6f0: 6572 203d 205b 0a20 2020 2020 2020 2066  er = [.        f
-0000c700: 2066 6f72 2066 2069 6e20 676c 6f62 2e67   for f in glob.g
-0000c710: 6c6f 6228 6469 7265 6374 6f72 795f 7061  lob(directory_pa
-0000c720: 7468 202b 2022 2f2a 2229 2069 6620 6f73  th + "/*") if os
-0000c730: 2e70 6174 682e 6973 6669 6c65 2866 290a  .path.isfile(f).
-0000c740: 2020 2020 5d0a 2020 2020 666f 7220 6669      ].    for fi
-0000c750: 6c65 5f70 6174 6820 696e 2066 696c 655f  le_path in file_
-0000c760: 7061 7468 735f 696e 5f66 6f6c 6465 723a  paths_in_folder:
-0000c770: 0a20 2020 2020 2020 205f 2c20 5f2c 2065  .        _, _, e
-0000c780: 7874 203d 2067 6574 5f66 6e5f 6578 7428  xt = get_fn_ext(
-0000c790: 6669 6c65 7061 7468 3d66 696c 655f 7061  filepath=file_pa
-0000c7a0: 7468 290a 2020 2020 2020 2020 6966 2065  th).        if e
-0000c7b0: 7874 2e6c 6f77 6572 2829 2069 6e20 4f70  xt.lower() in Op
-0000c7c0: 7469 6f6e 732e 414c 4c5f 5649 4445 4f5f  tions.ALL_VIDEO_
-0000c7d0: 464f 524d 4154 5f4f 5054 494f 4e53 2e76  FORMAT_OPTIONS.v
-0000c7e0: 616c 7565 3a0a 2020 2020 2020 2020 2020  alue:.          
-0000c7f0: 2020 7669 6465 6f5f 7061 7468 732e 6170    video_paths.ap
-0000c800: 7065 6e64 2866 696c 655f 7061 7468 290a  pend(file_path).
-0000c810: 2020 2020 6966 206c 656e 2876 6964 656f      if len(video
-0000c820: 5f70 6174 6873 2920 3c20 313a 0a20 2020  _paths) < 1:.   
-0000c830: 2020 2020 2072 6169 7365 204e 6f46 696c       raise NoFil
-0000c840: 6573 466f 756e 6445 7272 6f72 280a 2020  esFoundError(.  
-0000c850: 2020 2020 2020 2020 2020 6d73 673d 2253            msg="S
-0000c860: 494d 4241 2045 5252 4f52 3a20 4e6f 2066  IMBA ERROR: No f
-0000c870: 696c 6573 2077 6974 6820 2e6d 7034 2c20  iles with .mp4, 
-0000c880: 2e61 7669 2c20 2e6d 6f76 2c20 2e66 6c76  .avi, .mov, .flv
-0000c890: 2066 696c 6520 656e 6469 6e67 2066 6f75   file ending fou
-0000c8a0: 6e64 2069 6e20 7468 6520 7b7d 2064 6972  nd in the {} dir
-0000c8b0: 6563 746f 7279 222e 666f 726d 6174 280a  ectory".format(.
-0000c8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c8d0: 6469 7265 6374 6f72 795f 7061 7468 0a20  directory_path. 
-0000c8e0: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
-0000c8f0: 2020 2020 2020 2020 2020 736f 7572 6365            source
-0000c900: 3d63 726f 705f 6d75 6c74 6970 6c65 5f76  =crop_multiple_v
-0000c910: 6964 656f 732e 5f5f 6e61 6d65 5f5f 2c0a  ideos.__name__,.
-0000c920: 2020 2020 2020 2020 290a 2020 2020 726f          ).    ro
-0000c930: 695f 7365 6c65 6374 6f72 203d 2052 4f49  i_selector = ROI
-0000c940: 5365 6c65 6374 6f72 2870 6174 683d 6669  Selector(path=fi
-0000c950: 6c65 5f70 6174 6873 5f69 6e5f 666f 6c64  le_paths_in_fold
-0000c960: 6572 5b30 5d29 0a20 2020 2072 6f69 5f73  er[0]).    roi_s
-0000c970: 656c 6563 746f 722e 7275 6e28 290a 2020  elector.run().  
-0000c980: 2020 6966 2028 726f 695f 7365 6c65 6374    if (roi_select
-0000c990: 6f72 2e77 6964 7468 203d 3d20 3020 616e  or.width == 0 an
-0000c9a0: 6420 726f 695f 7365 6c65 6374 6f72 2e68  d roi_selector.h
-0000c9b0: 6569 6768 7420 3d3d 2030 2920 6f72 2028  eight == 0) or (
-0000c9c0: 0a20 2020 2020 2020 2072 6f69 5f73 656c  .        roi_sel
-0000c9d0: 6563 746f 722e 7769 6474 680a 2020 2020  ector.width.    
-0000c9e0: 2020 2020 2b20 726f 695f 7365 6c65 6374      + roi_select
-0000c9f0: 6f72 2e68 6569 6768 740a 2020 2020 2020  or.height.      
-0000ca00: 2020 2b20 726f 695f 7365 6c65 6374 6f72    + roi_selector
-0000ca10: 2e74 6f70 5f6c 6566 745b 305d 0a20 2020  .top_left[0].   
-0000ca20: 2020 2020 202b 2072 6f69 5f73 656c 6563       + roi_selec
-0000ca30: 746f 722e 746f 705f 6c65 6674 5b31 5d0a  tor.top_left[1].
-0000ca40: 2020 2020 2020 2020 3d3d 2030 0a20 2020          == 0.   
-0000ca50: 2029 3a0a 2020 2020 2020 2020 7261 6973   ):.        rais
-0000ca60: 6520 436f 756e 7445 7272 6f72 280a 2020  e CountError(.  
-0000ca70: 2020 2020 2020 2020 2020 6d73 673d 2243            msg="C
-0000ca80: 524f 5020 4641 494c 4544 3a20 4372 6f70  ROP FAILED: Crop
-0000ca90: 7069 6e67 2068 6569 6768 7420 616e 6420  ping height and 
-0000caa0: 7769 6474 6820 6172 6520 626f 7468 2030  width are both 0
-0000cab0: 2e20 506c 6561 7365 2074 7279 2061 6761  . Please try aga
-0000cac0: 696e 2e22 2c0a 2020 2020 2020 2020 2020  in.",.          
-0000cad0: 2020 736f 7572 6365 3d63 726f 705f 6d75    source=crop_mu
-0000cae0: 6c74 6970 6c65 5f76 6964 656f 732e 5f5f  ltiple_videos.__
-0000caf0: 6e61 6d65 5f5f 2c0a 2020 2020 2020 2020  name__,.        
-0000cb00: 290a 2020 2020 6966 2028 0a20 2020 2020  ).    if (.     
-0000cb10: 2020 2028 726f 695f 7365 6c65 6374 6f72     (roi_selector
-0000cb20: 2e74 6f70 5f6c 6566 745b 305d 203c 2030  .top_left[0] < 0
-0000cb30: 290a 2020 2020 2020 2020 6f72 2028 726f  ).        or (ro
-0000cb40: 695f 7365 6c65 6374 6f72 2e74 6f70 5f6c  i_selector.top_l
-0000cb50: 6566 745b 315d 203c 2030 290a 2020 2020  eft[1] < 0).    
-0000cb60: 2020 2020 6f72 2028 726f 695f 7365 6c65      or (roi_sele
-0000cb70: 6374 6f72 2e62 6f74 746f 6d5f 7269 6768  ctor.bottom_righ
-0000cb80: 745b 305d 203c 2030 290a 2020 2020 2020  t[0] < 0).      
-0000cb90: 2020 6f72 2028 726f 695f 7365 6c65 6374    or (roi_select
-0000cba0: 6f72 2e62 6f74 746f 6d5f 7269 6768 745b  or.bottom_right[
-0000cbb0: 315d 203c 2031 290a 2020 2020 293a 0a20  1] < 1).    ):. 
-0000cbc0: 2020 2020 2020 2072 6169 7365 2043 6f75         raise Cou
-0000cbd0: 6e74 4572 726f 7228 0a20 2020 2020 2020  ntError(.       
-0000cbe0: 2020 2020 206d 7367 3d22 4352 4f50 2046       msg="CROP F
-0000cbf0: 4149 4c45 443a 2043 616e 6e6f 7420 7573  AILED: Cannot us
-0000cc00: 6520 6e65 6761 7469 7665 2063 726f 7020  e negative crop 
-0000cc10: 636f 6f72 6469 6e61 7465 732e 222c 0a20  coordinates.",. 
-0000cc20: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-0000cc30: 653d 6372 6f70 5f6d 756c 7469 706c 655f  e=crop_multiple_
-0000cc40: 7669 6465 6f73 2e5f 5f6e 616d 655f 5f2c  videos.__name__,
-0000cc50: 0a20 2020 2020 2020 2029 0a20 2020 2074  .        ).    t
-0000cc60: 696d 6572 203d 2053 696d 6261 5469 6d65  imer = SimbaTime
-0000cc70: 7228 7374 6172 743d 5472 7565 290a 2020  r(start=True).  
-0000cc80: 2020 666f 7220 6669 6c65 5f63 6e74 2c20    for file_cnt, 
-0000cc90: 6669 6c65 5f70 6174 6820 696e 2065 6e75  file_path in enu
-0000cca0: 6d65 7261 7465 2876 6964 656f 5f70 6174  merate(video_pat
-0000ccb0: 6873 293a 0a20 2020 2020 2020 2076 6964  hs):.        vid
-0000ccc0: 656f 5f74 696d 6572 203d 2053 696d 6261  eo_timer = Simba
-0000ccd0: 5469 6d65 7228 7374 6172 743d 5472 7565  Timer(start=True
-0000cce0: 290a 2020 2020 2020 2020 6469 725f 6e61  ).        dir_na
-0000ccf0: 6d65 2c20 6669 6c65 5f6e 616d 652c 2065  me, file_name, e
-0000cd00: 7874 203d 2067 6574 5f66 6e5f 6578 7428  xt = get_fn_ext(
-0000cd10: 6669 6c65 7061 7468 3d66 696c 655f 7061  filepath=file_pa
-0000cd20: 7468 290a 2020 2020 2020 2020 7072 696e  th).        prin
-0000cd30: 7428 6622 4372 6f70 7069 6e67 2076 6964  t(f"Cropping vid
-0000cd40: 656f 207b 6669 6c65 5f6e 616d 657d 2e2e  eo {file_name}..
-0000cd50: 2e22 290a 2020 2020 2020 2020 7669 6465  .").        vide
-0000cd60: 6f5f 6d65 7461 5f64 6174 6120 3d20 6765  o_meta_data = ge
-0000cd70: 745f 7669 6465 6f5f 6d65 7461 5f64 6174  t_video_meta_dat
-0000cd80: 6128 6669 6c65 5f70 6174 6829 0a20 2020  a(file_path).   
-0000cd90: 2020 2020 2069 6620 2872 6f69 5f73 656c       if (roi_sel
-0000cda0: 6563 746f 722e 626f 7474 6f6d 5f72 6967  ector.bottom_rig
-0000cdb0: 6874 5b30 5d20 3e20 7669 6465 6f5f 6d65  ht[0] > video_me
-0000cdc0: 7461 5f64 6174 615b 2277 6964 7468 225d  ta_data["width"]
-0000cdd0: 2920 6f72 2028 0a20 2020 2020 2020 2020  ) or (.         
-0000cde0: 2020 2072 6f69 5f73 656c 6563 746f 722e     roi_selector.
+000095b0: 2029 0a20 2020 2076 6964 656f 5f70 6174   ).    video_pat
+000095c0: 6873 203d 205b 5d0a 2020 2020 6669 6c65  hs = [].    file
+000095d0: 5f70 6174 6873 5f69 6e5f 666f 6c64 6572  _paths_in_folder
+000095e0: 203d 205b 6620 666f 7220 6620 696e 2067   = [f for f in g
+000095f0: 6c6f 622e 676c 6f62 2864 6972 6563 746f  lob.glob(directo
+00009600: 7279 202b 2022 2f2a 2229 2069 6620 6f73  ry + "/*") if os
+00009610: 2e70 6174 682e 6973 6669 6c65 2866 295d  .path.isfile(f)]
+00009620: 0a20 2020 2066 6f72 2066 696c 655f 7061  .    for file_pa
+00009630: 7468 2069 6e20 6669 6c65 5f70 6174 6873  th in file_paths
+00009640: 5f69 6e5f 666f 6c64 6572 3a0a 2020 2020  _in_folder:.    
+00009650: 2020 2020 5f2c 205f 2c20 6578 7420 3d20      _, _, ext = 
+00009660: 6765 745f 666e 5f65 7874 2866 696c 6570  get_fn_ext(filep
+00009670: 6174 683d 6669 6c65 5f70 6174 6829 0a20  ath=file_path). 
+00009680: 2020 2020 2020 2069 6620 6578 742e 6c6f         if ext.lo
+00009690: 7765 7228 2920 3d3d 2022 2e7b 7d22 2e66  wer() == ".{}".f
+000096a0: 6f72 6d61 7428 696e 7075 745f 666f 726d  ormat(input_form
+000096b0: 6174 2e6c 6f77 6572 2829 293a 0a20 2020  at.lower()):.   
+000096c0: 2020 2020 2020 2020 2076 6964 656f 5f70           video_p
+000096d0: 6174 6873 2e61 7070 656e 6428 6669 6c65  aths.append(file
+000096e0: 5f70 6174 6829 0a20 2020 2069 6620 6c65  _path).    if le
+000096f0: 6e28 7669 6465 6f5f 7061 7468 7329 203c  n(video_paths) <
+00009700: 2031 3a0a 2020 2020 2020 2020 7261 6973   1:.        rais
+00009710: 6520 4e6f 4669 6c65 7346 6f75 6e64 4572  e NoFilesFoundEr
+00009720: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+00009730: 206d 7367 3d22 5349 4d42 4120 4552 524f   msg="SIMBA ERRO
+00009740: 523a 204e 6f20 6669 6c65 7320 7769 7468  R: No files with
+00009750: 202e 7b7d 2066 696c 6520 6578 7465 6e73   .{} file extens
+00009760: 696f 6e20 666f 756e 6420 696e 2074 6865  ion found in the
+00009770: 207b 7d20 6469 7265 6374 6f72 7922 2e66   {} directory".f
+00009780: 6f72 6d61 7428 0a20 2020 2020 2020 2020  ormat(.         
+00009790: 2020 2020 2020 2069 6e70 7574 5f66 6f72         input_for
+000097a0: 6d61 742c 2064 6972 6563 746f 7279 0a20  mat, directory. 
+000097b0: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+000097c0: 2020 2020 2020 2020 2020 736f 7572 6365            source
+000097d0: 3d62 6174 6368 5f63 6f6e 7665 7274 5f76  =batch_convert_v
+000097e0: 6964 656f 5f66 6f72 6d61 742e 5f5f 6e61  ideo_format.__na
+000097f0: 6d65 5f5f 2c0a 2020 2020 2020 2020 290a  me__,.        ).
+00009800: 2020 2020 666f 7220 6669 6c65 5f63 6e74      for file_cnt
+00009810: 2c20 6669 6c65 5f70 6174 6820 696e 2065  , file_path in e
+00009820: 6e75 6d65 7261 7465 2876 6964 656f 5f70  numerate(video_p
+00009830: 6174 6873 293a 0a20 2020 2020 2020 2076  aths):.        v
+00009840: 6964 656f 5f74 696d 6572 203d 2053 696d  ideo_timer = Sim
+00009850: 6261 5469 6d65 7228 7374 6172 743d 5472  baTimer(start=Tr
+00009860: 7565 290a 2020 2020 2020 2020 6469 725f  ue).        dir_
+00009870: 6e61 6d65 2c20 6669 6c65 5f6e 616d 652c  name, file_name,
+00009880: 2065 7874 203d 2067 6574 5f66 6e5f 6578   ext = get_fn_ex
+00009890: 7428 6669 6c65 7061 7468 3d66 696c 655f  t(filepath=file_
+000098a0: 7061 7468 290a 2020 2020 2020 2020 7072  path).        pr
+000098b0: 696e 7428 6622 5072 6f63 6573 7369 6e67  int(f"Processing
+000098c0: 2076 6964 656f 207b 6669 6c65 5f6e 616d   video {file_nam
+000098d0: 657d 2e2e 2e22 290a 2020 2020 2020 2020  e}...").        
+000098e0: 7361 7665 5f70 6174 6820 3d20 6f73 2e70  save_path = os.p
+000098f0: 6174 682e 6a6f 696e 280a 2020 2020 2020  ath.join(.      
+00009900: 2020 2020 2020 6469 725f 6e61 6d65 2c20        dir_name, 
+00009910: 6669 6c65 5f6e 616d 6520 2b20 222e 7b7d  file_name + ".{}
+00009920: 222e 666f 726d 6174 286f 7574 7075 745f  ".format(output_
+00009930: 666f 726d 6174 2e6c 6f77 6572 2829 290a  format.lower()).
+00009940: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00009950: 2020 6966 206f 732e 7061 7468 2e69 7366    if os.path.isf
+00009960: 696c 6528 7361 7665 5f70 6174 6829 3a0a  ile(save_path):.
+00009970: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00009980: 6520 4669 6c65 4578 6973 7445 7272 6f72  e FileExistError
+00009990: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000099a0: 2020 6d73 673d 2253 494d 4241 2045 5252    msg="SIMBA ERR
+000099b0: 4f52 3a20 5468 6520 6f75 7466 696c 6520  OR: The outfile 
+000099c0: 6669 6c65 2061 6c72 6561 6479 2065 7869  file already exi
+000099d0: 7374 3a20 7b7d 2e22 2e66 6f72 6d61 7428  st: {}.".format(
+000099e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000099f0: 2020 2020 2073 6176 655f 7061 7468 0a20       save_path. 
+00009a00: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00009a10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00009a20: 2020 736f 7572 6365 3d62 6174 6368 5f63    source=batch_c
+00009a30: 6f6e 7665 7274 5f76 6964 656f 5f66 6f72  onvert_video_for
+00009a40: 6d61 742e 5f5f 6e61 6d65 5f5f 2c0a 2020  mat.__name__,.  
+00009a50: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00009a60: 2020 2020 6966 2067 7075 3a0a 2020 2020      if gpu:.    
+00009a70: 2020 2020 2020 2020 636f 6d6d 616e 6420          command 
+00009a80: 3d20 2766 666d 7065 6720 2d68 7761 6363  = 'ffmpeg -hwacc
+00009a90: 656c 2061 7574 6f20 2d63 3a76 2068 3236  el auto -c:v h26
+00009aa0: 345f 6375 7669 6420 2d69 2022 7b7d 2220  4_cuvid -i "{}" 
+00009ab0: 2d63 3a76 2068 3236 345f 6e76 656e 6320  -c:v h264_nvenc 
+00009ac0: 2d63 7120 3233 202d 7072 6573 6574 3a76  -cq 23 -preset:v
+00009ad0: 206d 6564 6975 6d20 2d63 3a61 2063 6f70   medium -c:a cop
+00009ae0: 7920 227b 7d22 272e 666f 726d 6174 280a  y "{}"'.format(.
+00009af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009b00: 6669 6c65 5f70 6174 682c 2073 6176 655f  file_path, save_
+00009b10: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
+00009b20: 2029 0a20 2020 2020 2020 2065 6c73 653a   ).        else:
+00009b30: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+00009b40: 6d61 6e64 203d 2066 2766 666d 7065 6720  mand = f'ffmpeg 
+00009b50: 2d79 202d 6920 227b 6669 6c65 5f70 6174  -y -i "{file_pat
+00009b60: 687d 2220 2d63 3a76 206c 6962 7832 3634  h}" -c:v libx264
+00009b70: 202d 6372 6620 3231 202d 7072 6573 6574   -crf 21 -preset
+00009b80: 206d 6564 6975 6d20 2d63 3a61 206c 6962   medium -c:a lib
+00009b90: 6d70 336c 616d 6520 2d62 3a61 2033 3230  mp3lame -b:a 320
+00009ba0: 6b20 227b 7361 7665 5f70 6174 687d 2227  k "{save_path}"'
+00009bb0: 0a20 2020 2020 2020 2073 7562 7072 6f63  .        subproc
+00009bc0: 6573 732e 6361 6c6c 2863 6f6d 6d61 6e64  ess.call(command
+00009bd0: 2c20 7368 656c 6c3d 5472 7565 2c20 7374  , shell=True, st
+00009be0: 646f 7574 3d73 7562 7072 6f63 6573 732e  dout=subprocess.
+00009bf0: 5049 5045 290a 2020 2020 2020 2020 7669  PIPE).        vi
+00009c00: 6465 6f5f 7469 6d65 722e 7374 6f70 5f74  deo_timer.stop_t
+00009c10: 696d 6572 2829 0a20 2020 2020 2020 2070  imer().        p
+00009c20: 7269 6e74 280a 2020 2020 2020 2020 2020  rint(.          
+00009c30: 2020 6622 5669 6465 6f20 7b66 696c 655f    f"Video {file_
+00009c40: 6e61 6d65 7d20 636f 6d70 6c65 7465 2c20  name} complete, 
+00009c50: 2865 6c61 7073 6564 2074 696d 653a 207b  (elapsed time: {
+00009c60: 7669 6465 6f5f 7469 6d65 722e 656c 6170  video_timer.elap
+00009c70: 7365 645f 7469 6d65 5f73 7472 7d73 2920  sed_time_str}s) 
+00009c80: 2856 6964 656f 207b 6669 6c65 5f63 6e74  (Video {file_cnt
+00009c90: 202b 2031 7d2f 7b6c 656e 2876 6964 656f   + 1}/{len(video
+00009ca0: 5f70 6174 6873 297d 292e 2e2e 220a 2020  _paths)})...".  
+00009cb0: 2020 2020 2020 290a 2020 2020 7374 646f        ).    stdo
+00009cc0: 7574 5f73 7563 6365 7373 280a 2020 2020  ut_success(.    
+00009cd0: 2020 2020 6d73 673d 6622 5349 4d42 4120      msg=f"SIMBA 
+00009ce0: 434f 4d50 4c45 5445 3a20 7b73 7472 286c  COMPLETE: {str(l
+00009cf0: 656e 2876 6964 656f 5f70 6174 6873 2929  en(video_paths))
+00009d00: 7d20 7669 6465 6f73 2063 6f6e 7665 7274  } videos convert
+00009d10: 6564 2069 6e20 7b64 6972 6563 746f 7279  ed in {directory
+00009d20: 7d20 6469 7265 6374 6f72 7921 222c 0a20  } directory!",. 
+00009d30: 2020 2020 2020 2073 6f75 7263 653d 6261         source=ba
+00009d40: 7463 685f 636f 6e76 6572 745f 7669 6465  tch_convert_vide
+00009d50: 6f5f 666f 726d 6174 2e5f 5f6e 616d 655f  o_format.__name_
+00009d60: 5f2c 0a20 2020 2029 0a0a 0a23 205f 203d  _,.    )...# _ =
+00009d70: 2062 6174 6368 5f63 6f6e 7665 7274 5f76   batch_convert_v
+00009d80: 6964 656f 5f66 6f72 6d61 7428 6469 7265  ideo_format(dire
+00009d90: 6374 6f72 793d 272f 5573 6572 732f 7369  ctory='/Users/si
+00009da0: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
+00009db0: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
+00009dc0: 6f6f 7469 6e67 2f6d 6f75 7365 5f6f 7065  ooting/mouse_ope
+00009dd0: 6e5f 6669 656c 642f 7072 6f6a 6563 745f  n_field/project_
+00009de0: 666f 6c64 6572 2f76 6964 656f 732f 7465  folder/videos/te
+00009df0: 7374 5f32 272c 696e 7075 745f 666f 726d  st_2',input_form
+00009e00: 6174 3d27 6d70 3427 2c20 6f75 7470 7574  at='mp4', output
+00009e10: 5f66 6f72 6d61 743d 2761 7669 2729 0a0a  _format='avi')..
+00009e20: 0a64 6566 2062 6174 6368 5f63 7265 6174  .def batch_creat
+00009e30: 655f 6672 616d 6573 2864 6972 6563 746f  e_frames(directo
+00009e40: 7279 3a20 556e 696f 6e5b 7374 722c 206f  ry: Union[str, o
+00009e50: 732e 5061 7468 4c69 6b65 5d29 202d 3e20  s.PathLike]) -> 
+00009e60: 4e6f 6e65 3a0a 2020 2020 2222 220a 2020  None:.    """.  
+00009e70: 2020 4578 7472 6163 7420 616c 6c20 6672    Extract all fr
+00009e80: 616d 6573 2066 6f72 2061 6c6c 2076 6964  ames for all vid
+00009e90: 656f 7320 696e 2061 2064 6972 6563 746f  eos in a directo
+00009ea0: 7279 2e20 5265 7375 6c74 7320 6172 6520  ry. Results are 
+00009eb0: 7374 6f72 6564 2077 6974 6869 6e20 7375  stored within su
+00009ec0: 622d 6469 7265 6374 6f72 6965 7320 696e  b-directories in
+00009ed0: 2074 6865 2069 6e70 7574 0a20 2020 2064   the input.    d
+00009ee0: 6972 6563 746f 7279 206e 616d 6564 2061  irectory named a
+00009ef0: 6363 6f72 6469 6e67 2074 6f20 7468 6520  ccording to the 
+00009f00: 7669 6465 6f20 6669 6c65 732e 0a0a 2020  video files...  
+00009f10: 2020 3a70 6172 616d 6574 6572 2073 7472    :parameter str
+00009f20: 2064 6972 6563 746f 7279 3a20 5061 7468   directory: Path
+00009f30: 2074 6f20 6469 7265 6374 6f72 7920 636f   to directory co
+00009f40: 6e74 6169 6e69 6e67 2076 6964 656f 2066  ntaining video f
+00009f50: 696c 6573 2e0a 0a20 2020 203a 6578 616d  iles...    :exam
+00009f60: 706c 653a 0a20 2020 203e 3e3e 205f 203d  ple:.    >>> _ =
+00009f70: 2062 6174 6368 5f63 7265 6174 655f 6672   batch_create_fr
+00009f80: 616d 6573 2864 6972 6563 746f 7279 3d27  ames(directory='
+00009f90: 7072 6f6a 6563 745f 666f 6c64 6572 2f76  project_folder/v
+00009fa0: 6964 656f 7327 290a 2020 2020 2222 220a  ideos').    """.
+00009fb0: 0a20 2020 2069 6620 6e6f 7420 6f73 2e70  .    if not os.p
+00009fc0: 6174 682e 6973 6469 7228 6469 7265 6374  ath.isdir(direct
+00009fd0: 6f72 7929 3a0a 2020 2020 2020 2020 7261  ory):.        ra
+00009fe0: 6973 6520 4e6f 7444 6972 6563 746f 7279  ise NotDirectory
+00009ff0: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+0000a000: 2020 206d 7367 3d22 5349 4d42 4120 4552     msg="SIMBA ER
+0000a010: 524f 523a 207b 7d20 6973 206e 6f74 2061  ROR: {} is not a
+0000a020: 2076 616c 6964 2064 6972 6563 746f 7279   valid directory
+0000a030: 222e 666f 726d 6174 2864 6972 6563 746f  ".format(directo
+0000a040: 7279 292c 0a20 2020 2020 2020 2020 2020  ry),.           
+0000a050: 2073 6f75 7263 653d 6261 7463 685f 6372   source=batch_cr
+0000a060: 6561 7465 5f66 7261 6d65 732e 5f5f 6e61  eate_frames.__na
+0000a070: 6d65 5f5f 2c0a 2020 2020 2020 2020 290a  me__,.        ).
+0000a080: 2020 2020 7669 6465 6f5f 7061 7468 7320      video_paths 
+0000a090: 3d20 5b5d 0a20 2020 2066 696c 655f 7061  = [].    file_pa
+0000a0a0: 7468 735f 696e 5f66 6f6c 6465 7220 3d20  ths_in_folder = 
+0000a0b0: 5b66 2066 6f72 2066 2069 6e20 676c 6f62  [f for f in glob
+0000a0c0: 2e67 6c6f 6228 6469 7265 6374 6f72 7920  .glob(directory 
+0000a0d0: 2b20 222f 2a22 2920 6966 206f 732e 7061  + "/*") if os.pa
+0000a0e0: 7468 2e69 7366 696c 6528 6629 5d0a 2020  th.isfile(f)].  
+0000a0f0: 2020 666f 7220 6669 6c65 5f70 6174 6820    for file_path 
+0000a100: 696e 2066 696c 655f 7061 7468 735f 696e  in file_paths_in
+0000a110: 5f66 6f6c 6465 723a 0a20 2020 2020 2020  _folder:.       
+0000a120: 205f 2c20 5f2c 2065 7874 203d 2067 6574   _, _, ext = get
+0000a130: 5f66 6e5f 6578 7428 6669 6c65 7061 7468  _fn_ext(filepath
+0000a140: 3d66 696c 655f 7061 7468 290a 2020 2020  =file_path).    
+0000a150: 2020 2020 6966 2065 7874 2e6c 6f77 6572      if ext.lower
+0000a160: 2829 2069 6e20 5b22 2e61 7669 222c 2022  () in [".avi", "
+0000a170: 2e6d 7034 222c 2022 2e6d 6f76 222c 2022  .mp4", ".mov", "
+0000a180: 2e66 6c76 225d 3a0a 2020 2020 2020 2020  .flv"]:.        
+0000a190: 2020 2020 7669 6465 6f5f 7061 7468 732e      video_paths.
+0000a1a0: 6170 7065 6e64 2866 696c 655f 7061 7468  append(file_path
+0000a1b0: 290a 2020 2020 6966 206c 656e 2876 6964  ).    if len(vid
+0000a1c0: 656f 5f70 6174 6873 2920 3c20 313a 0a20  eo_paths) < 1:. 
+0000a1d0: 2020 2020 2020 2072 6169 7365 204e 6f46         raise NoF
+0000a1e0: 696c 6573 466f 756e 6445 7272 6f72 280a  ilesFoundError(.
+0000a1f0: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
+0000a200: 2253 494d 4241 2045 5252 4f52 3a20 4e6f  "SIMBA ERROR: No
+0000a210: 2066 696c 6573 2077 6974 6820 2e6d 7034   files with .mp4
+0000a220: 2c20 2e61 7669 2c20 2e6d 6f76 2c20 2e66  , .avi, .mov, .f
+0000a230: 6c76 2066 696c 6520 656e 6469 6e67 2066  lv file ending f
+0000a240: 6f75 6e64 2069 6e20 7468 6520 7b7d 2064  ound in the {} d
+0000a250: 6972 6563 746f 7279 222e 666f 726d 6174  irectory".format
+0000a260: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000a270: 2020 6469 7265 6374 6f72 790a 2020 2020    directory.    
+0000a280: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+0000a290: 2020 2020 2020 2073 6f75 7263 653d 6261         source=ba
+0000a2a0: 7463 685f 6372 6561 7465 5f66 7261 6d65  tch_create_frame
+0000a2b0: 732e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  s.__name__,.    
+0000a2c0: 2020 2020 290a 2020 2020 666f 7220 6669      ).    for fi
+0000a2d0: 6c65 5f63 6e74 2c20 6669 6c65 5f70 6174  le_cnt, file_pat
+0000a2e0: 6820 696e 2065 6e75 6d65 7261 7465 2876  h in enumerate(v
+0000a2f0: 6964 656f 5f70 6174 6873 293a 0a20 2020  ideo_paths):.   
+0000a300: 2020 2020 2064 6972 5f6e 616d 652c 2066       dir_name, f
+0000a310: 696c 655f 6e61 6d65 2c20 6578 7420 3d20  ile_name, ext = 
+0000a320: 6765 745f 666e 5f65 7874 2866 696c 6570  get_fn_ext(filep
+0000a330: 6174 683d 6669 6c65 5f70 6174 6829 0a20  ath=file_path). 
+0000a340: 2020 2020 2020 2070 7269 6e74 2822 5072         print("Pr
+0000a350: 6f63 6573 7369 6e67 2076 6964 656f 207b  ocessing video {
+0000a360: 7d2e 2e2e 222e 666f 726d 6174 2866 696c  }...".format(fil
+0000a370: 655f 6e61 6d65 2929 0a20 2020 2020 2020  e_name)).       
+0000a380: 2073 6176 655f 6469 7220 3d20 6f73 2e70   save_dir = os.p
+0000a390: 6174 682e 6a6f 696e 2864 6972 5f6e 616d  ath.join(dir_nam
+0000a3a0: 652c 2066 696c 655f 6e61 6d65 290a 2020  e, file_name).  
+0000a3b0: 2020 2020 2020 6966 206e 6f74 206f 732e        if not os.
+0000a3c0: 7061 7468 2e65 7869 7374 7328 7361 7665  path.exists(save
+0000a3d0: 5f64 6972 293a 0a20 2020 2020 2020 2020  _dir):.         
+0000a3e0: 2020 206f 732e 6d61 6b65 6469 7273 2873     os.makedirs(s
+0000a3f0: 6176 655f 6469 7229 0a20 2020 2020 2020  ave_dir).       
+0000a400: 2076 6964 656f 5f74 6f5f 6672 616d 6573   video_to_frames
+0000a410: 2866 696c 655f 7061 7468 2c20 7361 7665  (file_path, save
+0000a420: 5f64 6972 2c20 6f76 6572 7772 6974 653d  _dir, overwrite=
+0000a430: 5472 7565 2c20 6576 6572 793d 312c 2063  True, every=1, c
+0000a440: 6875 6e6b 5f73 697a 653d 3130 3030 290a  hunk_size=1000).
+0000a450: 2020 2020 2020 2020 7072 696e 7428 0a20          print(. 
+0000a460: 2020 2020 2020 2020 2020 2022 5669 6465             "Vide
+0000a470: 6f20 7b7d 2063 6f6d 706c 6574 652c 2028  o {} complete, (
+0000a480: 5669 6465 6f20 7b7d 2f7b 7d29 2e2e 2e22  Video {}/{})..."
+0000a490: 2e66 6f72 6d61 7428 0a20 2020 2020 2020  .format(.       
+0000a4a0: 2020 2020 2020 2020 2066 696c 655f 6e61           file_na
+0000a4b0: 6d65 2c20 7374 7228 6669 6c65 5f63 6e74  me, str(file_cnt
+0000a4c0: 202b 2031 292c 2073 7472 286c 656e 2876   + 1), str(len(v
+0000a4d0: 6964 656f 5f70 6174 6873 2929 0a20 2020  ideo_paths)).   
+0000a4e0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0000a4f0: 2020 2029 0a20 2020 2073 7464 6f75 745f     ).    stdout_
+0000a500: 7375 6363 6573 7328 0a20 2020 2020 2020  success(.       
+0000a510: 206d 7367 3d66 227b 7374 7228 6c65 6e28   msg=f"{str(len(
+0000a520: 7669 6465 6f5f 7061 7468 7329 297d 2076  video_paths))} v
+0000a530: 6964 656f 7320 636f 6e76 6572 7465 6420  ideos converted 
+0000a540: 696e 746f 2066 7261 6d65 7320 696e 207b  into frames in {
+0000a550: 6469 7265 6374 6f72 797d 2064 6972 6563  directory} direc
+0000a560: 746f 7279 2122 2c0a 2020 2020 2020 2020  tory!",.        
+0000a570: 736f 7572 6365 3d62 6174 6368 5f63 7265  source=batch_cre
+0000a580: 6174 655f 6672 616d 6573 2e5f 5f6e 616d  ate_frames.__nam
+0000a590: 655f 5f2c 0a20 2020 2029 0a0a 0a64 6566  e__,.    )...def
+0000a5a0: 2065 7874 7261 6374 5f66 7261 6d65 735f   extract_frames_
+0000a5b0: 7369 6e67 6c65 5f76 6964 656f 2866 696c  single_video(fil
+0000a5c0: 655f 7061 7468 3a20 556e 696f 6e5b 7374  e_path: Union[st
+0000a5d0: 722c 206f 732e 5061 7468 4c69 6b65 5d29  r, os.PathLike])
+0000a5e0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2222   -> None:.    ""
+0000a5f0: 220a 2020 2020 4578 7472 6163 7420 616c  ".    Extract al
+0000a600: 6c20 6672 616d 6573 2066 6f72 2061 2073  l frames for a s
+0000a610: 696e 676c 652e 2052 6573 756c 7473 2061  ingle. Results a
+0000a620: 7265 2073 746f 7265 6420 7769 7468 696e  re stored within
+0000a630: 2061 2073 7562 6469 7265 6374 6f72 7920   a subdirectory 
+0000a640: 696e 2074 6865 2073 616d 650a 2020 2020  in the same.    
+0000a650: 6469 7265 6374 6f72 7920 6173 2074 6865  directory as the
+0000a660: 2069 6e70 7574 2066 696c 652e 0a0a 2020   input file...  
+0000a670: 2020 3a70 6172 616d 6574 6572 2073 7472    :parameter str
+0000a680: 2066 696c 655f 7061 7468 3a20 5061 7468   file_path: Path
+0000a690: 2074 6f20 7669 6465 6f20 6669 6c65 2e0a   to video file..
+0000a6a0: 0a20 2020 203a 6578 616d 706c 653a 0a20  .    :example:. 
+0000a6b0: 2020 203e 3e3e 205f 203d 2065 7874 7261     >>> _ = extra
+0000a6c0: 6374 5f66 7261 6d65 735f 7369 6e67 6c65  ct_frames_single
+0000a6d0: 5f76 6964 656f 2866 696c 655f 7061 7468  _video(file_path
+0000a6e0: 3d27 7072 6f6a 6563 745f 666f 6c64 6572  ='project_folder
+0000a6f0: 2f76 6964 656f 732f 5669 6465 6f5f 312e  /videos/Video_1.
+0000a700: 6d70 3427 290a 2020 2020 2222 220a 0a20  mp4').    """.. 
+0000a710: 2020 2074 696d 6572 203d 2053 696d 6261     timer = Simba
+0000a720: 5469 6d65 7228 7374 6172 743d 5472 7565  Timer(start=True
+0000a730: 290a 2020 2020 6368 6563 6b5f 6669 6c65  ).    check_file
+0000a740: 5f65 7869 7374 5f61 6e64 5f72 6561 6461  _exist_and_reada
+0000a750: 626c 6528 6669 6c65 5f70 6174 683d 6669  ble(file_path=fi
+0000a760: 6c65 5f70 6174 6829 0a20 2020 205f 203d  le_path).    _ =
+0000a770: 2067 6574 5f76 6964 656f 5f6d 6574 615f   get_video_meta_
+0000a780: 6461 7461 2866 696c 655f 7061 7468 290a  data(file_path).
+0000a790: 2020 2020 6469 725f 6e61 6d65 2c20 6669      dir_name, fi
+0000a7a0: 6c65 5f6e 616d 652c 2065 7874 203d 2067  le_name, ext = g
+0000a7b0: 6574 5f66 6e5f 6578 7428 6669 6c65 7061  et_fn_ext(filepa
+0000a7c0: 7468 3d66 696c 655f 7061 7468 290a 2020  th=file_path).  
+0000a7d0: 2020 7361 7665 5f64 6972 203d 206f 732e    save_dir = os.
+0000a7e0: 7061 7468 2e6a 6f69 6e28 6469 725f 6e61  path.join(dir_na
+0000a7f0: 6d65 2c20 6669 6c65 5f6e 616d 6529 0a20  me, file_name). 
+0000a800: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
+0000a810: 682e 6578 6973 7473 2873 6176 655f 6469  h.exists(save_di
+0000a820: 7229 3a0a 2020 2020 2020 2020 6f73 2e6d  r):.        os.m
+0000a830: 616b 6564 6972 7328 7361 7665 5f64 6972  akedirs(save_dir
+0000a840: 290a 2020 2020 7072 696e 7428 6622 5072  ).    print(f"Pr
+0000a850: 6f63 6573 7369 6e67 2076 6964 656f 207b  ocessing video {
+0000a860: 6669 6c65 5f6e 616d 657d 2e2e 2e22 290a  file_name}...").
+0000a870: 2020 2020 7669 6465 6f5f 746f 5f66 7261      video_to_fra
+0000a880: 6d65 7328 6669 6c65 5f70 6174 682c 2073  mes(file_path, s
+0000a890: 6176 655f 6469 722c 206f 7665 7277 7269  ave_dir, overwri
+0000a8a0: 7465 3d54 7275 652c 2065 7665 7279 3d31  te=True, every=1
+0000a8b0: 2c20 6368 756e 6b5f 7369 7a65 3d31 3030  , chunk_size=100
+0000a8c0: 3029 0a20 2020 2074 696d 6572 2e73 746f  0).    timer.sto
+0000a8d0: 705f 7469 6d65 7228 290a 2020 2020 7374  p_timer().    st
+0000a8e0: 646f 7574 5f73 7563 6365 7373 280a 2020  dout_success(.  
+0000a8f0: 2020 2020 2020 6d73 673d 6622 5669 6465        msg=f"Vide
+0000a900: 6f20 7b66 696c 655f 6e61 6d65 7d20 636f  o {file_name} co
+0000a910: 6e76 6572 7465 6420 746f 2069 6d61 6765  nverted to image
+0000a920: 7320 696e 207b 6469 725f 6e61 6d65 7d20  s in {dir_name} 
+0000a930: 6469 7265 6374 6f72 7921 222c 0a20 2020  directory!",.   
+0000a940: 2020 2020 2065 6c61 7073 6564 5f74 696d       elapsed_tim
+0000a950: 653d 7469 6d65 722e 656c 6170 7365 645f  e=timer.elapsed_
+0000a960: 7469 6d65 5f73 7472 2c0a 2020 2020 2020  time_str,.      
+0000a970: 2020 736f 7572 6365 3d65 7874 7261 6374    source=extract
+0000a980: 5f66 7261 6d65 735f 7369 6e67 6c65 5f76  _frames_single_v
+0000a990: 6964 656f 2e5f 5f6e 616d 655f 5f2c 0a20  ideo.__name__,. 
+0000a9a0: 2020 2029 0a0a 0a23 205f 203d 2065 7874     )...# _ = ext
+0000a9b0: 7261 6374 5f66 7261 6d65 735f 7369 6e67  ract_frames_sing
+0000a9c0: 6c65 5f76 6964 656f 2866 696c 655f 7061  le_video(file_pa
+0000a9d0: 7468 3d27 2f55 7365 7273 2f73 696d 6f6e  th='/Users/simon
+0000a9e0: 2f44 6573 6b74 6f70 2f65 6e76 732f 7369  /Desktop/envs/si
+0000a9f0: 6d62 612f 7472 6f75 626c 6573 686f 6f74  mba/troubleshoot
+0000aa00: 696e 672f 6d6f 7573 655f 6f70 656e 5f66  ing/mouse_open_f
+0000aa10: 6965 6c64 2f70 726f 6a65 6374 5f66 6f6c  ield/project_fol
+0000aa20: 6465 722f 7669 6465 6f73 2f53 495f 4441  der/videos/SI_DA
+0000aa30: 5933 5f33 3038 5f43 4431 5f50 5245 5345  Y3_308_CD1_PRESE
+0000aa40: 4e54 5f64 6f77 6e73 616d 706c 6564 2e6d  NT_downsampled.m
+0000aa50: 7034 2729 0a0a 0a64 6566 206d 756c 7469  p4')...def multi
+0000aa60: 5f73 706c 6974 5f76 6964 656f 280a 2020  _split_video(.  
+0000aa70: 2020 6669 6c65 5f70 6174 683a 2055 6e69    file_path: Uni
+0000aa80: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
+0000aa90: 696b 655d 2c0a 2020 2020 7374 6172 745f  ike],.    start_
+0000aaa0: 7469 6d65 733a 204c 6973 745b 7374 725d  times: List[str]
+0000aab0: 2c0a 2020 2020 656e 645f 7469 6d65 733a  ,.    end_times:
+0000aac0: 204c 6973 745b 7374 725d 2c0a 2020 2020   List[str],.    
+0000aad0: 6f75 745f 6469 723a 204f 7074 696f 6e61  out_dir: Optiona
+0000aae0: 6c5b 556e 696f 6e5b 7374 722c 206f 732e  l[Union[str, os.
+0000aaf0: 5061 7468 4c69 6b65 5d5d 203d 204e 6f6e  PathLike]] = Non
+0000ab00: 652c 0a20 2020 2069 6e63 6c75 6465 5f63  e,.    include_c
+0000ab10: 6c69 705f 7469 6d65 5f69 6e5f 6669 6c65  lip_time_in_file
+0000ab20: 6e61 6d65 3a20 4f70 7469 6f6e 616c 5b62  name: Optional[b
+0000ab30: 6f6f 6c5d 203d 2046 616c 7365 2c0a 2020  ool] = False,.  
+0000ab40: 2020 6770 753a 204f 7074 696f 6e61 6c5b    gpu: Optional[
+0000ab50: 626f 6f6c 5d20 3d20 4661 6c73 652c 0a29  bool] = False,.)
+0000ab60: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2222   -> None:.    ""
+0000ab70: 220a 2020 2020 4469 7669 6465 2061 2076  ".    Divide a v
+0000ab80: 6964 656f 2066 696c 6520 696e 746f 206d  ideo file into m
+0000ab90: 756c 7469 706c 6520 7669 6465 6f20 6669  ultiple video fi
+0000aba0: 6c65 7320 6672 6f6d 2073 7065 6369 6669  les from specifi
+0000abb0: 6564 2073 7461 7274 2061 6e64 2073 746f  ed start and sto
+0000abc0: 7020 7469 6d65 732e 0a0a 2020 2020 3a70  p times...    :p
+0000abd0: 6172 616d 6574 6572 2073 7472 2066 696c  arameter str fil
+0000abe0: 655f 7061 7468 3a20 5061 7468 2074 6f20  e_path: Path to 
+0000abf0: 696e 7075 7420 7669 6465 6f20 6669 6c65  input video file
+0000ac00: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
+0000ac10: 204c 6973 745b 7374 725d 2073 7461 7274   List[str] start
+0000ac20: 5f74 696d 6573 3a20 5374 6172 7420 7469  _times: Start ti
+0000ac30: 6d65 7320 696e 2048 483a 4d4d 3a53 5320  mes in HH:MM:SS 
+0000ac40: 666f 726d 6174 2e0a 2020 2020 3a70 6172  format..    :par
+0000ac50: 616d 6574 6572 204c 6973 745b 7374 725d  ameter List[str]
+0000ac60: 2065 6e64 5f74 696d 6573 3a20 456e 6420   end_times: End 
+0000ac70: 7469 6d65 7320 696e 2048 483a 4d4d 3a53  times in HH:MM:S
+0000ac80: 5320 666f 726d 6174 2e0a 2020 2020 3a70  S format..    :p
+0000ac90: 6172 616d 6574 6572 204f 7074 696f 6e61  arameter Optiona
+0000aca0: 6c5b 556e 696f 6e5b 7374 722c 206f 732e  l[Union[str, os.
+0000acb0: 5061 7468 4c69 6b65 5d5d 206f 7574 5f64  PathLike]] out_d
+0000acc0: 6972 3a20 4966 204e 6f6e 652c 2074 6865  ir: If None, the
+0000acd0: 6e20 7468 6520 636c 6970 7320 7769 6c6c  n the clips will
+0000ace0: 2062 6520 7374 6f72 6564 2069 6e20 7468   be stored in th
+0000acf0: 6520 7361 6d65 2064 6972 2061 7320 7468  e same dir as th
+0000ad00: 6520 696e 7075 7420 7669 6465 6f2e 2049  e input video. I
+0000ad10: 6620 6469 7265 6374 6f72 792c 2074 6865  f directory, the
+0000ad20: 6e20 7468 6520 6c6f 6361 7469 6f6e 206f  n the location o
+0000ad30: 6620 7468 6520 6f75 7470 7574 2066 696c  f the output fil
+0000ad40: 6573 2e0a 2020 2020 3a70 6172 616d 6574  es..    :paramet
+0000ad50: 6572 204f 7074 696f 6e61 6c5b 626f 6f6c  er Optional[bool
+0000ad60: 5d20 696e 636c 7564 655f 636c 6970 5f74  ] include_clip_t
+0000ad70: 696d 655f 696e 5f66 696c 656e 616d 653a  ime_in_filename:
+0000ad80: 2049 6620 5472 7565 2c20 696e 636c 7564   If True, includ
+0000ad90: 6520 7468 6520 636c 6970 2073 7461 7274  e the clip start
+0000ada0: 2061 6e64 2065 6e64 2069 6e20 4848 2d4d   and end in HH-M
+0000adb0: 4d2d 5353 2066 6f72 6d61 7420 6173 2073  M-SS format as s
+0000adc0: 7566 6669 7820 696e 2074 6865 2066 696c  uffix in the fil
+0000add0: 656e 616d 652e 2049 6620 4661 6c73 652c  ename. If False,
+0000ade0: 2074 6865 6e20 7573 6520 696e 7465 6765   then use intege
+0000adf0: 7220 7375 6666 6963 2072 6570 7265 7365  r suffic represe
+0000ae00: 6e74 696e 6720 7468 6520 636f 756e 742e  nting the count.
+0000ae10: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
+0000ae20: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 2067  Optional[bool] g
+0000ae30: 7075 3a20 4966 2054 7275 652c 2075 7365  pu: If True, use
+0000ae40: 204e 5649 4445 4120 4750 5520 636f 6465   NVIDEA GPU code
+0000ae50: 6373 2e20 4465 6661 756c 7420 4661 6c73  cs. Default Fals
+0000ae60: 652e 0a0a 2020 2020 3a65 7861 6d70 6c65  e...    :example
+0000ae70: 3a0a 2020 2020 3e3e 3e20 5f20 3d20 6d75  :.    >>> _ = mu
+0000ae80: 6c74 695f 7370 6c69 745f 7669 6465 6f28  lti_split_video(
+0000ae90: 6669 6c65 5f70 6174 683d 2770 726f 6a65  file_path='proje
+0000aea0: 6374 5f66 6f6c 6465 722f 7669 6465 6f73  ct_folder/videos
+0000aeb0: 2f56 6964 656f 5f31 2e6d 7034 272c 2073  /Video_1.mp4', s
+0000aec0: 7461 7274 5f74 696d 6573 3d5b 2730 303a  tart_times=['00:
+0000aed0: 3030 3a30 3527 2c20 2730 303a 3030 3a32  00:05', '00:00:2
+0000aee0: 3027 5d2c 2065 6e64 5f74 696d 6573 3d5b  0'], end_times=[
+0000aef0: 2730 303a 3030 3a31 3027 2c20 2730 303a  '00:00:10', '00:
+0000af00: 3030 3a32 3527 5d29 0a20 2020 2022 2222  00:25']).    """
+0000af10: 0a0a 2020 2020 6368 6563 6b5f 6666 6d70  ..    check_ffmp
+0000af20: 6567 5f61 7661 696c 6162 6c65 2872 6169  eg_available(rai
+0000af30: 7365 5f65 7272 6f72 3d54 7275 6529 0a20  se_error=True). 
+0000af40: 2020 2074 696d 6572 203d 2053 696d 6261     timer = Simba
+0000af50: 5469 6d65 7228 7374 6172 743d 5472 7565  Timer(start=True
+0000af60: 290a 2020 2020 6368 6563 6b5f 6669 6c65  ).    check_file
+0000af70: 5f65 7869 7374 5f61 6e64 5f72 6561 6461  _exist_and_reada
+0000af80: 626c 6528 6669 6c65 5f70 6174 683d 6669  ble(file_path=fi
+0000af90: 6c65 5f70 6174 6829 0a20 2020 2064 6972  le_path).    dir
+0000afa0: 5f6e 616d 652c 2066 696c 655f 6e61 6d65  _name, file_name
+0000afb0: 2c20 6578 7420 3d20 6765 745f 666e 5f65  , ext = get_fn_e
+0000afc0: 7874 2866 696c 6570 6174 683d 6669 6c65  xt(filepath=file
+0000afd0: 5f70 6174 6829 0a20 2020 2069 6620 6f75  _path).    if ou
+0000afe0: 745f 6469 7220 6973 206e 6f74 204e 6f6e  t_dir is not Non
+0000aff0: 653a 0a20 2020 2020 2020 2069 6620 6e6f  e:.        if no
+0000b000: 7420 6f73 2e70 6174 682e 6973 6469 7228  t os.path.isdir(
+0000b010: 6f75 745f 6469 7229 3a0a 2020 2020 2020  out_dir):.      
+0000b020: 2020 2020 2020 6f73 2e6d 616b 6564 6972        os.makedir
+0000b030: 7328 6f75 745f 6469 7229 0a20 2020 2020  s(out_dir).     
+0000b040: 2020 2064 6972 5f6e 616d 6520 3d20 6f75     dir_name = ou
+0000b050: 745f 6469 720a 2020 2020 666f 7220 7374  t_dir.    for st
+0000b060: 6172 745f 7469 6d65 5f63 6e74 2c20 7374  art_time_cnt, st
+0000b070: 6172 745f 7469 6d65 2069 6e20 656e 756d  art_time in enum
+0000b080: 6572 6174 6528 7374 6172 745f 7469 6d65  erate(start_time
+0000b090: 7329 3a0a 2020 2020 2020 2020 6368 6563  s):.        chec
+0000b0a0: 6b5f 6966 5f73 7472 696e 675f 7661 6c75  k_if_string_valu
+0000b0b0: 655f 6973 5f76 616c 6964 5f76 6964 656f  e_is_valid_video
+0000b0c0: 5f74 696d 6573 7461 6d70 280a 2020 2020  _timestamp(.    
+0000b0d0: 2020 2020 2020 2020 7661 6c75 653d 7374          value=st
+0000b0e0: 6172 745f 7469 6d65 2c20 6e61 6d65 3d66  art_time, name=f
+0000b0f0: 2253 7461 7274 2074 696d 6520 666f 7220  "Start time for 
+0000b100: 636c 6970 207b 7374 6172 745f 7469 6d65  clip {start_time
+0000b110: 5f63 6e74 2b31 7d22 0a20 2020 2020 2020  _cnt+1}".       
+0000b120: 2029 0a20 2020 2066 6f72 2065 6e64 5f74   ).    for end_t
+0000b130: 696d 655f 636e 742c 2065 6e64 5f74 696d  ime_cnt, end_tim
+0000b140: 6520 696e 2065 6e75 6d65 7261 7465 2865  e in enumerate(e
+0000b150: 6e64 5f74 696d 6573 293a 0a20 2020 2020  nd_times):.     
+0000b160: 2020 2063 6865 636b 5f69 665f 7374 7269     check_if_stri
+0000b170: 6e67 5f76 616c 7565 5f69 735f 7661 6c69  ng_value_is_vali
+0000b180: 645f 7669 6465 6f5f 7469 6d65 7374 616d  d_video_timestam
+0000b190: 7028 0a20 2020 2020 2020 2020 2020 2076  p(.            v
+0000b1a0: 616c 7565 3d65 6e64 5f74 696d 652c 206e  alue=end_time, n
+0000b1b0: 616d 653d 6622 456e 6420 7469 6d65 2066  ame=f"End time f
+0000b1c0: 6f72 2063 6c69 7020 7b65 6e64 5f74 696d  or clip {end_tim
+0000b1d0: 655f 636e 742b 317d 220a 2020 2020 2020  e_cnt+1}".      
+0000b1e0: 2020 290a 2020 2020 666f 7220 636c 6970    ).    for clip
+0000b1f0: 5f63 6e74 2c20 2873 7461 7274 5f74 696d  _cnt, (start_tim
+0000b200: 652c 2065 6e64 5f74 696d 6529 2069 6e20  e, end_time) in 
+0000b210: 656e 756d 6572 6174 6528 7a69 7028 7374  enumerate(zip(st
+0000b220: 6172 745f 7469 6d65 732c 2065 6e64 5f74  art_times, end_t
+0000b230: 696d 6573 2929 3a0a 2020 2020 2020 2020  imes)):.        
+0000b240: 6368 6563 6b5f 7468 6174 5f68 686d 6d73  check_that_hhmms
+0000b250: 735f 7374 6172 745f 6973 5f62 6566 6f72  s_start_is_befor
+0000b260: 655f 656e 6428 0a20 2020 2020 2020 2020  e_end(.         
+0000b270: 2020 2073 7461 7274 5f74 696d 653d 7374     start_time=st
+0000b280: 6172 745f 7469 6d65 2c20 656e 645f 7469  art_time, end_ti
+0000b290: 6d65 3d65 6e64 5f74 696d 652c 206e 616d  me=end_time, nam
+0000b2a0: 653d 6622 436c 6970 207b 7374 7228 636c  e=f"Clip {str(cl
+0000b2b0: 6970 5f63 6e74 2b31 297d 220a 2020 2020  ip_cnt+1)}".    
+0000b2c0: 2020 2020 290a 2020 2020 2020 2020 6368      ).        ch
+0000b2d0: 6563 6b5f 6966 5f68 686d 6d73 735f 7469  eck_if_hhmmss_ti
+0000b2e0: 6d65 7374 616d 705f 6973 5f76 616c 6964  mestamp_is_valid
+0000b2f0: 5f70 6172 745f 6f66 5f76 6964 656f 280a  _part_of_video(.
+0000b300: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+0000b310: 7374 616d 703d 7374 6172 745f 7469 6d65  stamp=start_time
+0000b320: 2c20 7669 6465 6f5f 7061 7468 3d66 696c  , video_path=fil
+0000b330: 655f 7061 7468 0a20 2020 2020 2020 2029  e_path.        )
+0000b340: 0a20 2020 2020 2020 2063 6865 636b 5f69  .        check_i
+0000b350: 665f 6868 6d6d 7373 5f74 696d 6573 7461  f_hhmmss_timesta
+0000b360: 6d70 5f69 735f 7661 6c69 645f 7061 7274  mp_is_valid_part
+0000b370: 5f6f 665f 7669 6465 6f28 0a20 2020 2020  _of_video(.     
+0000b380: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+0000b390: 3d65 6e64 5f74 696d 652c 2076 6964 656f  =end_time, video
+0000b3a0: 5f70 6174 683d 6669 6c65 5f70 6174 680a  _path=file_path.
+0000b3b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000b3c0: 2020 6966 206e 6f74 2069 6e63 6c75 6465    if not include
+0000b3d0: 5f63 6c69 705f 7469 6d65 5f69 6e5f 6669  _clip_time_in_fi
+0000b3e0: 6c65 6e61 6d65 3a0a 2020 2020 2020 2020  lename:.        
+0000b3f0: 2020 2020 7361 7665 5f70 6174 6820 3d20      save_path = 
+0000b400: 6f73 2e70 6174 682e 6a6f 696e 280a 2020  os.path.join(.  
+0000b410: 2020 2020 2020 2020 2020 2020 2020 6469                di
+0000b420: 725f 6e61 6d65 2c20 6669 6c65 5f6e 616d  r_name, file_nam
+0000b430: 6520 2b20 225f 7b7d 222e 666f 726d 6174  e + "_{}".format
+0000b440: 2873 7472 2863 6c69 705f 636e 7420 2b20  (str(clip_cnt + 
+0000b450: 3129 2920 2b20 222e 6d70 3422 0a20 2020  1)) + ".mp4".   
+0000b460: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0000b470: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0000b480: 2020 2020 2073 6176 655f 7061 7468 203d       save_path =
+0000b490: 206f 732e 7061 7468 2e6a 6f69 6e28 0a20   os.path.join(. 
+0000b4a0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0000b4b0: 6972 5f6e 616d 652c 0a20 2020 2020 2020  ir_name,.       
+0000b4c0: 2020 2020 2020 2020 2066 696c 655f 6e61           file_na
+0000b4d0: 6d65 0a20 2020 2020 2020 2020 2020 2020  me.             
+0000b4e0: 2020 202b 2066 275f 7b73 7461 7274 5f74     + f'_{start_t
+0000b4f0: 696d 652e 7265 706c 6163 6528 223a 222c  ime.replace(":",
+0000b500: 2022 2d22 297d 5f7b 656e 645f 7469 6d65   "-")}_{end_time
+0000b510: 2e72 6570 6c61 6365 2822 3a22 2c20 222d  .replace(":", "-
+0000b520: 2229 7d2e 6d70 3427 2c0a 2020 2020 2020  ")}.mp4',.      
+0000b530: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000b540: 6966 206f 732e 7061 7468 2e69 7366 696c  if os.path.isfil
+0000b550: 6528 7361 7665 5f70 6174 6829 3a0a 2020  e(save_path):.  
+0000b560: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0000b570: 4669 6c65 4578 6973 7445 7272 6f72 280a  FileExistError(.
+0000b580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b590: 6d73 673d 6622 5468 6520 6f75 7466 696c  msg=f"The outfil
+0000b5a0: 6520 6669 6c65 2061 6c72 6561 6479 2065  e file already e
+0000b5b0: 7869 7374 3a20 7b73 6176 655f 7061 7468  xist: {save_path
+0000b5c0: 7d2e 222c 0a20 2020 2020 2020 2020 2020  }.",.           
+0000b5d0: 2020 2020 2073 6f75 7263 653d 6d75 6c74       source=mult
+0000b5e0: 695f 7370 6c69 745f 7669 6465 6f2e 5f5f  i_split_video.__
+0000b5f0: 6e61 6d65 5f5f 2c0a 2020 2020 2020 2020  name__,.        
+0000b600: 2020 2020 290a 2020 2020 2020 2020 6966      ).        if
+0000b610: 2067 7075 3a0a 2020 2020 2020 2020 2020   gpu:.          
+0000b620: 2020 6966 206e 6f74 2063 6865 636b 5f6e    if not check_n
+0000b630: 7669 6465 615f 6770 755f 6176 6169 6c61  videa_gpu_availa
+0000b640: 626c 6528 293a 0a20 2020 2020 2020 2020  ble():.         
+0000b650: 2020 2020 2020 2072 6169 7365 2046 464d         raise FFM
+0000b660: 5045 4743 6f64 6563 4750 5545 7272 6f72  PEGCodecGPUError
+0000b670: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000b680: 2020 2020 2020 6d73 673d 224e 5649 4445        msg="NVIDE
+0000b690: 4120 4750 5520 6e6f 7420 6176 6169 6c61  A GPU not availa
+0000b6a0: 626c 6520 2861 7320 6576 616c 7561 7465  ble (as evaluate
+0000b6b0: 6420 6279 206e 7669 6465 612d 736d 6920  d by nvidea-smi 
+0000b6c0: 7265 7475 726e 696e 6720 4e6f 6e65 222c  returning None",
+0000b6d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b6e0: 2020 2020 2073 6f75 7263 653d 6d75 6c74       source=mult
+0000b6f0: 695f 7370 6c69 745f 7669 6465 6f2e 5f5f  i_split_video.__
+0000b700: 6e61 6d65 5f5f 2c0a 2020 2020 2020 2020  name__,.        
+0000b710: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000b720: 2020 2020 2020 636f 6d6d 616e 6420 3d20        command = 
+0000b730: 2766 666d 7065 6720 2d68 7761 6363 656c  'ffmpeg -hwaccel
+0000b740: 2061 7574 6f20 2d69 2022 7b7d 2220 2d73   auto -i "{}" -s
+0000b750: 7320 7b7d 202d 746f 207b 7d20 2d63 3a76  s {} -to {} -c:v
+0000b760: 2068 3236 345f 6e76 656e 6320 2d61 7379   h264_nvenc -asy
+0000b770: 6e63 2031 2022 7b7d 2227 2e66 6f72 6d61  nc 1 "{}"'.forma
+0000b780: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
+0000b790: 2020 2066 696c 655f 7061 7468 2c20 7374     file_path, st
+0000b7a0: 6172 745f 7469 6d65 2c20 656e 645f 7469  art_time, end_ti
+0000b7b0: 6d65 2c20 7361 7665 5f70 6174 680a 2020  me, save_path.  
+0000b7c0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0000b7d0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000b7e0: 2020 2020 2020 636f 6d6d 616e 6420 3d20        command = 
+0000b7f0: 6627 6666 6d70 6567 202d 6920 227b 6669  f'ffmpeg -i "{fi
+0000b800: 6c65 5f70 6174 687d 2220 2d73 7320 7b73  le_path}" -ss {s
+0000b810: 7461 7274 5f74 696d 657d 202d 746f 207b  tart_time} -to {
+0000b820: 656e 645f 7469 6d65 7d20 2d61 7379 6e63  end_time} -async
+0000b830: 2031 2022 7b73 6176 655f 7061 7468 7d22   1 "{save_path}"
+0000b840: 270a 2020 2020 2020 2020 7072 696e 7428  '.        print(
+0000b850: 2250 726f 6365 7373 696e 6720 7669 6465  "Processing vide
+0000b860: 6f20 636c 6970 207b 7d2e 2e2e 222e 666f  o clip {}...".fo
+0000b870: 726d 6174 2873 7472 2863 6c69 705f 636e  rmat(str(clip_cn
+0000b880: 7420 2b20 3129 2929 0a20 2020 2020 2020  t + 1))).       
+0000b890: 2073 7562 7072 6f63 6573 732e 6361 6c6c   subprocess.call
+0000b8a0: 2863 6f6d 6d61 6e64 2c20 7368 656c 6c3d  (command, shell=
+0000b8b0: 5472 7565 2c20 7374 646f 7574 3d73 7562  True, stdout=sub
+0000b8c0: 7072 6f63 6573 732e 5049 5045 290a 2020  process.PIPE).  
+0000b8d0: 2020 7469 6d65 722e 7374 6f70 5f74 696d    timer.stop_tim
+0000b8e0: 6572 2829 0a20 2020 2073 7464 6f75 745f  er().    stdout_
+0000b8f0: 7375 6363 6573 7328 0a20 2020 2020 2020  success(.       
+0000b900: 206d 7367 3d66 2256 6964 656f 207b 6669   msg=f"Video {fi
+0000b910: 6c65 5f6e 616d 657d 2063 6f6e 7665 7274  le_name} convert
+0000b920: 6564 2069 6e74 6f20 7b73 7472 286c 656e  ed into {str(len
+0000b930: 2873 7461 7274 5f74 696d 6573 2929 7d20  (start_times))} 
+0000b940: 636c 6970 7320 696e 2064 6972 6563 746f  clips in directo
+0000b950: 7279 207b 6469 725f 6e61 6d65 7d21 222c  ry {dir_name}!",
+0000b960: 0a20 2020 2020 2020 2065 6c61 7073 6564  .        elapsed
+0000b970: 5f74 696d 653d 7469 6d65 722e 656c 6170  _time=timer.elap
+0000b980: 7365 645f 7469 6d65 5f73 7472 2c0a 2020  sed_time_str,.  
+0000b990: 2020 2020 2020 736f 7572 6365 3d6d 756c        source=mul
+0000b9a0: 7469 5f73 706c 6974 5f76 6964 656f 2e5f  ti_split_video._
+0000b9b0: 5f6e 616d 655f 5f2c 0a20 2020 2029 0a0a  _name__,.    )..
+0000b9c0: 0a23 206d 756c 7469 5f73 706c 6974 5f76  .# multi_split_v
+0000b9d0: 6964 656f 2866 696c 655f 7061 7468 3d72  ideo(file_path=r
+0000b9e0: 272f 5573 6572 732f 7369 6d6f 6e2f 4465  '/Users/simon/De
+0000b9f0: 736b 746f 702f 7469 6d65 5f73 5f63 6f6e  sktop/time_s_con
+0000ba00: 7665 7274 6564 2e6d 7034 272c 2073 7461  verted.mp4', sta
+0000ba10: 7274 5f74 696d 6573 3d5b 2730 303a 3030  rt_times=['00:00
+0000ba20: 3a30 3127 2c20 2730 303a 3030 3a30 3227  :01', '00:00:02'
+0000ba30: 5d2c 2065 6e64 5f74 696d 6573 3d5b 2730  ], end_times=['0
+0000ba40: 303a 3030 3a30 3427 2c20 2730 303a 3030  0:00:04', '00:00
+0000ba50: 3a30 3527 5d2c 2067 7075 3d46 616c 7365  :05'], gpu=False
+0000ba60: 290a 0a0a 6465 6620 6372 6f70 5f73 696e  )...def crop_sin
+0000ba70: 676c 655f 7669 6465 6f28 0a20 2020 2066  gle_video(.    f
+0000ba80: 696c 655f 7061 7468 3a20 556e 696f 6e5b  ile_path: Union[
+0000ba90: 7374 722c 206f 732e 5061 7468 4c69 6b65  str, os.PathLike
+0000baa0: 5d2c 2067 7075 3a20 4f70 7469 6f6e 616c  ], gpu: Optional
+0000bab0: 5b62 6f6f 6c5d 203d 2046 616c 7365 0a29  [bool] = False.)
+0000bac0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2222   -> None:.    ""
+0000bad0: 220a 2020 2020 4372 6f70 2061 2073 696e  ".    Crop a sin
+0000bae0: 676c 6520 7669 6465 6f20 7573 696e 6720  gle video using 
+0000baf0: 6060 7369 6d62 612e 7669 6465 6f5f 7072  ``simba.video_pr
+0000bb00: 6f63 6573 736f 7273 2e72 6f69 5f73 656c  ocessors.roi_sel
+0000bb10: 6563 746f 722e 524f 4953 656c 6563 746f  ector.ROISelecto
+0000bb20: 7260 6020 696e 7465 7266 6163 652e 2052  r`` interface. R
+0000bb30: 6573 756c 7473 2069 7320 7361 7665 6420  esults is saved 
+0000bb40: 696e 2074 6865 2073 616d 6520 6469 7265  in the same dire
+0000bb50: 6374 6f72 7920 6173 2069 6e70 7574 2076  ctory as input v
+0000bb60: 6964 656f 2077 6974 6820 7468 650a 2020  ideo with the.  
+0000bb70: 2020 6060 5f63 726f 7070 6564 2e6d 7034    ``_cropped.mp4
+0000bb80: 6060 2073 7566 6669 7860 2e0a 0a20 2020  `` suffix`...   
+0000bb90: 203a 7061 7261 6d65 7465 7220 7374 7220   :parameter str 
+0000bba0: 6669 6c65 5f70 6174 683a 2050 6174 6820  file_path: Path 
+0000bbb0: 746f 2076 6964 656f 2066 696c 652e 0a20  to video file.. 
+0000bbc0: 2020 203a 7061 7261 6d65 7465 7220 4f70     :parameter Op
+0000bbd0: 7469 6f6e 616c 5b62 6f6f 6c5d 2067 7075  tional[bool] gpu
+0000bbe0: 3a20 4966 2054 7275 652c 2075 7365 204e  : If True, use N
+0000bbf0: 5649 4445 4120 4750 5520 636f 6465 6373  VIDEA GPU codecs
+0000bc00: 2e20 4465 6661 756c 7420 4661 6c73 652e  . Default False.
+0000bc10: 0a0a 2020 2020 3a65 7861 6d70 6c65 3a0a  ..    :example:.
+0000bc20: 2020 2020 3e3e 3e20 5f20 3d20 6372 6f70      >>> _ = crop
+0000bc30: 5f73 696e 676c 655f 7669 6465 6f28 6669  _single_video(fi
+0000bc40: 6c65 5f70 6174 683d 2770 726f 6a65 6374  le_path='project
+0000bc50: 5f66 6f6c 6465 722f 7669 6465 6f73 2f56  _folder/videos/V
+0000bc60: 6964 656f 5f31 2e6d 7034 2729 0a20 2020  ideo_1.mp4').   
+0000bc70: 2022 2222 0a0a 2020 2020 6368 6563 6b5f   """..    check_
+0000bc80: 6666 6d70 6567 5f61 7661 696c 6162 6c65  ffmpeg_available
+0000bc90: 2872 6169 7365 5f65 7272 6f72 3d54 7275  (raise_error=Tru
+0000bca0: 6529 0a20 2020 2069 6620 6770 7520 616e  e).    if gpu an
+0000bcb0: 6420 6e6f 7420 6368 6563 6b5f 6e76 6964  d not check_nvid
+0000bcc0: 6561 5f67 7075 5f61 7661 696c 6162 6c65  ea_gpu_available
+0000bcd0: 2829 3a0a 2020 2020 2020 2020 7261 6973  ():.        rais
+0000bce0: 6520 4646 4d50 4547 436f 6465 6347 5055  e FFMPEGCodecGPU
+0000bcf0: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+0000bd00: 2020 206d 7367 3d22 4e56 4944 4541 2047     msg="NVIDEA G
+0000bd10: 5055 206e 6f74 2061 7661 696c 6162 6c65  PU not available
+0000bd20: 2028 6173 2065 7661 6c75 6174 6564 2062   (as evaluated b
+0000bd30: 7920 6e76 6964 6561 2d73 6d69 2072 6574  y nvidea-smi ret
+0000bd40: 7572 6e69 6e67 204e 6f6e 6522 2c0a 2020  urning None",.  
+0000bd50: 2020 2020 2020 2020 2020 736f 7572 6365            source
+0000bd60: 3d63 726f 705f 7369 6e67 6c65 5f76 6964  =crop_single_vid
+0000bd70: 656f 2e5f 5f6e 616d 655f 5f2c 0a20 2020  eo.__name__,.   
+0000bd80: 2020 2020 2029 0a20 2020 2063 6865 636b       ).    check
+0000bd90: 5f66 696c 655f 6578 6973 745f 616e 645f  _file_exist_and_
+0000bda0: 7265 6164 6162 6c65 2866 696c 655f 7061  readable(file_pa
+0000bdb0: 7468 3d66 696c 655f 7061 7468 290a 2020  th=file_path).  
+0000bdc0: 2020 5f20 3d20 6765 745f 7669 6465 6f5f    _ = get_video_
+0000bdd0: 6d65 7461 5f64 6174 6128 7669 6465 6f5f  meta_data(video_
+0000bde0: 7061 7468 3d66 696c 655f 7061 7468 290a  path=file_path).
+0000bdf0: 2020 2020 6469 725f 6e61 6d65 2c20 6669      dir_name, fi
+0000be00: 6c65 5f6e 616d 652c 2065 7874 203d 2067  le_name, ext = g
+0000be10: 6574 5f66 6e5f 6578 7428 6669 6c65 7061  et_fn_ext(filepa
+0000be20: 7468 3d66 696c 655f 7061 7468 290a 2020  th=file_path).  
+0000be30: 2020 726f 695f 7365 6c65 6374 6f72 203d    roi_selector =
+0000be40: 2052 4f49 5365 6c65 6374 6f72 2870 6174   ROISelector(pat
+0000be50: 683d 6669 6c65 5f70 6174 6829 0a20 2020  h=file_path).   
+0000be60: 2072 6f69 5f73 656c 6563 746f 722e 7275   roi_selector.ru
+0000be70: 6e28 290a 2020 2020 6966 2028 0a20 2020  n().    if (.   
+0000be80: 2020 2020 2028 726f 695f 7365 6c65 6374       (roi_select
+0000be90: 6f72 2e74 6f70 5f6c 6566 745b 305d 203c  or.top_left[0] <
+0000bea0: 2030 290a 2020 2020 2020 2020 6f72 2028   0).        or (
+0000beb0: 726f 695f 7365 6c65 6374 6f72 2e74 6f70  roi_selector.top
+0000bec0: 5f6c 6566 745b 315d 203c 2030 290a 2020  _left[1] < 0).  
+0000bed0: 2020 2020 2020 6f72 2028 726f 695f 7365        or (roi_se
+0000bee0: 6c65 6374 6f72 2e62 6f74 746f 6d5f 7269  lector.bottom_ri
+0000bef0: 6768 745b 305d 203c 2030 290a 2020 2020  ght[0] < 0).    
+0000bf00: 2020 2020 6f72 2028 726f 695f 7365 6c65      or (roi_sele
+0000bf10: 6374 6f72 2e62 6f74 746f 6d5f 7269 6768  ctor.bottom_righ
+0000bf20: 745b 315d 203c 2031 290a 2020 2020 293a  t[1] < 1).    ):
+0000bf30: 0a20 2020 2020 2020 2072 6169 7365 2043  .        raise C
+0000bf40: 6f75 6e74 4572 726f 7228 0a20 2020 2020  ountError(.     
+0000bf50: 2020 2020 2020 206d 7367 3d22 4352 4f50         msg="CROP
+0000bf60: 2046 4149 4c45 443a 2043 616e 6e6f 7420   FAILED: Cannot 
+0000bf70: 7573 6520 6e65 6761 7469 7665 2063 726f  use negative cro
+0000bf80: 7020 636f 6f72 6469 6e61 7465 732e 222c  p coordinates.",
+0000bf90: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
+0000bfa0: 7263 653d 6372 6f70 5f6d 756c 7469 706c  rce=crop_multipl
+0000bfb0: 655f 7669 6465 6f73 2e5f 5f6e 616d 655f  e_videos.__name_
+0000bfc0: 5f2c 0a20 2020 2020 2020 2029 0a20 2020  _,.        ).   
+0000bfd0: 2073 6176 655f 7061 7468 203d 206f 732e   save_path = os.
+0000bfe0: 7061 7468 2e6a 6f69 6e28 6469 725f 6e61  path.join(dir_na
+0000bff0: 6d65 2c20 6622 7b66 696c 655f 6e61 6d65  me, f"{file_name
+0000c000: 7d5f 6372 6f70 7065 642e 6d70 3422 290a  }_cropped.mp4").
+0000c010: 2020 2020 6966 206f 732e 7061 7468 2e69      if os.path.i
+0000c020: 7366 696c 6528 7361 7665 5f70 6174 6829  sfile(save_path)
+0000c030: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+0000c040: 4669 6c65 4578 6973 7445 7272 6f72 280a  FileExistError(.
+0000c050: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
+0000c060: 6622 5349 4d42 4120 4552 524f 523a 2054  f"SIMBA ERROR: T
+0000c070: 6865 206f 7574 2066 696c 6520 2061 6c72  he out file  alr
+0000c080: 6561 6479 2065 7869 7374 3a20 7b73 6176  eady exist: {sav
+0000c090: 655f 7061 7468 7d2e 222c 0a20 2020 2020  e_path}.",.     
+0000c0a0: 2020 2020 2020 2073 6f75 7263 653d 6372         source=cr
+0000c0b0: 6f70 5f73 696e 676c 655f 7669 6465 6f2e  op_single_video.
+0000c0c0: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
+0000c0d0: 2020 290a 2020 2020 7469 6d65 7220 3d20    ).    timer = 
+0000c0e0: 5369 6d62 6154 696d 6572 2873 7461 7274  SimbaTimer(start
+0000c0f0: 3d54 7275 6529 0a20 2020 2069 6620 6770  =True).    if gp
+0000c100: 753a 0a20 2020 2020 2020 2063 6f6d 6d61  u:.        comma
+0000c110: 6e64 203d 2066 2766 666d 7065 6720 2d68  nd = f'ffmpeg -h
+0000c120: 7761 6363 656c 2061 7574 6f20 2d63 3a76  waccel auto -c:v
+0000c130: 2068 3236 345f 6375 7669 6420 2d69 2022   h264_cuvid -i "
+0000c140: 7b66 696c 655f 7061 7468 7d22 202d 7666  {file_path}" -vf
+0000c150: 2022 6372 6f70 3d7b 726f 695f 7365 6c65   "crop={roi_sele
+0000c160: 6374 6f72 2e77 6964 7468 7d3a 7b72 6f69  ctor.width}:{roi
+0000c170: 5f73 656c 6563 746f 722e 6865 6967 6874  _selector.height
+0000c180: 7d3a 7b72 6f69 5f73 656c 6563 746f 722e  }:{roi_selector.
+0000c190: 746f 705f 6c65 6674 5b30 5d7d 3a7b 726f  top_left[0]}:{ro
+0000c1a0: 695f 7365 6c65 6374 6f72 2e74 6f70 5f6c  i_selector.top_l
+0000c1b0: 6566 745b 315d 7d22 202d 633a 7620 6832  eft[1]}" -c:v h2
+0000c1c0: 3634 5f6e 7665 6e63 202d 633a 6120 636f  64_nvenc -c:a co
+0000c1d0: 7079 2022 7b73 6176 655f 7061 7468 7d22  py "{save_path}"
+0000c1e0: 270a 2020 2020 656c 7365 3a0a 2020 2020  '.    else:.    
+0000c1f0: 2020 2020 636f 6d6d 616e 6420 3d20 6627      command = f'
+0000c200: 6666 6d70 6567 202d 7920 2d69 2022 7b66  ffmpeg -y -i "{f
+0000c210: 696c 655f 7061 7468 7d22 202d 7666 2022  ile_path}" -vf "
+0000c220: 6372 6f70 3d7b 726f 695f 7365 6c65 6374  crop={roi_select
+0000c230: 6f72 2e77 6964 7468 7d3a 7b72 6f69 5f73  or.width}:{roi_s
+0000c240: 656c 6563 746f 722e 6865 6967 6874 7d3a  elector.height}:
+0000c250: 7b72 6f69 5f73 656c 6563 746f 722e 746f  {roi_selector.to
+0000c260: 705f 6c65 6674 5b30 5d7d 3a7b 726f 695f  p_left[0]}:{roi_
+0000c270: 7365 6c65 6374 6f72 2e74 6f70 5f6c 6566  selector.top_lef
+0000c280: 745b 315d 7d22 202d 633a 7620 6c69 6278  t[1]}" -c:v libx
+0000c290: 3236 3420 2d63 7266 2031 3720 2d63 3a61  264 -crf 17 -c:a
+0000c2a0: 2063 6f70 7920 227b 7361 7665 5f70 6174   copy "{save_pat
+0000c2b0: 687d 2227 0a20 2020 2073 7562 7072 6f63  h}"'.    subproc
+0000c2c0: 6573 732e 6361 6c6c 2863 6f6d 6d61 6e64  ess.call(command
+0000c2d0: 2c20 7368 656c 6c3d 5472 7565 290a 2020  , shell=True).  
+0000c2e0: 2020 7469 6d65 722e 7374 6f70 5f74 696d    timer.stop_tim
+0000c2f0: 6572 2829 0a20 2020 2073 7464 6f75 745f  er().    stdout_
+0000c300: 7375 6363 6573 7328 0a20 2020 2020 2020  success(.       
+0000c310: 2066 2256 6964 656f 207b 6669 6c65 5f6e   f"Video {file_n
+0000c320: 616d 657d 2063 726f 7070 6564 2061 6e64  ame} cropped and
+0000c330: 2073 6176 6564 2061 7420 7b73 6176 655f   saved at {save_
+0000c340: 7061 7468 7d22 2c0a 2020 2020 2020 2020  path}",.        
+0000c350: 656c 6170 7365 645f 7469 6d65 3d74 696d  elapsed_time=tim
+0000c360: 6572 2e65 6c61 7073 6564 5f74 696d 655f  er.elapsed_time_
+0000c370: 7374 722c 0a20 2020 2020 2020 2073 6f75  str,.        sou
+0000c380: 7263 653d 6372 6f70 5f73 696e 676c 655f  rce=crop_single_
+0000c390: 7669 6465 6f2e 5f5f 6e61 6d65 5f5f 2c0a  video.__name__,.
+0000c3a0: 2020 2020 290a 0a0a 2320 5f20 3d20 6372      )...# _ = cr
+0000c3b0: 6f70 5f73 696e 676c 655f 7669 6465 6f28  op_single_video(
+0000c3c0: 6669 6c65 5f70 6174 683d 272f 5573 6572  file_path='/User
+0000c3d0: 732f 7369 6d6f 6e2f 4465 736b 746f 702f  s/simon/Desktop/
+0000c3e0: 656e 7673 2f74 726f 7562 6c65 7368 6f6f  envs/troubleshoo
+0000c3f0: 7469 6e67 2f41 5245 535f 6461 7461 2f54  ting/ARES_data/T
+0000c400: 6572 6d69 7465 2054 6573 7420 312f 5465  ermite Test 1/Te
+0000c410: 726d 6974 6520 5465 7374 2031 2e6d 7034  rmite Test 1.mp4
+0000c420: 2729 0a0a 2320 6372 6f70 5f73 696e 676c  ')..# crop_singl
+0000c430: 655f 7669 6465 6f28 6669 6c65 5f70 6174  e_video(file_pat
+0000c440: 683d 7227 433a 5c55 7365 7273 5c4e 6170  h=r'C:\Users\Nap
+0000c450: 655f 436f 6d70 7574 6572 5f32 5c44 6573  e_Computer_2\Des
+0000c460: 6b74 6f70 5c74 6573 745f 7669 6465 6f73  ktop\test_videos
+0000c470: 5c42 6f78 315f 504d 325f 6461 795f 355f  \Box1_PM2_day_5_
+0000c480: 3230 3231 3131 3034 5431 3731 3032 312e  20211104T171021.
+0000c490: 6d70 3427 2c20 6770 753d 4661 6c73 6529  mp4', gpu=False)
+0000c4a0: 0a0a 0a64 6566 2063 726f 705f 6d75 6c74  ...def crop_mult
+0000c4b0: 6970 6c65 5f76 6964 656f 7328 0a20 2020  iple_videos(.   
+0000c4c0: 2064 6972 6563 746f 7279 5f70 6174 683a   directory_path:
+0000c4d0: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
+0000c4e0: 6174 684c 696b 655d 2c0a 2020 2020 6f75  athLike],.    ou
+0000c4f0: 7470 7574 5f70 6174 683a 2055 6e69 6f6e  tput_path: Union
+0000c500: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
+0000c510: 655d 2c0a 2020 2020 6770 753a 204f 7074  e],.    gpu: Opt
+0000c520: 696f 6e61 6c5b 626f 6f6c 5d20 3d20 4661  ional[bool] = Fa
+0000c530: 6c73 652c 0a29 202d 3e20 4e6f 6e65 3a0a  lse,.) -> None:.
+0000c540: 2020 2020 2222 220a 2020 2020 4372 6f70      """.    Crop
+0000c550: 206d 756c 7469 706c 6520 7669 6465 6f73   multiple videos
+0000c560: 2069 6e20 6120 666f 6c64 6572 2061 6363   in a folder acc
+0000c570: 6f72 6469 6e67 2074 6f20 6372 6f70 2d63  ording to crop-c
+0000c580: 6f6f 7264 696e 6174 6573 2064 6566 696e  oordinates defin
+0000c590: 6564 2069 6e20 7468 6520 2a2a 6669 7273  ed in the **firs
+0000c5a0: 742a 2a20 7669 6465 6f2e 0a0a 2020 2020  t** video...    
+0000c5b0: 3a70 6172 616d 6574 6572 2073 7472 2064  :parameter str d
+0000c5c0: 6972 6563 746f 7279 5f70 6174 683a 2044  irectory_path: D
+0000c5d0: 6972 6563 746f 7279 2063 6f6e 7461 696e  irectory contain
+0000c5e0: 696e 6720 696e 7075 7420 7669 6465 6f73  ing input videos
+0000c5f0: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
+0000c600: 2073 7472 206f 7574 7075 745f 7061 7468   str output_path
+0000c610: 3a20 4469 7265 6374 6f72 7920 7768 6572  : Directory wher
+0000c620: 6520 746f 2073 6176 6520 7468 6520 6372  e to save the cr
+0000c630: 6f70 7065 6420 7669 6465 6f73 2e0a 2020  opped videos..  
+0000c640: 2020 3a70 6172 616d 6574 6572 204f 7074    :parameter Opt
+0000c650: 696f 6e61 6c5b 626f 6f6c 5d20 6770 753a  ional[bool] gpu:
+0000c660: 2049 6620 5472 7565 2c20 7573 6520 4e56   If True, use NV
+0000c670: 4944 4541 2047 5055 2063 6f64 6563 732e  IDEA GPU codecs.
+0000c680: 2044 6566 6175 6c74 2046 616c 7365 2e0a   Default False..
+0000c690: 0a20 2020 203a 6578 616d 706c 653a 0a20  .    :example:. 
+0000c6a0: 2020 203e 3e3e 205f 203d 2063 726f 705f     >>> _ = crop_
+0000c6b0: 6d75 6c74 6970 6c65 5f76 6964 656f 7328  multiple_videos(
+0000c6c0: 6469 7265 6374 6f72 795f 7061 7468 3d27  directory_path='
+0000c6d0: 7072 6f6a 6563 745f 666f 6c64 6572 2f76  project_folder/v
+0000c6e0: 6964 656f 7327 2c20 6f75 7470 7574 5f70  ideos', output_p
+0000c6f0: 6174 683d 2770 726f 6a65 6374 5f66 6f6c  ath='project_fol
+0000c700: 6465 722f 7669 6465 6f73 2f6d 795f 6e65  der/videos/my_ne
+0000c710: 775f 666f 6c64 6572 2729 0a20 2020 2022  w_folder').    "
+0000c720: 2222 0a0a 2020 2020 6368 6563 6b5f 6666  ""..    check_ff
+0000c730: 6d70 6567 5f61 7661 696c 6162 6c65 2872  mpeg_available(r
+0000c740: 6169 7365 5f65 7272 6f72 3d54 7275 6529  aise_error=True)
+0000c750: 0a20 2020 2069 6620 6770 7520 616e 6420  .    if gpu and 
+0000c760: 6e6f 7420 6368 6563 6b5f 6e76 6964 6561  not check_nvidea
+0000c770: 5f67 7075 5f61 7661 696c 6162 6c65 2829  _gpu_available()
+0000c780: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+0000c790: 4646 4d50 4547 436f 6465 6347 5055 4572  FFMPEGCodecGPUEr
+0000c7a0: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+0000c7b0: 206d 7367 3d22 4e56 4944 4541 2047 5055   msg="NVIDEA GPU
+0000c7c0: 206e 6f74 2061 7661 696c 6162 6c65 2028   not available (
+0000c7d0: 6173 2065 7661 6c75 6174 6564 2062 7920  as evaluated by 
+0000c7e0: 6e76 6964 6561 2d73 6d69 2072 6574 7572  nvidea-smi retur
+0000c7f0: 6e69 6e67 204e 6f6e 6522 2c0a 2020 2020  ning None",.    
+0000c800: 2020 2020 2020 2020 736f 7572 6365 3d63          source=c
+0000c810: 726f 705f 6d75 6c74 6970 6c65 5f76 6964  rop_multiple_vid
+0000c820: 656f 732e 5f5f 6e61 6d65 5f5f 2c0a 2020  eos.__name__,.  
+0000c830: 2020 2020 2020 290a 2020 2020 6966 206e        ).    if n
+0000c840: 6f74 206f 732e 7061 7468 2e69 7364 6972  ot os.path.isdir
+0000c850: 2864 6972 6563 746f 7279 5f70 6174 6829  (directory_path)
+0000c860: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+0000c870: 4e6f 7444 6972 6563 746f 7279 4572 726f  NotDirectoryErro
+0000c880: 7228 0a20 2020 2020 2020 2020 2020 206d  r(.            m
+0000c890: 7367 3d22 5349 4d42 4120 4552 524f 523a  sg="SIMBA ERROR:
+0000c8a0: 207b 7d20 6973 206e 6f74 2061 2076 616c   {} is not a val
+0000c8b0: 6964 2064 6972 6563 746f 7279 222e 666f  id directory".fo
+0000c8c0: 726d 6174 2864 6972 6563 746f 7279 5f70  rmat(directory_p
+0000c8d0: 6174 6829 2c0a 2020 2020 2020 2020 2020  ath),.          
+0000c8e0: 2020 736f 7572 6365 3d63 726f 705f 6d75    source=crop_mu
+0000c8f0: 6c74 6970 6c65 5f76 6964 656f 732e 5f5f  ltiple_videos.__
+0000c900: 6e61 6d65 5f5f 2c0a 2020 2020 2020 2020  name__,.        
+0000c910: 290a 2020 2020 7669 6465 6f5f 7061 7468  ).    video_path
+0000c920: 7320 3d20 5b5d 0a20 2020 2066 696c 655f  s = [].    file_
+0000c930: 7061 7468 735f 696e 5f66 6f6c 6465 7220  paths_in_folder 
+0000c940: 3d20 5b0a 2020 2020 2020 2020 6620 666f  = [.        f fo
+0000c950: 7220 6620 696e 2067 6c6f 622e 676c 6f62  r f in glob.glob
+0000c960: 2864 6972 6563 746f 7279 5f70 6174 6820  (directory_path 
+0000c970: 2b20 222f 2a22 2920 6966 206f 732e 7061  + "/*") if os.pa
+0000c980: 7468 2e69 7366 696c 6528 6629 0a20 2020  th.isfile(f).   
+0000c990: 205d 0a20 2020 2066 6f72 2066 696c 655f   ].    for file_
+0000c9a0: 7061 7468 2069 6e20 6669 6c65 5f70 6174  path in file_pat
+0000c9b0: 6873 5f69 6e5f 666f 6c64 6572 3a0a 2020  hs_in_folder:.  
+0000c9c0: 2020 2020 2020 5f2c 205f 2c20 6578 7420        _, _, ext 
+0000c9d0: 3d20 6765 745f 666e 5f65 7874 2866 696c  = get_fn_ext(fil
+0000c9e0: 6570 6174 683d 6669 6c65 5f70 6174 6829  epath=file_path)
+0000c9f0: 0a20 2020 2020 2020 2069 6620 6578 742e  .        if ext.
+0000ca00: 6c6f 7765 7228 2920 696e 204f 7074 696f  lower() in Optio
+0000ca10: 6e73 2e41 4c4c 5f56 4944 454f 5f46 4f52  ns.ALL_VIDEO_FOR
+0000ca20: 4d41 545f 4f50 5449 4f4e 532e 7661 6c75  MAT_OPTIONS.valu
+0000ca30: 653a 0a20 2020 2020 2020 2020 2020 2076  e:.            v
+0000ca40: 6964 656f 5f70 6174 6873 2e61 7070 656e  ideo_paths.appen
+0000ca50: 6428 6669 6c65 5f70 6174 6829 0a20 2020  d(file_path).   
+0000ca60: 2069 6620 6c65 6e28 7669 6465 6f5f 7061   if len(video_pa
+0000ca70: 7468 7329 203c 2031 3a0a 2020 2020 2020  ths) < 1:.      
+0000ca80: 2020 7261 6973 6520 4e6f 4669 6c65 7346    raise NoFilesF
+0000ca90: 6f75 6e64 4572 726f 7228 0a20 2020 2020  oundError(.     
+0000caa0: 2020 2020 2020 206d 7367 3d22 5349 4d42         msg="SIMB
+0000cab0: 4120 4552 524f 523a 204e 6f20 6669 6c65  A ERROR: No file
+0000cac0: 7320 7769 7468 202e 6d70 342c 202e 6176  s with .mp4, .av
+0000cad0: 692c 202e 6d6f 762c 202e 666c 7620 6669  i, .mov, .flv fi
+0000cae0: 6c65 2065 6e64 696e 6720 666f 756e 6420  le ending found 
+0000caf0: 696e 2074 6865 207b 7d20 6469 7265 6374  in the {} direct
+0000cb00: 6f72 7922 2e66 6f72 6d61 7428 0a20 2020  ory".format(.   
+0000cb10: 2020 2020 2020 2020 2020 2020 2064 6972               dir
+0000cb20: 6563 746f 7279 5f70 6174 680a 2020 2020  ectory_path.    
+0000cb30: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+0000cb40: 2020 2020 2020 2073 6f75 7263 653d 6372         source=cr
+0000cb50: 6f70 5f6d 756c 7469 706c 655f 7669 6465  op_multiple_vide
+0000cb60: 6f73 2e5f 5f6e 616d 655f 5f2c 0a20 2020  os.__name__,.   
+0000cb70: 2020 2020 2029 0a20 2020 2072 6f69 5f73       ).    roi_s
+0000cb80: 656c 6563 746f 7220 3d20 524f 4953 656c  elector = ROISel
+0000cb90: 6563 746f 7228 7061 7468 3d66 696c 655f  ector(path=file_
+0000cba0: 7061 7468 735f 696e 5f66 6f6c 6465 725b  paths_in_folder[
+0000cbb0: 305d 290a 2020 2020 726f 695f 7365 6c65  0]).    roi_sele
+0000cbc0: 6374 6f72 2e72 756e 2829 0a20 2020 2069  ctor.run().    i
+0000cbd0: 6620 2872 6f69 5f73 656c 6563 746f 722e  f (roi_selector.
+0000cbe0: 7769 6474 6820 3d3d 2030 2061 6e64 2072  width == 0 and r
+0000cbf0: 6f69 5f73 656c 6563 746f 722e 6865 6967  oi_selector.heig
+0000cc00: 6874 203d 3d20 3029 206f 7220 280a 2020  ht == 0) or (.  
+0000cc10: 2020 2020 2020 726f 695f 7365 6c65 6374        roi_select
+0000cc20: 6f72 2e77 6964 7468 0a20 2020 2020 2020  or.width.       
+0000cc30: 202b 2072 6f69 5f73 656c 6563 746f 722e   + roi_selector.
+0000cc40: 6865 6967 6874 0a20 2020 2020 2020 202b  height.        +
+0000cc50: 2072 6f69 5f73 656c 6563 746f 722e 746f   roi_selector.to
+0000cc60: 705f 6c65 6674 5b30 5d0a 2020 2020 2020  p_left[0].      
+0000cc70: 2020 2b20 726f 695f 7365 6c65 6374 6f72    + roi_selector
+0000cc80: 2e74 6f70 5f6c 6566 745b 315d 0a20 2020  .top_left[1].   
+0000cc90: 2020 2020 203d 3d20 300a 2020 2020 293a       == 0.    ):
+0000cca0: 0a20 2020 2020 2020 2072 6169 7365 2043  .        raise C
+0000ccb0: 6f75 6e74 4572 726f 7228 0a20 2020 2020  ountError(.     
+0000ccc0: 2020 2020 2020 206d 7367 3d22 4352 4f50         msg="CROP
+0000ccd0: 2046 4149 4c45 443a 2043 726f 7070 696e   FAILED: Croppin
+0000cce0: 6720 6865 6967 6874 2061 6e64 2077 6964  g height and wid
+0000ccf0: 7468 2061 7265 2062 6f74 6820 302e 2050  th are both 0. P
+0000cd00: 6c65 6173 6520 7472 7920 6167 6169 6e2e  lease try again.
+0000cd10: 222c 0a20 2020 2020 2020 2020 2020 2073  ",.            s
+0000cd20: 6f75 7263 653d 6372 6f70 5f6d 756c 7469  ource=crop_multi
+0000cd30: 706c 655f 7669 6465 6f73 2e5f 5f6e 616d  ple_videos.__nam
+0000cd40: 655f 5f2c 0a20 2020 2020 2020 2029 0a20  e__,.        ). 
+0000cd50: 2020 2069 6620 280a 2020 2020 2020 2020     if (.        
+0000cd60: 2872 6f69 5f73 656c 6563 746f 722e 746f  (roi_selector.to
+0000cd70: 705f 6c65 6674 5b30 5d20 3c20 3029 0a20  p_left[0] < 0). 
+0000cd80: 2020 2020 2020 206f 7220 2872 6f69 5f73         or (roi_s
+0000cd90: 656c 6563 746f 722e 746f 705f 6c65 6674  elector.top_left
+0000cda0: 5b31 5d20 3c20 3029 0a20 2020 2020 2020  [1] < 0).       
+0000cdb0: 206f 7220 2872 6f69 5f73 656c 6563 746f   or (roi_selecto
+0000cdc0: 722e 626f 7474 6f6d 5f72 6967 6874 5b30  r.bottom_right[0
+0000cdd0: 5d20 3c20 3029 0a20 2020 2020 2020 206f  ] < 0).        o
+0000cde0: 7220 2872 6f69 5f73 656c 6563 746f 722e  r (roi_selector.
 0000cdf0: 626f 7474 6f6d 5f72 6967 6874 5b31 5d20  bottom_right[1] 
-0000ce00: 3e20 7669 6465 6f5f 6d65 7461 5f64 6174  > video_meta_dat
-0000ce10: 615b 2268 6569 6768 7422 5d0a 2020 2020  a["height"].    
-0000ce20: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
-0000ce30: 2020 2072 6169 7365 2049 6e76 616c 6964     raise Invalid
-0000ce40: 496e 7075 7445 7272 6f72 280a 2020 2020  InputError(.    
-0000ce50: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
-0000ce60: 6627 4361 6e6e 6f74 2063 726f 7020 7669  f'Cannot crop vi
-0000ce70: 6465 6f20 7b66 696c 655f 6e61 6d65 7d20  deo {file_name} 
-0000ce80: 6f66 2073 697a 6520 7b76 6964 656f 5f6d  of size {video_m
-0000ce90: 6574 615f 6461 7461 5b22 7265 736f 6c75  eta_data["resolu
-0000cea0: 7469 6f6e 5f73 7472 225d 7d20 6174 206c  tion_str"]} at l
-0000ceb0: 6f63 6174 696f 6e20 746f 7020 6c65 6674  ocation top left
-0000cec0: 3a20 7b72 6f69 5f73 656c 6563 746f 722e  : {roi_selector.
-0000ced0: 746f 705f 6c65 6674 7d2c 2062 6f74 746f  top_left}, botto
-0000cee0: 6d20 7269 6768 743a 207b 726f 695f 7365  m right: {roi_se
-0000cef0: 6c65 6374 6f72 2e62 6f74 746f 6d5f 7269  lector.bottom_ri
-0000cf00: 6768 747d 272c 0a20 2020 2020 2020 2020  ght}',.         
-0000cf10: 2020 2020 2020 2073 6f75 7263 653d 6372         source=cr
-0000cf20: 6f70 5f6d 756c 7469 706c 655f 7669 6465  op_multiple_vide
-0000cf30: 6f73 2e5f 5f6e 616d 655f 5f2c 0a20 2020  os.__name__,.   
-0000cf40: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0000cf50: 2020 2073 6176 655f 7061 7468 203d 206f     save_path = o
-0000cf60: 732e 7061 7468 2e6a 6f69 6e28 6f75 7470  s.path.join(outp
-0000cf70: 7574 5f70 6174 682c 2066 696c 655f 6e61  ut_path, file_na
-0000cf80: 6d65 202b 2022 5f63 726f 7070 6564 2e6d  me + "_cropped.m
-0000cf90: 7034 2229 0a20 2020 2020 2020 2069 6620  p4").        if 
-0000cfa0: 6770 753a 0a20 2020 2020 2020 2020 2020  gpu:.           
-0000cfb0: 2063 6f6d 6d61 6e64 203d 2066 2766 666d   command = f'ffm
-0000cfc0: 7065 6720 2d68 7761 6363 656c 2061 7574  peg -hwaccel aut
-0000cfd0: 6f20 2d63 3a76 2068 3236 345f 6375 7669  o -c:v h264_cuvi
-0000cfe0: 6420 2d69 2022 7b66 696c 655f 7061 7468  d -i "{file_path
-0000cff0: 7d22 202d 7666 2022 6372 6f70 3d7b 726f  }" -vf "crop={ro
-0000d000: 695f 7365 6c65 6374 6f72 2e77 6964 7468  i_selector.width
-0000d010: 7d3a 7b72 6f69 5f73 656c 6563 746f 722e  }:{roi_selector.
-0000d020: 6865 6967 6874 7d3a 7b72 6f69 5f73 656c  height}:{roi_sel
-0000d030: 6563 746f 722e 746f 705f 6c65 6674 5b30  ector.top_left[0
-0000d040: 5d7d 3a7b 726f 695f 7365 6c65 6374 6f72  ]}:{roi_selector
-0000d050: 2e74 6f70 5f6c 6566 745b 315d 7d22 202d  .top_left[1]}" -
-0000d060: 633a 7620 6832 3634 5f6e 7665 6e63 202d  c:v h264_nvenc -
-0000d070: 633a 6120 636f 7079 2022 7b73 6176 655f  c:a copy "{save_
-0000d080: 7061 7468 7d22 202d 7927 0a20 2020 2020  path}" -y'.     
-0000d090: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0000d0a0: 2020 2020 2063 6f6d 6d61 6e64 203d 2066       command = f
-0000d0b0: 2766 666d 7065 6720 2d69 2022 7b66 696c  'ffmpeg -i "{fil
-0000d0c0: 655f 7061 7468 7d22 202d 7666 2022 6372  e_path}" -vf "cr
-0000d0d0: 6f70 3d7b 726f 695f 7365 6c65 6374 6f72  op={roi_selector
-0000d0e0: 2e77 6964 7468 7d3a 7b72 6f69 5f73 656c  .width}:{roi_sel
-0000d0f0: 6563 746f 722e 6865 6967 6874 7d3a 7b72  ector.height}:{r
-0000d100: 6f69 5f73 656c 6563 746f 722e 746f 705f  oi_selector.top_
-0000d110: 6c65 6674 5b30 5d7d 3a7b 726f 695f 7365  left[0]}:{roi_se
-0000d120: 6c65 6374 6f72 2e74 6f70 5f6c 6566 745b  lector.top_left[
-0000d130: 315d 7d22 202d 633a 7620 6c69 6278 3236  1]}" -c:v libx26
-0000d140: 3420 2d63 7266 2031 3720 2d63 3a61 2063  4 -crf 17 -c:a c
-0000d150: 6f70 7920 227b 7361 7665 5f70 6174 687d  opy "{save_path}
-0000d160: 2220 2d79 270a 2020 2020 2020 2020 7375  " -y'.        su
-0000d170: 6270 726f 6365 7373 2e63 616c 6c28 636f  bprocess.call(co
-0000d180: 6d6d 616e 642c 2073 6865 6c6c 3d54 7275  mmand, shell=Tru
-0000d190: 6529 0a20 2020 2020 2020 2076 6964 656f  e).        video
-0000d1a0: 5f74 696d 6572 2e73 746f 705f 7469 6d65  _timer.stop_time
-0000d1b0: 7228 290a 2020 2020 2020 2020 7072 696e  r().        prin
-0000d1c0: 7428 0a20 2020 2020 2020 2020 2020 2066  t(.            f
-0000d1d0: 2256 6964 656f 207b 6669 6c65 5f6e 616d  "Video {file_nam
-0000d1e0: 657d 2063 726f 7070 6564 2028 5669 6465  e} cropped (Vide
-0000d1f0: 6f20 7b66 696c 655f 636e 742b 317d 2f7b  o {file_cnt+1}/{
-0000d200: 6c65 6e28 7669 6465 6f5f 7061 7468 7329  len(video_paths)
-0000d210: 7d2c 2065 6c61 7073 6564 2074 696d 653a  }, elapsed time:
-0000d220: 207b 7669 6465 6f5f 7469 6d65 722e 656c   {video_timer.el
-0000d230: 6170 7365 645f 7469 6d65 5f73 7472 7d29  apsed_time_str})
-0000d240: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
-0000d250: 7469 6d65 722e 7374 6f70 5f74 696d 6572  timer.stop_timer
-0000d260: 2829 0a20 2020 2073 7464 6f75 745f 7375  ().    stdout_su
-0000d270: 6363 6573 7328 0a20 2020 2020 2020 206d  ccess(.        m
-0000d280: 7367 3d66 227b 7374 7228 6c65 6e28 7669  sg=f"{str(len(vi
-0000d290: 6465 6f5f 7061 7468 7329 297d 2076 6964  deo_paths))} vid
-0000d2a0: 656f 7320 6372 6f70 7065 6420 616e 6420  eos cropped and 
-0000d2b0: 7361 7665 6420 696e 207b 6469 7265 6374  saved in {direct
-0000d2c0: 6f72 795f 7061 7468 7d20 6469 7265 6374  ory_path} direct
-0000d2d0: 6f72 7922 2c0a 2020 2020 2020 2020 656c  ory",.        el
-0000d2e0: 6170 7365 645f 7469 6d65 3d74 696d 6572  apsed_time=timer
-0000d2f0: 2e65 6c61 7073 6564 5f74 696d 655f 7374  .elapsed_time_st
-0000d300: 722c 0a20 2020 2020 2020 2073 6f75 7263  r,.        sourc
-0000d310: 653d 6372 6f70 5f6d 756c 7469 706c 655f  e=crop_multiple_
-0000d320: 7669 6465 6f73 2e5f 5f6e 616d 655f 5f2c  videos.__name__,
-0000d330: 0a20 2020 2029 0a0a 0a23 205f 203d 2063  .    )...# _ = c
-0000d340: 726f 705f 6d75 6c74 6970 6c65 5f76 6964  rop_multiple_vid
-0000d350: 656f 7328 6469 7265 6374 6f72 795f 7061  eos(directory_pa
-0000d360: 7468 3d27 2f55 7365 7273 2f73 696d 6f6e  th='/Users/simon
-0000d370: 2f44 6573 6b74 6f70 2f65 6e76 732f 7472  /Desktop/envs/tr
-0000d380: 6f75 626c 6573 686f 6f74 696e 672f 7477  oubleshooting/tw
-0000d390: 6f5f 626c 6163 6b5f 616e 696d 616c 735f  o_black_animals_
-0000d3a0: 3134 6270 2f76 6964 656f 7327 2c20 6f75  14bp/videos', ou
-0000d3b0: 7470 7574 5f70 6174 683d 272f 5573 6572  tput_path='/User
-0000d3c0: 732f 7369 6d6f 6e2f 4465 736b 746f 702f  s/simon/Desktop/
-0000d3d0: 656e 7673 2f74 726f 7562 6c65 7368 6f6f  envs/troubleshoo
-0000d3e0: 7469 6e67 2f74 776f 5f62 6c61 636b 5f61  ting/two_black_a
-0000d3f0: 6e69 6d61 6c73 5f31 3462 702f 7465 7374  nimals_14bp/test
-0000d400: 2f74 6573 7427 290a 0a0a 6465 6620 6672  /test')...def fr
-0000d410: 616d 6573 5f74 6f5f 6d6f 7669 6528 0a20  ames_to_movie(. 
-0000d420: 2020 2064 6972 6563 746f 7279 3a20 556e     directory: Un
-0000d430: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
-0000d440: 4c69 6b65 5d2c 0a20 2020 2066 7073 3a20  Like],.    fps: 
-0000d450: 696e 742c 0a20 2020 2062 6974 7261 7465  int,.    bitrate
-0000d460: 3a20 696e 742c 0a20 2020 2069 6d67 5f66  : int,.    img_f
-0000d470: 6f72 6d61 743a 2073 7472 2c0a 2020 2020  ormat: str,.    
-0000d480: 6770 753a 204f 7074 696f 6e61 6c5b 626f  gpu: Optional[bo
-0000d490: 6f6c 5d20 3d20 4661 6c73 652c 0a29 202d  ol] = False,.) -
-0000d4a0: 3e20 4e6f 6e65 3a0a 2020 2020 2222 220a  > None:.    """.
-0000d4b0: 2020 2020 4d65 7267 6520 616c 6c20 696d      Merge all im
-0000d4c0: 6167 6520 6669 6c65 7320 696e 2061 2066  age files in a f
-0000d4d0: 6f6c 6465 7220 746f 2061 206d 7034 2076  older to a mp4 v
-0000d4e0: 6964 656f 2066 696c 652e 2056 6964 656f  ideo file. Video
-0000d4f0: 2066 696c 6520 6973 2073 746f 7265 6420   file is stored 
-0000d500: 696e 2074 6865 2073 616d 6520 6469 7265  in the same dire
-0000d510: 6374 6f72 7920 6173 2074 6865 0a20 2020  ctory as the.   
-0000d520: 2069 6e70 7574 2064 6972 6563 746f 7279   input directory
-0000d530: 2073 7562 2d66 6f6c 6465 722e 0a0a 2020   sub-folder...  
-0000d540: 2020 2e2e 206e 6f74 653a 3a0a 2020 2020    .. note::.    
-0000d550: 2020 2054 6865 2049 6d61 6765 2066 696c     The Image fil
-0000d560: 6573 2068 6176 6520 746f 2068 6176 6520  es have to have 
-0000d570: 6f72 6465 7265 6420 6e75 6d65 7269 6361  ordered numerica
-0000d580: 6c20 6e61 6d65 7320 652e 672e 2c20 6060  l names e.g., ``
-0000d590: 312e 706e 6760 602c 2060 6032 2e70 6e67  1.png``, ``2.png
-0000d5a0: 6060 2065 7463 2e2e 2e0a 0a20 2020 203a  `` etc.....    :
-0000d5b0: 7061 7261 6d65 7465 7220 7374 7220 6469  parameter str di
-0000d5c0: 7265 6374 6f72 793a 2044 6972 6563 746f  rectory: Directo
-0000d5d0: 7279 2063 6f6e 7461 696e 696e 6720 7468  ry containing th
-0000d5e0: 6520 696d 6167 6573 2e0a 2020 2020 3a70  e images..    :p
-0000d5f0: 6172 616d 6574 6572 2069 6e74 2066 7073  arameter int fps
-0000d600: 3a20 5468 6520 6672 616d 6520 7261 7465  : The frame rate
-0000d610: 206f 6620 7468 6520 6f75 7470 7574 2076   of the output v
-0000d620: 6964 656f 2e0a 2020 2020 3a70 6172 616d  ideo..    :param
-0000d630: 6574 6572 2069 6e74 2062 6974 7261 7465  eter int bitrate
-0000d640: 3a20 5468 6520 6269 7472 6174 6520 6f66  : The bitrate of
-0000d650: 2074 6865 206f 7574 7075 7420 7669 6465   the output vide
-0000d660: 6f20 2865 2e67 2e2c 2033 3230 3030 292e  o (e.g., 32000).
-0000d670: 0a20 2020 203a 7061 7261 6d65 7465 7220  .    :parameter 
-0000d680: 7374 7220 696d 675f 666f 726d 6174 3a20  str img_format: 
-0000d690: 5468 6520 666f 726d 6174 206f 6620 7468  The format of th
-0000d6a0: 6520 696e 7075 7420 696d 6167 6520 6669  e input image fi
-0000d6b0: 6c65 7320 2865 2e67 2e2c 2060 6070 6e67  les (e.g., ``png
-0000d6c0: 6060 292e 0a20 2020 203a 7061 7261 6d65  ``)..    :parame
-0000d6d0: 7465 7220 4f70 7469 6f6e 616c 5b62 6f6f  ter Optional[boo
-0000d6e0: 6c5d 2067 7075 3a20 4966 2054 7275 652c  l] gpu: If True,
-0000d6f0: 2075 7365 204e 5649 4445 4120 4750 5520   use NVIDEA GPU 
-0000d700: 636f 6465 6373 2e20 4465 6661 756c 7420  codecs. Default 
-0000d710: 4661 6c73 652e 0a0a 2020 2020 3a65 7861  False...    :exa
-0000d720: 6d70 6c65 3a0a 2020 2020 3e3e 3e20 5f20  mple:.    >>> _ 
-0000d730: 3d20 6672 616d 6573 5f74 6f5f 6d6f 7669  = frames_to_movi
-0000d740: 6528 6469 7265 6374 6f72 795f 7061 7468  e(directory_path
-0000d750: 3d27 7072 6f6a 6563 745f 666f 6c64 6572  ='project_folder
-0000d760: 2f76 6964 656f 5f69 6d67 272c 2066 7073  /video_img', fps
-0000d770: 3d31 352c 2062 6974 7261 7465 3d33 3230  =15, bitrate=320
-0000d780: 3030 2c20 696d 675f 666f 726d 6174 3d27  00, img_format='
-0000d790: 706e 6727 290a 2020 2020 2222 220a 0a20  png').    """.. 
-0000d7a0: 2020 2063 6865 636b 5f66 666d 7065 675f     check_ffmpeg_
-0000d7b0: 6176 6169 6c61 626c 6528 7261 6973 655f  available(raise_
-0000d7c0: 6572 726f 723d 5472 7565 290a 2020 2020  error=True).    
-0000d7d0: 6966 2067 7075 2061 6e64 206e 6f74 2063  if gpu and not c
-0000d7e0: 6865 636b 5f6e 7669 6465 615f 6770 755f  heck_nvidea_gpu_
-0000d7f0: 6176 6169 6c61 626c 6528 293a 0a20 2020  available():.   
-0000d800: 2020 2020 2072 6169 7365 2046 464d 5045       raise FFMPE
-0000d810: 4743 6f64 6563 4750 5545 7272 6f72 280a  GCodecGPUError(.
-0000d820: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
-0000d830: 224e 5649 4445 4120 4750 5520 6e6f 7420  "NVIDEA GPU not 
-0000d840: 6176 6169 6c61 626c 6520 2861 7320 6576  available (as ev
-0000d850: 616c 7561 7465 6420 6279 206e 7669 6465  aluated by nvide
-0000d860: 612d 736d 6920 7265 7475 726e 696e 6720  a-smi returning 
-0000d870: 4e6f 6e65 222c 0a20 2020 2020 2020 2020  None",.         
-0000d880: 2020 2073 6f75 7263 653d 6672 616d 6573     source=frames
-0000d890: 5f74 6f5f 6d6f 7669 652e 5f5f 6e61 6d65  _to_movie.__name
-0000d8a0: 5f5f 2c0a 2020 2020 2020 2020 290a 2020  __,.        ).  
-0000d8b0: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
-0000d8c0: 2e69 7364 6972 2864 6972 6563 746f 7279  .isdir(directory
-0000d8d0: 293a 0a20 2020 2020 2020 2072 6169 7365  ):.        raise
-0000d8e0: 204e 6f74 4469 7265 6374 6f72 7945 7272   NotDirectoryErr
-0000d8f0: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
-0000d900: 6d73 673d 2253 494d 4241 2045 5252 4f52  msg="SIMBA ERROR
-0000d910: 3a20 7b7d 2069 7320 6e6f 7420 6120 7661  : {} is not a va
-0000d920: 6c69 6420 6469 7265 6374 6f72 7922 2e66  lid directory".f
-0000d930: 6f72 6d61 7428 6469 7265 6374 6f72 7929  ormat(directory)
-0000d940: 2c0a 2020 2020 2020 2020 2020 2020 736f  ,.            so
-0000d950: 7572 6365 3d66 7261 6d65 735f 746f 5f6d  urce=frames_to_m
-0000d960: 6f76 6965 2e5f 5f6e 616d 655f 5f2c 0a20  ovie.__name__,. 
-0000d970: 2020 2020 2020 2029 0a20 2020 2063 6865         ).    che
-0000d980: 636b 5f69 6e74 286e 616d 653d 2246 5053  ck_int(name="FPS
-0000d990: 222c 2076 616c 7565 3d66 7073 2c20 6d69  ", value=fps, mi
-0000d9a0: 6e5f 7661 6c75 653d 3129 0a20 2020 2063  n_value=1).    c
-0000d9b0: 6865 636b 5f69 6e74 286e 616d 653d 2242  heck_int(name="B
-0000d9c0: 4954 5241 5445 222c 2076 616c 7565 3d62  ITRATE", value=b
-0000d9d0: 6974 7261 7465 290a 2020 2020 6669 6c65  itrate).    file
-0000d9e0: 5f70 6174 6873 5f69 6e5f 666f 6c64 6572  _paths_in_folder
-0000d9f0: 203d 205b 6620 666f 7220 6620 696e 2067   = [f for f in g
-0000da00: 6c6f 622e 676c 6f62 2864 6972 6563 746f  lob.glob(directo
-0000da10: 7279 202b 2022 2f2a 2229 2069 6620 6f73  ry + "/*") if os
-0000da20: 2e70 6174 682e 6973 6669 6c65 2866 295d  .path.isfile(f)]
-0000da30: 0a20 2020 2069 6d67 5f70 6174 6873 5f69  .    img_paths_i
-0000da40: 6e5f 666f 6c64 6572 203d 205b 0a20 2020  n_folder = [.   
-0000da50: 2020 2020 2078 2066 6f72 2078 2069 6e20       x for x in 
-0000da60: 6669 6c65 5f70 6174 6873 5f69 6e5f 666f  file_paths_in_fo
-0000da70: 6c64 6572 2069 6620 5061 7468 2878 292e  lder if Path(x).
-0000da80: 7375 6666 6978 5b31 3a5d 203d 3d20 696d  suffix[1:] == im
-0000da90: 675f 666f 726d 6174 0a20 2020 205d 0a20  g_format.    ]. 
-0000daa0: 2020 2069 6620 6c65 6e28 696d 675f 7061     if len(img_pa
-0000dab0: 7468 735f 696e 5f66 6f6c 6465 7229 203c  ths_in_folder) <
-0000dac0: 2031 3a0a 2020 2020 2020 2020 7261 6973   1:.        rais
-0000dad0: 6520 4e6f 4669 6c65 7346 6f75 6e64 4572  e NoFilesFoundEr
-0000dae0: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
-0000daf0: 206d 7367 3d22 5349 4d42 4120 4552 524f   msg="SIMBA ERRO
-0000db00: 523a 205a 6572 6f20 696d 6167 6573 206f  R: Zero images o
-0000db10: 6620 6669 6c65 2d74 7970 6520 7b7d 2066  f file-type {} f
-0000db20: 6f75 6e64 2069 6e20 7b7d 2064 6972 6563  ound in {} direc
-0000db30: 746f 7279 222e 666f 726d 6174 280a 2020  tory".format(.  
-0000db40: 2020 2020 2020 2020 2020 2020 2020 696d                im
-0000db50: 675f 666f 726d 6174 2c20 6469 7265 6374  g_format, direct
-0000db60: 6f72 790a 2020 2020 2020 2020 2020 2020  ory.            
-0000db70: 292c 0a20 2020 2020 2020 2020 2020 2073  ),.            s
-0000db80: 6f75 7263 653d 6672 616d 6573 5f74 6f5f  ource=frames_to_
-0000db90: 6d6f 7669 652e 5f5f 6e61 6d65 5f5f 2c0a  movie.__name__,.
-0000dba0: 2020 2020 2020 2020 290a 2020 2020 696d          ).    im
-0000dbb0: 6720 3d20 6376 322e 696d 7265 6164 2869  g = cv2.imread(i
-0000dbc0: 6d67 5f70 6174 6873 5f69 6e5f 666f 6c64  mg_paths_in_fold
-0000dbd0: 6572 5b30 5d29 0a20 2020 2069 6d67 5f68  er[0]).    img_h
-0000dbe0: 2c20 696d 675f 7720 3d20 696e 7428 696d  , img_w = int(im
-0000dbf0: 672e 7368 6170 655b 305d 292c 2069 6e74  g.shape[0]), int
-0000dc00: 2869 6d67 2e73 6861 7065 5b31 5d29 0a20  (img.shape[1]). 
-0000dc10: 2020 2066 666d 7065 675f 666e 203d 206f     ffmpeg_fn = o
-0000dc20: 732e 7061 7468 2e6a 6f69 6e28 6469 7265  s.path.join(dire
-0000dc30: 6374 6f72 792c 2022 2564 2e7b 7d22 2e66  ctory, "%d.{}".f
-0000dc40: 6f72 6d61 7428 696d 675f 666f 726d 6174  ormat(img_format
-0000dc50: 2929 0a20 2020 2073 6176 655f 7061 7468  )).    save_path
-0000dc60: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-0000dc70: 0a20 2020 2020 2020 206f 732e 7061 7468  .        os.path
-0000dc80: 2e64 6972 6e61 6d65 2864 6972 6563 746f  .dirname(directo
-0000dc90: 7279 292c 206f 732e 7061 7468 2e62 6173  ry), os.path.bas
-0000dca0: 656e 616d 6528 6469 7265 6374 6f72 7929  ename(directory)
-0000dcb0: 202b 2022 2e6d 7034 220a 2020 2020 290a   + ".mp4".    ).
-0000dcc0: 2020 2020 6966 2067 7075 3a0a 2020 2020      if gpu:.    
-0000dcd0: 2020 2020 636f 6d6d 616e 6420 3d20 6627      command = f'
-0000dce0: 6666 6d70 6567 202d 7920 2d72 207b 6670  ffmpeg -y -r {fp
-0000dcf0: 737d 202d 6620 696d 6167 6532 202d 7320  s} -f image2 -s 
-0000dd00: 7b69 6d67 5f68 7d78 7b69 6d67 5f77 7d20  {img_h}x{img_w} 
-0000dd10: 2d69 2022 7b66 666d 7065 675f 666e 7d22  -i "{ffmpeg_fn}"
-0000dd20: 202d 633a 7620 6832 3634 5f6e 7665 6e63   -c:v h264_nvenc
-0000dd30: 202d 623a 7620 7b62 6974 7261 7465 7d6b   -b:v {bitrate}k
-0000dd40: 2022 7b73 6176 655f 7061 7468 7d22 202d   "{save_path}" -
-0000dd50: 7927 0a20 2020 2065 6c73 653a 0a20 2020  y'.    else:.   
-0000dd60: 2020 2020 2063 6f6d 6d61 6e64 203d 2066       command = f
-0000dd70: 2766 666d 7065 6720 2d79 202d 7220 7b66  'ffmpeg -y -r {f
-0000dd80: 7073 7d20 2d66 2069 6d61 6765 3220 2d73  ps} -f image2 -s
-0000dd90: 207b 696d 675f 687d 787b 696d 675f 777d   {img_h}x{img_w}
-0000dda0: 202d 6920 227b 6666 6d70 6567 5f66 6e7d   -i "{ffmpeg_fn}
-0000ddb0: 2220 2d76 636f 6465 6320 6c69 6278 3236  " -vcodec libx26
-0000ddc0: 3420 2d62 207b 6269 7472 6174 657d 6b20  4 -b {bitrate}k 
-0000ddd0: 227b 7361 7665 5f70 6174 687d 2220 2d79  "{save_path}" -y
-0000dde0: 270a 2020 2020 7072 696e 7428 0a20 2020  '.    print(.   
-0000ddf0: 2020 2020 2066 2243 7265 6174 696e 6720       f"Creating 
-0000de00: 7b6f 732e 7061 7468 2e62 6173 656e 616d  {os.path.basenam
-0000de10: 6528 7361 7665 5f70 6174 6829 7d20 6672  e(save_path)} fr
-0000de20: 6f6d 207b 6c65 6e28 696d 675f 7061 7468  om {len(img_path
-0000de30: 735f 696e 5f66 6f6c 6465 7229 7d20 696d  s_in_folder)} im
-0000de40: 6167 6573 2e2e 2e22 0a20 2020 2029 0a20  ages...".    ). 
-0000de50: 2020 2073 7562 7072 6f63 6573 732e 6361     subprocess.ca
-0000de60: 6c6c 2863 6f6d 6d61 6e64 2c20 7368 656c  ll(command, shel
-0000de70: 6c3d 5472 7565 290a 2020 2020 7374 646f  l=True).    stdo
-0000de80: 7574 5f73 7563 6365 7373 286d 7367 3d66  ut_success(msg=f
-0000de90: 2256 6964 656f 2063 7265 6174 6564 2061  "Video created a
-0000dea0: 7420 7b73 6176 655f 7061 7468 7d22 2c20  t {save_path}", 
-0000deb0: 736f 7572 6365 3d66 7261 6d65 735f 746f  source=frames_to
-0000dec0: 5f6d 6f76 6965 2e5f 5f6e 616d 655f 5f29  _movie.__name__)
-0000ded0: 0a0a 0a23 205f 203d 2066 7261 6d65 735f  ...# _ = frames_
-0000dee0: 746f 5f6d 6f76 6965 2864 6972 6563 746f  to_movie(directo
-0000def0: 7279 3d27 2f55 7365 7273 2f73 696d 6f6e  ry='/Users/simon
-0000df00: 2f44 6573 6b74 6f70 2f65 6e76 732f 7369  /Desktop/envs/si
-0000df10: 6d62 612f 7472 6f75 626c 6573 686f 6f74  mba/troubleshoot
-0000df20: 696e 672f 6d6f 7573 655f 6f70 656e 5f66  ing/mouse_open_f
-0000df30: 6965 6c64 2f70 726f 6a65 6374 5f66 6f6c  ield/project_fol
-0000df40: 6465 722f 7669 6465 6f73 2f53 495f 4441  der/videos/SI_DA
-0000df50: 5933 5f33 3038 5f43 4431 5f50 5245 5345  Y3_308_CD1_PRESE
-0000df60: 4e54 5f64 6f77 6e73 616d 706c 6564 272c  NT_downsampled',
-0000df70: 2066 7073 3d31 352c 2062 6974 7261 7465   fps=15, bitrate
-0000df80: 3d33 3230 3030 2c20 696d 675f 666f 726d  =32000, img_form
-0000df90: 6174 3d27 706e 6727 290a 0a0a 6465 6620  at='png')...def 
-0000dfa0: 7669 6465 6f5f 636f 6e63 6174 656e 6174  video_concatenat
-0000dfb0: 6f72 280a 2020 2020 7669 6465 6f5f 6f6e  or(.    video_on
-0000dfc0: 655f 7061 7468 3a20 556e 696f 6e5b 7374  e_path: Union[st
-0000dfd0: 722c 206f 732e 5061 7468 4c69 6b65 5d2c  r, os.PathLike],
-0000dfe0: 0a20 2020 2076 6964 656f 5f74 776f 5f70  .    video_two_p
-0000dff0: 6174 683a 2055 6e69 6f6e 5b73 7472 2c20  ath: Union[str, 
-0000e000: 6f73 2e50 6174 684c 696b 655d 2c0a 2020  os.PathLike],.  
-0000e010: 2020 7265 736f 6c75 7469 6f6e 3a20 556e    resolution: Un
-0000e020: 696f 6e5b 696e 742c 2073 7472 5d2c 0a20  ion[int, str],. 
-0000e030: 2020 2068 6f72 697a 6f6e 7461 6c3a 2062     horizontal: b
-0000e040: 6f6f 6c2c 0a20 2020 2067 7075 3a20 4f70  ool,.    gpu: Op
-0000e050: 7469 6f6e 616c 5b62 6f6f 6c5d 203d 2046  tional[bool] = F
-0000e060: 616c 7365 2c0a 2920 2d3e 204e 6f6e 653a  alse,.) -> None:
-0000e070: 0a20 2020 2022 2222 0a20 2020 2043 6f6e  .    """.    Con
-0000e080: 6361 7465 6e61 7465 2074 776f 2076 6964  catenate two vid
-0000e090: 656f 7320 746f 2061 2073 696e 676c 6520  eos to a single 
-0000e0a0: 7669 6465 6f0a 0a20 2020 203a 7061 7261  video..    :para
-0000e0b0: 6d20 7374 7220 7669 6465 6f5f 6f6e 655f  m str video_one_
-0000e0c0: 7061 7468 3a20 5061 7468 2074 6f20 7468  path: Path to th
-0000e0d0: 6520 6669 7273 7420 7669 6465 6f20 696e  e first video in
-0000e0e0: 2074 6865 2063 6f6e 6361 7465 6e61 7465   the concatenate
-0000e0f0: 6420 7669 6465 6f0a 2020 2020 3a70 6172  d video.    :par
-0000e100: 616d 2073 7472 2076 6964 656f 5f74 776f  am str video_two
-0000e110: 5f70 6174 683a 2050 6174 6820 746f 2074  _path: Path to t
-0000e120: 6865 2073 6563 6f6e 6420 7669 6465 6f20  he second video 
-0000e130: 696e 2074 6865 2063 6f6e 6361 7465 6e61  in the concatena
-0000e140: 7465 6420 7669 6465 6f0a 2020 2020 3a70  ted video.    :p
-0000e150: 6172 616d 2069 6e74 206f 7220 7374 7220  aram int or str 
-0000e160: 7265 736f 6c75 7469 6f6e 3a20 4966 2073  resolution: If s
-0000e170: 7472 2c20 7468 656e 2074 6865 206e 616d  tr, then the nam
-0000e180: 6520 6f66 2074 6865 2076 6964 656f 2077  e of the video w
-0000e190: 6869 6368 2072 6573 6f6c 7574 696f 6e20  hich resolution 
-0000e1a0: 796f 7520 7761 6e74 2074 6f20 7265 7461  you want to reta
-0000e1b0: 696e 2e20 452e 672e 2c20 6056 6964 656f  in. E.g., `Video
-0000e1c0: 5f31 602e 2045 6c73 6520 696e 742c 2072  _1`. Else int, r
-0000e1d0: 6570 7265 7365 6e74 696e 6720 7468 6520  epresenting the 
-0000e1e0: 7669 6465 6f20 7769 6474 6820 2869 6620  video width (if 
-0000e1f0: 7665 7274 6963 616c 2063 6f6e 6361 7429  vertical concat)
-0000e200: 206f 7220 6865 6967 6874 2028 6966 2068   or height (if h
-0000e210: 6f72 697a 6f6e 7461 6c20 636f 6e63 6174  orizontal concat
-0000e220: 292e 2041 7370 6563 7420 7261 696f 2077  ). Aspect raio w
-0000e230: 696c 6c20 6265 2072 6574 6169 6e65 642e  ill be retained.
-0000e240: 0a20 2020 203a 7061 7261 6d20 686f 7269  .    :param hori
-0000e250: 7a6f 6e74 616c 3a20 4966 2074 7275 652c  zontal: If true,
-0000e260: 2074 6865 6e20 686f 7269 7a6f 6e74 616c   then horizontal
-0000e270: 2063 6f6e 6361 7465 6e61 7469 6f6e 2e20   concatenation. 
-0000e280: 456c 7365 2076 6572 7469 6361 6c20 636f  Else vertical co
-0000e290: 6e63 6174 656e 6174 696f 6e2e 0a20 2020  ncatenation..   
-0000e2a0: 203a 7061 7261 6d65 7465 7220 4f70 7469   :parameter Opti
-0000e2b0: 6f6e 616c 5b62 6f6f 6c5d 2067 7075 3a20  onal[bool] gpu: 
-0000e2c0: 4966 2054 7275 652c 2075 7365 204e 5649  If True, use NVI
-0000e2d0: 4445 4120 4750 5520 636f 6465 6373 2e20  DEA GPU codecs. 
-0000e2e0: 4465 6661 756c 7420 4661 6c73 652e 0a0a  Default False...
-0000e2f0: 2020 2020 3a65 7861 6d70 6c65 3a0a 2020      :example:.  
-0000e300: 2020 3e3e 3e20 7669 6465 6f5f 636f 6e63    >>> video_conc
-0000e310: 6174 656e 6174 6f72 2876 6964 656f 5f6f  atenator(video_o
-0000e320: 6e65 5f70 6174 683d 2770 726f 6a65 6374  ne_path='project
-0000e330: 5f66 6f6c 6465 722f 7669 6465 6f73 2f56  _folder/videos/V
-0000e340: 6964 656f 5f31 2e6d 7034 272c 2076 6964  ideo_1.mp4', vid
-0000e350: 656f 5f74 776f 5f70 6174 683d 2770 726f  eo_two_path='pro
-0000e360: 6a65 6374 5f66 6f6c 6465 722f 7669 6465  ject_folder/vide
-0000e370: 6f73 2f56 6964 656f 5f32 2e6d 7034 272c  os/Video_2.mp4',
-0000e380: 2072 6573 6f6c 7574 696f 6e3d 3830 302c   resolution=800,
-0000e390: 2068 6f72 697a 6f6e 7461 6c3d 5472 7565   horizontal=True
-0000e3a0: 290a 2020 2020 2222 220a 0a20 2020 2069  ).    """..    i
-0000e3b0: 6620 6770 7520 616e 6420 6e6f 7420 6368  f gpu and not ch
-0000e3c0: 6563 6b5f 6e76 6964 6561 5f67 7075 5f61  eck_nvidea_gpu_a
-0000e3d0: 7661 696c 6162 6c65 2829 3a0a 2020 2020  vailable():.    
-0000e3e0: 2020 2020 7261 6973 6520 4646 4d50 4547      raise FFMPEG
-0000e3f0: 436f 6465 6347 5055 4572 726f 7228 0a20  CodecGPUError(. 
-0000e400: 2020 2020 2020 2020 2020 206d 7367 3d22             msg="
-0000e410: 4e56 4944 4541 2047 5055 206e 6f74 2061  NVIDEA GPU not a
-0000e420: 7661 696c 6162 6c65 2028 6173 2065 7661  vailable (as eva
-0000e430: 6c75 6174 6564 2062 7920 6e76 6964 6561  luated by nvidea
-0000e440: 2d73 6d69 2072 6574 7572 6e69 6e67 204e  -smi returning N
-0000e450: 6f6e 6522 2c0a 2020 2020 2020 2020 2020  one",.          
-0000e460: 2020 736f 7572 6365 3d76 6964 656f 5f63    source=video_c
-0000e470: 6f6e 6361 7465 6e61 746f 722e 5f5f 6e61  oncatenator.__na
-0000e480: 6d65 5f5f 2c0a 2020 2020 2020 2020 290a  me__,.        ).
-0000e490: 2020 2020 6966 206e 6f74 2063 6865 636b      if not check
-0000e4a0: 5f66 666d 7065 675f 6176 6169 6c61 626c  _ffmpeg_availabl
-0000e4b0: 6528 293a 0a20 2020 2020 2020 2072 6169  e():.        rai
-0000e4c0: 7365 2046 464d 5045 474e 6f74 466f 756e  se FFMPEGNotFoun
-0000e4d0: 6445 7272 6f72 280a 2020 2020 2020 2020  dError(.        
-0000e4e0: 2020 2020 6d73 673d 2246 464d 5045 4720      msg="FFMPEG 
-0000e4f0: 6e6f 7420 666f 756e 6420 6f6e 2074 6865  not found on the
-0000e500: 2063 6f6d 7075 7465 722e 2049 6e73 7461   computer. Insta
-0000e510: 6c6c 2046 464d 5045 4720 746f 2075 7365  ll FFMPEG to use
-0000e520: 2074 6865 2063 6f6e 6361 7465 6e61 7469   the concatenati
-0000e530: 6f6e 206d 6574 686f 642e 222c 0a20 2020  on method.",.   
-0000e540: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
-0000e550: 7669 6465 6f5f 636f 6e63 6174 656e 6174  video_concatenat
-0000e560: 6f72 2e5f 5f6e 616d 655f 5f2c 0a20 2020  or.__name__,.   
-0000e570: 2020 2020 2029 0a20 2020 2074 696d 6572       ).    timer
-0000e580: 203d 2053 696d 6261 5469 6d65 7228 7374   = SimbaTimer(st
-0000e590: 6172 743d 5472 7565 290a 2020 2020 666f  art=True).    fo
-0000e5a0: 7220 6669 6c65 5f70 6174 6820 696e 205b  r file_path in [
-0000e5b0: 7669 6465 6f5f 6f6e 655f 7061 7468 2c20  video_one_path, 
-0000e5c0: 7669 6465 6f5f 7477 6f5f 7061 7468 5d3a  video_two_path]:
-0000e5d0: 0a20 2020 2020 2020 2063 6865 636b 5f66  .        check_f
-0000e5e0: 696c 655f 6578 6973 745f 616e 645f 7265  ile_exist_and_re
-0000e5f0: 6164 6162 6c65 2866 696c 655f 7061 7468  adable(file_path
-0000e600: 3d66 696c 655f 7061 7468 290a 2020 2020  =file_path).    
-0000e610: 2020 2020 5f20 3d20 6765 745f 7669 6465      _ = get_vide
-0000e620: 6f5f 6d65 7461 5f64 6174 6128 6669 6c65  o_meta_data(file
-0000e630: 5f70 6174 6829 0a20 2020 2069 6620 7479  _path).    if ty
-0000e640: 7065 2872 6573 6f6c 7574 696f 6e29 2069  pe(resolution) i
-0000e650: 7320 696e 743a 0a20 2020 2020 2020 2076  s int:.        v
-0000e660: 6964 656f 5f6d 6574 615f 6461 7461 203d  ideo_meta_data =
-0000e670: 207b 7d0a 2020 2020 2020 2020 6966 2068   {}.        if h
-0000e680: 6f72 697a 6f6e 7461 6c3a 0a20 2020 2020  orizontal:.     
-0000e690: 2020 2020 2020 2076 6964 656f 5f6d 6574         video_met
-0000e6a0: 615f 6461 7461 5b22 6865 6967 6874 225d  a_data["height"]
-0000e6b0: 203d 2072 6573 6f6c 7574 696f 6e0a 2020   = resolution.  
-0000e6c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000e6d0: 2020 2020 2020 2020 7669 6465 6f5f 6d65          video_me
-0000e6e0: 7461 5f64 6174 615b 2277 6964 7468 225d  ta_data["width"]
-0000e6f0: 203d 2072 6573 6f6c 7574 696f 6e0a 2020   = resolution.  
-0000e700: 2020 656c 6966 2072 6573 6f6c 7574 696f    elif resolutio
-0000e710: 6e20 6973 2022 5669 6465 6f20 3122 3a0a  n is "Video 1":.
-0000e720: 2020 2020 2020 2020 7669 6465 6f5f 6d65          video_me
-0000e730: 7461 5f64 6174 6120 3d20 6765 745f 7669  ta_data = get_vi
-0000e740: 6465 6f5f 6d65 7461 5f64 6174 6128 7669  deo_meta_data(vi
-0000e750: 6465 6f5f 6f6e 655f 7061 7468 290a 2020  deo_one_path).  
-0000e760: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000e770: 7669 6465 6f5f 6d65 7461 5f64 6174 6120  video_meta_data 
-0000e780: 3d20 6765 745f 7669 6465 6f5f 6d65 7461  = get_video_meta
-0000e790: 5f64 6174 6128 7669 6465 6f5f 6f6e 655f  _data(video_one_
-0000e7a0: 7061 7468 290a 2020 2020 6469 722c 2066  path).    dir, f
-0000e7b0: 696c 655f 6e61 6d65 5f31 2c20 5f20 3d20  ile_name_1, _ = 
-0000e7c0: 6765 745f 666e 5f65 7874 2876 6964 656f  get_fn_ext(video
-0000e7d0: 5f6f 6e65 5f70 6174 6829 0a20 2020 205f  _one_path).    _
-0000e7e0: 2c20 6669 6c65 5f6e 616d 655f 322c 205f  , file_name_2, _
-0000e7f0: 203d 2067 6574 5f66 6e5f 6578 7428 7669   = get_fn_ext(vi
-0000e800: 6465 6f5f 7477 6f5f 7061 7468 290a 2020  deo_two_path).  
-0000e810: 2020 7072 696e 7428 6622 436f 6e63 6174    print(f"Concat
-0000e820: 656e 6174 696e 6720 7669 6465 6f73 207b  enating videos {
-0000e830: 6669 6c65 5f6e 616d 655f 317d 2061 6e64  file_name_1} and
-0000e840: 207b 6669 6c65 5f6e 616d 655f 327d 2e2e   {file_name_2}..
-0000e850: 2e22 290a 2020 2020 7361 7665 5f70 6174  .").    save_pat
-0000e860: 6820 3d20 6f73 2e70 6174 682e 6a6f 696e  h = os.path.join
-0000e870: 2864 6972 2c20 6669 6c65 5f6e 616d 655f  (dir, file_name_
-0000e880: 3120 2b20 6669 6c65 5f6e 616d 655f 3220  1 + file_name_2 
-0000e890: 2b20 225f 636f 6e63 6174 2e6d 7034 2229  + "_concat.mp4")
-0000e8a0: 0a20 2020 2069 6620 686f 7269 7a6f 6e74  .    if horizont
-0000e8b0: 616c 3a0a 2020 2020 2020 2020 6966 2067  al:.        if g
-0000e8c0: 7075 3a0a 2020 2020 2020 2020 2020 2020  pu:.            
-0000e8d0: 636f 6d6d 616e 6420 3d20 6627 6666 6d70  command = f'ffmp
-0000e8e0: 6567 202d 7920 2d68 7761 6363 656c 2061  eg -y -hwaccel a
-0000e8f0: 7574 6f20 2d63 3a76 2068 3236 345f 6375  uto -c:v h264_cu
-0000e900: 7669 6420 2d69 2022 7b76 6964 656f 5f6f  vid -i "{video_o
-0000e910: 6e65 5f70 6174 687d 2220 2d68 7761 6363  ne_path}" -hwacc
-0000e920: 656c 2061 7574 6f20 2d63 3a76 2068 3236  el auto -c:v h26
-0000e930: 345f 6375 7669 6420 2d69 2022 7b76 6964  4_cuvid -i "{vid
-0000e940: 656f 5f74 776f 5f70 6174 687d 2220 2d66  eo_two_path}" -f
-0000e950: 696c 7465 725f 636f 6d70 6c65 7820 225b  ilter_complex "[
-0000e960: 303a 765d 7363 616c 653d 2d31 3a7b 7669  0:v]scale=-1:{vi
-0000e970: 6465 6f5f 6d65 7461 5f64 6174 615b 2268  deo_meta_data["h
-0000e980: 6569 6768 7422 5d7d 5b76 305d 3b5b 7630  eight"]}[v0];[v0
-0000e990: 5d5b 313a 765d 6873 7461 636b 3d69 6e70  ][1:v]hstack=inp
-0000e9a0: 7574 733d 3222 202d 633a 7620 6832 3634  uts=2" -c:v h264
-0000e9b0: 5f6e 7665 6e63 2022 7b73 6176 655f 7061  _nvenc "{save_pa
-0000e9c0: 7468 7d22 270a 2020 2020 2020 2020 656c  th}"'.        el
-0000e9d0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000e9e0: 636f 6d6d 616e 6420 3d20 6627 6666 6d70  command = f'ffmp
-0000e9f0: 6567 202d 7920 2d69 2022 7b76 6964 656f  eg -y -i "{video
-0000ea00: 5f6f 6e65 5f70 6174 687d 2220 2d69 2022  _one_path}" -i "
-0000ea10: 7b76 6964 656f 5f74 776f 5f70 6174 687d  {video_two_path}
-0000ea20: 2220 2d66 696c 7465 725f 636f 6d70 6c65  " -filter_comple
-0000ea30: 7820 225b 303a 765d 7363 616c 653d 2d31  x "[0:v]scale=-1
-0000ea40: 3a7b 7669 6465 6f5f 6d65 7461 5f64 6174  :{video_meta_dat
-0000ea50: 615b 2268 6569 6768 7422 5d7d 5b76 305d  a["height"]}[v0]
-0000ea60: 3b5b 7630 5d5b 313a 765d 6873 7461 636b  ;[v0][1:v]hstack
-0000ea70: 3d69 6e70 7574 733d 3222 2022 7b73 6176  =inputs=2" "{sav
-0000ea80: 655f 7061 7468 7d22 270a 0a20 2020 2065  e_path}"'..    e
-0000ea90: 6c73 653a 0a20 2020 2020 2020 2069 6620  lse:.        if 
-0000eaa0: 6770 753a 0a20 2020 2020 2020 2020 2020  gpu:.           
-0000eab0: 2063 6f6d 6d61 6e64 203d 2066 2766 666d   command = f'ffm
-0000eac0: 7065 6720 2d79 202d 6877 6163 6365 6c20  peg -y -hwaccel 
-0000ead0: 6175 746f 202d 633a 7620 6832 3634 5f63  auto -c:v h264_c
-0000eae0: 7576 6964 202d 6920 227b 7669 6465 6f5f  uvid -i "{video_
-0000eaf0: 6f6e 655f 7061 7468 7d22 202d 6877 6163  one_path}" -hwac
-0000eb00: 6365 6c20 6175 746f 202d 633a 7620 6832  cel auto -c:v h2
-0000eb10: 3634 5f63 7576 6964 202d 6920 227b 7669  64_cuvid -i "{vi
-0000eb20: 6465 6f5f 7477 6f5f 7061 7468 7d22 202d  deo_two_path}" -
-0000eb30: 6669 6c74 6572 5f63 6f6d 706c 6578 2022  filter_complex "
-0000eb40: 5b30 3a76 5d73 6361 6c65 3d7b 7669 6465  [0:v]scale={vide
-0000eb50: 6f5f 6d65 7461 5f64 6174 615b 2277 6964  o_meta_data["wid
-0000eb60: 7468 225d 7d3a 2d31 5b76 305d 3b5b 7630  th"]}:-1[v0];[v0
-0000eb70: 5d5b 313a 765d 7673 7461 636b 3d69 6e70  ][1:v]vstack=inp
-0000eb80: 7574 733d 3222 202d 633a 7620 6832 3634  uts=2" -c:v h264
-0000eb90: 5f6e 7665 6e63 2022 7b73 6176 655f 7061  _nvenc "{save_pa
-0000eba0: 7468 7d22 270a 2020 2020 2020 2020 656c  th}"'.        el
-0000ebb0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000ebc0: 636f 6d6d 616e 6420 3d20 6627 6666 6d70  command = f'ffmp
-0000ebd0: 6567 202d 7920 2d69 2022 7b76 6964 656f  eg -y -i "{video
-0000ebe0: 5f6f 6e65 5f70 6174 687d 2220 2d69 2022  _one_path}" -i "
-0000ebf0: 7b76 6964 656f 5f74 776f 5f70 6174 687d  {video_two_path}
-0000ec00: 2220 2d66 696c 7465 725f 636f 6d70 6c65  " -filter_comple
-0000ec10: 7820 225b 303a 765d 7363 616c 653d 7b76  x "[0:v]scale={v
-0000ec20: 6964 656f 5f6d 6574 615f 6461 7461 5b22  ideo_meta_data["
-0000ec30: 7769 6474 6822 5d7d 3a2d 315b 7630 5d3b  width"]}:-1[v0];
-0000ec40: 5b76 305d 5b31 3a76 5d76 7374 6163 6b3d  [v0][1:v]vstack=
-0000ec50: 696e 7075 7473 3d32 2220 227b 7361 7665  inputs=2" "{save
-0000ec60: 5f70 6174 687d 2227 0a20 2020 2069 6620  _path}"'.    if 
-0000ec70: 6770 753a 0a20 2020 2020 2020 2070 726f  gpu:.        pro
-0000ec80: 6365 7373 203d 2073 7562 7072 6f63 6573  cess = subproces
-0000ec90: 732e 506f 7065 6e28 636f 6d6d 616e 642c  s.Popen(command,
-0000eca0: 2073 6865 6c6c 3d54 7275 6529 0a20 2020   shell=True).   
-0000ecb0: 2020 2020 206f 7574 7075 742c 2065 7272       output, err
-0000ecc0: 6f72 203d 2070 726f 6365 7373 2e63 6f6d  or = process.com
-0000ecd0: 6d75 6e69 6361 7465 2829 0a20 2020 2020  municate().     
-0000ece0: 2020 2069 6620 7072 6f63 6573 732e 7265     if process.re
-0000ecf0: 7475 726e 636f 6465 2021 3d20 303a 0a20  turncode != 0:. 
-0000ed00: 2020 2020 2020 2020 2020 2069 6620 2255             if "U
-0000ed10: 6e6b 6e6f 776e 2064 6563 6f64 6572 2220  nknown decoder" 
-0000ed20: 696e 2073 7472 2865 7272 6f72 2e73 706c  in str(error.spl
-0000ed30: 6974 2862 225c 6e22 295b 2d32 5d29 3a0a  it(b"\n")[-2]):.
-0000ed40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ed50: 7261 6973 6520 4646 4d50 4547 436f 6465  raise FFMPEGCode
-0000ed60: 6347 5055 4572 726f 7228 0a20 2020 2020  cGPUError(.     
-0000ed70: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0000ed80: 7367 3d22 4750 5520 636f 6465 6320 6e6f  sg="GPU codec no
-0000ed90: 7420 666f 756e 643a 2072 6576 6572 7469  t found: reverti
-0000eda0: 6e67 2074 6f20 4350 552e 2050 726f 7065  ng to CPU. Prope
-0000edb0: 726c 7920 636f 6e66 6967 7572 6520 4646  rly configure FF
-0000edc0: 4d70 6567 2061 6e64 2065 6e73 7572 6520  Mpeg and ensure 
-0000edd0: 796f 7520 6861 7665 2047 5055 2061 7661  you have GPU ava
-0000ede0: 696c 6162 6c65 206f 7220 7573 6520 4350  ilable or use CP
-0000edf0: 552e 222c 0a20 2020 2020 2020 2020 2020  U.",.           
-0000ee00: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
-0000ee10: 7669 6465 6f5f 636f 6e63 6174 656e 6174  video_concatenat
-0000ee20: 6f72 2e5f 5f6e 616d 655f 5f2c 0a20 2020  or.__name__,.   
-0000ee30: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-0000ee40: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0000ee50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ee60: 2072 6169 7365 2046 464d 5045 4743 6f64   raise FFMPEGCod
-0000ee70: 6563 4750 5545 7272 6f72 280a 2020 2020  ecGPUError(.    
-0000ee80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ee90: 6d73 673d 2247 5055 2065 7272 6f72 2e20  msg="GPU error. 
-0000eea0: 5072 6f70 6572 6c79 2063 6f6e 6669 6775  Properly configu
-0000eeb0: 7265 2046 464d 7065 6720 616e 6420 656e  re FFMpeg and en
-0000eec0: 7375 7265 2079 6f75 2068 6176 6520 4750  sure you have GP
-0000eed0: 5520 6176 6169 6c61 626c 652c 206f 7220  U available, or 
-0000eee0: 7573 6520 4350 552e 222c 0a20 2020 2020  use CPU.",.     
-0000eef0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000ef00: 6f75 7263 653d 7669 6465 6f5f 636f 6e63  ource=video_conc
-0000ef10: 6174 656e 6174 6f72 2e5f 5f6e 616d 655f  atenator.__name_
-0000ef20: 5f2c 0a20 2020 2020 2020 2020 2020 2020  _,.             
-0000ef30: 2020 2029 0a20 2020 2020 2020 2065 6c73     ).        els
-0000ef40: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
-0000ef50: 6173 730a 2020 2020 656c 7365 3a0a 2020  ass.    else:.  
-0000ef60: 2020 2020 2020 7375 6270 726f 6365 7373        subprocess
-0000ef70: 2e63 616c 6c28 636f 6d6d 616e 642c 2073  .call(command, s
-0000ef80: 6865 6c6c 3d54 7275 652c 2073 7464 6f75  hell=True, stdou
-0000ef90: 743d 7375 6270 726f 6365 7373 2e50 4950  t=subprocess.PIP
-0000efa0: 4529 0a20 2020 2074 696d 6572 2e73 746f  E).    timer.sto
-0000efb0: 705f 7469 6d65 7228 290a 2020 2020 7374  p_timer().    st
-0000efc0: 646f 7574 5f73 7563 6365 7373 280a 2020  dout_success(.  
-0000efd0: 2020 2020 2020 6d73 673d 6622 5669 6465        msg=f"Vide
-0000efe0: 6f73 2063 6f6e 6361 7465 6e61 7465 6420  os concatenated 
-0000eff0: 616e 6420 7361 7665 6420 6174 207b 7361  and saved at {sa
-0000f000: 7665 5f70 6174 687d 222c 0a20 2020 2020  ve_path}",.     
-0000f010: 2020 2065 6c61 7073 6564 5f74 696d 653d     elapsed_time=
-0000f020: 7469 6d65 722e 656c 6170 7365 645f 7469  timer.elapsed_ti
-0000f030: 6d65 5f73 7472 2c0a 2020 2020 2020 2020  me_str,.        
-0000f040: 736f 7572 6365 3d76 6964 656f 5f63 6f6e  source=video_con
-0000f050: 6361 7465 6e61 746f 722e 5f5f 6e61 6d65  catenator.__name
-0000f060: 5f5f 2c0a 2020 2020 290a 0a0a 2320 7669  __,.    )...# vi
-0000f070: 6465 6f5f 636f 6e63 6174 656e 6174 6f72  deo_concatenator
-0000f080: 2876 6964 656f 5f6f 6e65 5f70 6174 683d  (video_one_path=
-0000f090: 7227 2f55 7365 7273 2f73 696d 6f6e 2f44  r'/Users/simon/D
-0000f0a0: 6573 6b74 6f70 2f65 6e76 732f 7369 6d62  esktop/envs/simb
-0000f0b0: 612f 7472 6f75 626c 6573 686f 6f74 696e  a/troubleshootin
-0000f0c0: 672f 6d6f 7573 655f 6f70 656e 5f66 6965  g/mouse_open_fie
-0000f0d0: 6c64 2f70 726f 6a65 6374 5f66 6f6c 6465  ld/project_folde
-0000f0e0: 722f 7669 6465 6f73 2f53 495f 4441 5933  r/videos/SI_DAY3
-0000f0f0: 5f33 3038 5f43 4431 5f50 5245 5345 4e54  _308_CD1_PRESENT
-0000f100: 5f64 6f77 6e73 616d 706c 6564 2e6d 7034  _downsampled.mp4
-0000f110: 272c 0a23 2020 2020 2020 2020 2020 2020  ',.#            
-0000f120: 2020 2020 2020 2020 7669 6465 6f5f 7477          video_tw
-0000f130: 6f5f 7061 7468 3d72 272f 5573 6572 732f  o_path=r'/Users/
-0000f140: 7369 6d6f 6e2f 4465 736b 746f 702f 656e  simon/Desktop/en
-0000f150: 7673 2f73 696d 6261 2f74 726f 7562 6c65  vs/simba/trouble
-0000f160: 7368 6f6f 7469 6e67 2f6d 6f75 7365 5f6f  shooting/mouse_o
-0000f170: 7065 6e5f 6669 656c 642f 7072 6f6a 6563  pen_field/projec
-0000f180: 745f 666f 6c64 6572 2f76 6964 656f 732f  t_folder/videos/
-0000f190: 5349 5f44 4159 335f 3330 385f 4344 315f  SI_DAY3_308_CD1_
-0000f1a0: 5052 4553 454e 545f 646f 776e 7361 6d70  PRESENT_downsamp
-0000f1b0: 6c65 642e 6d70 3427 2c20 7265 736f 6c75  led.mp4', resolu
-0000f1c0: 7469 6f6e 3d27 5669 6465 6f5f 3127 2c0a  tion='Video_1',.
-0000f1d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0000f1e0: 2020 2020 2068 6f72 697a 6f6e 7461 6c3d       horizontal=
-0000f1f0: 5472 7565 2c0a 2320 2020 2020 2020 2020  True,.#         
-0000f200: 2020 2020 2020 2020 2020 2067 7075 3d46             gpu=F
-0000f210: 616c 7365 290a 0a0a 636c 6173 7320 5669  alse)...class Vi
-0000f220: 6465 6f52 6f74 6174 6f72 2843 6f6e 6669  deoRotator(Confi
-0000f230: 6752 6561 6465 7229 3a0a 2020 2020 2222  gReader):.    ""
-0000f240: 220a 2020 2020 4755 4920 546f 6f6c 2066  ".    GUI Tool f
-0000f250: 6f72 2072 6f74 6174 696e 6720 7669 6465  or rotating vide
-0000f260: 6f2e 2052 6f74 6174 6564 2076 6964 656f  o. Rotated video
-0000f270: 2069 7320 7361 7665 6420 7769 7468 2074   is saved with t
-0000f280: 6865 2060 605f 726f 7461 7465 645f 4441  he ``_rotated_DA
-0000f290: 5445 5449 4d45 2e6d 7034 6060 2073 7566  TETIME.mp4`` suf
-0000f2a0: 6669 782e 0a0a 2020 2020 3a70 6172 616d  fix...    :param
-0000f2b0: 6574 6572 2073 7472 2069 6e70 7574 5f70  eter str input_p
-0000f2c0: 6174 683a 2050 6174 6820 746f 2076 6964  ath: Path to vid
-0000f2d0: 656f 2074 6f20 726f 7461 7465 2e0a 2020  eo to rotate..  
-0000f2e0: 2020 3a70 6172 616d 6574 6572 2073 7472    :parameter str
-0000f2f0: 206f 7574 7075 745f 6469 723a 2044 6972   output_dir: Dir
-0000f300: 6563 746f 7279 2077 6865 7265 2074 6f20  ectory where to 
-0000f310: 7361 7665 2074 6865 2072 6f74 6174 6564  save the rotated
-0000f320: 2076 6964 656f 2e0a 2020 2020 3a70 6172   video..    :par
-0000f330: 616d 6574 6572 204f 7074 696f 6e61 6c5b  ameter Optional[
-0000f340: 626f 6f6c 5d20 6770 753a 2049 6620 5472  bool] gpu: If Tr
-0000f350: 7565 2c20 7573 6520 4646 4d50 4547 204e  ue, use FFMPEG N
-0000f360: 5649 4445 4120 4750 5520 636f 6465 6373  VIDEA GPU codecs
-0000f370: 2e20 456c 7365 2043 5055 2063 6f64 6563  . Else CPU codec
-0000f380: 732e 0a20 2020 203a 7061 7261 6d65 7465  s..    :paramete
-0000f390: 7220 4f70 7469 6f6e 616c 5b62 6f6f 6c5d  r Optional[bool]
-0000f3a0: 2067 7075 3a20 4966 2054 7275 652c 2075   gpu: If True, u
-0000f3b0: 7365 2046 4650 4d50 4547 2e20 456c 7365  se FFPMPEG. Else
-0000f3c0: 2c20 4f70 656e 4356 2e0a 0a20 2020 203a  , OpenCV...    :
-0000f3d0: 6578 616d 706c 653a 0a20 2020 203e 3e3e  example:.    >>>
-0000f3e0: 2056 6964 656f 526f 7461 746f 7228 696e   VideoRotator(in
-0000f3f0: 7075 745f 7061 7468 3d27 7072 6f6a 6563  put_path='projec
-0000f400: 745f 666f 6c64 6572 2f76 6964 656f 732f  t_folder/videos/
-0000f410: 5669 6465 6f5f 312e 6d70 3427 2c20 6f75  Video_1.mp4', ou
-0000f420: 7470 7574 5f64 6972 3d27 7072 6f6a 6563  tput_dir='projec
-0000f430: 745f 666f 6c64 6572 2f76 6964 656f 7327  t_folder/videos'
-0000f440: 290a 2020 2020 2222 220a 0a20 2020 2064  ).    """..    d
-0000f450: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-0000f460: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-0000f470: 2020 2069 6e70 7574 5f70 6174 683a 2055     input_path: U
-0000f480: 6e69 6f6e 5b73 7472 2c20 6f73 2e50 6174  nion[str, os.Pat
-0000f490: 684c 696b 655d 2c0a 2020 2020 2020 2020  hLike],.        
-0000f4a0: 6f75 7470 7574 5f64 6972 3a20 556e 696f  output_dir: Unio
-0000f4b0: 6e5b 7374 722c 206f 732e 5061 7468 4c69  n[str, os.PathLi
-0000f4c0: 6b65 5d2c 0a20 2020 2020 2020 2067 7075  ke],.        gpu
-0000f4d0: 3a20 4f70 7469 6f6e 616c 5b62 6f6f 6c5d  : Optional[bool]
-0000f4e0: 203d 2046 616c 7365 2c0a 2020 2020 2020   = False,.      
-0000f4f0: 2020 6666 6d70 6567 3a20 4f70 7469 6f6e    ffmpeg: Option
-0000f500: 616c 5b62 6f6f 6c5d 203d 2046 616c 7365  al[bool] = False
-0000f510: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
-0000f520: 0a0a 2020 2020 2020 2020 6966 2067 7075  ..        if gpu
-0000f530: 2061 6e64 206e 6f74 2063 6865 636b 5f6e   and not check_n
-0000f540: 7669 6465 615f 6770 755f 6176 6169 6c61  videa_gpu_availa
-0000f550: 626c 6528 293a 0a20 2020 2020 2020 2020  ble():.         
-0000f560: 2020 2072 6169 7365 2046 464d 5045 4743     raise FFMPEGC
-0000f570: 6f64 6563 4750 5545 7272 6f72 280a 2020  odecGPUError(.  
-0000f580: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
-0000f590: 673d 224e 6f20 4750 5520 666f 756e 6420  g="No GPU found 
-0000f5a0: 2861 7320 6576 616c 7561 7465 6420 6279  (as evaluated by
-0000f5b0: 206e 7669 6465 612d 736d 6920 7265 7475   nvidea-smi retu
-0000f5c0: 726e 696e 6720 4e6f 6e65 2922 2c0a 2020  rning None)",.  
-0000f5d0: 2020 2020 2020 2020 2020 2020 2020 736f                so
-0000f5e0: 7572 6365 3d73 656c 662e 5f5f 636c 6173  urce=self.__clas
-0000f5f0: 735f 5f2e 5f5f 6e61 6d65 5f5f 2c0a 2020  s__.__name__,.  
-0000f600: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0000f610: 2020 2020 6966 2066 666d 7065 6720 616e      if ffmpeg an
-0000f620: 6420 6e6f 7420 6368 6563 6b5f 6666 6d70  d not check_ffmp
-0000f630: 6567 5f61 7661 696c 6162 6c65 2829 3a0a  eg_available():.
-0000f640: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0000f650: 6520 4646 4d50 4547 4e6f 7446 6f75 6e64  e FFMPEGNotFound
-0000f660: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
-0000f670: 2020 2020 2020 206d 7367 3d27 4646 4d50         msg='FFMP
-0000f680: 4547 206e 6f74 2066 6f75 6e64 206f 6e20  EG not found on 
-0000f690: 7468 6520 636f 6d70 7574 6572 2028 6173  the computer (as
-0000f6a0: 2065 7661 6c75 6174 6564 2062 7920 2266   evaluated by "f
-0000f6b0: 666d 7065 6722 2072 6574 7572 6e69 6e67  fmpeg" returning
-0000f6c0: 204e 6f6e 6529 272c 0a20 2020 2020 2020   None)',.       
-0000f6d0: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
-0000f6e0: 7365 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f  self.__class__._
-0000f6f0: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
-0000f700: 2020 2020 2029 0a20 2020 2020 2020 205f       ).        _
-0000f710: 2c20 7365 6c66 2e63 7075 5f63 6e74 203d  , self.cpu_cnt =
-0000f720: 2066 696e 645f 636f 7265 5f63 6e74 2829   find_core_cnt()
-0000f730: 0a20 2020 2020 2020 2073 656c 662e 6770  .        self.gp
-0000f740: 752c 2073 656c 662e 6666 6d70 6567 203d  u, self.ffmpeg =
-0000f750: 2067 7075 2c20 6666 6d70 6567 0a20 2020   gpu, ffmpeg.   
-0000f760: 2020 2020 2073 656c 662e 7361 7665 5f64       self.save_d
-0000f770: 6972 203d 206f 7574 7075 745f 6469 720a  ir = output_dir.
-0000f780: 2020 2020 2020 2020 7365 6c66 2e64 6174          self.dat
-0000f790: 6574 696d 6520 3d20 6461 7465 7469 6d65  etime = datetime
-0000f7a0: 2e6e 6f77 2829 2e73 7472 6674 696d 6528  .now().strftime(
-0000f7b0: 2225 5925 6d25 6425 4825 4d25 5322 290a  "%Y%m%d%H%M%S").
-0000f7c0: 2020 2020 2020 2020 6966 206f 732e 7061          if os.pa
-0000f7d0: 7468 2e69 7366 696c 6528 696e 7075 745f  th.isfile(input_
-0000f7e0: 7061 7468 293a 0a20 2020 2020 2020 2020  path):.         
-0000f7f0: 2020 2073 656c 662e 7669 6465 6f5f 7061     self.video_pa
-0000f800: 7468 7320 3d20 5b69 6e70 7574 5f70 6174  ths = [input_pat
-0000f810: 685d 0a20 2020 2020 2020 2065 6c73 653a  h].        else:
-0000f820: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000f830: 662e 7669 6465 6f5f 7061 7468 7320 3d20  f.video_paths = 
-0000f840: 6669 6e64 5f61 6c6c 5f76 6964 656f 735f  find_all_videos_
-0000f850: 696e 5f64 6972 6563 746f 7279 280a 2020  in_directory(.  
-0000f860: 2020 2020 2020 2020 2020 2020 2020 6469                di
-0000f870: 7265 6374 6f72 793d 696e 7075 745f 7061  rectory=input_pa
-0000f880: 7468 2c20 6173 5f64 6963 743d 5472 7565  th, as_dict=True
-0000f890: 0a20 2020 2020 2020 2020 2020 2029 2e76  .            ).v
-0000f8a0: 616c 7565 7328 290a 2020 2020 2020 2020  alues().        
-0000f8b0: 2020 2020 6368 6563 6b5f 6966 5f66 696c      check_if_fil
-0000f8c0: 6570 6174 685f 6c69 7374 5f69 735f 656d  epath_list_is_em
-0000f8d0: 7074 7928 0a20 2020 2020 2020 2020 2020  pty(.           
-0000f8e0: 2020 2020 2066 696c 6570 6174 6873 3d73       filepaths=s
-0000f8f0: 656c 662e 7669 6465 6f5f 7061 7468 732c  elf.video_paths,
-0000f900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f910: 2065 7272 6f72 5f6d 7367 3d66 224e 6f20   error_msg=f"No 
-0000f920: 7669 6465 6f73 2066 6f75 6e64 2069 6e20  videos found in 
-0000f930: 7b69 6e70 7574 5f70 6174 687d 2064 6972  {input_path} dir
-0000f940: 6563 746f 7279 222c 0a20 2020 2020 2020  ectory",.       
-0000f950: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
-0000f960: 5f5f 696e 7365 7274 5f69 6d67 2873 656c  __insert_img(sel
-0000f970: 662c 2069 6d67 3a20 6e70 2e61 7272 6179  f, img: np.array
-0000f980: 293a 0a20 2020 2020 2020 2063 7572 7265  ):.        curre
-0000f990: 6e74 5f66 726d 5f70 696c 203d 2049 6d61  nt_frm_pil = Ima
-0000f9a0: 6765 2e66 726f 6d61 7272 6179 2869 6d67  ge.fromarray(img
-0000f9b0: 290a 2020 2020 2020 2020 6375 7272 656e  ).        curren
-0000f9c0: 745f 6672 6d5f 7069 6c2e 7468 756d 626e  t_frm_pil.thumbn
-0000f9d0: 6169 6c28 4d41 585f 4652 4d5f 5349 5a45  ail(MAX_FRM_SIZE
-0000f9e0: 2c20 496d 6167 652e 414e 5449 414c 4941  , Image.ANTIALIA
-0000f9f0: 5329 0a20 2020 2020 2020 2063 7572 7265  S).        curre
-0000fa00: 6e74 5f66 726d 5f70 696c 203d 2049 6d61  nt_frm_pil = Ima
-0000fa10: 6765 546b 2e50 686f 746f 496d 6167 6528  geTk.PhotoImage(
-0000fa20: 0a20 2020 2020 2020 2020 2020 206d 6173  .            mas
-0000fa30: 7465 723d 7365 6c66 2e6d 6169 6e5f 6672  ter=self.main_fr
-0000fa40: 6d2c 2069 6d61 6765 3d63 7572 7265 6e74  m, image=current
-0000fa50: 5f66 726d 5f70 696c 0a20 2020 2020 2020  _frm_pil.       
-0000fa60: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-0000fa70: 7669 6465 6f5f 6672 616d 6520 3d20 4c61  video_frame = La
-0000fa80: 6265 6c28 7365 6c66 2e6d 6169 6e5f 6672  bel(self.main_fr
-0000fa90: 6d2c 2069 6d61 6765 3d63 7572 7265 6e74  m, image=current
-0000faa0: 5f66 726d 5f70 696c 290a 2020 2020 2020  _frm_pil).      
-0000fab0: 2020 7365 6c66 2e76 6964 656f 5f66 7261    self.video_fra
-0000fac0: 6d65 2e69 6d61 6765 203d 2063 7572 7265  me.image = curre
-0000fad0: 6e74 5f66 726d 5f70 696c 0a20 2020 2020  nt_frm_pil.     
-0000fae0: 2020 2073 656c 662e 7669 6465 6f5f 6672     self.video_fr
-0000faf0: 616d 652e 6772 6964 2872 6f77 3d30 2c20  ame.grid(row=0, 
-0000fb00: 636f 6c75 6d6e 3d30 290a 0a20 2020 2064  column=0)..    d
-0000fb10: 6566 205f 5f72 6f74 6174 6528 7365 6c66  ef __rotate(self
-0000fb20: 2c20 7661 6c75 653a 2069 6e74 2c20 696d  , value: int, im
-0000fb30: 673a 206e 702e 6172 7261 7929 3a0a 2020  g: np.array):.  
-0000fb40: 2020 2020 2020 7365 6c66 2e64 6966 5f61        self.dif_a
-0000fb50: 6e67 6c65 202b 3d20 7661 6c75 650a 2020  ngle += value.  
-0000fb60: 2020 2020 2020 726f 7461 7469 6f6e 5f6d        rotation_m
-0000fb70: 6174 7269 7820 3d20 6376 322e 6765 7452  atrix = cv2.getR
-0000fb80: 6f74 6174 696f 6e4d 6174 7269 7832 4428  otationMatrix2D(
-0000fb90: 0a20 2020 2020 2020 2020 2020 2028 7365  .            (se
-0000fba0: 6c66 2e76 6964 656f 5f6d 6574 615f 6461  lf.video_meta_da
-0000fbb0: 7461 5b22 7769 6474 6822 5d20 2f20 322c  ta["width"] / 2,
-0000fbc0: 2073 656c 662e 7669 6465 6f5f 6d65 7461   self.video_meta
-0000fbd0: 5f64 6174 615b 2268 6569 6768 7422 5d20  _data["height"] 
-0000fbe0: 2f20 3229 2c0a 2020 2020 2020 2020 2020  / 2),.          
-0000fbf0: 2020 7365 6c66 2e64 6966 5f61 6e67 6c65    self.dif_angle
-0000fc00: 2c0a 2020 2020 2020 2020 2020 2020 312c  ,.            1,
-0000fc10: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0000fc20: 2020 2069 6d67 203d 2063 7632 2e77 6172     img = cv2.war
-0000fc30: 7041 6666 696e 6528 0a20 2020 2020 2020  pAffine(.       
-0000fc40: 2020 2020 2069 6d67 2c0a 2020 2020 2020       img,.      
-0000fc50: 2020 2020 2020 726f 7461 7469 6f6e 5f6d        rotation_m
-0000fc60: 6174 7269 782c 0a20 2020 2020 2020 2020  atrix,.         
-0000fc70: 2020 2028 7365 6c66 2e76 6964 656f 5f6d     (self.video_m
-0000fc80: 6574 615f 6461 7461 5b22 7769 6474 6822  eta_data["width"
-0000fc90: 5d2c 2073 656c 662e 7669 6465 6f5f 6d65  ], self.video_me
-0000fca0: 7461 5f64 6174 615b 2268 6569 6768 7422  ta_data["height"
-0000fcb0: 5d29 2c0a 2020 2020 2020 2020 290a 2020  ]),.        ).  
-0000fcc0: 2020 2020 2020 7365 6c66 2e5f 5f69 6e73        self.__ins
-0000fcd0: 6572 745f 696d 6728 696d 673d 696d 6729  ert_img(img=img)
-0000fce0: 0a0a 2020 2020 6465 6620 5f5f 7275 6e5f  ..    def __run_
-0000fcf0: 726f 7461 7469 6f6e 2873 656c 6629 3a0a  rotation(self):.
-0000fd00: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-0000fd10: 6e5f 6672 6d2e 6465 7374 726f 7928 290a  n_frm.destroy().
-0000fd20: 2020 2020 2020 2020 7374 6172 7420 3d20          start = 
-0000fd30: 7469 6d65 2e74 696d 6528 290a 2020 2020  time.time().    
-0000fd40: 2020 2020 6966 2073 656c 662e 6666 6d70      if self.ffmp
-0000fd50: 6567 206f 7220 7365 6c66 2e67 7075 3a0a  eg or self.gpu:.
-0000fd60: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0000fd70: 7669 6465 6f5f 636e 742c 2028 7669 6465  video_cnt, (vide
-0000fd80: 6f5f 7061 7468 2c20 726f 7461 7469 6f6e  o_path, rotation
-0000fd90: 2920 696e 2065 6e75 6d65 7261 7465 2873  ) in enumerate(s
-0000fda0: 656c 662e 7265 7375 6c74 732e 6974 656d  elf.results.item
-0000fdb0: 7328 2929 3a0a 2020 2020 2020 2020 2020  s()):.          
-0000fdc0: 2020 2020 2020 5f2c 206e 616d 652c 205f        _, name, _
-0000fdd0: 203d 2067 6574 5f66 6e5f 6578 7428 6669   = get_fn_ext(fi
-0000fde0: 6c65 7061 7468 3d76 6964 656f 5f70 6174  lepath=video_pat
-0000fdf0: 6829 0a20 2020 2020 2020 2020 2020 2020  h).             
-0000fe00: 2020 2073 6176 655f 7061 7468 203d 206f     save_path = o
-0000fe10: 732e 7061 7468 2e6a 6f69 6e28 0a20 2020  s.path.join(.   
-0000fe20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fe30: 2073 656c 662e 7361 7665 5f64 6972 2c20   self.save_dir, 
-0000fe40: 6622 7b6e 616d 657d 5f72 6f74 6174 6564  f"{name}_rotated
-0000fe50: 5f7b 7365 6c66 2e64 6174 6574 696d 657d  _{self.datetime}
-0000fe60: 2e6d 7034 220a 2020 2020 2020 2020 2020  .mp4".          
-0000fe70: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0000fe80: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0000fe90: 6770 753a 0a20 2020 2020 2020 2020 2020  gpu:.           
-0000fea0: 2020 2020 2020 2020 2063 6d64 203d 2066           cmd = f
-0000feb0: 2766 666d 7065 6720 2d68 7761 6363 656c  'ffmpeg -hwaccel
-0000fec0: 2061 7574 6f20 2d69 2022 7b76 6964 656f   auto -i "{video
-0000fed0: 5f70 6174 687d 2220 2d76 6620 2268 7775  _path}" -vf "hwu
-0000fee0: 706c 6f61 645f 6375 6461 2c72 6f74 6174  pload_cuda,rotat
-0000fef0: 653d 7b72 6f74 6174 696f 6e7d 2a28 5049  e={rotation}*(PI
-0000ff00: 2f31 3830 292c 666f 726d 6174 3d6e 7631  /180),format=nv1
-0000ff10: 327c 6375 6461 2220 2d63 3a76 2068 3236  2|cuda" -c:v h26
-0000ff20: 345f 6e76 656e 6320 227b 7361 7665 5f70  4_nvenc "{save_p
-0000ff30: 6174 687d 2220 2d79 270a 2020 2020 2020  ath}" -y'.      
-0000ff40: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0000ff50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ff60: 2020 2020 636d 6420 3d20 6627 6666 6d70      cmd = f'ffmp
-0000ff70: 6567 202d 6920 227b 7669 6465 6f5f 7061  eg -i "{video_pa
-0000ff80: 7468 7d22 202d 7666 2022 726f 7461 7465  th}" -vf "rotate
-0000ff90: 3d7b 726f 7461 7469 6f6e 7d2a 2850 492f  ={rotation}*(PI/
-0000ffa0: 3138 3029 2220 227b 7361 7665 5f70 6174  180)" "{save_pat
-0000ffb0: 687d 2220 2d79 270a 2020 2020 2020 2020  h}" -y'.        
-0000ffc0: 2020 2020 2020 2020 7375 6270 726f 6365          subproce
-0000ffd0: 7373 2e63 616c 6c28 636d 642c 2073 6865  ss.call(cmd, she
-0000ffe0: 6c6c 3d54 7275 652c 2073 7464 6f75 743d  ll=True, stdout=
-0000fff0: 7375 6270 726f 6365 7373 2e50 4950 4529  subprocess.PIPE)
-00010000: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00010010: 2020 2020 2020 2020 2020 2066 6f72 2076             for v
-00010020: 6964 656f 5f63 6e74 2c20 2876 6964 656f  ideo_cnt, (video
-00010030: 5f70 6174 682c 2072 6f74 6174 696f 6e29  _path, rotation)
-00010040: 2069 6e20 656e 756d 6572 6174 6528 7365   in enumerate(se
-00010050: 6c66 2e72 6573 756c 7473 2e69 7465 6d73  lf.results.items
-00010060: 2829 293a 0a20 2020 2020 2020 2020 2020  ()):.           
-00010070: 2020 2020 2063 6170 203d 2063 7632 2e56       cap = cv2.V
-00010080: 6964 656f 4361 7074 7572 6528 7669 6465  ideoCapture(vide
-00010090: 6f5f 7061 7468 290a 2020 2020 2020 2020  o_path).        
-000100a0: 2020 2020 2020 2020 5f2c 206e 616d 652c          _, name,
-000100b0: 205f 203d 2067 6574 5f66 6e5f 6578 7428   _ = get_fn_ext(
-000100c0: 6669 6c65 7061 7468 3d76 6964 656f 5f70  filepath=video_p
-000100d0: 6174 6829 0a20 2020 2020 2020 2020 2020  ath).           
-000100e0: 2020 2020 2072 6f74 6174 696f 6e5f 6d61       rotation_ma
-000100f0: 7472 6978 203d 2063 7632 2e67 6574 526f  trix = cv2.getRo
-00010100: 7461 7469 6f6e 4d61 7472 6978 3244 280a  tationMatrix2D(.
-00010110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010120: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
-00010130: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00010140: 6c66 2e76 6964 656f 5f6d 6574 615f 6461  lf.video_meta_da
-00010150: 7461 5b22 7769 6474 6822 5d20 2f20 322c  ta["width"] / 2,
-00010160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010170: 2020 2020 2020 2020 2073 656c 662e 7669           self.vi
-00010180: 6465 6f5f 6d65 7461 5f64 6174 615b 2268  deo_meta_data["h
-00010190: 6569 6768 7422 5d20 2f20 322c 0a20 2020  eight"] / 2,.   
-000101a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000101b0: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
-000101c0: 2020 2020 2020 2020 726f 7461 7469 6f6e          rotation
-000101d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000101e0: 2020 2020 2020 312c 0a20 2020 2020 2020        1,.       
-000101f0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00010200: 2020 2020 2020 2020 2020 2073 6176 655f             save_
-00010210: 7061 7468 203d 206f 732e 7061 7468 2e6a  path = os.path.j
-00010220: 6f69 6e28 0a20 2020 2020 2020 2020 2020  oin(.           
-00010230: 2020 2020 2020 2020 2073 656c 662e 7361           self.sa
-00010240: 7665 5f64 6972 2c20 6622 7b6e 616d 657d  ve_dir, f"{name}
-00010250: 5f72 6f74 6174 6564 5f7b 7365 6c66 2e64  _rotated_{self.d
-00010260: 6174 6574 696d 657d 2e6d 7034 220a 2020  atetime}.mp4".  
-00010270: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00010280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010290: 7669 6465 6f5f 6d65 7461 203d 2067 6574  video_meta = get
-000102a0: 5f76 6964 656f 5f6d 6574 615f 6461 7461  _video_meta_data
-000102b0: 2876 6964 656f 5f70 6174 683d 7669 6465  (video_path=vide
-000102c0: 6f5f 7061 7468 290a 2020 2020 2020 2020  o_path).        
-000102d0: 2020 2020 2020 2020 666f 7572 6363 203d          fourcc =
-000102e0: 2063 7632 2e56 6964 656f 5772 6974 6572   cv2.VideoWriter
-000102f0: 5f66 6f75 7263 6328 2a46 6f72 6d61 7473  _fourcc(*Formats
-00010300: 2e4d 5034 5f43 4f44 4543 2e76 616c 7565  .MP4_CODEC.value
-00010310: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00010320: 2020 7772 6974 6572 203d 2063 7632 2e56    writer = cv2.V
-00010330: 6964 656f 5772 6974 6572 280a 2020 2020  ideoWriter(.    
-00010340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010350: 7361 7665 5f70 6174 682c 0a20 2020 2020  save_path,.     
-00010360: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00010370: 6f75 7263 632c 0a20 2020 2020 2020 2020  ourcc,.         
-00010380: 2020 2020 2020 2020 2020 2076 6964 656f             video
-00010390: 5f6d 6574 615b 2266 7073 225d 2c0a 2020  _meta["fps"],.  
-000103a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000103b0: 2020 2876 6964 656f 5f6d 6574 615b 2277    (video_meta["w
-000103c0: 6964 7468 225d 2c20 7669 6465 6f5f 6d65  idth"], video_me
-000103d0: 7461 5b22 6865 6967 6874 225d 292c 0a20  ta["height"]),. 
-000103e0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-000103f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010400: 2069 6d67 5f63 6e74 203d 2030 0a20 2020   img_cnt = 0.   
-00010410: 2020 2020 2020 2020 2020 2020 2077 6869               whi
-00010420: 6c65 2054 7275 653a 0a20 2020 2020 2020  le True:.       
-00010430: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00010440: 2c20 696d 6720 3d20 6361 702e 7265 6164  , img = cap.read
-00010450: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-00010460: 2020 2020 2020 2069 6620 6e6f 7420 7265         if not re
-00010470: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00010480: 2020 2020 2020 2020 2020 2062 7265 616b             break
-00010490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000104a0: 2020 2020 2069 6d67 203d 2063 7632 2e77       img = cv2.w
-000104b0: 6172 7041 6666 696e 6528 0a20 2020 2020  arpAffine(.     
-000104c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000104d0: 2020 2069 6d67 2c0a 2020 2020 2020 2020     img,.        
-000104e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000104f0: 726f 7461 7469 6f6e 5f6d 6174 7269 782c  rotation_matrix,
-00010500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010510: 2020 2020 2020 2020 2028 7365 6c66 2e76           (self.v
-00010520: 6964 656f 5f6d 6574 615f 6461 7461 5b22  ideo_meta_data["
-00010530: 7769 6474 6822 5d2c 2073 656c 662e 7669  width"], self.vi
-00010540: 6465 6f5f 6d65 7461 5f64 6174 615b 2268  deo_meta_data["h
-00010550: 6569 6768 7422 5d29 2c0a 2020 2020 2020  eight"]),.      
-00010560: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00010570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010580: 2020 2020 7772 6974 6572 2e77 7269 7465      writer.write
-00010590: 2869 6d67 290a 2020 2020 2020 2020 2020  (img).          
-000105a0: 2020 2020 2020 2020 2020 696d 675f 636e            img_cn
-000105b0: 7420 2b3d 2031 0a20 2020 2020 2020 2020  t += 1.         
-000105c0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000105d0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000105e0: 2020 2020 2020 2020 2020 6627 526f 7461            f'Rota
-000105f0: 7469 6e67 2066 7261 6d65 207b 696d 675f  ting frame {img_
-00010600: 636e 747d 2f7b 7669 6465 6f5f 6d65 7461  cnt}/{video_meta
-00010610: 5b22 6672 616d 655f 636f 756e 7422 5d7d  ["frame_count"]}
-00010620: 2028 5669 6465 6f20 7b76 6964 656f 5f63   (Video {video_c
-00010630: 6e74 202b 2031 7d2f 7b6c 656e 2873 656c  nt + 1}/{len(sel
-00010640: 662e 7265 7375 6c74 732e 6b65 7973 2829  f.results.keys()
-00010650: 297d 2920 270a 2020 2020 2020 2020 2020  )}) '.          
-00010660: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00010670: 2020 2020 2020 2020 2020 2020 6361 702e              cap.
-00010680: 7265 6c65 6173 6528 290a 2020 2020 2020  release().      
-00010690: 2020 2020 2020 2020 2020 7772 6974 6572            writer
-000106a0: 2e72 656c 6561 7365 2829 0a20 2020 2020  .release().     
-000106b0: 2020 2073 7464 6f75 745f 7375 6363 6573     stdout_succes
-000106c0: 7328 0a20 2020 2020 2020 2020 2020 206d  s(.            m
-000106d0: 7367 3d66 2241 6c6c 2076 6964 656f 7320  sg=f"All videos 
-000106e0: 726f 7461 7465 6420 616e 6420 7361 7665  rotated and save
-000106f0: 6420 696e 207b 7365 6c66 2e73 6176 655f  d in {self.save_
-00010700: 6469 727d 222c 0a20 2020 2020 2020 2020  dir}",.         
-00010710: 2020 2065 6c61 7073 6564 5f74 696d 653d     elapsed_time=
-00010720: 7374 7228 726f 756e 6428 2874 696d 652e  str(round((time.
-00010730: 7469 6d65 2829 202d 2073 7461 7274 292c  time() - start),
-00010740: 2032 2929 2c0a 2020 2020 2020 2020 2020   2)),.          
-00010750: 2020 736f 7572 6365 3d73 656c 662e 5f5f    source=self.__
-00010760: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
-00010770: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
-00010780: 2064 6566 205f 5f73 6176 6528 7365 6c66   def __save(self
-00010790: 293a 0a20 2020 2020 2020 2070 726f 6365  ):.        proce
-000107a0: 7373 203d 204e 6f6e 650a 2020 2020 2020  ss = None.      
-000107b0: 2020 7365 6c66 2e72 6573 756c 7473 5b73    self.results[s
-000107c0: 656c 662e 6669 6c65 5f70 6174 685d 203d  elf.file_path] =
-000107d0: 2073 656c 662e 6469 665f 616e 676c 650a   self.dif_angle.
-000107e0: 2020 2020 2020 2020 6966 206c 656e 2873          if len(s
-000107f0: 656c 662e 7265 7375 6c74 732e 6b65 7973  elf.results.keys
-00010800: 2829 2920 3d3d 206c 656e 2873 656c 662e  ()) == len(self.
-00010810: 7669 6465 6f5f 7061 7468 7329 3a0a 2020  video_paths):.  
-00010820: 2020 2020 2020 2020 2020 7072 6f63 6573            proces
-00010830: 7320 3d20 6d75 6c74 6970 726f 6365 7373  s = multiprocess
-00010840: 696e 672e 5072 6f63 6573 7328 7461 7267  ing.Process(targ
-00010850: 6574 3d73 656c 662e 5f5f 7275 6e5f 726f  et=self.__run_ro
-00010860: 7461 7469 6f6e 2829 290a 2020 2020 2020  tation()).      
-00010870: 2020 2020 2020 7072 6f63 6573 732e 7374        process.st
-00010880: 6172 7428 290a 2020 2020 2020 2020 656c  art().        el
-00010890: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000108a0: 7365 6c66 2e5f 5f72 756e 5f69 6e74 6572  self.__run_inter
-000108b0: 6661 6365 280a 2020 2020 2020 2020 2020  face(.          
-000108c0: 2020 2020 2020 6669 6c65 5f70 6174 683d        file_path=
-000108d0: 7365 6c66 2e76 6964 656f 5f70 6174 6873  self.video_paths
-000108e0: 5b6c 656e 2873 656c 662e 7265 7375 6c74  [len(self.result
-000108f0: 732e 6b65 7973 2829 2920 2d20 315d 0a20  s.keys()) - 1]. 
-00010900: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00010910: 2020 2020 2069 6620 7072 6f63 6573 7320       if process 
-00010920: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00010930: 2020 2020 2020 2020 2070 726f 6365 7373           process
-00010940: 2e6a 6f69 6e28 290a 0a20 2020 2064 6566  .join()..    def
-00010950: 205f 5f62 696e 645f 6b65 7973 2873 656c   __bind_keys(sel
-00010960: 6629 3a0a 2020 2020 2020 2020 7365 6c66  f):.        self
-00010970: 2e6d 6169 6e5f 6672 6d2e 6269 6e64 280a  .main_frm.bind(.
-00010980: 2020 2020 2020 2020 2020 2020 223c 4c65              "<Le
-00010990: 6674 3e22 2c20 6c61 6d62 6461 2078 3a20  ft>", lambda x: 
-000109a0: 7365 6c66 2e5f 5f72 6f74 6174 6528 7661  self.__rotate(va
-000109b0: 6c75 653d 312c 2069 6d67 3d73 656c 662e  lue=1, img=self.
-000109c0: 5f6f 7269 675f 696d 6729 0a20 2020 2020  _orig_img).     
-000109d0: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-000109e0: 662e 6d61 696e 5f66 726d 2e62 696e 6428  f.main_frm.bind(
-000109f0: 0a20 2020 2020 2020 2020 2020 2022 3c52  .            "<R
-00010a00: 6967 6874 3e22 2c20 6c61 6d62 6461 2078  ight>", lambda x
-00010a10: 3a20 7365 6c66 2e5f 5f72 6f74 6174 6528  : self.__rotate(
-00010a20: 7661 6c75 653d 2d31 2c20 696d 673d 7365  value=-1, img=se
-00010a30: 6c66 2e5f 6f72 6967 5f69 6d67 290a 2020  lf._orig_img).  
-00010a40: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00010a50: 7365 6c66 2e6d 6169 6e5f 6672 6d2e 6269  self.main_frm.bi
-00010a60: 6e64 2822 3c45 7363 6170 653e 222c 206c  nd("<Escape>", l
-00010a70: 616d 6264 6120 783a 2073 656c 662e 5f5f  ambda x: self.__
-00010a80: 7361 7665 2829 290a 0a20 2020 2064 6566  save())..    def
-00010a90: 205f 5f72 756e 5f69 6e74 6572 6661 6365   __run_interface
-00010aa0: 2873 656c 662c 2066 696c 655f 7061 7468  (self, file_path
-00010ab0: 3a20 7374 7229 3a0a 2020 2020 2020 2020  : str):.        
-00010ac0: 7365 6c66 2e64 6966 5f61 6e67 6c65 203d  self.dif_angle =
-00010ad0: 2030 0a20 2020 2020 2020 2070 7269 6e74   0.        print
-00010ae0: 2866 696c 655f 7061 7468 290a 2020 2020  (file_path).    
-00010af0: 2020 2020 7365 6c66 2e76 6964 656f 5f6d      self.video_m
-00010b00: 6574 615f 6461 7461 203d 2067 6574 5f76  eta_data = get_v
-00010b10: 6964 656f 5f6d 6574 615f 6461 7461 2876  ideo_meta_data(v
-00010b20: 6964 656f 5f70 6174 683d 6669 6c65 5f70  ideo_path=file_p
-00010b30: 6174 6829 0a20 2020 2020 2020 2073 656c  ath).        sel
-00010b40: 662e 6669 6c65 5f70 6174 6820 3d20 6669  f.file_path = fi
-00010b50: 6c65 5f70 6174 680a 2020 2020 2020 2020  le_path.        
-00010b60: 5f2c 2073 656c 662e 7669 6465 6f5f 6e61  _, self.video_na
-00010b70: 6d65 2c20 5f20 3d20 6765 745f 666e 5f65  me, _ = get_fn_e
-00010b80: 7874 2866 696c 6570 6174 683d 6669 6c65  xt(filepath=file
-00010b90: 5f70 6174 6829 0a20 2020 2020 2020 2073  _path).        s
-00010ba0: 656c 662e 6d61 696e 5f66 726d 203d 2054  elf.main_frm = T
-00010bb0: 6f70 6c65 7665 6c28 290a 2020 2020 2020  oplevel().      
-00010bc0: 2020 7365 6c66 2e6d 6169 6e5f 6672 6d2e    self.main_frm.
-00010bd0: 7469 746c 6528 6622 524f 5441 5445 2056  title(f"ROTATE V
-00010be0: 4944 454f 207b 7365 6c66 2e76 6964 656f  IDEO {self.video
-00010bf0: 5f6e 616d 657d 2229 0a20 2020 2020 2020  _name}").       
-00010c00: 2073 656c 662e 7669 6465 6f5f 6672 6d20   self.video_frm 
-00010c10: 3d20 4672 616d 6528 7365 6c66 2e6d 6169  = Frame(self.mai
-00010c20: 6e5f 6672 6d29 0a20 2020 2020 2020 2073  n_frm).        s
-00010c30: 656c 662e 7669 6465 6f5f 6672 6d2e 6772  elf.video_frm.gr
-00010c40: 6964 2872 6f77 3d30 2c20 636f 6c75 6d6e  id(row=0, column
-00010c50: 3d30 290a 2020 2020 2020 2020 7365 6c66  =0).        self
-00010c60: 2e69 6e73 7472 7563 7469 6f6e 5f66 726d  .instruction_frm
-00010c70: 203d 2046 7261 6d65 2873 656c 662e 6d61   = Frame(self.ma
-00010c80: 696e 5f66 726d 2c20 7769 6474 683d 3130  in_frm, width=10
-00010c90: 302c 2068 6569 6768 743d 3130 3029 0a20  0, height=100). 
-00010ca0: 2020 2020 2020 2073 656c 662e 696e 7374         self.inst
-00010cb0: 7275 6374 696f 6e5f 6672 6d2e 6772 6964  ruction_frm.grid
-00010cc0: 2872 6f77 3d30 2c20 636f 6c75 6d6e 3d32  (row=0, column=2
-00010cd0: 2c20 7374 6963 6b79 3d4e 5729 0a20 2020  , sticky=NW).   
-00010ce0: 2020 2020 2073 656c 662e 6b65 795f 6c62       self.key_lb
-00010cf0: 6c73 203d 204c 6162 656c 280a 2020 2020  ls = Label(.    
-00010d00: 2020 2020 2020 2020 7365 6c66 2e69 6e73          self.ins
-00010d10: 7472 7563 7469 6f6e 5f66 726d 2c0a 2020  truction_frm,.  
-00010d20: 2020 2020 2020 2020 2020 7465 7874 3d22            text="
-00010d30: 5c6e 5c6e 204e 6176 6967 6174 696f 6e3a  \n\n Navigation:
-00010d40: 2022 0a20 2020 2020 2020 2020 2020 2022   ".            "
-00010d50: 5c6e 204c 6566 7420 6172 726f 7720 3d20  \n Left arrow = 
-00010d60: 31c2 b020 6c65 6674 220a 2020 2020 2020  1.. left".      
-00010d70: 2020 2020 2020 225c 6e20 5269 6768 7420        "\n Right 
-00010d80: 6172 726f 7720 3d20 31c2 b020 7269 6768  arrow = 1.. righ
-00010d90: 7422 0a20 2020 2020 2020 2020 2020 2022  t".            "
-00010da0: 5c6e 2045 7363 203d 2053 6176 6522 2c0a  \n Esc = Save",.
-00010db0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00010dc0: 2020 2073 656c 662e 6b65 795f 6c62 6c73     self.key_lbls
-00010dd0: 2e67 7269 6428 7374 6963 6b79 3d4e 5729  .grid(sticky=NW)
-00010de0: 0a20 2020 2020 2020 2073 656c 662e 6361  .        self.ca
-00010df0: 7020 3d20 6376 322e 5669 6465 6f43 6170  p = cv2.VideoCap
-00010e00: 7475 7265 2866 696c 655f 7061 7468 290a  ture(file_path).
-00010e10: 2020 2020 2020 2020 5f2c 2073 656c 662e          _, self.
-00010e20: 696d 6720 3d20 7365 6c66 2e63 6170 2e72  img = self.cap.r
-00010e30: 6561 6428 290a 2020 2020 2020 2020 7365  ead().        se
-00010e40: 6c66 2e5f 6f72 6967 5f69 6d67 203d 2063  lf._orig_img = c
-00010e50: 7632 2e63 7674 436f 6c6f 7228 7365 6c66  v2.cvtColor(self
-00010e60: 2e69 6d67 2c20 6376 322e 434f 4c4f 525f  .img, cv2.COLOR_
-00010e70: 5247 4232 4247 5229 0a20 2020 2020 2020  RGB2BGR).       
-00010e80: 2073 656c 662e 5f5f 696e 7365 7274 5f69   self.__insert_i
-00010e90: 6d67 2869 6d67 3d73 656c 662e 5f6f 7269  mg(img=self._ori
-00010ea0: 675f 696d 6729 0a20 2020 2020 2020 2073  g_img).        s
-00010eb0: 656c 662e 5f5f 6269 6e64 5f6b 6579 7328  elf.__bind_keys(
-00010ec0: 290a 0a20 2020 2064 6566 2072 756e 2873  )..    def run(s
-00010ed0: 656c 6629 3a0a 2020 2020 2020 2020 7365  elf):.        se
-00010ee0: 6c66 2e72 6573 756c 7473 203d 207b 7d0a  lf.results = {}.
-00010ef0: 2020 2020 2020 2020 666f 7220 7669 6465          for vide
-00010f00: 6f5f 7061 7468 2069 6e20 7365 6c66 2e76  o_path in self.v
-00010f10: 6964 656f 5f70 6174 6873 3a0a 2020 2020  ideo_paths:.    
-00010f20: 2020 2020 2020 2020 7365 6c66 2e5f 5f72          self.__r
-00010f30: 756e 5f69 6e74 6572 6661 6365 2876 6964  un_interface(vid
-00010f40: 656f 5f70 6174 6829 0a20 2020 2020 2020  eo_path).       
-00010f50: 2073 656c 662e 6d61 696e 5f66 726d 2e6d   self.main_frm.m
-00010f60: 6169 6e6c 6f6f 7028 290a 0a0a 6465 6620  ainloop()...def 
-00010f70: 6578 7472 6163 745f 6672 616d 6573 5f66  extract_frames_f
-00010f80: 726f 6d5f 616c 6c5f 7669 6465 6f73 5f69  rom_all_videos_i
-00010f90: 6e5f 6469 7265 6374 6f72 7928 0a20 2020  n_directory(.   
-00010fa0: 2063 6f6e 6669 675f 7061 7468 3a20 556e   config_path: Un
-00010fb0: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
-00010fc0: 4c69 6b65 5d2c 2064 6972 6563 746f 7279  Like], directory
-00010fd0: 3a20 556e 696f 6e5b 7374 722c 206f 732e  : Union[str, os.
-00010fe0: 5061 7468 4c69 6b65 5d0a 2920 2d3e 204e  PathLike].) -> N
-00010ff0: 6f6e 653a 0a20 2020 2022 2222 0a20 2020  one:.    """.   
-00011000: 2045 7874 7261 6374 2061 6c6c 2066 7261   Extract all fra
-00011010: 6d65 7320 6672 6f6d 2061 6c6c 2076 6964  mes from all vid
-00011020: 656f 7320 696e 2061 2064 6972 6563 746f  eos in a directo
-00011030: 7279 2e20 5468 6520 7265 7375 6c74 7320  ry. The results 
-00011040: 6172 6520 7361 7665 6420 696e 2074 6865  are saved in the
-00011050: 2070 726f 6a65 6374 5f66 6f6c 6465 722f   project_folder/
-00011060: 6672 616d 6573 2f69 6e70 7574 2064 6972  frames/input dir
-00011070: 6563 746f 7279 206f 6620 7468 6520 5369  ectory of the Si
-00011080: 6d42 4120 7072 6f6a 6563 740a 0a20 2020  mBA project..   
-00011090: 203a 7061 7261 6d65 7465 7220 7374 7220   :parameter str 
-000110a0: 636f 6e66 6967 5f70 6174 683a 2070 6174  config_path: pat
-000110b0: 6820 746f 2053 696d 4241 2070 726f 6a65  h to SimBA proje
-000110c0: 6374 2063 6f6e 6669 6720 6669 6c65 2069  ct config file i
-000110d0: 6e20 436f 6e66 6967 7061 7273 6572 2066  n Configparser f
-000110e0: 6f72 6d61 742e 0a20 2020 203a 7061 7261  ormat..    :para
-000110f0: 6d65 7465 7220 7374 7220 6469 7265 6374  meter str direct
-00011100: 6f72 793a 2070 6174 6820 746f 2066 696c  ory: path to fil
-00011110: 6520 6f72 2066 6f6c 6465 7220 636f 6e74  e or folder cont
-00011120: 6169 6e69 6e67 2076 6964 656f 7320 696e  aining videos in
-00011130: 206d 7034 2061 6e64 2f6f 7220 6176 6920   mp4 and/or avi 
-00011140: 666f 726d 6174 2e0a 0a20 2020 203a 6578  format...    :ex
-00011150: 616d 706c 653a 0a20 2020 203e 3e3e 2065  ample:.    >>> e
-00011160: 7874 7261 6374 5f66 7261 6d65 735f 6672  xtract_frames_fr
-00011170: 6f6d 5f61 6c6c 5f76 6964 656f 735f 696e  om_all_videos_in
-00011180: 5f64 6972 6563 746f 7279 2863 6f6e 6669  _directory(confi
-00011190: 675f 7061 7468 3d27 7072 6f6a 6563 745f  g_path='project_
-000111a0: 666f 6c64 6572 2f70 726f 6a65 6374 5f63  folder/project_c
-000111b0: 6f6e 6669 672e 696e 6927 2c20 736f 7572  onfig.ini', sour
-000111c0: 6365 3d27 2f74 6573 7473 2f74 6573 745f  ce='/tests/test_
-000111d0: 6461 7461 2f76 6964 656f 5f74 6573 7473  data/video_tests
-000111e0: 2729 0a20 2020 2022 2222 0a0a 2020 2020  ').    """..    
-000111f0: 7469 6d65 7220 3d20 5369 6d62 6154 696d  timer = SimbaTim
-00011200: 6572 2873 7461 7274 3d54 7275 6529 0a20  er(start=True). 
-00011210: 2020 2076 6964 656f 5f70 6174 6873 2c20     video_paths, 
-00011220: 7669 6465 6f5f 7479 7065 7320 3d20 5b5d  video_types = []
-00011230: 2c20 5b22 2e61 7669 222c 2022 2e6d 7034  , [".avi", ".mp4
-00011240: 225d 0a20 2020 2066 696c 6573 5f69 6e5f  "].    files_in_
-00011250: 666f 6c64 6572 203d 2067 6c6f 622e 676c  folder = glob.gl
-00011260: 6f62 2864 6972 6563 746f 7279 202b 2022  ob(directory + "
-00011270: 2f2a 2229 0a20 2020 2066 6f72 2066 696c  /*").    for fil
-00011280: 655f 7061 7468 2069 6e20 6669 6c65 735f  e_path in files_
-00011290: 696e 5f66 6f6c 6465 723a 0a20 2020 2020  in_folder:.     
-000112a0: 2020 205f 2c20 5f2c 2065 7874 203d 2067     _, _, ext = g
-000112b0: 6574 5f66 6e5f 6578 7428 6669 6c65 7061  et_fn_ext(filepa
-000112c0: 7468 3d66 696c 655f 7061 7468 290a 2020  th=file_path).  
-000112d0: 2020 2020 2020 6966 2065 7874 2e6c 6f77        if ext.low
-000112e0: 6572 2829 2069 6e20 7669 6465 6f5f 7479  er() in video_ty
-000112f0: 7065 733a 0a20 2020 2020 2020 2020 2020  pes:.           
-00011300: 2076 6964 656f 5f70 6174 6873 2e61 7070   video_paths.app
-00011310: 656e 6428 6669 6c65 5f70 6174 6829 0a20  end(file_path). 
-00011320: 2020 2069 6620 6c65 6e28 7669 6465 6f5f     if len(video_
-00011330: 7061 7468 7329 203d 3d20 303a 0a20 2020  paths) == 0:.   
-00011340: 2020 2020 2072 6169 7365 204e 6f46 696c       raise NoFil
-00011350: 6573 466f 756e 6445 7272 6f72 280a 2020  esFoundError(.  
-00011360: 2020 2020 2020 2020 2020 6d73 673d 6622            msg=f"
-00011370: 5349 4d42 4120 4552 524f 523a 2030 2076  SIMBA ERROR: 0 v
-00011380: 6964 656f 2066 696c 6573 2069 6e20 6d70  ideo files in mp
-00011390: 3420 6f72 2061 7669 2066 6f72 6d61 7420  4 or avi format 
-000113a0: 666f 756e 6420 696e 207b 6469 7265 6374  found in {direct
-000113b0: 6f72 797d 222c 0a20 2020 2020 2020 2020  ory}",.         
-000113c0: 2020 2073 6f75 7263 653d 6578 7472 6163     source=extrac
-000113d0: 745f 6672 616d 6573 5f66 726f 6d5f 616c  t_frames_from_al
-000113e0: 6c5f 7669 6465 6f73 5f69 6e5f 6469 7265  l_videos_in_dire
-000113f0: 6374 6f72 792e 5f5f 6e61 6d65 5f5f 2c0a  ctory.__name__,.
-00011400: 2020 2020 2020 2020 290a 2020 2020 636f          ).    co
-00011410: 6e66 6967 203d 2072 6561 645f 636f 6e66  nfig = read_conf
-00011420: 6967 5f66 696c 6528 636f 6e66 6967 5f70  ig_file(config_p
-00011430: 6174 6829 0a20 2020 2070 726f 6a65 6374  ath).    project
-00011440: 5f70 6174 6820 3d20 7265 6164 5f63 6f6e  _path = read_con
-00011450: 6669 675f 656e 7472 7928 0a20 2020 2020  fig_entry(.     
-00011460: 2020 2063 6f6e 6669 672c 2022 4765 6e65     config, "Gene
-00011470: 7261 6c20 7365 7474 696e 6773 222c 2022  ral settings", "
-00011480: 7072 6f6a 6563 745f 7061 7468 222c 2064  project_path", d
-00011490: 6174 615f 7479 7065 3d22 666f 6c64 6572  ata_type="folder
-000114a0: 5f70 6174 6822 0a20 2020 2029 0a0a 2020  _path".    )..  
-000114b0: 2020 7072 696e 7428 0a20 2020 2020 2020    print(.       
-000114c0: 2022 4578 7472 6163 7469 6e67 2066 7261   "Extracting fra
-000114d0: 6d65 7320 666f 7220 7b7d 2076 6964 656f  mes for {} video
-000114e0: 7320 696e 746f 2070 726f 6a65 6374 5f66  s into project_f
-000114f0: 6f6c 6465 722f 6672 616d 6573 2f69 6e70  older/frames/inp
-00011500: 7574 2064 6972 6563 746f 7279 2e2e 2e22  ut directory..."
-00011510: 2e66 6f72 6d61 7428 0a20 2020 2020 2020  .format(.       
-00011520: 2020 2020 206c 656e 2876 6964 656f 5f70       len(video_p
-00011530: 6174 6873 290a 2020 2020 2020 2020 290a  aths).        ).
-00011540: 2020 2020 290a 2020 2020 666f 7220 7669      ).    for vi
-00011550: 6465 6f5f 7061 7468 2069 6e20 7669 6465  deo_path in vide
-00011560: 6f5f 7061 7468 733a 0a20 2020 2020 2020  o_paths:.       
-00011570: 2064 6972 5f6e 616d 652c 2076 6964 656f   dir_name, video
-00011580: 5f6e 616d 652c 2065 7874 203d 2067 6574  _name, ext = get
-00011590: 5f66 6e5f 6578 7428 7669 6465 6f5f 7061  _fn_ext(video_pa
-000115a0: 7468 290a 2020 2020 2020 2020 7361 7665  th).        save
-000115b0: 5f70 6174 6820 3d20 6f73 2e70 6174 682e  _path = os.path.
-000115c0: 6a6f 696e 2870 726f 6a65 6374 5f70 6174  join(project_pat
-000115d0: 682c 2022 6672 616d 6573 222c 2022 696e  h, "frames", "in
-000115e0: 7075 7422 2c20 7669 6465 6f5f 6e61 6d65  put", video_name
-000115f0: 290a 2020 2020 2020 2020 6966 206e 6f74  ).        if not
-00011600: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
-00011610: 7361 7665 5f70 6174 6829 3a0a 2020 2020  save_path):.    
-00011620: 2020 2020 2020 2020 6f73 2e6d 616b 6564          os.maked
-00011630: 6972 7328 7361 7665 5f70 6174 6829 0a20  irs(save_path). 
-00011640: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00011650: 2020 2020 2020 2020 2070 7269 6e74 280a           print(.
-00011660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011670: 6622 4672 616d 6573 2066 6f72 2076 6964  f"Frames for vid
-00011680: 656f 207b 7669 6465 6f5f 6e61 6d65 7d20  eo {video_name} 
-00011690: 616c 7265 6164 7920 6578 7472 6163 7465  already extracte
-000116a0: 642e 2053 696d 4241 2069 7320 6f76 6572  d. SimBA is over
-000116b0: 7772 6974 696e 6720 7072 696f 7220 6672  writing prior fr
-000116c0: 616d 6573 2e2e 2e22 0a20 2020 2020 2020  ames...".       
-000116d0: 2020 2020 2029 0a20 2020 2020 2020 2076       ).        v
-000116e0: 6964 656f 5f74 6f5f 6672 616d 6573 2876  ideo_to_frames(v
-000116f0: 6964 656f 5f70 6174 682c 2073 6176 655f  ideo_path, save_
-00011700: 7061 7468 2c20 6f76 6572 7772 6974 653d  path, overwrite=
-00011710: 5472 7565 2c20 6576 6572 793d 312c 2063  True, every=1, c
-00011720: 6875 6e6b 5f73 697a 653d 3130 3030 290a  hunk_size=1000).
-00011730: 2020 2020 7469 6d65 722e 7374 6f70 5f74      timer.stop_t
-00011740: 696d 6572 2829 0a20 2020 2073 7464 6f75  imer().    stdou
-00011750: 745f 7375 6363 6573 7328 0a20 2020 2020  t_success(.     
-00011760: 2020 2066 2246 7261 6d65 7320 6372 6561     f"Frames crea
-00011770: 7465 6420 666f 7220 7b73 7472 286c 656e  ted for {str(len
-00011780: 2876 6964 656f 5f70 6174 6873 2929 7d20  (video_paths))} 
-00011790: 7669 6465 6f73 222c 0a20 2020 2020 2020  videos",.       
-000117a0: 2065 6c61 7073 6564 5f74 696d 653d 7469   elapsed_time=ti
-000117b0: 6d65 722e 656c 6170 7365 645f 7469 6d65  mer.elapsed_time
-000117c0: 5f73 7472 2c0a 2020 2020 2020 2020 736f  _str,.        so
-000117d0: 7572 6365 3d65 7874 7261 6374 5f66 7261  urce=extract_fra
-000117e0: 6d65 735f 6672 6f6d 5f61 6c6c 5f76 6964  mes_from_all_vid
-000117f0: 656f 735f 696e 5f64 6972 6563 746f 7279  eos_in_directory
-00011800: 2e5f 5f6e 616d 655f 5f2c 0a20 2020 2029  .__name__,.    )
-00011810: 0a0a 0a64 6566 2063 6f70 795f 696d 675f  ...def copy_img_
-00011820: 666f 6c64 6572 280a 2020 2020 636f 6e66  folder(.    conf
-00011830: 6967 5f70 6174 683a 2055 6e69 6f6e 5b73  ig_path: Union[s
-00011840: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
-00011850: 2c20 736f 7572 6365 3a20 556e 696f 6e5b  , source: Union[
-00011860: 7374 722c 206f 732e 5061 7468 4c69 6b65  str, os.PathLike
-00011870: 5d0a 2920 2d3e 204e 6f6e 653a 0a20 2020  ].) -> None:.   
-00011880: 2022 2222 0a20 2020 2043 6f70 7920 6469   """.    Copy di
-00011890: 7265 6374 6f72 7920 6f66 2070 6e67 2066  rectory of png f
-000118a0: 696c 6573 2074 6f20 7468 6520 5369 6d42  iles to the SimB
-000118b0: 4120 7072 6f6a 6563 742e 2054 6865 2064  A project. The d
-000118c0: 6972 6563 746f 7279 2069 7320 7374 6f72  irectory is stor
-000118d0: 6564 2069 6e20 7468 6520 7072 6f6a 6563  ed in the projec
-000118e0: 745f 666f 6c64 6572 2f66 7261 6d65 732f  t_folder/frames/
-000118f0: 696e 7075 7420 666f 6c64 6572 206f 6620  input folder of 
-00011900: 7468 6520 5369 6d42 4120 7072 6f6a 6563  the SimBA projec
-00011910: 740a 0a20 2020 203a 7061 7261 6d65 7465  t..    :paramete
-00011920: 7220 7374 7220 636f 6e66 6967 5f70 6174  r str config_pat
-00011930: 683a 2070 6174 6820 746f 2053 696d 4241  h: path to SimBA
-00011940: 2070 726f 6a65 6374 2063 6f6e 6669 6720   project config 
-00011950: 6669 6c65 2069 6e20 436f 6e66 6967 7061  file in Configpa
-00011960: 7273 6572 2066 6f72 6d61 742e 0a20 2020  rser format..   
-00011970: 203a 7061 7261 6d65 7465 7220 7374 7220   :parameter str 
-00011980: 736f 7572 6365 3a20 7061 7468 2074 6f20  source: path to 
-00011990: 696d 6167 6520 666f 6c64 6572 206f 7574  image folder out
-000119a0: 7369 6465 2053 696d 4241 2070 726f 6a65  side SimBA proje
-000119b0: 6374 2e0a 0a20 2020 203a 6578 616d 706c  ct...    :exampl
-000119c0: 653a 0a20 2020 203e 3e3e 2063 6f70 795f  e:.    >>> copy_
-000119d0: 696d 675f 666f 6c64 6572 2863 6f6e 6669  img_folder(confi
-000119e0: 675f 7061 7468 3d27 4d79 5369 6d42 4170  g_path='MySimBAp
-000119f0: 726f 6a65 6374 436f 6e66 6967 272c 2073  rojectConfig', s
-00011a00: 6f75 7263 653d 272f 4469 7265 6374 6f72  ource='/Director
-00011a10: 7957 6974 6856 6964 656f 732f 2729 0a0a  yWithVideos/')..
-00011a20: 2020 2020 2222 220a 2020 2020 7469 6d65      """.    time
-00011a30: 7220 3d20 5369 6d62 6154 696d 6572 2873  r = SimbaTimer(s
-00011a40: 7461 7274 3d54 7275 6529 0a20 2020 2069  tart=True).    i
-00011a50: 6620 6e6f 7420 6f73 2e70 6174 682e 6973  f not os.path.is
-00011a60: 6469 7228 736f 7572 6365 293a 0a20 2020  dir(source):.   
-00011a70: 2020 2020 2072 6169 7365 204e 6f74 4469       raise NotDi
-00011a80: 7265 6374 6f72 7945 7272 6f72 280a 2020  rectoryError(.  
-00011a90: 2020 2020 2020 2020 2020 6d73 673d 6622            msg=f"
-00011aa0: 5349 4d42 4120 4552 524f 523a 2073 6f75  SIMBA ERROR: sou
-00011ab0: 7263 6520 7b73 6f75 7263 657d 2069 7320  rce {source} is 
-00011ac0: 6e6f 7420 6120 6469 7265 6374 6f72 792e  not a directory.
-00011ad0: 222c 0a20 2020 2020 2020 2020 2020 2073  ",.            s
-00011ae0: 6f75 7263 653d 636f 7079 5f69 6d67 5f66  ource=copy_img_f
-00011af0: 6f6c 6465 722e 5f5f 6e61 6d65 5f5f 2c0a  older.__name__,.
-00011b00: 2020 2020 2020 2020 290a 2020 2020 6966          ).    if
-00011b10: 206c 656e 2867 6c6f 622e 676c 6f62 2873   len(glob.glob(s
-00011b20: 6f75 7263 6520 2b20 222f 2a2e 706e 6722  ource + "/*.png"
-00011b30: 2929 203d 3d20 303a 0a20 2020 2020 2020  )) == 0:.       
-00011b40: 2072 6169 7365 204e 6f46 696c 6573 466f   raise NoFilesFo
-00011b50: 756e 6445 7272 6f72 280a 2020 2020 2020  undError(.      
-00011b60: 2020 2020 2020 6d73 673d 6622 5349 4d42        msg=f"SIMB
-00011b70: 4120 4552 524f 523a 2073 6f75 7263 6520  A ERROR: source 
-00011b80: 7b73 6f75 7263 657d 2064 6f65 7320 6e6f  {source} does no
-00011b90: 7420 636f 6e74 6169 6e20 616e 7920 2e70  t contain any .p
-00011ba0: 6e67 2066 696c 6573 2e22 2c0a 2020 2020  ng files.",.    
-00011bb0: 2020 2020 2020 2020 736f 7572 6365 3d63          source=c
-00011bc0: 6f70 795f 696d 675f 666f 6c64 6572 2e5f  opy_img_folder._
-00011bd0: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
-00011be0: 2029 0a20 2020 2069 6e70 7574 5f62 6173   ).    input_bas
-00011bf0: 656e 616d 6520 3d20 6f73 2e70 6174 682e  ename = os.path.
-00011c00: 6261 7365 6e61 6d65 2873 6f75 7263 6529  basename(source)
-00011c10: 0a20 2020 2063 6f6e 6669 6720 3d20 7265  .    config = re
-00011c20: 6164 5f63 6f6e 6669 675f 6669 6c65 2863  ad_config_file(c
-00011c30: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-00011c40: 7072 6f6a 6563 745f 7061 7468 203d 2072  project_path = r
-00011c50: 6561 645f 636f 6e66 6967 5f65 6e74 7279  ead_config_entry
-00011c60: 280a 2020 2020 2020 2020 636f 6e66 6967  (.        config
-00011c70: 2c0a 2020 2020 2020 2020 436f 6e66 6967  ,.        Config
-00011c80: 4b65 792e 4745 4e45 5241 4c5f 5345 5454  Key.GENERAL_SETT
-00011c90: 494e 4753 2e76 616c 7565 2c0a 2020 2020  INGS.value,.    
-00011ca0: 2020 2020 436f 6e66 6967 4b65 792e 5052      ConfigKey.PR
-00011cb0: 4f4a 4543 545f 5041 5448 2e76 616c 7565  OJECT_PATH.value
-00011cc0: 2c0a 2020 2020 2020 2020 6461 7461 5f74  ,.        data_t
-00011cd0: 7970 653d 2266 6f6c 6465 725f 7061 7468  ype="folder_path
-00011ce0: 222c 0a20 2020 2029 0a20 2020 2069 6e70  ",.    ).    inp
-00011cf0: 7574 5f66 7261 6d65 735f 6469 7220 3d20  ut_frames_dir = 
-00011d00: 6f73 2e70 6174 682e 6a6f 696e 2870 726f  os.path.join(pro
-00011d10: 6a65 6374 5f70 6174 682c 2050 6174 6873  ject_path, Paths
-00011d20: 2e49 4e50 5554 5f46 5241 4d45 535f 4449  .INPUT_FRAMES_DI
-00011d30: 522e 7661 6c75 6529 0a20 2020 2064 6573  R.value).    des
-00011d40: 7469 6e61 7469 6f6e 203d 206f 732e 7061  tination = os.pa
-00011d50: 7468 2e6a 6f69 6e28 696e 7075 745f 6672  th.join(input_fr
-00011d60: 616d 6573 5f64 6972 2c20 696e 7075 745f  ames_dir, input_
-00011d70: 6261 7365 6e61 6d65 290a 2020 2020 6966  basename).    if
-00011d80: 206f 732e 7061 7468 2e69 7364 6972 2864   os.path.isdir(d
-00011d90: 6573 7469 6e61 7469 6f6e 293a 0a20 2020  estination):.   
-00011da0: 2020 2020 2072 6169 7365 2044 6972 6563       raise Direc
-00011db0: 746f 7279 4578 6973 7445 7272 6f72 280a  toryExistError(.
-00011dc0: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
-00011dd0: 6622 5349 4d42 4120 4552 524f 523a 207b  f"SIMBA ERROR: {
-00011de0: 6465 7374 696e 6174 696f 6e7d 2061 6c72  destination} alr
-00011df0: 6561 6479 2065 7869 7374 2069 6e20 5369  eady exist in Si
-00011e00: 6d42 4120 7072 6f6a 6563 742e 222c 0a20  mBA project.",. 
-00011e10: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-00011e20: 653d 636f 7079 5f69 6d67 5f66 6f6c 6465  e=copy_img_folde
-00011e30: 722e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  r.__name__,.    
-00011e40: 2020 2020 290a 2020 2020 7072 696e 7428      ).    print(
-00011e50: 6622 496d 706f 7274 696e 6720 696d 6167  f"Importing imag
-00011e60: 6520 6669 6c65 7320 666f 7220 7b69 6e70  e files for {inp
-00011e70: 7574 5f62 6173 656e 616d 657d 2e2e 2e22  ut_basename}..."
-00011e80: 290a 2020 2020 7368 7574 696c 2e63 6f70  ).    shutil.cop
-00011e90: 7974 7265 6528 736f 7572 6365 2c20 6465  ytree(source, de
-00011ea0: 7374 696e 6174 696f 6e29 0a20 2020 2074  stination).    t
-00011eb0: 696d 6572 2e73 746f 705f 7469 6d65 7228  imer.stop_timer(
-00011ec0: 290a 2020 2020 7374 646f 7574 5f73 7563  ).    stdout_suc
-00011ed0: 6365 7373 280a 2020 2020 2020 2020 6d73  cess(.        ms
-00011ee0: 673d 6622 7b64 6573 7469 6e61 7469 6f6e  g=f"{destination
-00011ef0: 7d20 696d 706f 7274 6564 2074 6f20 5369  } imported to Si
-00011f00: 6d42 4120 7072 6f6a 6563 7422 2c0a 2020  mBA project",.  
-00011f10: 2020 2020 2020 656c 6170 7365 645f 7469        elapsed_ti
-00011f20: 6d65 3d74 696d 6572 2e65 6c61 7073 6564  me=timer.elapsed
-00011f30: 5f74 696d 655f 7374 722c 0a20 2020 2020  _time_str,.     
-00011f40: 2020 2073 6f75 7263 653d 636f 7079 5f69     source=copy_i
-00011f50: 6d67 5f66 6f6c 6465 722e 5f5f 6e61 6d65  mg_folder.__name
-00011f60: 5f5f 2c0a 2020 2020 290a 0a0a 6465 6620  __,.    )...def 
-00011f70: 6170 7065 6e64 5f61 7564 696f 280a 2020  append_audio(.  
-00011f80: 2020 7669 6465 6f5f 7061 7468 3a20 556e    video_path: Un
-00011f90: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
-00011fa0: 4c69 6b65 5d2c 0a20 2020 2061 7564 696f  Like],.    audio
-00011fb0: 5f70 6174 683a 2055 6e69 6f6e 5b73 7472  _path: Union[str
-00011fc0: 2c20 6f73 2e50 6174 684c 696b 655d 2c0a  , os.PathLike],.
-00011fd0: 2020 2020 6175 6469 6f5f 7372 635f 7479      audio_src_ty
-00011fe0: 7065 3a20 4c69 7465 7261 6c5b 2276 6964  pe: Literal["vid
-00011ff0: 656f 222c 2022 6175 6469 6f22 5d20 3d20  eo", "audio"] = 
-00012000: 2276 6964 656f 222c 0a29 202d 3e20 4e6f  "video",.) -> No
-00012010: 6e65 3a0a 2020 2020 2222 220a 2020 2020  ne:.    """.    
-00012020: 4170 7065 6e64 2061 7564 696f 2074 7261  Append audio tra
-00012030: 636b 2066 726f 6d20 6f6e 6520 7669 6465  ck from one vide
-00012040: 6f20 746f 2061 6e6f 7468 6572 2076 6964  o to another vid
-00012050: 656f 2077 6974 686f 7574 2061 6e20 6175  eo without an au
-00012060: 6469 6f20 7472 6163 6b2e 0a0a 2020 2020  dio track...    
-00012070: 3a70 6172 616d 2055 6e69 6f6e 5b73 7472  :param Union[str
-00012080: 2c20 6f73 2e50 6174 684c 696b 655d 2076  , os.PathLike] v
-00012090: 6964 656f 5f6f 6e65 5f70 6174 683a 2050  ideo_one_path: P
-000120a0: 6174 6820 746f 2076 6964 656f 2066 696c  ath to video fil
-000120b0: 6520 7769 7468 6f75 7420 6175 6469 6f20  e without audio 
-000120c0: 7472 6163 6b2e 0a20 2020 203a 7061 7261  track..    :para
-000120d0: 6d20 556e 696f 6e5b 7374 722c 206f 732e  m Union[str, os.
-000120e0: 5061 7468 4c69 6b65 5d20 6175 6469 6f5f  PathLike] audio_
-000120f0: 7061 7468 3a20 5061 7468 2074 6f20 6669  path: Path to fi
-00012100: 6c65 2028 652e 672e 2c20 7669 6465 6f29  le (e.g., video)
-00012110: 2077 6974 6820 6175 6469 6f20 7472 6163   with audio trac
-00012120: 6b2e 0a20 2020 203a 7061 7261 6d20 4c69  k..    :param Li
-00012130: 7465 7261 6c5b 2776 6964 656f 272c 2027  teral['video', '
-00012140: 6175 6469 6f27 5d20 6175 6469 6f5f 7372  audio'] audio_sr
-00012150: 635f 7479 7065 3a20 5479 7065 206f 6620  c_type: Type of 
-00012160: 6175 6469 6f20 736f 7572 6365 206f 6620  audio source of 
-00012170: 2276 6964 656f 5f74 776f 5f70 6174 6822  "video_two_path"
-00012180: 2028 652e 672e 2c20 7669 6465 6f20 6f72   (e.g., video or
-00012190: 2061 7564 696f 2066 696c 6529 2e0a 0a20   audio file)... 
-000121a0: 2020 203a 6578 616d 706c 653a 0a20 2020     :example:.   
-000121b0: 203e 3e3e 2061 7070 656e 645f 6175 6469   >>> append_audi
-000121c0: 6f28 7669 6465 6f5f 7061 7468 3d27 2f55  o(video_path='/U
-000121d0: 7365 7273 2f73 696d 6f6e 2f44 6573 6b74  sers/simon/Deskt
-000121e0: 6f70 2f65 6e76 732f 7472 6f75 626c 6573  op/envs/troubles
-000121f0: 686f 6f74 696e 672f 7477 6f5f 626c 6163  hooting/two_blac
-00012200: 6b5f 616e 696d 616c 735f 3134 6270 2f70  k_animals_14bp/p
-00012210: 726f 6a65 6374 5f66 6f6c 6465 722f 7669  roject_folder/vi
-00012220: 6465 6f73 2f6d 6572 6765 645f 7669 6465  deos/merged_vide
-00012230: 6f5f 3230 3233 3034 3235 3230 3136 3337  o_20230425201637
-00012240: 2e6d 7034 272c 0a20 2020 203e 3e3e 2061  .mp4',.    >>> a
-00012250: 7564 696f 5f70 6174 683d 222f 5573 6572  udio_path="/User
-00012260: 732f 7369 6d6f 6e2f 446f 6375 6d65 6e74  s/simon/Document
-00012270: 732f 5a6f 6f6d 2f64 6464 2f76 6964 656f  s/Zoom/ddd/video
-00012280: 3131 3830 3733 3232 3333 2e6d 7034 2229  1180732233.mp4")
-00012290: 0a20 2020 2022 2222 0a0a 2020 2020 6966  .    """..    if
-000122a0: 206e 6f74 2063 6865 636b 5f66 666d 7065   not check_ffmpe
-000122b0: 675f 6176 6169 6c61 626c 6528 293a 0a20  g_available():. 
-000122c0: 2020 2020 2020 2072 6169 7365 2046 464d         raise FFM
-000122d0: 5045 474e 6f74 466f 756e 6445 7272 6f72  PEGNotFoundError
-000122e0: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
-000122f0: 673d 2246 464d 7065 6720 6e6f 7420 666f  g="FFMpeg not fo
-00012300: 756e 6420 6f6e 2063 6f6d 7075 7465 722e  und on computer.
-00012310: 2053 6565 2053 696d 4241 2064 6f63 7320   See SimBA docs 
-00012320: 666f 7220 696e 7374 616c 6c20 696e 7374  for install inst
-00012330: 7275 6374 696f 6e73 2e22 2c0a 2020 2020  ructions.",.    
-00012340: 2020 2020 2020 2020 736f 7572 6365 3d61          source=a
-00012350: 7070 656e 645f 6175 6469 6f2e 5f5f 6e61  ppend_audio.__na
-00012360: 6d65 5f5f 2c0a 2020 2020 2020 2020 290a  me__,.        ).
-00012370: 2020 2020 6368 6563 6b5f 6669 6c65 5f65      check_file_e
-00012380: 7869 7374 5f61 6e64 5f72 6561 6461 626c  xist_and_readabl
-00012390: 6528 6669 6c65 5f70 6174 683d 7669 6465  e(file_path=vide
-000123a0: 6f5f 7061 7468 290a 2020 2020 6368 6563  o_path).    chec
-000123b0: 6b5f 6669 6c65 5f65 7869 7374 5f61 6e64  k_file_exist_and
-000123c0: 5f72 6561 6461 626c 6528 6669 6c65 5f70  _readable(file_p
-000123d0: 6174 683d 6175 6469 6f5f 7061 7468 290a  ath=audio_path).
-000123e0: 2020 2020 7669 6465 6f5f 6d65 7461 5f64      video_meta_d
-000123f0: 6174 6120 3d20 6765 745f 7669 6465 6f5f  ata = get_video_
-00012400: 6d65 7461 5f64 6174 6128 7669 6465 6f5f  meta_data(video_
-00012410: 7061 7468 3d76 6964 656f 5f70 6174 6829  path=video_path)
-00012420: 0a20 2020 2061 7564 696f 5f73 7263 5f6d  .    audio_src_m
-00012430: 6574 615f 6461 7461 203d 2067 6574 5f76  eta_data = get_v
-00012440: 6964 656f 5f6d 6574 615f 6461 7461 2876  ideo_meta_data(v
-00012450: 6964 656f 5f70 6174 683d 6175 6469 6f5f  ideo_path=audio_
-00012460: 7061 7468 290a 2020 2020 7361 7665 5f70  path).    save_p
-00012470: 6174 6820 3d20 6f73 2e70 6174 682e 6a6f  ath = os.path.jo
-00012480: 696e 280a 2020 2020 2020 2020 6f73 2e70  in(.        os.p
-00012490: 6174 682e 6469 726e 616d 6528 7669 6465  ath.dirname(vide
-000124a0: 6f5f 7061 7468 292c 2067 6574 5f66 6e5f  o_path), get_fn_
-000124b0: 6578 7428 6669 6c65 7061 7468 3d76 6964  ext(filepath=vid
-000124c0: 656f 5f70 6174 6829 5b31 5d20 2b20 225f  eo_path)[1] + "_
-000124d0: 775f 6175 6469 6f2e 6d70 3422 0a20 2020  w_audio.mp4".   
-000124e0: 2029 0a20 2020 2063 6d64 203d 205b 0a20   ).    cmd = [. 
-000124f0: 2020 2020 2020 2022 6666 7072 6f62 6522         "ffprobe"
-00012500: 2c0a 2020 2020 2020 2020 222d 7622 2c0a  ,.        "-v",.
-00012510: 2020 2020 2020 2020 2265 7272 6f72 222c          "error",
-00012520: 0a20 2020 2020 2020 2022 2d73 656c 6563  .        "-selec
-00012530: 745f 7374 7265 616d 7322 2c0a 2020 2020  t_streams",.    
-00012540: 2020 2020 2261 3a30 222c 0a20 2020 2020      "a:0",.     
-00012550: 2020 2022 2d73 686f 775f 656e 7472 6965     "-show_entrie
-00012560: 7322 2c0a 2020 2020 2020 2020 2273 7472  s",.        "str
-00012570: 6561 6d3d 636f 6465 635f 6e61 6d65 222c  eam=codec_name",
-00012580: 0a20 2020 2020 2020 2022 2d6f 6622 2c0a  .        "-of",.
-00012590: 2020 2020 2020 2020 2264 6566 6175 6c74          "default
-000125a0: 3d6e 6f70 7269 6e74 5f77 7261 7070 6572  =noprint_wrapper
-000125b0: 733d 313a 6e6f 6b65 793d 3122 2c0a 2020  s=1:nokey=1",.  
-000125c0: 2020 2020 2020 6175 6469 6f5f 7061 7468        audio_path
-000125d0: 2c0a 2020 2020 5d0a 2020 2020 7472 793a  ,.    ].    try:
-000125e0: 0a20 2020 2020 2020 2074 7261 636b 5f74  .        track_t
-000125f0: 7970 6520 3d20 280a 2020 2020 2020 2020  ype = (.        
-00012600: 2020 2020 7375 6270 726f 6365 7373 2e63      subprocess.c
-00012610: 6865 636b 5f6f 7574 7075 7428 636d 642c  heck_output(cmd,
-00012620: 2073 7464 6572 723d 7375 6270 726f 6365   stderr=subproce
-00012630: 7373 2e53 5444 4f55 5429 0a20 2020 2020  ss.STDOUT).     
-00012640: 2020 2020 2020 202e 6465 636f 6465 2822         .decode("
-00012650: 7574 662d 3822 290a 2020 2020 2020 2020  utf-8").        
-00012660: 2020 2020 2e73 7472 6970 2829 0a20 2020      .strip().   
-00012670: 2020 2020 2029 0a20 2020 2065 7863 6570       ).    excep
-00012680: 7420 7375 6270 726f 6365 7373 2e43 616c  t subprocess.Cal
-00012690: 6c65 6450 726f 6365 7373 4572 726f 723a  ledProcessError:
-000126a0: 0a20 2020 2020 2020 2072 6169 7365 204e  .        raise N
-000126b0: 6f44 6174 6145 7272 6f72 280a 2020 2020  oDataError(.    
-000126c0: 2020 2020 2020 2020 6d73 673d 6622 4e6f          msg=f"No
-000126d0: 2061 7564 696f 2074 7261 636b 2066 6f75   audio track fou
-000126e0: 6e64 2069 6e20 6669 6c65 207b 6175 6469  nd in file {audi
-000126f0: 6f5f 7061 7468 7d22 2c0a 2020 2020 2020  o_path}",.      
-00012700: 2020 2020 2020 736f 7572 6365 3d61 7070        source=app
-00012710: 656e 645f 6175 6469 6f2e 5f5f 6e61 6d65  end_audio.__name
-00012720: 5f5f 2c0a 2020 2020 2020 2020 290a 0a20  __,.        ).. 
-00012730: 2020 2069 6620 7669 6465 6f5f 6d65 7461     if video_meta
-00012740: 5f64 6174 615b 2266 7261 6d65 5f63 6f75  _data["frame_cou
-00012750: 6e74 225d 2021 3d20 6175 6469 6f5f 7372  nt"] != audio_sr
-00012760: 635f 6d65 7461 5f64 6174 615b 2266 7261  c_meta_data["fra
-00012770: 6d65 5f63 6f75 6e74 225d 3a0a 2020 2020  me_count"]:.    
-00012780: 2020 2020 496e 5661 6c69 6455 7365 7249      InValidUserI
-00012790: 6e70 7574 5761 726e 696e 6728 0a20 2020  nputWarning(.   
-000127a0: 2020 2020 2020 2020 206d 7367 3d66 2754           msg=f'T
-000127b0: 6865 2076 6964 656f 2028 7b76 6964 656f  he video ({video
-000127c0: 5f6d 6574 615f 6461 7461 5b22 6672 616d  _meta_data["fram
-000127d0: 655f 636f 756e 7422 5d7d 2920 616e 6420  e_count"]}) and 
-000127e0: 6175 6469 6f20 736f 7572 6365 2028 7b61  audio source ({a
-000127f0: 7564 696f 5f73 7263 5f6d 6574 615f 6461  udio_src_meta_da
-00012800: 7461 5b22 6672 616d 655f 636f 756e 7422  ta["frame_count"
-00012810: 5d7d 2920 646f 6573 206e 6f74 2068 6176  ]}) does not hav
-00012820: 6520 616e 2065 7175 616c 206e 756d 6265  e an equal numbe
-00012830: 7220 6f66 2066 7261 6d65 732e 272c 0a20  r of frames.',. 
-00012840: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-00012850: 653d 6170 7065 6e64 5f61 7564 696f 2e5f  e=append_audio._
-00012860: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
-00012870: 2029 0a0a 2020 2020 636d 6420 3d20 6627   )..    cmd = f'
-00012880: 6666 6d70 6567 202d 6920 227b 7669 6465  ffmpeg -i "{vide
-00012890: 6f5f 7061 7468 7d22 202d 6920 227b 6175  o_path}" -i "{au
-000128a0: 6469 6f5f 7061 7468 7d22 202d 633a 7620  dio_path}" -c:v 
-000128b0: 636f 7079 202d 6d61 7020 303a 763a 3020  copy -map 0:v:0 
-000128c0: 2d6d 6170 2031 3a61 3a30 2022 7b73 6176  -map 1:a:0 "{sav
-000128d0: 655f 7061 7468 7d22 202d 7927 0a0a 2020  e_path}" -y'..  
-000128e0: 2020 7472 793a 0a20 2020 2020 2020 2073    try:.        s
-000128f0: 7562 7072 6f63 6573 732e 7275 6e28 636d  ubprocess.run(cm
-00012900: 642c 2073 6865 6c6c 3d54 7275 652c 2063  d, shell=True, c
-00012910: 6865 636b 3d54 7275 6529 0a20 2020 2065  heck=True).    e
-00012920: 7863 6570 7420 7375 6270 726f 6365 7373  xcept subprocess
-00012930: 2e43 616c 6c65 6450 726f 6365 7373 4572  .CalledProcessEr
-00012940: 726f 7220 6173 2065 3a0a 2020 2020 2020  ror as e:.      
-00012950: 2020 7072 696e 7428 2245 7272 6f72 3a22    print("Error:"
-00012960: 2c20 6529 0a0a 2020 2020 7374 646f 7574  , e)..    stdout
-00012970: 5f73 7563 6365 7373 280a 2020 2020 2020  _success(.      
-00012980: 2020 6d73 673d 6622 4175 6469 6f20 6d65    msg=f"Audio me
-00012990: 7267 6564 2073 7563 6365 7373 6675 6c6c  rged successfull
-000129a0: 792c 2066 696c 6520 7361 7665 6420 6174  y, file saved at
-000129b0: 207b 7361 7665 5f70 6174 687d 2122 2c0a   {save_path}!",.
-000129c0: 2020 2020 2020 2020 736f 7572 6365 3d61          source=a
-000129d0: 7070 656e 645f 6175 6469 6f2e 5f5f 6e61  ppend_audio.__na
-000129e0: 6d65 5f5f 2c0a 2020 2020 290a 0a0a 6465  me__,.    )...de
-000129f0: 6620 6372 6f70 5f73 696e 676c 655f 7669  f crop_single_vi
-00012a00: 6465 6f5f 6369 7263 6c65 2866 696c 655f  deo_circle(file_
-00012a10: 7061 7468 3a20 556e 696f 6e5b 7374 722c  path: Union[str,
-00012a20: 206f 732e 5061 7468 4c69 6b65 5d29 202d   os.PathLike]) -
-00012a30: 3e20 4e6f 6e65 3a0a 2020 2020 2222 220a  > None:.    """.
-00012a40: 2020 2020 4372 6f70 2061 2076 6964 656f      Crop a video
-00012a50: 2062 6173 6564 206f 6e20 6369 7263 756c   based on circul
-00012a60: 6172 2072 6567 696f 6e73 206f 6620 696e  ar regions of in
-00012a70: 7465 7265 7374 2028 524f 4973 2920 7365  terest (ROIs) se
-00012a80: 6c65 6374 6564 2062 7920 7468 6520 7573  lected by the us
-00012a90: 6572 2e0a 0a20 2020 203a 7061 7261 6d20  er...    :param 
-00012aa0: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
-00012ab0: 6174 684c 696b 655d 2066 696c 655f 7061  athLike] file_pa
-00012ac0: 7468 3a20 5468 6520 7061 7468 2074 6f20  th: The path to 
-00012ad0: 7468 6520 696e 7075 7420 7669 6465 6f20  the input video 
-00012ae0: 6669 6c65 2e0a 0a20 2020 202e 2e20 6e6f  file...    .. no
-00012af0: 7465 3a3a 0a20 2020 2020 2020 5468 6973  te::.       This
-00012b00: 2066 756e 6374 696f 6e20 6372 6f70 7320   function crops 
-00012b10: 7468 6520 696e 7075 7420 7669 6465 6f20  the input video 
-00012b20: 6261 7365 6420 6f6e 2063 6972 6375 6c61  based on circula
-00012b30: 7220 7265 6769 6f6e 7320 6f66 2069 6e74  r regions of int
-00012b40: 6572 6573 7420 2852 4f49 7329 2073 656c  erest (ROIs) sel
-00012b50: 6563 7465 6420 6279 2074 6865 2075 7365  ected by the use
-00012b60: 722e 0a20 2020 2020 2020 5468 6520 7573  r..       The us
-00012b70: 6572 2069 7320 7072 6f6d 7074 6564 2074  er is prompted t
-00012b80: 6f20 7365 6c65 6374 2061 2063 6972 6375  o select a circu
-00012b90: 6c61 7220 524f 4920 6f6e 2074 6865 2076  lar ROI on the v
-00012ba0: 6964 656f 2066 7261 6d65 2c20 616e 6420  ideo frame, and 
-00012bb0: 7468 6520 6675 6e63 7469 6f6e 2074 6865  the function the
-00012bc0: 6e20 6372 6f70 7320 7468 6520 7669 6465  n crops the vide
-00012bd0: 6f0a 2020 2020 2020 2062 6173 6564 206f  o.       based o
-00012be0: 6e20 7468 6520 7365 6c65 6374 6564 2052  n the selected R
-00012bf0: 4f49 2e20 5468 6520 6372 6f70 7065 6420  OI. The cropped 
-00012c00: 7669 6465 6f20 6973 2073 6176 6564 2077  video is saved w
-00012c10: 6974 6820 225f 6369 7263 6c65 5f63 726f  ith "_circle_cro
-00012c20: 7070 6564 2220 7375 6666 6978 2069 6e20  pped" suffix in 
-00012c30: 7468 6520 7361 6d65 2064 6972 6563 746f  the same directo
-00012c40: 7279 0a20 2020 2020 2020 6173 2074 6865  ry.       as the
-00012c50: 2069 6e70 7574 2076 6964 656f 2066 696c   input video fil
-00012c60: 652e 0a0a 2020 2020 3a65 7861 6d70 6c65  e...    :example
-00012c70: 3a0a 2020 2020 3e3e 3e20 6372 6f70 5f73  :.    >>> crop_s
-00012c80: 696e 676c 655f 7669 6465 6f5f 6369 7263  ingle_video_circ
-00012c90: 6c65 2866 696c 655f 7061 7468 3d27 2f55  le(file_path='/U
-00012ca0: 7365 7273 2f73 696d 6f6e 2f44 6573 6b74  sers/simon/Deskt
-00012cb0: 6f70 2f41 4747 5245 5353 4956 4954 595f  op/AGGRESSIVITY_
-00012cc0: 345f 3131 5f32 315f 5472 6961 6c5f 325f  4_11_21_Trial_2_
-00012cd0: 6361 6d65 7261 315f 726f 7461 7465 645f  camera1_rotated_
-00012ce0: 3230 3234 3032 3131 3134 3333 3535 2e6d  20240211143355.m
-00012cf0: 7034 2729 0a20 2020 2022 2222 0a0a 2020  p4').    """..  
-00012d00: 2020 6469 722c 2076 6964 656f 5f6e 616d    dir, video_nam
-00012d10: 652c 205f 203d 2067 6574 5f66 6e5f 6578  e, _ = get_fn_ex
-00012d20: 7428 6669 6c65 7061 7468 3d66 696c 655f  t(filepath=file_
-00012d30: 7061 7468 290a 2020 2020 7361 7665 5f70  path).    save_p
-00012d40: 6174 6820 3d20 6f73 2e70 6174 682e 6a6f  ath = os.path.jo
-00012d50: 696e 2864 6972 2c20 6622 7b76 6964 656f  in(dir, f"{video
-00012d60: 5f6e 616d 657d 5f63 6972 636c 655f 6372  _name}_circle_cr
-00012d70: 6f70 7065 642e 6d70 3422 290a 2020 2020  opped.mp4").    
-00012d80: 7669 6465 6f5f 6d65 7461 5f64 6174 6120  video_meta_data 
-00012d90: 3d20 6765 745f 7669 6465 6f5f 6d65 7461  = get_video_meta
-00012da0: 5f64 6174 6128 7669 6465 6f5f 7061 7468  _data(video_path
-00012db0: 3d66 696c 655f 7061 7468 290a 2020 2020  =file_path).    
-00012dc0: 6368 6563 6b5f 6669 6c65 5f65 7869 7374  check_file_exist
-00012dd0: 5f61 6e64 5f72 6561 6461 626c 6528 6669  _and_readable(fi
-00012de0: 6c65 5f70 6174 683d 6669 6c65 5f70 6174  le_path=file_pat
-00012df0: 6829 0a20 2020 2063 6972 636c 655f 7365  h).    circle_se
-00012e00: 6c65 6374 6f72 203d 2052 4f49 5365 6c65  lector = ROISele
-00012e10: 6374 6f72 4369 7263 6c65 2870 6174 683d  ctorCircle(path=
-00012e20: 6669 6c65 5f70 6174 6829 0a20 2020 2063  file_path).    c
-00012e30: 6972 636c 655f 7365 6c65 6374 6f72 2e72  ircle_selector.r
-00012e40: 756e 2829 0a20 2020 2074 696d 6572 203d  un().    timer =
-00012e50: 2053 696d 6261 5469 6d65 7228 7374 6172   SimbaTimer(star
-00012e60: 743d 5472 7565 290a 2020 2020 7220 3d20  t=True).    r = 
-00012e70: 6369 7263 6c65 5f73 656c 6563 746f 722e  circle_selector.
-00012e80: 6369 7263 6c65 5f72 6164 6975 730a 2020  circle_radius.  
-00012e90: 2020 782c 2079 203d 2063 6972 636c 655f    x, y = circle_
-00012ea0: 7365 6c65 6374 6f72 2e63 6972 636c 655f  selector.circle_
-00012eb0: 6365 6e74 6572 5b30 5d2c 2063 6972 636c  center[0], circl
-00012ec0: 655f 7365 6c65 6374 6f72 2e63 6972 636c  e_selector.circl
-00012ed0: 655f 6365 6e74 6572 5b31 5d0a 2020 2020  e_center[1].    
-00012ee0: 706f 6c79 676f 6e20 3d20 506f 6c79 676f  polygon = Polygo
-00012ef0: 6e28 0a20 2020 2020 2020 205b 0a20 2020  n(.        [.   
-00012f00: 2020 2020 2020 2020 2028 7820 2b20 7220           (x + r 
-00012f10: 2a20 6e70 2e63 6f73 2861 6e67 6c65 292c  * np.cos(angle),
-00012f20: 2079 202b 2072 202a 206e 702e 7369 6e28   y + r * np.sin(
-00012f30: 616e 676c 6529 290a 2020 2020 2020 2020  angle)).        
-00012f40: 2020 2020 666f 7220 616e 676c 6520 696e      for angle in
-00012f50: 206e 702e 6c69 6e73 7061 6365 2830 2c20   np.linspace(0, 
-00012f60: 3220 2a20 6e70 2e70 692c 2031 3030 290a  2 * np.pi, 100).
-00012f70: 2020 2020 2020 2020 5d0a 2020 2020 290a          ].    ).
-00012f80: 2020 2020 706f 6c79 676f 6e73 203d 205b      polygons = [
-00012f90: 706f 6c79 676f 6e20 666f 7220 7820 696e  polygon for x in
-00012fa0: 2072 616e 6765 2876 6964 656f 5f6d 6574   range(video_met
-00012fb0: 615f 6461 7461 5b22 6672 616d 655f 636f  a_data["frame_co
-00012fc0: 756e 7422 5d29 5d0a 2020 2020 6966 2028  unt"])].    if (
-00012fd0: 706c 6174 666f 726d 2e73 7973 7465 6d28  platform.system(
-00012fe0: 2920 3d3d 2022 4461 7277 696e 2229 2061  ) == "Darwin") a
-00012ff0: 6e64 2028 6d75 6c74 6970 726f 6365 7373  nd (multiprocess
-00013000: 696e 672e 6765 745f 7374 6172 745f 6d65  ing.get_start_me
-00013010: 7468 6f64 2829 2069 7320 4e6f 6e65 293a  thod() is None):
-00013020: 0a20 2020 2020 2020 206d 756c 7469 7072  .        multipr
-00013030: 6f63 6573 7369 6e67 2e73 6574 5f73 7461  ocessing.set_sta
-00013040: 7274 5f6d 6574 686f 6428 2273 7061 776e  rt_method("spawn
-00013050: 222c 2066 6f72 6365 3d54 7275 6529 0a20  ", force=True). 
-00013060: 2020 2070 6f6c 7967 6f6e 7320 3d20 496d     polygons = Im
-00013070: 6167 654d 6978 696e 2829 2e73 6c69 6365  ageMixin().slice
-00013080: 5f73 6861 7065 735f 696e 5f69 6d67 7328  _shapes_in_imgs(
-00013090: 0a20 2020 2020 2020 2069 6d67 733d 6669  .        imgs=fi
-000130a0: 6c65 5f70 6174 682c 2073 6861 7065 733d  le_path, shapes=
-000130b0: 706f 6c79 676f 6e73 2c20 7665 7262 6f73  polygons, verbos
-000130c0: 653d 4661 6c73 650a 2020 2020 290a 2020  e=False.    ).  
-000130d0: 2020 7469 6d65 2e73 6c65 6570 2833 290a    time.sleep(3).
-000130e0: 2020 2020 5f20 3d20 496d 6167 654d 6978      _ = ImageMix
-000130f0: 696e 2e69 6d67 5f73 7461 636b 5f74 6f5f  in.img_stack_to_
-00013100: 7669 6465 6f28 0a20 2020 2020 2020 2069  video(.        i
-00013110: 6d67 733d 706f 6c79 676f 6e73 2c20 7361  mgs=polygons, sa
-00013120: 7665 5f70 6174 683d 7361 7665 5f70 6174  ve_path=save_pat
-00013130: 682c 2066 7073 3d76 6964 656f 5f6d 6574  h, fps=video_met
-00013140: 615f 6461 7461 5b22 6670 7322 5d0a 2020  a_data["fps"].  
-00013150: 2020 290a 2020 2020 7469 6d65 722e 7374    ).    timer.st
-00013160: 6f70 5f74 696d 6572 2829 0a20 2020 2073  op_timer().    s
-00013170: 7464 6f75 745f 7375 6363 6573 7328 0a20  tdout_success(. 
-00013180: 2020 2020 2020 206d 7367 3d66 2243 6972         msg=f"Cir
-00013190: 636c 652d 6261 7365 6420 6372 6f70 7065  cle-based croppe
-000131a0: 6420 7361 7665 6420 6174 2074 6f20 7b73  d saved at to {s
-000131b0: 6176 655f 7061 7468 7d22 2c0a 2020 2020  ave_path}",.    
-000131c0: 2020 2020 656c 6170 7365 645f 7469 6d65      elapsed_time
-000131d0: 3d74 696d 6572 2e65 6c61 7073 6564 5f74  =timer.elapsed_t
-000131e0: 696d 655f 7374 722c 0a20 2020 2029 0a0a  ime_str,.    )..
-000131f0: 0a64 6566 2063 726f 705f 6d75 6c74 6970  .def crop_multip
-00013200: 6c65 5f76 6964 656f 735f 6369 7263 6c65  le_videos_circle
-00013210: 7328 0a20 2020 2069 6e5f 6469 723a 2055  s(.    in_dir: U
-00013220: 6e69 6f6e 5b73 7472 2c20 6f73 2e50 6174  nion[str, os.Pat
-00013230: 684c 696b 655d 2c20 6f75 745f 6469 723a  hLike], out_dir:
-00013240: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
-00013250: 6174 684c 696b 655d 0a29 202d 3e20 4e6f  athLike].) -> No
-00013260: 6e65 3a0a 2020 2020 2222 220a 2020 2020  ne:.    """.    
-00013270: 4372 6f70 206d 756c 7469 706c 6520 7669  Crop multiple vi
-00013280: 6465 6f73 2062 6173 6564 206f 6e20 6369  deos based on ci
-00013290: 7263 756c 6172 2072 6567 696f 6e73 206f  rcular regions o
-000132a0: 6620 696e 7465 7265 7374 2028 524f 4973  f interest (ROIs
-000132b0: 2920 7365 6c65 6374 6564 2062 7920 7468  ) selected by th
-000132c0: 6520 7573 6572 2e0a 0a20 2020 203a 7061  e user...    :pa
-000132d0: 7261 6d20 2055 6e69 6f6e 5b73 7472 2c20  ram  Union[str, 
-000132e0: 6f73 2e50 6174 684c 696b 655d 2069 6e5f  os.PathLike] in_
-000132f0: 6469 723a 2054 6865 2064 6972 6563 746f  dir: The directo
-00013300: 7279 2063 6f6e 7461 696e 696e 6720 696e  ry containing in
-00013310: 7075 7420 7669 6465 6f20 6669 6c65 732e  put video files.
-00013320: 0a20 2020 203a 7061 7261 6d20 2055 6e69  .    :param  Uni
-00013330: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
-00013340: 696b 655d 206f 7574 5f64 6972 3a20 5468  ike] out_dir: Th
-00013350: 6520 6469 7265 6374 6f72 7920 746f 2073  e directory to s
-00013360: 6176 6520 7468 6520 6372 6f70 7065 6420  ave the cropped 
-00013370: 7669 6465 6f20 6669 6c65 732e 0a0a 2020  video files...  
-00013380: 2020 2e2e 206e 6f74 653a 3a0a 2020 2020    .. note::.    
-00013390: 2020 2054 6869 7320 6675 6e63 7469 6f6e     This function
-000133a0: 2063 726f 7073 206d 756c 7469 706c 6520   crops multiple 
-000133b0: 7669 6465 6f73 2062 6173 6564 206f 6e20  videos based on 
-000133c0: 6369 7263 756c 6172 2052 4f49 7320 7365  circular ROIs se
-000133d0: 6c65 6374 6564 2062 7920 7468 6520 7573  lected by the us
-000133e0: 6572 2e0a 2020 2020 2020 2054 6865 2075  er..       The u
-000133f0: 7365 7220 6973 2061 736b 6564 2074 6f20  ser is asked to 
-00013400: 6465 6669 6e65 2061 2063 6972 636c 6520  define a circle 
-00013410: 6d61 6e75 616c 6c79 2069 6e20 6f6e 6520  manually in one 
-00013420: 7669 6465 6f20 7769 7468 696e 2074 6865  video within the
-00013430: 2069 6e70 7574 2064 6972 6563 746f 7279   input directory
-00013440: 2e0a 2020 2020 2020 2054 6865 2066 756e  ..       The fun
-00013450: 6374 696f 6e20 7468 656e 2063 726f 7073  ction then crops
-00013460: 2061 6c6c 2074 6865 2076 6964 656f 2069   all the video i
-00013470: 6e20 7468 6520 696e 7075 7420 6469 7265  n the input dire
-00013480: 6374 6f72 7920 6163 636f 7264 696e 6720  ctory according 
-00013490: 746f 2074 6865 2073 6861 7065 2064 6566  to the shape def
-000134a0: 696e 6564 0a20 2020 2020 2020 7573 696e  ined.       usin
-000134b0: 6720 7468 6520 6669 7273 7420 7669 6465  g the first vide
-000134c0: 6f20 616e 6420 7361 7665 7320 7468 6520  o and saves the 
-000134d0: 7669 6465 6f73 2069 6e20 7468 6520 6060  videos in the ``
-000134e0: 6f75 745f 6469 7260 6020 7769 7468 2074  out_dir`` with t
-000134f0: 6865 2073 616d 6520 6669 6c65 6e61 6d65  he same filename
-00013500: 7320 6173 2074 6865 206f 7269 6769 6e61  s as the origina
-00013510: 6c20 7669 6465 6f73 2e2e 0a0a 2020 2020  l videos....    
-00013520: 3a65 7861 6d70 6c65 3a0a 2020 2020 3e3e  :example:.    >>
-00013530: 3e20 6372 6f70 5f6d 756c 7469 706c 655f  > crop_multiple_
-00013540: 7669 6465 6f73 5f63 6972 636c 6573 2869  videos_circles(i
-00013550: 6e5f 6469 723d 272f 5573 6572 732f 7369  n_dir='/Users/si
-00013560: 6d6f 6e2f 4465 736b 746f 702f 6564 6974  mon/Desktop/edit
-00013570: 6564 2f74 6573 7473 272c 206f 7574 5f64  ed/tests', out_d
-00013580: 6972 3d27 2f55 7365 7273 2f73 696d 6f6e  ir='/Users/simon
-00013590: 2f44 6573 6b74 6f70 2729 0a20 2020 2022  /Desktop').    "
-000135a0: 2222 0a0a 2020 2020 6368 6563 6b5f 6966  ""..    check_if
-000135b0: 5f64 6972 5f65 7869 7374 7328 696e 5f64  _dir_exists(in_d
-000135c0: 6972 3d69 6e5f 6469 7229 0a20 2020 2063  ir=in_dir).    c
-000135d0: 6865 636b 5f69 665f 6469 725f 6578 6973  heck_if_dir_exis
-000135e0: 7473 2869 6e5f 6469 723d 6f75 745f 6469  ts(in_dir=out_di
-000135f0: 7229 0a20 2020 2076 6964 656f 5f66 696c  r).    video_fil
-00013600: 6573 203d 2066 696e 645f 616c 6c5f 7669  es = find_all_vi
-00013610: 6465 6f73 5f69 6e5f 6469 7265 6374 6f72  deos_in_director
-00013620: 7928 6469 7265 6374 6f72 793d 696e 5f64  y(directory=in_d
-00013630: 6972 290a 2020 2020 6369 7263 6c65 5f73  ir).    circle_s
-00013640: 656c 6563 746f 7220 3d20 524f 4953 656c  elector = ROISel
-00013650: 6563 746f 7243 6972 636c 6528 7061 7468  ectorCircle(path
-00013660: 3d6f 732e 7061 7468 2e6a 6f69 6e28 696e  =os.path.join(in
-00013670: 5f64 6972 2c20 7669 6465 6f5f 6669 6c65  _dir, video_file
-00013680: 735b 305d 2929 0a20 2020 2063 6972 636c  s[0])).    circl
-00013690: 655f 7365 6c65 6374 6f72 2e72 756e 2829  e_selector.run()
-000136a0: 0a20 2020 2072 203d 2063 6972 636c 655f  .    r = circle_
-000136b0: 7365 6c65 6374 6f72 2e63 6972 636c 655f  selector.circle_
-000136c0: 7261 6469 7573 0a20 2020 2078 2c20 7920  radius.    x, y 
-000136d0: 3d20 6369 7263 6c65 5f73 656c 6563 746f  = circle_selecto
-000136e0: 722e 6369 7263 6c65 5f63 656e 7465 725b  r.circle_center[
-000136f0: 305d 2c20 6369 7263 6c65 5f73 656c 6563  0], circle_selec
-00013700: 746f 722e 6369 7263 6c65 5f63 656e 7465  tor.circle_cente
-00013710: 725b 315d 0a20 2020 2070 6f6c 7967 6f6e  r[1].    polygon
-00013720: 203d 2050 6f6c 7967 6f6e 280a 2020 2020   = Polygon(.    
-00013730: 2020 2020 5b0a 2020 2020 2020 2020 2020      [.          
-00013740: 2020 2878 202b 2072 202a 206e 702e 636f    (x + r * np.co
-00013750: 7328 616e 676c 6529 2c20 7920 2b20 7220  s(angle), y + r 
-00013760: 2a20 6e70 2e73 696e 2861 6e67 6c65 2929  * np.sin(angle))
-00013770: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00013780: 2061 6e67 6c65 2069 6e20 6e70 2e6c 696e   angle in np.lin
-00013790: 7370 6163 6528 302c 2032 202a 206e 702e  space(0, 2 * np.
-000137a0: 7069 2c20 3130 3029 0a20 2020 2020 2020  pi, 100).       
-000137b0: 205d 0a20 2020 2029 0a20 2020 2074 696d   ].    ).    tim
-000137c0: 6572 203d 2053 696d 6261 5469 6d65 7228  er = SimbaTimer(
-000137d0: 7374 6172 743d 5472 7565 290a 2020 2020  start=True).    
-000137e0: 6966 2028 706c 6174 666f 726d 2e73 7973  if (platform.sys
-000137f0: 7465 6d28 2920 3d3d 2022 4461 7277 696e  tem() == "Darwin
-00013800: 2229 2061 6e64 2028 6d75 6c74 6970 726f  ") and (multipro
-00013810: 6365 7373 696e 672e 6765 745f 7374 6172  cessing.get_star
-00013820: 745f 6d65 7468 6f64 2829 2069 7320 4e6f  t_method() is No
-00013830: 6e65 293a 0a20 2020 2020 2020 206d 756c  ne):.        mul
-00013840: 7469 7072 6f63 6573 7369 6e67 2e73 6574  tiprocessing.set
-00013850: 5f73 7461 7274 5f6d 6574 686f 6428 2273  _start_method("s
-00013860: 7061 776e 222c 2066 6f72 6365 3d46 616c  pawn", force=Fal
-00013870: 7365 290a 2020 2020 666f 7220 7669 6465  se).    for vide
-00013880: 6f5f 636e 742c 2076 6964 656f 5f70 6174  o_cnt, video_pat
-00013890: 6820 696e 2065 6e75 6d65 7261 7465 2876  h in enumerate(v
-000138a0: 6964 656f 5f66 696c 6573 293a 0a20 2020  ideo_files):.   
-000138b0: 2020 2020 2070 7269 6e74 280a 2020 2020       print(.    
-000138c0: 2020 2020 2020 2020 6622 4369 7263 6c65          f"Circle
-000138d0: 2063 726f 7070 696e 6720 7669 6465 6f20   cropping video 
-000138e0: 7b76 6964 656f 5f70 6174 687d 2028 7b76  {video_path} ({v
-000138f0: 6964 656f 5f63 6e74 2b31 7d2f 7b6c 656e  ideo_cnt+1}/{len
-00013900: 2876 6964 656f 5f66 696c 6573 297d 292e  (video_files)}).
-00013910: 2e2e 220a 2020 2020 2020 2020 290a 2020  ..".        ).  
-00013920: 2020 2020 2020 7669 6465 6f5f 7061 7468        video_path
-00013930: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-00013940: 696e 5f64 6972 2c20 7669 6465 6f5f 7061  in_dir, video_pa
-00013950: 7468 290a 2020 2020 2020 2020 5f2c 2076  th).        _, v
-00013960: 6964 656f 5f6e 616d 652c 205f 203d 2067  ideo_name, _ = g
-00013970: 6574 5f66 6e5f 6578 7428 6669 6c65 7061  et_fn_ext(filepa
-00013980: 7468 3d76 6964 656f 5f70 6174 6829 0a20  th=video_path). 
-00013990: 2020 2020 2020 2073 6176 655f 7061 7468         save_path
-000139a0: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-000139b0: 6f75 745f 6469 722c 2066 227b 7669 6465  out_dir, f"{vide
-000139c0: 6f5f 6e61 6d65 7d2e 6d70 3422 290a 2020  o_name}.mp4").  
-000139d0: 2020 2020 2020 7669 6465 6f5f 6d65 7461        video_meta
-000139e0: 5f64 6174 6120 3d20 6765 745f 7669 6465  _data = get_vide
-000139f0: 6f5f 6d65 7461 5f64 6174 6128 7669 6465  o_meta_data(vide
-00013a00: 6f5f 7061 7468 3d76 6964 656f 5f70 6174  o_path=video_pat
-00013a10: 6829 0a20 2020 2020 2020 2070 6f6c 7967  h).        polyg
-00013a20: 6f6e 7320 3d20 5b70 6f6c 7967 6f6e 2066  ons = [polygon f
-00013a30: 6f72 2078 2069 6e20 7261 6e67 6528 7669  or x in range(vi
-00013a40: 6465 6f5f 6d65 7461 5f64 6174 615b 2266  deo_meta_data["f
-00013a50: 7261 6d65 5f63 6f75 6e74 225d 295d 0a20  rame_count"])]. 
-00013a60: 2020 2020 2020 2070 6f6c 7967 6f6e 7320         polygons 
-00013a70: 3d20 496d 6167 654d 6978 696e 2829 2e73  = ImageMixin().s
-00013a80: 6c69 6365 5f73 6861 7065 735f 696e 5f69  lice_shapes_in_i
-00013a90: 6d67 7328 0a20 2020 2020 2020 2020 2020  mgs(.           
-00013aa0: 2069 6d67 733d 7669 6465 6f5f 7061 7468   imgs=video_path
-00013ab0: 2c20 7368 6170 6573 3d70 6f6c 7967 6f6e  , shapes=polygon
-00013ac0: 732c 2076 6572 626f 7365 3d46 616c 7365  s, verbose=False
-00013ad0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00013ae0: 2020 2074 696d 652e 736c 6565 7028 3129     time.sleep(1)
-00013af0: 0a20 2020 2020 2020 205f 203d 2049 6d61  .        _ = Ima
-00013b00: 6765 4d69 7869 6e2e 696d 675f 7374 6163  geMixin.img_stac
-00013b10: 6b5f 746f 5f76 6964 656f 280a 2020 2020  k_to_video(.    
-00013b20: 2020 2020 2020 2020 696d 6773 3d70 6f6c          imgs=pol
-00013b30: 7967 6f6e 732c 2073 6176 655f 7061 7468  ygons, save_path
-00013b40: 3d73 6176 655f 7061 7468 2c20 6670 733d  =save_path, fps=
-00013b50: 7669 6465 6f5f 6d65 7461 5f64 6174 615b  video_meta_data[
-00013b60: 2266 7073 225d 0a20 2020 2020 2020 2029  "fps"].        )
-00013b70: 0a20 2020 2074 696d 6572 2e73 746f 705f  .    timer.stop_
-00013b80: 7469 6d65 7228 290a 2020 2020 7374 646f  timer().    stdo
-00013b90: 7574 5f73 7563 6365 7373 280a 2020 2020  ut_success(.    
-00013ba0: 2020 2020 6d73 673d 6622 4369 7263 6c65      msg=f"Circle
-00013bb0: 2d62 6173 6564 2063 726f 7070 6564 207b  -based cropped {
-00013bc0: 6c65 6e28 7669 6465 6f5f 6669 6c65 7329  len(video_files)
-00013bd0: 7d20 6669 6c65 7320 746f 2064 6972 6563  } files to direc
-00013be0: 746f 7279 207b 6f75 745f 6469 727d 222c  tory {out_dir}",
-00013bf0: 0a20 2020 2020 2020 2065 6c61 7073 6564  .        elapsed
-00013c00: 5f74 696d 653d 7469 6d65 722e 656c 6170  _time=timer.elap
-00013c10: 7365 645f 7469 6d65 5f73 7472 2c0a 2020  sed_time_str,.  
-00013c20: 2020 290a 0a0a 6465 6620 6372 6f70 5f73    )...def crop_s
-00013c30: 696e 676c 655f 7669 6465 6f5f 706f 6c79  ingle_video_poly
-00013c40: 676f 6e28 6669 6c65 5f70 6174 683a 2055  gon(file_path: U
-00013c50: 6e69 6f6e 5b73 7472 2c20 6f73 2e50 6174  nion[str, os.Pat
-00013c60: 684c 696b 655d 2920 2d3e 204e 6f6e 653a  hLike]) -> None:
-00013c70: 0a20 2020 2022 2222 0a20 2020 2043 726f  .    """.    Cro
-00013c80: 7020 6120 7669 6465 6f20 6261 7365 6420  p a video based 
-00013c90: 6f6e 2070 6f6c 7967 6f6e 616c 2072 6567  on polygonal reg
-00013ca0: 696f 6e73 206f 6620 696e 7465 7265 7374  ions of interest
-00013cb0: 2028 524f 4973 2920 7365 6c65 6374 6564   (ROIs) selected
-00013cc0: 2062 7920 7468 6520 7573 6572 2e0a 0a20   by the user... 
-00013cd0: 2020 203a 7061 7261 6d20 2055 6e69 6f6e     :param  Union
-00013ce0: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
-00013cf0: 655d 2066 696c 655f 7061 7468 3a20 5468  e] file_path: Th
-00013d00: 6520 7061 7468 2074 6f20 7468 6520 696e  e path to the in
-00013d10: 7075 7420 7669 6465 6f20 6669 6c65 2e0a  put video file..
-00013d20: 0a20 2020 202e 2e20 6e6f 7465 3a3a 0a20  .    .. note::. 
-00013d30: 2020 2020 2020 5468 6973 2066 756e 6374        This funct
-00013d40: 696f 6e20 6372 6f70 7320 7468 6520 696e  ion crops the in
-00013d50: 7075 7420 7669 6465 6f20 6261 7365 6420  put video based 
-00013d60: 6f6e 2070 6f6c 7967 6f6e 616c 2072 6567  on polygonal reg
-00013d70: 696f 6e73 206f 6620 696e 7465 7265 7374  ions of interest
-00013d80: 2028 524f 4973 2920 7365 6c65 6374 6564   (ROIs) selected
-00013d90: 2062 7920 7468 6520 7573 6572 2e0a 2020   by the user..  
-00013da0: 2020 2020 2054 6865 2075 7365 7220 6973       The user is
-00013db0: 2070 726f 6d70 7465 6420 746f 2073 656c   prompted to sel
-00013dc0: 6563 7420 6120 706f 6c79 676f 6e61 6c20  ect a polygonal 
-00013dd0: 524f 4920 6f6e 2074 6865 2076 6964 656f  ROI on the video
-00013de0: 2066 7261 6d65 2c20 616e 6420 7468 6520   frame, and the 
-00013df0: 6675 6e63 7469 6f6e 2074 6865 6e20 6372  function then cr
-00013e00: 6f70 7320 7468 6520 7669 6465 6f0a 2020  ops the video.  
-00013e10: 2020 2020 2062 6173 6564 206f 6e20 7468       based on th
-00013e20: 6520 7365 6c65 6374 6564 2052 4f49 2e20  e selected ROI. 
-00013e30: 5468 6520 6372 6f70 7065 6420 7669 6465  The cropped vide
-00013e40: 6f20 6973 2073 6176 6564 2077 6974 6820  o is saved with 
-00013e50: 225f 706f 6c79 676f 6e5f 6372 6f70 7065  "_polygon_croppe
-00013e60: 6422 2073 7566 6669 7820 696e 2074 6865  d" suffix in the
-00013e70: 2073 616d 6520 6469 7265 6374 6f72 790a   same directory.
-00013e80: 2020 2020 2020 2061 7320 7468 6520 696e         as the in
-00013e90: 7075 7420 7669 6465 6f20 6669 6c65 2e0a  put video file..
-00013ea0: 0a20 2020 203a 6578 616d 706c 653a 0a20  .    :example:. 
-00013eb0: 2020 203e 3e3e 2063 726f 705f 7369 6e67     >>> crop_sing
-00013ec0: 6c65 5f76 6964 656f 5f70 6f6c 7967 6f6e  le_video_polygon
-00013ed0: 2866 696c 655f 7061 7468 3d27 2f55 7365  (file_path='/Use
-00013ee0: 7273 2f73 696d 6f6e 2f44 6573 6b74 6f70  rs/simon/Desktop
-00013ef0: 2f41 4747 5245 5353 4956 4954 595f 345f  /AGGRESSIVITY_4_
-00013f00: 3131 5f32 315f 5472 6961 6c5f 325f 6361  11_21_Trial_2_ca
-00013f10: 6d65 7261 315f 726f 7461 7465 645f 3230  mera1_rotated_20
-00013f20: 3234 3032 3131 3134 3333 3535 2e6d 7034  240211143355.mp4
-00013f30: 2729 0a20 2020 2022 2222 0a0a 2020 2020  ').    """..    
-00013f40: 6469 722c 2076 6964 656f 5f6e 616d 652c  dir, video_name,
-00013f50: 205f 203d 2067 6574 5f66 6e5f 6578 7428   _ = get_fn_ext(
-00013f60: 6669 6c65 7061 7468 3d66 696c 655f 7061  filepath=file_pa
-00013f70: 7468 290a 2020 2020 7361 7665 5f70 6174  th).    save_pat
-00013f80: 6820 3d20 6f73 2e70 6174 682e 6a6f 696e  h = os.path.join
-00013f90: 2864 6972 2c20 6622 7b76 6964 656f 5f6e  (dir, f"{video_n
-00013fa0: 616d 657d 5f70 6f6c 7967 6f6e 5f63 726f  ame}_polygon_cro
-00013fb0: 7070 6564 2e6d 7034 2229 0a20 2020 2076  pped.mp4").    v
-00013fc0: 6964 656f 5f6d 6574 615f 6461 7461 203d  ideo_meta_data =
-00013fd0: 2067 6574 5f76 6964 656f 5f6d 6574 615f   get_video_meta_
-00013fe0: 6461 7461 2876 6964 656f 5f70 6174 683d  data(video_path=
-00013ff0: 6669 6c65 5f70 6174 6829 0a20 2020 2063  file_path).    c
-00014000: 6865 636b 5f66 696c 655f 6578 6973 745f  heck_file_exist_
-00014010: 616e 645f 7265 6164 6162 6c65 2866 696c  and_readable(fil
-00014020: 655f 7061 7468 3d66 696c 655f 7061 7468  e_path=file_path
-00014030: 290a 2020 2020 706f 6c79 676f 6e5f 7365  ).    polygon_se
-00014040: 6c65 6374 6f72 203d 2052 4f49 5365 6c65  lector = ROISele
-00014050: 6374 6f72 506f 6c79 676f 6e28 7061 7468  ctorPolygon(path
-00014060: 3d66 696c 655f 7061 7468 290a 2020 2020  =file_path).    
-00014070: 706f 6c79 676f 6e5f 7365 6c65 6374 6f72  polygon_selector
-00014080: 2e72 756e 2829 0a20 2020 2074 696d 6572  .run().    timer
-00014090: 203d 2053 696d 6261 5469 6d65 7228 7374   = SimbaTimer(st
-000140a0: 6172 743d 5472 7565 290a 2020 2020 7665  art=True).    ve
-000140b0: 7274 6963 6573 203d 2070 6f6c 7967 6f6e  rtices = polygon
-000140c0: 5f73 656c 6563 746f 722e 706f 6c79 676f  _selector.polygo
-000140d0: 6e5f 7665 7274 6963 6573 0a20 2020 2070  n_vertices.    p
-000140e0: 6f6c 7967 6f6e 203d 2050 6f6c 7967 6f6e  olygon = Polygon
-000140f0: 2876 6572 7469 6365 7329 0a20 2020 2070  (vertices).    p
-00014100: 6f6c 7967 6f6e 7320 3d20 5b70 6f6c 7967  olygons = [polyg
-00014110: 6f6e 2066 6f72 2078 2069 6e20 7261 6e67  on for x in rang
-00014120: 6528 7669 6465 6f5f 6d65 7461 5f64 6174  e(video_meta_dat
-00014130: 615b 2266 7261 6d65 5f63 6f75 6e74 225d  a["frame_count"]
-00014140: 295d 0a20 2020 2069 6620 2870 6c61 7466  )].    if (platf
-00014150: 6f72 6d2e 7379 7374 656d 2829 203d 3d20  orm.system() == 
-00014160: 2244 6172 7769 6e22 2920 616e 6420 286d  "Darwin") and (m
-00014170: 756c 7469 7072 6f63 6573 7369 6e67 2e67  ultiprocessing.g
-00014180: 6574 5f73 7461 7274 5f6d 6574 686f 6428  et_start_method(
-00014190: 2920 6973 204e 6f6e 6529 3a0a 2020 2020  ) is None):.    
-000141a0: 2020 2020 6d75 6c74 6970 726f 6365 7373      multiprocess
-000141b0: 696e 672e 7365 745f 7374 6172 745f 6d65  ing.set_start_me
-000141c0: 7468 6f64 2822 7370 6177 6e22 2c20 666f  thod("spawn", fo
-000141d0: 7263 653d 4661 6c73 6529 0a20 2020 2070  rce=False).    p
-000141e0: 6f6c 7967 6f6e 7320 3d20 496d 6167 654d  olygons = ImageM
-000141f0: 6978 696e 2829 2e73 6c69 6365 5f73 6861  ixin().slice_sha
-00014200: 7065 735f 696e 5f69 6d67 7328 0a20 2020  pes_in_imgs(.   
-00014210: 2020 2020 2069 6d67 733d 6669 6c65 5f70       imgs=file_p
-00014220: 6174 682c 2073 6861 7065 733d 706f 6c79  ath, shapes=poly
-00014230: 676f 6e73 2c20 7665 7262 6f73 653d 5472  gons, verbose=Tr
-00014240: 7565 0a20 2020 2029 0a20 2020 205f 203d  ue.    ).    _ =
-00014250: 2049 6d61 6765 4d69 7869 6e2e 696d 675f   ImageMixin.img_
-00014260: 7374 6163 6b5f 746f 5f76 6964 656f 280a  stack_to_video(.
-00014270: 2020 2020 2020 2020 696d 6773 3d70 6f6c          imgs=pol
-00014280: 7967 6f6e 732c 2073 6176 655f 7061 7468  ygons, save_path
-00014290: 3d73 6176 655f 7061 7468 2c20 6670 733d  =save_path, fps=
-000142a0: 7669 6465 6f5f 6d65 7461 5f64 6174 615b  video_meta_data[
-000142b0: 2266 7073 225d 0a20 2020 2029 0a20 2020  "fps"].    ).   
-000142c0: 2074 696d 6572 2e73 746f 705f 7469 6d65   timer.stop_time
-000142d0: 7228 290a 2020 2020 7374 646f 7574 5f73  r().    stdout_s
-000142e0: 7563 6365 7373 280a 2020 2020 2020 2020  uccess(.        
-000142f0: 6d73 673d 6622 506f 6c79 676f 6e2d 6261  msg=f"Polygon-ba
-00014300: 7365 6420 6372 6f70 7065 6420 7361 7665  sed cropped save
-00014310: 6420 6174 2074 6f20 7b73 6176 655f 7061  d at to {save_pa
-00014320: 7468 7d22 2c0a 2020 2020 2020 2020 656c  th}",.        el
-00014330: 6170 7365 645f 7469 6d65 3d74 696d 6572  apsed_time=timer
-00014340: 2e65 6c61 7073 6564 5f74 696d 655f 7374  .elapsed_time_st
-00014350: 722c 0a20 2020 2029 0a0a 0a64 6566 2063  r,.    )...def c
-00014360: 726f 705f 6d75 6c74 6970 6c65 5f76 6964  rop_multiple_vid
-00014370: 656f 735f 706f 6c79 676f 6e73 280a 2020  eos_polygons(.  
-00014380: 2020 696e 5f64 6972 3a20 556e 696f 6e5b    in_dir: Union[
-00014390: 7374 722c 206f 732e 5061 7468 4c69 6b65  str, os.PathLike
-000143a0: 5d2c 206f 7574 5f64 6972 3a20 556e 696f  ], out_dir: Unio
-000143b0: 6e5b 7374 722c 206f 732e 5061 7468 4c69  n[str, os.PathLi
-000143c0: 6b65 5d0a 2920 2d3e 204e 6f6e 653a 0a20  ke].) -> None:. 
-000143d0: 2020 2022 2222 0a20 2020 2043 726f 7020     """.    Crop 
-000143e0: 6d75 6c74 6970 6c65 2076 6964 656f 7320  multiple videos 
-000143f0: 6261 7365 6420 6f6e 2070 6f6c 7967 6f6e  based on polygon
-00014400: 616c 2072 6567 696f 6e73 206f 6620 696e  al regions of in
-00014410: 7465 7265 7374 2028 524f 4973 2920 7365  terest (ROIs) se
-00014420: 6c65 6374 6564 2062 7920 7468 6520 7573  lected by the us
-00014430: 6572 2e0a 0a20 2020 203a 7061 7261 6d20  er...    :param 
-00014440: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
-00014450: 6174 684c 696b 655d 2069 6e5f 6469 723a  athLike] in_dir:
-00014460: 2054 6865 2064 6972 6563 746f 7279 2063   The directory c
-00014470: 6f6e 7461 696e 696e 6720 696e 7075 7420  ontaining input 
-00014480: 7669 6465 6f20 6669 6c65 732e 0a20 2020  video files..   
-00014490: 203a 7061 7261 6d20 2055 6e69 6f6e 5b73   :param  Union[s
-000144a0: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
-000144b0: 206f 7574 5f64 6972 3a20 5468 6520 6469   out_dir: The di
-000144c0: 7265 6374 6f72 7920 746f 2073 6176 6520  rectory to save 
-000144d0: 7468 6520 6372 6f70 7065 6420 7669 6465  the cropped vide
-000144e0: 6f20 6669 6c65 732e 0a0a 2020 2020 2e2e  o files...    ..
-000144f0: 206e 6f74 653a 3a0a 2020 2020 2020 2054   note::.       T
-00014500: 6869 7320 6675 6e63 7469 6f6e 2063 726f  his function cro
-00014510: 7073 206d 756c 7469 706c 6520 7669 6465  ps multiple vide
-00014520: 6f73 2062 6173 6564 206f 6e20 706f 6c79  os based on poly
-00014530: 676f 6e61 6c20 524f 4973 2073 656c 6563  gonal ROIs selec
-00014540: 7465 6420 6279 2074 6865 2075 7365 722e  ted by the user.
-00014550: 0a20 2020 2020 2020 5468 6520 7573 6572  .       The user
-00014560: 2069 7320 6173 6b65 6420 746f 2064 6566   is asked to def
-00014570: 696e 6520 6120 706f 6c79 676f 6e20 6d61  ine a polygon ma
-00014580: 6e75 616c 6c79 2069 6e20 6f6e 6520 7669  nually in one vi
-00014590: 6465 6f20 7769 7468 696e 2074 6865 2069  deo within the i
-000145a0: 6e70 7574 2064 6972 6563 746f 7279 2e0a  nput directory..
-000145b0: 2020 2020 2020 2054 6865 2066 756e 6374         The funct
-000145c0: 696f 6e20 7468 656e 2063 726f 7073 2061  ion then crops a
-000145d0: 6c6c 2074 6865 2076 6964 656f 2069 6e20  ll the video in 
-000145e0: 7468 6520 696e 7075 7420 6469 7265 6374  the input direct
-000145f0: 6f72 7920 6163 636f 7264 696e 6720 746f  ory according to
-00014600: 2074 6865 2073 6861 7065 2064 6566 696e   the shape defin
-00014610: 6564 0a20 2020 2020 2020 7573 696e 6720  ed.       using 
-00014620: 7468 6520 6669 7273 7420 7669 6465 6f20  the first video 
-00014630: 616e 6420 7361 7665 7320 7468 6520 7669  and saves the vi
-00014640: 6465 6f73 2069 6e20 7468 6520 6060 6f75  deos in the ``ou
-00014650: 745f 6469 7260 6020 7769 7468 2074 6865  t_dir`` with the
-00014660: 2073 616d 6520 6669 6c65 6e61 6d65 7320   same filenames 
-00014670: 6173 2074 6865 206f 7269 6769 6e61 6c20  as the original 
-00014680: 7669 6465 6f73 2e2e 0a0a 2020 2020 3a65  videos....    :e
-00014690: 7861 6d70 6c65 3a0a 2020 2020 3e3e 3e20  xample:.    >>> 
-000146a0: 6372 6f70 5f6d 756c 7469 706c 655f 7669  crop_multiple_vi
-000146b0: 6465 6f73 5f70 6f6c 7967 6f6e 7328 696e  deos_polygons(in
-000146c0: 5f64 6972 3d27 2f55 7365 7273 2f73 696d  _dir='/Users/sim
-000146d0: 6f6e 2f44 6573 6b74 6f70 2f65 6469 7465  on/Desktop/edite
-000146e0: 642f 7465 7374 7327 2c20 6f75 745f 6469  d/tests', out_di
-000146f0: 723d 272f 5573 6572 732f 7369 6d6f 6e2f  r='/Users/simon/
-00014700: 4465 736b 746f 7027 290a 2020 2020 2222  Desktop').    ""
-00014710: 220a 0a20 2020 2063 6865 636b 5f69 665f  "..    check_if_
-00014720: 6469 725f 6578 6973 7473 2869 6e5f 6469  dir_exists(in_di
-00014730: 723d 696e 5f64 6972 290a 2020 2020 6368  r=in_dir).    ch
-00014740: 6563 6b5f 6966 5f64 6972 5f65 7869 7374  eck_if_dir_exist
-00014750: 7328 696e 5f64 6972 3d6f 7574 5f64 6972  s(in_dir=out_dir
-00014760: 290a 2020 2020 7669 6465 6f5f 6669 6c65  ).    video_file
-00014770: 7320 3d20 6669 6e64 5f61 6c6c 5f76 6964  s = find_all_vid
-00014780: 656f 735f 696e 5f64 6972 6563 746f 7279  eos_in_directory
-00014790: 2864 6972 6563 746f 7279 3d69 6e5f 6469  (directory=in_di
-000147a0: 7229 0a20 2020 2070 6f6c 7967 6f6e 5f73  r).    polygon_s
-000147b0: 656c 6563 746f 7220 3d20 524f 4953 656c  elector = ROISel
-000147c0: 6563 746f 7250 6f6c 7967 6f6e 2870 6174  ectorPolygon(pat
-000147d0: 683d 6f73 2e70 6174 682e 6a6f 696e 2869  h=os.path.join(i
-000147e0: 6e5f 6469 722c 2076 6964 656f 5f66 696c  n_dir, video_fil
-000147f0: 6573 5b30 5d29 290a 2020 2020 706f 6c79  es[0])).    poly
-00014800: 676f 6e5f 7365 6c65 6374 6f72 2e72 756e  gon_selector.run
-00014810: 2829 0a20 2020 2076 6572 7469 6365 7320  ().    vertices 
-00014820: 3d20 706f 6c79 676f 6e5f 7365 6c65 6374  = polygon_select
-00014830: 6f72 2e70 6f6c 7967 6f6e 5f76 6572 7469  or.polygon_verti
-00014840: 6365 730a 2020 2020 706f 6c79 676f 6e20  ces.    polygon 
-00014850: 3d20 506f 6c79 676f 6e28 7665 7274 6963  = Polygon(vertic
-00014860: 6573 290a 2020 2020 7469 6d65 7220 3d20  es).    timer = 
-00014870: 5369 6d62 6154 696d 6572 2873 7461 7274  SimbaTimer(start
-00014880: 3d54 7275 6529 0a20 2020 2066 6f72 2076  =True).    for v
-00014890: 6964 656f 5f63 6e74 2c20 7669 6465 6f5f  ideo_cnt, video_
-000148a0: 7061 7468 2069 6e20 656e 756d 6572 6174  path in enumerat
-000148b0: 6528 7669 6465 6f5f 6669 6c65 7329 3a0a  e(video_files):.
-000148c0: 2020 2020 2020 2020 7072 696e 7428 0a20          print(. 
-000148d0: 2020 2020 2020 2020 2020 2066 2250 6f6c             f"Pol
-000148e0: 7967 6f6e 2063 726f 7070 696e 6720 7669  ygon cropping vi
-000148f0: 6465 6f20 7b76 6964 656f 5f70 6174 687d  deo {video_path}
-00014900: 2028 7b76 6964 656f 5f63 6e74 2b31 7d2f   ({video_cnt+1}/
-00014910: 7b6c 656e 2876 6964 656f 5f66 696c 6573  {len(video_files
-00014920: 297d 292e 2e2e 220a 2020 2020 2020 2020  )})...".        
-00014930: 290a 2020 2020 2020 2020 7669 6465 6f5f  ).        video_
-00014940: 7061 7468 203d 206f 732e 7061 7468 2e6a  path = os.path.j
-00014950: 6f69 6e28 696e 5f64 6972 2c20 7669 6465  oin(in_dir, vide
-00014960: 6f5f 7061 7468 290a 2020 2020 2020 2020  o_path).        
-00014970: 5f2c 2076 6964 656f 5f6e 616d 652c 205f  _, video_name, _
-00014980: 203d 2067 6574 5f66 6e5f 6578 7428 6669   = get_fn_ext(fi
-00014990: 6c65 7061 7468 3d76 6964 656f 5f70 6174  lepath=video_pat
-000149a0: 6829 0a20 2020 2020 2020 2073 6176 655f  h).        save_
-000149b0: 7061 7468 203d 206f 732e 7061 7468 2e6a  path = os.path.j
-000149c0: 6f69 6e28 6f75 745f 6469 722c 2066 227b  oin(out_dir, f"{
-000149d0: 7669 6465 6f5f 6e61 6d65 7d2e 6d70 3422  video_name}.mp4"
-000149e0: 290a 2020 2020 2020 2020 7669 6465 6f5f  ).        video_
-000149f0: 6d65 7461 5f64 6174 6120 3d20 6765 745f  meta_data = get_
-00014a00: 7669 6465 6f5f 6d65 7461 5f64 6174 6128  video_meta_data(
-00014a10: 7669 6465 6f5f 7061 7468 3d76 6964 656f  video_path=video
-00014a20: 5f70 6174 6829 0a20 2020 2020 2020 2070  _path).        p
-00014a30: 6f6c 7967 6f6e 7320 3d20 5b70 6f6c 7967  olygons = [polyg
-00014a40: 6f6e 2066 6f72 2078 2069 6e20 7261 6e67  on for x in rang
-00014a50: 6528 7669 6465 6f5f 6d65 7461 5f64 6174  e(video_meta_dat
-00014a60: 615b 2266 7261 6d65 5f63 6f75 6e74 225d  a["frame_count"]
-00014a70: 295d 0a20 2020 2020 2020 2070 6f6c 7967  )].        polyg
-00014a80: 6f6e 7320 3d20 496d 6167 654d 6978 696e  ons = ImageMixin
-00014a90: 2829 2e73 6c69 6365 5f73 6861 7065 735f  ().slice_shapes_
-00014aa0: 696e 5f69 6d67 7328 0a20 2020 2020 2020  in_imgs(.       
-00014ab0: 2020 2020 2069 6d67 733d 7669 6465 6f5f       imgs=video_
-00014ac0: 7061 7468 2c20 7368 6170 6573 3d70 6f6c  path, shapes=pol
-00014ad0: 7967 6f6e 732c 2076 6572 626f 7365 3d46  ygons, verbose=F
-00014ae0: 616c 7365 0a20 2020 2020 2020 2029 0a20  alse.        ). 
-00014af0: 2020 2020 2020 205f 203d 2049 6d61 6765         _ = Image
-00014b00: 4d69 7869 6e2e 696d 675f 7374 6163 6b5f  Mixin.img_stack_
-00014b10: 746f 5f76 6964 656f 280a 2020 2020 2020  to_video(.      
-00014b20: 2020 2020 2020 696d 6773 3d70 6f6c 7967        imgs=polyg
-00014b30: 6f6e 732c 2073 6176 655f 7061 7468 3d73  ons, save_path=s
-00014b40: 6176 655f 7061 7468 2c20 6670 733d 7669  ave_path, fps=vi
-00014b50: 6465 6f5f 6d65 7461 5f64 6174 615b 2266  deo_meta_data["f
-00014b60: 7073 225d 0a20 2020 2020 2020 2029 0a20  ps"].        ). 
-00014b70: 2020 2074 696d 6572 2e73 746f 705f 7469     timer.stop_ti
-00014b80: 6d65 7228 290a 2020 2020 7374 646f 7574  mer().    stdout
-00014b90: 5f73 7563 6365 7373 280a 2020 2020 2020  _success(.      
-00014ba0: 2020 6d73 673d 6622 506f 6c79 676f 6e2d    msg=f"Polygon-
-00014bb0: 6261 7365 6420 6372 6f70 7065 6420 7b6c  based cropped {l
-00014bc0: 656e 2876 6964 656f 5f66 696c 6573 297d  en(video_files)}
-00014bd0: 2066 696c 6573 2074 6f20 6469 7265 6374   files to direct
-00014be0: 6f72 7920 7b6f 7574 5f64 6972 7d22 2c0a  ory {out_dir}",.
-00014bf0: 2020 2020 2020 2020 656c 6170 7365 645f          elapsed_
-00014c00: 7469 6d65 3d74 696d 6572 2e65 6c61 7073  time=timer.elaps
-00014c10: 6564 5f74 696d 655f 7374 722c 0a20 2020  ed_time_str,.   
-00014c20: 2029 0a0a 0a64 6566 2072 6573 697a 655f   )...def resize_
-00014c30: 7669 6465 6f73 5f62 795f 6865 6967 6874  videos_by_height
-00014c40: 280a 2020 2020 7669 6465 6f5f 7061 7468  (.    video_path
-00014c50: 733a 204c 6973 745b 556e 696f 6e5b 7374  s: List[Union[st
-00014c60: 722c 206f 732e 5061 7468 4c69 6b65 5d5d  r, os.PathLike]]
-00014c70: 2c0a 2020 2020 6865 6967 6874 3a20 556e  ,.    height: Un
-00014c80: 696f 6e5b 696e 742c 2073 7472 5d2c 0a20  ion[int, str],. 
-00014c90: 2020 206f 7665 7277 7269 7465 3a20 4f70     overwrite: Op
-00014ca0: 7469 6f6e 616c 5b62 6f6f 6c5d 203d 2046  tional[bool] = F
-00014cb0: 616c 7365 2c0a 2020 2020 7361 7665 5f64  alse,.    save_d
-00014cc0: 6972 3a20 4f70 7469 6f6e 616c 5b55 6e69  ir: Optional[Uni
-00014cd0: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
-00014ce0: 696b 655d 5d20 3d20 4e6f 6e65 2c0a 2020  ike]] = None,.  
-00014cf0: 2020 6770 753a 204f 7074 696f 6e61 6c5b    gpu: Optional[
-00014d00: 626f 6f6c 5d20 3d20 4661 6c73 652c 0a20  bool] = False,. 
-00014d10: 2020 2076 6572 626f 7365 3a20 4f70 7469     verbose: Opti
-00014d20: 6f6e 616c 5b62 6f6f 6c5d 203d 2054 7275  onal[bool] = Tru
-00014d30: 652c 0a29 202d 3e20 556e 696f 6e5b 4e6f  e,.) -> Union[No
-00014d40: 6e65 2c20 4c69 7374 5b55 6e69 6f6e 5b4e  ne, List[Union[N
-00014d50: 6f6e 652c 2073 7472 2c20 6f73 2e50 6174  one, str, os.Pat
-00014d60: 684c 696b 655d 5d5d 3a0a 2020 2020 2222  hLike]]]:.    ""
-00014d70: 220a 2020 2020 5265 2d73 697a 6520 6120  ".    Re-size a 
-00014d80: 6c69 7374 206f 6620 7669 6465 6f73 2074  list of videos t
-00014d90: 6f20 6120 7370 6563 6966 6965 6420 6865  o a specified he
-00014da0: 6967 6874 2077 6869 6c65 2072 6574 6169  ight while retai
-00014db0: 6e69 6e67 2074 6865 6972 2061 7370 6563  ning their aspec
-00014dc0: 7420 7261 7469 6f73 2e0a 0a20 2020 203a  t ratios...    :
-00014dd0: 7061 7261 6d20 4c69 7374 5b55 6e69 6f6e  param List[Union
-00014de0: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
-00014df0: 655d 5d20 7669 6465 6f5f 7061 7468 733a  e]] video_paths:
-00014e00: 204c 6973 7420 6f66 2070 6174 6820 746f   List of path to
-00014e10: 2076 6964 656f 732e 0a20 2020 203a 7061   videos..    :pa
-00014e20: 7261 6d20 556e 696f 6e5b 696e 742c 2073  ram Union[int, s
-00014e30: 7472 5d20 6865 6967 6874 3a20 5468 6520  tr] height: The 
-00014e40: 6865 6967 6874 206f 6620 7468 6520 6f75  height of the ou
-00014e50: 7470 7574 2076 6964 656f 732e 2049 6620  tput videos. If 
-00014e60: 696e 742c 2074 6865 6e20 7468 6520 6865  int, then the he
-00014e70: 6967 6874 2069 6e20 7069 7865 6c73 2e20  ight in pixels. 
-00014e80: 4966 2073 7472 2c20 7468 656e 2074 6865  If str, then the
-00014e90: 2069 6e64 6578 2069 6e20 6060 7669 6465   index in ``vide
-00014ea0: 6f5f 7061 7468 7360 6020 6672 6f6d 2077  o_paths`` from w
-00014eb0: 6869 6368 2074 6f20 6772 6162 2074 6865  hich to grab the
-00014ec0: 2068 6569 6768 742e 0a20 2020 203a 7061   height..    :pa
-00014ed0: 7261 6d20 4f70 7469 6f6e 616c 5b62 6f6f  ram Optional[boo
-00014ee0: 6c5d 206f 7665 7277 7269 7465 3a20 4966  l] overwrite: If
-00014ef0: 2054 7275 652c 2074 6865 6e20 6f76 6572   True, then over
-00014f00: 7772 6974 6573 2074 6865 206f 7269 6769  writes the origi
-00014f10: 6e61 6c20 7669 6465 6f73 2e20 4465 6661  nal videos. Defa
-00014f20: 756c 7420 4661 6c73 652e 0a20 2020 203a  ult False..    :
-00014f30: 7061 7261 6d20 4f70 7469 6f6e 616c 5b55  param Optional[U
-00014f40: 6e69 6f6e 5b73 7472 2c20 6f73 2e50 6174  nion[str, os.Pat
-00014f50: 684c 696b 655d 5d20 7361 7665 5f64 6972  hLike]] save_dir
-00014f60: 3a20 4966 206e 6f74 204e 6f6e 652c 2074  : If not None, t
-00014f70: 6865 6e20 7468 6520 6469 7265 6374 6f72  hen the director
-00014f80: 7920 7768 6572 6520 746f 2073 746f 7265  y where to store
-00014f90: 2074 6865 2072 652d 7369 7a65 6420 7669   the re-sized vi
-00014fa0: 6465 6f73 2e0a 2020 2020 3a70 6172 616d  deos..    :param
-00014fb0: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
-00014fc0: 6770 753a 2049 6620 5472 7565 2c20 7468  gpu: If True, th
-00014fd0: 656e 2075 7365 2046 466d 7065 6720 4750  en use FFmpeg GP
-00014fe0: 5520 636f 6465 6373 2e20 4465 6661 756c  U codecs. Defaul
-00014ff0: 7420 4661 6c73 652e 0a20 2020 203a 7061  t False..    :pa
-00015000: 7261 6d20 4f70 7469 6f6e 616c 5b62 6f6f  ram Optional[boo
-00015010: 6c5d 2076 6572 626f 7365 3a20 4966 2054  l] verbose: If T
-00015020: 7275 652c 2070 7269 6e74 7320 7072 6f67  rue, prints prog
-00015030: 7265 7373 2e20 4465 6661 756c 7420 5472  ress. Default Tr
-00015040: 7565 2e0a 2020 2020 3a72 6574 7572 6e20  ue..    :return 
-00015050: 556e 696f 6e5b 4e6f 6e65 2c20 4c69 7374  Union[None, List
-00015060: 5b55 6e69 6f6e 5b73 7472 2c20 6f73 2e50  [Union[str, os.P
-00015070: 6174 684c 696b 655d 5d5d 3a20 4966 2073  athLike]]]: If s
-00015080: 6176 655f 6469 7220 6973 206e 6f74 204e  ave_dir is not N
-00015090: 6f6e 652c 2072 6574 7572 6e73 2074 6865  one, returns the
-000150a0: 2070 6174 6873 206f 6620 7468 6520 7265   paths of the re
-000150b0: 2d73 697a 6564 2076 6964 656f 732e 2045  -sized videos. E
-000150c0: 6c73 6520 7265 7475 726e 7320 656d 7074  lse returns empt
-000150d0: 7920 6c69 7374 2e0a 0a20 2020 203a 6578  y list...    :ex
-000150e0: 616d 706c 653a 0a20 2020 203e 3e3e 2076  ample:.    >>> v
-000150f0: 6964 656f 5f70 6174 6873 3d20 5b27 2f55  ideo_paths= ['/U
-00015100: 7365 7273 2f73 696d 6f6e 2f44 6573 6b74  sers/simon/Deskt
-00015110: 6f70 2f65 6e76 732f 7369 6d62 612f 7472  op/envs/simba/tr
-00015120: 6f75 626c 6573 686f 6f74 696e 672f 5241  oubleshooting/RA
-00015130: 545f 4e4f 522f 7072 6f6a 6563 745f 666f  T_NOR/project_fo
-00015140: 6c64 6572 2f76 6964 656f 732f 7465 7374  lder/videos/test
-00015150: 2f30 3831 3032 3032 315f 444f 545f 5261  /08102021_DOT_Ra
-00015160: 7437 5f38 2832 292e 6d70 3427 2c20 272f  t7_8(2).mp4', '/
-00015170: 5573 6572 732f 7369 6d6f 6e2f 4465 736b  Users/simon/Desk
-00015180: 746f 702f 656e 7673 2f73 696d 6261 2f74  top/envs/simba/t
-00015190: 726f 7562 6c65 7368 6f6f 7469 6e67 2f52  roubleshooting/R
-000151a0: 4154 5f4e 4f52 2f70 726f 6a65 6374 5f66  AT_NOR/project_f
-000151b0: 6f6c 6465 722f 7669 6465 6f73 2f74 6573  older/videos/tes
-000151c0: 742f 3038 3130 3230 3231 5f44 4f54 5f52  t/08102021_DOT_R
-000151d0: 6174 3131 5f31 322e 6d70 3427 5d0a 2020  at11_12.mp4'].  
-000151e0: 2020 3e3e 3e20 5f20 3d20 7265 7369 7a65    >>> _ = resize
-000151f0: 5f76 6964 656f 735f 6279 5f68 6569 6768  _videos_by_heigh
-00015200: 7428 7669 6465 6f5f 7061 7468 733d 7669  t(video_paths=vi
-00015210: 6465 6f5f 7061 7468 732c 2068 6569 6768  deo_paths, heigh
-00015220: 743d 3330 302c 206f 7665 7277 7269 7465  t=300, overwrite
-00015230: 3d46 616c 7365 2c20 7361 7665 5f64 6972  =False, save_dir
-00015240: 3d27 2f55 7365 7273 2f73 696d 6f6e 2f44  ='/Users/simon/D
-00015250: 6573 6b74 6f70 2f65 6e76 732f 7369 6d62  esktop/envs/simb
-00015260: 612f 7472 6f75 626c 6573 686f 6f74 696e  a/troubleshootin
-00015270: 672f 5241 545f 4e4f 522f 7072 6f6a 6563  g/RAT_NOR/projec
-00015280: 745f 666f 6c64 6572 2f76 6964 656f 732f  t_folder/videos/
-00015290: 7465 7374 2f6e 6577 2729 0a20 2020 2022  test/new').    "
-000152a0: 2222 0a20 2020 2074 696d 6572 203d 2053  "".    timer = S
-000152b0: 696d 6261 5469 6d65 7228 7374 6172 743d  imbaTimer(start=
-000152c0: 5472 7565 290a 2020 2020 6966 2028 6e6f  True).    if (no
-000152d0: 7420 6f76 6572 7772 6974 6529 2061 6e64  t overwrite) and
-000152e0: 2028 7361 7665 5f64 6972 2069 7320 4e6f   (save_dir is No
-000152f0: 6e65 293a 0a20 2020 2020 2020 2072 6169  ne):.        rai
-00015300: 7365 2049 6e76 616c 6964 496e 7075 7445  se InvalidInputE
-00015310: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
-00015320: 2020 6d73 673d 2250 6173 7320 6120 7361    msg="Pass a sa
-00015330: 7665 5f64 6972 204f 5220 7365 7420 6f76  ve_dir OR set ov
-00015340: 6572 7772 6974 6520 746f 2054 7275 6522  erwrite to True"
-00015350: 2c0a 2020 2020 2020 2020 2020 2020 736f  ,.            so
-00015360: 7572 6365 3d72 6573 697a 655f 7669 6465  urce=resize_vide
-00015370: 6f73 5f62 795f 6865 6967 6874 2e5f 5f6e  os_by_height.__n
-00015380: 616d 655f 5f2c 0a20 2020 2020 2020 2029  ame__,.        )
-00015390: 0a20 2020 2065 6c69 6620 286f 7665 7277  .    elif (overw
-000153a0: 7269 7465 2920 616e 6420 2873 6176 655f  rite) and (save_
-000153b0: 6469 7220 6973 206e 6f74 204e 6f6e 6529  dir is not None)
-000153c0: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
-000153d0: 496e 7661 6c69 6449 6e70 7574 4572 726f  InvalidInputErro
-000153e0: 7228 0a20 2020 2020 2020 2020 2020 206d  r(.            m
-000153f0: 7367 3d22 5061 7373 2045 4954 4845 5220  sg="Pass EITHER 
-00015400: 6f76 6572 7772 6974 6520 6173 2054 7275  overwrite as Tru
-00015410: 6520 4f52 2070 6173 7320 6120 7361 7665  e OR pass a save
-00015420: 5f64 6972 222c 0a20 2020 2020 2020 2020  _dir",.         
-00015430: 2020 2073 6f75 7263 653d 7265 7369 7a65     source=resize
-00015440: 5f76 6964 656f 735f 6279 5f68 6569 6768  _videos_by_heigh
-00015450: 742e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  t.__name__,.    
-00015460: 2020 2020 290a 2020 2020 6966 2073 6176      ).    if sav
-00015470: 655f 6469 7220 6973 206e 6f74 204e 6f6e  e_dir is not Non
-00015480: 653a 0a20 2020 2020 2020 2069 6620 6e6f  e:.        if no
-00015490: 7420 6f73 2e70 6174 682e 6973 6469 7228  t os.path.isdir(
-000154a0: 7361 7665 5f64 6972 293a 0a20 2020 2020  save_dir):.     
-000154b0: 2020 2020 2020 206f 732e 6d61 6b65 6469         os.makedi
-000154c0: 7273 2873 6176 655f 6469 7229 0a20 2020  rs(save_dir).   
-000154d0: 2063 6865 636b 5f76 616c 6964 5f6c 7374   check_valid_lst
-000154e0: 280a 2020 2020 2020 2020 6461 7461 3d76  (.        data=v
-000154f0: 6964 656f 5f70 6174 6873 2c20 736f 7572  ideo_paths, sour
-00015500: 6365 3d72 6573 697a 655f 7669 6465 6f73  ce=resize_videos
-00015510: 5f62 795f 6865 6967 6874 2e5f 5f6e 616d  _by_height.__nam
-00015520: 655f 5f2c 206d 696e 5f6c 656e 3d31 0a20  e__, min_len=1. 
-00015530: 2020 2029 0a20 2020 205f 203d 205b 6368     ).    _ = [ch
-00015540: 6563 6b5f 6669 6c65 5f65 7869 7374 5f61  eck_file_exist_a
-00015550: 6e64 5f72 6561 6461 626c 6528 7829 2066  nd_readable(x) f
-00015560: 6f72 2078 2069 6e20 7669 6465 6f5f 7061  or x in video_pa
-00015570: 7468 735d 0a20 2020 206e 6577 5f76 6964  ths].    new_vid
-00015580: 656f 5f70 6174 6873 203d 205b 5d0a 2020  eo_paths = [].  
-00015590: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-000155a0: 6865 6967 6874 2c20 7374 7229 3a0a 2020  height, str):.  
-000155b0: 2020 2020 2020 6368 6563 6b5f 696e 7428        check_int(
-000155c0: 0a20 2020 2020 2020 2020 2020 206e 616d  .            nam
-000155d0: 653d 6622 7b72 6573 697a 655f 7669 6465  e=f"{resize_vide
-000155e0: 6f73 5f62 795f 6865 6967 6874 2e5f 5f6e  os_by_height.__n
-000155f0: 616d 655f 5f7d 2068 6569 6768 7422 2c0a  ame__} height",.
-00015600: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-00015610: 653d 6865 6967 6874 2c0a 2020 2020 2020  e=height,.      
-00015620: 2020 2020 2020 6d69 6e5f 7661 6c75 653d        min_value=
-00015630: 302c 0a20 2020 2020 2020 2020 2020 206d  0,.            m
-00015640: 6178 5f76 616c 7565 3d6c 656e 2876 6964  ax_value=len(vid
-00015650: 656f 5f70 6174 6873 292c 0a20 2020 2020  eo_paths),.     
-00015660: 2020 2029 0a20 2020 2020 2020 2076 6964     ).        vid
-00015670: 656f 5f68 6569 6768 7473 203d 205b 5d0a  eo_heights = [].
-00015680: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00015690: 2076 6964 656f 5f70 6174 6873 3a0a 2020   video_paths:.  
-000156a0: 2020 2020 2020 2020 2020 7669 6465 6f5f            video_
-000156b0: 6865 6967 6874 732e 6170 7065 6e64 2867  heights.append(g
-000156c0: 6574 5f76 6964 656f 5f6d 6574 615f 6461  et_video_meta_da
-000156d0: 7461 2876 6964 656f 5f70 6174 683d 6929  ta(video_path=i)
-000156e0: 5b22 6865 6967 6874 225d 290a 2020 2020  ["height"]).    
-000156f0: 2020 2020 6865 6967 6874 203d 2076 6964      height = vid
-00015700: 656f 5f68 6569 6768 7473 5b69 6e74 2868  eo_heights[int(h
-00015710: 6569 6768 7429 5d0a 2020 2020 666f 7220  eight)].    for 
-00015720: 636e 742c 2076 6964 656f 5f70 6174 6820  cnt, video_path 
-00015730: 696e 2065 6e75 6d65 7261 7465 2876 6964  in enumerate(vid
-00015740: 656f 5f70 6174 6873 293a 0a20 2020 2020  eo_paths):.     
-00015750: 2020 2064 6972 5f6e 616d 652c 2076 6964     dir_name, vid
-00015760: 656f 5f6e 616d 652c 2065 7874 203d 2067  eo_name, ext = g
-00015770: 6574 5f66 6e5f 6578 7428 7669 6465 6f5f  et_fn_ext(video_
-00015780: 7061 7468 290a 2020 2020 2020 2020 6966  path).        if
-00015790: 2076 6572 626f 7365 3a0a 2020 2020 2020   verbose:.      
-000157a0: 2020 2020 2020 7072 696e 7428 0a20 2020        print(.   
-000157b0: 2020 2020 2020 2020 2020 2020 2066 2252               f"R
-000157c0: 6573 697a 696e 6720 6865 6967 6874 2076  esizing height v
-000157d0: 6964 656f 207b 7669 6465 6f5f 6e61 6d65  ideo {video_name
-000157e0: 7d20 2856 6964 656f 207b 636e 742b 317d  } (Video {cnt+1}
-000157f0: 2f7b 6c65 6e28 7669 6465 6f5f 7061 7468  /{len(video_path
-00015800: 7329 7d29 2e2e 2e22 0a20 2020 2020 2020  s)})...".       
-00015810: 2020 2020 2029 0a20 2020 2020 2020 2069       ).        i
-00015820: 6620 6f76 6572 7772 6974 653a 0a20 2020  f overwrite:.   
-00015830: 2020 2020 2020 2020 2064 7420 3d20 6461           dt = da
-00015840: 7465 7469 6d65 2e6e 6f77 2829 2e73 7472  tetime.now().str
-00015850: 6674 696d 6528 2225 5925 6d25 6425 4825  ftime("%Y%m%d%H%
-00015860: 4d25 5322 290a 2020 2020 2020 2020 2020  M%S").          
-00015870: 2020 7361 7665 5f70 6174 6820 3d20 6f73    save_path = os
-00015880: 2e70 6174 682e 6a6f 696e 2864 6972 5f6e  .path.join(dir_n
-00015890: 616d 652c 2066 227b 7669 6465 6f5f 6e61  ame, f"{video_na
-000158a0: 6d65 7d5f 7b64 747d 2e6d 7034 2229 0a20  me}_{dt}.mp4"). 
-000158b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000158c0: 2020 2020 2020 2020 2073 6176 655f 7061           save_pa
-000158d0: 7468 203d 206f 732e 7061 7468 2e6a 6f69  th = os.path.joi
-000158e0: 6e28 7361 7665 5f64 6972 2c20 6622 7b76  n(save_dir, f"{v
-000158f0: 6964 656f 5f6e 616d 657d 2e6d 7034 2229  ideo_name}.mp4")
-00015900: 0a20 2020 2020 2020 2020 2020 206e 6577  .            new
-00015910: 5f76 6964 656f 5f70 6174 6873 2e61 7070  _video_paths.app
-00015920: 656e 6428 7361 7665 5f70 6174 6829 0a20  end(save_path). 
-00015930: 2020 2020 2020 2069 6620 6770 753a 0a20         if gpu:. 
-00015940: 2020 2020 2020 2020 2020 2063 6d64 203d             cmd =
-00015950: 2066 2766 666d 7065 6720 2d79 202d 6877   f'ffmpeg -y -hw
-00015960: 6163 6365 6c20 6175 746f 202d 633a 7620  accel auto -c:v 
-00015970: 6832 3634 5f63 7576 6964 202d 6920 227b  h264_cuvid -i "{
-00015980: 7669 6465 6f5f 7061 7468 7d22 202d 7666  video_path}" -vf
-00015990: 2073 6361 6c65 5f6e 7070 3d2d 323a 7b68   scale_npp=-2:{h
-000159a0: 6569 6768 747d 202d 633a 7620 6832 3634  eight} -c:v h264
-000159b0: 5f6e 7665 6e63 2022 7b73 6176 655f 7061  _nvenc "{save_pa
-000159c0: 7468 7d22 202d 6869 6465 5f62 616e 6e65  th}" -hide_banne
-000159d0: 7220 2d6c 6f67 6c65 7665 6c20 6572 726f  r -loglevel erro
-000159e0: 7220 2d79 270a 2020 2020 2020 2020 656c  r -y'.        el
-000159f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00015a00: 636d 6420 3d20 6627 6666 6d70 6567 202d  cmd = f'ffmpeg -
-00015a10: 7920 2d69 2022 7b76 6964 656f 5f70 6174  y -i "{video_pat
-00015a20: 687d 2220 2d76 6620 7363 616c 653d 2d32  h}" -vf scale=-2
-00015a30: 3a7b 6865 6967 6874 7d20 227b 7361 7665  :{height} "{save
-00015a40: 5f70 6174 687d 2220 2d68 6964 655f 6261  _path}" -hide_ba
-00015a50: 6e6e 6572 202d 6c6f 676c 6576 656c 2065  nner -loglevel e
-00015a60: 7272 6f72 202d 7927 0a20 2020 2020 2020  rror -y'.       
-00015a70: 2073 7562 7072 6f63 6573 732e 6361 6c6c   subprocess.call
-00015a80: 2863 6d64 2c20 7368 656c 6c3d 5472 7565  (cmd, shell=True
-00015a90: 2c20 7374 646f 7574 3d73 7562 7072 6f63  , stdout=subproc
-00015aa0: 6573 732e 5049 5045 290a 2020 2020 2020  ess.PIPE).      
-00015ab0: 2020 6966 206f 7665 7277 7269 7465 3a0a    if overwrite:.
-00015ac0: 2020 2020 2020 2020 2020 2020 7368 7574              shut
-00015ad0: 696c 2e63 6f70 7928 7361 7665 5f70 6174  il.copy(save_pat
-00015ae0: 682c 2076 6964 656f 5f70 6174 6829 0a20  h, video_path). 
-00015af0: 2020 2020 2020 2020 2020 206f 732e 7265             os.re
-00015b00: 6d6f 7665 2873 6176 655f 7061 7468 290a  move(save_path).
-00015b10: 2020 2020 7469 6d65 722e 7374 6f70 5f74      timer.stop_t
-00015b20: 696d 6572 2829 0a20 2020 2069 6620 7665  imer().    if ve
-00015b30: 7262 6f73 653a 0a20 2020 2020 2020 2070  rbose:.        p
-00015b40: 7269 6e74 280a 2020 2020 2020 2020 2020  rint(.          
-00015b50: 2020 6622 5265 7369 7a65 6420 6865 6967    f"Resized heig
-00015b60: 6874 207b 6c65 6e28 7669 6465 6f5f 7061  ht {len(video_pa
-00015b70: 7468 7329 7d20 7669 6465 6f28 7329 2e20  ths)} video(s). 
-00015b80: 456c 6170 7365 6420 7469 6d65 3a20 7b74  Elapsed time: {t
-00015b90: 696d 6572 2e65 6c61 7073 6564 5f74 696d  imer.elapsed_tim
-00015ba0: 655f 7374 727d 732e 220a 2020 2020 2020  e_str}s.".      
-00015bb0: 2020 290a 2020 2020 7265 7475 726e 206e    ).    return n
-00015bc0: 6577 5f76 6964 656f 5f70 6174 6873 0a0a  ew_video_paths..
-00015bd0: 0a64 6566 2072 6573 697a 655f 7669 6465  .def resize_vide
-00015be0: 6f73 5f62 795f 7769 6474 6828 0a20 2020  os_by_width(.   
-00015bf0: 2076 6964 656f 5f70 6174 6873 3a20 4c69   video_paths: Li
-00015c00: 7374 5b55 6e69 6f6e 5b73 7472 2c20 6f73  st[Union[str, os
-00015c10: 2e50 6174 684c 696b 655d 5d2c 0a20 2020  .PathLike]],.   
-00015c20: 2077 6964 7468 3a20 556e 696f 6e5b 696e   width: Union[in
-00015c30: 742c 2073 7472 5d2c 0a20 2020 206f 7665  t, str],.    ove
-00015c40: 7277 7269 7465 3a20 4f70 7469 6f6e 616c  rwrite: Optional
-00015c50: 5b62 6f6f 6c5d 203d 2046 616c 7365 2c0a  [bool] = False,.
-00015c60: 2020 2020 7361 7665 5f64 6972 3a20 4f70      save_dir: Op
-00015c70: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
-00015c80: 2c20 6f73 2e50 6174 684c 696b 655d 5d20  , os.PathLike]] 
-00015c90: 3d20 4e6f 6e65 2c0a 2020 2020 6770 753a  = None,.    gpu:
-00015ca0: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
-00015cb0: 3d20 4661 6c73 652c 0a20 2020 2076 6572  = False,.    ver
-00015cc0: 626f 7365 3a20 4f70 7469 6f6e 616c 5b62  bose: Optional[b
-00015cd0: 6f6f 6c5d 203d 2054 7275 652c 0a29 202d  ool] = True,.) -
-00015ce0: 3e20 556e 696f 6e5b 4e6f 6e65 2c20 4c69  > Union[None, Li
-00015cf0: 7374 5b55 6e69 6f6e 5b4e 6f6e 652c 2073  st[Union[None, s
-00015d00: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
-00015d10: 5d5d 3a0a 2020 2020 2222 220a 2020 2020  ]]:.    """.    
-00015d20: 5265 2d73 697a 6520 6120 6c69 7374 206f  Re-size a list o
-00015d30: 6620 7669 6465 6f73 2074 6f20 6120 7370  f videos to a sp
-00015d40: 6563 6966 6965 6420 7769 6474 6820 7768  ecified width wh
-00015d50: 696c 6520 7265 7461 696e 696e 6720 7468  ile retaining th
-00015d60: 6569 7220 6173 7065 6374 2072 6174 696f  eir aspect ratio
-00015d70: 732e 0a0a 2020 2020 3a70 6172 616d 204c  s...    :param L
-00015d80: 6973 745b 556e 696f 6e5b 7374 722c 206f  ist[Union[str, o
-00015d90: 732e 5061 7468 4c69 6b65 5d5d 2076 6964  s.PathLike]] vid
-00015da0: 656f 5f70 6174 6873 3a20 4c69 7374 206f  eo_paths: List o
-00015db0: 6620 7061 7468 2074 6f20 7669 6465 6f73  f path to videos
-00015dc0: 2e0a 2020 2020 3a70 6172 616d 2055 6e69  ..    :param Uni
-00015dd0: 6f6e 5b69 6e74 2c20 7374 725d 2077 6964  on[int, str] wid
-00015de0: 7468 3a20 5468 6520 7769 6474 6820 6f66  th: The width of
-00015df0: 2074 6865 206f 7574 7075 7420 7669 6465   the output vide
-00015e00: 6f73 2e20 4966 2069 6e74 2c20 7468 656e  os. If int, then
-00015e10: 2074 6865 2077 6964 7468 2069 6e20 7069   the width in pi
-00015e20: 7865 6c73 2e20 4966 2073 7472 2c20 7468  xels. If str, th
-00015e30: 656e 2074 6865 2069 6e64 6578 2069 6e20  en the index in 
-00015e40: 6060 7669 6465 6f5f 7061 7468 7360 6020  ``video_paths`` 
-00015e50: 6672 6f6d 2077 6869 6368 2074 6f20 6772  from which to gr
-00015e60: 6162 2074 6865 2077 6964 7468 2e0a 2020  ab the width..  
-00015e70: 2020 3a70 6172 616d 204f 7074 696f 6e61    :param Optiona
-00015e80: 6c5b 626f 6f6c 5d20 6f76 6572 7772 6974  l[bool] overwrit
-00015e90: 653a 2049 6620 5472 7565 2c20 7468 656e  e: If True, then
-00015ea0: 206f 7665 7277 7269 7465 7320 7468 6520   overwrites the 
-00015eb0: 6f72 6967 696e 616c 2076 6964 656f 732e  original videos.
-00015ec0: 2044 6566 6175 6c74 2046 616c 7365 2e0a   Default False..
-00015ed0: 2020 2020 3a70 6172 616d 204f 7074 696f      :param Optio
-00015ee0: 6e61 6c5b 556e 696f 6e5b 7374 722c 206f  nal[Union[str, o
-00015ef0: 732e 5061 7468 4c69 6b65 5d5d 2073 6176  s.PathLike]] sav
-00015f00: 655f 6469 723a 2049 6620 6e6f 7420 4e6f  e_dir: If not No
-00015f10: 6e65 2c20 7468 656e 2074 6865 2064 6972  ne, then the dir
-00015f20: 6563 746f 7279 2077 6865 7265 2074 6f20  ectory where to 
-00015f30: 7374 6f72 6520 7468 6520 7265 2d73 697a  store the re-siz
-00015f40: 6564 2076 6964 656f 732e 0a20 2020 203a  ed videos..    :
-00015f50: 7061 7261 6d20 4f70 7469 6f6e 616c 5b62  param Optional[b
-00015f60: 6f6f 6c5d 2067 7075 3a20 4966 2054 7275  ool] gpu: If Tru
-00015f70: 652c 2074 6865 6e20 7573 6520 4646 6d70  e, then use FFmp
-00015f80: 6567 2047 5055 2063 6f64 6563 732e 2044  eg GPU codecs. D
-00015f90: 6566 6175 6c74 2046 616c 7365 2e0a 2020  efault False..  
-00015fa0: 2020 3a70 6172 616d 204f 7074 696f 6e61    :param Optiona
-00015fb0: 6c5b 626f 6f6c 5d20 7665 7262 6f73 653a  l[bool] verbose:
-00015fc0: 2049 6620 5472 7565 2c20 7072 696e 7473   If True, prints
-00015fd0: 2070 726f 6772 6573 732e 2044 6566 6175   progress. Defau
-00015fe0: 6c74 2054 7275 652e 0a20 2020 203a 7265  lt True..    :re
-00015ff0: 7475 726e 2055 6e69 6f6e 5b4e 6f6e 652c  turn Union[None,
-00016000: 204c 6973 745b 556e 696f 6e5b 7374 722c   List[Union[str,
-00016010: 206f 732e 5061 7468 4c69 6b65 5d5d 5d3a   os.PathLike]]]:
-00016020: 2049 6620 7361 7665 5f64 6972 2069 7320   If save_dir is 
-00016030: 6e6f 7420 4e6f 6e65 2c20 7265 7475 726e  not None, return
-00016040: 7320 7468 6520 7061 7468 7320 6f66 2074  s the paths of t
-00016050: 6865 2072 652d 7369 7a65 6420 7669 6465  he re-sized vide
-00016060: 6f73 2e20 456c 7365 2072 6574 7572 6e73  os. Else returns
-00016070: 2065 6d70 7479 206c 6973 742e 0a0a 2020   empty list...  
-00016080: 2020 3a65 7861 6d70 6c65 3a0a 2020 2020    :example:.    
-00016090: 3e3e 3e20 7669 6465 6f5f 7061 7468 733d  >>> video_paths=
-000160a0: 205b 272f 5573 6572 732f 7369 6d6f 6e2f   ['/Users/simon/
-000160b0: 4465 736b 746f 702f 656e 7673 2f73 696d  Desktop/envs/sim
-000160c0: 6261 2f74 726f 7562 6c65 7368 6f6f 7469  ba/troubleshooti
-000160d0: 6e67 2f52 4154 5f4e 4f52 2f70 726f 6a65  ng/RAT_NOR/proje
-000160e0: 6374 5f66 6f6c 6465 722f 7669 6465 6f73  ct_folder/videos
-000160f0: 2f74 6573 742f 3038 3130 3230 3231 5f44  /test/08102021_D
-00016100: 4f54 5f52 6174 375f 3828 3229 2e6d 7034  OT_Rat7_8(2).mp4
-00016110: 272c 2027 2f55 7365 7273 2f73 696d 6f6e  ', '/Users/simon
-00016120: 2f44 6573 6b74 6f70 2f65 6e76 732f 7369  /Desktop/envs/si
-00016130: 6d62 612f 7472 6f75 626c 6573 686f 6f74  mba/troubleshoot
-00016140: 696e 672f 5241 545f 4e4f 522f 7072 6f6a  ing/RAT_NOR/proj
-00016150: 6563 745f 666f 6c64 6572 2f76 6964 656f  ect_folder/video
-00016160: 732f 7465 7374 2f30 3831 3032 3032 315f  s/test/08102021_
-00016170: 444f 545f 5261 7431 315f 3132 2e6d 7034  DOT_Rat11_12.mp4
-00016180: 275d 0a20 2020 203e 3e3e 205f 203d 2072  '].    >>> _ = r
-00016190: 6573 697a 655f 7669 6465 6f73 5f62 795f  esize_videos_by_
-000161a0: 7769 6474 6828 7669 6465 6f5f 7061 7468  width(video_path
-000161b0: 733d 7669 6465 6f5f 7061 7468 732c 2077  s=video_paths, w
-000161c0: 6964 7468 3d33 3030 2c20 6f76 6572 7772  idth=300, overwr
-000161d0: 6974 653d 4661 6c73 652c 2073 6176 655f  ite=False, save_
-000161e0: 6469 723d 272f 5573 6572 732f 7369 6d6f  dir='/Users/simo
-000161f0: 6e2f 4465 736b 746f 702f 656e 7673 2f73  n/Desktop/envs/s
-00016200: 696d 6261 2f74 726f 7562 6c65 7368 6f6f  imba/troubleshoo
-00016210: 7469 6e67 2f52 4154 5f4e 4f52 2f70 726f  ting/RAT_NOR/pro
-00016220: 6a65 6374 5f66 6f6c 6465 722f 7669 6465  ject_folder/vide
-00016230: 6f73 2f74 6573 742f 6e65 7727 290a 2020  os/test/new').  
-00016240: 2020 2222 220a 0a20 2020 2074 696d 6572    """..    timer
-00016250: 203d 2053 696d 6261 5469 6d65 7228 7374   = SimbaTimer(st
-00016260: 6172 743d 5472 7565 290a 2020 2020 6966  art=True).    if
-00016270: 2028 6e6f 7420 6f76 6572 7772 6974 6529   (not overwrite)
-00016280: 2061 6e64 2028 7361 7665 5f64 6972 2069   and (save_dir i
-00016290: 7320 4e6f 6e65 293a 0a20 2020 2020 2020  s None):.       
-000162a0: 2072 6169 7365 2049 6e76 616c 6964 496e   raise InvalidIn
-000162b0: 7075 7445 7272 6f72 280a 2020 2020 2020  putError(.      
-000162c0: 2020 2020 2020 6d73 673d 2250 726f 7669        msg="Provi
-000162d0: 6465 2061 2073 6176 655f 6469 7220 6f72  de a save_dir or
-000162e0: 2073 6574 206f 7665 7277 7269 7465 2074   set overwrite t
-000162f0: 6f20 5472 7565 222c 0a20 2020 2020 2020  o True",.       
-00016300: 2020 2020 2073 6f75 7263 653d 7265 7369       source=resi
-00016310: 7a65 5f76 6964 656f 735f 6279 5f77 6964  ze_videos_by_wid
-00016320: 7468 2e5f 5f6e 616d 655f 5f2c 0a20 2020  th.__name__,.   
-00016330: 2020 2020 2029 0a20 2020 2065 6c69 6620       ).    elif 
-00016340: 286f 7665 7277 7269 7465 2920 616e 6420  (overwrite) and 
-00016350: 2873 6176 655f 6469 7220 6973 206e 6f74  (save_dir is not
-00016360: 204e 6f6e 6529 3a0a 2020 2020 2020 2020   None):.        
-00016370: 7261 6973 6520 496e 7661 6c69 6449 6e70  raise InvalidInp
-00016380: 7574 4572 726f 7228 0a20 2020 2020 2020  utError(.       
-00016390: 2020 2020 206d 7367 3d22 5365 7420 4549       msg="Set EI
-000163a0: 5448 4552 206f 7665 7277 7269 7465 2074  THER overwrite t
-000163b0: 6f20 5472 7565 204f 5220 5072 6f76 6964  o True OR Provid
-000163c0: 6520 6120 7361 7665 5f64 6972 222c 0a20  e a save_dir",. 
-000163d0: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-000163e0: 653d 7265 7369 7a65 5f76 6964 656f 735f  e=resize_videos_
-000163f0: 6279 5f77 6964 7468 2e5f 5f6e 616d 655f  by_width.__name_
-00016400: 5f2c 0a20 2020 2020 2020 2029 0a20 2020  _,.        ).   
-00016410: 2069 6620 7361 7665 5f64 6972 2069 7320   if save_dir is 
-00016420: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00016430: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
-00016440: 2e69 7364 6972 2873 6176 655f 6469 7229  .isdir(save_dir)
-00016450: 3a0a 2020 2020 2020 2020 2020 2020 6f73  :.            os
-00016460: 2e6d 616b 6564 6972 7328 7361 7665 5f64  .makedirs(save_d
-00016470: 6972 290a 2020 2020 6368 6563 6b5f 7661  ir).    check_va
-00016480: 6c69 645f 6c73 7428 6461 7461 3d76 6964  lid_lst(data=vid
-00016490: 656f 5f70 6174 6873 2c20 736f 7572 6365  eo_paths, source
-000164a0: 3d72 6573 697a 655f 7669 6465 6f73 5f62  =resize_videos_b
-000164b0: 795f 7769 6474 682e 5f5f 6e61 6d65 5f5f  y_width.__name__
-000164c0: 2c20 6d69 6e5f 6c65 6e3d 3129 0a20 2020  , min_len=1).   
-000164d0: 205f 203d 205b 6368 6563 6b5f 6669 6c65   _ = [check_file
-000164e0: 5f65 7869 7374 5f61 6e64 5f72 6561 6461  _exist_and_reada
-000164f0: 626c 6528 7829 2066 6f72 2078 2069 6e20  ble(x) for x in 
-00016500: 7669 6465 6f5f 7061 7468 735d 0a20 2020  video_paths].   
-00016510: 206e 6577 5f76 6964 656f 5f70 6174 6873   new_video_paths
-00016520: 203d 205b 5d0a 2020 2020 6966 2069 7369   = [].    if isi
-00016530: 6e73 7461 6e63 6528 7769 6474 682c 2073  nstance(width, s
-00016540: 7472 293a 0a20 2020 2020 2020 2063 6865  tr):.        che
-00016550: 636b 5f69 6e74 280a 2020 2020 2020 2020  ck_int(.        
-00016560: 2020 2020 6e61 6d65 3d66 227b 7265 7369      name=f"{resi
-00016570: 7a65 5f76 6964 656f 735f 6279 5f77 6964  ze_videos_by_wid
-00016580: 7468 2e5f 5f6e 616d 655f 5f7d 2068 6569  th.__name__} hei
-00016590: 6768 7422 2c0a 2020 2020 2020 2020 2020  ght",.          
-000165a0: 2020 7661 6c75 653d 7769 6474 682c 0a20    value=width,. 
-000165b0: 2020 2020 2020 2020 2020 206d 696e 5f76             min_v
-000165c0: 616c 7565 3d30 2c0a 2020 2020 2020 2020  alue=0,.        
-000165d0: 2020 2020 6d61 785f 7661 6c75 653d 6c65      max_value=le
-000165e0: 6e28 7669 6465 6f5f 7061 7468 7329 2c0a  n(video_paths),.
-000165f0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00016600: 2020 7669 6465 6f5f 7769 6474 6873 203d    video_widths =
-00016610: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
-00016620: 6920 696e 2076 6964 656f 5f70 6174 6873  i in video_paths
-00016630: 3a0a 2020 2020 2020 2020 2020 2020 7669  :.            vi
-00016640: 6465 6f5f 7769 6474 6873 2e61 7070 656e  deo_widths.appen
-00016650: 6428 6765 745f 7669 6465 6f5f 6d65 7461  d(get_video_meta
-00016660: 5f64 6174 6128 7669 6465 6f5f 7061 7468  _data(video_path
-00016670: 3d69 295b 2277 6964 7468 225d 290a 2020  =i)["width"]).  
-00016680: 2020 2020 2020 7769 6474 6820 3d20 7669        width = vi
-00016690: 6465 6f5f 7769 6474 6873 5b69 6e74 2877  deo_widths[int(w
-000166a0: 6964 7468 295d 0a20 2020 2066 6f72 2063  idth)].    for c
-000166b0: 6e74 2c20 7669 6465 6f5f 7061 7468 2069  nt, video_path i
-000166c0: 6e20 656e 756d 6572 6174 6528 7669 6465  n enumerate(vide
-000166d0: 6f5f 7061 7468 7329 3a0a 2020 2020 2020  o_paths):.      
-000166e0: 2020 6469 725f 6e61 6d65 2c20 7669 6465    dir_name, vide
-000166f0: 6f5f 6e61 6d65 2c20 6578 7420 3d20 6765  o_name, ext = ge
-00016700: 745f 666e 5f65 7874 2876 6964 656f 5f70  t_fn_ext(video_p
-00016710: 6174 6829 0a20 2020 2020 2020 2069 6620  ath).        if 
-00016720: 7665 7262 6f73 653a 0a20 2020 2020 2020  verbose:.       
-00016730: 2020 2020 2070 7269 6e74 280a 2020 2020       print(.    
-00016740: 2020 2020 2020 2020 2020 2020 6622 5265              f"Re
-00016750: 7369 7a69 6e67 2077 6964 7468 2076 6964  sizing width vid
-00016760: 656f 207b 7669 6465 6f5f 6e61 6d65 7d20  eo {video_name} 
-00016770: 2856 6964 656f 207b 636e 742b 317d 2f7b  (Video {cnt+1}/{
-00016780: 6c65 6e28 7669 6465 6f5f 7061 7468 7329  len(video_paths)
-00016790: 7d29 2e2e 2e22 0a20 2020 2020 2020 2020  })...".         
-000167a0: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
-000167b0: 6f76 6572 7772 6974 653a 0a20 2020 2020  overwrite:.     
-000167c0: 2020 2020 2020 2064 7420 3d20 6461 7465         dt = date
-000167d0: 7469 6d65 2e6e 6f77 2829 2e73 7472 6674  time.now().strft
-000167e0: 696d 6528 2225 5925 6d25 6425 4825 4d25  ime("%Y%m%d%H%M%
-000167f0: 5322 290a 2020 2020 2020 2020 2020 2020  S").            
-00016800: 7361 7665 5f70 6174 6820 3d20 6f73 2e70  save_path = os.p
-00016810: 6174 682e 6a6f 696e 2864 6972 5f6e 616d  ath.join(dir_nam
-00016820: 652c 2066 227b 7669 6465 6f5f 6e61 6d65  e, f"{video_name
-00016830: 7d5f 7b64 747d 2e6d 7034 2229 0a20 2020  }_{dt}.mp4").   
-00016840: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00016850: 2020 2020 2020 2073 6176 655f 7061 7468         save_path
-00016860: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-00016870: 7361 7665 5f64 6972 2c20 6622 7b76 6964  save_dir, f"{vid
-00016880: 656f 5f6e 616d 657d 2e6d 7034 2229 0a20  eo_name}.mp4"). 
-00016890: 2020 2020 2020 2020 2020 206e 6577 5f76             new_v
-000168a0: 6964 656f 5f70 6174 6873 2e61 7070 656e  ideo_paths.appen
-000168b0: 6428 7361 7665 5f70 6174 6829 0a20 2020  d(save_path).   
-000168c0: 2020 2020 2069 6620 6770 753a 0a20 2020       if gpu:.   
-000168d0: 2020 2020 2020 2020 2063 6d64 203d 2066           cmd = f
-000168e0: 2766 666d 7065 6720 2d79 202d 6877 6163  'ffmpeg -y -hwac
-000168f0: 6365 6c20 6175 746f 202d 6920 227b 7669  cel auto -i "{vi
-00016900: 6465 6f5f 7061 7468 7d22 202d 7666 2073  deo_path}" -vf s
-00016910: 6361 6c65 5f6e 7070 3d7b 7769 6474 687d  cale_npp={width}
-00016920: 3a2d 3220 2d63 3a76 2068 3236 345f 6e76  :-2 -c:v h264_nv
-00016930: 656e 6320 227b 7361 7665 5f70 6174 687d  enc "{save_path}
-00016940: 2220 2d68 6964 655f 6261 6e6e 6572 202d  " -hide_banner -
-00016950: 6c6f 676c 6576 656c 2065 7272 6f72 202d  loglevel error -
-00016960: 7927 0a20 2020 2020 2020 2065 6c73 653a  y'.        else:
-00016970: 0a20 2020 2020 2020 2020 2020 2063 6d64  .            cmd
-00016980: 203d 2066 2766 666d 7065 6720 2d79 202d   = f'ffmpeg -y -
-00016990: 6920 227b 7669 6465 6f5f 7061 7468 7d22  i "{video_path}"
-000169a0: 202d 7666 2073 6361 6c65 3d7b 7769 6474   -vf scale={widt
-000169b0: 687d 3a2d 3220 227b 7361 7665 5f70 6174  h}:-2 "{save_pat
-000169c0: 687d 2220 2d68 6964 655f 6261 6e6e 6572  h}" -hide_banner
-000169d0: 202d 6c6f 676c 6576 656c 2065 7272 6f72   -loglevel error
-000169e0: 202d 7927 0a20 2020 2020 2020 2073 7562   -y'.        sub
-000169f0: 7072 6f63 6573 732e 6361 6c6c 2863 6d64  process.call(cmd
-00016a00: 2c20 7368 656c 6c3d 5472 7565 2c20 7374  , shell=True, st
-00016a10: 646f 7574 3d73 7562 7072 6f63 6573 732e  dout=subprocess.
-00016a20: 5049 5045 290a 2020 2020 2020 2020 6966  PIPE).        if
-00016a30: 206f 7665 7277 7269 7465 3a0a 2020 2020   overwrite:.    
-00016a40: 2020 2020 2020 2020 7368 7574 696c 2e63          shutil.c
-00016a50: 6f70 7928 7361 7665 5f70 6174 682c 2076  opy(save_path, v
-00016a60: 6964 656f 5f70 6174 6829 0a20 2020 2020  ideo_path).     
-00016a70: 2020 2020 2020 206f 732e 7265 6d6f 7665         os.remove
-00016a80: 2873 6176 655f 7061 7468 290a 2020 2020  (save_path).    
-00016a90: 7469 6d65 722e 7374 6f70 5f74 696d 6572  timer.stop_timer
-00016aa0: 2829 0a20 2020 2069 6620 7665 7262 6f73  ().    if verbos
-00016ab0: 653a 0a20 2020 2020 2020 2070 7269 6e74  e:.        print
-00016ac0: 280a 2020 2020 2020 2020 2020 2020 6622  (.            f"
-00016ad0: 5265 7369 7a65 6420 7769 6474 6820 7b6c  Resized width {l
-00016ae0: 656e 2876 6964 656f 5f70 6174 6873 297d  en(video_paths)}
-00016af0: 2076 6964 656f 2873 292e 2045 6c61 7073   video(s). Elaps
-00016b00: 6564 2074 696d 653a 207b 7469 6d65 722e  ed time: {timer.
-00016b10: 656c 6170 7365 645f 7469 6d65 5f73 7472  elapsed_time_str
-00016b20: 7d73 2e22 0a20 2020 2020 2020 2029 0a20  }s.".        ). 
-00016b30: 2020 2072 6574 7572 6e20 6e65 775f 7669     return new_vi
-00016b40: 6465 6f5f 7061 7468 730a 0a0a 6465 6620  deo_paths...def 
-00016b50: 6372 6561 7465 5f62 6c61 6e6b 5f76 6964  create_blank_vid
-00016b60: 656f 280a 2020 2020 7061 7468 3a20 556e  eo(.    path: Un
-00016b70: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
-00016b80: 4c69 6b65 5d2c 0a20 2020 206c 656e 6774  Like],.    lengt
-00016b90: 683a 2069 6e74 2c0a 2020 2020 7769 6474  h: int,.    widt
-00016ba0: 683a 2069 6e74 2c0a 2020 2020 6865 6967  h: int,.    heig
-00016bb0: 6874 3a20 696e 742c 0a20 2020 2063 6f6c  ht: int,.    col
-00016bc0: 6f72 3a20 4f70 7469 6f6e 616c 5b73 7472  or: Optional[str
-00016bd0: 5d20 3d20 2262 6c61 636b 222c 0a20 2020  ] = "black",.   
-00016be0: 2067 7075 3a20 4f70 7469 6f6e 616c 5b62   gpu: Optional[b
-00016bf0: 6f6f 6c5d 203d 2046 616c 7365 2c0a 2020  ool] = False,.  
-00016c00: 2020 7665 7262 6f73 653a 204f 7074 696f    verbose: Optio
-00016c10: 6e61 6c5b 626f 6f6c 5d20 3d20 4661 6c73  nal[bool] = Fals
-00016c20: 652c 0a29 202d 3e20 4e6f 6e65 3a0a 2020  e,.) -> None:.  
-00016c30: 2020 2222 220a 2020 2020 4372 6561 7465    """.    Create
-00016c40: 2061 2022 626c 616e 6b22 2075 6e69 2d63   a "blank" uni-c
-00016c50: 6f6c 6f72 6564 2076 6964 656f 206f 6620  olored video of 
-00016c60: 7370 6563 6966 6965 6420 7369 7a65 2061  specified size a
-00016c70: 6e64 206c 656e 6774 682e 0a0a 2020 2020  nd length...    
-00016c80: 3a70 6172 616d 2055 6e69 6f6e 5b73 7472  :param Union[str
-00016c90: 2c20 6f73 2e50 6174 684c 696b 655d 2070  , os.PathLike] p
-00016ca0: 6174 683a 204c 6f63 6174 696f 6e20 7768  ath: Location wh
-00016cb0: 6572 6520 746f 2073 746f 7265 2074 6865  ere to store the
-00016cc0: 2062 6c61 6e6b 2076 6964 656f 2e0a 2020   blank video..  
-00016cd0: 2020 3a70 6172 616d 2069 6e74 206c 656e    :param int len
-00016ce0: 6774 683a 204c 656e 6774 6820 6f66 2074  gth: Length of t
-00016cf0: 6865 2062 6c61 6e6b 2076 6964 656f 2069  he blank video i
-00016d00: 6e20 7365 636f 6e64 732e 0a20 2020 203a  n seconds..    :
-00016d10: 7061 7261 6d20 696e 7420 7769 6474 683a  param int width:
-00016d20: 2057 6964 7468 206f 6620 7468 6520 626c   Width of the bl
-00016d30: 616e 6b20 7669 6465 6f20 696e 2070 6978  ank video in pix
-00016d40: 656c 732e 0a20 2020 203a 7061 7261 6d20  els..    :param 
-00016d50: 696e 7420 6865 6967 6874 3a20 4865 6967  int height: Heig
-00016d60: 6874 206f 6620 7468 6520 626c 616e 6b20  ht of the blank 
-00016d70: 7669 6465 6f20 696e 2070 6978 656c 732e  video in pixels.
-00016d80: 0a20 2020 203a 7061 7261 6d20 4f70 7469  .    :param Opti
-00016d90: 6f6e 616c 5b73 7472 5d20 636f 6c6f 723a  onal[str] color:
-00016da0: 2043 6f6c 6f72 206f 6620 7468 6520 626c   Color of the bl
-00016db0: 616e 6b20 7669 6465 6f2e 2044 6566 6175  ank video. Defau
-00016dc0: 6c74 2062 6c61 636b 2e0a 2020 2020 3a70  lt black..    :p
-00016dd0: 6172 616d 204f 7074 696f 6e61 6c5b 626f  aram Optional[bo
-00016de0: 6f6c 5d20 6770 753a 2049 6620 5472 7565  ol] gpu: If True
-00016df0: 2c20 7468 656e 2075 7365 2046 466d 7065  , then use FFmpe
-00016e00: 6720 4750 5520 636f 6465 6373 2e20 4465  g GPU codecs. De
-00016e10: 6661 756c 7420 4661 6c73 652e 0a20 2020  fault False..   
-00016e20: 203a 7061 7261 6d20 4f70 7469 6f6e 616c   :param Optional
-00016e30: 5b62 6f6f 6c5d 2076 6572 626f 7365 3a20  [bool] verbose: 
-00016e40: 4966 2054 7275 652c 2070 7269 6e74 7320  If True, prints 
-00016e50: 7072 6f67 7265 7373 2e20 4465 6661 756c  progress. Defaul
-00016e60: 7420 5472 7565 2e0a 2020 2020 3a72 6574  t True..    :ret
-00016e70: 7572 6e3a 204e 6f6e 652e 0a0a 2020 2020  urn: None...    
-00016e80: 3a65 7861 6d70 6c65 3a0a 2020 2020 3e3e  :example:.    >>
-00016e90: 3e20 5f20 3d20 6372 6561 7465 5f62 6c61  > _ = create_bla
-00016ea0: 6e6b 5f76 6964 656f 2870 6174 683d 272f  nk_video(path='/
-00016eb0: 5573 6572 732f 7369 6d6f 6e2f 4465 736b  Users/simon/Desk
-00016ec0: 746f 702f 656e 7673 2f73 696d 6261 2f74  top/envs/simba/t
-00016ed0: 726f 7562 6c65 7368 6f6f 7469 6e67 2f52  roubleshooting/R
-00016ee0: 4154 5f4e 4f52 2f70 726f 6a65 6374 5f66  AT_NOR/project_f
-00016ef0: 6f6c 6465 722f 7669 6465 6f73 2f74 6573  older/videos/tes
-00016f00: 742f 6e65 772f 626c 616e 6b5f 7465 7374  t/new/blank_test
-00016f10: 2e6d 7034 272c 206c 656e 6774 683d 352c  .mp4', length=5,
-00016f20: 2077 6964 7468 3d33 3030 2c20 6865 6967   width=300, heig
-00016f30: 6874 3d34 3030 2c20 6770 753d 4661 6c73  ht=400, gpu=Fals
-00016f40: 652c 2076 6572 626f 7365 3d54 7275 652c  e, verbose=True,
-00016f50: 2063 6f6c 6f72 3d27 6f72 616e 6765 2729   color='orange')
-00016f60: 0a20 2020 2022 2222 0a0a 2020 2020 6368  .    """..    ch
-00016f70: 6563 6b5f 696e 7428 6e61 6d65 3d66 227b  eck_int(name=f"{
-00016f80: 6372 6561 7465 5f62 6c61 6e6b 5f76 6964  create_blank_vid
-00016f90: 656f 2e5f 5f6e 616d 655f 5f7d 206c 656e  eo.__name__} len
-00016fa0: 6774 6822 2c20 7661 6c75 653d 6c65 6e67  gth", value=leng
-00016fb0: 7468 2c20 6d69 6e5f 7661 6c75 653d 3129  th, min_value=1)
-00016fc0: 0a20 2020 2063 6865 636b 5f69 6e74 286e  .    check_int(n
-00016fd0: 616d 653d 6622 7b63 7265 6174 655f 626c  ame=f"{create_bl
-00016fe0: 616e 6b5f 7669 6465 6f2e 5f5f 6e61 6d65  ank_video.__name
-00016ff0: 5f5f 7d20 7769 6474 6822 2c20 7661 6c75  __} width", valu
-00017000: 653d 7769 6474 682c 206d 696e 5f76 616c  e=width, min_val
-00017010: 7565 3d31 290a 2020 2020 6368 6563 6b5f  ue=1).    check_
-00017020: 696e 7428 6e61 6d65 3d66 227b 6372 6561  int(name=f"{crea
-00017030: 7465 5f62 6c61 6e6b 5f76 6964 656f 2e5f  te_blank_video._
-00017040: 5f6e 616d 655f 5f7d 2068 6569 6768 7422  _name__} height"
-00017050: 2c20 7661 6c75 653d 6865 6967 6874 2c20  , value=height, 
-00017060: 6d69 6e5f 7661 6c75 653d 3129 0a20 2020  min_value=1).   
-00017070: 2063 6865 636b 5f69 665f 6469 725f 6578   check_if_dir_ex
-00017080: 6973 7473 280a 2020 2020 2020 2020 696e  ists(.        in
-00017090: 5f64 6972 3d6f 732e 7061 7468 2e64 6972  _dir=os.path.dir
-000170a0: 6e61 6d65 2870 6174 6829 2c0a 2020 2020  name(path),.    
-000170b0: 2020 2020 736f 7572 6365 3d63 7265 6174      source=creat
-000170c0: 655f 626c 616e 6b5f 7669 6465 6f2e 5f5f  e_blank_video.__
-000170d0: 6e61 6d65 5f5f 2c0a 2020 2020 2020 2020  name__,.        
-000170e0: 6372 6561 7465 5f69 665f 6e6f 745f 6578  create_if_not_ex
-000170f0: 6973 743d 5472 7565 2c0a 2020 2020 290a  ist=True,.    ).
-00017100: 2020 2020 7469 6d65 7220 3d20 5369 6d62      timer = Simb
-00017110: 6154 696d 6572 2873 7461 7274 3d54 7275  aTimer(start=Tru
-00017120: 6529 0a20 2020 2069 6620 7665 7262 6f73  e).    if verbos
-00017130: 653a 0a20 2020 2020 2020 2070 7269 6e74  e:.        print
-00017140: 2822 4372 6561 7469 6e67 2062 6c61 6e6b  ("Creating blank
-00017150: 2076 6964 656f 2e2e 2e22 290a 2020 2020   video...").    
-00017160: 6966 2067 7075 3a0a 2020 2020 2020 2020  if gpu:.        
-00017170: 636d 6420 3d20 6627 6666 6d70 6567 202d  cmd = f'ffmpeg -
-00017180: 7920 2d74 207b 6c65 6e67 7468 7d20 2d66  y -t {length} -f
-00017190: 206c 6176 6669 202d 6920 636f 6c6f 723d   lavfi -i color=
-000171a0: 633d 7b63 6f6c 6f72 7d3a 733d 7b77 6964  c={color}:s={wid
-000171b0: 7468 7d78 7b68 6569 6768 747d 202d 633a  th}x{height} -c:
-000171c0: 7620 6832 3634 5f6e 7665 6e63 202d 7072  v h264_nvenc -pr
-000171d0: 6573 6574 2073 6c6f 7720 2d74 756e 6520  eset slow -tune 
-000171e0: 7374 696c 6c69 6d61 6765 202d 7069 785f  stillimage -pix_
-000171f0: 666d 7420 7975 7634 3230 7020 227b 7061  fmt yuv420p "{pa
-00017200: 7468 7d22 202d 6869 6465 5f62 616e 6e65  th}" -hide_banne
-00017210: 7220 2d6c 6f67 6c65 7665 6c20 6572 726f  r -loglevel erro
-00017220: 7220 2d79 270a 2020 2020 656c 7365 3a0a  r -y'.    else:.
-00017230: 2020 2020 2020 2020 636d 6420 3d20 6627          cmd = f'
-00017240: 6666 6d70 6567 202d 7920 2d74 207b 6c65  ffmpeg -y -t {le
-00017250: 6e67 7468 7d20 2d66 206c 6176 6669 202d  ngth} -f lavfi -
-00017260: 6920 636f 6c6f 723d 633d 7b63 6f6c 6f72  i color=c={color
-00017270: 7d3a 733d 7b77 6964 7468 7d78 7b68 6569  }:s={width}x{hei
-00017280: 6768 747d 202d 633a 7620 6c69 6278 3236  ght} -c:v libx26
-00017290: 3420 2d74 756e 6520 7374 696c 6c69 6d61  4 -tune stillima
-000172a0: 6765 202d 7069 785f 666d 7420 7975 7634  ge -pix_fmt yuv4
-000172b0: 3230 7020 227b 7061 7468 7d22 202d 6869  20p "{path}" -hi
-000172c0: 6465 5f62 616e 6e65 7220 2d6c 6f67 6c65  de_banner -logle
-000172d0: 7665 6c20 6572 726f 7220 2d79 270a 2020  vel error -y'.  
-000172e0: 2020 7375 6270 726f 6365 7373 2e63 616c    subprocess.cal
-000172f0: 6c28 636d 642c 2073 6865 6c6c 3d54 7275  l(cmd, shell=Tru
-00017300: 652c 2073 7464 6f75 743d 7375 6270 726f  e, stdout=subpro
-00017310: 6365 7373 2e50 4950 4529 0a20 2020 2074  cess.PIPE).    t
-00017320: 696d 6572 2e73 746f 705f 7469 6d65 7228  imer.stop_timer(
-00017330: 290a 2020 2020 6966 2076 6572 626f 7365  ).    if verbose
-00017340: 3a0a 2020 2020 2020 2020 7072 696e 7428  :.        print(
-00017350: 0a20 2020 2020 2020 2020 2020 2066 2242  .            f"B
-00017360: 6c61 6e6b 2076 6964 656f 2063 6f6d 706c  lank video compl
-00017370: 6574 652e 2053 6176 6564 2061 7420 7b70  ete. Saved at {p
-00017380: 6174 687d 2e20 456c 6170 7365 6420 7469  ath}. Elapsed ti
-00017390: 6d65 3a20 7b74 696d 6572 2e65 6c61 7073  me: {timer.elaps
-000173a0: 6564 5f74 696d 655f 7374 727d 732e 220a  ed_time_str}s.".
-000173b0: 2020 2020 2020 2020 290a 0a0a 6465 6620          )...def 
-000173c0: 686f 7269 7a6f 6e74 616c 5f76 6964 656f  horizontal_video
-000173d0: 5f63 6f6e 6361 7465 6e61 746f 7228 0a20  _concatenator(. 
-000173e0: 2020 2076 6964 656f 5f70 6174 6873 3a20     video_paths: 
-000173f0: 4c69 7374 5b55 6e69 6f6e 5b73 7472 2c20  List[Union[str, 
-00017400: 6f73 2e50 6174 684c 696b 655d 5d2c 0a20  os.PathLike]],. 
-00017410: 2020 2073 6176 655f 7061 7468 3a20 556e     save_path: Un
-00017420: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
-00017430: 4c69 6b65 5d2c 0a20 2020 2068 6569 6768  Like],.    heigh
-00017440: 745f 7078 3a20 4f70 7469 6f6e 616c 5b55  t_px: Optional[U
-00017450: 6e69 6f6e 5b69 6e74 2c20 7374 725d 5d20  nion[int, str]] 
-00017460: 3d20 4e6f 6e65 2c0a 2020 2020 6865 6967  = None,.    heig
-00017470: 6874 5f69 6478 3a20 4f70 7469 6f6e 616c  ht_idx: Optional
-00017480: 5b55 6e69 6f6e 5b69 6e74 2c20 7374 725d  [Union[int, str]
-00017490: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 6770  ] = None,.    gp
-000174a0: 753a 204f 7074 696f 6e61 6c5b 626f 6f6c  u: Optional[bool
-000174b0: 5d20 3d20 4661 6c73 652c 0a20 2020 2076  ] = False,.    v
-000174c0: 6572 626f 7365 3a20 4f70 7469 6f6e 616c  erbose: Optional
-000174d0: 5b62 6f6f 6c5d 203d 2054 7275 652c 0a29  [bool] = True,.)
-000174e0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2222   -> None:.    ""
-000174f0: 220a 2020 2020 436f 6e63 6174 656e 6174  ".    Concatenat
-00017500: 6573 206d 756c 7469 706c 6520 7669 6465  es multiple vide
-00017510: 6f73 2068 6f72 697a 6f6e 7461 6c6c 792e  os horizontally.
-00017520: 0a0a 2020 2020 2e2e 2069 6d61 6765 3a3a  ..    .. image::
-00017530: 205f 7374 6174 6963 2f69 6d67 2f68 6f72   _static/img/hor
-00017540: 697a 6f6e 7461 6c5f 7669 6465 6f5f 636f  izontal_video_co
-00017550: 6e63 6174 656e 6174 6f72 2e67 6966 0a20  ncatenator.gif. 
-00017560: 2020 2020 2020 3a77 6964 7468 3a20 3630        :width: 60
-00017570: 300a 2020 2020 2020 203a 616c 6967 6e3a  0.       :align:
-00017580: 2063 656e 7465 720a 0a20 2020 203a 7061   center..    :pa
-00017590: 7261 6d20 4c69 7374 5b55 6e69 6f6e 5b73  ram List[Union[s
-000175a0: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
-000175b0: 5d20 7669 6465 6f5f 7061 7468 733a 204c  ] video_paths: L
-000175c0: 6973 7420 6f66 2069 6e70 7574 2076 6964  ist of input vid
-000175d0: 656f 2066 696c 6520 7061 7468 732e 0a20  eo file paths.. 
-000175e0: 2020 203a 7061 7261 6d20 556e 696f 6e5b     :param Union[
-000175f0: 7374 722c 206f 732e 5061 7468 4c69 6b65  str, os.PathLike
-00017600: 5d20 7361 7665 5f70 6174 683a 2046 696c  ] save_path: Fil
-00017610: 6520 7061 7468 2074 6f20 7361 7665 2074  e path to save t
-00017620: 6865 2063 6f6e 6361 7465 6e61 7465 6420  he concatenated 
-00017630: 7669 6465 6f2e 0a20 2020 203a 7061 7261  video..    :para
-00017640: 6d20 4f70 7469 6f6e 616c 5b69 6e74 5d20  m Optional[int] 
-00017650: 6865 6967 6874 5f70 783a 2048 6569 6768  height_px: Heigh
-00017660: 7420 6f66 2074 6865 206f 7574 7075 7420  t of the output 
-00017670: 7669 6465 6f20 696e 2070 6978 656c 732e  video in pixels.
-00017680: 0a20 2020 203a 7061 7261 6d20 4f70 7469  .    :param Opti
-00017690: 6f6e 616c 5b69 6e74 5d20 6865 6967 6874  onal[int] height
-000176a0: 5f69 6478 3a20 496e 6465 7820 6f66 2074  _idx: Index of t
-000176b0: 6865 2076 6964 656f 2074 6f20 7573 6520  he video to use 
-000176c0: 666f 7220 6465 7465 726d 696e 696e 6720  for determining 
-000176d0: 4865 6967 6874 2e0a 2020 2020 3a70 6172  Height..    :par
-000176e0: 616d 204f 7074 696f 6e61 6c5b 626f 6f6c  am Optional[bool
-000176f0: 5d20 6770 753a 2057 6865 7468 6572 2074  ] gpu: Whether t
-00017700: 6f20 7573 6520 4750 552d 6163 6365 6c65  o use GPU-accele
-00017710: 7261 7465 6420 636f 6465 6320 2864 6566  rated codec (def
-00017720: 6175 6c74 3a20 4661 6c73 6529 2e0a 2020  ault: False)..  
-00017730: 2020 3a70 6172 616d 204f 7074 696f 6e61    :param Optiona
-00017740: 6c5b 626f 6f6c 5d20 7665 7262 6f73 653a  l[bool] verbose:
-00017750: 5768 6574 6865 7220 746f 2070 7269 6e74  Whether to print
-00017760: 2070 726f 6772 6573 7320 6d65 7373 6167   progress messag
-00017770: 6573 2028 6465 6661 756c 743a 2054 7275  es (default: Tru
-00017780: 6529 2e0a 0a20 2020 203a 6578 616d 706c  e)...    :exampl
-00017790: 653a 0a20 2020 203e 3e3e 2076 6964 656f  e:.    >>> video
-000177a0: 5f70 6174 6873 203d 205b 2776 6964 656f  _paths = ['video
-000177b0: 312e 6d70 3427 2c20 2776 6964 656f 322e  1.mp4', 'video2.
-000177c0: 6d70 3427 5d0a 2020 2020 3e3e 3e20 7820  mp4'].    >>> x 
-000177d0: 3d20 686f 7269 7a6f 6e74 616c 5f76 6964  = horizontal_vid
-000177e0: 656f 5f63 6f6e 6361 7465 6e61 746f 7228  eo_concatenator(
-000177f0: 7669 6465 6f5f 7061 7468 733d 7669 6465  video_paths=vide
-00017800: 6f5f 7061 7468 732c 2068 6569 6768 745f  o_paths, height_
-00017810: 7078 3d35 302c 2073 6176 655f 7061 7468  px=50, save_path
-00017820: 3d27 2f55 7365 7273 2f73 696d 6f6e 2f44  ='/Users/simon/D
-00017830: 6573 6b74 6f70 2f65 6e76 732f 7369 6d62  esktop/envs/simb
-00017840: 612f 7472 6f75 626c 6573 686f 6f74 696e  a/troubleshootin
-00017850: 672f 5241 545f 4e4f 522f 7072 6f6a 6563  g/RAT_NOR/projec
-00017860: 745f 666f 6c64 6572 2f76 6964 656f 732f  t_folder/videos/
-00017870: 7465 7374 2f6e 6577 2f30 3831 3032 3032  test/new/0810202
-00017880: 315f 444f 545f 5261 7437 5f38 2832 295f  1_DOT_Rat7_8(2)_
-00017890: 2e6d 7034 272c 2067 7075 3d46 616c 7365  .mp4', gpu=False
-000178a0: 290a 2020 2020 2222 220a 2020 2020 6368  ).    """.    ch
-000178b0: 6563 6b5f 6666 6d70 6567 5f61 7661 696c  eck_ffmpeg_avail
-000178c0: 6162 6c65 2829 0a20 2020 2069 6620 6770  able().    if gp
-000178d0: 7520 616e 6420 6e6f 7420 6368 6563 6b5f  u and not check_
-000178e0: 6e76 6964 6561 5f67 7075 5f61 7661 696c  nvidea_gpu_avail
-000178f0: 6162 6c65 2829 3a0a 2020 2020 2020 2020  able():.        
-00017900: 7261 6973 6520 4646 4d50 4547 436f 6465  raise FFMPEGCode
-00017910: 6347 5055 4572 726f 7228 0a20 2020 2020  cGPUError(.     
-00017920: 2020 2020 2020 206d 7367 3d22 4e56 4944         msg="NVID
-00017930: 4541 2047 5055 206e 6f74 2061 7661 696c  EA GPU not avail
-00017940: 6162 6c65 2028 6173 2065 7661 6c75 6174  able (as evaluat
-00017950: 6564 2062 7920 6e76 6964 6561 2d73 6d69  ed by nvidea-smi
-00017960: 2072 6574 7572 6e69 6e67 204e 6f6e 6529   returning None)
-00017970: 222c 0a20 2020 2020 2020 2020 2020 2073  ",.            s
-00017980: 6f75 7263 653d 686f 7269 7a6f 6e74 616c  ource=horizontal
-00017990: 5f76 6964 656f 5f63 6f6e 6361 7465 6e61  _video_concatena
-000179a0: 746f 722e 5f5f 6e61 6d65 5f5f 2c0a 2020  tor.__name__,.  
-000179b0: 2020 2020 2020 290a 2020 2020 7469 6d65        ).    time
-000179c0: 7220 3d20 5369 6d62 6154 696d 6572 2873  r = SimbaTimer(s
-000179d0: 7461 7274 3d54 7275 6529 0a20 2020 2063  tart=True).    c
-000179e0: 6865 636b 5f76 616c 6964 5f6c 7374 280a  heck_valid_lst(.
-000179f0: 2020 2020 2020 2020 6461 7461 3d76 6964          data=vid
-00017a00: 656f 5f70 6174 6873 2c20 736f 7572 6365  eo_paths, source
-00017a10: 3d68 6f72 697a 6f6e 7461 6c5f 7669 6465  =horizontal_vide
-00017a20: 6f5f 636f 6e63 6174 656e 6174 6f72 2e5f  o_concatenator._
-00017a30: 5f6e 616d 655f 5f2c 206d 696e 5f6c 656e  _name__, min_len
-00017a40: 3d32 0a20 2020 2029 0a20 2020 2063 6865  =2.    ).    che
-00017a50: 636b 5f69 665f 6469 725f 6578 6973 7473  ck_if_dir_exists
-00017a60: 280a 2020 2020 2020 2020 696e 5f64 6972  (.        in_dir
-00017a70: 3d6f 732e 7061 7468 2e64 6972 6e61 6d65  =os.path.dirname
-00017a80: 2873 6176 655f 7061 7468 292c 2073 6f75  (save_path), sou
-00017a90: 7263 653d 686f 7269 7a6f 6e74 616c 5f76  rce=horizontal_v
-00017aa0: 6964 656f 5f63 6f6e 6361 7465 6e61 746f  ideo_concatenato
-00017ab0: 722e 5f5f 6e61 6d65 5f5f 0a20 2020 2029  r.__name__.    )
-00017ac0: 0a20 2020 2076 6964 656f 5f6d 6574 615f  .    video_meta_
-00017ad0: 6461 7461 203d 205b 0a20 2020 2020 2020  data = [.       
-00017ae0: 2067 6574 5f76 6964 656f 5f6d 6574 615f   get_video_meta_
-00017af0: 6461 7461 2876 6964 656f 5f70 6174 683d  data(video_path=
-00017b00: 7669 6465 6f5f 7061 7468 2920 666f 7220  video_path) for 
-00017b10: 7669 6465 6f5f 7061 7468 2069 6e20 7669  video_path in vi
-00017b20: 6465 6f5f 7061 7468 730a 2020 2020 5d0a  deo_paths.    ].
-00017b30: 2020 2020 6966 2028 2868 6569 6768 745f      if ((height_
-00017b40: 7078 2069 7320 4e6f 6e65 2920 616e 6420  px is None) and 
-00017b50: 2868 6569 6768 745f 6964 7820 6973 204e  (height_idx is N
-00017b60: 6f6e 6529 2920 6f72 2028 0a20 2020 2020  one)) or (.     
-00017b70: 2020 2028 6865 6967 6874 5f70 7820 6973     (height_px is
-00017b80: 206e 6f74 204e 6f6e 6529 2061 6e64 2028   not None) and (
-00017b90: 6865 6967 6874 5f69 6478 2069 7320 6e6f  height_idx is no
-00017ba0: 7420 4e6f 6e65 290a 2020 2020 293a 0a20  t None).    ):. 
-00017bb0: 2020 2020 2020 2072 6169 7365 2049 6e76         raise Inv
-00017bc0: 616c 6964 496e 7075 7445 7272 6f72 280a  alidInputError(.
-00017bd0: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
-00017be0: 2250 726f 7669 6465 2061 2068 6569 6768  "Provide a heigh
-00017bf0: 745f 7078 204f 5220 6865 6967 6874 5f69  t_px OR height_i
-00017c00: 6478 222c 0a20 2020 2020 2020 2020 2020  dx",.           
-00017c10: 2073 6f75 7263 653d 686f 7269 7a6f 6e74   source=horizont
-00017c20: 616c 5f76 6964 656f 5f63 6f6e 6361 7465  al_video_concate
-00017c30: 6e61 746f 722e 5f5f 6e61 6d65 5f5f 2c0a  nator.__name__,.
-00017c40: 2020 2020 2020 2020 290a 2020 2020 6966          ).    if
-00017c50: 2068 6569 6768 745f 6964 7820 6973 206e   height_idx is n
-00017c60: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00017c70: 2063 6865 636b 5f69 6e74 280a 2020 2020   check_int(.    
-00017c80: 2020 2020 2020 2020 6e61 6d65 3d66 227b          name=f"{
-00017c90: 686f 7269 7a6f 6e74 616c 5f76 6964 656f  horizontal_video
-00017ca0: 5f63 6f6e 6361 7465 6e61 746f 722e 5f5f  _concatenator.__
-00017cb0: 6e61 6d65 5f5f 7d20 6865 6967 6874 222c  name__} height",
-00017cc0: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
-00017cd0: 7565 3d68 6569 6768 745f 6964 782c 0a20  ue=height_idx,. 
-00017ce0: 2020 2020 2020 2020 2020 206d 696e 5f76             min_v
-00017cf0: 616c 7565 3d30 2c0a 2020 2020 2020 2020  alue=0,.        
-00017d00: 2020 2020 6d61 785f 7661 6c75 653d 6c65      max_value=le
-00017d10: 6e28 7669 6465 6f5f 7061 7468 7329 202d  n(video_paths) -
-00017d20: 2031 2c0a 2020 2020 2020 2020 290a 2020   1,.        ).  
-00017d30: 2020 2020 2020 6865 6967 6874 203d 2069        height = i
-00017d40: 6e74 2876 6964 656f 5f6d 6574 615f 6461  nt(video_meta_da
-00017d50: 7461 5b68 6569 6768 745f 6964 785d 5b22  ta[height_idx]["
-00017d60: 6865 6967 6874 225d 290a 2020 2020 656c  height"]).    el
-00017d70: 7365 3a0a 2020 2020 2020 2020 6368 6563  se:.        chec
-00017d80: 6b5f 696e 7428 0a20 2020 2020 2020 2020  k_int(.         
-00017d90: 2020 206e 616d 653d 6622 7b68 6f72 697a     name=f"{horiz
-00017da0: 6f6e 7461 6c5f 7669 6465 6f5f 636f 6e63  ontal_video_conc
-00017db0: 6174 656e 6174 6f72 2e5f 5f6e 616d 655f  atenator.__name_
-00017dc0: 5f7d 2068 6569 6768 7422 2c0a 2020 2020  _} height",.    
-00017dd0: 2020 2020 2020 2020 7661 6c75 653d 6865          value=he
-00017de0: 6967 6874 5f70 782c 0a20 2020 2020 2020  ight_px,.       
-00017df0: 2020 2020 206d 696e 5f76 616c 7565 3d31       min_value=1
-00017e00: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-00017e10: 2020 2020 6865 6967 6874 203d 2069 6e74      height = int
-00017e20: 2868 6569 6768 745f 7078 290a 2020 2020  (height_px).    
-00017e30: 7669 6465 6f5f 7061 7468 5f73 7472 203d  video_path_str =
-00017e40: 2022 2022 2e6a 6f69 6e28 5b66 272d 6920   " ".join([f'-i 
-00017e50: 227b 7061 7468 7d22 2720 666f 7220 7061  "{path}"' for pa
-00017e60: 7468 2069 6e20 7669 6465 6f5f 7061 7468  th in video_path
-00017e70: 735d 290a 2020 2020 636f 6465 6320 3d20  s]).    codec = 
-00017e80: 2268 3236 345f 6e76 656e 6322 2069 6620  "h264_nvenc" if 
-00017e90: 6770 7520 656c 7365 2022 6c69 6276 7078  gpu else "libvpx
-00017ea0: 2d76 7039 220a 2020 2020 6669 6c74 6572  -vp9".    filter
-00017eb0: 5f63 6f6d 706c 6578 203d 2022 3b22 2e6a  _complex = ";".j
-00017ec0: 6f69 6e28 0a20 2020 2020 2020 205b 6622  oin(.        [f"
-00017ed0: 5b7b 6964 787d 3a76 5d73 6361 6c65 3d2d  [{idx}:v]scale=-
-00017ee0: 313a 7b68 6569 6768 747d 5b76 7b69 6478  1:{height}[v{idx
-00017ef0: 7d5d 2220 666f 7220 6964 7820 696e 2072  }]" for idx in r
-00017f00: 616e 6765 286c 656e 2876 6964 656f 5f70  ange(len(video_p
-00017f10: 6174 6873 2929 5d0a 2020 2020 290a 2020  aths))].    ).  
-00017f20: 2020 6669 6c74 6572 5f63 6f6d 706c 6578    filter_complex
-00017f30: 202b 3d20 6622 3b7b 2727 2e6a 6f69 6e28   += f";{''.join(
-00017f40: 5b66 275b 767b 6964 787d 5d27 2066 6f72  [f'[v{idx}]' for
-00017f50: 2069 6478 2069 6e20 7261 6e67 6528 6c65   idx in range(le
-00017f60: 6e28 7669 6465 6f5f 7061 7468 7329 295d  n(video_paths))]
-00017f70: 297d 6873 7461 636b 3d69 6e70 7574 733d  )}hstack=inputs=
-00017f80: 7b6c 656e 2876 6964 656f 5f70 6174 6873  {len(video_paths
-00017f90: 297d 5b76 5d22 0a20 2020 2069 6620 7665  )}[v]".    if ve
-00017fa0: 7262 6f73 653a 0a20 2020 2020 2020 2070  rbose:.        p
-00017fb0: 7269 6e74 280a 2020 2020 2020 2020 2020  rint(.          
-00017fc0: 2020 6622 436f 6e63 6174 656e 6174 696e    f"Concatenatin
-00017fd0: 6720 7b6c 656e 2876 6964 656f 5f70 6174  g {len(video_pat
-00017fe0: 6873 297d 2076 6964 656f 7320 686f 7269  hs)} videos hori
-00017ff0: 7a6f 6e74 616c 6c79 2077 6974 6820 6120  zontally with a 
-00018000: 7b68 6569 6768 747d 2070 6978 656c 2068  {height} pixel h
-00018010: 6569 6768 742e 2e2e 2022 0a20 2020 2020  eight... ".     
-00018020: 2020 2029 0a20 2020 2063 6d64 203d 2066     ).    cmd = f
-00018030: 2766 666d 7065 6720 7b76 6964 656f 5f70  'ffmpeg {video_p
-00018040: 6174 685f 7374 727d 202d 6669 6c74 6572  ath_str} -filter
-00018050: 5f63 6f6d 706c 6578 2022 7b66 696c 7465  _complex "{filte
-00018060: 725f 636f 6d70 6c65 787d 2220 2d6d 6170  r_complex}" -map
-00018070: 2022 5b76 5d22 202d 633a 7620 7b63 6f64   "[v]" -c:v {cod
-00018080: 6563 7d20 2d6c 6f67 6c65 7665 6c20 6572  ec} -loglevel er
-00018090: 726f 7220 2d73 7461 7473 2022 7b73 6176  ror -stats "{sav
-000180a0: 655f 7061 7468 7d22 202d 7927 0a20 2020  e_path}" -y'.   
-000180b0: 2073 7562 7072 6f63 6573 732e 6361 6c6c   subprocess.call
-000180c0: 2863 6d64 2c20 7368 656c 6c3d 5472 7565  (cmd, shell=True
-000180d0: 2c20 7374 646f 7574 3d73 7562 7072 6f63  , stdout=subproc
-000180e0: 6573 732e 5049 5045 290a 2020 2020 7469  ess.PIPE).    ti
-000180f0: 6d65 722e 7374 6f70 5f74 696d 6572 2829  mer.stop_timer()
-00018100: 0a20 2020 2069 6620 7665 7262 6f73 653a  .    if verbose:
-00018110: 0a20 2020 2020 2020 2070 7269 6e74 280a  .        print(.
-00018120: 2020 2020 2020 2020 2020 2020 6622 486f              f"Ho
-00018130: 7269 7a6f 6e74 616c 2063 6f6e 6361 7465  rizontal concate
-00018140: 6e61 7469 6f6e 2063 6f6d 706c 6574 652c  nation complete,
-00018150: 2073 6176 6564 2061 7420 7b73 6176 655f   saved at {save_
-00018160: 7061 7468 7d20 2865 6c61 7073 6564 2074  path} (elapsed t
-00018170: 696d 653a 207b 7469 6d65 722e 656c 6170  ime: {timer.elap
-00018180: 7365 645f 7469 6d65 5f73 7472 7d73 2e29  sed_time_str}s.)
-00018190: 220a 2020 2020 2020 2020 290a 0a0a 6465  ".        )...de
-000181a0: 6620 7665 7274 6963 616c 5f76 6964 656f  f vertical_video
-000181b0: 5f63 6f6e 6361 7465 6e61 746f 7228 0a20  _concatenator(. 
-000181c0: 2020 2076 6964 656f 5f70 6174 6873 3a20     video_paths: 
-000181d0: 4c69 7374 5b55 6e69 6f6e 5b73 7472 2c20  List[Union[str, 
-000181e0: 6f73 2e50 6174 684c 696b 655d 5d2c 0a20  os.PathLike]],. 
-000181f0: 2020 2073 6176 655f 7061 7468 3a20 556e     save_path: Un
-00018200: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
-00018210: 4c69 6b65 5d2c 0a20 2020 2077 6964 7468  Like],.    width
-00018220: 5f70 783a 204f 7074 696f 6e61 6c5b 696e  _px: Optional[in
-00018230: 745d 203d 204e 6f6e 652c 0a20 2020 2077  t] = None,.    w
-00018240: 6964 7468 5f69 6478 3a20 4f70 7469 6f6e  idth_idx: Option
-00018250: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c0a  al[int] = None,.
-00018260: 2020 2020 6770 753a 204f 7074 696f 6e61      gpu: Optiona
-00018270: 6c5b 626f 6f6c 5d20 3d20 4661 6c73 652c  l[bool] = False,
-00018280: 0a20 2020 2076 6572 626f 7365 3a20 4f70  .    verbose: Op
-00018290: 7469 6f6e 616c 5b62 6f6f 6c5d 203d 2054  tional[bool] = T
-000182a0: 7275 652c 0a29 202d 3e20 4e6f 6e65 3a0a  rue,.) -> None:.
-000182b0: 2020 2020 2222 220a 2020 2020 436f 6e63      """.    Conc
-000182c0: 6174 656e 6174 6573 206d 756c 7469 706c  atenates multipl
-000182d0: 6520 7669 6465 6f73 2076 6572 7469 6361  e videos vertica
-000182e0: 6c6c 792e 0a0a 2020 2020 2e2e 2069 6d61  lly...    .. ima
-000182f0: 6765 3a3a 205f 7374 6174 6963 2f69 6d67  ge:: _static/img
-00018300: 2f76 6572 7469 6361 6c5f 7669 6465 6f5f  /vertical_video_
-00018310: 636f 6e63 6174 656e 6174 6f72 2e70 6e67  concatenator.png
-00018320: 0a20 2020 2020 2020 3a77 6964 7468 3a20  .       :width: 
-00018330: 3330 300a 2020 2020 2020 203a 616c 6967  300.       :alig
-00018340: 6e3a 2063 656e 7465 720a 0a20 2020 203a  n: center..    :
-00018350: 7061 7261 6d20 4c69 7374 5b55 6e69 6f6e  param List[Union
-00018360: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
-00018370: 655d 5d20 7669 6465 6f5f 7061 7468 733a  e]] video_paths:
-00018380: 204c 6973 7420 6f66 2069 6e70 7574 2076   List of input v
-00018390: 6964 656f 2066 696c 6520 7061 7468 732e  ideo file paths.
-000183a0: 0a20 2020 203a 7061 7261 6d20 556e 696f  .    :param Unio
-000183b0: 6e5b 7374 722c 206f 732e 5061 7468 4c69  n[str, os.PathLi
-000183c0: 6b65 5d20 7361 7665 5f70 6174 683a 2046  ke] save_path: F
-000183d0: 696c 6520 7061 7468 2074 6f20 7361 7665  ile path to save
-000183e0: 2074 6865 2063 6f6e 6361 7465 6e61 7465   the concatenate
-000183f0: 6420 7669 6465 6f2e 0a20 2020 203a 7061  d video..    :pa
-00018400: 7261 6d20 4f70 7469 6f6e 616c 5b69 6e74  ram Optional[int
-00018410: 5d20 7769 6474 685f 7078 3a20 5769 6474  ] width_px: Widt
-00018420: 6820 6f66 2074 6865 206f 7574 7075 7420  h of the output 
-00018430: 7669 6465 6f20 696e 2070 6978 656c 732e  video in pixels.
-00018440: 0a20 2020 203a 7061 7261 6d20 4f70 7469  .    :param Opti
-00018450: 6f6e 616c 5b69 6e74 5d20 7769 6474 685f  onal[int] width_
-00018460: 6964 783a 2049 6e64 6578 206f 6620 7468  idx: Index of th
-00018470: 6520 7669 6465 6f20 746f 2075 7365 2066  e video to use f
-00018480: 6f72 2064 6574 6572 6d69 6e69 6e67 2077  or determining w
-00018490: 6964 7468 2e0a 2020 2020 3a70 6172 616d  idth..    :param
-000184a0: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
-000184b0: 6770 753a 2057 6865 7468 6572 2074 6f20  gpu: Whether to 
-000184c0: 7573 6520 4750 552d 6163 6365 6c65 7261  use GPU-accelera
-000184d0: 7465 6420 636f 6465 6320 2864 6566 6175  ted codec (defau
-000184e0: 6c74 3a20 4661 6c73 6529 2e0a 2020 2020  lt: False)..    
-000184f0: 3a70 6172 616d 204f 7074 696f 6e61 6c5b  :param Optional[
-00018500: 626f 6f6c 5d20 7665 7262 6f73 653a 5768  bool] verbose:Wh
-00018510: 6574 6865 7220 746f 2070 7269 6e74 2070  ether to print p
-00018520: 726f 6772 6573 7320 6d65 7373 6167 6573  rogress messages
-00018530: 2028 6465 6661 756c 743a 2054 7275 6529   (default: True)
-00018540: 2e0a 2020 2020 3a72 6169 7365 7320 4646  ..    :raises FF
-00018550: 4d50 4547 436f 6465 6347 5055 4572 726f  MPEGCodecGPUErro
-00018560: 723a 2049 6620 4750 5520 6973 2072 6571  r: If GPU is req
-00018570: 7565 7374 6564 2062 7574 206e 6f74 2061  uested but not a
-00018580: 7661 696c 6162 6c65 2e0a 2020 2020 3a72  vailable..    :r
-00018590: 6169 7365 7320 496e 7661 6c69 6449 6e70  aises InvalidInp
-000185a0: 7574 4572 726f 723a 2049 6620 626f 7468  utError: If both
-000185b0: 206f 7220 6e65 6974 6865 7220 7769 6474   or neither widt
-000185c0: 685f 7078 2061 6e64 2077 6964 7468 5f69  h_px and width_i
-000185d0: 6478 2061 7265 2070 726f 7669 6465 642e  dx are provided.
-000185e0: 0a0a 2020 2020 3a65 7861 6d70 6c65 3a0a  ..    :example:.
-000185f0: 2020 2020 3e3e 3e20 7669 6465 6f5f 7061      >>> video_pa
-00018600: 7468 7320 3d20 5b27 2f55 7365 7273 2f73  ths = ['/Users/s
-00018610: 696d 6f6e 2f44 6573 6b74 6f70 2f65 6e76  imon/Desktop/env
-00018620: 732f 7369 6d62 612f 7472 6f75 626c 6573  s/simba/troubles
-00018630: 686f 6f74 696e 672f 5241 545f 4e4f 522f  hooting/RAT_NOR/
-00018640: 7072 6f6a 6563 745f 666f 6c64 6572 2f76  project_folder/v
-00018650: 6964 656f 732f 7465 7374 2f30 3831 3032  ideos/test/08102
-00018660: 3032 315f 444f 545f 5261 7437 5f38 2832  021_DOT_Rat7_8(2
-00018670: 292e 6d70 3427 2c0a 2020 2020 3e3e 3e20  ).mp4',.    >>> 
-00018680: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00018690: 2f55 7365 7273 2f73 696d 6f6e 2f44 6573  /Users/simon/Des
-000186a0: 6b74 6f70 2f65 6e76 732f 7369 6d62 612f  ktop/envs/simba/
-000186b0: 7472 6f75 626c 6573 686f 6f74 696e 672f  troubleshooting/
-000186c0: 5241 545f 4e4f 522f 7072 6f6a 6563 745f  RAT_NOR/project_
-000186d0: 666f 6c64 6572 2f76 6964 656f 732f 7465  folder/videos/te
-000186e0: 7374 2f30 3831 3032 3032 315f 444f 545f  st/08102021_DOT_
-000186f0: 5261 7431 315f 3132 2e6d 7034 272c 0a20  Rat11_12.mp4',. 
-00018700: 2020 203e 3e3e 2020 2020 2020 2020 2020     >>>          
-00018710: 2020 2020 2020 272f 5573 6572 732f 7369        '/Users/si
-00018720: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
-00018730: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
-00018740: 6f6f 7469 6e67 2f52 4154 5f4e 4f52 2f70  ooting/RAT_NOR/p
-00018750: 726f 6a65 6374 5f66 6f6c 6465 722f 7669  roject_folder/vi
-00018760: 6465 6f73 2f74 6573 742f 3038 3130 3230  deos/test/081020
-00018770: 3231 5f44 4f54 5f52 6174 3131 5f31 325f  21_DOT_Rat11_12_
-00018780: 312e 6d70 3427 5d0a 2020 2020 3e3e 3e20  1.mp4'].    >>> 
-00018790: 5f20 3d20 7665 7274 6963 616c 5f76 6964  _ = vertical_vid
-000187a0: 656f 5f63 6f6e 6361 7465 6e61 746f 7228  eo_concatenator(
-000187b0: 7669 6465 6f5f 7061 7468 733d 7669 6465  video_paths=vide
-000187c0: 6f5f 7061 7468 732c 2077 6964 7468 5f69  o_paths, width_i
-000187d0: 6478 3d31 2c20 7361 7665 5f70 6174 683d  dx=1, save_path=
-000187e0: 272f 5573 6572 732f 7369 6d6f 6e2f 4465  '/Users/simon/De
-000187f0: 736b 746f 702f 656e 7673 2f73 696d 6261  sktop/envs/simba
-00018800: 2f74 726f 7562 6c65 7368 6f6f 7469 6e67  /troubleshooting
-00018810: 2f52 4154 5f4e 4f52 2f70 726f 6a65 6374  /RAT_NOR/project
-00018820: 5f66 6f6c 6465 722f 7669 6465 6f73 2f74  _folder/videos/t
-00018830: 6573 742f 6e65 772f 3038 3130 3230 3231  est/new/08102021
-00018840: 5f44 4f54 5f52 6174 375f 3828 3229 5f2e  _DOT_Rat7_8(2)_.
-00018850: 6d70 3427 2c20 6770 753d 4661 6c73 6529  mp4', gpu=False)
-00018860: 0a20 2020 2022 2222 0a0a 2020 2020 6368  .    """..    ch
-00018870: 6563 6b5f 6666 6d70 6567 5f61 7661 696c  eck_ffmpeg_avail
-00018880: 6162 6c65 2829 0a20 2020 2069 6620 6770  able().    if gp
-00018890: 7520 616e 6420 6e6f 7420 6368 6563 6b5f  u and not check_
-000188a0: 6e76 6964 6561 5f67 7075 5f61 7661 696c  nvidea_gpu_avail
-000188b0: 6162 6c65 2829 3a0a 2020 2020 2020 2020  able():.        
-000188c0: 7261 6973 6520 4646 4d50 4547 436f 6465  raise FFMPEGCode
-000188d0: 6347 5055 4572 726f 7228 0a20 2020 2020  cGPUError(.     
-000188e0: 2020 2020 2020 206d 7367 3d22 4e56 4944         msg="NVID
-000188f0: 4941 2047 5055 206e 6f74 2061 7661 696c  IA GPU not avail
-00018900: 6162 6c65 222c 2073 6f75 7263 653d 7665  able", source=ve
-00018910: 7274 6963 616c 5f76 6964 656f 5f63 6f6e  rtical_video_con
-00018920: 6361 7465 6e61 746f 722e 5f5f 6e61 6d65  catenator.__name
-00018930: 5f5f 0a20 2020 2020 2020 2029 0a20 2020  __.        ).   
-00018940: 2076 6964 656f 5f6d 6574 615f 6461 7461   video_meta_data
-00018950: 203d 205b 0a20 2020 2020 2020 2067 6574   = [.        get
-00018960: 5f76 6964 656f 5f6d 6574 615f 6461 7461  _video_meta_data
-00018970: 2876 6964 656f 5f70 6174 683d 7669 6465  (video_path=vide
-00018980: 6f5f 7061 7468 2920 666f 7220 7669 6465  o_path) for vide
-00018990: 6f5f 7061 7468 2069 6e20 7669 6465 6f5f  o_path in video_
-000189a0: 7061 7468 730a 2020 2020 5d0a 2020 2020  paths.    ].    
-000189b0: 7469 6d65 7220 3d20 5369 6d62 6154 696d  timer = SimbaTim
-000189c0: 6572 2873 7461 7274 3d54 7275 6529 0a20  er(start=True). 
-000189d0: 2020 2063 6865 636b 5f76 616c 6964 5f6c     check_valid_l
-000189e0: 7374 280a 2020 2020 2020 2020 6461 7461  st(.        data
-000189f0: 3d76 6964 656f 5f70 6174 6873 2c20 736f  =video_paths, so
-00018a00: 7572 6365 3d76 6572 7469 6361 6c5f 7669  urce=vertical_vi
-00018a10: 6465 6f5f 636f 6e63 6174 656e 6174 6f72  deo_concatenator
-00018a20: 2e5f 5f6e 616d 655f 5f2c 206d 696e 5f6c  .__name__, min_l
-00018a30: 656e 3d32 0a20 2020 2029 0a20 2020 2063  en=2.    ).    c
-00018a40: 6865 636b 5f69 665f 6469 725f 6578 6973  heck_if_dir_exis
-00018a50: 7473 280a 2020 2020 2020 2020 696e 5f64  ts(.        in_d
-00018a60: 6972 3d6f 732e 7061 7468 2e64 6972 6e61  ir=os.path.dirna
-00018a70: 6d65 2873 6176 655f 7061 7468 292c 2073  me(save_path), s
-00018a80: 6f75 7263 653d 7665 7274 6963 616c 5f76  ource=vertical_v
-00018a90: 6964 656f 5f63 6f6e 6361 7465 6e61 746f  ideo_concatenato
-00018aa0: 722e 5f5f 6e61 6d65 5f5f 0a20 2020 2029  r.__name__.    )
-00018ab0: 0a20 2020 2069 6620 2828 7769 6474 685f  .    if ((width_
-00018ac0: 7078 2069 7320 4e6f 6e65 2920 616e 6420  px is None) and 
-00018ad0: 2877 6964 7468 5f69 6478 2069 7320 4e6f  (width_idx is No
-00018ae0: 6e65 2929 206f 7220 280a 2020 2020 2020  ne)) or (.      
-00018af0: 2020 2877 6964 7468 5f70 7820 6973 206e    (width_px is n
-00018b00: 6f74 204e 6f6e 6529 2061 6e64 2028 7769  ot None) and (wi
-00018b10: 6474 685f 6964 7820 6973 206e 6f74 204e  dth_idx is not N
-00018b20: 6f6e 6529 0a20 2020 2029 3a0a 2020 2020  one).    ):.    
-00018b30: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
-00018b40: 6449 6e70 7574 4572 726f 7228 0a20 2020  dInputError(.   
-00018b50: 2020 2020 2020 2020 206d 7367 3d22 5072           msg="Pr
-00018b60: 6f76 6964 6520 6120 7769 6474 685f 7078  ovide a width_px
-00018b70: 204f 5220 7769 6474 685f 6964 7822 2c0a   OR width_idx",.
-00018b80: 2020 2020 2020 2020 2020 2020 736f 7572              sour
-00018b90: 6365 3d76 6572 7469 6361 6c5f 7669 6465  ce=vertical_vide
-00018ba0: 6f5f 636f 6e63 6174 656e 6174 6f72 2e5f  o_concatenator._
-00018bb0: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
-00018bc0: 2029 0a20 2020 2069 6620 7769 6474 685f   ).    if width_
-00018bd0: 6964 7820 6973 206e 6f74 204e 6f6e 653a  idx is not None:
-00018be0: 0a20 2020 2020 2020 2063 6865 636b 5f69  .        check_i
-00018bf0: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
-00018c00: 6e61 6d65 3d66 227b 7665 7274 6963 616c  name=f"{vertical
-00018c10: 5f76 6964 656f 5f63 6f6e 6361 7465 6e61  _video_concatena
-00018c20: 746f 722e 5f5f 6e61 6d65 5f5f 7d20 7769  tor.__name__} wi
-00018c30: 6474 6820 696e 6465 7822 2c0a 2020 2020  dth index",.    
-00018c40: 2020 2020 2020 2020 7661 6c75 653d 7769          value=wi
-00018c50: 6474 685f 6964 782c 0a20 2020 2020 2020  dth_idx,.       
-00018c60: 2020 2020 206d 696e 5f76 616c 7565 3d30       min_value=0
-00018c70: 2c0a 2020 2020 2020 2020 2020 2020 6d61  ,.            ma
-00018c80: 785f 7661 6c75 653d 6c65 6e28 7669 6465  x_value=len(vide
-00018c90: 6f5f 7061 7468 7329 202d 2031 2c0a 2020  o_paths) - 1,.  
-00018ca0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00018cb0: 7769 6474 6820 3d20 696e 7428 7669 6465  width = int(vide
-00018cc0: 6f5f 6d65 7461 5f64 6174 615b 7769 6474  o_meta_data[widt
-00018cd0: 685f 6964 785d 5b22 7769 6474 6822 5d29  h_idx]["width"])
-00018ce0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00018cf0: 2020 2063 6865 636b 5f69 6e74 280a 2020     check_int(.  
-00018d00: 2020 2020 2020 2020 2020 6e61 6d65 3d66            name=f
-00018d10: 227b 7665 7274 6963 616c 5f76 6964 656f  "{vertical_video
-00018d20: 5f63 6f6e 6361 7465 6e61 746f 722e 5f5f  _concatenator.__
-00018d30: 6e61 6d65 5f5f 7d20 7769 6474 6822 2c0a  name__} width",.
-00018d40: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-00018d50: 653d 7769 6474 685f 7078 2c0a 2020 2020  e=width_px,.    
-00018d60: 2020 2020 2020 2020 6d69 6e5f 7661 6c75          min_valu
-00018d70: 653d 312c 0a20 2020 2020 2020 2029 0a20  e=1,.        ). 
-00018d80: 2020 2020 2020 2077 6964 7468 203d 2069         width = i
-00018d90: 6e74 2877 6964 7468 5f70 7829 0a20 2020  nt(width_px).   
-00018da0: 2076 6964 656f 5f70 6174 685f 7374 7220   video_path_str 
-00018db0: 3d20 2220 222e 6a6f 696e 285b 6627 2d69  = " ".join([f'-i
-00018dc0: 2022 7b70 6174 687d 2227 2066 6f72 2070   "{path}"' for p
-00018dd0: 6174 6820 696e 2076 6964 656f 5f70 6174  ath in video_pat
-00018de0: 6873 5d29 0a20 2020 2063 6f64 6563 203d  hs]).    codec =
-00018df0: 2022 6832 3634 5f6e 7665 6e63 2220 6966   "h264_nvenc" if
-00018e00: 2067 7075 2065 6c73 6520 226c 6962 7670   gpu else "libvp
-00018e10: 782d 7670 3922 0a20 2020 2066 696c 7465  x-vp9".    filte
-00018e20: 725f 636f 6d70 6c65 7820 3d20 223b 222e  r_complex = ";".
-00018e30: 6a6f 696e 280a 2020 2020 2020 2020 5b66  join(.        [f
-00018e40: 225b 7b69 6478 7d3a 765d 7363 616c 653d  "[{idx}:v]scale=
-00018e50: 7b77 6964 7468 7d3a 2d31 5b76 7b69 6478  {width}:-1[v{idx
-00018e60: 7d5d 2220 666f 7220 6964 7820 696e 2072  }]" for idx in r
-00018e70: 616e 6765 286c 656e 2876 6964 656f 5f70  ange(len(video_p
-00018e80: 6174 6873 2929 5d0a 2020 2020 290a 2020  aths))].    ).  
-00018e90: 2020 6669 6c74 6572 5f63 6f6d 706c 6578    filter_complex
-00018ea0: 202b 3d20 6622 3b7b 2727 2e6a 6f69 6e28   += f";{''.join(
-00018eb0: 5b66 275b 767b 6964 787d 5d27 2066 6f72  [f'[v{idx}]' for
-00018ec0: 2069 6478 2069 6e20 7261 6e67 6528 6c65   idx in range(le
-00018ed0: 6e28 7669 6465 6f5f 7061 7468 7329 295d  n(video_paths))]
-00018ee0: 297d 220a 2020 2020 6669 6c74 6572 5f63  )}".    filter_c
-00018ef0: 6f6d 706c 6578 202b 3d20 6622 7673 7461  omplex += f"vsta
-00018f00: 636b 3d69 6e70 7574 733d 7b6c 656e 2876  ck=inputs={len(v
-00018f10: 6964 656f 5f70 6174 6873 297d 5b76 5d22  ideo_paths)}[v]"
-00018f20: 0a20 2020 2069 6620 7665 7262 6f73 653a  .    if verbose:
-00018f30: 0a20 2020 2020 2020 2070 7269 6e74 280a  .        print(.
-00018f40: 2020 2020 2020 2020 2020 2020 6622 436f              f"Co
-00018f50: 6e63 6174 656e 6174 696e 6720 7b6c 656e  ncatenating {len
-00018f60: 2876 6964 656f 5f70 6174 6873 297d 2076  (video_paths)} v
-00018f70: 6964 656f 7320 7665 7274 6963 616c 6c79  ideos vertically
-00018f80: 2077 6974 6820 6120 7b77 6964 7468 7d20   with a {width} 
-00018f90: 7069 7865 6c20 7769 6474 682e 2e2e 220a  pixel width...".
-00018fa0: 2020 2020 2020 2020 290a 2020 2020 636d          ).    cm
-00018fb0: 6420 3d20 6627 6666 6d70 6567 207b 7669  d = f'ffmpeg {vi
-00018fc0: 6465 6f5f 7061 7468 5f73 7472 7d20 2d66  deo_path_str} -f
-00018fd0: 696c 7465 725f 636f 6d70 6c65 7820 227b  ilter_complex "{
-00018fe0: 6669 6c74 6572 5f63 6f6d 706c 6578 7d22  filter_complex}"
-00018ff0: 202d 6d61 7020 225b 765d 2220 2d63 3a76   -map "[v]" -c:v
-00019000: 207b 636f 6465 637d 202d 6c6f 676c 6576   {codec} -loglev
-00019010: 656c 2065 7272 6f72 202d 7374 6174 7320  el error -stats 
-00019020: 227b 7361 7665 5f70 6174 687d 2220 2d79  "{save_path}" -y
-00019030: 270a 2020 2020 7375 6270 726f 6365 7373  '.    subprocess
-00019040: 2e63 616c 6c28 636d 642c 2073 6865 6c6c  .call(cmd, shell
-00019050: 3d54 7275 652c 2073 7464 6f75 743d 7375  =True, stdout=su
-00019060: 6270 726f 6365 7373 2e50 4950 4529 0a20  bprocess.PIPE). 
-00019070: 2020 2074 696d 6572 2e73 746f 705f 7469     timer.stop_ti
-00019080: 6d65 7228 290a 2020 2020 6966 2076 6572  mer().    if ver
-00019090: 626f 7365 3a0a 2020 2020 2020 2020 7072  bose:.        pr
-000190a0: 696e 7428 0a20 2020 2020 2020 2020 2020  int(.           
-000190b0: 2066 2256 6572 7469 6361 6c20 636f 6e63   f"Vertical conc
-000190c0: 6174 656e 6174 696f 6e20 636f 6d70 6c65  atenation comple
-000190d0: 7465 2e20 5361 7665 6420 6174 207b 7361  te. Saved at {sa
-000190e0: 7665 5f70 6174 687d 2028 456c 6170 7365  ve_path} (Elapse
-000190f0: 6420 7469 6d65 3a20 7b74 696d 6572 2e65  d time: {timer.e
-00019100: 6c61 7073 6564 5f74 696d 655f 7374 727d  lapsed_time_str}
-00019110: 732e 2922 0a20 2020 2020 2020 2029 0a0a  s.)".        )..
-00019120: 0a64 6566 206d 6f73 6169 635f 636f 6e63  .def mosaic_conc
-00019130: 6174 656e 6174 6f72 280a 2020 2020 7669  atenator(.    vi
-00019140: 6465 6f5f 7061 7468 733a 204c 6973 745b  deo_paths: List[
-00019150: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
-00019160: 7468 4c69 6b65 5d5d 2c0a 2020 2020 7361  thLike]],.    sa
-00019170: 7665 5f70 6174 683a 2055 6e69 6f6e 5b73  ve_path: Union[s
-00019180: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
-00019190: 2c0a 2020 2020 7769 6474 685f 6964 783a  ,.    width_idx:
-000191a0: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
-000191b0: 696e 742c 2073 7472 5d5d 203d 204e 6f6e  int, str]] = Non
-000191c0: 652c 0a20 2020 2077 6964 7468 5f70 783a  e,.    width_px:
-000191d0: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
-000191e0: 696e 742c 2073 7472 5d5d 203d 204e 6f6e  int, str]] = Non
-000191f0: 652c 0a20 2020 2068 6569 6768 745f 6964  e,.    height_id
-00019200: 783a 204f 7074 696f 6e61 6c5b 556e 696f  x: Optional[Unio
-00019210: 6e5b 696e 742c 2073 7472 5d5d 203d 204e  n[int, str]] = N
-00019220: 6f6e 652c 0a20 2020 2068 6569 6768 745f  one,.    height_
-00019230: 7078 3a20 4f70 7469 6f6e 616c 5b55 6e69  px: Optional[Uni
-00019240: 6f6e 5b69 6e74 2c20 7374 725d 5d20 3d20  on[int, str]] = 
-00019250: 4e6f 6e65 2c0a 2020 2020 6770 753a 204f  None,.    gpu: O
-00019260: 7074 696f 6e61 6c5b 626f 6f6c 5d20 3d20  ptional[bool] = 
-00019270: 4661 6c73 652c 0a20 2020 2076 6572 626f  False,.    verbo
-00019280: 7365 3a20 4f70 7469 6f6e 616c 5b62 6f6f  se: Optional[boo
-00019290: 6c5d 203d 2054 7275 652c 0a20 2020 2075  l] = True,.    u
-000192a0: 6e65 7665 6e5f 6669 6c6c 5f63 6f6c 6f72  neven_fill_color
-000192b0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-000192c0: 3d20 2262 6c61 636b 222c 0a29 202d 3e20  = "black",.) -> 
-000192d0: 4e6f 6e65 3a0a 2020 2020 2222 220a 2020  None:.    """.  
-000192e0: 2020 436f 6e63 6174 656e 6174 6573 206d    Concatenates m
-000192f0: 756c 7469 706c 6520 7669 6465 6f73 2069  ultiple videos i
-00019300: 6e74 6f20 6120 6d6f 7361 6963 206c 6179  nto a mosaic lay
-00019310: 6f75 742e 0a0a 2020 2020 2e2e 2069 6d61  out...    .. ima
-00019320: 6765 3a3a 205f 7374 6174 6963 2f69 6d67  ge:: _static/img
-00019330: 2f6d 6f73 6169 635f 636f 6e63 6174 656e  /mosaic_concaten
-00019340: 6174 6f72 2e70 6e67 0a20 2020 2020 2020  ator.png.       
-00019350: 3a77 6964 7468 3a20 3630 300a 2020 2020  :width: 600.    
-00019360: 2020 203a 616c 6967 6e3a 2063 656e 7465     :align: cente
-00019370: 720a 0a20 2020 202e 2e20 6e6f 7465 3a3a  r..    .. note::
-00019380: 0a20 2020 2020 2020 6966 2061 6e20 756e  .       if an un
-00019390: 6576 656e 206e 756d 6265 7220 6f66 2076  even number of v
-000193a0: 6964 656f 732c 2074 6865 206c 6173 7420  ideos, the last 
-000193b0: 696e 6465 7820 7769 6c6c 2062 6520 6669  index will be fi
-000193c0: 6c6c 6564 2062 7920 6060 756e 6576 656e  lled by ``uneven
-000193d0: 5f66 696c 6c5f 636f 6c6f 7260 602e 0a0a  _fill_color``...
-000193e0: 2020 2020 3a70 6172 616d 204c 6973 745b      :param List[
-000193f0: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
-00019400: 7468 4c69 6b65 5d5d 2076 6964 656f 5f70  thLike]] video_p
-00019410: 6174 6873 3a20 4c69 7374 206f 6620 696e  aths: List of in
-00019420: 7075 7420 7669 6465 6f20 6669 6c65 2070  put video file p
-00019430: 6174 6873 2e0a 2020 2020 3a70 6172 616d  aths..    :param
-00019440: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
-00019450: 6174 684c 696b 655d 2073 6176 655f 7061  athLike] save_pa
-00019460: 7468 3a20 4669 6c65 2070 6174 6820 746f  th: File path to
-00019470: 2073 6176 6520 7468 6520 636f 6e63 6174   save the concat
-00019480: 656e 6174 6564 2076 6964 656f 2e0a 2020  enated video..  
-00019490: 2020 3a70 6172 616d 204f 7074 696f 6e61    :param Optiona
-000194a0: 6c5b 696e 745d 2077 6964 7468 5f70 783a  l[int] width_px:
-000194b0: 2057 6964 7468 206f 6620 7468 6520 6f75   Width of the ou
-000194c0: 7470 7574 2076 6964 656f 2069 6e20 7069  tput video in pi
-000194d0: 7865 6c73 2e0a 2020 2020 3a70 6172 616d  xels..    :param
-000194e0: 204f 7074 696f 6e61 6c5b 696e 745d 2077   Optional[int] w
-000194f0: 6964 7468 5f69 6478 3a20 496e 6465 7820  idth_idx: Index 
-00019500: 6f66 2074 6865 2076 6964 656f 2074 6f20  of the video to 
-00019510: 7573 6520 666f 7220 6465 7465 726d 696e  use for determin
-00019520: 696e 6720 7769 6474 682e 0a20 2020 203a  ing width..    :
-00019530: 7061 7261 6d20 4f70 7469 6f6e 616c 5b69  param Optional[i
-00019540: 6e74 5d20 6865 6967 6874 5f70 783a 2048  nt] height_px: H
-00019550: 6569 6768 7420 6f66 2074 6865 206f 7574  eight of the out
-00019560: 7075 7420 7669 6465 6f20 7061 6e65 6c73  put video panels
-00019570: 2069 6e20 7069 7865 6c73 2e0a 2020 2020   in pixels..    
-00019580: 3a70 6172 616d 204f 7074 696f 6e61 6c5b  :param Optional[
-00019590: 696e 745d 2068 6569 6768 745f 6964 783a  int] height_idx:
-000195a0: 2048 6569 6768 7420 6f66 2074 6865 2076   Height of the v
-000195b0: 6964 656f 2074 6f20 7573 6520 666f 7220  ideo to use for 
-000195c0: 6465 7465 726d 696e 696e 6720 7769 6474  determining widt
-000195d0: 682e 0a20 2020 203a 7061 7261 6d20 4f70  h..    :param Op
-000195e0: 7469 6f6e 616c 5b62 6f6f 6c5d 2067 7075  tional[bool] gpu
-000195f0: 3a20 5768 6574 6865 7220 746f 2075 7365  : Whether to use
-00019600: 2047 5055 2d61 6363 656c 6572 6174 6564   GPU-accelerated
-00019610: 2063 6f64 6563 2028 6465 6661 756c 743a   codec (default:
-00019620: 2046 616c 7365 292e 0a20 2020 203a 7061   False)..    :pa
-00019630: 7261 6d20 4f70 7469 6f6e 616c 5b62 6f6f  ram Optional[boo
-00019640: 6c5d 2076 6572 626f 7365 3a20 5768 6574  l] verbose: Whet
-00019650: 6865 7220 746f 2070 7269 6e74 2070 726f  her to print pro
-00019660: 6772 6573 7320 6d65 7373 6167 6573 2028  gress messages (
-00019670: 6465 6661 756c 743a 2054 7275 6529 2e0a  default: True)..
-00019680: 0a20 2020 203a 6578 616d 706c 653a 0a20  .    :example:. 
-00019690: 2020 203e 3e3e 2076 6964 656f 5f70 6174     >>> video_pat
-000196a0: 6873 203d 205b 272f 5573 6572 732f 7369  hs = ['/Users/si
-000196b0: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
-000196c0: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
-000196d0: 6f6f 7469 6e67 2f52 4154 5f4e 4f52 2f70  ooting/RAT_NOR/p
-000196e0: 726f 6a65 6374 5f66 6f6c 6465 722f 7669  roject_folder/vi
-000196f0: 6465 6f73 2f74 6573 742f 3038 3130 3230  deos/test/081020
-00019700: 3231 5f44 4f54 5f52 6174 375f 3828 3229  21_DOT_Rat7_8(2)
-00019710: 2e6d 7034 272c 2027 2f55 7365 7273 2f73  .mp4', '/Users/s
-00019720: 696d 6f6e 2f44 6573 6b74 6f70 2f65 6e76  imon/Desktop/env
-00019730: 732f 7369 6d62 612f 7472 6f75 626c 6573  s/simba/troubles
-00019740: 686f 6f74 696e 672f 5241 545f 4e4f 522f  hooting/RAT_NOR/
-00019750: 7072 6f6a 6563 745f 666f 6c64 6572 2f76  project_folder/v
-00019760: 6964 656f 732f 7465 7374 2f30 3831 3032  ideos/test/08102
-00019770: 3032 315f 444f 545f 5261 7431 315f 3132  021_DOT_Rat11_12
-00019780: 2e6d 7034 272c 2027 2f55 7365 7273 2f73  .mp4', '/Users/s
-00019790: 696d 6f6e 2f44 6573 6b74 6f70 2f65 6e76  imon/Desktop/env
-000197a0: 732f 7369 6d62 612f 7472 6f75 626c 6573  s/simba/troubles
-000197b0: 686f 6f74 696e 672f 5241 545f 4e4f 522f  hooting/RAT_NOR/
-000197c0: 7072 6f6a 6563 745f 666f 6c64 6572 2f76  project_folder/v
-000197d0: 6964 656f 732f 7465 7374 2f6e 6577 2f32  ideos/test/new/2
-000197e0: 3032 322d 3036 2d32 315f 4e4f 425f 494f  022-06-21_NOB_IO
-000197f0: 545f 3233 2e6d 7034 275d 0a20 2020 203e  T_23.mp4'].    >
-00019800: 3e3e 2073 6176 655f 7061 7468 203d 2027  >> save_path = '
-00019810: 2f55 7365 7273 2f73 696d 6f6e 2f44 6573  /Users/simon/Des
-00019820: 6b74 6f70 2f65 6e76 732f 7369 6d62 612f  ktop/envs/simba/
-00019830: 7472 6f75 626c 6573 686f 6f74 696e 672f  troubleshooting/
-00019840: 5241 545f 4e4f 522f 7072 6f6a 6563 745f  RAT_NOR/project_
-00019850: 666f 6c64 6572 2f76 6964 656f 732f 7465  folder/videos/te
-00019860: 7374 2f6e 6577 2f62 6c61 6e6b 5f74 6573  st/new/blank_tes
-00019870: 742e 6d70 3427 0a20 2020 203e 3e3e 206d  t.mp4'.    >>> m
-00019880: 6f73 6169 635f 636f 6e63 6174 656e 6174  osaic_concatenat
-00019890: 6f72 2876 6964 656f 5f70 6174 6873 3d76  or(video_paths=v
-000198a0: 6964 656f 5f70 6174 6873 2c20 7361 7665  ideo_paths, save
-000198b0: 5f70 6174 683d 7361 7665 5f70 6174 682c  _path=save_path,
-000198c0: 2077 6964 7468 5f69 6478 3d31 2c20 6865   width_idx=1, he
-000198d0: 6967 6874 5f69 6478 3d31 2c20 6770 753d  ight_idx=1, gpu=
-000198e0: 4661 6c73 6529 0a20 2020 2022 2222 0a0a  False).    """..
-000198f0: 2020 2020 6368 6563 6b5f 6666 6d70 6567      check_ffmpeg
-00019900: 5f61 7661 696c 6162 6c65 2829 0a20 2020  _available().   
-00019910: 2069 6620 6770 7520 616e 6420 6e6f 7420   if gpu and not 
-00019920: 6368 6563 6b5f 6e76 6964 6561 5f67 7075  check_nvidea_gpu
-00019930: 5f61 7661 696c 6162 6c65 2829 3a0a 2020  _available():.  
-00019940: 2020 2020 2020 7261 6973 6520 4646 4d50        raise FFMP
-00019950: 4547 436f 6465 6347 5055 4572 726f 7228  EGCodecGPUError(
-00019960: 0a20 2020 2020 2020 2020 2020 206d 7367  .            msg
-00019970: 3d22 4e56 4944 4941 2047 5055 206e 6f74  ="NVIDIA GPU not
-00019980: 2061 7661 696c 6162 6c65 222c 2073 6f75   available", sou
-00019990: 7263 653d 6d6f 7361 6963 5f63 6f6e 6361  rce=mosaic_conca
-000199a0: 7465 6e61 746f 722e 5f5f 6e61 6d65 5f5f  tenator.__name__
-000199b0: 0a20 2020 2020 2020 2029 0a20 2020 2074  .        ).    t
-000199c0: 696d 6572 203d 2053 696d 6261 5469 6d65  imer = SimbaTime
-000199d0: 7228 7374 6172 743d 5472 7565 290a 2020  r(start=True).  
-000199e0: 2020 6474 203d 2064 6174 6574 696d 652e    dt = datetime.
-000199f0: 6e6f 7728 292e 7374 7266 7469 6d65 2822  now().strftime("
-00019a00: 2559 256d 2564 2548 254d 2553 2229 0a20  %Y%m%d%H%M%S"). 
-00019a10: 2020 2063 6865 636b 5f76 616c 6964 5f6c     check_valid_l
-00019a20: 7374 280a 2020 2020 2020 2020 6461 7461  st(.        data
-00019a30: 3d76 6964 656f 5f70 6174 6873 2c0a 2020  =video_paths,.  
-00019a40: 2020 2020 2020 736f 7572 6365 3d66 227b        source=f"{
-00019a50: 6d6f 7361 6963 5f63 6f6e 6361 7465 6e61  mosaic_concatena
-00019a60: 746f 722e 5f5f 6e61 6d65 5f5f 7d20 7669  tor.__name__} vi
-00019a70: 6465 6f5f 7061 7468 7322 2c0a 2020 2020  deo_paths",.    
-00019a80: 2020 2020 6d69 6e5f 6c65 6e3d 332c 0a20      min_len=3,. 
-00019a90: 2020 2029 0a20 2020 2076 6964 656f 5f6d     ).    video_m
-00019aa0: 6574 615f 6461 7461 203d 205b 0a20 2020  eta_data = [.   
-00019ab0: 2020 2020 2067 6574 5f76 6964 656f 5f6d       get_video_m
-00019ac0: 6574 615f 6461 7461 2876 6964 656f 5f70  eta_data(video_p
-00019ad0: 6174 683d 7669 6465 6f5f 7061 7468 2920  ath=video_path) 
-00019ae0: 666f 7220 7669 6465 6f5f 7061 7468 2069  for video_path i
-00019af0: 6e20 7669 6465 6f5f 7061 7468 730a 2020  n video_paths.  
-00019b00: 2020 5d0a 2020 2020 6d61 785f 7669 6465    ].    max_vide
-00019b10: 6f5f 6c65 6e67 7468 203d 206d 6178 285b  o_length = max([
-00019b20: 785b 2276 6964 656f 5f6c 656e 6774 685f  x["video_length_
-00019b30: 7322 5d20 666f 7220 7820 696e 2076 6964  s"] for x in vid
-00019b40: 656f 5f6d 6574 615f 6461 7461 5d29 0a20  eo_meta_data]). 
-00019b50: 2020 2069 6620 2828 7769 6474 685f 7078     if ((width_px
-00019b60: 2069 7320 4e6f 6e65 2920 616e 6420 2877   is None) and (w
-00019b70: 6964 7468 5f69 6478 2069 7320 4e6f 6e65  idth_idx is None
-00019b80: 2929 206f 7220 280a 2020 2020 2020 2020  )) or (.        
-00019b90: 2877 6964 7468 5f70 7820 6973 206e 6f74  (width_px is not
-00019ba0: 204e 6f6e 6529 2061 6e64 2028 7769 6474   None) and (widt
-00019bb0: 685f 6964 7820 6973 206e 6f74 204e 6f6e  h_idx is not Non
-00019bc0: 6529 0a20 2020 2029 3a0a 2020 2020 2020  e).    ):.      
-00019bd0: 2020 7261 6973 6520 496e 7661 6c69 6449    raise InvalidI
-00019be0: 6e70 7574 4572 726f 7228 0a20 2020 2020  nputError(.     
-00019bf0: 2020 2020 2020 206d 7367 3d22 5072 6f76         msg="Prov
-00019c00: 6964 6520 6120 7769 6474 685f 7078 204f  ide a width_px O
-00019c10: 5220 7769 6474 685f 6964 7822 2c20 736f  R width_idx", so
-00019c20: 7572 6365 3d6d 6f73 6169 635f 636f 6e63  urce=mosaic_conc
-00019c30: 6174 656e 6174 6f72 2e5f 5f6e 616d 655f  atenator.__name_
-00019c40: 5f0a 2020 2020 2020 2020 290a 2020 2020  _.        ).    
-00019c50: 6966 2028 2868 6569 6768 745f 7078 2069  if ((height_px i
-00019c60: 7320 4e6f 6e65 2920 616e 6420 2868 6569  s None) and (hei
-00019c70: 6768 745f 6964 7820 6973 204e 6f6e 6529  ght_idx is None)
-00019c80: 2920 6f72 2028 0a20 2020 2020 2020 2028  ) or (.        (
-00019c90: 6865 6967 6874 5f70 7820 6973 206e 6f74  height_px is not
-00019ca0: 204e 6f6e 6529 2061 6e64 2028 6865 6967   None) and (heig
-00019cb0: 6874 5f69 6478 2069 7320 6e6f 7420 4e6f  ht_idx is not No
-00019cc0: 6e65 290a 2020 2020 293a 0a20 2020 2020  ne).    ):.     
-00019cd0: 2020 2072 6169 7365 2049 6e76 616c 6964     raise Invalid
-00019ce0: 496e 7075 7445 7272 6f72 280a 2020 2020  InputError(.    
-00019cf0: 2020 2020 2020 2020 6d73 673d 2250 726f          msg="Pro
-00019d00: 7669 6465 2061 2068 6569 6768 745f 7078  vide a height_px
-00019d10: 204f 5220 6865 6967 6874 5f69 6478 222c   OR height_idx",
-00019d20: 2073 6f75 7263 653d 6d6f 7361 6963 5f63   source=mosaic_c
-00019d30: 6f6e 6361 7465 6e61 746f 722e 5f5f 6e61  oncatenator.__na
-00019d40: 6d65 5f5f 0a20 2020 2020 2020 2029 0a20  me__.        ). 
-00019d50: 2020 2069 6620 7769 6474 685f 6964 7820     if width_idx 
-00019d60: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00019d70: 2020 2020 2063 6865 636b 5f69 6e74 280a       check_int(.
-00019d80: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
-00019d90: 3d66 227b 7665 7274 6963 616c 5f76 6964  =f"{vertical_vid
-00019da0: 656f 5f63 6f6e 6361 7465 6e61 746f 722e  eo_concatenator.
-00019db0: 5f5f 6e61 6d65 5f5f 7d20 7769 6474 6820  __name__} width 
-00019dc0: 696e 6465 7822 2c0a 2020 2020 2020 2020  index",.        
-00019dd0: 2020 2020 7661 6c75 653d 7769 6474 685f      value=width_
-00019de0: 6964 782c 0a20 2020 2020 2020 2020 2020  idx,.           
-00019df0: 206d 696e 5f76 616c 7565 3d31 2c0a 2020   min_value=1,.  
-00019e00: 2020 2020 2020 2020 2020 6d61 785f 7661            max_va
-00019e10: 6c75 653d 6c65 6e28 7669 6465 6f5f 7061  lue=len(video_pa
-00019e20: 7468 7329 202d 2031 2c0a 2020 2020 2020  ths) - 1,.      
-00019e30: 2020 290a 2020 2020 2020 2020 7769 6474    ).        widt
-00019e40: 6820 3d20 696e 7428 7669 6465 6f5f 6d65  h = int(video_me
-00019e50: 7461 5f64 6174 615b 7769 6474 685f 6964  ta_data[width_id
-00019e60: 785d 5b22 7769 6474 6822 5d29 0a20 2020  x]["width"]).   
-00019e70: 2065 6c73 653a 0a20 2020 2020 2020 2077   else:.        w
-00019e80: 6964 7468 203d 2077 6964 7468 5f70 780a  idth = width_px.
-00019e90: 2020 2020 6966 2068 6569 6768 745f 6964      if height_id
-00019ea0: 7820 6973 206e 6f74 204e 6f6e 653a 0a20  x is not None:. 
-00019eb0: 2020 2020 2020 2063 6865 636b 5f69 6e74         check_int
-00019ec0: 280a 2020 2020 2020 2020 2020 2020 6e61  (.            na
-00019ed0: 6d65 3d66 227b 7665 7274 6963 616c 5f76  me=f"{vertical_v
-00019ee0: 6964 656f 5f63 6f6e 6361 7465 6e61 746f  ideo_concatenato
-00019ef0: 722e 5f5f 6e61 6d65 5f5f 7d20 6865 6967  r.__name__} heig
-00019f00: 6874 2069 6e64 6578 222c 0a20 2020 2020  ht index",.     
-00019f10: 2020 2020 2020 2076 616c 7565 3d77 6964         value=wid
-00019f20: 7468 5f69 6478 2c0a 2020 2020 2020 2020  th_idx,.        
-00019f30: 2020 2020 6d69 6e5f 7661 6c75 653d 312c      min_value=1,
-00019f40: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
-00019f50: 5f76 616c 7565 3d6c 656e 2876 6964 656f  _value=len(video
-00019f60: 5f70 6174 6873 2920 2d20 312c 0a20 2020  _paths) - 1,.   
-00019f70: 2020 2020 2029 0a20 2020 2020 2020 2068       ).        h
-00019f80: 6569 6768 7420 3d20 696e 7428 7669 6465  eight = int(vide
-00019f90: 6f5f 6d65 7461 5f64 6174 615b 7769 6474  o_meta_data[widt
-00019fa0: 685f 6964 785d 5b22 6865 6967 6874 225d  h_idx]["height"]
-00019fb0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
-00019fc0: 2020 2020 6865 6967 6874 203d 2068 6569      height = hei
-00019fd0: 6768 745f 7078 0a20 2020 2069 6620 7665  ght_px.    if ve
-00019fe0: 7262 6f73 653a 0a20 2020 2020 2020 2070  rbose:.        p
-00019ff0: 7269 6e74 2866 2243 7265 6174 696e 6720  rint(f"Creating 
-0001a000: 6d6f 7361 6963 2076 6964 656f 202e 2e2e  mosaic video ...
-0001a010: 2229 0a20 2020 2074 656d 705f 6469 7220  ").    temp_dir 
-0001a020: 3d20 6f73 2e70 6174 682e 6a6f 696e 286f  = os.path.join(o
-0001a030: 732e 7061 7468 2e64 6972 6e61 6d65 2876  s.path.dirname(v
-0001a040: 6964 656f 5f70 6174 6873 5b30 5d29 2c20  ideo_paths[0]), 
-0001a050: 6622 7465 6d70 5f7b 6474 7d22 290a 2020  f"temp_{dt}").  
-0001a060: 2020 6f73 2e6d 616b 6564 6972 7328 7465    os.makedirs(te
-0001a070: 6d70 5f64 6972 290a 2020 2020 6966 206e  mp_dir).    if n
-0001a080: 6f74 2028 6c65 6e28 7669 6465 6f5f 7061  ot (len(video_pa
-0001a090: 7468 7329 2025 2032 2920 3d3d 2030 3a0a  ths) % 2) == 0:.
-0001a0a0: 2020 2020 2020 2020 626c 616e 6b5f 7061          blank_pa
-0001a0b0: 7468 203d 206f 732e 7061 7468 2e6a 6f69  th = os.path.joi
-0001a0c0: 6e28 7465 6d70 5f64 6972 2c20 6622 7b64  n(temp_dir, f"{d
-0001a0d0: 747d 2e6d 7034 2229 0a20 2020 2020 2020  t}.mp4").       
-0001a0e0: 2063 7265 6174 655f 626c 616e 6b5f 7669   create_blank_vi
-0001a0f0: 6465 6f28 0a20 2020 2020 2020 2020 2020  deo(.           
-0001a100: 2070 6174 683d 626c 616e 6b5f 7061 7468   path=blank_path
-0001a110: 2c0a 2020 2020 2020 2020 2020 2020 6c65  ,.            le
-0001a120: 6e67 7468 3d6d 6178 5f76 6964 656f 5f6c  ngth=max_video_l
-0001a130: 656e 6774 682c 0a20 2020 2020 2020 2020  ength,.         
-0001a140: 2020 2077 6964 7468 3d77 6964 7468 2c0a     width=width,.
-0001a150: 2020 2020 2020 2020 2020 2020 6865 6967              heig
-0001a160: 6874 3d68 6569 6768 742c 0a20 2020 2020  ht=height,.     
-0001a170: 2020 2020 2020 2067 7075 3d67 7075 2c0a         gpu=gpu,.
-0001a180: 2020 2020 2020 2020 2020 2020 7665 7262              verb
-0001a190: 6f73 653d 7665 7262 6f73 652c 0a20 2020  ose=verbose,.   
-0001a1a0: 2020 2020 2020 2020 2063 6f6c 6f72 3d75           color=u
-0001a1b0: 6e65 7665 6e5f 6669 6c6c 5f63 6f6c 6f72  neven_fill_color
-0001a1c0: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-0001a1d0: 2020 2020 7669 6465 6f5f 7061 7468 732e      video_paths.
-0001a1e0: 6170 7065 6e64 2862 6c61 6e6b 5f70 6174  append(blank_pat
-0001a1f0: 6829 0a20 2020 2075 7070 6572 5f76 6964  h).    upper_vid
-0001a200: 656f 732c 206c 6f77 6572 5f76 6964 656f  eos, lower_video
-0001a210: 7320 3d20 280a 2020 2020 2020 2020 7669  s = (.        vi
-0001a220: 6465 6f5f 7061 7468 735b 3a20 6c65 6e28  deo_paths[: len(
-0001a230: 7669 6465 6f5f 7061 7468 7329 202f 2f20  video_paths) // 
-0001a240: 325d 2c0a 2020 2020 2020 2020 7669 6465  2],.        vide
-0001a250: 6f5f 7061 7468 735b 6c65 6e28 7669 6465  o_paths[len(vide
-0001a260: 6f5f 7061 7468 7329 202f 2f20 3220 3a5d  o_paths) // 2 :]
-0001a270: 2c0a 2020 2020 290a 2020 2020 6966 2076  ,.    ).    if v
-0001a280: 6572 626f 7365 3a0a 2020 2020 2020 2020  erbose:.        
-0001a290: 7072 696e 7428 2243 7265 6174 696e 6720  print("Creating 
-0001a2a0: 7570 7065 7220 6d6f 7361 6963 2e2e 2e20  upper mosaic... 
-0001a2b0: 2853 7465 7020 312f 3329 2229 0a20 2020  (Step 1/3)").   
-0001a2c0: 2069 6620 6c65 6e28 7570 7065 725f 7669   if len(upper_vi
-0001a2d0: 6465 6f73 2920 3e20 313a 0a20 2020 2020  deos) > 1:.     
-0001a2e0: 2020 2075 7070 6572 5f70 6174 6820 3d20     upper_path = 
-0001a2f0: 6f73 2e70 6174 682e 6a6f 696e 2874 656d  os.path.join(tem
-0001a300: 705f 6469 722c 2022 7570 7065 722e 6d70  p_dir, "upper.mp
-0001a310: 3422 290a 2020 2020 2020 2020 686f 7269  4").        hori
-0001a320: 7a6f 6e74 616c 5f76 6964 656f 5f63 6f6e  zontal_video_con
-0001a330: 6361 7465 6e61 746f 7228 0a20 2020 2020  catenator(.     
-0001a340: 2020 2020 2020 2076 6964 656f 5f70 6174         video_pat
-0001a350: 6873 3d75 7070 6572 5f76 6964 656f 732c  hs=upper_videos,
-0001a360: 0a20 2020 2020 2020 2020 2020 2073 6176  .            sav
-0001a370: 655f 7061 7468 3d75 7070 6572 5f70 6174  e_path=upper_pat
-0001a380: 682c 0a20 2020 2020 2020 2020 2020 2067  h,.            g
-0001a390: 7075 3d67 7075 2c0a 2020 2020 2020 2020  pu=gpu,.        
-0001a3a0: 2020 2020 6865 6967 6874 5f70 783d 6865      height_px=he
-0001a3b0: 6967 6874 2c0a 2020 2020 2020 2020 2020  ight,.          
-0001a3c0: 2020 7665 7262 6f73 653d 7665 7262 6f73    verbose=verbos
-0001a3d0: 652c 0a20 2020 2020 2020 2029 0a20 2020  e,.        ).   
-0001a3e0: 2065 6c73 653a 0a20 2020 2020 2020 2075   else:.        u
-0001a3f0: 7070 6572 5f70 6174 6820 3d20 7570 7065  pper_path = uppe
-0001a400: 725f 7669 6465 6f73 5b30 5d0a 2020 2020  r_videos[0].    
-0001a410: 6966 2076 6572 626f 7365 3a0a 2020 2020  if verbose:.    
-0001a420: 2020 2020 7072 696e 7428 2243 7265 6174      print("Creat
-0001a430: 696e 6720 6c6f 7765 7220 6d6f 7361 6963  ing lower mosaic
-0001a440: 2e2e 2e20 2853 7465 7020 322f 3329 2229  ... (Step 2/3)")
-0001a450: 0a20 2020 2069 6620 6c65 6e28 6c6f 7765  .    if len(lowe
-0001a460: 725f 7669 6465 6f73 2920 3e20 313a 0a20  r_videos) > 1:. 
-0001a470: 2020 2020 2020 206c 6f77 6572 5f70 6174         lower_pat
-0001a480: 6820 3d20 6f73 2e70 6174 682e 6a6f 696e  h = os.path.join
-0001a490: 2874 656d 705f 6469 722c 2022 6c6f 7765  (temp_dir, "lowe
-0001a4a0: 722e 6d70 3422 290a 2020 2020 2020 2020  r.mp4").        
-0001a4b0: 686f 7269 7a6f 6e74 616c 5f76 6964 656f  horizontal_video
-0001a4c0: 5f63 6f6e 6361 7465 6e61 746f 7228 0a20  _concatenator(. 
-0001a4d0: 2020 2020 2020 2020 2020 2076 6964 656f             video
-0001a4e0: 5f70 6174 6873 3d6c 6f77 6572 5f76 6964  _paths=lower_vid
-0001a4f0: 656f 732c 0a20 2020 2020 2020 2020 2020  eos,.           
-0001a500: 2073 6176 655f 7061 7468 3d6c 6f77 6572   save_path=lower
-0001a510: 5f70 6174 682c 0a20 2020 2020 2020 2020  _path,.         
-0001a520: 2020 2067 7075 3d67 7075 2c0a 2020 2020     gpu=gpu,.    
-0001a530: 2020 2020 2020 2020 6865 6967 6874 5f70          height_p
-0001a540: 783d 6865 6967 6874 2c0a 2020 2020 2020  x=height,.      
-0001a550: 2020 2020 2020 7665 7262 6f73 653d 7665        verbose=ve
-0001a560: 7262 6f73 652c 0a20 2020 2020 2020 2029  rbose,.        )
-0001a570: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-0001a580: 2020 206c 6f77 6572 5f70 6174 6820 3d20     lower_path = 
-0001a590: 6c6f 7765 725f 7669 6465 6f73 5b30 5d0a  lower_videos[0].
-0001a5a0: 2020 2020 7061 6e65 6c73 5f6d 6574 6120      panels_meta 
-0001a5b0: 3d20 5b0a 2020 2020 2020 2020 6765 745f  = [.        get_
-0001a5c0: 7669 6465 6f5f 6d65 7461 5f64 6174 6128  video_meta_data(
-0001a5d0: 7669 6465 6f5f 7061 7468 3d76 6964 656f  video_path=video
-0001a5e0: 5f70 6174 6829 0a20 2020 2020 2020 2066  _path).        f
-0001a5f0: 6f72 2076 6964 656f 5f70 6174 6820 696e  or video_path in
-0001a600: 205b 6c6f 7765 725f 7061 7468 2c20 7570   [lower_path, up
-0001a610: 7065 725f 7061 7468 5d0a 2020 2020 5d0a  per_path].    ].
-0001a620: 2020 2020 6966 2076 6572 626f 7365 3a0a      if verbose:.
-0001a630: 2020 2020 2020 2020 7072 696e 7428 224a          print("J
-0001a640: 6f69 6e69 6e67 2075 7070 6572 2061 6e64  oining upper and
-0001a650: 206c 6f77 6572 206d 6f73 6169 632e 2e2e   lower mosaic...
-0001a660: 2028 5374 6570 2032 2f33 2922 290a 2020   (Step 2/3)").  
-0001a670: 2020 7665 7274 6963 616c 5f76 6964 656f    vertical_video
-0001a680: 5f63 6f6e 6361 7465 6e61 746f 7228 0a20  _concatenator(. 
-0001a690: 2020 2020 2020 2076 6964 656f 5f70 6174         video_pat
-0001a6a0: 6873 3d5b 7570 7065 725f 7061 7468 2c20  hs=[upper_path, 
-0001a6b0: 6c6f 7765 725f 7061 7468 5d2c 0a20 2020  lower_path],.   
-0001a6c0: 2020 2020 2073 6176 655f 7061 7468 3d73       save_path=s
-0001a6d0: 6176 655f 7061 7468 2c0a 2020 2020 2020  ave_path,.      
-0001a6e0: 2020 7665 7262 6f73 653d 7665 7262 6f73    verbose=verbos
-0001a6f0: 652c 0a20 2020 2020 2020 2067 7075 3d67  e,.        gpu=g
-0001a700: 7075 2c0a 2020 2020 2020 2020 7769 6474  pu,.        widt
-0001a710: 685f 7078 3d6d 6178 285b 785b 2277 6964  h_px=max([x["wid
-0001a720: 7468 225d 2066 6f72 2078 2069 6e20 7061  th"] for x in pa
-0001a730: 6e65 6c73 5f6d 6574 615d 292c 0a20 2020  nels_meta]),.   
-0001a740: 2029 0a20 2020 2074 696d 6572 2e73 746f   ).    timer.sto
-0001a750: 705f 7469 6d65 7228 290a 2020 2020 7368  p_timer().    sh
-0001a760: 7574 696c 2e72 6d74 7265 6528 7465 6d70  util.rmtree(temp
-0001a770: 5f64 6972 290a 2020 2020 6966 2076 6572  _dir).    if ver
-0001a780: 626f 7365 3a0a 2020 2020 2020 2020 7072  bose:.        pr
-0001a790: 696e 7428 0a20 2020 2020 2020 2020 2020  int(.           
-0001a7a0: 2066 224d 6f73 6169 6320 636f 6e63 6174   f"Mosaic concat
-0001a7b0: 656e 6174 696f 6e20 636f 6d70 6c65 7465  enation complete
-0001a7c0: 2e20 5361 7665 6420 6174 207b 7361 7665  . Saved at {save
-0001a7d0: 5f70 6174 687d 2028 456c 6170 7365 6420  _path} (Elapsed 
-0001a7e0: 7469 6d65 3a20 7b74 696d 6572 2e65 6c61  time: {timer.ela
-0001a7f0: 7073 6564 5f74 696d 655f 7374 727d 732e  psed_time_str}s.
-0001a800: 2922 0a20 2020 2020 2020 2029 0a0a 0a64  )".        )...d
-0001a810: 6566 206d 6978 6564 5f6d 6f73 6169 635f  ef mixed_mosaic_
-0001a820: 636f 6e63 6174 656e 6174 6f72 280a 2020  concatenator(.  
-0001a830: 2020 7669 6465 6f5f 7061 7468 733a 204c    video_paths: L
-0001a840: 6973 745b 556e 696f 6e5b 7374 722c 206f  ist[Union[str, o
-0001a850: 732e 5061 7468 4c69 6b65 5d5d 2c0a 2020  s.PathLike]],.  
-0001a860: 2020 7361 7665 5f70 6174 683a 2055 6e69    save_path: Uni
-0001a870: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
-0001a880: 696b 655d 2c0a 2020 2020 6770 753a 204f  ike],.    gpu: O
-0001a890: 7074 696f 6e61 6c5b 626f 6f6c 5d20 3d20  ptional[bool] = 
-0001a8a0: 4661 6c73 652c 0a20 2020 2076 6572 626f  False,.    verbo
-0001a8b0: 7365 3a20 4f70 7469 6f6e 616c 5b62 6f6f  se: Optional[boo
-0001a8c0: 6c5d 203d 2054 7275 652c 0a20 2020 2075  l] = True,.    u
-0001a8d0: 6e65 7665 6e5f 6669 6c6c 5f63 6f6c 6f72  neven_fill_color
-0001a8e0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-0001a8f0: 3d20 2262 6c61 636b 222c 0a29 202d 3e20  = "black",.) -> 
-0001a900: 4e6f 6e65 3a0a 2020 2020 2222 220a 2020  None:.    """.  
-0001a910: 2020 4372 6561 7465 2061 206d 6978 6564    Create a mixed
-0001a920: 206d 6f73 6169 6320 7669 6465 6f20 6279   mosaic video by
-0001a930: 2063 6f6e 6361 7465 6e61 7469 6e67 206d   concatenating m
-0001a940: 756c 7469 706c 6520 696e 7075 7420 7669  ultiple input vi
-0001a950: 6465 6f73 2069 6e20 6120 6d6f 7361 6963  deos in a mosaic
-0001a960: 206c 6179 6f75 7420 6f66 2076 6172 696f   layout of vario
-0001a970: 7573 2073 697a 6573 2e0a 0a20 2020 202e  us sizes...    .
-0001a980: 2e20 696d 6167 653a 3a20 5f73 7461 7469  . image:: _stati
-0001a990: 632f 696d 672f 6d69 7865 645f 6d6f 7361  c/img/mixed_mosa
-0001a9a0: 6963 5f63 6f6e 6361 7465 6e61 746f 722e  ic_concatenator.
-0001a9b0: 706e 670a 2020 2020 2020 203a 7769 6474  png.       :widt
-0001a9c0: 683a 2036 3030 0a20 2020 2020 2020 3a61  h: 600.       :a
-0001a9d0: 6c69 676e 3a20 6365 6e74 6572 0a0a 2020  lign: center..  
-0001a9e0: 2020 2e2e 206e 6f74 653a 3a0a 2020 2020    .. note::.    
-0001a9f0: 2020 2054 6865 2072 6573 6f6c 7574 696f     The resolutio
-0001aa00: 6e20 6f66 2074 6865 206f 7574 7075 7420  n of the output 
-0001aa10: 7669 6465 6f20 6973 2064 6574 6572 6d69  video is determi
-0001aa20: 6e65 6420 6279 2074 6865 2072 6573 6f6c  ned by the resol
-0001aa30: 7574 696f 6e20 6f66 2074 6865 2076 6964  ution of the vid
-0001aa40: 656f 2070 6174 6820 6174 2074 6865 2066  eo path at the f
-0001aa50: 6972 7374 2069 6e64 6578 2e0a 0a20 2020  irst index...   
-0001aa60: 2020 2020 4966 2061 6e20 756e 6576 656e      If an uneven
-0001aa70: 206e 756d 6265 7220 6f66 2072 6967 6874   number of right
-0001aa80: 2d70 616e 656c 2076 6964 656f 7320 2820  -panel videos ( 
-0001aa90: 6966 206e 6f74 2028 6c65 6e28 7669 6465  if not (len(vide
-0001aaa0: 6f5f 7061 7468 7329 2d31 2920 2520 3229  o_paths)-1) % 2)
-0001aab0: 203d 3d20 3029 2c20 7468 656e 2074 6865   == 0), then the
-0001aac0: 206c 6173 7420 696e 6465 7820 7769 6c6c   last index will
-0001aad0: 2062 6520 6669 6c6c 6564 2062 7920 6060   be filled by ``
-0001aae0: 756e 6576 656e 5f66 696c 6c5f 636f 6c6f  uneven_fill_colo
-0001aaf0: 7260 602e 0a0a 2020 2020 3a70 6172 616d  r``...    :param
-0001ab00: 204c 6973 745b 556e 696f 6e5b 7374 722c   List[Union[str,
-0001ab10: 206f 732e 5061 7468 4c69 6b65 5d5d 2076   os.PathLike]] v
-0001ab20: 6964 656f 5f70 6174 6873 3a20 4c69 7374  ideo_paths: List
-0001ab30: 206f 6620 696e 7075 7420 7669 6465 6f20   of input video 
-0001ab40: 6669 6c65 2070 6174 6873 2e0a 2020 2020  file paths..    
-0001ab50: 3a70 6172 616d 2055 6e69 6f6e 5b73 7472  :param Union[str
-0001ab60: 2c20 6f73 2e50 6174 684c 696b 655d 2073  , os.PathLike] s
-0001ab70: 6176 655f 7061 7468 3a20 4669 6c65 2070  ave_path: File p
-0001ab80: 6174 6820 746f 2073 6176 6520 7468 6520  ath to save the 
-0001ab90: 636f 6e63 6174 656e 6174 6564 2076 6964  concatenated vid
-0001aba0: 656f 2e0a 2020 2020 3a70 6172 616d 204f  eo..    :param O
-0001abb0: 7074 696f 6e61 6c5b 626f 6f6c 5d20 6770  ptional[bool] gp
-0001abc0: 753a 2057 6865 7468 6572 2074 6f20 7573  u: Whether to us
-0001abd0: 6520 4750 552d 6163 6365 6c65 7261 7465  e GPU-accelerate
-0001abe0: 6420 636f 6465 6320 2864 6566 6175 6c74  d codec (default
-0001abf0: 3a20 4661 6c73 6529 2e0a 2020 2020 3a70  : False)..    :p
-0001ac00: 6172 616d 204f 7074 696f 6e61 6c5b 626f  aram Optional[bo
-0001ac10: 6f6c 5d20 7665 7262 6f73 653a 2057 6865  ol] verbose: Whe
-0001ac20: 7468 6572 2074 6f20 7072 696e 7420 7072  ther to print pr
-0001ac30: 6f67 7265 7373 206d 6573 7361 6765 7320  ogress messages 
-0001ac40: 2864 6566 6175 6c74 3a20 5472 7565 292e  (default: True).
-0001ac50: 0a0a 2020 2020 3a65 7861 6d70 6c65 3a0a  ..    :example:.
-0001ac60: 2020 2020 3e3e 3e20 7669 6465 6f5f 7061      >>> video_pa
-0001ac70: 7468 7320 3d20 5b27 7669 6465 6f31 2e6d  ths = ['video1.m
-0001ac80: 7034 272c 2027 7669 6465 6f32 2e6d 7034  p4', 'video2.mp4
-0001ac90: 272c 2027 7669 6465 6f33 2e6d 7034 275d  ', 'video3.mp4']
-0001aca0: 0a20 2020 203e 3e3e 2073 6176 655f 7061  .    >>> save_pa
-0001acb0: 7468 203d 2027 2f55 7365 7273 2f73 696d  th = '/Users/sim
-0001acc0: 6f6e 2f44 6573 6b74 6f70 2f65 6e76 732f  on/Desktop/envs/
-0001acd0: 7369 6d62 612f 7472 6f75 626c 6573 686f  simba/troublesho
-0001ace0: 6f74 696e 672f 5241 545f 4e4f 522f 7072  oting/RAT_NOR/pr
-0001acf0: 6f6a 6563 745f 666f 6c64 6572 2f76 6964  oject_folder/vid
-0001ad00: 656f 732f 7465 7374 2f6e 6577 2f62 6c61  eos/test/new/bla
-0001ad10: 6e6b 5f74 6573 742e 6d70 3427 0a20 2020  nk_test.mp4'.   
-0001ad20: 203e 3e3e 206d 6978 6564 5f6d 6f73 6169   >>> mixed_mosai
-0001ad30: 635f 636f 6e63 6174 656e 6174 6f72 2876  c_concatenator(v
-0001ad40: 6964 656f 5f70 6174 6873 3d76 6964 656f  ideo_paths=video
-0001ad50: 5f70 6174 6873 2c20 7361 7665 5f70 6174  _paths, save_pat
-0001ad60: 683d 7361 7665 5f70 6174 682c 2067 7075  h=save_path, gpu
-0001ad70: 3d46 616c 7365 2c20 7665 7262 6f73 653d  =False, verbose=
-0001ad80: 5472 7565 290a 2020 2020 2222 220a 0a20  True).    """.. 
-0001ad90: 2020 2063 6865 636b 5f66 666d 7065 675f     check_ffmpeg_
-0001ada0: 6176 6169 6c61 626c 6528 290a 2020 2020  available().    
-0001adb0: 6966 2067 7075 2061 6e64 206e 6f74 2063  if gpu and not c
-0001adc0: 6865 636b 5f6e 7669 6465 615f 6770 755f  heck_nvidea_gpu_
-0001add0: 6176 6169 6c61 626c 6528 293a 0a20 2020  available():.   
-0001ade0: 2020 2020 2072 6169 7365 2046 464d 5045       raise FFMPE
-0001adf0: 4743 6f64 6563 4750 5545 7272 6f72 280a  GCodecGPUError(.
-0001ae00: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
-0001ae10: 224e 5649 4449 4120 4750 5520 6e6f 7420  "NVIDIA GPU not 
-0001ae20: 6176 6169 6c61 626c 6522 2c20 736f 7572  available", sour
-0001ae30: 6365 3d6d 6978 6564 5f6d 6f73 6169 635f  ce=mixed_mosaic_
-0001ae40: 636f 6e63 6174 656e 6174 6f72 2e5f 5f6e  concatenator.__n
-0001ae50: 616d 655f 5f0a 2020 2020 2020 2020 290a  ame__.        ).
-0001ae60: 2020 2020 7469 6d65 7220 3d20 5369 6d62      timer = Simb
-0001ae70: 6154 696d 6572 2873 7461 7274 3d54 7275  aTimer(start=Tru
-0001ae80: 6529 0a20 2020 2063 6865 636b 5f76 616c  e).    check_val
-0001ae90: 6964 5f6c 7374 280a 2020 2020 2020 2020  id_lst(.        
-0001aea0: 6461 7461 3d76 6964 656f 5f70 6174 6873  data=video_paths
-0001aeb0: 2c20 736f 7572 6365 3d6d 6978 6564 5f6d  , source=mixed_m
-0001aec0: 6f73 6169 635f 636f 6e63 6174 656e 6174  osaic_concatenat
-0001aed0: 6f72 2e5f 5f6e 616d 655f 5f2c 206d 696e  or.__name__, min
-0001aee0: 5f6c 656e 3d32 0a20 2020 2029 0a20 2020  _len=2.    ).   
-0001aef0: 2064 7420 3d20 6461 7465 7469 6d65 2e6e   dt = datetime.n
-0001af00: 6f77 2829 2e73 7472 6674 696d 6528 2225  ow().strftime("%
-0001af10: 5925 6d25 6425 4825 4d25 5322 290a 2020  Y%m%d%H%M%S").  
-0001af20: 2020 7669 6465 6f5f 6d65 7461 5f64 6174    video_meta_dat
-0001af30: 6120 3d20 5b0a 2020 2020 2020 2020 6765  a = [.        ge
-0001af40: 745f 7669 6465 6f5f 6d65 7461 5f64 6174  t_video_meta_dat
-0001af50: 6128 7669 6465 6f5f 7061 7468 3d76 6964  a(video_path=vid
-0001af60: 656f 5f70 6174 6829 2066 6f72 2076 6964  eo_path) for vid
-0001af70: 656f 5f70 6174 6820 696e 2076 6964 656f  eo_path in video
-0001af80: 5f70 6174 6873 0a20 2020 205d 0a20 2020  _paths.    ].   
-0001af90: 206d 6178 5f76 6964 656f 5f6c 656e 6774   max_video_lengt
-0001afa0: 6820 3d20 6d61 7828 5b78 5b22 7669 6465  h = max([x["vide
-0001afb0: 6f5f 6c65 6e67 7468 5f73 225d 2066 6f72  o_length_s"] for
-0001afc0: 2078 2069 6e20 7669 6465 6f5f 6d65 7461   x in video_meta
-0001afd0: 5f64 6174 615d 290a 2020 2020 6368 6563  _data]).    chec
-0001afe0: 6b5f 6966 5f64 6972 5f65 7869 7374 7328  k_if_dir_exists(
-0001aff0: 0a20 2020 2020 2020 2069 6e5f 6469 723d  .        in_dir=
-0001b000: 6f73 2e70 6174 682e 6469 726e 616d 6528  os.path.dirname(
-0001b010: 7361 7665 5f70 6174 6829 2c20 736f 7572  save_path), sour
-0001b020: 6365 3d6d 6978 6564 5f6d 6f73 6169 635f  ce=mixed_mosaic_
-0001b030: 636f 6e63 6174 656e 6174 6f72 2e5f 5f6e  concatenator.__n
-0001b040: 616d 655f 5f0a 2020 2020 290a 2020 2020  ame__.    ).    
-0001b050: 6c61 7267 655f 6d6f 7361 6963 5f70 6174  large_mosaic_pat
-0001b060: 682c 2076 6964 656f 5f70 6174 6873 203d  h, video_paths =
-0001b070: 2076 6964 656f 5f70 6174 6873 5b30 5d2c   video_paths[0],
-0001b080: 2076 6964 656f 5f70 6174 6873 5b31 3a5d   video_paths[1:]
-0001b090: 0a20 2020 206d 6f73 6169 635f 6865 6967  .    mosaic_heig
-0001b0a0: 6874 203d 2069 6e74 2876 6964 656f 5f6d  ht = int(video_m
-0001b0b0: 6574 615f 6461 7461 5b30 5d5b 2268 6569  eta_data[0]["hei
-0001b0c0: 6768 7422 5d20 2f20 3229 0a20 2020 2069  ght"] / 2).    i
-0001b0d0: 6620 7665 7262 6f73 653a 0a20 2020 2020  f verbose:.     
-0001b0e0: 2020 2070 7269 6e74 2822 4372 6561 7469     print("Creati
-0001b0f0: 6e67 206d 6978 6564 206d 6f73 6169 6320  ng mixed mosaic 
-0001b100: 7669 6465 6f2e 2e2e 2022 290a 2020 2020  video... ").    
-0001b110: 7465 6d70 5f64 6972 203d 206f 732e 7061  temp_dir = os.pa
-0001b120: 7468 2e6a 6f69 6e28 6f73 2e70 6174 682e  th.join(os.path.
-0001b130: 6469 726e 616d 6528 6c61 7267 655f 6d6f  dirname(large_mo
-0001b140: 7361 6963 5f70 6174 6829 2c20 6622 7465  saic_path), f"te
-0001b150: 6d70 5f7b 6474 7d22 290a 2020 2020 6f73  mp_{dt}").    os
-0001b160: 2e6d 616b 6564 6972 7328 7465 6d70 5f64  .makedirs(temp_d
-0001b170: 6972 290a 2020 2020 6966 206e 6f74 2028  ir).    if not (
-0001b180: 6c65 6e28 7669 6465 6f5f 7061 7468 7329  len(video_paths)
-0001b190: 2025 2032 2920 3d3d 2030 3a0a 2020 2020   % 2) == 0:.    
-0001b1a0: 2020 2020 626c 616e 6b5f 7061 7468 203d      blank_path =
-0001b1b0: 206f 732e 7061 7468 2e6a 6f69 6e28 7465   os.path.join(te
-0001b1c0: 6d70 5f64 6972 2c20 6622 7b64 747d 2e6d  mp_dir, f"{dt}.m
-0001b1d0: 7034 2229 0a20 2020 2020 2020 2063 7265  p4").        cre
-0001b1e0: 6174 655f 626c 616e 6b5f 7669 6465 6f28  ate_blank_video(
-0001b1f0: 0a20 2020 2020 2020 2020 2020 2070 6174  .            pat
-0001b200: 683d 626c 616e 6b5f 7061 7468 2c0a 2020  h=blank_path,.  
-0001b210: 2020 2020 2020 2020 2020 6c65 6e67 7468            length
-0001b220: 3d6d 6178 5f76 6964 656f 5f6c 656e 6774  =max_video_lengt
-0001b230: 682c 0a20 2020 2020 2020 2020 2020 2077  h,.            w
-0001b240: 6964 7468 3d67 6574 5f76 6964 656f 5f6d  idth=get_video_m
-0001b250: 6574 615f 6461 7461 2876 6964 656f 5f70  eta_data(video_p
-0001b260: 6174 683d 7669 6465 6f5f 7061 7468 735b  ath=video_paths[
-0001b270: 2d31 5d29 5b22 7769 6474 6822 5d2c 0a20  -1])["width"],. 
-0001b280: 2020 2020 2020 2020 2020 2068 6569 6768             heigh
-0001b290: 743d 6765 745f 7669 6465 6f5f 6d65 7461  t=get_video_meta
-0001b2a0: 5f64 6174 6128 7669 6465 6f5f 7061 7468  _data(video_path
-0001b2b0: 3d76 6964 656f 5f70 6174 6873 5b2d 315d  =video_paths[-1]
-0001b2c0: 295b 2268 6569 6768 7422 5d2c 0a20 2020  )["height"],.   
-0001b2d0: 2020 2020 2020 2020 2067 7075 3d67 7075           gpu=gpu
-0001b2e0: 2c0a 2020 2020 2020 2020 2020 2020 7665  ,.            ve
-0001b2f0: 7262 6f73 653d 5472 7565 2c0a 2020 2020  rbose=True,.    
-0001b300: 2020 2020 2020 2020 636f 6c6f 723d 756e          color=un
-0001b310: 6576 656e 5f66 696c 6c5f 636f 6c6f 722c  even_fill_color,
-0001b320: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0001b330: 2020 2076 6964 656f 5f70 6174 6873 2e61     video_paths.a
-0001b340: 7070 656e 6428 626c 616e 6b5f 7061 7468  ppend(blank_path
-0001b350: 290a 2020 2020 7570 7065 725f 7669 6465  ).    upper_vide
-0001b360: 6f73 2c20 6c6f 7765 725f 7669 6465 6f73  os, lower_videos
-0001b370: 203d 2028 0a20 2020 2020 2020 2076 6964   = (.        vid
-0001b380: 656f 5f70 6174 6873 5b3a 206c 656e 2876  eo_paths[: len(v
-0001b390: 6964 656f 5f70 6174 6873 2920 2f2f 2032  ideo_paths) // 2
-0001b3a0: 5d2c 0a20 2020 2020 2020 2076 6964 656f  ],.        video
-0001b3b0: 5f70 6174 6873 5b6c 656e 2876 6964 656f  _paths[len(video
-0001b3c0: 5f70 6174 6873 2920 2f2f 2032 203a 5d2c  _paths) // 2 :],
-0001b3d0: 0a20 2020 2029 0a20 2020 2069 6620 7665  .    ).    if ve
-0001b3e0: 7262 6f73 653a 0a20 2020 2020 2020 2070  rbose:.        p
-0001b3f0: 7269 6e74 2822 4372 6561 7469 6e67 2075  rint("Creating u
-0001b400: 7070 6572 2072 6967 6874 206d 6f73 6169  pper right mosai
-0001b410: 6320 2e2e 2e20 2853 7465 7020 312f 3429  c ... (Step 1/4)
-0001b420: 2229 0a20 2020 2069 6620 6c65 6e28 7570  ").    if len(up
-0001b430: 7065 725f 7669 6465 6f73 2920 3e20 313a  per_videos) > 1:
-0001b440: 0a20 2020 2020 2020 2075 7070 6572 5f70  .        upper_p
-0001b450: 6174 6820 3d20 6f73 2e70 6174 682e 6a6f  ath = os.path.jo
-0001b460: 696e 2874 656d 705f 6469 722c 2022 7570  in(temp_dir, "up
-0001b470: 7065 722e 6d70 3422 290a 2020 2020 2020  per.mp4").      
-0001b480: 2020 686f 7269 7a6f 6e74 616c 5f76 6964    horizontal_vid
-0001b490: 656f 5f63 6f6e 6361 7465 6e61 746f 7228  eo_concatenator(
-0001b4a0: 0a20 2020 2020 2020 2020 2020 2076 6964  .            vid
-0001b4b0: 656f 5f70 6174 6873 3d75 7070 6572 5f76  eo_paths=upper_v
-0001b4c0: 6964 656f 732c 0a20 2020 2020 2020 2020  ideos,.         
-0001b4d0: 2020 2073 6176 655f 7061 7468 3d75 7070     save_path=upp
-0001b4e0: 6572 5f70 6174 682c 0a20 2020 2020 2020  er_path,.       
-0001b4f0: 2020 2020 2067 7075 3d67 7075 2c0a 2020       gpu=gpu,.  
-0001b500: 2020 2020 2020 2020 2020 6865 6967 6874            height
-0001b510: 5f70 783d 6d6f 7361 6963 5f68 6569 6768  _px=mosaic_heigh
-0001b520: 742c 0a20 2020 2020 2020 2020 2020 2076  t,.            v
-0001b530: 6572 626f 7365 3d76 6572 626f 7365 2c0a  erbose=verbose,.
-0001b540: 2020 2020 2020 2020 290a 2020 2020 656c          ).    el
-0001b550: 7365 3a0a 2020 2020 2020 2020 7570 7065  se:.        uppe
-0001b560: 725f 7061 7468 203d 2075 7070 6572 5f76  r_path = upper_v
-0001b570: 6964 656f 735b 305d 0a20 2020 2069 6620  ideos[0].    if 
-0001b580: 7665 7262 6f73 653a 0a20 2020 2020 2020  verbose:.       
-0001b590: 2070 7269 6e74 2822 4372 6561 7469 6e67   print("Creating
-0001b5a0: 206c 6f77 6572 2072 6967 6874 206d 6f73   lower right mos
-0001b5b0: 6169 6320 2e2e 2e20 2853 7465 7020 322f  aic ... (Step 2/
-0001b5c0: 3429 2229 0a20 2020 2069 6620 6c65 6e28  4)").    if len(
-0001b5d0: 6c6f 7765 725f 7669 6465 6f73 2920 3e20  lower_videos) > 
-0001b5e0: 313a 0a20 2020 2020 2020 206c 6f77 6572  1:.        lower
-0001b5f0: 5f70 6174 6820 3d20 6f73 2e70 6174 682e  _path = os.path.
-0001b600: 6a6f 696e 2874 656d 705f 6469 722c 2022  join(temp_dir, "
-0001b610: 6c6f 7765 722e 6d70 3422 290a 2020 2020  lower.mp4").    
-0001b620: 2020 2020 686f 7269 7a6f 6e74 616c 5f76      horizontal_v
-0001b630: 6964 656f 5f63 6f6e 6361 7465 6e61 746f  ideo_concatenato
-0001b640: 7228 0a20 2020 2020 2020 2020 2020 2076  r(.            v
-0001b650: 6964 656f 5f70 6174 6873 3d6c 6f77 6572  ideo_paths=lower
-0001b660: 5f76 6964 656f 732c 0a20 2020 2020 2020  _videos,.       
-0001b670: 2020 2020 2073 6176 655f 7061 7468 3d6c       save_path=l
-0001b680: 6f77 6572 5f70 6174 682c 0a20 2020 2020  ower_path,.     
-0001b690: 2020 2020 2020 2067 7075 3d67 7075 2c0a         gpu=gpu,.
-0001b6a0: 2020 2020 2020 2020 2020 2020 7665 7262              verb
-0001b6b0: 6f73 653d 7665 7262 6f73 652c 0a20 2020  ose=verbose,.   
-0001b6c0: 2020 2020 2020 2020 2068 6569 6768 745f           height_
-0001b6d0: 7078 3d6d 6f73 6169 635f 6865 6967 6874  px=mosaic_height
-0001b6e0: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-0001b6f0: 656c 7365 3a0a 2020 2020 2020 2020 6c6f  else:.        lo
-0001b700: 7765 725f 7061 7468 203d 206c 6f77 6572  wer_path = lower
-0001b710: 5f76 6964 656f 735b 305d 0a20 2020 2070  _videos[0].    p
-0001b720: 616e 656c 735f 6d65 7461 203d 205b 0a20  anels_meta = [. 
-0001b730: 2020 2020 2020 2067 6574 5f76 6964 656f         get_video
-0001b740: 5f6d 6574 615f 6461 7461 2876 6964 656f  _meta_data(video
-0001b750: 5f70 6174 683d 7669 6465 6f5f 7061 7468  _path=video_path
-0001b760: 290a 2020 2020 2020 2020 666f 7220 7669  ).        for vi
-0001b770: 6465 6f5f 7061 7468 2069 6e20 5b6c 6f77  deo_path in [low
-0001b780: 6572 5f70 6174 682c 2075 7070 6572 5f70  er_path, upper_p
-0001b790: 6174 685d 0a20 2020 205d 0a20 2020 206d  ath].    ].    m
-0001b7a0: 6f73 6169 635f 7061 7468 203d 206f 732e  osaic_path = os.
-0001b7b0: 7061 7468 2e6a 6f69 6e28 7465 6d70 5f64  path.join(temp_d
-0001b7c0: 6972 2c20 226d 6f73 6169 632e 6d70 3422  ir, "mosaic.mp4"
-0001b7d0: 290a 2020 2020 6966 2076 6572 626f 7365  ).    if verbose
-0001b7e0: 3a0a 2020 2020 2020 2020 7072 696e 7428  :.        print(
-0001b7f0: 224a 6f69 6e69 6e67 2075 7070 6572 2061  "Joining upper a
-0001b800: 6e64 206c 6f77 6572 2072 6967 6874 206d  nd lower right m
-0001b810: 6f73 6169 632e 2e2e 2028 5374 6570 2033  osaic... (Step 3
-0001b820: 2f34 2922 290a 2020 2020 7665 7274 6963  /4)").    vertic
-0001b830: 616c 5f76 6964 656f 5f63 6f6e 6361 7465  al_video_concate
-0001b840: 6e61 746f 7228 0a20 2020 2020 2020 2076  nator(.        v
-0001b850: 6964 656f 5f70 6174 6873 3d5b 7570 7065  ideo_paths=[uppe
-0001b860: 725f 7061 7468 2c20 6c6f 7765 725f 7061  r_path, lower_pa
-0001b870: 7468 5d2c 0a20 2020 2020 2020 2077 6964  th],.        wid
-0001b880: 7468 5f70 783d 6d61 7828 5b78 5b22 7769  th_px=max([x["wi
-0001b890: 6474 6822 5d20 666f 7220 7820 696e 2070  dth"] for x in p
-0001b8a0: 616e 656c 735f 6d65 7461 5d29 2c0a 2020  anels_meta]),.  
-0001b8b0: 2020 2020 2020 7361 7665 5f70 6174 683d        save_path=
-0001b8c0: 6d6f 7361 6963 5f70 6174 682c 0a20 2020  mosaic_path,.   
-0001b8d0: 2020 2020 2067 7075 3d67 7075 2c0a 2020       gpu=gpu,.  
-0001b8e0: 2020 2020 2020 7665 7262 6f73 653d 7665        verbose=ve
-0001b8f0: 7262 6f73 652c 0a20 2020 2029 0a20 2020  rbose,.    ).   
-0001b900: 2069 6620 7665 7262 6f73 653a 0a20 2020   if verbose:.   
-0001b910: 2020 2020 2070 7269 6e74 2822 4a6f 696e       print("Join
-0001b920: 696e 6720 6c65 6674 2061 6e64 2072 6967  ing left and rig
-0001b930: 6874 206d 6f73 6169 632e 2e2e 2028 5374  ht mosaic... (St
-0001b940: 6570 2034 2f34 2922 290a 2020 2020 686f  ep 4/4)").    ho
-0001b950: 7269 7a6f 6e74 616c 5f76 6964 656f 5f63  rizontal_video_c
-0001b960: 6f6e 6361 7465 6e61 746f 7228 0a20 2020  oncatenator(.   
-0001b970: 2020 2020 2076 6964 656f 5f70 6174 6873       video_paths
-0001b980: 3d5b 6c61 7267 655f 6d6f 7361 6963 5f70  =[large_mosaic_p
-0001b990: 6174 682c 206d 6f73 6169 635f 7061 7468  ath, mosaic_path
-0001b9a0: 5d2c 0a20 2020 2020 2020 2068 6569 6768  ],.        heigh
-0001b9b0: 745f 6964 783d 302c 0a20 2020 2020 2020  t_idx=0,.       
-0001b9c0: 2073 6176 655f 7061 7468 3d73 6176 655f   save_path=save_
-0001b9d0: 7061 7468 2c0a 2020 2020 2020 2020 6770  path,.        gp
-0001b9e0: 753d 6770 752c 0a20 2020 2029 0a20 2020  u=gpu,.    ).   
-0001b9f0: 2074 696d 6572 2e73 746f 705f 7469 6d65   timer.stop_time
-0001ba00: 7228 290a 2020 2020 7368 7574 696c 2e72  r().    shutil.r
-0001ba10: 6d74 7265 6528 7465 6d70 5f64 6972 290a  mtree(temp_dir).
-0001ba20: 2020 2020 6966 2076 6572 626f 7365 3a0a      if verbose:.
-0001ba30: 2020 2020 2020 2020 7072 696e 7428 0a20          print(. 
-0001ba40: 2020 2020 2020 2020 2020 2066 224d 6978             f"Mix
-0001ba50: 6564 206d 6f73 6169 6320 636f 6e63 6174  ed mosaic concat
-0001ba60: 656e 6174 696f 6e20 636f 6d70 6c65 7465  enation complete
-0001ba70: 2e20 5361 7665 6420 6174 207b 7361 7665  . Saved at {save
-0001ba80: 5f70 6174 687d 2028 456c 6170 7365 6420  _path} (Elapsed 
-0001ba90: 7469 6d65 3a20 7b74 696d 6572 2e65 6c61  time: {timer.ela
-0001baa0: 7073 6564 5f74 696d 655f 7374 727d 732e  psed_time_str}s.
-0001bab0: 2922 0a20 2020 2020 2020 2029 0a0a 0a64  )".        )...d
-0001bac0: 6566 2063 6c69 705f 7669 6465 6f73 5f62  ef clip_videos_b
-0001bad0: 795f 6672 616d 655f 6964 7328 0a20 2020  y_frame_ids(.   
-0001bae0: 2066 696c 655f 7061 7468 733a 204c 6973   file_paths: Lis
-0001baf0: 745b 556e 696f 6e5b 7374 722c 206f 732e  t[Union[str, os.
-0001bb00: 5061 7468 4c69 6b65 5d5d 2c0a 2020 2020  PathLike]],.    
-0001bb10: 6672 6d5f 6964 733a 204c 6973 745b 4c69  frm_ids: List[Li
-0001bb20: 7374 5b69 6e74 5d5d 2c0a 2020 2020 7361  st[int]],.    sa
-0001bb30: 7665 5f64 6972 3a20 4f70 7469 6f6e 616c  ve_dir: Optional
-0001bb40: 5b55 6e69 6f6e 5b73 7472 2c20 6f73 2e50  [Union[str, os.P
-0001bb50: 6174 684c 696b 655d 5d20 3d20 4e6f 6e65  athLike]] = None
-0001bb60: 2c0a 293a 0a20 2020 2022 2222 0a20 2020  ,.):.    """.   
-0001bb70: 2043 6c69 7020 7669 6465 6f73 2073 7065   Clip videos spe
-0001bb80: 6369 6669 6564 2062 7920 6672 616d 6520  cified by frame 
-0001bb90: 4944 7320 286e 756d 6265 7273 292e 0a0a  IDs (numbers)...
-0001bba0: 2020 2020 3a70 6172 616d 204c 6973 745b      :param List[
-0001bbb0: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
-0001bbc0: 7468 4c69 6b65 5d5d 2066 696c 655f 7061  thLike]] file_pa
-0001bbd0: 7468 733a 204c 6973 7420 6f66 2070 6174  ths: List of pat
-0001bbe0: 6873 2074 6f20 696e 7075 7420 7669 6465  hs to input vide
-0001bbf0: 6f20 6669 6c65 732e 0a20 2020 203a 7061  o files..    :pa
-0001bc00: 7261 6d20 4c69 7374 5b4c 6973 745b 696e  ram List[List[in
-0001bc10: 745d 5d20 6672 6d5f 6964 733a 204c 6973  t]] frm_ids: Lis
-0001bc20: 7420 6f66 206c 6973 7473 2063 6f6e 7461  t of lists conta
-0001bc30: 696e 696e 6720 7374 6172 7420 616e 6420  ining start and 
-0001bc40: 656e 6420 6672 616d 6520 4944 7320 666f  end frame IDs fo
-0001bc50: 7220 6561 6368 2076 6964 656f 2e0a 2020  r each video..  
-0001bc60: 2020 3a70 6172 616d 204f 7074 696f 6e61    :param Optiona
-0001bc70: 6c5b 556e 696f 6e5b 7374 722c 206f 732e  l[Union[str, os.
-0001bc80: 5061 7468 4c69 6b65 5d5d 2073 6176 655f  PathLike]] save_
-0001bc90: 6469 723a 2020 4469 7265 6374 6f72 7920  dir:  Directory 
-0001bca0: 746f 2073 6176 6520 7468 6520 636c 6970  to save the clip
-0001bcb0: 7065 6420 7669 6465 6f73 2e20 4966 204e  ped videos. If N
-0001bcc0: 6f6e 652c 2076 6964 656f 7320 7769 6c6c  one, videos will
-0001bcd0: 2062 6520 7361 7665 6420 696e 2074 6865   be saved in the
-0001bce0: 2073 616d 6520 6469 7265 6374 6f72 7920   same directory 
-0001bcf0: 6173 2074 6865 2069 6e70 7574 2076 6964  as the input vid
-0001bd00: 656f 7320 7769 7468 2066 7261 6d65 206e  eos with frame n
-0001bd10: 756d 6265 7273 2061 7320 7375 6666 6978  umbers as suffix
-0001bd20: 2e0a 2020 2020 3a72 6574 7572 6e3a 204e  ..    :return: N
-0001bd30: 6f6e 652e 0a0a 2020 2020 3a65 7861 6d70  one...    :examp
-0001bd40: 6c65 3a0a 2020 2020 3e3e 3e20 6669 6c65  le:.    >>> file
-0001bd50: 5f70 6174 6873 203d 205b 272f 5573 6572  _paths = ['/User
-0001bd60: 732f 7369 6d6f 6e2f 4465 736b 746f 702f  s/simon/Desktop/
-0001bd70: 656e 7673 2f73 696d 6261 2f74 726f 7562  envs/simba/troub
-0001bd80: 6c65 7368 6f6f 7469 6e67 2f62 6565 7062  leshooting/beepb
-0001bd90: 6f6f 7031 3734 2f70 726f 6a65 6374 5f66  oop174/project_f
-0001bda0: 6f6c 6465 722f 6672 616d 6573 2f6f 7574  older/frames/out
-0001bdb0: 7075 742f 7061 7468 5f70 6c6f 7473 2f54  put/path_plots/T
-0001bdc0: 7269 616c 2020 2020 3130 2e6d 7034 272c  rial    10.mp4',
-0001bdd0: 2027 2f55 7365 7273 2f73 696d 6f6e 2f44   '/Users/simon/D
-0001bde0: 6573 6b74 6f70 2f65 6e76 732f 7369 6d62  esktop/envs/simb
-0001bdf0: 612f 7472 6f75 626c 6573 686f 6f74 696e  a/troubleshootin
-0001be00: 672f 6265 6570 626f 6f70 3137 342f 7072  g/beepboop174/pr
-0001be10: 6f6a 6563 745f 666f 6c64 6572 2f66 7261  oject_folder/fra
-0001be20: 6d65 732f 6f75 7470 7574 2f70 6174 685f  mes/output/path_
-0001be30: 706c 6f74 732f 5472 6961 6c20 2020 2031  plots/Trial    1
-0001be40: 305f 312e 6d70 3427 5d0a 2020 2020 3e3e  0_1.mp4'].    >>
-0001be50: 3e20 6672 6d5f 6964 7320 3d20 5b5b 302c  > frm_ids = [[0,
-0001be60: 2032 305d 2c20 5b32 302c 2034 305d 5d0a   20], [20, 40]].
-0001be70: 2020 2020 3e3e 3e20 636c 6970 5f76 6964      >>> clip_vid
-0001be80: 656f 735f 6279 5f66 7261 6d65 5f69 6473  eos_by_frame_ids
-0001be90: 2866 696c 655f 7061 7468 733d 6669 6c65  (file_paths=file
-0001bea0: 5f70 6174 6873 2c20 6672 6d5f 6964 733d  _paths, frm_ids=
-0001beb0: 6672 6d5f 6964 732c 2073 6176 655f 6469  frm_ids, save_di
-0001bec0: 723d 272f 5573 6572 732f 7369 6d6f 6e2f  r='/Users/simon/
-0001bed0: 4465 736b 746f 702f 656e 7673 2f73 696d  Desktop/envs/sim
-0001bee0: 6261 2f74 726f 7562 6c65 7368 6f6f 7469  ba/troubleshooti
-0001bef0: 6e67 2f62 6565 7062 6f6f 7031 3734 2f70  ng/beepboop174/p
-0001bf00: 726f 6a65 6374 5f66 6f6c 6465 722f 6672  roject_folder/fr
-0001bf10: 616d 6573 2f6f 7574 7075 742f 7061 7468  ames/output/path
-0001bf20: 5f70 6c6f 7473 2f74 7269 616c 5f63 6e74  _plots/trial_cnt
-0001bf30: 2729 0a20 2020 2022 2222 0a0a 2020 2020  ').    """..    
-0001bf40: 7469 6d65 7220 3d20 5369 6d62 6154 696d  timer = SimbaTim
-0001bf50: 6572 2873 7461 7274 3d54 7275 6529 0a20  er(start=True). 
-0001bf60: 2020 2063 6865 636b 5f76 616c 6964 5f6c     check_valid_l
-0001bf70: 7374 280a 2020 2020 2020 2020 6461 7461  st(.        data
-0001bf80: 3d66 696c 655f 7061 7468 732c 0a20 2020  =file_paths,.   
-0001bf90: 2020 2020 2073 6f75 7263 653d 636c 6970       source=clip
-0001bfa0: 5f76 6964 656f 735f 6279 5f66 7261 6d65  _videos_by_frame
-0001bfb0: 5f69 6473 2e5f 5f6e 616d 655f 5f2c 0a20  _ids.__name__,. 
-0001bfc0: 2020 2020 2020 2076 616c 6964 5f64 7479         valid_dty
-0001bfd0: 7065 733d 2873 7472 2c29 2c0a 2020 2020  pes=(str,),.    
-0001bfe0: 2020 2020 6d69 6e5f 6c65 6e3d 312c 0a20      min_len=1,. 
-0001bff0: 2020 2029 0a20 2020 2063 6865 636b 5f76     ).    check_v
-0001c000: 616c 6964 5f6c 7374 280a 2020 2020 2020  alid_lst(.      
-0001c010: 2020 6461 7461 3d66 726d 5f69 6473 2c0a    data=frm_ids,.
-0001c020: 2020 2020 2020 2020 736f 7572 6365 3d63          source=c
-0001c030: 6c69 705f 7669 6465 6f73 5f62 795f 6672  lip_videos_by_fr
-0001c040: 616d 655f 6964 732e 5f5f 6e61 6d65 5f5f  ame_ids.__name__
-0001c050: 2c0a 2020 2020 2020 2020 7661 6c69 645f  ,.        valid_
-0001c060: 6474 7970 6573 3d28 6c69 7374 2c29 2c0a  dtypes=(list,),.
-0001c070: 2020 2020 2020 2020 6578 6163 745f 6c65          exact_le
-0001c080: 6e3d 6c65 6e28 6669 6c65 5f70 6174 6873  n=len(file_paths
-0001c090: 292c 0a20 2020 2029 0a20 2020 2066 6f72  ),.    ).    for
-0001c0a0: 2063 6e74 2c20 6920 696e 2065 6e75 6d65   cnt, i in enume
-0001c0b0: 7261 7465 2866 726d 5f69 6473 293a 0a20  rate(frm_ids):. 
-0001c0c0: 2020 2020 2020 2063 6865 636b 5f76 616c         check_val
-0001c0d0: 6964 5f6c 7374 280a 2020 2020 2020 2020  id_lst(.        
-0001c0e0: 2020 2020 6461 7461 3d69 2c0a 2020 2020      data=i,.    
-0001c0f0: 2020 2020 2020 2020 736f 7572 6365 3d66          source=f
-0001c100: 2263 6c69 705f 7669 6465 6f73 5f62 795f  "clip_videos_by_
-0001c110: 6672 616d 655f 636f 756e 742e 5f5f 6e61  frame_count.__na
-0001c120: 6d65 5f20 6672 6d5f 6964 7320 7b63 6e74  me_ frm_ids {cnt
-0001c130: 7d22 2c0a 2020 2020 2020 2020 2020 2020  }",.            
-0001c140: 7661 6c69 645f 6474 7970 6573 3d28 696e  valid_dtypes=(in
-0001c150: 742c 292c 0a20 2020 2020 2020 2020 2020  t,),.           
-0001c160: 2065 7861 6374 5f6c 656e 3d32 2c0a 2020   exact_len=2,.  
-0001c170: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001c180: 6966 2069 5b30 5d20 3e3d 2069 5b31 5d3a  if i[0] >= i[1]:
-0001c190: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0001c1a0: 7365 2046 7261 6d65 5261 6e67 6545 7272  se FrameRangeErr
-0001c1b0: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
-0001c1c0: 2020 2020 6d73 673d 6622 5374 6172 7420      msg=f"Start 
-0001c1d0: 6672 616d 6520 666f 7220 7669 6465 6f20  frame for video 
-0001c1e0: 7b69 7d20 6973 2061 6674 6572 206f 7220  {i} is after or 
-0001c1f0: 7468 6520 7361 6d65 2061 7320 7468 6520  the same as the 
-0001c200: 656e 6420 6672 616d 6520 287b 695b 305d  end frame ({i[0]
-0001c210: 7d2c 207b 695b 315d 7d29 222c 0a20 2020  }, {i[1]})",.   
-0001c220: 2020 2020 2020 2020 2020 2020 2073 6f75               sou
-0001c230: 7263 653d 636c 6970 5f76 6964 656f 735f  rce=clip_videos_
-0001c240: 6279 5f66 7261 6d65 5f69 6473 2e5f 5f6e  by_frame_ids.__n
-0001c250: 616d 655f 5f2c 0a20 2020 2020 2020 2020  ame__,.         
-0001c260: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
-0001c270: 2869 5b30 5d20 3c20 3029 206f 7220 2869  (i[0] < 0) or (i
-0001c280: 5b31 5d20 3c20 3129 3a0a 2020 2020 2020  [1] < 1):.      
-0001c290: 2020 2020 2020 7261 6973 6520 4672 616d        raise Fram
-0001c2a0: 6552 616e 6765 4572 726f 7228 0a20 2020  eRangeError(.   
-0001c2b0: 2020 2020 2020 2020 2020 2020 206d 7367               msg
-0001c2c0: 3d66 2253 7461 7274 2066 7261 6d65 2068  =f"Start frame h
-0001c2d0: 6173 2074 6f20 6265 2061 7420 6c65 6173  as to be at leas
-0001c2e0: 7420 3020 616e 6420 656e 6420 6672 616d  t 0 and end fram
-0001c2f0: 6520 6861 7320 746f 2062 6520 6174 206c  e has to be at l
-0001c300: 6561 7374 2031 222c 0a20 2020 2020 2020  east 1",.       
-0001c310: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
-0001c320: 636c 6970 5f76 6964 656f 735f 6279 5f66  clip_videos_by_f
-0001c330: 7261 6d65 5f69 6473 2e5f 5f6e 616d 655f  rame_ids.__name_
-0001c340: 5f2c 0a20 2020 2020 2020 2020 2020 2029  _,.            )
-0001c350: 0a20 2020 2076 6964 656f 5f6d 6574 615f  .    video_meta_
-0001c360: 6461 7461 203d 205b 6765 745f 7669 6465  data = [get_vide
-0001c370: 6f5f 6d65 7461 5f64 6174 6128 7669 6465  o_meta_data(vide
-0001c380: 6f5f 7061 7468 3d78 2920 666f 7220 7820  o_path=x) for x 
-0001c390: 696e 2066 696c 655f 7061 7468 735d 0a20  in file_paths]. 
-0001c3a0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-0001c3b0: 6528 6c65 6e28 7669 6465 6f5f 6d65 7461  e(len(video_meta
-0001c3c0: 5f64 6174 6129 293a 0a20 2020 2020 2020  _data)):.       
-0001c3d0: 2069 6620 2866 726d 5f69 6473 5b69 5d5b   if (frm_ids[i][
-0001c3e0: 305d 203e 2076 6964 656f 5f6d 6574 615f  0] > video_meta_
-0001c3f0: 6461 7461 5b69 5d5b 2266 7261 6d65 5f63  data[i]["frame_c
-0001c400: 6f75 6e74 225d 2920 6f72 2028 0a20 2020  ount"]) or (.   
-0001c410: 2020 2020 2020 2020 2066 726d 5f69 6473           frm_ids
-0001c420: 5b69 5d5b 315d 203e 2076 6964 656f 5f6d  [i][1] > video_m
-0001c430: 6574 615f 6461 7461 5b69 5d5b 2266 7261  eta_data[i]["fra
-0001c440: 6d65 5f63 6f75 6e74 225d 0a20 2020 2020  me_count"].     
-0001c450: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-0001c460: 2020 7261 6973 6520 4672 616d 6552 616e    raise FrameRan
-0001c470: 6765 4572 726f 7228 0a20 2020 2020 2020  geError(.       
-0001c480: 2020 2020 2020 2020 206d 7367 3d66 2756           msg=f'V
-0001c490: 6964 656f 207b 692b 317d 2068 6173 207b  ideo {i+1} has {
-0001c4a0: 7669 6465 6f5f 6d65 7461 5f64 6174 615b  video_meta_data[
-0001c4b0: 695d 5b22 6672 616d 655f 636f 756e 7422  i]["frame_count"
-0001c4c0: 5d7d 2066 7261 6d65 732c 2063 616e 6e6f  ]} frames, canno
-0001c4d0: 7420 7573 6520 7374 6172 7420 616e 6420  t use start and 
-0001c4e0: 656e 6420 6672 616d 6520 7b66 726d 5f69  end frame {frm_i
-0001c4f0: 6473 5b69 5d7d 272c 0a20 2020 2020 2020  ds[i]}',.       
-0001c500: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
-0001c510: 636c 6970 5f76 6964 656f 735f 6279 5f66  clip_videos_by_f
-0001c520: 7261 6d65 5f69 6473 2e5f 5f6e 616d 655f  rame_ids.__name_
-0001c530: 5f2c 0a20 2020 2020 2020 2020 2020 2029  _,.            )
-0001c540: 0a20 2020 2069 6620 7361 7665 5f64 6972  .    if save_dir
-0001c550: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0001c560: 2020 2020 2020 6368 6563 6b5f 6966 5f64        check_if_d
-0001c570: 6972 5f65 7869 7374 7328 0a20 2020 2020  ir_exists(.     
-0001c580: 2020 2020 2020 2069 6e5f 6469 723d 7361         in_dir=sa
-0001c590: 7665 5f64 6972 2c0a 2020 2020 2020 2020  ve_dir,.        
-0001c5a0: 2020 2020 736f 7572 6365 3d63 6c69 705f      source=clip_
-0001c5b0: 7669 6465 6f73 5f62 795f 6672 616d 655f  videos_by_frame_
-0001c5c0: 6964 732e 5f5f 6e61 6d65 5f5f 2c0a 2020  ids.__name__,.  
-0001c5d0: 2020 2020 2020 2020 2020 6372 6561 7465            create
-0001c5e0: 5f69 665f 6e6f 745f 6578 6973 743d 5472  _if_not_exist=Tr
-0001c5f0: 7565 2c0a 2020 2020 2020 2020 290a 2020  ue,.        ).  
-0001c600: 2020 666f 7220 636e 742c 2066 696c 655f    for cnt, file_
-0001c610: 7061 7468 2069 6e20 656e 756d 6572 6174  path in enumerat
-0001c620: 6528 6669 6c65 5f70 6174 6873 293a 0a20  e(file_paths):. 
-0001c630: 2020 2020 2020 2076 6964 656f 5f74 696d         video_tim
-0001c640: 6572 203d 2053 696d 6261 5469 6d65 7228  er = SimbaTimer(
-0001c650: 7374 6172 743d 5472 7565 290a 2020 2020  start=True).    
-0001c660: 2020 2020 6469 722c 2076 6964 656f 5f6e      dir, video_n
-0001c670: 616d 652c 2065 7874 203d 2067 6574 5f66  ame, ext = get_f
-0001c680: 6e5f 6578 7428 6669 6c65 7061 7468 3d66  n_ext(filepath=f
-0001c690: 696c 655f 7061 7468 290a 2020 2020 2020  ile_path).      
-0001c6a0: 2020 735f 662c 2065 5f66 203d 2066 726d    s_f, e_f = frm
-0001c6b0: 5f69 6473 5b63 6e74 5d5b 305d 2c20 6672  _ids[cnt][0], fr
-0001c6c0: 6d5f 6964 735b 636e 745d 5b31 5d0a 2020  m_ids[cnt][1].  
-0001c6d0: 2020 2020 2020 7072 696e 7428 6622 5472        print(f"Tr
-0001c6e0: 696d 6d69 6e67 207b 7669 6465 6f5f 6e61  imming {video_na
-0001c6f0: 6d65 7d20 6672 6f6d 2066 7261 6d65 207b  me} from frame {
-0001c700: 735f 667d 2074 6f20 6672 616d 6520 7b65  s_f} to frame {e
-0001c710: 5f66 7d2e 2e2e 2229 0a20 2020 2020 2020  _f}...").       
-0001c720: 2069 6620 7361 7665 5f64 6972 2069 7320   if save_dir is 
-0001c730: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0001c740: 2020 2020 2020 6f75 745f 7061 7468 203d        out_path =
-0001c750: 206f 732e 7061 7468 2e6a 6f69 6e28 7361   os.path.join(sa
-0001c760: 7665 5f64 6972 2c20 6f73 2e70 6174 682e  ve_dir, os.path.
-0001c770: 6261 7365 6e61 6d65 2866 696c 655f 7061  basename(file_pa
-0001c780: 7468 2929 0a20 2020 2020 2020 2065 6c73  th)).        els
-0001c790: 653a 0a20 2020 2020 2020 2020 2020 206f  e:.            o
-0001c7a0: 7574 5f70 6174 6820 3d20 6f73 2e70 6174  ut_path = os.pat
-0001c7b0: 682e 6a6f 696e 2864 6972 2c20 6622 7b76  h.join(dir, f"{v
-0001c7c0: 6964 656f 5f6e 616d 657d 5f7b 735f 667d  ideo_name}_{s_f}
-0001c7d0: 5f7b 655f 667d 7b65 7874 7d22 290a 2020  _{e_f}{ext}").  
-0001c7e0: 2020 2020 2020 636d 6420 3d20 6627 6666        cmd = f'ff
-0001c7f0: 6d70 6567 202d 6920 227b 6669 6c65 5f70  mpeg -i "{file_p
-0001c800: 6174 687d 2220 2d76 6620 2274 7269 6d3d  ath}" -vf "trim=
-0001c810: 7b73 5f66 7d3a 7b65 5f66 7d2c 7365 7470  {s_f}:{e_f},setp
-0001c820: 7473 3d50 5453 2d53 5441 5254 5054 5322  ts=PTS-STARTPTS"
-0001c830: 202d 633a 7620 6c69 6278 3236 3420 2d63   -c:v libx264 -c
-0001c840: 3a61 2061 6163 202d 6c6f 676c 6576 656c  :a aac -loglevel
-0001c850: 2065 7272 6f72 202d 7374 6174 7320 227b   error -stats "{
-0001c860: 6f75 745f 7061 7468 7d22 202d 7927 0a20  out_path}" -y'. 
-0001c870: 2020 2020 2020 2073 7562 7072 6f63 6573         subproces
-0001c880: 732e 6361 6c6c 2863 6d64 2c20 7368 656c  s.call(cmd, shel
-0001c890: 6c3d 5472 7565 2c20 7374 646f 7574 3d73  l=True, stdout=s
-0001c8a0: 7562 7072 6f63 6573 732e 5049 5045 290a  ubprocess.PIPE).
-0001c8b0: 2020 2020 2020 2020 7669 6465 6f5f 7469          video_ti
-0001c8c0: 6d65 722e 7374 6f70 5f74 696d 6572 2829  mer.stop_timer()
-0001c8d0: 0a20 2020 2020 2020 2070 7269 6e74 280a  .        print(.
-0001c8e0: 2020 2020 2020 2020 2020 2020 6622 5669              f"Vi
-0001c8f0: 6465 6f20 7b76 6964 656f 5f6e 616d 657d  deo {video_name}
-0001c900: 2063 6f6d 706c 6574 6520 2865 6c61 7073   complete (elaps
-0001c910: 6564 2074 696d 6520 7b76 6964 656f 5f74  ed time {video_t
-0001c920: 696d 6572 2e65 6c61 7073 6564 5f74 696d  imer.elapsed_tim
-0001c930: 655f 7374 727d 7329 220a 2020 2020 2020  e_str}s)".      
-0001c940: 2020 290a 2020 2020 7469 6d65 722e 7374    ).    timer.st
-0001c950: 6f70 5f74 696d 6572 2829 0a20 2020 2069  op_timer().    i
-0001c960: 6620 7361 7665 5f64 6972 2069 7320 4e6f  f save_dir is No
-0001c970: 6e65 3a0a 2020 2020 2020 2020 7374 646f  ne:.        stdo
-0001c980: 7574 5f73 7563 6365 7373 280a 2020 2020  ut_success(.    
-0001c990: 2020 2020 2020 2020 6d73 673d 6622 7b6c          msg=f"{l
-0001c9a0: 656e 2866 696c 655f 7061 7468 7329 7d20  en(file_paths)} 
-0001c9b0: 7669 6465 6f28 7329 2063 6c69 7070 6564  video(s) clipped
-0001c9c0: 2062 7920 6672 616d 6522 2c0a 2020 2020   by frame",.    
-0001c9d0: 2020 2020 2020 2020 656c 6170 7365 645f          elapsed_
-0001c9e0: 7469 6d65 3d74 696d 6572 2e65 6c61 7073  time=timer.elaps
-0001c9f0: 6564 5f74 696d 655f 7374 722c 0a20 2020  ed_time_str,.   
-0001ca00: 2020 2020 2029 0a20 2020 2065 6c73 653a       ).    else:
-0001ca10: 0a20 2020 2020 2020 2073 7464 6f75 745f  .        stdout_
-0001ca20: 7375 6363 6573 7328 0a20 2020 2020 2020  success(.       
-0001ca30: 2020 2020 206d 7367 3d66 227b 6c65 6e28       msg=f"{len(
-0001ca40: 6669 6c65 5f70 6174 6873 297d 2076 6964  file_paths)} vid
-0001ca50: 656f 2873 2920 636c 6970 7065 6420 6279  eo(s) clipped by
-0001ca60: 2066 7261 6d65 2061 6e64 2073 6176 6564   frame and saved
-0001ca70: 2069 6e20 7b73 6176 655f 6469 727d 222c   in {save_dir}",
-0001ca80: 0a20 2020 2020 2020 2020 2020 2065 6c61  .            ela
-0001ca90: 7073 6564 5f74 696d 653d 7469 6d65 722e  psed_time=timer.
-0001caa0: 656c 6170 7365 645f 7469 6d65 5f73 7472  elapsed_time_str
-0001cab0: 2c0a 2020 2020 2020 2020 290a 0a0a 2320  ,.        )...# 
-0001cac0: 7669 6465 6f5f 7061 7468 7320 3d20 5b27  video_paths = ['
-0001cad0: 2f55 7365 7273 2f73 696d 6f6e 2f44 6573  /Users/simon/Des
-0001cae0: 6b74 6f70 2f65 6e76 732f 7369 6d62 612f  ktop/envs/simba/
-0001caf0: 7472 6f75 626c 6573 686f 6f74 696e 672f  troubleshooting/
-0001cb00: 6265 6570 626f 6f70 3137 342f 7072 6f6a  beepboop174/proj
-0001cb10: 6563 745f 666f 6c64 6572 2f6d 6572 6765  ect_folder/merge
-0001cb20: 2f54 7269 616c 2020 2020 3130 5f63 6c69  /Trial    10_cli
-0001cb30: 7070 6564 5f67 616e 7474 2e6d 7034 272c  pped_gantt.mp4',
-0001cb40: 0a23 2020 2020 2020 2020 2020 2020 2020  .#              
-0001cb50: 2020 272f 5573 6572 732f 7369 6d6f 6e2f    '/Users/simon/
-0001cb60: 4465 736b 746f 702f 656e 7673 2f73 696d  Desktop/envs/sim
-0001cb70: 6261 2f74 726f 7562 6c65 7368 6f6f 7469  ba/troubleshooti
-0001cb80: 6e67 2f62 6565 7062 6f6f 7031 3734 2f70  ng/beepboop174/p
-0001cb90: 726f 6a65 6374 5f66 6f6c 6465 722f 6d65  roject_folder/me
-0001cba0: 7267 652f 5472 6961 6c20 2020 2031 305f  rge/Trial    10_
-0001cbb0: 636c 6970 7065 642e 6d70 3427 2c0a 2320  clipped.mp4',.# 
-0001cbc0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0001cbd0: 2f55 7365 7273 2f73 696d 6f6e 2f44 6573  /Users/simon/Des
-0001cbe0: 6b74 6f70 2f65 6e76 732f 7369 6d62 612f  ktop/envs/simba/
-0001cbf0: 7472 6f75 626c 6573 686f 6f74 696e 672f  troubleshooting/
-0001cc00: 6265 6570 626f 6f70 3137 342f 7072 6f6a  beepboop174/proj
-0001cc10: 6563 745f 666f 6c64 6572 2f6d 6572 6765  ect_folder/merge
-0001cc20: 2f54 7269 616c 2020 2020 3130 5f63 6c69  /Trial    10_cli
-0001cc30: 7070 6564 5f6c 696e 652e 6d70 3427 2c0a  pped_line.mp4',.
-0001cc40: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0001cc50: 2027 2f55 7365 7273 2f73 696d 6f6e 2f44   '/Users/simon/D
-0001cc60: 6573 6b74 6f70 2f65 6e76 732f 7369 6d62  esktop/envs/simb
-0001cc70: 612f 7472 6f75 626c 6573 686f 6f74 696e  a/troubleshootin
-0001cc80: 672f 6265 6570 626f 6f70 3137 342f 7072  g/beepboop174/pr
-0001cc90: 6f6a 6563 745f 666f 6c64 6572 2f6d 6572  oject_folder/mer
-0001cca0: 6765 2f54 7269 616c 2020 2020 2033 5f63  ge/Trial     3_c
-0001ccb0: 6c69 7070 6564 2e6d 7034 275d 0a23 0a23  lipped.mp4'].#.#
-0001ccc0: 2076 6964 656f 5f70 6174 6873 203d 205b   video_paths = [
-0001ccd0: 272f 5573 6572 732f 7369 6d6f 6e2f 4465  '/Users/simon/De
-0001cce0: 736b 746f 702f 656e 7673 2f73 696d 6261  sktop/envs/simba
-0001ccf0: 2f74 726f 7562 6c65 7368 6f6f 7469 6e67  /troubleshooting
-0001cd00: 2f62 6565 7062 6f6f 7031 3734 2f70 726f  /beepboop174/pro
-0001cd10: 6a65 6374 5f66 6f6c 6465 722f 7669 6465  ject_folder/vide
-0001cd20: 6f73 2f54 7269 616c 2020 2020 3130 2e6d  os/Trial    10.m
-0001cd30: 7034 272c 0a23 2020 2020 2020 2020 2020  p4',.#          
-0001cd40: 2020 2020 2020 272f 5573 6572 732f 7369        '/Users/si
-0001cd50: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
-0001cd60: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
-0001cd70: 6f6f 7469 6e67 2f62 6565 7062 6f6f 7031  ooting/beepboop1
-0001cd80: 3734 2f70 726f 6a65 6374 5f66 6f6c 6465  74/project_folde
-0001cd90: 722f 6d65 7267 652f 5472 6961 6c20 2020  r/merge/Trial   
-0001cda0: 2031 305f 636c 6970 7065 645f 6761 6e74   10_clipped_gant
-0001cdb0: 742e 6d70 3427 2c0a 2320 2020 2020 2020  t.mp4',.#       
-0001cdc0: 2020 2020 2020 2020 2027 2f55 7365 7273           '/Users
-0001cdd0: 2f73 696d 6f6e 2f44 6573 6b74 6f70 2f65  /simon/Desktop/e
-0001cde0: 6e76 732f 7369 6d62 612f 7472 6f75 626c  nvs/simba/troubl
-0001cdf0: 6573 686f 6f74 696e 672f 6265 6570 626f  eshooting/beepbo
-0001ce00: 6f70 3137 342f 7072 6f6a 6563 745f 666f  op174/project_fo
-0001ce10: 6c64 6572 2f6d 6572 6765 2f54 7269 616c  lder/merge/Trial
-0001ce20: 2020 2020 3130 5f63 6c69 7070 6564 5f6c      10_clipped_l
-0001ce30: 696e 652e 6d70 3427 2c0a 2320 2020 2020  ine.mp4',.#     
-0001ce40: 2020 2020 2020 2020 2020 2027 2f55 7365             '/Use
-0001ce50: 7273 2f73 696d 6f6e 2f44 6573 6b74 6f70  rs/simon/Desktop
-0001ce60: 2f65 6e76 732f 7369 6d62 612f 7472 6f75  /envs/simba/trou
-0001ce70: 626c 6573 686f 6f74 696e 672f 6265 6570  bleshooting/beep
-0001ce80: 626f 6f70 3137 342f 7072 6f6a 6563 745f  boop174/project_
-0001ce90: 666f 6c64 6572 2f6d 6572 6765 2f54 7269  folder/merge/Tri
-0001cea0: 616c 2020 2020 2033 5f63 6c69 7070 6564  al     3_clipped
-0001ceb0: 2e6d 7034 275d 0a23 0a23 2073 6176 655f  .mp4'].#.# save_
-0001cec0: 7061 7468 203d 2027 2f55 7365 7273 2f73  path = '/Users/s
-0001ced0: 696d 6f6e 2f44 6573 6b74 6f70 2f65 6e76  imon/Desktop/env
-0001cee0: 732f 7369 6d62 612f 7472 6f75 626c 6573  s/simba/troubles
-0001cef0: 686f 6f74 696e 672f 6265 6570 626f 6f70  hooting/beepboop
-0001cf00: 3137 342f 7072 6f6a 6563 745f 666f 6c64  174/project_fold
-0001cf10: 6572 2f6d 6572 6765 2f6f 7574 2e6d 7034  er/merge/out.mp4
-0001cf20: 270a 0a23 0a23 2076 6964 656f 5f70 6174  '..#.# video_pat
-0001cf30: 6873 203d 205b 272f 5573 6572 732f 7369  hs = ['/Users/si
-0001cf40: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
-0001cf50: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
-0001cf60: 6f6f 7469 6e67 2f62 6565 7062 6f6f 7031  ooting/beepboop1
-0001cf70: 3734 2f70 726f 6a65 6374 5f66 6f6c 6465  74/project_folde
-0001cf80: 722f 6672 616d 6573 2f6f 7574 7075 742f  r/frames/output/
-0001cf90: 6761 6e74 745f 706c 6f74 732f 5472 6961  gantt_plots/Tria
-0001cfa0: 6c20 2020 2031 302e 6d70 3427 2c0a 2320  l    10.mp4',.# 
-0001cfb0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0001cfc0: 2f55 7365 7273 2f73 696d 6f6e 2f44 6573  /Users/simon/Des
-0001cfd0: 6b74 6f70 2f65 6e76 732f 7369 6d62 612f  ktop/envs/simba/
-0001cfe0: 7472 6f75 626c 6573 686f 6f74 696e 672f  troubleshooting/
-0001cff0: 6265 6570 626f 6f70 3137 342f 7072 6f6a  beepboop174/proj
-0001d000: 6563 745f 666f 6c64 6572 2f76 6964 656f  ect_folder/video
-0001d010: 732f 5472 6961 6c20 2020 2031 302e 6d70  s/Trial    10.mp
-0001d020: 3427 2c0a 2320 2020 2020 2020 2020 2020  4',.#           
-0001d030: 2020 2020 2027 2f55 7365 7273 2f73 696d       '/Users/sim
-0001d040: 6f6e 2f44 6573 6b74 6f70 2f65 6e76 732f  on/Desktop/envs/
-0001d050: 7369 6d62 612f 7472 6f75 626c 6573 686f  simba/troublesho
-0001d060: 6f74 696e 672f 6265 6570 626f 6f70 3137  oting/beepboop17
-0001d070: 342f 7072 6f6a 6563 745f 666f 6c64 6572  4/project_folder
-0001d080: 2f66 7261 6d65 732f 6f75 7470 7574 2f6c  /frames/output/l
-0001d090: 696e 655f 706c 6f74 2f54 7269 616c 2020  ine_plot/Trial  
-0001d0a0: 2020 3130 2e6d 7034 272c 0a23 2020 2020    10.mp4',.#    
-0001d0b0: 2020 2020 2020 2020 2020 2020 272f 5573              '/Us
-0001d0c0: 6572 732f 7369 6d6f 6e2f 4465 736b 746f  ers/simon/Deskto
-0001d0d0: 702f 656e 7673 2f73 696d 6261 2f74 726f  p/envs/simba/tro
-0001d0e0: 7562 6c65 7368 6f6f 7469 6e67 2f62 6565  ubleshooting/bee
-0001d0f0: 7062 6f6f 7031 3734 2f70 726f 6a65 6374  pboop174/project
-0001d100: 5f66 6f6c 6465 722f 6672 616d 6573 2f6f  _folder/frames/o
-0001d110: 7574 7075 742f 6c69 6e65 5f70 6c6f 742f  utput/line_plot/
-0001d120: 5472 6961 6c20 2020 2020 332e 6d70 3427  Trial     3.mp4'
-0001d130: 5d0a 2320 7361 7665 5f70 6174 6820 3d20  ].# save_path = 
-0001d140: 272f 5573 6572 732f 7369 6d6f 6e2f 4465  '/Users/simon/De
-0001d150: 736b 746f 702f 656e 7673 2f73 696d 6261  sktop/envs/simba
-0001d160: 2f74 726f 7562 6c65 7368 6f6f 7469 6e67  /troubleshooting
-0001d170: 2f52 4154 5f4e 4f52 2f70 726f 6a65 6374  /RAT_NOR/project
-0001d180: 5f66 6f6c 6465 722f 7669 6465 6f73 2f74  _folder/videos/t
-0001d190: 6573 742f 6e65 772f 626c 616e 6b5f 7465  est/new/blank_te
-0001d1a0: 7374 2e6d 7034 270a 0a23 2076 6964 656f  st.mp4'..# video
-0001d1b0: 5f70 6174 6873 203d 205b 272f 5573 6572  _paths = ['/User
-0001d1c0: 732f 7369 6d6f 6e2f 4465 736b 746f 702f  s/simon/Desktop/
-0001d1d0: 656e 7673 2f73 696d 6261 2f74 726f 7562  envs/simba/troub
-0001d1e0: 6c65 7368 6f6f 7469 6e67 2f62 6565 7062  leshooting/beepb
-0001d1f0: 6f6f 7031 3734 2f70 726f 6a65 6374 5f66  oop174/project_f
-0001d200: 6f6c 6465 722f 7669 6465 6f73 2f54 7269  older/videos/Tri
-0001d210: 616c 2020 2020 3130 2e6d 7034 272c 0a23  al    10.mp4',.#
-0001d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d230: 272f 5573 6572 732f 7369 6d6f 6e2f 4465  '/Users/simon/De
-0001d240: 736b 746f 702f 656e 7673 2f73 696d 6261  sktop/envs/simba
-0001d250: 2f74 726f 7562 6c65 7368 6f6f 7469 6e67  /troubleshooting
-0001d260: 2f62 6565 7062 6f6f 7031 3734 2f70 726f  /beepboop174/pro
-0001d270: 6a65 6374 5f66 6f6c 6465 722f 6672 616d  ject_folder/fram
-0001d280: 6573 2f6f 7574 7075 742f 6c69 6e65 5f70  es/output/line_p
-0001d290: 6c6f 742f 5472 6961 6c20 2020 2031 302e  lot/Trial    10.
-0001d2a0: 6d70 3427 2c0a 2320 2020 2020 2020 2020  mp4',.#         
-0001d2b0: 2020 2020 2020 2027 2f55 7365 7273 2f73         '/Users/s
-0001d2c0: 696d 6f6e 2f44 6573 6b74 6f70 2f65 6e76  imon/Desktop/env
-0001d2d0: 732f 7369 6d62 612f 7472 6f75 626c 6573  s/simba/troubles
-0001d2e0: 686f 6f74 696e 672f 6265 6570 626f 6f70  hooting/beepboop
-0001d2f0: 3137 342f 7072 6f6a 6563 745f 666f 6c64  174/project_fold
-0001d300: 6572 2f66 7261 6d65 732f 6f75 7470 7574  er/frames/output
-0001d310: 2f6c 696e 655f 706c 6f74 2f54 7269 616c  /line_plot/Trial
-0001d320: 2020 2020 2033 2e6d 7034 275d 0a0a 2320       3.mp4']..# 
-0001d330: 6d69 7865 645f 6d6f 7361 6963 5f63 6f6e  mixed_mosaic_con
-0001d340: 6361 7465 6e61 746f 7228 7669 6465 6f5f  catenator(video_
-0001d350: 7061 7468 733d 7669 6465 6f5f 7061 7468  paths=video_path
-0001d360: 732c 2073 6176 655f 7061 7468 3d73 6176  s, save_path=sav
-0001d370: 655f 7061 7468 2c20 6770 753d 4661 6c73  e_path, gpu=Fals
-0001d380: 652c 2076 6572 626f 7365 3d54 7275 6529  e, verbose=True)
-0001d390: 0a                                       .
+0000ce00: 3c20 3129 0a20 2020 2029 3a0a 2020 2020  < 1).    ):.    
+0000ce10: 2020 2020 7261 6973 6520 436f 756e 7445      raise CountE
+0000ce20: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+0000ce30: 2020 6d73 673d 2243 524f 5020 4641 494c    msg="CROP FAIL
+0000ce40: 4544 3a20 4361 6e6e 6f74 2075 7365 206e  ED: Cannot use n
+0000ce50: 6567 6174 6976 6520 6372 6f70 2063 6f6f  egative crop coo
+0000ce60: 7264 696e 6174 6573 2e22 2c0a 2020 2020  rdinates.",.    
+0000ce70: 2020 2020 2020 2020 736f 7572 6365 3d63          source=c
+0000ce80: 726f 705f 6d75 6c74 6970 6c65 5f76 6964  rop_multiple_vid
+0000ce90: 656f 732e 5f5f 6e61 6d65 5f5f 2c0a 2020  eos.__name__,.  
+0000cea0: 2020 2020 2020 290a 2020 2020 7469 6d65        ).    time
+0000ceb0: 7220 3d20 5369 6d62 6154 696d 6572 2873  r = SimbaTimer(s
+0000cec0: 7461 7274 3d54 7275 6529 0a20 2020 2066  tart=True).    f
+0000ced0: 6f72 2066 696c 655f 636e 742c 2066 696c  or file_cnt, fil
+0000cee0: 655f 7061 7468 2069 6e20 656e 756d 6572  e_path in enumer
+0000cef0: 6174 6528 7669 6465 6f5f 7061 7468 7329  ate(video_paths)
+0000cf00: 3a0a 2020 2020 2020 2020 7669 6465 6f5f  :.        video_
+0000cf10: 7469 6d65 7220 3d20 5369 6d62 6154 696d  timer = SimbaTim
+0000cf20: 6572 2873 7461 7274 3d54 7275 6529 0a20  er(start=True). 
+0000cf30: 2020 2020 2020 2064 6972 5f6e 616d 652c         dir_name,
+0000cf40: 2066 696c 655f 6e61 6d65 2c20 6578 7420   file_name, ext 
+0000cf50: 3d20 6765 745f 666e 5f65 7874 2866 696c  = get_fn_ext(fil
+0000cf60: 6570 6174 683d 6669 6c65 5f70 6174 6829  epath=file_path)
+0000cf70: 0a20 2020 2020 2020 2070 7269 6e74 2866  .        print(f
+0000cf80: 2243 726f 7070 696e 6720 7669 6465 6f20  "Cropping video 
+0000cf90: 7b66 696c 655f 6e61 6d65 7d2e 2e2e 2229  {file_name}...")
+0000cfa0: 0a20 2020 2020 2020 2076 6964 656f 5f6d  .        video_m
+0000cfb0: 6574 615f 6461 7461 203d 2067 6574 5f76  eta_data = get_v
+0000cfc0: 6964 656f 5f6d 6574 615f 6461 7461 2866  ideo_meta_data(f
+0000cfd0: 696c 655f 7061 7468 290a 2020 2020 2020  ile_path).      
+0000cfe0: 2020 6966 2028 726f 695f 7365 6c65 6374    if (roi_select
+0000cff0: 6f72 2e62 6f74 746f 6d5f 7269 6768 745b  or.bottom_right[
+0000d000: 305d 203e 2076 6964 656f 5f6d 6574 615f  0] > video_meta_
+0000d010: 6461 7461 5b22 7769 6474 6822 5d29 206f  data["width"]) o
+0000d020: 7220 280a 2020 2020 2020 2020 2020 2020  r (.            
+0000d030: 726f 695f 7365 6c65 6374 6f72 2e62 6f74  roi_selector.bot
+0000d040: 746f 6d5f 7269 6768 745b 315d 203e 2076  tom_right[1] > v
+0000d050: 6964 656f 5f6d 6574 615f 6461 7461 5b22  ideo_meta_data["
+0000d060: 6865 6967 6874 225d 0a20 2020 2020 2020  height"].       
+0000d070: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+0000d080: 7261 6973 6520 496e 7661 6c69 6449 6e70  raise InvalidInp
+0000d090: 7574 4572 726f 7228 0a20 2020 2020 2020  utError(.       
+0000d0a0: 2020 2020 2020 2020 206d 7367 3d66 2743           msg=f'C
+0000d0b0: 616e 6e6f 7420 6372 6f70 2076 6964 656f  annot crop video
+0000d0c0: 207b 6669 6c65 5f6e 616d 657d 206f 6620   {file_name} of 
+0000d0d0: 7369 7a65 207b 7669 6465 6f5f 6d65 7461  size {video_meta
+0000d0e0: 5f64 6174 615b 2272 6573 6f6c 7574 696f  _data["resolutio
+0000d0f0: 6e5f 7374 7222 5d7d 2061 7420 6c6f 6361  n_str"]} at loca
+0000d100: 7469 6f6e 2074 6f70 206c 6566 743a 207b  tion top left: {
+0000d110: 726f 695f 7365 6c65 6374 6f72 2e74 6f70  roi_selector.top
+0000d120: 5f6c 6566 747d 2c20 626f 7474 6f6d 2072  _left}, bottom r
+0000d130: 6967 6874 3a20 7b72 6f69 5f73 656c 6563  ight: {roi_selec
+0000d140: 746f 722e 626f 7474 6f6d 5f72 6967 6874  tor.bottom_right
+0000d150: 7d27 2c0a 2020 2020 2020 2020 2020 2020  }',.            
+0000d160: 2020 2020 736f 7572 6365 3d63 726f 705f      source=crop_
+0000d170: 6d75 6c74 6970 6c65 5f76 6964 656f 732e  multiple_videos.
+0000d180: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
+0000d190: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000d1a0: 7361 7665 5f70 6174 6820 3d20 6f73 2e70  save_path = os.p
+0000d1b0: 6174 682e 6a6f 696e 286f 7574 7075 745f  ath.join(output_
+0000d1c0: 7061 7468 2c20 6669 6c65 5f6e 616d 6520  path, file_name 
+0000d1d0: 2b20 225f 6372 6f70 7065 642e 6d70 3422  + "_cropped.mp4"
+0000d1e0: 290a 2020 2020 2020 2020 6966 2067 7075  ).        if gpu
+0000d1f0: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+0000d200: 6d6d 616e 6420 3d20 6627 6666 6d70 6567  mmand = f'ffmpeg
+0000d210: 202d 6877 6163 6365 6c20 6175 746f 202d   -hwaccel auto -
+0000d220: 633a 7620 6832 3634 5f63 7576 6964 202d  c:v h264_cuvid -
+0000d230: 6920 227b 6669 6c65 5f70 6174 687d 2220  i "{file_path}" 
+0000d240: 2d76 6620 2263 726f 703d 7b72 6f69 5f73  -vf "crop={roi_s
+0000d250: 656c 6563 746f 722e 7769 6474 687d 3a7b  elector.width}:{
+0000d260: 726f 695f 7365 6c65 6374 6f72 2e68 6569  roi_selector.hei
+0000d270: 6768 747d 3a7b 726f 695f 7365 6c65 6374  ght}:{roi_select
+0000d280: 6f72 2e74 6f70 5f6c 6566 745b 305d 7d3a  or.top_left[0]}:
+0000d290: 7b72 6f69 5f73 656c 6563 746f 722e 746f  {roi_selector.to
+0000d2a0: 705f 6c65 6674 5b31 5d7d 2220 2d63 3a76  p_left[1]}" -c:v
+0000d2b0: 2068 3236 345f 6e76 656e 6320 2d63 3a61   h264_nvenc -c:a
+0000d2c0: 2063 6f70 7920 227b 7361 7665 5f70 6174   copy "{save_pat
+0000d2d0: 687d 2220 2d79 270a 2020 2020 2020 2020  h}" -y'.        
+0000d2e0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000d2f0: 2020 636f 6d6d 616e 6420 3d20 6627 6666    command = f'ff
+0000d300: 6d70 6567 202d 6920 227b 6669 6c65 5f70  mpeg -i "{file_p
+0000d310: 6174 687d 2220 2d76 6620 2263 726f 703d  ath}" -vf "crop=
+0000d320: 7b72 6f69 5f73 656c 6563 746f 722e 7769  {roi_selector.wi
+0000d330: 6474 687d 3a7b 726f 695f 7365 6c65 6374  dth}:{roi_select
+0000d340: 6f72 2e68 6569 6768 747d 3a7b 726f 695f  or.height}:{roi_
+0000d350: 7365 6c65 6374 6f72 2e74 6f70 5f6c 6566  selector.top_lef
+0000d360: 745b 305d 7d3a 7b72 6f69 5f73 656c 6563  t[0]}:{roi_selec
+0000d370: 746f 722e 746f 705f 6c65 6674 5b31 5d7d  tor.top_left[1]}
+0000d380: 2220 2d63 3a76 206c 6962 7832 3634 202d  " -c:v libx264 -
+0000d390: 6372 6620 3137 202d 633a 6120 636f 7079  crf 17 -c:a copy
+0000d3a0: 2022 7b73 6176 655f 7061 7468 7d22 202d   "{save_path}" -
+0000d3b0: 7927 0a20 2020 2020 2020 2073 7562 7072  y'.        subpr
+0000d3c0: 6f63 6573 732e 6361 6c6c 2863 6f6d 6d61  ocess.call(comma
+0000d3d0: 6e64 2c20 7368 656c 6c3d 5472 7565 290a  nd, shell=True).
+0000d3e0: 2020 2020 2020 2020 7669 6465 6f5f 7469          video_ti
+0000d3f0: 6d65 722e 7374 6f70 5f74 696d 6572 2829  mer.stop_timer()
+0000d400: 0a20 2020 2020 2020 2070 7269 6e74 280a  .        print(.
+0000d410: 2020 2020 2020 2020 2020 2020 6622 5669              f"Vi
+0000d420: 6465 6f20 7b66 696c 655f 6e61 6d65 7d20  deo {file_name} 
+0000d430: 6372 6f70 7065 6420 2856 6964 656f 207b  cropped (Video {
+0000d440: 6669 6c65 5f63 6e74 2b31 7d2f 7b6c 656e  file_cnt+1}/{len
+0000d450: 2876 6964 656f 5f70 6174 6873 297d 2c20  (video_paths)}, 
+0000d460: 656c 6170 7365 6420 7469 6d65 3a20 7b76  elapsed time: {v
+0000d470: 6964 656f 5f74 696d 6572 2e65 6c61 7073  ideo_timer.elaps
+0000d480: 6564 5f74 696d 655f 7374 727d 2922 0a20  ed_time_str})". 
+0000d490: 2020 2020 2020 2029 0a20 2020 2074 696d         ).    tim
+0000d4a0: 6572 2e73 746f 705f 7469 6d65 7228 290a  er.stop_timer().
+0000d4b0: 2020 2020 7374 646f 7574 5f73 7563 6365      stdout_succe
+0000d4c0: 7373 280a 2020 2020 2020 2020 6d73 673d  ss(.        msg=
+0000d4d0: 6622 7b73 7472 286c 656e 2876 6964 656f  f"{str(len(video
+0000d4e0: 5f70 6174 6873 2929 7d20 7669 6465 6f73  _paths))} videos
+0000d4f0: 2063 726f 7070 6564 2061 6e64 2073 6176   cropped and sav
+0000d500: 6564 2069 6e20 7b64 6972 6563 746f 7279  ed in {directory
+0000d510: 5f70 6174 687d 2064 6972 6563 746f 7279  _path} directory
+0000d520: 222c 0a20 2020 2020 2020 2065 6c61 7073  ",.        elaps
+0000d530: 6564 5f74 696d 653d 7469 6d65 722e 656c  ed_time=timer.el
+0000d540: 6170 7365 645f 7469 6d65 5f73 7472 2c0a  apsed_time_str,.
+0000d550: 2020 2020 2020 2020 736f 7572 6365 3d63          source=c
+0000d560: 726f 705f 6d75 6c74 6970 6c65 5f76 6964  rop_multiple_vid
+0000d570: 656f 732e 5f5f 6e61 6d65 5f5f 2c0a 2020  eos.__name__,.  
+0000d580: 2020 290a 0a0a 2320 5f20 3d20 6372 6f70    )...# _ = crop
+0000d590: 5f6d 756c 7469 706c 655f 7669 6465 6f73  _multiple_videos
+0000d5a0: 2864 6972 6563 746f 7279 5f70 6174 683d  (directory_path=
+0000d5b0: 272f 5573 6572 732f 7369 6d6f 6e2f 4465  '/Users/simon/De
+0000d5c0: 736b 746f 702f 656e 7673 2f74 726f 7562  sktop/envs/troub
+0000d5d0: 6c65 7368 6f6f 7469 6e67 2f74 776f 5f62  leshooting/two_b
+0000d5e0: 6c61 636b 5f61 6e69 6d61 6c73 5f31 3462  lack_animals_14b
+0000d5f0: 702f 7669 6465 6f73 272c 206f 7574 7075  p/videos', outpu
+0000d600: 745f 7061 7468 3d27 2f55 7365 7273 2f73  t_path='/Users/s
+0000d610: 696d 6f6e 2f44 6573 6b74 6f70 2f65 6e76  imon/Desktop/env
+0000d620: 732f 7472 6f75 626c 6573 686f 6f74 696e  s/troubleshootin
+0000d630: 672f 7477 6f5f 626c 6163 6b5f 616e 696d  g/two_black_anim
+0000d640: 616c 735f 3134 6270 2f74 6573 742f 7465  als_14bp/test/te
+0000d650: 7374 2729 0a0a 0a64 6566 2066 7261 6d65  st')...def frame
+0000d660: 735f 746f 5f6d 6f76 6965 280a 2020 2020  s_to_movie(.    
+0000d670: 6469 7265 6374 6f72 793a 2055 6e69 6f6e  directory: Union
+0000d680: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
+0000d690: 655d 2c0a 2020 2020 6670 733a 2069 6e74  e],.    fps: int
+0000d6a0: 2c0a 2020 2020 6269 7472 6174 653a 2069  ,.    bitrate: i
+0000d6b0: 6e74 2c0a 2020 2020 696d 675f 666f 726d  nt,.    img_form
+0000d6c0: 6174 3a20 7374 722c 0a20 2020 2067 7075  at: str,.    gpu
+0000d6d0: 3a20 4f70 7469 6f6e 616c 5b62 6f6f 6c5d  : Optional[bool]
+0000d6e0: 203d 2046 616c 7365 2c0a 2920 2d3e 204e   = False,.) -> N
+0000d6f0: 6f6e 653a 0a20 2020 2022 2222 0a20 2020  one:.    """.   
+0000d700: 204d 6572 6765 2061 6c6c 2069 6d61 6765   Merge all image
+0000d710: 2066 696c 6573 2069 6e20 6120 666f 6c64   files in a fold
+0000d720: 6572 2074 6f20 6120 6d70 3420 7669 6465  er to a mp4 vide
+0000d730: 6f20 6669 6c65 2e20 5669 6465 6f20 6669  o file. Video fi
+0000d740: 6c65 2069 7320 7374 6f72 6564 2069 6e20  le is stored in 
+0000d750: 7468 6520 7361 6d65 2064 6972 6563 746f  the same directo
+0000d760: 7279 2061 7320 7468 650a 2020 2020 696e  ry as the.    in
+0000d770: 7075 7420 6469 7265 6374 6f72 7920 7375  put directory su
+0000d780: 622d 666f 6c64 6572 2e0a 0a20 2020 202e  b-folder...    .
+0000d790: 2e20 6e6f 7465 3a3a 0a20 2020 2020 2020  . note::.       
+0000d7a0: 5468 6520 496d 6167 6520 6669 6c65 7320  The Image files 
+0000d7b0: 6861 7665 2074 6f20 6861 7665 206f 7264  have to have ord
+0000d7c0: 6572 6564 206e 756d 6572 6963 616c 206e  ered numerical n
+0000d7d0: 616d 6573 2065 2e67 2e2c 2060 6031 2e70  ames e.g., ``1.p
+0000d7e0: 6e67 6060 2c20 6060 322e 706e 6760 6020  ng``, ``2.png`` 
+0000d7f0: 6574 632e 2e2e 0a0a 2020 2020 3a70 6172  etc.....    :par
+0000d800: 616d 6574 6572 2073 7472 2064 6972 6563  ameter str direc
+0000d810: 746f 7279 3a20 4469 7265 6374 6f72 7920  tory: Directory 
+0000d820: 636f 6e74 6169 6e69 6e67 2074 6865 2069  containing the i
+0000d830: 6d61 6765 732e 0a20 2020 203a 7061 7261  mages..    :para
+0000d840: 6d65 7465 7220 696e 7420 6670 733a 2054  meter int fps: T
+0000d850: 6865 2066 7261 6d65 2072 6174 6520 6f66  he frame rate of
+0000d860: 2074 6865 206f 7574 7075 7420 7669 6465   the output vide
+0000d870: 6f2e 0a20 2020 203a 7061 7261 6d65 7465  o..    :paramete
+0000d880: 7220 696e 7420 6269 7472 6174 653a 2054  r int bitrate: T
+0000d890: 6865 2062 6974 7261 7465 206f 6620 7468  he bitrate of th
+0000d8a0: 6520 6f75 7470 7574 2076 6964 656f 2028  e output video (
+0000d8b0: 652e 672e 2c20 3332 3030 3029 2e0a 2020  e.g., 32000)..  
+0000d8c0: 2020 3a70 6172 616d 6574 6572 2073 7472    :parameter str
+0000d8d0: 2069 6d67 5f66 6f72 6d61 743a 2054 6865   img_format: The
+0000d8e0: 2066 6f72 6d61 7420 6f66 2074 6865 2069   format of the i
+0000d8f0: 6e70 7574 2069 6d61 6765 2066 696c 6573  nput image files
+0000d900: 2028 652e 672e 2c20 6060 706e 6760 6029   (e.g., ``png``)
+0000d910: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
+0000d920: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
+0000d930: 6770 753a 2049 6620 5472 7565 2c20 7573  gpu: If True, us
+0000d940: 6520 4e56 4944 4541 2047 5055 2063 6f64  e NVIDEA GPU cod
+0000d950: 6563 732e 2044 6566 6175 6c74 2046 616c  ecs. Default Fal
+0000d960: 7365 2e0a 0a20 2020 203a 6578 616d 706c  se...    :exampl
+0000d970: 653a 0a20 2020 203e 3e3e 205f 203d 2066  e:.    >>> _ = f
+0000d980: 7261 6d65 735f 746f 5f6d 6f76 6965 2864  rames_to_movie(d
+0000d990: 6972 6563 746f 7279 5f70 6174 683d 2770  irectory_path='p
+0000d9a0: 726f 6a65 6374 5f66 6f6c 6465 722f 7669  roject_folder/vi
+0000d9b0: 6465 6f5f 696d 6727 2c20 6670 733d 3135  deo_img', fps=15
+0000d9c0: 2c20 6269 7472 6174 653d 3332 3030 302c  , bitrate=32000,
+0000d9d0: 2069 6d67 5f66 6f72 6d61 743d 2770 6e67   img_format='png
+0000d9e0: 2729 0a20 2020 2022 2222 0a0a 2020 2020  ').    """..    
+0000d9f0: 6368 6563 6b5f 6666 6d70 6567 5f61 7661  check_ffmpeg_ava
+0000da00: 696c 6162 6c65 2872 6169 7365 5f65 7272  ilable(raise_err
+0000da10: 6f72 3d54 7275 6529 0a20 2020 2069 6620  or=True).    if 
+0000da20: 6770 7520 616e 6420 6e6f 7420 6368 6563  gpu and not chec
+0000da30: 6b5f 6e76 6964 6561 5f67 7075 5f61 7661  k_nvidea_gpu_ava
+0000da40: 696c 6162 6c65 2829 3a0a 2020 2020 2020  ilable():.      
+0000da50: 2020 7261 6973 6520 4646 4d50 4547 436f    raise FFMPEGCo
+0000da60: 6465 6347 5055 4572 726f 7228 0a20 2020  decGPUError(.   
+0000da70: 2020 2020 2020 2020 206d 7367 3d22 4e56           msg="NV
+0000da80: 4944 4541 2047 5055 206e 6f74 2061 7661  IDEA GPU not ava
+0000da90: 696c 6162 6c65 2028 6173 2065 7661 6c75  ilable (as evalu
+0000daa0: 6174 6564 2062 7920 6e76 6964 6561 2d73  ated by nvidea-s
+0000dab0: 6d69 2072 6574 7572 6e69 6e67 204e 6f6e  mi returning Non
+0000dac0: 6522 2c0a 2020 2020 2020 2020 2020 2020  e",.            
+0000dad0: 736f 7572 6365 3d66 7261 6d65 735f 746f  source=frames_to
+0000dae0: 5f6d 6f76 6965 2e5f 5f6e 616d 655f 5f2c  _movie.__name__,
+0000daf0: 0a20 2020 2020 2020 2029 0a20 2020 2069  .        ).    i
+0000db00: 6620 6e6f 7420 6f73 2e70 6174 682e 6973  f not os.path.is
+0000db10: 6469 7228 6469 7265 6374 6f72 7929 3a0a  dir(directory):.
+0000db20: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
+0000db30: 7444 6972 6563 746f 7279 4572 726f 7228  tDirectoryError(
+0000db40: 0a20 2020 2020 2020 2020 2020 206d 7367  .            msg
+0000db50: 3d22 5349 4d42 4120 4552 524f 523a 207b  ="SIMBA ERROR: {
+0000db60: 7d20 6973 206e 6f74 2061 2076 616c 6964  } is not a valid
+0000db70: 2064 6972 6563 746f 7279 222e 666f 726d   directory".form
+0000db80: 6174 2864 6972 6563 746f 7279 292c 0a20  at(directory),. 
+0000db90: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
+0000dba0: 653d 6672 616d 6573 5f74 6f5f 6d6f 7669  e=frames_to_movi
+0000dbb0: 652e 5f5f 6e61 6d65 5f5f 2c0a 2020 2020  e.__name__,.    
+0000dbc0: 2020 2020 290a 2020 2020 6368 6563 6b5f      ).    check_
+0000dbd0: 696e 7428 6e61 6d65 3d22 4650 5322 2c20  int(name="FPS", 
+0000dbe0: 7661 6c75 653d 6670 732c 206d 696e 5f76  value=fps, min_v
+0000dbf0: 616c 7565 3d31 290a 2020 2020 6368 6563  alue=1).    chec
+0000dc00: 6b5f 696e 7428 6e61 6d65 3d22 4249 5452  k_int(name="BITR
+0000dc10: 4154 4522 2c20 7661 6c75 653d 6269 7472  ATE", value=bitr
+0000dc20: 6174 6529 0a20 2020 2066 696c 655f 7061  ate).    file_pa
+0000dc30: 7468 735f 696e 5f66 6f6c 6465 7220 3d20  ths_in_folder = 
+0000dc40: 5b66 2066 6f72 2066 2069 6e20 676c 6f62  [f for f in glob
+0000dc50: 2e67 6c6f 6228 6469 7265 6374 6f72 7920  .glob(directory 
+0000dc60: 2b20 222f 2a22 2920 6966 206f 732e 7061  + "/*") if os.pa
+0000dc70: 7468 2e69 7366 696c 6528 6629 5d0a 2020  th.isfile(f)].  
+0000dc80: 2020 696d 675f 7061 7468 735f 696e 5f66    img_paths_in_f
+0000dc90: 6f6c 6465 7220 3d20 5b0a 2020 2020 2020  older = [.      
+0000dca0: 2020 7820 666f 7220 7820 696e 2066 696c    x for x in fil
+0000dcb0: 655f 7061 7468 735f 696e 5f66 6f6c 6465  e_paths_in_folde
+0000dcc0: 7220 6966 2050 6174 6828 7829 2e73 7566  r if Path(x).suf
+0000dcd0: 6669 785b 313a 5d20 3d3d 2069 6d67 5f66  fix[1:] == img_f
+0000dce0: 6f72 6d61 740a 2020 2020 5d0a 2020 2020  ormat.    ].    
+0000dcf0: 6966 206c 656e 2869 6d67 5f70 6174 6873  if len(img_paths
+0000dd00: 5f69 6e5f 666f 6c64 6572 2920 3c20 313a  _in_folder) < 1:
+0000dd10: 0a20 2020 2020 2020 2072 6169 7365 204e  .        raise N
+0000dd20: 6f46 696c 6573 466f 756e 6445 7272 6f72  oFilesFoundError
+0000dd30: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
+0000dd40: 673d 2253 494d 4241 2045 5252 4f52 3a20  g="SIMBA ERROR: 
+0000dd50: 5a65 726f 2069 6d61 6765 7320 6f66 2066  Zero images of f
+0000dd60: 696c 652d 7479 7065 207b 7d20 666f 756e  ile-type {} foun
+0000dd70: 6420 696e 207b 7d20 6469 7265 6374 6f72  d in {} director
+0000dd80: 7922 2e66 6f72 6d61 7428 0a20 2020 2020  y".format(.     
+0000dd90: 2020 2020 2020 2020 2020 2069 6d67 5f66             img_f
+0000dda0: 6f72 6d61 742c 2064 6972 6563 746f 7279  ormat, directory
+0000ddb0: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
+0000ddc0: 2020 2020 2020 2020 2020 2020 736f 7572              sour
+0000ddd0: 6365 3d66 7261 6d65 735f 746f 5f6d 6f76  ce=frames_to_mov
+0000dde0: 6965 2e5f 5f6e 616d 655f 5f2c 0a20 2020  ie.__name__,.   
+0000ddf0: 2020 2020 2029 0a20 2020 2069 6d67 203d       ).    img =
+0000de00: 2063 7632 2e69 6d72 6561 6428 696d 675f   cv2.imread(img_
+0000de10: 7061 7468 735f 696e 5f66 6f6c 6465 725b  paths_in_folder[
+0000de20: 305d 290a 2020 2020 696d 675f 682c 2069  0]).    img_h, i
+0000de30: 6d67 5f77 203d 2069 6e74 2869 6d67 2e73  mg_w = int(img.s
+0000de40: 6861 7065 5b30 5d29 2c20 696e 7428 696d  hape[0]), int(im
+0000de50: 672e 7368 6170 655b 315d 290a 2020 2020  g.shape[1]).    
+0000de60: 6666 6d70 6567 5f66 6e20 3d20 6f73 2e70  ffmpeg_fn = os.p
+0000de70: 6174 682e 6a6f 696e 2864 6972 6563 746f  ath.join(directo
+0000de80: 7279 2c20 2225 642e 7b7d 222e 666f 726d  ry, "%d.{}".form
+0000de90: 6174 2869 6d67 5f66 6f72 6d61 7429 290a  at(img_format)).
+0000dea0: 2020 2020 7361 7665 5f70 6174 6820 3d20      save_path = 
+0000deb0: 6f73 2e70 6174 682e 6a6f 696e 280a 2020  os.path.join(.  
+0000dec0: 2020 2020 2020 6f73 2e70 6174 682e 6469        os.path.di
+0000ded0: 726e 616d 6528 6469 7265 6374 6f72 7929  rname(directory)
+0000dee0: 2c20 6f73 2e70 6174 682e 6261 7365 6e61  , os.path.basena
+0000def0: 6d65 2864 6972 6563 746f 7279 2920 2b20  me(directory) + 
+0000df00: 222e 6d70 3422 0a20 2020 2029 0a20 2020  ".mp4".    ).   
+0000df10: 2069 6620 6770 753a 0a20 2020 2020 2020   if gpu:.       
+0000df20: 2063 6f6d 6d61 6e64 203d 2066 2766 666d   command = f'ffm
+0000df30: 7065 6720 2d79 202d 7220 7b66 7073 7d20  peg -y -r {fps} 
+0000df40: 2d66 2069 6d61 6765 3220 2d73 207b 696d  -f image2 -s {im
+0000df50: 675f 687d 787b 696d 675f 777d 202d 6920  g_h}x{img_w} -i 
+0000df60: 227b 6666 6d70 6567 5f66 6e7d 2220 2d63  "{ffmpeg_fn}" -c
+0000df70: 3a76 2068 3236 345f 6e76 656e 6320 2d62  :v h264_nvenc -b
+0000df80: 3a76 207b 6269 7472 6174 657d 6b20 227b  :v {bitrate}k "{
+0000df90: 7361 7665 5f70 6174 687d 2220 2d79 270a  save_path}" -y'.
+0000dfa0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000dfb0: 2020 636f 6d6d 616e 6420 3d20 6627 6666    command = f'ff
+0000dfc0: 6d70 6567 202d 7920 2d72 207b 6670 737d  mpeg -y -r {fps}
+0000dfd0: 202d 6620 696d 6167 6532 202d 7320 7b69   -f image2 -s {i
+0000dfe0: 6d67 5f68 7d78 7b69 6d67 5f77 7d20 2d69  mg_h}x{img_w} -i
+0000dff0: 2022 7b66 666d 7065 675f 666e 7d22 202d   "{ffmpeg_fn}" -
+0000e000: 7663 6f64 6563 206c 6962 7832 3634 202d  vcodec libx264 -
+0000e010: 6220 7b62 6974 7261 7465 7d6b 2022 7b73  b {bitrate}k "{s
+0000e020: 6176 655f 7061 7468 7d22 202d 7927 0a20  ave_path}" -y'. 
+0000e030: 2020 2070 7269 6e74 280a 2020 2020 2020     print(.      
+0000e040: 2020 6622 4372 6561 7469 6e67 207b 6f73    f"Creating {os
+0000e050: 2e70 6174 682e 6261 7365 6e61 6d65 2873  .path.basename(s
+0000e060: 6176 655f 7061 7468 297d 2066 726f 6d20  ave_path)} from 
+0000e070: 7b6c 656e 2869 6d67 5f70 6174 6873 5f69  {len(img_paths_i
+0000e080: 6e5f 666f 6c64 6572 297d 2069 6d61 6765  n_folder)} image
+0000e090: 732e 2e2e 220a 2020 2020 290a 2020 2020  s...".    ).    
+0000e0a0: 7375 6270 726f 6365 7373 2e63 616c 6c28  subprocess.call(
+0000e0b0: 636f 6d6d 616e 642c 2073 6865 6c6c 3d54  command, shell=T
+0000e0c0: 7275 6529 0a20 2020 2073 7464 6f75 745f  rue).    stdout_
+0000e0d0: 7375 6363 6573 7328 6d73 673d 6622 5669  success(msg=f"Vi
+0000e0e0: 6465 6f20 6372 6561 7465 6420 6174 207b  deo created at {
+0000e0f0: 7361 7665 5f70 6174 687d 222c 2073 6f75  save_path}", sou
+0000e100: 7263 653d 6672 616d 6573 5f74 6f5f 6d6f  rce=frames_to_mo
+0000e110: 7669 652e 5f5f 6e61 6d65 5f5f 290a 0a0a  vie.__name__)...
+0000e120: 2320 5f20 3d20 6672 616d 6573 5f74 6f5f  # _ = frames_to_
+0000e130: 6d6f 7669 6528 6469 7265 6374 6f72 793d  movie(directory=
+0000e140: 272f 5573 6572 732f 7369 6d6f 6e2f 4465  '/Users/simon/De
+0000e150: 736b 746f 702f 656e 7673 2f73 696d 6261  sktop/envs/simba
+0000e160: 2f74 726f 7562 6c65 7368 6f6f 7469 6e67  /troubleshooting
+0000e170: 2f6d 6f75 7365 5f6f 7065 6e5f 6669 656c  /mouse_open_fiel
+0000e180: 642f 7072 6f6a 6563 745f 666f 6c64 6572  d/project_folder
+0000e190: 2f76 6964 656f 732f 5349 5f44 4159 335f  /videos/SI_DAY3_
+0000e1a0: 3330 385f 4344 315f 5052 4553 454e 545f  308_CD1_PRESENT_
+0000e1b0: 646f 776e 7361 6d70 6c65 6427 2c20 6670  downsampled', fp
+0000e1c0: 733d 3135 2c20 6269 7472 6174 653d 3332  s=15, bitrate=32
+0000e1d0: 3030 302c 2069 6d67 5f66 6f72 6d61 743d  000, img_format=
+0000e1e0: 2770 6e67 2729 0a0a 0a64 6566 2076 6964  'png')...def vid
+0000e1f0: 656f 5f63 6f6e 6361 7465 6e61 746f 7228  eo_concatenator(
+0000e200: 0a20 2020 2076 6964 656f 5f6f 6e65 5f70  .    video_one_p
+0000e210: 6174 683a 2055 6e69 6f6e 5b73 7472 2c20  ath: Union[str, 
+0000e220: 6f73 2e50 6174 684c 696b 655d 2c0a 2020  os.PathLike],.  
+0000e230: 2020 7669 6465 6f5f 7477 6f5f 7061 7468    video_two_path
+0000e240: 3a20 556e 696f 6e5b 7374 722c 206f 732e  : Union[str, os.
+0000e250: 5061 7468 4c69 6b65 5d2c 0a20 2020 2072  PathLike],.    r
+0000e260: 6573 6f6c 7574 696f 6e3a 2055 6e69 6f6e  esolution: Union
+0000e270: 5b69 6e74 2c20 7374 725d 2c0a 2020 2020  [int, str],.    
+0000e280: 686f 7269 7a6f 6e74 616c 3a20 626f 6f6c  horizontal: bool
+0000e290: 2c0a 2020 2020 6770 753a 204f 7074 696f  ,.    gpu: Optio
+0000e2a0: 6e61 6c5b 626f 6f6c 5d20 3d20 4661 6c73  nal[bool] = Fals
+0000e2b0: 652c 0a29 202d 3e20 4e6f 6e65 3a0a 2020  e,.) -> None:.  
+0000e2c0: 2020 2222 220a 2020 2020 436f 6e63 6174    """.    Concat
+0000e2d0: 656e 6174 6520 7477 6f20 7669 6465 6f73  enate two videos
+0000e2e0: 2074 6f20 6120 7369 6e67 6c65 2076 6964   to a single vid
+0000e2f0: 656f 0a0a 2020 2020 3a70 6172 616d 2073  eo..    :param s
+0000e300: 7472 2076 6964 656f 5f6f 6e65 5f70 6174  tr video_one_pat
+0000e310: 683a 2050 6174 6820 746f 2074 6865 2066  h: Path to the f
+0000e320: 6972 7374 2076 6964 656f 2069 6e20 7468  irst video in th
+0000e330: 6520 636f 6e63 6174 656e 6174 6564 2076  e concatenated v
+0000e340: 6964 656f 0a20 2020 203a 7061 7261 6d20  ideo.    :param 
+0000e350: 7374 7220 7669 6465 6f5f 7477 6f5f 7061  str video_two_pa
+0000e360: 7468 3a20 5061 7468 2074 6f20 7468 6520  th: Path to the 
+0000e370: 7365 636f 6e64 2076 6964 656f 2069 6e20  second video in 
+0000e380: 7468 6520 636f 6e63 6174 656e 6174 6564  the concatenated
+0000e390: 2076 6964 656f 0a20 2020 203a 7061 7261   video.    :para
+0000e3a0: 6d20 696e 7420 6f72 2073 7472 2072 6573  m int or str res
+0000e3b0: 6f6c 7574 696f 6e3a 2049 6620 7374 722c  olution: If str,
+0000e3c0: 2074 6865 6e20 7468 6520 6e61 6d65 206f   then the name o
+0000e3d0: 6620 7468 6520 7669 6465 6f20 7768 6963  f the video whic
+0000e3e0: 6820 7265 736f 6c75 7469 6f6e 2079 6f75  h resolution you
+0000e3f0: 2077 616e 7420 746f 2072 6574 6169 6e2e   want to retain.
+0000e400: 2045 2e67 2e2c 2060 5669 6465 6f5f 3160   E.g., `Video_1`
+0000e410: 2e20 456c 7365 2069 6e74 2c20 7265 7072  . Else int, repr
+0000e420: 6573 656e 7469 6e67 2074 6865 2076 6964  esenting the vid
+0000e430: 656f 2077 6964 7468 2028 6966 2076 6572  eo width (if ver
+0000e440: 7469 6361 6c20 636f 6e63 6174 2920 6f72  tical concat) or
+0000e450: 2068 6569 6768 7420 2869 6620 686f 7269   height (if hori
+0000e460: 7a6f 6e74 616c 2063 6f6e 6361 7429 2e20  zontal concat). 
+0000e470: 4173 7065 6374 2072 6169 6f20 7769 6c6c  Aspect raio will
+0000e480: 2062 6520 7265 7461 696e 6564 2e0a 2020   be retained..  
+0000e490: 2020 3a70 6172 616d 2068 6f72 697a 6f6e    :param horizon
+0000e4a0: 7461 6c3a 2049 6620 7472 7565 2c20 7468  tal: If true, th
+0000e4b0: 656e 2068 6f72 697a 6f6e 7461 6c20 636f  en horizontal co
+0000e4c0: 6e63 6174 656e 6174 696f 6e2e 2045 6c73  ncatenation. Els
+0000e4d0: 6520 7665 7274 6963 616c 2063 6f6e 6361  e vertical conca
+0000e4e0: 7465 6e61 7469 6f6e 2e0a 2020 2020 3a70  tenation..    :p
+0000e4f0: 6172 616d 6574 6572 204f 7074 696f 6e61  arameter Optiona
+0000e500: 6c5b 626f 6f6c 5d20 6770 753a 2049 6620  l[bool] gpu: If 
+0000e510: 5472 7565 2c20 7573 6520 4e56 4944 4541  True, use NVIDEA
+0000e520: 2047 5055 2063 6f64 6563 732e 2044 6566   GPU codecs. Def
+0000e530: 6175 6c74 2046 616c 7365 2e0a 0a20 2020  ault False...   
+0000e540: 203a 6578 616d 706c 653a 0a20 2020 203e   :example:.    >
+0000e550: 3e3e 2076 6964 656f 5f63 6f6e 6361 7465  >> video_concate
+0000e560: 6e61 746f 7228 7669 6465 6f5f 6f6e 655f  nator(video_one_
+0000e570: 7061 7468 3d27 7072 6f6a 6563 745f 666f  path='project_fo
+0000e580: 6c64 6572 2f76 6964 656f 732f 5669 6465  lder/videos/Vide
+0000e590: 6f5f 312e 6d70 3427 2c20 7669 6465 6f5f  o_1.mp4', video_
+0000e5a0: 7477 6f5f 7061 7468 3d27 7072 6f6a 6563  two_path='projec
+0000e5b0: 745f 666f 6c64 6572 2f76 6964 656f 732f  t_folder/videos/
+0000e5c0: 5669 6465 6f5f 322e 6d70 3427 2c20 7265  Video_2.mp4', re
+0000e5d0: 736f 6c75 7469 6f6e 3d38 3030 2c20 686f  solution=800, ho
+0000e5e0: 7269 7a6f 6e74 616c 3d54 7275 6529 0a20  rizontal=True). 
+0000e5f0: 2020 2022 2222 0a0a 2020 2020 6966 2067     """..    if g
+0000e600: 7075 2061 6e64 206e 6f74 2063 6865 636b  pu and not check
+0000e610: 5f6e 7669 6465 615f 6770 755f 6176 6169  _nvidea_gpu_avai
+0000e620: 6c61 626c 6528 293a 0a20 2020 2020 2020  lable():.       
+0000e630: 2072 6169 7365 2046 464d 5045 4743 6f64   raise FFMPEGCod
+0000e640: 6563 4750 5545 7272 6f72 280a 2020 2020  ecGPUError(.    
+0000e650: 2020 2020 2020 2020 6d73 673d 224e 5649          msg="NVI
+0000e660: 4445 4120 4750 5520 6e6f 7420 6176 6169  DEA GPU not avai
+0000e670: 6c61 626c 6520 2861 7320 6576 616c 7561  lable (as evalua
+0000e680: 7465 6420 6279 206e 7669 6465 612d 736d  ted by nvidea-sm
+0000e690: 6920 7265 7475 726e 696e 6720 4e6f 6e65  i returning None
+0000e6a0: 222c 0a20 2020 2020 2020 2020 2020 2073  ",.            s
+0000e6b0: 6f75 7263 653d 7669 6465 6f5f 636f 6e63  ource=video_conc
+0000e6c0: 6174 656e 6174 6f72 2e5f 5f6e 616d 655f  atenator.__name_
+0000e6d0: 5f2c 0a20 2020 2020 2020 2029 0a20 2020  _,.        ).   
+0000e6e0: 2069 6620 6e6f 7420 6368 6563 6b5f 6666   if not check_ff
+0000e6f0: 6d70 6567 5f61 7661 696c 6162 6c65 2829  mpeg_available()
+0000e700: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+0000e710: 4646 4d50 4547 4e6f 7446 6f75 6e64 4572  FFMPEGNotFoundEr
+0000e720: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+0000e730: 206d 7367 3d22 4646 4d50 4547 206e 6f74   msg="FFMPEG not
+0000e740: 2066 6f75 6e64 206f 6e20 7468 6520 636f   found on the co
+0000e750: 6d70 7574 6572 2e20 496e 7374 616c 6c20  mputer. Install 
+0000e760: 4646 4d50 4547 2074 6f20 7573 6520 7468  FFMPEG to use th
+0000e770: 6520 636f 6e63 6174 656e 6174 696f 6e20  e concatenation 
+0000e780: 6d65 7468 6f64 2e22 2c0a 2020 2020 2020  method.",.      
+0000e790: 2020 2020 2020 736f 7572 6365 3d76 6964        source=vid
+0000e7a0: 656f 5f63 6f6e 6361 7465 6e61 746f 722e  eo_concatenator.
+0000e7b0: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
+0000e7c0: 2020 290a 2020 2020 7469 6d65 7220 3d20    ).    timer = 
+0000e7d0: 5369 6d62 6154 696d 6572 2873 7461 7274  SimbaTimer(start
+0000e7e0: 3d54 7275 6529 0a20 2020 2066 6f72 2066  =True).    for f
+0000e7f0: 696c 655f 7061 7468 2069 6e20 5b76 6964  ile_path in [vid
+0000e800: 656f 5f6f 6e65 5f70 6174 682c 2076 6964  eo_one_path, vid
+0000e810: 656f 5f74 776f 5f70 6174 685d 3a0a 2020  eo_two_path]:.  
+0000e820: 2020 2020 2020 6368 6563 6b5f 6669 6c65        check_file
+0000e830: 5f65 7869 7374 5f61 6e64 5f72 6561 6461  _exist_and_reada
+0000e840: 626c 6528 6669 6c65 5f70 6174 683d 6669  ble(file_path=fi
+0000e850: 6c65 5f70 6174 6829 0a20 2020 2020 2020  le_path).       
+0000e860: 205f 203d 2067 6574 5f76 6964 656f 5f6d   _ = get_video_m
+0000e870: 6574 615f 6461 7461 2866 696c 655f 7061  eta_data(file_pa
+0000e880: 7468 290a 2020 2020 6966 2074 7970 6528  th).    if type(
+0000e890: 7265 736f 6c75 7469 6f6e 2920 6973 2069  resolution) is i
+0000e8a0: 6e74 3a0a 2020 2020 2020 2020 7669 6465  nt:.        vide
+0000e8b0: 6f5f 6d65 7461 5f64 6174 6120 3d20 7b7d  o_meta_data = {}
+0000e8c0: 0a20 2020 2020 2020 2069 6620 686f 7269  .        if hori
+0000e8d0: 7a6f 6e74 616c 3a0a 2020 2020 2020 2020  zontal:.        
+0000e8e0: 2020 2020 7669 6465 6f5f 6d65 7461 5f64      video_meta_d
+0000e8f0: 6174 615b 2268 6569 6768 7422 5d20 3d20  ata["height"] = 
+0000e900: 7265 736f 6c75 7469 6f6e 0a20 2020 2020  resolution.     
+0000e910: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0000e920: 2020 2020 2076 6964 656f 5f6d 6574 615f       video_meta_
+0000e930: 6461 7461 5b22 7769 6474 6822 5d20 3d20  data["width"] = 
+0000e940: 7265 736f 6c75 7469 6f6e 0a20 2020 2065  resolution.    e
+0000e950: 6c69 6620 7265 736f 6c75 7469 6f6e 2069  lif resolution i
+0000e960: 7320 2256 6964 656f 2031 223a 0a20 2020  s "Video 1":.   
+0000e970: 2020 2020 2076 6964 656f 5f6d 6574 615f       video_meta_
+0000e980: 6461 7461 203d 2067 6574 5f76 6964 656f  data = get_video
+0000e990: 5f6d 6574 615f 6461 7461 2876 6964 656f  _meta_data(video
+0000e9a0: 5f6f 6e65 5f70 6174 6829 0a20 2020 2065  _one_path).    e
+0000e9b0: 6c73 653a 0a20 2020 2020 2020 2076 6964  lse:.        vid
+0000e9c0: 656f 5f6d 6574 615f 6461 7461 203d 2067  eo_meta_data = g
+0000e9d0: 6574 5f76 6964 656f 5f6d 6574 615f 6461  et_video_meta_da
+0000e9e0: 7461 2876 6964 656f 5f6f 6e65 5f70 6174  ta(video_one_pat
+0000e9f0: 6829 0a20 2020 2064 6972 2c20 6669 6c65  h).    dir, file
+0000ea00: 5f6e 616d 655f 312c 205f 203d 2067 6574  _name_1, _ = get
+0000ea10: 5f66 6e5f 6578 7428 7669 6465 6f5f 6f6e  _fn_ext(video_on
+0000ea20: 655f 7061 7468 290a 2020 2020 5f2c 2066  e_path).    _, f
+0000ea30: 696c 655f 6e61 6d65 5f32 2c20 5f20 3d20  ile_name_2, _ = 
+0000ea40: 6765 745f 666e 5f65 7874 2876 6964 656f  get_fn_ext(video
+0000ea50: 5f74 776f 5f70 6174 6829 0a20 2020 2070  _two_path).    p
+0000ea60: 7269 6e74 2866 2243 6f6e 6361 7465 6e61  rint(f"Concatena
+0000ea70: 7469 6e67 2076 6964 656f 7320 7b66 696c  ting videos {fil
+0000ea80: 655f 6e61 6d65 5f31 7d20 616e 6420 7b66  e_name_1} and {f
+0000ea90: 696c 655f 6e61 6d65 5f32 7d2e 2e2e 2229  ile_name_2}...")
+0000eaa0: 0a20 2020 2073 6176 655f 7061 7468 203d  .    save_path =
+0000eab0: 206f 732e 7061 7468 2e6a 6f69 6e28 6469   os.path.join(di
+0000eac0: 722c 2066 696c 655f 6e61 6d65 5f31 202b  r, file_name_1 +
+0000ead0: 2066 696c 655f 6e61 6d65 5f32 202b 2022   file_name_2 + "
+0000eae0: 5f63 6f6e 6361 742e 6d70 3422 290a 2020  _concat.mp4").  
+0000eaf0: 2020 6966 2068 6f72 697a 6f6e 7461 6c3a    if horizontal:
+0000eb00: 0a20 2020 2020 2020 2069 6620 6770 753a  .        if gpu:
+0000eb10: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+0000eb20: 6d61 6e64 203d 2066 2766 666d 7065 6720  mand = f'ffmpeg 
+0000eb30: 2d79 202d 6877 6163 6365 6c20 6175 746f  -y -hwaccel auto
+0000eb40: 202d 633a 7620 6832 3634 5f63 7576 6964   -c:v h264_cuvid
+0000eb50: 202d 6920 227b 7669 6465 6f5f 6f6e 655f   -i "{video_one_
+0000eb60: 7061 7468 7d22 202d 6877 6163 6365 6c20  path}" -hwaccel 
+0000eb70: 6175 746f 202d 633a 7620 6832 3634 5f63  auto -c:v h264_c
+0000eb80: 7576 6964 202d 6920 227b 7669 6465 6f5f  uvid -i "{video_
+0000eb90: 7477 6f5f 7061 7468 7d22 202d 6669 6c74  two_path}" -filt
+0000eba0: 6572 5f63 6f6d 706c 6578 2022 5b30 3a76  er_complex "[0:v
+0000ebb0: 5d73 6361 6c65 3d2d 313a 7b76 6964 656f  ]scale=-1:{video
+0000ebc0: 5f6d 6574 615f 6461 7461 5b22 6865 6967  _meta_data["heig
+0000ebd0: 6874 225d 7d5b 7630 5d3b 5b76 305d 5b31  ht"]}[v0];[v0][1
+0000ebe0: 3a76 5d68 7374 6163 6b3d 696e 7075 7473  :v]hstack=inputs
+0000ebf0: 3d32 2220 2d63 3a76 2068 3236 345f 6e76  =2" -c:v h264_nv
+0000ec00: 656e 6320 227b 7361 7665 5f70 6174 687d  enc "{save_path}
+0000ec10: 2227 0a20 2020 2020 2020 2065 6c73 653a  "'.        else:
+0000ec20: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+0000ec30: 6d61 6e64 203d 2066 2766 666d 7065 6720  mand = f'ffmpeg 
+0000ec40: 2d79 202d 6920 227b 7669 6465 6f5f 6f6e  -y -i "{video_on
+0000ec50: 655f 7061 7468 7d22 202d 6920 227b 7669  e_path}" -i "{vi
+0000ec60: 6465 6f5f 7477 6f5f 7061 7468 7d22 202d  deo_two_path}" -
+0000ec70: 6669 6c74 6572 5f63 6f6d 706c 6578 2022  filter_complex "
+0000ec80: 5b30 3a76 5d73 6361 6c65 3d2d 313a 7b76  [0:v]scale=-1:{v
+0000ec90: 6964 656f 5f6d 6574 615f 6461 7461 5b22  ideo_meta_data["
+0000eca0: 6865 6967 6874 225d 7d5b 7630 5d3b 5b76  height"]}[v0];[v
+0000ecb0: 305d 5b31 3a76 5d68 7374 6163 6b3d 696e  0][1:v]hstack=in
+0000ecc0: 7075 7473 3d32 2220 227b 7361 7665 5f70  puts=2" "{save_p
+0000ecd0: 6174 687d 2227 0a0a 2020 2020 656c 7365  ath}"'..    else
+0000ece0: 3a0a 2020 2020 2020 2020 6966 2067 7075  :.        if gpu
+0000ecf0: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+0000ed00: 6d6d 616e 6420 3d20 6627 6666 6d70 6567  mmand = f'ffmpeg
+0000ed10: 202d 7920 2d68 7761 6363 656c 2061 7574   -y -hwaccel aut
+0000ed20: 6f20 2d63 3a76 2068 3236 345f 6375 7669  o -c:v h264_cuvi
+0000ed30: 6420 2d69 2022 7b76 6964 656f 5f6f 6e65  d -i "{video_one
+0000ed40: 5f70 6174 687d 2220 2d68 7761 6363 656c  _path}" -hwaccel
+0000ed50: 2061 7574 6f20 2d63 3a76 2068 3236 345f   auto -c:v h264_
+0000ed60: 6375 7669 6420 2d69 2022 7b76 6964 656f  cuvid -i "{video
+0000ed70: 5f74 776f 5f70 6174 687d 2220 2d66 696c  _two_path}" -fil
+0000ed80: 7465 725f 636f 6d70 6c65 7820 225b 303a  ter_complex "[0:
+0000ed90: 765d 7363 616c 653d 7b76 6964 656f 5f6d  v]scale={video_m
+0000eda0: 6574 615f 6461 7461 5b22 7769 6474 6822  eta_data["width"
+0000edb0: 5d7d 3a2d 315b 7630 5d3b 5b76 305d 5b31  ]}:-1[v0];[v0][1
+0000edc0: 3a76 5d76 7374 6163 6b3d 696e 7075 7473  :v]vstack=inputs
+0000edd0: 3d32 2220 2d63 3a76 2068 3236 345f 6e76  =2" -c:v h264_nv
+0000ede0: 656e 6320 227b 7361 7665 5f70 6174 687d  enc "{save_path}
+0000edf0: 2227 0a20 2020 2020 2020 2065 6c73 653a  "'.        else:
+0000ee00: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+0000ee10: 6d61 6e64 203d 2066 2766 666d 7065 6720  mand = f'ffmpeg 
+0000ee20: 2d79 202d 6920 227b 7669 6465 6f5f 6f6e  -y -i "{video_on
+0000ee30: 655f 7061 7468 7d22 202d 6920 227b 7669  e_path}" -i "{vi
+0000ee40: 6465 6f5f 7477 6f5f 7061 7468 7d22 202d  deo_two_path}" -
+0000ee50: 6669 6c74 6572 5f63 6f6d 706c 6578 2022  filter_complex "
+0000ee60: 5b30 3a76 5d73 6361 6c65 3d7b 7669 6465  [0:v]scale={vide
+0000ee70: 6f5f 6d65 7461 5f64 6174 615b 2277 6964  o_meta_data["wid
+0000ee80: 7468 225d 7d3a 2d31 5b76 305d 3b5b 7630  th"]}:-1[v0];[v0
+0000ee90: 5d5b 313a 765d 7673 7461 636b 3d69 6e70  ][1:v]vstack=inp
+0000eea0: 7574 733d 3222 2022 7b73 6176 655f 7061  uts=2" "{save_pa
+0000eeb0: 7468 7d22 270a 2020 2020 6966 2067 7075  th}"'.    if gpu
+0000eec0: 3a0a 2020 2020 2020 2020 7072 6f63 6573  :.        proces
+0000eed0: 7320 3d20 7375 6270 726f 6365 7373 2e50  s = subprocess.P
+0000eee0: 6f70 656e 2863 6f6d 6d61 6e64 2c20 7368  open(command, sh
+0000eef0: 656c 6c3d 5472 7565 290a 2020 2020 2020  ell=True).      
+0000ef00: 2020 6f75 7470 7574 2c20 6572 726f 7220    output, error 
+0000ef10: 3d20 7072 6f63 6573 732e 636f 6d6d 756e  = process.commun
+0000ef20: 6963 6174 6528 290a 2020 2020 2020 2020  icate().        
+0000ef30: 6966 2070 726f 6365 7373 2e72 6574 7572  if process.retur
+0000ef40: 6e63 6f64 6520 213d 2030 3a0a 2020 2020  ncode != 0:.    
+0000ef50: 2020 2020 2020 2020 6966 2022 556e 6b6e          if "Unkn
+0000ef60: 6f77 6e20 6465 636f 6465 7222 2069 6e20  own decoder" in 
+0000ef70: 7374 7228 6572 726f 722e 7370 6c69 7428  str(error.split(
+0000ef80: 6222 5c6e 2229 5b2d 325d 293a 0a20 2020  b"\n")[-2]):.   
+0000ef90: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+0000efa0: 7365 2046 464d 5045 4743 6f64 6563 4750  se FFMPEGCodecGP
+0000efb0: 5545 7272 6f72 280a 2020 2020 2020 2020  UError(.        
+0000efc0: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
+0000efd0: 2247 5055 2063 6f64 6563 206e 6f74 2066  "GPU codec not f
+0000efe0: 6f75 6e64 3a20 7265 7665 7274 696e 6720  ound: reverting 
+0000eff0: 746f 2043 5055 2e20 5072 6f70 6572 6c79  to CPU. Properly
+0000f000: 2063 6f6e 6669 6775 7265 2046 464d 7065   configure FFMpe
+0000f010: 6720 616e 6420 656e 7375 7265 2079 6f75  g and ensure you
+0000f020: 2068 6176 6520 4750 5520 6176 6169 6c61   have GPU availa
+0000f030: 626c 6520 6f72 2075 7365 2043 5055 2e22  ble or use CPU."
+0000f040: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000f050: 2020 2020 2020 736f 7572 6365 3d76 6964        source=vid
+0000f060: 656f 5f63 6f6e 6361 7465 6e61 746f 722e  eo_concatenator.
+0000f070: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
+0000f080: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0000f090: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000f0a0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+0000f0b0: 6973 6520 4646 4d50 4547 436f 6465 6347  ise FFMPEGCodecG
+0000f0c0: 5055 4572 726f 7228 0a20 2020 2020 2020  PUError(.       
+0000f0d0: 2020 2020 2020 2020 2020 2020 206d 7367               msg
+0000f0e0: 3d22 4750 5520 6572 726f 722e 2050 726f  ="GPU error. Pro
+0000f0f0: 7065 726c 7920 636f 6e66 6967 7572 6520  perly configure 
+0000f100: 4646 4d70 6567 2061 6e64 2065 6e73 7572  FFMpeg and ensur
+0000f110: 6520 796f 7520 6861 7665 2047 5055 2061  e you have GPU a
+0000f120: 7661 696c 6162 6c65 2c20 6f72 2075 7365  vailable, or use
+0000f130: 2043 5055 2e22 2c0a 2020 2020 2020 2020   CPU.",.        
+0000f140: 2020 2020 2020 2020 2020 2020 736f 7572              sour
+0000f150: 6365 3d76 6964 656f 5f63 6f6e 6361 7465  ce=video_concate
+0000f160: 6e61 746f 722e 5f5f 6e61 6d65 5f5f 2c0a  nator.__name__,.
+0000f170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f180: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+0000f190: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+0000f1a0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+0000f1b0: 2020 2073 7562 7072 6f63 6573 732e 6361     subprocess.ca
+0000f1c0: 6c6c 2863 6f6d 6d61 6e64 2c20 7368 656c  ll(command, shel
+0000f1d0: 6c3d 5472 7565 2c20 7374 646f 7574 3d73  l=True, stdout=s
+0000f1e0: 7562 7072 6f63 6573 732e 5049 5045 290a  ubprocess.PIPE).
+0000f1f0: 2020 2020 7469 6d65 722e 7374 6f70 5f74      timer.stop_t
+0000f200: 696d 6572 2829 0a20 2020 2073 7464 6f75  imer().    stdou
+0000f210: 745f 7375 6363 6573 7328 0a20 2020 2020  t_success(.     
+0000f220: 2020 206d 7367 3d66 2256 6964 656f 7320     msg=f"Videos 
+0000f230: 636f 6e63 6174 656e 6174 6564 2061 6e64  concatenated and
+0000f240: 2073 6176 6564 2061 7420 7b73 6176 655f   saved at {save_
+0000f250: 7061 7468 7d22 2c0a 2020 2020 2020 2020  path}",.        
+0000f260: 656c 6170 7365 645f 7469 6d65 3d74 696d  elapsed_time=tim
+0000f270: 6572 2e65 6c61 7073 6564 5f74 696d 655f  er.elapsed_time_
+0000f280: 7374 722c 0a20 2020 2020 2020 2073 6f75  str,.        sou
+0000f290: 7263 653d 7669 6465 6f5f 636f 6e63 6174  rce=video_concat
+0000f2a0: 656e 6174 6f72 2e5f 5f6e 616d 655f 5f2c  enator.__name__,
+0000f2b0: 0a20 2020 2029 0a0a 0a23 2076 6964 656f  .    )...# video
+0000f2c0: 5f63 6f6e 6361 7465 6e61 746f 7228 7669  _concatenator(vi
+0000f2d0: 6465 6f5f 6f6e 655f 7061 7468 3d72 272f  deo_one_path=r'/
+0000f2e0: 5573 6572 732f 7369 6d6f 6e2f 4465 736b  Users/simon/Desk
+0000f2f0: 746f 702f 656e 7673 2f73 696d 6261 2f74  top/envs/simba/t
+0000f300: 726f 7562 6c65 7368 6f6f 7469 6e67 2f6d  roubleshooting/m
+0000f310: 6f75 7365 5f6f 7065 6e5f 6669 656c 642f  ouse_open_field/
+0000f320: 7072 6f6a 6563 745f 666f 6c64 6572 2f76  project_folder/v
+0000f330: 6964 656f 732f 5349 5f44 4159 335f 3330  ideos/SI_DAY3_30
+0000f340: 385f 4344 315f 5052 4553 454e 545f 646f  8_CD1_PRESENT_do
+0000f350: 776e 7361 6d70 6c65 642e 6d70 3427 2c0a  wnsampled.mp4',.
+0000f360: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000f370: 2020 2020 2076 6964 656f 5f74 776f 5f70       video_two_p
+0000f380: 6174 683d 7227 2f55 7365 7273 2f73 696d  ath=r'/Users/sim
+0000f390: 6f6e 2f44 6573 6b74 6f70 2f65 6e76 732f  on/Desktop/envs/
+0000f3a0: 7369 6d62 612f 7472 6f75 626c 6573 686f  simba/troublesho
+0000f3b0: 6f74 696e 672f 6d6f 7573 655f 6f70 656e  oting/mouse_open
+0000f3c0: 5f66 6965 6c64 2f70 726f 6a65 6374 5f66  _field/project_f
+0000f3d0: 6f6c 6465 722f 7669 6465 6f73 2f53 495f  older/videos/SI_
+0000f3e0: 4441 5933 5f33 3038 5f43 4431 5f50 5245  DAY3_308_CD1_PRE
+0000f3f0: 5345 4e54 5f64 6f77 6e73 616d 706c 6564  SENT_downsampled
+0000f400: 2e6d 7034 272c 2072 6573 6f6c 7574 696f  .mp4', resolutio
+0000f410: 6e3d 2756 6964 656f 5f31 272c 0a23 2020  n='Video_1',.#  
+0000f420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f430: 2020 686f 7269 7a6f 6e74 616c 3d54 7275    horizontal=Tru
+0000f440: 652c 0a23 2020 2020 2020 2020 2020 2020  e,.#            
+0000f450: 2020 2020 2020 2020 6770 753d 4661 6c73          gpu=Fals
+0000f460: 6529 0a0a 0a63 6c61 7373 2056 6964 656f  e)...class Video
+0000f470: 526f 7461 746f 7228 436f 6e66 6967 5265  Rotator(ConfigRe
+0000f480: 6164 6572 293a 0a20 2020 2022 2222 0a20  ader):.    """. 
+0000f490: 2020 2047 5549 2054 6f6f 6c20 666f 7220     GUI Tool for 
+0000f4a0: 726f 7461 7469 6e67 2076 6964 656f 2e20  rotating video. 
+0000f4b0: 526f 7461 7465 6420 7669 6465 6f20 6973  Rotated video is
+0000f4c0: 2073 6176 6564 2077 6974 6820 7468 6520   saved with the 
+0000f4d0: 6060 5f72 6f74 6174 6564 5f44 4154 4554  ``_rotated_DATET
+0000f4e0: 494d 452e 6d70 3460 6020 7375 6666 6978  IME.mp4`` suffix
+0000f4f0: 2e0a 0a0a 2020 2020 2e2e 2069 6d61 6765  ....    .. image
+0000f500: 3a3a 205f 7374 6174 6963 2f69 6d67 2f56  :: _static/img/V
+0000f510: 6964 656f 526f 7461 746f 722e 6769 660a  ideoRotator.gif.
+0000f520: 2020 2020 2020 203a 7769 6474 683a 2037         :width: 7
+0000f530: 3030 0a20 2020 2020 2020 3a61 6c69 676e  00.       :align
+0000f540: 3a20 6365 6e74 6572 0a0a 2020 2020 3a70  : center..    :p
+0000f550: 6172 616d 6574 6572 2073 7472 2069 6e70  arameter str inp
+0000f560: 7574 5f70 6174 683a 2050 6174 6820 746f  ut_path: Path to
+0000f570: 2076 6964 656f 2074 6f20 726f 7461 7465   video to rotate
+0000f580: 2e0a 2020 2020 3a70 6172 616d 6574 6572  ..    :parameter
+0000f590: 2073 7472 206f 7574 7075 745f 6469 723a   str output_dir:
+0000f5a0: 2044 6972 6563 746f 7279 2077 6865 7265   Directory where
+0000f5b0: 2074 6f20 7361 7665 2074 6865 2072 6f74   to save the rot
+0000f5c0: 6174 6564 2076 6964 656f 2e0a 2020 2020  ated video..    
+0000f5d0: 3a70 6172 616d 6574 6572 204f 7074 696f  :parameter Optio
+0000f5e0: 6e61 6c5b 626f 6f6c 5d20 6770 753a 2049  nal[bool] gpu: I
+0000f5f0: 6620 5472 7565 2c20 7573 6520 4646 4d50  f True, use FFMP
+0000f600: 4547 204e 5649 4445 4120 4750 5520 636f  EG NVIDEA GPU co
+0000f610: 6465 6373 2e20 456c 7365 2043 5055 2063  decs. Else CPU c
+0000f620: 6f64 6563 732e 0a20 2020 203a 7061 7261  odecs..    :para
+0000f630: 6d65 7465 7220 4f70 7469 6f6e 616c 5b62  meter Optional[b
+0000f640: 6f6f 6c5d 2067 7075 3a20 4966 2054 7275  ool] gpu: If Tru
+0000f650: 652c 2075 7365 2046 4650 4d50 4547 2e20  e, use FFPMPEG. 
+0000f660: 456c 7365 2c20 4f70 656e 4356 2e0a 0a0a  Else, OpenCV....
+0000f670: 0a0a 2020 2020 3a65 7861 6d70 6c65 3a0a  ..    :example:.
+0000f680: 2020 2020 3e3e 3e20 5669 6465 6f52 6f74      >>> VideoRot
+0000f690: 6174 6f72 2869 6e70 7574 5f70 6174 683d  ator(input_path=
+0000f6a0: 2770 726f 6a65 6374 5f66 6f6c 6465 722f  'project_folder/
+0000f6b0: 7669 6465 6f73 2f56 6964 656f 5f31 2e6d  videos/Video_1.m
+0000f6c0: 7034 272c 206f 7574 7075 745f 6469 723d  p4', output_dir=
+0000f6d0: 2770 726f 6a65 6374 5f66 6f6c 6465 722f  'project_folder/
+0000f6e0: 7669 6465 6f73 2729 0a20 2020 2022 2222  videos').    """
+0000f6f0: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+0000f700: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
+0000f710: 2c0a 2020 2020 2020 2020 696e 7075 745f  ,.        input_
+0000f720: 7061 7468 3a20 556e 696f 6e5b 7374 722c  path: Union[str,
+0000f730: 206f 732e 5061 7468 4c69 6b65 5d2c 0a20   os.PathLike],. 
+0000f740: 2020 2020 2020 206f 7574 7075 745f 6469         output_di
+0000f750: 723a 2055 6e69 6f6e 5b73 7472 2c20 6f73  r: Union[str, os
+0000f760: 2e50 6174 684c 696b 655d 2c0a 2020 2020  .PathLike],.    
+0000f770: 2020 2020 6770 753a 204f 7074 696f 6e61      gpu: Optiona
+0000f780: 6c5b 626f 6f6c 5d20 3d20 4661 6c73 652c  l[bool] = False,
+0000f790: 0a20 2020 2020 2020 2066 666d 7065 673a  .        ffmpeg:
+0000f7a0: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
+0000f7b0: 3d20 4661 6c73 652c 0a20 2020 2029 202d  = False,.    ) -
+0000f7c0: 3e20 4e6f 6e65 3a0a 0a20 2020 2020 2020  > None:..       
+0000f7d0: 2069 6620 6770 7520 616e 6420 6e6f 7420   if gpu and not 
+0000f7e0: 6368 6563 6b5f 6e76 6964 6561 5f67 7075  check_nvidea_gpu
+0000f7f0: 5f61 7661 696c 6162 6c65 2829 3a0a 2020  _available():.  
+0000f800: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0000f810: 4646 4d50 4547 436f 6465 6347 5055 4572  FFMPEGCodecGPUEr
+0000f820: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+0000f830: 2020 2020 206d 7367 3d22 4e6f 2047 5055       msg="No GPU
+0000f840: 2066 6f75 6e64 2028 6173 2065 7661 6c75   found (as evalu
+0000f850: 6174 6564 2062 7920 6e76 6964 6561 2d73  ated by nvidea-s
+0000f860: 6d69 2072 6574 7572 6e69 6e67 204e 6f6e  mi returning Non
+0000f870: 6529 222c 0a20 2020 2020 2020 2020 2020  e)",.           
+0000f880: 2020 2020 2073 6f75 7263 653d 7365 6c66       source=self
+0000f890: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
+0000f8a0: 655f 5f2c 0a20 2020 2020 2020 2020 2020  e__,.           
+0000f8b0: 2029 0a20 2020 2020 2020 2069 6620 6666   ).        if ff
+0000f8c0: 6d70 6567 2061 6e64 206e 6f74 2063 6865  mpeg and not che
+0000f8d0: 636b 5f66 666d 7065 675f 6176 6169 6c61  ck_ffmpeg_availa
+0000f8e0: 626c 6528 293a 0a20 2020 2020 2020 2020  ble():.         
+0000f8f0: 2020 2072 6169 7365 2046 464d 5045 474e     raise FFMPEGN
+0000f900: 6f74 466f 756e 6445 7272 6f72 280a 2020  otFoundError(.  
+0000f910: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
+0000f920: 673d 2746 464d 5045 4720 6e6f 7420 666f  g='FFMPEG not fo
+0000f930: 756e 6420 6f6e 2074 6865 2063 6f6d 7075  und on the compu
+0000f940: 7465 7220 2861 7320 6576 616c 7561 7465  ter (as evaluate
+0000f950: 6420 6279 2022 6666 6d70 6567 2220 7265  d by "ffmpeg" re
+0000f960: 7475 726e 696e 6720 4e6f 6e65 2927 2c0a  turning None)',.
+0000f970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f980: 736f 7572 6365 3d73 656c 662e 5f5f 636c  source=self.__cl
+0000f990: 6173 735f 5f2e 5f5f 6e61 6d65 5f5f 2c0a  ass__.__name__,.
+0000f9a0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0000f9b0: 2020 2020 2020 5f2c 2073 656c 662e 6370        _, self.cp
+0000f9c0: 755f 636e 7420 3d20 6669 6e64 5f63 6f72  u_cnt = find_cor
+0000f9d0: 655f 636e 7428 290a 2020 2020 2020 2020  e_cnt().        
+0000f9e0: 7365 6c66 2e67 7075 2c20 7365 6c66 2e66  self.gpu, self.f
+0000f9f0: 666d 7065 6720 3d20 6770 752c 2066 666d  fmpeg = gpu, ffm
+0000fa00: 7065 670a 2020 2020 2020 2020 7365 6c66  peg.        self
+0000fa10: 2e73 6176 655f 6469 7220 3d20 6f75 7470  .save_dir = outp
+0000fa20: 7574 5f64 6972 0a20 2020 2020 2020 2073  ut_dir.        s
+0000fa30: 656c 662e 6461 7465 7469 6d65 203d 2064  elf.datetime = d
+0000fa40: 6174 6574 696d 652e 6e6f 7728 292e 7374  atetime.now().st
+0000fa50: 7266 7469 6d65 2822 2559 256d 2564 2548  rftime("%Y%m%d%H
+0000fa60: 254d 2553 2229 0a20 2020 2020 2020 2069  %M%S").        i
+0000fa70: 6620 6f73 2e70 6174 682e 6973 6669 6c65  f os.path.isfile
+0000fa80: 2869 6e70 7574 5f70 6174 6829 3a0a 2020  (input_path):.  
+0000fa90: 2020 2020 2020 2020 2020 7365 6c66 2e76            self.v
+0000faa0: 6964 656f 5f70 6174 6873 203d 205b 696e  ideo_paths = [in
+0000fab0: 7075 745f 7061 7468 5d0a 2020 2020 2020  put_path].      
+0000fac0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000fad0: 2020 2020 7365 6c66 2e76 6964 656f 5f70      self.video_p
+0000fae0: 6174 6873 203d 2066 696e 645f 616c 6c5f  aths = find_all_
+0000faf0: 7669 6465 6f73 5f69 6e5f 6469 7265 6374  videos_in_direct
+0000fb00: 6f72 7928 0a20 2020 2020 2020 2020 2020  ory(.           
+0000fb10: 2020 2020 2064 6972 6563 746f 7279 3d69       directory=i
+0000fb20: 6e70 7574 5f70 6174 682c 2061 735f 6469  nput_path, as_di
+0000fb30: 6374 3d54 7275 650a 2020 2020 2020 2020  ct=True.        
+0000fb40: 2020 2020 292e 7661 6c75 6573 2829 0a20      ).values(). 
+0000fb50: 2020 2020 2020 2020 2020 2063 6865 636b             check
+0000fb60: 5f69 665f 6669 6c65 7061 7468 5f6c 6973  _if_filepath_lis
+0000fb70: 745f 6973 5f65 6d70 7479 280a 2020 2020  t_is_empty(.    
+0000fb80: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+0000fb90: 7061 7468 733d 7365 6c66 2e76 6964 656f  paths=self.video
+0000fba0: 5f70 6174 6873 2c0a 2020 2020 2020 2020  _paths,.        
+0000fbb0: 2020 2020 2020 2020 6572 726f 725f 6d73          error_ms
+0000fbc0: 673d 6622 4e6f 2076 6964 656f 7320 666f  g=f"No videos fo
+0000fbd0: 756e 6420 696e 207b 696e 7075 745f 7061  und in {input_pa
+0000fbe0: 7468 7d20 6469 7265 6374 6f72 7922 2c0a  th} directory",.
+0000fbf0: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+0000fc00: 2020 2064 6566 205f 5f69 6e73 6572 745f     def __insert_
+0000fc10: 696d 6728 7365 6c66 2c20 696d 673a 206e  img(self, img: n
+0000fc20: 702e 6172 7261 7929 3a0a 2020 2020 2020  p.array):.      
+0000fc30: 2020 6375 7272 656e 745f 6672 6d5f 7069    current_frm_pi
+0000fc40: 6c20 3d20 496d 6167 652e 6672 6f6d 6172  l = Image.fromar
+0000fc50: 7261 7928 696d 6729 0a20 2020 2020 2020  ray(img).       
+0000fc60: 2063 7572 7265 6e74 5f66 726d 5f70 696c   current_frm_pil
+0000fc70: 2e74 6875 6d62 6e61 696c 284d 4158 5f46  .thumbnail(MAX_F
+0000fc80: 524d 5f53 495a 452c 2049 6d61 6765 2e41  RM_SIZE, Image.A
+0000fc90: 4e54 4941 4c49 4153 290a 2020 2020 2020  NTIALIAS).      
+0000fca0: 2020 6375 7272 656e 745f 6672 6d5f 7069    current_frm_pi
+0000fcb0: 6c20 3d20 496d 6167 6554 6b2e 5068 6f74  l = ImageTk.Phot
+0000fcc0: 6f49 6d61 6765 280a 2020 2020 2020 2020  oImage(.        
+0000fcd0: 2020 2020 6d61 7374 6572 3d73 656c 662e      master=self.
+0000fce0: 6d61 696e 5f66 726d 2c20 696d 6167 653d  main_frm, image=
+0000fcf0: 6375 7272 656e 745f 6672 6d5f 7069 6c0a  current_frm_pil.
+0000fd00: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000fd10: 2020 7365 6c66 2e76 6964 656f 5f66 7261    self.video_fra
+0000fd20: 6d65 203d 204c 6162 656c 2873 656c 662e  me = Label(self.
+0000fd30: 6d61 696e 5f66 726d 2c20 696d 6167 653d  main_frm, image=
+0000fd40: 6375 7272 656e 745f 6672 6d5f 7069 6c29  current_frm_pil)
+0000fd50: 0a20 2020 2020 2020 2073 656c 662e 7669  .        self.vi
+0000fd60: 6465 6f5f 6672 616d 652e 696d 6167 6520  deo_frame.image 
+0000fd70: 3d20 6375 7272 656e 745f 6672 6d5f 7069  = current_frm_pi
+0000fd80: 6c0a 2020 2020 2020 2020 7365 6c66 2e76  l.        self.v
+0000fd90: 6964 656f 5f66 7261 6d65 2e67 7269 6428  ideo_frame.grid(
+0000fda0: 726f 773d 302c 2063 6f6c 756d 6e3d 3029  row=0, column=0)
+0000fdb0: 0a0a 2020 2020 6465 6620 5f5f 726f 7461  ..    def __rota
+0000fdc0: 7465 2873 656c 662c 2076 616c 7565 3a20  te(self, value: 
+0000fdd0: 696e 742c 2069 6d67 3a20 6e70 2e61 7272  int, img: np.arr
+0000fde0: 6179 293a 0a20 2020 2020 2020 2073 656c  ay):.        sel
+0000fdf0: 662e 6469 665f 616e 676c 6520 2b3d 2076  f.dif_angle += v
+0000fe00: 616c 7565 0a20 2020 2020 2020 2072 6f74  alue.        rot
+0000fe10: 6174 696f 6e5f 6d61 7472 6978 203d 2063  ation_matrix = c
+0000fe20: 7632 2e67 6574 526f 7461 7469 6f6e 4d61  v2.getRotationMa
+0000fe30: 7472 6978 3244 280a 2020 2020 2020 2020  trix2D(.        
+0000fe40: 2020 2020 2873 656c 662e 7669 6465 6f5f      (self.video_
+0000fe50: 6d65 7461 5f64 6174 615b 2277 6964 7468  meta_data["width
+0000fe60: 225d 202f 2032 2c20 7365 6c66 2e76 6964  "] / 2, self.vid
+0000fe70: 656f 5f6d 6574 615f 6461 7461 5b22 6865  eo_meta_data["he
+0000fe80: 6967 6874 225d 202f 2032 292c 0a20 2020  ight"] / 2),.   
+0000fe90: 2020 2020 2020 2020 2073 656c 662e 6469           self.di
+0000fea0: 665f 616e 676c 652c 0a20 2020 2020 2020  f_angle,.       
+0000feb0: 2020 2020 2031 2c0a 2020 2020 2020 2020       1,.        
+0000fec0: 290a 2020 2020 2020 2020 696d 6720 3d20  ).        img = 
+0000fed0: 6376 322e 7761 7270 4166 6669 6e65 280a  cv2.warpAffine(.
+0000fee0: 2020 2020 2020 2020 2020 2020 696d 672c              img,
+0000fef0: 0a20 2020 2020 2020 2020 2020 2072 6f74  .            rot
+0000ff00: 6174 696f 6e5f 6d61 7472 6978 2c0a 2020  ation_matrix,.  
+0000ff10: 2020 2020 2020 2020 2020 2873 656c 662e            (self.
+0000ff20: 7669 6465 6f5f 6d65 7461 5f64 6174 615b  video_meta_data[
+0000ff30: 2277 6964 7468 225d 2c20 7365 6c66 2e76  "width"], self.v
+0000ff40: 6964 656f 5f6d 6574 615f 6461 7461 5b22  ideo_meta_data["
+0000ff50: 6865 6967 6874 225d 292c 0a20 2020 2020  height"]),.     
+0000ff60: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
+0000ff70: 662e 5f5f 696e 7365 7274 5f69 6d67 2869  f.__insert_img(i
+0000ff80: 6d67 3d69 6d67 290a 0a20 2020 2064 6566  mg=img)..    def
+0000ff90: 205f 5f72 756e 5f72 6f74 6174 696f 6e28   __run_rotation(
+0000ffa0: 7365 6c66 293a 0a20 2020 2020 2020 2073  self):.        s
+0000ffb0: 656c 662e 6d61 696e 5f66 726d 2e64 6573  elf.main_frm.des
+0000ffc0: 7472 6f79 2829 0a20 2020 2020 2020 2073  troy().        s
+0000ffd0: 7461 7274 203d 2074 696d 652e 7469 6d65  tart = time.time
+0000ffe0: 2829 0a20 2020 2020 2020 2069 6620 7365  ().        if se
+0000fff0: 6c66 2e66 666d 7065 6720 6f72 2073 656c  lf.ffmpeg or sel
+00010000: 662e 6770 753a 0a20 2020 2020 2020 2020  f.gpu:.         
+00010010: 2020 2066 6f72 2076 6964 656f 5f63 6e74     for video_cnt
+00010020: 2c20 2876 6964 656f 5f70 6174 682c 2072  , (video_path, r
+00010030: 6f74 6174 696f 6e29 2069 6e20 656e 756d  otation) in enum
+00010040: 6572 6174 6528 7365 6c66 2e72 6573 756c  erate(self.resul
+00010050: 7473 2e69 7465 6d73 2829 293a 0a20 2020  ts.items()):.   
+00010060: 2020 2020 2020 2020 2020 2020 205f 2c20               _, 
+00010070: 6e61 6d65 2c20 5f20 3d20 6765 745f 666e  name, _ = get_fn
+00010080: 5f65 7874 2866 696c 6570 6174 683d 7669  _ext(filepath=vi
+00010090: 6465 6f5f 7061 7468 290a 2020 2020 2020  deo_path).      
+000100a0: 2020 2020 2020 2020 2020 7361 7665 5f70            save_p
+000100b0: 6174 6820 3d20 6f73 2e70 6174 682e 6a6f  ath = os.path.jo
+000100c0: 696e 280a 2020 2020 2020 2020 2020 2020  in(.            
+000100d0: 2020 2020 2020 2020 7365 6c66 2e73 6176          self.sav
+000100e0: 655f 6469 722c 2066 227b 6e61 6d65 7d5f  e_dir, f"{name}_
+000100f0: 726f 7461 7465 645f 7b73 656c 662e 6461  rotated_{self.da
+00010100: 7465 7469 6d65 7d2e 6d70 3422 0a20 2020  tetime}.mp4".   
+00010110: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+00010120: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00010130: 6620 7365 6c66 2e67 7075 3a0a 2020 2020  f self.gpu:.    
+00010140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010150: 636d 6420 3d20 6627 6666 6d70 6567 202d  cmd = f'ffmpeg -
+00010160: 6877 6163 6365 6c20 6175 746f 202d 6920  hwaccel auto -i 
+00010170: 227b 7669 6465 6f5f 7061 7468 7d22 202d  "{video_path}" -
+00010180: 7666 2022 6877 7570 6c6f 6164 5f63 7564  vf "hwupload_cud
+00010190: 612c 726f 7461 7465 3d7b 726f 7461 7469  a,rotate={rotati
+000101a0: 6f6e 7d2a 2850 492f 3138 3029 2c66 6f72  on}*(PI/180),for
+000101b0: 6d61 743d 6e76 3132 7c63 7564 6122 202d  mat=nv12|cuda" -
+000101c0: 633a 7620 6832 3634 5f6e 7665 6e63 2022  c:v h264_nvenc "
+000101d0: 7b73 6176 655f 7061 7468 7d22 202d 7927  {save_path}" -y'
+000101e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000101f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00010200: 2020 2020 2020 2020 2020 2063 6d64 203d             cmd =
+00010210: 2066 2766 666d 7065 6720 2d69 2022 7b76   f'ffmpeg -i "{v
+00010220: 6964 656f 5f70 6174 687d 2220 2d76 6620  ideo_path}" -vf 
+00010230: 2272 6f74 6174 653d 7b72 6f74 6174 696f  "rotate={rotatio
+00010240: 6e7d 2a28 5049 2f31 3830 2922 2022 7b73  n}*(PI/180)" "{s
+00010250: 6176 655f 7061 7468 7d22 202d 7927 0a20  ave_path}" -y'. 
+00010260: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00010270: 7562 7072 6f63 6573 732e 6361 6c6c 2863  ubprocess.call(c
+00010280: 6d64 2c20 7368 656c 6c3d 5472 7565 2c20  md, shell=True, 
+00010290: 7374 646f 7574 3d73 7562 7072 6f63 6573  stdout=subproces
+000102a0: 732e 5049 5045 290a 2020 2020 2020 2020  s.PIPE).        
+000102b0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000102c0: 2020 666f 7220 7669 6465 6f5f 636e 742c    for video_cnt,
+000102d0: 2028 7669 6465 6f5f 7061 7468 2c20 726f   (video_path, ro
+000102e0: 7461 7469 6f6e 2920 696e 2065 6e75 6d65  tation) in enume
+000102f0: 7261 7465 2873 656c 662e 7265 7375 6c74  rate(self.result
+00010300: 732e 6974 656d 7328 2929 3a0a 2020 2020  s.items()):.    
+00010310: 2020 2020 2020 2020 2020 2020 6361 7020              cap 
+00010320: 3d20 6376 322e 5669 6465 6f43 6170 7475  = cv2.VideoCaptu
+00010330: 7265 2876 6964 656f 5f70 6174 6829 0a20  re(video_path). 
+00010340: 2020 2020 2020 2020 2020 2020 2020 205f                 _
+00010350: 2c20 6e61 6d65 2c20 5f20 3d20 6765 745f  , name, _ = get_
+00010360: 666e 5f65 7874 2866 696c 6570 6174 683d  fn_ext(filepath=
+00010370: 7669 6465 6f5f 7061 7468 290a 2020 2020  video_path).    
+00010380: 2020 2020 2020 2020 2020 2020 726f 7461              rota
+00010390: 7469 6f6e 5f6d 6174 7269 7820 3d20 6376  tion_matrix = cv
+000103a0: 322e 6765 7452 6f74 6174 696f 6e4d 6174  2.getRotationMat
+000103b0: 7269 7832 4428 0a20 2020 2020 2020 2020  rix2D(.         
+000103c0: 2020 2020 2020 2020 2020 2028 0a20 2020             (.   
+000103d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000103e0: 2020 2020 2073 656c 662e 7669 6465 6f5f       self.video_
+000103f0: 6d65 7461 5f64 6174 615b 2277 6964 7468  meta_data["width
+00010400: 225d 202f 2032 2c0a 2020 2020 2020 2020  "] / 2,.        
+00010410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010420: 7365 6c66 2e76 6964 656f 5f6d 6574 615f  self.video_meta_
+00010430: 6461 7461 5b22 6865 6967 6874 225d 202f  data["height"] /
+00010440: 2032 2c0a 2020 2020 2020 2020 2020 2020   2,.            
+00010450: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+00010460: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00010470: 6f74 6174 696f 6e2c 0a20 2020 2020 2020  otation,.       
+00010480: 2020 2020 2020 2020 2020 2020 2031 2c0a               1,.
+00010490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000104a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000104b0: 2020 7361 7665 5f70 6174 6820 3d20 6f73    save_path = os
+000104c0: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
+000104d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000104e0: 7365 6c66 2e73 6176 655f 6469 722c 2066  self.save_dir, f
+000104f0: 227b 6e61 6d65 7d5f 726f 7461 7465 645f  "{name}_rotated_
+00010500: 7b73 656c 662e 6461 7465 7469 6d65 7d2e  {self.datetime}.
+00010510: 6d70 3422 0a20 2020 2020 2020 2020 2020  mp4".           
+00010520: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00010530: 2020 2020 2020 2076 6964 656f 5f6d 6574         video_met
+00010540: 6120 3d20 6765 745f 7669 6465 6f5f 6d65  a = get_video_me
+00010550: 7461 5f64 6174 6128 7669 6465 6f5f 7061  ta_data(video_pa
+00010560: 7468 3d76 6964 656f 5f70 6174 6829 0a20  th=video_path). 
+00010570: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00010580: 6f75 7263 6320 3d20 6376 322e 5669 6465  ourcc = cv2.Vide
+00010590: 6f57 7269 7465 725f 666f 7572 6363 282a  oWriter_fourcc(*
+000105a0: 466f 726d 6174 732e 4d50 345f 434f 4445  Formats.MP4_CODE
+000105b0: 432e 7661 6c75 6529 0a20 2020 2020 2020  C.value).       
+000105c0: 2020 2020 2020 2020 2077 7269 7465 7220           writer 
+000105d0: 3d20 6376 322e 5669 6465 6f57 7269 7465  = cv2.VideoWrite
+000105e0: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
+000105f0: 2020 2020 2020 2073 6176 655f 7061 7468         save_path
+00010600: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00010610: 2020 2020 2020 666f 7572 6363 2c0a 2020        fourcc,.  
+00010620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010630: 2020 7669 6465 6f5f 6d65 7461 5b22 6670    video_meta["fp
+00010640: 7322 5d2c 0a20 2020 2020 2020 2020 2020  s"],.           
+00010650: 2020 2020 2020 2020 2028 7669 6465 6f5f           (video_
+00010660: 6d65 7461 5b22 7769 6474 6822 5d2c 2076  meta["width"], v
+00010670: 6964 656f 5f6d 6574 615b 2268 6569 6768  ideo_meta["heigh
+00010680: 7422 5d29 2c0a 2020 2020 2020 2020 2020  t"]),.          
+00010690: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+000106a0: 2020 2020 2020 2020 696d 675f 636e 7420          img_cnt 
+000106b0: 3d20 300a 2020 2020 2020 2020 2020 2020  = 0.            
+000106c0: 2020 2020 7768 696c 6520 5472 7565 3a0a      while True:.
+000106d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000106e0: 2020 2020 7265 742c 2069 6d67 203d 2063      ret, img = c
+000106f0: 6170 2e72 6561 6428 290a 2020 2020 2020  ap.read().      
+00010700: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00010710: 206e 6f74 2072 6574 3a0a 2020 2020 2020   not ret:.      
+00010720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010730: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
+00010740: 2020 2020 2020 2020 2020 2020 696d 6720              img 
+00010750: 3d20 6376 322e 7761 7270 4166 6669 6e65  = cv2.warpAffine
+00010760: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00010770: 2020 2020 2020 2020 2020 696d 672c 0a20            img,. 
+00010780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010790: 2020 2020 2020 2072 6f74 6174 696f 6e5f         rotation_
+000107a0: 6d61 7472 6978 2c0a 2020 2020 2020 2020  matrix,.        
+000107b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000107c0: 2873 656c 662e 7669 6465 6f5f 6d65 7461  (self.video_meta
+000107d0: 5f64 6174 615b 2277 6964 7468 225d 2c20  _data["width"], 
+000107e0: 7365 6c66 2e76 6964 656f 5f6d 6574 615f  self.video_meta_
+000107f0: 6461 7461 5b22 6865 6967 6874 225d 292c  data["height"]),
+00010800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010810: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00010820: 2020 2020 2020 2020 2020 2077 7269 7465             write
+00010830: 722e 7772 6974 6528 696d 6729 0a20 2020  r.write(img).   
+00010840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010850: 2069 6d67 5f63 6e74 202b 3d20 310a 2020   img_cnt += 1.  
+00010860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010870: 2020 7072 696e 7428 0a20 2020 2020 2020    print(.       
+00010880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010890: 2066 2752 6f74 6174 696e 6720 6672 616d   f'Rotating fram
+000108a0: 6520 7b69 6d67 5f63 6e74 7d2f 7b76 6964  e {img_cnt}/{vid
+000108b0: 656f 5f6d 6574 615b 2266 7261 6d65 5f63  eo_meta["frame_c
+000108c0: 6f75 6e74 225d 7d20 2856 6964 656f 207b  ount"]} (Video {
+000108d0: 7669 6465 6f5f 636e 7420 2b20 317d 2f7b  video_cnt + 1}/{
+000108e0: 6c65 6e28 7365 6c66 2e72 6573 756c 7473  len(self.results
+000108f0: 2e6b 6579 7328 2929 7d29 2027 0a20 2020  .keys())}) '.   
+00010900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010910: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00010920: 2020 2063 6170 2e72 656c 6561 7365 2829     cap.release()
+00010930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010940: 2077 7269 7465 722e 7265 6c65 6173 6528   writer.release(
+00010950: 290a 2020 2020 2020 2020 7374 646f 7574  ).        stdout
+00010960: 5f73 7563 6365 7373 280a 2020 2020 2020  _success(.      
+00010970: 2020 2020 2020 6d73 673d 6622 416c 6c20        msg=f"All 
+00010980: 7669 6465 6f73 2072 6f74 6174 6564 2061  videos rotated a
+00010990: 6e64 2073 6176 6564 2069 6e20 7b73 656c  nd saved in {sel
+000109a0: 662e 7361 7665 5f64 6972 7d22 2c0a 2020  f.save_dir}",.  
+000109b0: 2020 2020 2020 2020 2020 656c 6170 7365            elapse
+000109c0: 645f 7469 6d65 3d73 7472 2872 6f75 6e64  d_time=str(round
+000109d0: 2828 7469 6d65 2e74 696d 6528 2920 2d20  ((time.time() - 
+000109e0: 7374 6172 7429 2c20 3229 292c 0a20 2020  start), 2)),.   
+000109f0: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
+00010a00: 7365 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f  self.__class__._
+00010a10: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
+00010a20: 2029 0a0a 2020 2020 6465 6620 5f5f 7361   )..    def __sa
+00010a30: 7665 2873 656c 6629 3a0a 2020 2020 2020  ve(self):.      
+00010a40: 2020 7072 6f63 6573 7320 3d20 4e6f 6e65    process = None
+00010a50: 0a20 2020 2020 2020 2073 656c 662e 7265  .        self.re
+00010a60: 7375 6c74 735b 7365 6c66 2e66 696c 655f  sults[self.file_
+00010a70: 7061 7468 5d20 3d20 7365 6c66 2e64 6966  path] = self.dif
+00010a80: 5f61 6e67 6c65 0a20 2020 2020 2020 2069  _angle.        i
+00010a90: 6620 6c65 6e28 7365 6c66 2e72 6573 756c  f len(self.resul
+00010aa0: 7473 2e6b 6579 7328 2929 203d 3d20 6c65  ts.keys()) == le
+00010ab0: 6e28 7365 6c66 2e76 6964 656f 5f70 6174  n(self.video_pat
+00010ac0: 6873 293a 0a20 2020 2020 2020 2020 2020  hs):.           
+00010ad0: 2070 726f 6365 7373 203d 206d 756c 7469   process = multi
+00010ae0: 7072 6f63 6573 7369 6e67 2e50 726f 6365  processing.Proce
+00010af0: 7373 2874 6172 6765 743d 7365 6c66 2e5f  ss(target=self._
+00010b00: 5f72 756e 5f72 6f74 6174 696f 6e28 2929  _run_rotation())
+00010b10: 0a20 2020 2020 2020 2020 2020 2070 726f  .            pro
+00010b20: 6365 7373 2e73 7461 7274 2829 0a20 2020  cess.start().   
+00010b30: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00010b40: 2020 2020 2020 2073 656c 662e 5f5f 7275         self.__ru
+00010b50: 6e5f 696e 7465 7266 6163 6528 0a20 2020  n_interface(.   
+00010b60: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00010b70: 655f 7061 7468 3d73 656c 662e 7669 6465  e_path=self.vide
+00010b80: 6f5f 7061 7468 735b 6c65 6e28 7365 6c66  o_paths[len(self
+00010b90: 2e72 6573 756c 7473 2e6b 6579 7328 2929  .results.keys())
+00010ba0: 202d 2031 5d0a 2020 2020 2020 2020 2020   - 1].          
+00010bb0: 2020 290a 2020 2020 2020 2020 6966 2070    ).        if p
+00010bc0: 726f 6365 7373 2069 7320 6e6f 7420 4e6f  rocess is not No
+00010bd0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00010be0: 7072 6f63 6573 732e 6a6f 696e 2829 0a0a  process.join()..
+00010bf0: 2020 2020 6465 6620 5f5f 6269 6e64 5f6b      def __bind_k
+00010c00: 6579 7328 7365 6c66 293a 0a20 2020 2020  eys(self):.     
+00010c10: 2020 2073 656c 662e 6d61 696e 5f66 726d     self.main_frm
+00010c20: 2e62 696e 6428 0a20 2020 2020 2020 2020  .bind(.         
+00010c30: 2020 2022 3c4c 6566 743e 222c 206c 616d     "<Left>", lam
+00010c40: 6264 6120 783a 2073 656c 662e 5f5f 726f  bda x: self.__ro
+00010c50: 7461 7465 2876 616c 7565 3d31 2c20 696d  tate(value=1, im
+00010c60: 673d 7365 6c66 2e5f 6f72 6967 5f69 6d67  g=self._orig_img
+00010c70: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+00010c80: 2020 2020 7365 6c66 2e6d 6169 6e5f 6672      self.main_fr
+00010c90: 6d2e 6269 6e64 280a 2020 2020 2020 2020  m.bind(.        
+00010ca0: 2020 2020 223c 5269 6768 743e 222c 206c      "<Right>", l
+00010cb0: 616d 6264 6120 783a 2073 656c 662e 5f5f  ambda x: self.__
+00010cc0: 726f 7461 7465 2876 616c 7565 3d2d 312c  rotate(value=-1,
+00010cd0: 2069 6d67 3d73 656c 662e 5f6f 7269 675f   img=self._orig_
+00010ce0: 696d 6729 0a20 2020 2020 2020 2029 0a20  img).        ). 
+00010cf0: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+00010d00: 5f66 726d 2e62 696e 6428 223c 4573 6361  _frm.bind("<Esca
+00010d10: 7065 3e22 2c20 6c61 6d62 6461 2078 3a20  pe>", lambda x: 
+00010d20: 7365 6c66 2e5f 5f73 6176 6528 2929 0a0a  self.__save())..
+00010d30: 2020 2020 6465 6620 5f5f 7275 6e5f 696e      def __run_in
+00010d40: 7465 7266 6163 6528 7365 6c66 2c20 6669  terface(self, fi
+00010d50: 6c65 5f70 6174 683a 2073 7472 293a 0a20  le_path: str):. 
+00010d60: 2020 2020 2020 2073 656c 662e 6469 665f         self.dif_
+00010d70: 616e 676c 6520 3d20 300a 2020 2020 2020  angle = 0.      
+00010d80: 2020 7072 696e 7428 6669 6c65 5f70 6174    print(file_pat
+00010d90: 6829 0a20 2020 2020 2020 2073 656c 662e  h).        self.
+00010da0: 7669 6465 6f5f 6d65 7461 5f64 6174 6120  video_meta_data 
+00010db0: 3d20 6765 745f 7669 6465 6f5f 6d65 7461  = get_video_meta
+00010dc0: 5f64 6174 6128 7669 6465 6f5f 7061 7468  _data(video_path
+00010dd0: 3d66 696c 655f 7061 7468 290a 2020 2020  =file_path).    
+00010de0: 2020 2020 7365 6c66 2e66 696c 655f 7061      self.file_pa
+00010df0: 7468 203d 2066 696c 655f 7061 7468 0a20  th = file_path. 
+00010e00: 2020 2020 2020 205f 2c20 7365 6c66 2e76         _, self.v
+00010e10: 6964 656f 5f6e 616d 652c 205f 203d 2067  ideo_name, _ = g
+00010e20: 6574 5f66 6e5f 6578 7428 6669 6c65 7061  et_fn_ext(filepa
+00010e30: 7468 3d66 696c 655f 7061 7468 290a 2020  th=file_path).  
+00010e40: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00010e50: 6672 6d20 3d20 546f 706c 6576 656c 2829  frm = Toplevel()
+00010e60: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00010e70: 696e 5f66 726d 2e74 6974 6c65 2866 2252  in_frm.title(f"R
+00010e80: 4f54 4154 4520 5649 4445 4f20 7b73 656c  OTATE VIDEO {sel
+00010e90: 662e 7669 6465 6f5f 6e61 6d65 7d22 290a  f.video_name}").
+00010ea0: 2020 2020 2020 2020 7365 6c66 2e76 6964          self.vid
+00010eb0: 656f 5f66 726d 203d 2046 7261 6d65 2873  eo_frm = Frame(s
+00010ec0: 656c 662e 6d61 696e 5f66 726d 290a 2020  elf.main_frm).  
+00010ed0: 2020 2020 2020 7365 6c66 2e76 6964 656f        self.video
+00010ee0: 5f66 726d 2e67 7269 6428 726f 773d 302c  _frm.grid(row=0,
+00010ef0: 2063 6f6c 756d 6e3d 3029 0a20 2020 2020   column=0).     
+00010f00: 2020 2073 656c 662e 696e 7374 7275 6374     self.instruct
+00010f10: 696f 6e5f 6672 6d20 3d20 4672 616d 6528  ion_frm = Frame(
+00010f20: 7365 6c66 2e6d 6169 6e5f 6672 6d2c 2077  self.main_frm, w
+00010f30: 6964 7468 3d31 3030 2c20 6865 6967 6874  idth=100, height
+00010f40: 3d31 3030 290a 2020 2020 2020 2020 7365  =100).        se
+00010f50: 6c66 2e69 6e73 7472 7563 7469 6f6e 5f66  lf.instruction_f
+00010f60: 726d 2e67 7269 6428 726f 773d 302c 2063  rm.grid(row=0, c
+00010f70: 6f6c 756d 6e3d 322c 2073 7469 636b 793d  olumn=2, sticky=
+00010f80: 4e57 290a 2020 2020 2020 2020 7365 6c66  NW).        self
+00010f90: 2e6b 6579 5f6c 626c 7320 3d20 4c61 6265  .key_lbls = Labe
+00010fa0: 6c28 0a20 2020 2020 2020 2020 2020 2073  l(.            s
+00010fb0: 656c 662e 696e 7374 7275 6374 696f 6e5f  elf.instruction_
+00010fc0: 6672 6d2c 0a20 2020 2020 2020 2020 2020  frm,.           
+00010fd0: 2074 6578 743d 225c 6e5c 6e20 4e61 7669   text="\n\n Navi
+00010fe0: 6761 7469 6f6e 3a20 220a 2020 2020 2020  gation: ".      
+00010ff0: 2020 2020 2020 225c 6e20 4c65 6674 2061        "\n Left a
+00011000: 7272 6f77 203d 2031 c2b0 206c 6566 7422  rrow = 1.. left"
+00011010: 0a20 2020 2020 2020 2020 2020 2022 5c6e  .            "\n
+00011020: 2052 6967 6874 2061 7272 6f77 203d 2031   Right arrow = 1
+00011030: c2b0 2072 6967 6874 220a 2020 2020 2020  .. right".      
+00011040: 2020 2020 2020 225c 6e20 4573 6320 3d20        "\n Esc = 
+00011050: 5361 7665 222c 0a20 2020 2020 2020 2029  Save",.        )
+00011060: 0a0a 2020 2020 2020 2020 7365 6c66 2e6b  ..        self.k
+00011070: 6579 5f6c 626c 732e 6772 6964 2873 7469  ey_lbls.grid(sti
+00011080: 636b 793d 4e57 290a 2020 2020 2020 2020  cky=NW).        
+00011090: 7365 6c66 2e63 6170 203d 2063 7632 2e56  self.cap = cv2.V
+000110a0: 6964 656f 4361 7074 7572 6528 6669 6c65  ideoCapture(file
+000110b0: 5f70 6174 6829 0a20 2020 2020 2020 205f  _path).        _
+000110c0: 2c20 7365 6c66 2e69 6d67 203d 2073 656c  , self.img = sel
+000110d0: 662e 6361 702e 7265 6164 2829 0a20 2020  f.cap.read().   
+000110e0: 2020 2020 2073 656c 662e 5f6f 7269 675f       self._orig_
+000110f0: 696d 6720 3d20 6376 322e 6376 7443 6f6c  img = cv2.cvtCol
+00011100: 6f72 2873 656c 662e 696d 672c 2063 7632  or(self.img, cv2
+00011110: 2e43 4f4c 4f52 5f52 4742 3242 4752 290a  .COLOR_RGB2BGR).
+00011120: 2020 2020 2020 2020 7365 6c66 2e5f 5f69          self.__i
+00011130: 6e73 6572 745f 696d 6728 696d 673d 7365  nsert_img(img=se
+00011140: 6c66 2e5f 6f72 6967 5f69 6d67 290a 2020  lf._orig_img).  
+00011150: 2020 2020 2020 7365 6c66 2e5f 5f62 696e        self.__bin
+00011160: 645f 6b65 7973 2829 0a0a 2020 2020 6465  d_keys()..    de
+00011170: 6620 7275 6e28 7365 6c66 293a 0a20 2020  f run(self):.   
+00011180: 2020 2020 2073 656c 662e 7265 7375 6c74       self.result
+00011190: 7320 3d20 7b7d 0a20 2020 2020 2020 2066  s = {}.        f
+000111a0: 6f72 2076 6964 656f 5f70 6174 6820 696e  or video_path in
+000111b0: 2073 656c 662e 7669 6465 6f5f 7061 7468   self.video_path
+000111c0: 733a 0a20 2020 2020 2020 2020 2020 2073  s:.            s
+000111d0: 656c 662e 5f5f 7275 6e5f 696e 7465 7266  elf.__run_interf
+000111e0: 6163 6528 7669 6465 6f5f 7061 7468 290a  ace(video_path).
+000111f0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+00011200: 6e5f 6672 6d2e 6d61 696e 6c6f 6f70 2829  n_frm.mainloop()
+00011210: 0a0a 0a64 6566 2065 7874 7261 6374 5f66  ...def extract_f
+00011220: 7261 6d65 735f 6672 6f6d 5f61 6c6c 5f76  rames_from_all_v
+00011230: 6964 656f 735f 696e 5f64 6972 6563 746f  ideos_in_directo
+00011240: 7279 280a 2020 2020 636f 6e66 6967 5f70  ry(.    config_p
+00011250: 6174 683a 2055 6e69 6f6e 5b73 7472 2c20  ath: Union[str, 
+00011260: 6f73 2e50 6174 684c 696b 655d 2c20 6469  os.PathLike], di
+00011270: 7265 6374 6f72 793a 2055 6e69 6f6e 5b73  rectory: Union[s
+00011280: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
+00011290: 0a29 202d 3e20 4e6f 6e65 3a0a 2020 2020  .) -> None:.    
+000112a0: 2222 220a 2020 2020 4578 7472 6163 7420  """.    Extract 
+000112b0: 616c 6c20 6672 616d 6573 2066 726f 6d20  all frames from 
+000112c0: 616c 6c20 7669 6465 6f73 2069 6e20 6120  all videos in a 
+000112d0: 6469 7265 6374 6f72 792e 2054 6865 2072  directory. The r
+000112e0: 6573 756c 7473 2061 7265 2073 6176 6564  esults are saved
+000112f0: 2069 6e20 7468 6520 7072 6f6a 6563 745f   in the project_
+00011300: 666f 6c64 6572 2f66 7261 6d65 732f 696e  folder/frames/in
+00011310: 7075 7420 6469 7265 6374 6f72 7920 6f66  put directory of
+00011320: 2074 6865 2053 696d 4241 2070 726f 6a65   the SimBA proje
+00011330: 6374 0a0a 2020 2020 3a70 6172 616d 6574  ct..    :paramet
+00011340: 6572 2073 7472 2063 6f6e 6669 675f 7061  er str config_pa
+00011350: 7468 3a20 7061 7468 2074 6f20 5369 6d42  th: path to SimB
+00011360: 4120 7072 6f6a 6563 7420 636f 6e66 6967  A project config
+00011370: 2066 696c 6520 696e 2043 6f6e 6669 6770   file in Configp
+00011380: 6172 7365 7220 666f 726d 6174 2e0a 2020  arser format..  
+00011390: 2020 3a70 6172 616d 6574 6572 2073 7472    :parameter str
+000113a0: 2064 6972 6563 746f 7279 3a20 7061 7468   directory: path
+000113b0: 2074 6f20 6669 6c65 206f 7220 666f 6c64   to file or fold
+000113c0: 6572 2063 6f6e 7461 696e 696e 6720 7669  er containing vi
+000113d0: 6465 6f73 2069 6e20 6d70 3420 616e 642f  deos in mp4 and/
+000113e0: 6f72 2061 7669 2066 6f72 6d61 742e 0a0a  or avi format...
+000113f0: 2020 2020 3a65 7861 6d70 6c65 3a0a 2020      :example:.  
+00011400: 2020 3e3e 3e20 6578 7472 6163 745f 6672    >>> extract_fr
+00011410: 616d 6573 5f66 726f 6d5f 616c 6c5f 7669  ames_from_all_vi
+00011420: 6465 6f73 5f69 6e5f 6469 7265 6374 6f72  deos_in_director
+00011430: 7928 636f 6e66 6967 5f70 6174 683d 2770  y(config_path='p
+00011440: 726f 6a65 6374 5f66 6f6c 6465 722f 7072  roject_folder/pr
+00011450: 6f6a 6563 745f 636f 6e66 6967 2e69 6e69  oject_config.ini
+00011460: 272c 2073 6f75 7263 653d 272f 7465 7374  ', source='/test
+00011470: 732f 7465 7374 5f64 6174 612f 7669 6465  s/test_data/vide
+00011480: 6f5f 7465 7374 7327 290a 2020 2020 2222  o_tests').    ""
+00011490: 220a 0a20 2020 2074 696d 6572 203d 2053  "..    timer = S
+000114a0: 696d 6261 5469 6d65 7228 7374 6172 743d  imbaTimer(start=
+000114b0: 5472 7565 290a 2020 2020 7669 6465 6f5f  True).    video_
+000114c0: 7061 7468 732c 2076 6964 656f 5f74 7970  paths, video_typ
+000114d0: 6573 203d 205b 5d2c 205b 222e 6176 6922  es = [], [".avi"
+000114e0: 2c20 222e 6d70 3422 5d0a 2020 2020 6669  , ".mp4"].    fi
+000114f0: 6c65 735f 696e 5f66 6f6c 6465 7220 3d20  les_in_folder = 
+00011500: 676c 6f62 2e67 6c6f 6228 6469 7265 6374  glob.glob(direct
+00011510: 6f72 7920 2b20 222f 2a22 290a 2020 2020  ory + "/*").    
+00011520: 666f 7220 6669 6c65 5f70 6174 6820 696e  for file_path in
+00011530: 2066 696c 6573 5f69 6e5f 666f 6c64 6572   files_in_folder
+00011540: 3a0a 2020 2020 2020 2020 5f2c 205f 2c20  :.        _, _, 
+00011550: 6578 7420 3d20 6765 745f 666e 5f65 7874  ext = get_fn_ext
+00011560: 2866 696c 6570 6174 683d 6669 6c65 5f70  (filepath=file_p
+00011570: 6174 6829 0a20 2020 2020 2020 2069 6620  ath).        if 
+00011580: 6578 742e 6c6f 7765 7228 2920 696e 2076  ext.lower() in v
+00011590: 6964 656f 5f74 7970 6573 3a0a 2020 2020  ideo_types:.    
+000115a0: 2020 2020 2020 2020 7669 6465 6f5f 7061          video_pa
+000115b0: 7468 732e 6170 7065 6e64 2866 696c 655f  ths.append(file_
+000115c0: 7061 7468 290a 2020 2020 6966 206c 656e  path).    if len
+000115d0: 2876 6964 656f 5f70 6174 6873 2920 3d3d  (video_paths) ==
+000115e0: 2030 3a0a 2020 2020 2020 2020 7261 6973   0:.        rais
+000115f0: 6520 4e6f 4669 6c65 7346 6f75 6e64 4572  e NoFilesFoundEr
+00011600: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+00011610: 206d 7367 3d66 2253 494d 4241 2045 5252   msg=f"SIMBA ERR
+00011620: 4f52 3a20 3020 7669 6465 6f20 6669 6c65  OR: 0 video file
+00011630: 7320 696e 206d 7034 206f 7220 6176 6920  s in mp4 or avi 
+00011640: 666f 726d 6174 2066 6f75 6e64 2069 6e20  format found in 
+00011650: 7b64 6972 6563 746f 7279 7d22 2c0a 2020  {directory}",.  
+00011660: 2020 2020 2020 2020 2020 736f 7572 6365            source
+00011670: 3d65 7874 7261 6374 5f66 7261 6d65 735f  =extract_frames_
+00011680: 6672 6f6d 5f61 6c6c 5f76 6964 656f 735f  from_all_videos_
+00011690: 696e 5f64 6972 6563 746f 7279 2e5f 5f6e  in_directory.__n
+000116a0: 616d 655f 5f2c 0a20 2020 2020 2020 2029  ame__,.        )
+000116b0: 0a20 2020 2063 6f6e 6669 6720 3d20 7265  .    config = re
+000116c0: 6164 5f63 6f6e 6669 675f 6669 6c65 2863  ad_config_file(c
+000116d0: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
+000116e0: 7072 6f6a 6563 745f 7061 7468 203d 2072  project_path = r
+000116f0: 6561 645f 636f 6e66 6967 5f65 6e74 7279  ead_config_entry
+00011700: 280a 2020 2020 2020 2020 636f 6e66 6967  (.        config
+00011710: 2c20 2247 656e 6572 616c 2073 6574 7469  , "General setti
+00011720: 6e67 7322 2c20 2270 726f 6a65 6374 5f70  ngs", "project_p
+00011730: 6174 6822 2c20 6461 7461 5f74 7970 653d  ath", data_type=
+00011740: 2266 6f6c 6465 725f 7061 7468 220a 2020  "folder_path".  
+00011750: 2020 290a 0a20 2020 2070 7269 6e74 280a    )..    print(.
+00011760: 2020 2020 2020 2020 2245 7874 7261 6374          "Extract
+00011770: 696e 6720 6672 616d 6573 2066 6f72 207b  ing frames for {
+00011780: 7d20 7669 6465 6f73 2069 6e74 6f20 7072  } videos into pr
+00011790: 6f6a 6563 745f 666f 6c64 6572 2f66 7261  oject_folder/fra
+000117a0: 6d65 732f 696e 7075 7420 6469 7265 6374  mes/input direct
+000117b0: 6f72 792e 2e2e 222e 666f 726d 6174 280a  ory...".format(.
+000117c0: 2020 2020 2020 2020 2020 2020 6c65 6e28              len(
+000117d0: 7669 6465 6f5f 7061 7468 7329 0a20 2020  video_paths).   
+000117e0: 2020 2020 2029 0a20 2020 2029 0a20 2020       ).    ).   
+000117f0: 2066 6f72 2076 6964 656f 5f70 6174 6820   for video_path 
+00011800: 696e 2076 6964 656f 5f70 6174 6873 3a0a  in video_paths:.
+00011810: 2020 2020 2020 2020 6469 725f 6e61 6d65          dir_name
+00011820: 2c20 7669 6465 6f5f 6e61 6d65 2c20 6578  , video_name, ex
+00011830: 7420 3d20 6765 745f 666e 5f65 7874 2876  t = get_fn_ext(v
+00011840: 6964 656f 5f70 6174 6829 0a20 2020 2020  ideo_path).     
+00011850: 2020 2073 6176 655f 7061 7468 203d 206f     save_path = o
+00011860: 732e 7061 7468 2e6a 6f69 6e28 7072 6f6a  s.path.join(proj
+00011870: 6563 745f 7061 7468 2c20 2266 7261 6d65  ect_path, "frame
+00011880: 7322 2c20 2269 6e70 7574 222c 2076 6964  s", "input", vid
+00011890: 656f 5f6e 616d 6529 0a20 2020 2020 2020  eo_name).       
+000118a0: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
+000118b0: 6578 6973 7473 2873 6176 655f 7061 7468  exists(save_path
+000118c0: 293a 0a20 2020 2020 2020 2020 2020 206f  ):.            o
+000118d0: 732e 6d61 6b65 6469 7273 2873 6176 655f  s.makedirs(save_
+000118e0: 7061 7468 290a 2020 2020 2020 2020 656c  path).        el
+000118f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00011900: 7072 696e 7428 0a20 2020 2020 2020 2020  print(.         
+00011910: 2020 2020 2020 2066 2246 7261 6d65 7320         f"Frames 
+00011920: 666f 7220 7669 6465 6f20 7b76 6964 656f  for video {video
+00011930: 5f6e 616d 657d 2061 6c72 6561 6479 2065  _name} already e
+00011940: 7874 7261 6374 6564 2e20 5369 6d42 4120  xtracted. SimBA 
+00011950: 6973 206f 7665 7277 7269 7469 6e67 2070  is overwriting p
+00011960: 7269 6f72 2066 7261 6d65 732e 2e2e 220a  rior frames...".
+00011970: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00011980: 2020 2020 2020 7669 6465 6f5f 746f 5f66        video_to_f
+00011990: 7261 6d65 7328 7669 6465 6f5f 7061 7468  rames(video_path
+000119a0: 2c20 7361 7665 5f70 6174 682c 206f 7665  , save_path, ove
+000119b0: 7277 7269 7465 3d54 7275 652c 2065 7665  rwrite=True, eve
+000119c0: 7279 3d31 2c20 6368 756e 6b5f 7369 7a65  ry=1, chunk_size
+000119d0: 3d31 3030 3029 0a20 2020 2074 696d 6572  =1000).    timer
+000119e0: 2e73 746f 705f 7469 6d65 7228 290a 2020  .stop_timer().  
+000119f0: 2020 7374 646f 7574 5f73 7563 6365 7373    stdout_success
+00011a00: 280a 2020 2020 2020 2020 6622 4672 616d  (.        f"Fram
+00011a10: 6573 2063 7265 6174 6564 2066 6f72 207b  es created for {
+00011a20: 7374 7228 6c65 6e28 7669 6465 6f5f 7061  str(len(video_pa
+00011a30: 7468 7329 297d 2076 6964 656f 7322 2c0a  ths))} videos",.
+00011a40: 2020 2020 2020 2020 656c 6170 7365 645f          elapsed_
+00011a50: 7469 6d65 3d74 696d 6572 2e65 6c61 7073  time=timer.elaps
+00011a60: 6564 5f74 696d 655f 7374 722c 0a20 2020  ed_time_str,.   
+00011a70: 2020 2020 2073 6f75 7263 653d 6578 7472       source=extr
+00011a80: 6163 745f 6672 616d 6573 5f66 726f 6d5f  act_frames_from_
+00011a90: 616c 6c5f 7669 6465 6f73 5f69 6e5f 6469  all_videos_in_di
+00011aa0: 7265 6374 6f72 792e 5f5f 6e61 6d65 5f5f  rectory.__name__
+00011ab0: 2c0a 2020 2020 290a 0a0a 6465 6620 636f  ,.    )...def co
+00011ac0: 7079 5f69 6d67 5f66 6f6c 6465 7228 0a20  py_img_folder(. 
+00011ad0: 2020 2063 6f6e 6669 675f 7061 7468 3a20     config_path: 
+00011ae0: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
+00011af0: 7468 4c69 6b65 5d2c 2073 6f75 7263 653a  thLike], source:
+00011b00: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
+00011b10: 6174 684c 696b 655d 0a29 202d 3e20 4e6f  athLike].) -> No
+00011b20: 6e65 3a0a 2020 2020 2222 220a 2020 2020  ne:.    """.    
+00011b30: 436f 7079 2064 6972 6563 746f 7279 206f  Copy directory o
+00011b40: 6620 706e 6720 6669 6c65 7320 746f 2074  f png files to t
+00011b50: 6865 2053 696d 4241 2070 726f 6a65 6374  he SimBA project
+00011b60: 2e20 5468 6520 6469 7265 6374 6f72 7920  . The directory 
+00011b70: 6973 2073 746f 7265 6420 696e 2074 6865  is stored in the
+00011b80: 2070 726f 6a65 6374 5f66 6f6c 6465 722f   project_folder/
+00011b90: 6672 616d 6573 2f69 6e70 7574 2066 6f6c  frames/input fol
+00011ba0: 6465 7220 6f66 2074 6865 2053 696d 4241  der of the SimBA
+00011bb0: 2070 726f 6a65 6374 0a0a 2020 2020 3a70   project..    :p
+00011bc0: 6172 616d 6574 6572 2073 7472 2063 6f6e  arameter str con
+00011bd0: 6669 675f 7061 7468 3a20 7061 7468 2074  fig_path: path t
+00011be0: 6f20 5369 6d42 4120 7072 6f6a 6563 7420  o SimBA project 
+00011bf0: 636f 6e66 6967 2066 696c 6520 696e 2043  config file in C
+00011c00: 6f6e 6669 6770 6172 7365 7220 666f 726d  onfigparser form
+00011c10: 6174 2e0a 2020 2020 3a70 6172 616d 6574  at..    :paramet
+00011c20: 6572 2073 7472 2073 6f75 7263 653a 2070  er str source: p
+00011c30: 6174 6820 746f 2069 6d61 6765 2066 6f6c  ath to image fol
+00011c40: 6465 7220 6f75 7473 6964 6520 5369 6d42  der outside SimB
+00011c50: 4120 7072 6f6a 6563 742e 0a0a 2020 2020  A project...    
+00011c60: 3a65 7861 6d70 6c65 3a0a 2020 2020 3e3e  :example:.    >>
+00011c70: 3e20 636f 7079 5f69 6d67 5f66 6f6c 6465  > copy_img_folde
+00011c80: 7228 636f 6e66 6967 5f70 6174 683d 274d  r(config_path='M
+00011c90: 7953 696d 4241 7072 6f6a 6563 7443 6f6e  ySimBAprojectCon
+00011ca0: 6669 6727 2c20 736f 7572 6365 3d27 2f44  fig', source='/D
+00011cb0: 6972 6563 746f 7279 5769 7468 5669 6465  irectoryWithVide
+00011cc0: 6f73 2f27 290a 0a20 2020 2022 2222 0a20  os/')..    """. 
+00011cd0: 2020 2074 696d 6572 203d 2053 696d 6261     timer = Simba
+00011ce0: 5469 6d65 7228 7374 6172 743d 5472 7565  Timer(start=True
+00011cf0: 290a 2020 2020 6966 206e 6f74 206f 732e  ).    if not os.
+00011d00: 7061 7468 2e69 7364 6972 2873 6f75 7263  path.isdir(sourc
+00011d10: 6529 3a0a 2020 2020 2020 2020 7261 6973  e):.        rais
+00011d20: 6520 4e6f 7444 6972 6563 746f 7279 4572  e NotDirectoryEr
+00011d30: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+00011d40: 206d 7367 3d66 2253 494d 4241 2045 5252   msg=f"SIMBA ERR
+00011d50: 4f52 3a20 736f 7572 6365 207b 736f 7572  OR: source {sour
+00011d60: 6365 7d20 6973 206e 6f74 2061 2064 6972  ce} is not a dir
+00011d70: 6563 746f 7279 2e22 2c0a 2020 2020 2020  ectory.",.      
+00011d80: 2020 2020 2020 736f 7572 6365 3d63 6f70        source=cop
+00011d90: 795f 696d 675f 666f 6c64 6572 2e5f 5f6e  y_img_folder.__n
+00011da0: 616d 655f 5f2c 0a20 2020 2020 2020 2029  ame__,.        )
+00011db0: 0a20 2020 2069 6620 6c65 6e28 676c 6f62  .    if len(glob
+00011dc0: 2e67 6c6f 6228 736f 7572 6365 202b 2022  .glob(source + "
+00011dd0: 2f2a 2e70 6e67 2229 2920 3d3d 2030 3a0a  /*.png")) == 0:.
+00011de0: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
+00011df0: 4669 6c65 7346 6f75 6e64 4572 726f 7228  FilesFoundError(
+00011e00: 0a20 2020 2020 2020 2020 2020 206d 7367  .            msg
+00011e10: 3d66 2253 494d 4241 2045 5252 4f52 3a20  =f"SIMBA ERROR: 
+00011e20: 736f 7572 6365 207b 736f 7572 6365 7d20  source {source} 
+00011e30: 646f 6573 206e 6f74 2063 6f6e 7461 696e  does not contain
+00011e40: 2061 6e79 202e 706e 6720 6669 6c65 732e   any .png files.
+00011e50: 222c 0a20 2020 2020 2020 2020 2020 2073  ",.            s
+00011e60: 6f75 7263 653d 636f 7079 5f69 6d67 5f66  ource=copy_img_f
+00011e70: 6f6c 6465 722e 5f5f 6e61 6d65 5f5f 2c0a  older.__name__,.
+00011e80: 2020 2020 2020 2020 290a 2020 2020 696e          ).    in
+00011e90: 7075 745f 6261 7365 6e61 6d65 203d 206f  put_basename = o
+00011ea0: 732e 7061 7468 2e62 6173 656e 616d 6528  s.path.basename(
+00011eb0: 736f 7572 6365 290a 2020 2020 636f 6e66  source).    conf
+00011ec0: 6967 203d 2072 6561 645f 636f 6e66 6967  ig = read_config
+00011ed0: 5f66 696c 6528 636f 6e66 6967 5f70 6174  _file(config_pat
+00011ee0: 6829 0a20 2020 2070 726f 6a65 6374 5f70  h).    project_p
+00011ef0: 6174 6820 3d20 7265 6164 5f63 6f6e 6669  ath = read_confi
+00011f00: 675f 656e 7472 7928 0a20 2020 2020 2020  g_entry(.       
+00011f10: 2063 6f6e 6669 672c 0a20 2020 2020 2020   config,.       
+00011f20: 2043 6f6e 6669 674b 6579 2e47 454e 4552   ConfigKey.GENER
+00011f30: 414c 5f53 4554 5449 4e47 532e 7661 6c75  AL_SETTINGS.valu
+00011f40: 652c 0a20 2020 2020 2020 2043 6f6e 6669  e,.        Confi
+00011f50: 674b 6579 2e50 524f 4a45 4354 5f50 4154  gKey.PROJECT_PAT
+00011f60: 482e 7661 6c75 652c 0a20 2020 2020 2020  H.value,.       
+00011f70: 2064 6174 615f 7479 7065 3d22 666f 6c64   data_type="fold
+00011f80: 6572 5f70 6174 6822 2c0a 2020 2020 290a  er_path",.    ).
+00011f90: 2020 2020 696e 7075 745f 6672 616d 6573      input_frames
+00011fa0: 5f64 6972 203d 206f 732e 7061 7468 2e6a  _dir = os.path.j
+00011fb0: 6f69 6e28 7072 6f6a 6563 745f 7061 7468  oin(project_path
+00011fc0: 2c20 5061 7468 732e 494e 5055 545f 4652  , Paths.INPUT_FR
+00011fd0: 414d 4553 5f44 4952 2e76 616c 7565 290a  AMES_DIR.value).
+00011fe0: 2020 2020 6465 7374 696e 6174 696f 6e20      destination 
+00011ff0: 3d20 6f73 2e70 6174 682e 6a6f 696e 2869  = os.path.join(i
+00012000: 6e70 7574 5f66 7261 6d65 735f 6469 722c  nput_frames_dir,
+00012010: 2069 6e70 7574 5f62 6173 656e 616d 6529   input_basename)
+00012020: 0a20 2020 2069 6620 6f73 2e70 6174 682e  .    if os.path.
+00012030: 6973 6469 7228 6465 7374 696e 6174 696f  isdir(destinatio
+00012040: 6e29 3a0a 2020 2020 2020 2020 7261 6973  n):.        rais
+00012050: 6520 4469 7265 6374 6f72 7945 7869 7374  e DirectoryExist
+00012060: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+00012070: 2020 206d 7367 3d66 2253 494d 4241 2045     msg=f"SIMBA E
+00012080: 5252 4f52 3a20 7b64 6573 7469 6e61 7469  RROR: {destinati
+00012090: 6f6e 7d20 616c 7265 6164 7920 6578 6973  on} already exis
+000120a0: 7420 696e 2053 696d 4241 2070 726f 6a65  t in SimBA proje
+000120b0: 6374 2e22 2c0a 2020 2020 2020 2020 2020  ct.",.          
+000120c0: 2020 736f 7572 6365 3d63 6f70 795f 696d    source=copy_im
+000120d0: 675f 666f 6c64 6572 2e5f 5f6e 616d 655f  g_folder.__name_
+000120e0: 5f2c 0a20 2020 2020 2020 2029 0a20 2020  _,.        ).   
+000120f0: 2070 7269 6e74 2866 2249 6d70 6f72 7469   print(f"Importi
+00012100: 6e67 2069 6d61 6765 2066 696c 6573 2066  ng image files f
+00012110: 6f72 207b 696e 7075 745f 6261 7365 6e61  or {input_basena
+00012120: 6d65 7d2e 2e2e 2229 0a20 2020 2073 6875  me}...").    shu
+00012130: 7469 6c2e 636f 7079 7472 6565 2873 6f75  til.copytree(sou
+00012140: 7263 652c 2064 6573 7469 6e61 7469 6f6e  rce, destination
+00012150: 290a 2020 2020 7469 6d65 722e 7374 6f70  ).    timer.stop
+00012160: 5f74 696d 6572 2829 0a20 2020 2073 7464  _timer().    std
+00012170: 6f75 745f 7375 6363 6573 7328 0a20 2020  out_success(.   
+00012180: 2020 2020 206d 7367 3d66 227b 6465 7374       msg=f"{dest
+00012190: 696e 6174 696f 6e7d 2069 6d70 6f72 7465  ination} importe
+000121a0: 6420 746f 2053 696d 4241 2070 726f 6a65  d to SimBA proje
+000121b0: 6374 222c 0a20 2020 2020 2020 2065 6c61  ct",.        ela
+000121c0: 7073 6564 5f74 696d 653d 7469 6d65 722e  psed_time=timer.
+000121d0: 656c 6170 7365 645f 7469 6d65 5f73 7472  elapsed_time_str
+000121e0: 2c0a 2020 2020 2020 2020 736f 7572 6365  ,.        source
+000121f0: 3d63 6f70 795f 696d 675f 666f 6c64 6572  =copy_img_folder
+00012200: 2e5f 5f6e 616d 655f 5f2c 0a20 2020 2029  .__name__,.    )
+00012210: 0a0a 0a64 6566 2061 7070 656e 645f 6175  ...def append_au
+00012220: 6469 6f28 0a20 2020 2076 6964 656f 5f70  dio(.    video_p
+00012230: 6174 683a 2055 6e69 6f6e 5b73 7472 2c20  ath: Union[str, 
+00012240: 6f73 2e50 6174 684c 696b 655d 2c0a 2020  os.PathLike],.  
+00012250: 2020 6175 6469 6f5f 7061 7468 3a20 556e    audio_path: Un
+00012260: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
+00012270: 4c69 6b65 5d2c 0a20 2020 2061 7564 696f  Like],.    audio
+00012280: 5f73 7263 5f74 7970 653a 204c 6974 6572  _src_type: Liter
+00012290: 616c 5b22 7669 6465 6f22 2c20 2261 7564  al["video", "aud
+000122a0: 696f 225d 203d 2022 7669 6465 6f22 2c0a  io"] = "video",.
+000122b0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2022  ) -> None:.    "
+000122c0: 2222 0a20 2020 2041 7070 656e 6420 6175  "".    Append au
+000122d0: 6469 6f20 7472 6163 6b20 6672 6f6d 206f  dio track from o
+000122e0: 6e65 2076 6964 656f 2074 6f20 616e 6f74  ne video to anot
+000122f0: 6865 7220 7669 6465 6f20 7769 7468 6f75  her video withou
+00012300: 7420 616e 2061 7564 696f 2074 7261 636b  t an audio track
+00012310: 2e0a 0a20 2020 203a 7061 7261 6d20 556e  ...    :param Un
+00012320: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
+00012330: 4c69 6b65 5d20 7669 6465 6f5f 6f6e 655f  Like] video_one_
+00012340: 7061 7468 3a20 5061 7468 2074 6f20 7669  path: Path to vi
+00012350: 6465 6f20 6669 6c65 2077 6974 686f 7574  deo file without
+00012360: 2061 7564 696f 2074 7261 636b 2e0a 2020   audio track..  
+00012370: 2020 3a70 6172 616d 2055 6e69 6f6e 5b73    :param Union[s
+00012380: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
+00012390: 2061 7564 696f 5f70 6174 683a 2050 6174   audio_path: Pat
+000123a0: 6820 746f 2066 696c 6520 2865 2e67 2e2c  h to file (e.g.,
+000123b0: 2076 6964 656f 2920 7769 7468 2061 7564   video) with aud
+000123c0: 696f 2074 7261 636b 2e0a 2020 2020 3a70  io track..    :p
+000123d0: 6172 616d 204c 6974 6572 616c 5b27 7669  aram Literal['vi
+000123e0: 6465 6f27 2c20 2761 7564 696f 275d 2061  deo', 'audio'] a
+000123f0: 7564 696f 5f73 7263 5f74 7970 653a 2054  udio_src_type: T
+00012400: 7970 6520 6f66 2061 7564 696f 2073 6f75  ype of audio sou
+00012410: 7263 6520 6f66 2022 7669 6465 6f5f 7477  rce of "video_tw
+00012420: 6f5f 7061 7468 2220 2865 2e67 2e2c 2076  o_path" (e.g., v
+00012430: 6964 656f 206f 7220 6175 6469 6f20 6669  ideo or audio fi
+00012440: 6c65 292e 0a0a 2020 2020 3a65 7861 6d70  le)...    :examp
+00012450: 6c65 3a0a 2020 2020 3e3e 3e20 6170 7065  le:.    >>> appe
+00012460: 6e64 5f61 7564 696f 2876 6964 656f 5f70  nd_audio(video_p
+00012470: 6174 683d 272f 5573 6572 732f 7369 6d6f  ath='/Users/simo
+00012480: 6e2f 4465 736b 746f 702f 656e 7673 2f74  n/Desktop/envs/t
+00012490: 726f 7562 6c65 7368 6f6f 7469 6e67 2f74  roubleshooting/t
+000124a0: 776f 5f62 6c61 636b 5f61 6e69 6d61 6c73  wo_black_animals
+000124b0: 5f31 3462 702f 7072 6f6a 6563 745f 666f  _14bp/project_fo
+000124c0: 6c64 6572 2f76 6964 656f 732f 6d65 7267  lder/videos/merg
+000124d0: 6564 5f76 6964 656f 5f32 3032 3330 3432  ed_video_2023042
+000124e0: 3532 3031 3633 372e 6d70 3427 2c0a 2020  5201637.mp4',.  
+000124f0: 2020 3e3e 3e20 6175 6469 6f5f 7061 7468    >>> audio_path
+00012500: 3d22 2f55 7365 7273 2f73 696d 6f6e 2f44  ="/Users/simon/D
+00012510: 6f63 756d 656e 7473 2f5a 6f6f 6d2f 6464  ocuments/Zoom/dd
+00012520: 642f 7669 6465 6f31 3138 3037 3332 3233  d/video118073223
+00012530: 332e 6d70 3422 290a 2020 2020 2222 220a  3.mp4").    """.
+00012540: 0a20 2020 2069 6620 6e6f 7420 6368 6563  .    if not chec
+00012550: 6b5f 6666 6d70 6567 5f61 7661 696c 6162  k_ffmpeg_availab
+00012560: 6c65 2829 3a0a 2020 2020 2020 2020 7261  le():.        ra
+00012570: 6973 6520 4646 4d50 4547 4e6f 7446 6f75  ise FFMPEGNotFou
+00012580: 6e64 4572 726f 7228 0a20 2020 2020 2020  ndError(.       
+00012590: 2020 2020 206d 7367 3d22 4646 4d70 6567       msg="FFMpeg
+000125a0: 206e 6f74 2066 6f75 6e64 206f 6e20 636f   not found on co
+000125b0: 6d70 7574 6572 2e20 5365 6520 5369 6d42  mputer. See SimB
+000125c0: 4120 646f 6373 2066 6f72 2069 6e73 7461  A docs for insta
+000125d0: 6c6c 2069 6e73 7472 7563 7469 6f6e 732e  ll instructions.
+000125e0: 222c 0a20 2020 2020 2020 2020 2020 2073  ",.            s
+000125f0: 6f75 7263 653d 6170 7065 6e64 5f61 7564  ource=append_aud
+00012600: 696f 2e5f 5f6e 616d 655f 5f2c 0a20 2020  io.__name__,.   
+00012610: 2020 2020 2029 0a20 2020 2063 6865 636b       ).    check
+00012620: 5f66 696c 655f 6578 6973 745f 616e 645f  _file_exist_and_
+00012630: 7265 6164 6162 6c65 2866 696c 655f 7061  readable(file_pa
+00012640: 7468 3d76 6964 656f 5f70 6174 6829 0a20  th=video_path). 
+00012650: 2020 2063 6865 636b 5f66 696c 655f 6578     check_file_ex
+00012660: 6973 745f 616e 645f 7265 6164 6162 6c65  ist_and_readable
+00012670: 2866 696c 655f 7061 7468 3d61 7564 696f  (file_path=audio
+00012680: 5f70 6174 6829 0a20 2020 2076 6964 656f  _path).    video
+00012690: 5f6d 6574 615f 6461 7461 203d 2067 6574  _meta_data = get
+000126a0: 5f76 6964 656f 5f6d 6574 615f 6461 7461  _video_meta_data
+000126b0: 2876 6964 656f 5f70 6174 683d 7669 6465  (video_path=vide
+000126c0: 6f5f 7061 7468 290a 2020 2020 6175 6469  o_path).    audi
+000126d0: 6f5f 7372 635f 6d65 7461 5f64 6174 6120  o_src_meta_data 
+000126e0: 3d20 6765 745f 7669 6465 6f5f 6d65 7461  = get_video_meta
+000126f0: 5f64 6174 6128 7669 6465 6f5f 7061 7468  _data(video_path
+00012700: 3d61 7564 696f 5f70 6174 6829 0a20 2020  =audio_path).   
+00012710: 2073 6176 655f 7061 7468 203d 206f 732e   save_path = os.
+00012720: 7061 7468 2e6a 6f69 6e28 0a20 2020 2020  path.join(.     
+00012730: 2020 206f 732e 7061 7468 2e64 6972 6e61     os.path.dirna
+00012740: 6d65 2876 6964 656f 5f70 6174 6829 2c20  me(video_path), 
+00012750: 6765 745f 666e 5f65 7874 2866 696c 6570  get_fn_ext(filep
+00012760: 6174 683d 7669 6465 6f5f 7061 7468 295b  ath=video_path)[
+00012770: 315d 202b 2022 5f77 5f61 7564 696f 2e6d  1] + "_w_audio.m
+00012780: 7034 220a 2020 2020 290a 2020 2020 636d  p4".    ).    cm
+00012790: 6420 3d20 5b0a 2020 2020 2020 2020 2266  d = [.        "f
+000127a0: 6670 726f 6265 222c 0a20 2020 2020 2020  fprobe",.       
+000127b0: 2022 2d76 222c 0a20 2020 2020 2020 2022   "-v",.        "
+000127c0: 6572 726f 7222 2c0a 2020 2020 2020 2020  error",.        
+000127d0: 222d 7365 6c65 6374 5f73 7472 6561 6d73  "-select_streams
+000127e0: 222c 0a20 2020 2020 2020 2022 613a 3022  ",.        "a:0"
+000127f0: 2c0a 2020 2020 2020 2020 222d 7368 6f77  ,.        "-show
+00012800: 5f65 6e74 7269 6573 222c 0a20 2020 2020  _entries",.     
+00012810: 2020 2022 7374 7265 616d 3d63 6f64 6563     "stream=codec
+00012820: 5f6e 616d 6522 2c0a 2020 2020 2020 2020  _name",.        
+00012830: 222d 6f66 222c 0a20 2020 2020 2020 2022  "-of",.        "
+00012840: 6465 6661 756c 743d 6e6f 7072 696e 745f  default=noprint_
+00012850: 7772 6170 7065 7273 3d31 3a6e 6f6b 6579  wrappers=1:nokey
+00012860: 3d31 222c 0a20 2020 2020 2020 2061 7564  =1",.        aud
+00012870: 696f 5f70 6174 682c 0a20 2020 205d 0a20  io_path,.    ]. 
+00012880: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+00012890: 7472 6163 6b5f 7479 7065 203d 2028 0a20  track_type = (. 
+000128a0: 2020 2020 2020 2020 2020 2073 7562 7072             subpr
+000128b0: 6f63 6573 732e 6368 6563 6b5f 6f75 7470  ocess.check_outp
+000128c0: 7574 2863 6d64 2c20 7374 6465 7272 3d73  ut(cmd, stderr=s
+000128d0: 7562 7072 6f63 6573 732e 5354 444f 5554  ubprocess.STDOUT
+000128e0: 290a 2020 2020 2020 2020 2020 2020 2e64  ).            .d
+000128f0: 6563 6f64 6528 2275 7466 2d38 2229 0a20  ecode("utf-8"). 
+00012900: 2020 2020 2020 2020 2020 202e 7374 7269             .stri
+00012910: 7028 290a 2020 2020 2020 2020 290a 2020  p().        ).  
+00012920: 2020 6578 6365 7074 2073 7562 7072 6f63    except subproc
+00012930: 6573 732e 4361 6c6c 6564 5072 6f63 6573  ess.CalledProces
+00012940: 7345 7272 6f72 3a0a 2020 2020 2020 2020  sError:.        
+00012950: 7261 6973 6520 4e6f 4461 7461 4572 726f  raise NoDataErro
+00012960: 7228 0a20 2020 2020 2020 2020 2020 206d  r(.            m
+00012970: 7367 3d66 224e 6f20 6175 6469 6f20 7472  sg=f"No audio tr
+00012980: 6163 6b20 666f 756e 6420 696e 2066 696c  ack found in fil
+00012990: 6520 7b61 7564 696f 5f70 6174 687d 222c  e {audio_path}",
+000129a0: 0a20 2020 2020 2020 2020 2020 2073 6f75  .            sou
+000129b0: 7263 653d 6170 7065 6e64 5f61 7564 696f  rce=append_audio
+000129c0: 2e5f 5f6e 616d 655f 5f2c 0a20 2020 2020  .__name__,.     
+000129d0: 2020 2029 0a0a 2020 2020 6966 2076 6964     )..    if vid
+000129e0: 656f 5f6d 6574 615f 6461 7461 5b22 6672  eo_meta_data["fr
+000129f0: 616d 655f 636f 756e 7422 5d20 213d 2061  ame_count"] != a
+00012a00: 7564 696f 5f73 7263 5f6d 6574 615f 6461  udio_src_meta_da
+00012a10: 7461 5b22 6672 616d 655f 636f 756e 7422  ta["frame_count"
+00012a20: 5d3a 0a20 2020 2020 2020 2049 6e56 616c  ]:.        InVal
+00012a30: 6964 5573 6572 496e 7075 7457 6172 6e69  idUserInputWarni
+00012a40: 6e67 280a 2020 2020 2020 2020 2020 2020  ng(.            
+00012a50: 6d73 673d 6627 5468 6520 7669 6465 6f20  msg=f'The video 
+00012a60: 287b 7669 6465 6f5f 6d65 7461 5f64 6174  ({video_meta_dat
+00012a70: 615b 2266 7261 6d65 5f63 6f75 6e74 225d  a["frame_count"]
+00012a80: 7d29 2061 6e64 2061 7564 696f 2073 6f75  }) and audio sou
+00012a90: 7263 6520 287b 6175 6469 6f5f 7372 635f  rce ({audio_src_
+00012aa0: 6d65 7461 5f64 6174 615b 2266 7261 6d65  meta_data["frame
+00012ab0: 5f63 6f75 6e74 225d 7d29 2064 6f65 7320  _count"]}) does 
+00012ac0: 6e6f 7420 6861 7665 2061 6e20 6571 7561  not have an equa
+00012ad0: 6c20 6e75 6d62 6572 206f 6620 6672 616d  l number of fram
+00012ae0: 6573 2e27 2c0a 2020 2020 2020 2020 2020  es.',.          
+00012af0: 2020 736f 7572 6365 3d61 7070 656e 645f    source=append_
+00012b00: 6175 6469 6f2e 5f5f 6e61 6d65 5f5f 2c0a  audio.__name__,.
+00012b10: 2020 2020 2020 2020 290a 0a20 2020 2063          )..    c
+00012b20: 6d64 203d 2066 2766 666d 7065 6720 2d69  md = f'ffmpeg -i
+00012b30: 2022 7b76 6964 656f 5f70 6174 687d 2220   "{video_path}" 
+00012b40: 2d69 2022 7b61 7564 696f 5f70 6174 687d  -i "{audio_path}
+00012b50: 2220 2d63 3a76 2063 6f70 7920 2d6d 6170  " -c:v copy -map
+00012b60: 2030 3a76 3a30 202d 6d61 7020 313a 613a   0:v:0 -map 1:a:
+00012b70: 3020 227b 7361 7665 5f70 6174 687d 2220  0 "{save_path}" 
+00012b80: 2d79 270a 0a20 2020 2074 7279 3a0a 2020  -y'..    try:.  
+00012b90: 2020 2020 2020 7375 6270 726f 6365 7373        subprocess
+00012ba0: 2e72 756e 2863 6d64 2c20 7368 656c 6c3d  .run(cmd, shell=
+00012bb0: 5472 7565 2c20 6368 6563 6b3d 5472 7565  True, check=True
+00012bc0: 290a 2020 2020 6578 6365 7074 2073 7562  ).    except sub
+00012bd0: 7072 6f63 6573 732e 4361 6c6c 6564 5072  process.CalledPr
+00012be0: 6f63 6573 7345 7272 6f72 2061 7320 653a  ocessError as e:
+00012bf0: 0a20 2020 2020 2020 2070 7269 6e74 2822  .        print("
+00012c00: 4572 726f 723a 222c 2065 290a 0a20 2020  Error:", e)..   
+00012c10: 2073 7464 6f75 745f 7375 6363 6573 7328   stdout_success(
+00012c20: 0a20 2020 2020 2020 206d 7367 3d66 2241  .        msg=f"A
+00012c30: 7564 696f 206d 6572 6765 6420 7375 6363  udio merged succ
+00012c40: 6573 7366 756c 6c79 2c20 6669 6c65 2073  essfully, file s
+00012c50: 6176 6564 2061 7420 7b73 6176 655f 7061  aved at {save_pa
+00012c60: 7468 7d21 222c 0a20 2020 2020 2020 2073  th}!",.        s
+00012c70: 6f75 7263 653d 6170 7065 6e64 5f61 7564  ource=append_aud
+00012c80: 696f 2e5f 5f6e 616d 655f 5f2c 0a20 2020  io.__name__,.   
+00012c90: 2029 0a0a 0a64 6566 2063 726f 705f 7369   )...def crop_si
+00012ca0: 6e67 6c65 5f76 6964 656f 5f63 6972 636c  ngle_video_circl
+00012cb0: 6528 6669 6c65 5f70 6174 683a 2055 6e69  e(file_path: Uni
+00012cc0: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
+00012cd0: 696b 655d 2920 2d3e 204e 6f6e 653a 0a20  ike]) -> None:. 
+00012ce0: 2020 2022 2222 0a20 2020 2043 726f 7020     """.    Crop 
+00012cf0: 6120 7669 6465 6f20 6261 7365 6420 6f6e  a video based on
+00012d00: 2063 6972 6375 6c61 7220 7265 6769 6f6e   circular region
+00012d10: 7320 6f66 2069 6e74 6572 6573 7420 2852  s of interest (R
+00012d20: 4f49 7329 2073 656c 6563 7465 6420 6279  OIs) selected by
+00012d30: 2074 6865 2075 7365 722e 0a0a 2020 2020   the user...    
+00012d40: 3a70 6172 616d 2020 556e 696f 6e5b 7374  :param  Union[st
+00012d50: 722c 206f 732e 5061 7468 4c69 6b65 5d20  r, os.PathLike] 
+00012d60: 6669 6c65 5f70 6174 683a 2054 6865 2070  file_path: The p
+00012d70: 6174 6820 746f 2074 6865 2069 6e70 7574  ath to the input
+00012d80: 2076 6964 656f 2066 696c 652e 0a0a 2020   video file...  
+00012d90: 2020 2e2e 206e 6f74 653a 3a0a 2020 2020    .. note::.    
+00012da0: 2020 2054 6869 7320 6675 6e63 7469 6f6e     This function
+00012db0: 2063 726f 7073 2074 6865 2069 6e70 7574   crops the input
+00012dc0: 2076 6964 656f 2062 6173 6564 206f 6e20   video based on 
+00012dd0: 6369 7263 756c 6172 2072 6567 696f 6e73  circular regions
+00012de0: 206f 6620 696e 7465 7265 7374 2028 524f   of interest (RO
+00012df0: 4973 2920 7365 6c65 6374 6564 2062 7920  Is) selected by 
+00012e00: 7468 6520 7573 6572 2e0a 2020 2020 2020  the user..      
+00012e10: 2054 6865 2075 7365 7220 6973 2070 726f   The user is pro
+00012e20: 6d70 7465 6420 746f 2073 656c 6563 7420  mpted to select 
+00012e30: 6120 6369 7263 756c 6172 2052 4f49 206f  a circular ROI o
+00012e40: 6e20 7468 6520 7669 6465 6f20 6672 616d  n the video fram
+00012e50: 652c 2061 6e64 2074 6865 2066 756e 6374  e, and the funct
+00012e60: 696f 6e20 7468 656e 2063 726f 7073 2074  ion then crops t
+00012e70: 6865 2076 6964 656f 0a20 2020 2020 2020  he video.       
+00012e80: 6261 7365 6420 6f6e 2074 6865 2073 656c  based on the sel
+00012e90: 6563 7465 6420 524f 492e 2054 6865 2063  ected ROI. The c
+00012ea0: 726f 7070 6564 2076 6964 656f 2069 7320  ropped video is 
+00012eb0: 7361 7665 6420 7769 7468 2022 5f63 6972  saved with "_cir
+00012ec0: 636c 655f 6372 6f70 7065 6422 2073 7566  cle_cropped" suf
+00012ed0: 6669 7820 696e 2074 6865 2073 616d 6520  fix in the same 
+00012ee0: 6469 7265 6374 6f72 790a 2020 2020 2020  directory.      
+00012ef0: 2061 7320 7468 6520 696e 7075 7420 7669   as the input vi
+00012f00: 6465 6f20 6669 6c65 2e0a 0a20 2020 203a  deo file...    :
+00012f10: 6578 616d 706c 653a 0a20 2020 203e 3e3e  example:.    >>>
+00012f20: 2063 726f 705f 7369 6e67 6c65 5f76 6964   crop_single_vid
+00012f30: 656f 5f63 6972 636c 6528 6669 6c65 5f70  eo_circle(file_p
+00012f40: 6174 683d 272f 5573 6572 732f 7369 6d6f  ath='/Users/simo
+00012f50: 6e2f 4465 736b 746f 702f 4147 4752 4553  n/Desktop/AGGRES
+00012f60: 5349 5649 5459 5f34 5f31 315f 3231 5f54  SIVITY_4_11_21_T
+00012f70: 7269 616c 5f32 5f63 616d 6572 6131 5f72  rial_2_camera1_r
+00012f80: 6f74 6174 6564 5f32 3032 3430 3231 3131  otated_202402111
+00012f90: 3433 3335 352e 6d70 3427 290a 2020 2020  43355.mp4').    
+00012fa0: 2222 220a 0a20 2020 2064 6972 2c20 7669  """..    dir, vi
+00012fb0: 6465 6f5f 6e61 6d65 2c20 5f20 3d20 6765  deo_name, _ = ge
+00012fc0: 745f 666e 5f65 7874 2866 696c 6570 6174  t_fn_ext(filepat
+00012fd0: 683d 6669 6c65 5f70 6174 6829 0a20 2020  h=file_path).   
+00012fe0: 2073 6176 655f 7061 7468 203d 206f 732e   save_path = os.
+00012ff0: 7061 7468 2e6a 6f69 6e28 6469 722c 2066  path.join(dir, f
+00013000: 227b 7669 6465 6f5f 6e61 6d65 7d5f 6369  "{video_name}_ci
+00013010: 7263 6c65 5f63 726f 7070 6564 2e6d 7034  rcle_cropped.mp4
+00013020: 2229 0a20 2020 2076 6964 656f 5f6d 6574  ").    video_met
+00013030: 615f 6461 7461 203d 2067 6574 5f76 6964  a_data = get_vid
+00013040: 656f 5f6d 6574 615f 6461 7461 2876 6964  eo_meta_data(vid
+00013050: 656f 5f70 6174 683d 6669 6c65 5f70 6174  eo_path=file_pat
+00013060: 6829 0a20 2020 2063 6865 636b 5f66 696c  h).    check_fil
+00013070: 655f 6578 6973 745f 616e 645f 7265 6164  e_exist_and_read
+00013080: 6162 6c65 2866 696c 655f 7061 7468 3d66  able(file_path=f
+00013090: 696c 655f 7061 7468 290a 2020 2020 6369  ile_path).    ci
+000130a0: 7263 6c65 5f73 656c 6563 746f 7220 3d20  rcle_selector = 
+000130b0: 524f 4953 656c 6563 746f 7243 6972 636c  ROISelectorCircl
+000130c0: 6528 7061 7468 3d66 696c 655f 7061 7468  e(path=file_path
+000130d0: 290a 2020 2020 6369 7263 6c65 5f73 656c  ).    circle_sel
+000130e0: 6563 746f 722e 7275 6e28 290a 2020 2020  ector.run().    
+000130f0: 7469 6d65 7220 3d20 5369 6d62 6154 696d  timer = SimbaTim
+00013100: 6572 2873 7461 7274 3d54 7275 6529 0a20  er(start=True). 
+00013110: 2020 2072 203d 2063 6972 636c 655f 7365     r = circle_se
+00013120: 6c65 6374 6f72 2e63 6972 636c 655f 7261  lector.circle_ra
+00013130: 6469 7573 0a20 2020 2078 2c20 7920 3d20  dius.    x, y = 
+00013140: 6369 7263 6c65 5f73 656c 6563 746f 722e  circle_selector.
+00013150: 6369 7263 6c65 5f63 656e 7465 725b 305d  circle_center[0]
+00013160: 2c20 6369 7263 6c65 5f73 656c 6563 746f  , circle_selecto
+00013170: 722e 6369 7263 6c65 5f63 656e 7465 725b  r.circle_center[
+00013180: 315d 0a20 2020 2070 6f6c 7967 6f6e 203d  1].    polygon =
+00013190: 2050 6f6c 7967 6f6e 280a 2020 2020 2020   Polygon(.      
+000131a0: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
+000131b0: 2878 202b 2072 202a 206e 702e 636f 7328  (x + r * np.cos(
+000131c0: 616e 676c 6529 2c20 7920 2b20 7220 2a20  angle), y + r * 
+000131d0: 6e70 2e73 696e 2861 6e67 6c65 2929 0a20  np.sin(angle)). 
+000131e0: 2020 2020 2020 2020 2020 2066 6f72 2061             for a
+000131f0: 6e67 6c65 2069 6e20 6e70 2e6c 696e 7370  ngle in np.linsp
+00013200: 6163 6528 302c 2032 202a 206e 702e 7069  ace(0, 2 * np.pi
+00013210: 2c20 3130 3029 0a20 2020 2020 2020 205d  , 100).        ]
+00013220: 0a20 2020 2029 0a20 2020 2070 6f6c 7967  .    ).    polyg
+00013230: 6f6e 7320 3d20 5b70 6f6c 7967 6f6e 2066  ons = [polygon f
+00013240: 6f72 2078 2069 6e20 7261 6e67 6528 7669  or x in range(vi
+00013250: 6465 6f5f 6d65 7461 5f64 6174 615b 2266  deo_meta_data["f
+00013260: 7261 6d65 5f63 6f75 6e74 225d 295d 0a20  rame_count"])]. 
+00013270: 2020 2069 6620 2870 6c61 7466 6f72 6d2e     if (platform.
+00013280: 7379 7374 656d 2829 203d 3d20 2244 6172  system() == "Dar
+00013290: 7769 6e22 2920 616e 6420 286d 756c 7469  win") and (multi
+000132a0: 7072 6f63 6573 7369 6e67 2e67 6574 5f73  processing.get_s
+000132b0: 7461 7274 5f6d 6574 686f 6428 2920 6973  tart_method() is
+000132c0: 204e 6f6e 6529 3a0a 2020 2020 2020 2020   None):.        
+000132d0: 6d75 6c74 6970 726f 6365 7373 696e 672e  multiprocessing.
+000132e0: 7365 745f 7374 6172 745f 6d65 7468 6f64  set_start_method
+000132f0: 2822 7370 6177 6e22 2c20 666f 7263 653d  ("spawn", force=
+00013300: 5472 7565 290a 2020 2020 706f 6c79 676f  True).    polygo
+00013310: 6e73 203d 2049 6d61 6765 4d69 7869 6e28  ns = ImageMixin(
+00013320: 292e 736c 6963 655f 7368 6170 6573 5f69  ).slice_shapes_i
+00013330: 6e5f 696d 6773 280a 2020 2020 2020 2020  n_imgs(.        
+00013340: 696d 6773 3d66 696c 655f 7061 7468 2c20  imgs=file_path, 
+00013350: 7368 6170 6573 3d70 6f6c 7967 6f6e 732c  shapes=polygons,
+00013360: 2076 6572 626f 7365 3d46 616c 7365 0a20   verbose=False. 
+00013370: 2020 2029 0a20 2020 2074 696d 652e 736c     ).    time.sl
+00013380: 6565 7028 3329 0a20 2020 205f 203d 2049  eep(3).    _ = I
+00013390: 6d61 6765 4d69 7869 6e2e 696d 675f 7374  mageMixin.img_st
+000133a0: 6163 6b5f 746f 5f76 6964 656f 280a 2020  ack_to_video(.  
+000133b0: 2020 2020 2020 696d 6773 3d70 6f6c 7967        imgs=polyg
+000133c0: 6f6e 732c 2073 6176 655f 7061 7468 3d73  ons, save_path=s
+000133d0: 6176 655f 7061 7468 2c20 6670 733d 7669  ave_path, fps=vi
+000133e0: 6465 6f5f 6d65 7461 5f64 6174 615b 2266  deo_meta_data["f
+000133f0: 7073 225d 0a20 2020 2029 0a20 2020 2074  ps"].    ).    t
+00013400: 696d 6572 2e73 746f 705f 7469 6d65 7228  imer.stop_timer(
+00013410: 290a 2020 2020 7374 646f 7574 5f73 7563  ).    stdout_suc
+00013420: 6365 7373 280a 2020 2020 2020 2020 6d73  cess(.        ms
+00013430: 673d 6622 4369 7263 6c65 2d62 6173 6564  g=f"Circle-based
+00013440: 2063 726f 7070 6564 2073 6176 6564 2061   cropped saved a
+00013450: 7420 746f 207b 7361 7665 5f70 6174 687d  t to {save_path}
+00013460: 222c 0a20 2020 2020 2020 2065 6c61 7073  ",.        elaps
+00013470: 6564 5f74 696d 653d 7469 6d65 722e 656c  ed_time=timer.el
+00013480: 6170 7365 645f 7469 6d65 5f73 7472 2c0a  apsed_time_str,.
+00013490: 2020 2020 290a 0a0a 6465 6620 6372 6f70      )...def crop
+000134a0: 5f6d 756c 7469 706c 655f 7669 6465 6f73  _multiple_videos
+000134b0: 5f63 6972 636c 6573 280a 2020 2020 696e  _circles(.    in
+000134c0: 5f64 6972 3a20 556e 696f 6e5b 7374 722c  _dir: Union[str,
+000134d0: 206f 732e 5061 7468 4c69 6b65 5d2c 206f   os.PathLike], o
+000134e0: 7574 5f64 6972 3a20 556e 696f 6e5b 7374  ut_dir: Union[st
+000134f0: 722c 206f 732e 5061 7468 4c69 6b65 5d0a  r, os.PathLike].
+00013500: 2920 2d3e 204e 6f6e 653a 0a20 2020 2022  ) -> None:.    "
+00013510: 2222 0a20 2020 2043 726f 7020 6d75 6c74  "".    Crop mult
+00013520: 6970 6c65 2076 6964 656f 7320 6261 7365  iple videos base
+00013530: 6420 6f6e 2063 6972 6375 6c61 7220 7265  d on circular re
+00013540: 6769 6f6e 7320 6f66 2069 6e74 6572 6573  gions of interes
+00013550: 7420 2852 4f49 7329 2073 656c 6563 7465  t (ROIs) selecte
+00013560: 6420 6279 2074 6865 2075 7365 722e 0a0a  d by the user...
+00013570: 2020 2020 3a70 6172 616d 2020 556e 696f      :param  Unio
+00013580: 6e5b 7374 722c 206f 732e 5061 7468 4c69  n[str, os.PathLi
+00013590: 6b65 5d20 696e 5f64 6972 3a20 5468 6520  ke] in_dir: The 
+000135a0: 6469 7265 6374 6f72 7920 636f 6e74 6169  directory contai
+000135b0: 6e69 6e67 2069 6e70 7574 2076 6964 656f  ning input video
+000135c0: 2066 696c 6573 2e0a 2020 2020 3a70 6172   files..    :par
+000135d0: 616d 2020 556e 696f 6e5b 7374 722c 206f  am  Union[str, o
+000135e0: 732e 5061 7468 4c69 6b65 5d20 6f75 745f  s.PathLike] out_
+000135f0: 6469 723a 2054 6865 2064 6972 6563 746f  dir: The directo
+00013600: 7279 2074 6f20 7361 7665 2074 6865 2063  ry to save the c
+00013610: 726f 7070 6564 2076 6964 656f 2066 696c  ropped video fil
+00013620: 6573 2e0a 0a20 2020 202e 2e20 6e6f 7465  es...    .. note
+00013630: 3a3a 0a20 2020 2020 2020 5468 6973 2066  ::.       This f
+00013640: 756e 6374 696f 6e20 6372 6f70 7320 6d75  unction crops mu
+00013650: 6c74 6970 6c65 2076 6964 656f 7320 6261  ltiple videos ba
+00013660: 7365 6420 6f6e 2063 6972 6375 6c61 7220  sed on circular 
+00013670: 524f 4973 2073 656c 6563 7465 6420 6279  ROIs selected by
+00013680: 2074 6865 2075 7365 722e 0a20 2020 2020   the user..     
+00013690: 2020 5468 6520 7573 6572 2069 7320 6173    The user is as
+000136a0: 6b65 6420 746f 2064 6566 696e 6520 6120  ked to define a 
+000136b0: 6369 7263 6c65 206d 616e 7561 6c6c 7920  circle manually 
+000136c0: 696e 206f 6e65 2076 6964 656f 2077 6974  in one video wit
+000136d0: 6869 6e20 7468 6520 696e 7075 7420 6469  hin the input di
+000136e0: 7265 6374 6f72 792e 0a20 2020 2020 2020  rectory..       
+000136f0: 5468 6520 6675 6e63 7469 6f6e 2074 6865  The function the
+00013700: 6e20 6372 6f70 7320 616c 6c20 7468 6520  n crops all the 
+00013710: 7669 6465 6f20 696e 2074 6865 2069 6e70  video in the inp
+00013720: 7574 2064 6972 6563 746f 7279 2061 6363  ut directory acc
+00013730: 6f72 6469 6e67 2074 6f20 7468 6520 7368  ording to the sh
+00013740: 6170 6520 6465 6669 6e65 640a 2020 2020  ape defined.    
+00013750: 2020 2075 7369 6e67 2074 6865 2066 6972     using the fir
+00013760: 7374 2076 6964 656f 2061 6e64 2073 6176  st video and sav
+00013770: 6573 2074 6865 2076 6964 656f 7320 696e  es the videos in
+00013780: 2074 6865 2060 606f 7574 5f64 6972 6060   the ``out_dir``
+00013790: 2077 6974 6820 7468 6520 7361 6d65 2066   with the same f
+000137a0: 696c 656e 616d 6573 2061 7320 7468 6520  ilenames as the 
+000137b0: 6f72 6967 696e 616c 2076 6964 656f 732e  original videos.
+000137c0: 2e0a 0a20 2020 203a 6578 616d 706c 653a  ...    :example:
+000137d0: 0a20 2020 203e 3e3e 2063 726f 705f 6d75  .    >>> crop_mu
+000137e0: 6c74 6970 6c65 5f76 6964 656f 735f 6369  ltiple_videos_ci
+000137f0: 7263 6c65 7328 696e 5f64 6972 3d27 2f55  rcles(in_dir='/U
+00013800: 7365 7273 2f73 696d 6f6e 2f44 6573 6b74  sers/simon/Deskt
+00013810: 6f70 2f65 6469 7465 642f 7465 7374 7327  op/edited/tests'
+00013820: 2c20 6f75 745f 6469 723d 272f 5573 6572  , out_dir='/User
+00013830: 732f 7369 6d6f 6e2f 4465 736b 746f 7027  s/simon/Desktop'
+00013840: 290a 2020 2020 2222 220a 0a20 2020 2063  ).    """..    c
+00013850: 6865 636b 5f69 665f 6469 725f 6578 6973  heck_if_dir_exis
+00013860: 7473 2869 6e5f 6469 723d 696e 5f64 6972  ts(in_dir=in_dir
+00013870: 290a 2020 2020 6368 6563 6b5f 6966 5f64  ).    check_if_d
+00013880: 6972 5f65 7869 7374 7328 696e 5f64 6972  ir_exists(in_dir
+00013890: 3d6f 7574 5f64 6972 290a 2020 2020 7669  =out_dir).    vi
+000138a0: 6465 6f5f 6669 6c65 7320 3d20 6669 6e64  deo_files = find
+000138b0: 5f61 6c6c 5f76 6964 656f 735f 696e 5f64  _all_videos_in_d
+000138c0: 6972 6563 746f 7279 2864 6972 6563 746f  irectory(directo
+000138d0: 7279 3d69 6e5f 6469 7229 0a20 2020 2063  ry=in_dir).    c
+000138e0: 6972 636c 655f 7365 6c65 6374 6f72 203d  ircle_selector =
+000138f0: 2052 4f49 5365 6c65 6374 6f72 4369 7263   ROISelectorCirc
+00013900: 6c65 2870 6174 683d 6f73 2e70 6174 682e  le(path=os.path.
+00013910: 6a6f 696e 2869 6e5f 6469 722c 2076 6964  join(in_dir, vid
+00013920: 656f 5f66 696c 6573 5b30 5d29 290a 2020  eo_files[0])).  
+00013930: 2020 6369 7263 6c65 5f73 656c 6563 746f    circle_selecto
+00013940: 722e 7275 6e28 290a 2020 2020 7220 3d20  r.run().    r = 
+00013950: 6369 7263 6c65 5f73 656c 6563 746f 722e  circle_selector.
+00013960: 6369 7263 6c65 5f72 6164 6975 730a 2020  circle_radius.  
+00013970: 2020 782c 2079 203d 2063 6972 636c 655f    x, y = circle_
+00013980: 7365 6c65 6374 6f72 2e63 6972 636c 655f  selector.circle_
+00013990: 6365 6e74 6572 5b30 5d2c 2063 6972 636c  center[0], circl
+000139a0: 655f 7365 6c65 6374 6f72 2e63 6972 636c  e_selector.circl
+000139b0: 655f 6365 6e74 6572 5b31 5d0a 2020 2020  e_center[1].    
+000139c0: 706f 6c79 676f 6e20 3d20 506f 6c79 676f  polygon = Polygo
+000139d0: 6e28 0a20 2020 2020 2020 205b 0a20 2020  n(.        [.   
+000139e0: 2020 2020 2020 2020 2028 7820 2b20 7220           (x + r 
+000139f0: 2a20 6e70 2e63 6f73 2861 6e67 6c65 292c  * np.cos(angle),
+00013a00: 2079 202b 2072 202a 206e 702e 7369 6e28   y + r * np.sin(
+00013a10: 616e 676c 6529 290a 2020 2020 2020 2020  angle)).        
+00013a20: 2020 2020 666f 7220 616e 676c 6520 696e      for angle in
+00013a30: 206e 702e 6c69 6e73 7061 6365 2830 2c20   np.linspace(0, 
+00013a40: 3220 2a20 6e70 2e70 692c 2031 3030 290a  2 * np.pi, 100).
+00013a50: 2020 2020 2020 2020 5d0a 2020 2020 290a          ].    ).
+00013a60: 2020 2020 7469 6d65 7220 3d20 5369 6d62      timer = Simb
+00013a70: 6154 696d 6572 2873 7461 7274 3d54 7275  aTimer(start=Tru
+00013a80: 6529 0a20 2020 2069 6620 2870 6c61 7466  e).    if (platf
+00013a90: 6f72 6d2e 7379 7374 656d 2829 203d 3d20  orm.system() == 
+00013aa0: 2244 6172 7769 6e22 2920 616e 6420 286d  "Darwin") and (m
+00013ab0: 756c 7469 7072 6f63 6573 7369 6e67 2e67  ultiprocessing.g
+00013ac0: 6574 5f73 7461 7274 5f6d 6574 686f 6428  et_start_method(
+00013ad0: 2920 6973 204e 6f6e 6529 3a0a 2020 2020  ) is None):.    
+00013ae0: 2020 2020 6d75 6c74 6970 726f 6365 7373      multiprocess
+00013af0: 696e 672e 7365 745f 7374 6172 745f 6d65  ing.set_start_me
+00013b00: 7468 6f64 2822 7370 6177 6e22 2c20 666f  thod("spawn", fo
+00013b10: 7263 653d 4661 6c73 6529 0a20 2020 2066  rce=False).    f
+00013b20: 6f72 2076 6964 656f 5f63 6e74 2c20 7669  or video_cnt, vi
+00013b30: 6465 6f5f 7061 7468 2069 6e20 656e 756d  deo_path in enum
+00013b40: 6572 6174 6528 7669 6465 6f5f 6669 6c65  erate(video_file
+00013b50: 7329 3a0a 2020 2020 2020 2020 7072 696e  s):.        prin
+00013b60: 7428 0a20 2020 2020 2020 2020 2020 2066  t(.            f
+00013b70: 2243 6972 636c 6520 6372 6f70 7069 6e67  "Circle cropping
+00013b80: 2076 6964 656f 207b 7669 6465 6f5f 7061   video {video_pa
+00013b90: 7468 7d20 287b 7669 6465 6f5f 636e 742b  th} ({video_cnt+
+00013ba0: 317d 2f7b 6c65 6e28 7669 6465 6f5f 6669  1}/{len(video_fi
+00013bb0: 6c65 7329 7d29 2e2e 2e22 0a20 2020 2020  les)})...".     
+00013bc0: 2020 2029 0a20 2020 2020 2020 2076 6964     ).        vid
+00013bd0: 656f 5f70 6174 6820 3d20 6f73 2e70 6174  eo_path = os.pat
+00013be0: 682e 6a6f 696e 2869 6e5f 6469 722c 2076  h.join(in_dir, v
+00013bf0: 6964 656f 5f70 6174 6829 0a20 2020 2020  ideo_path).     
+00013c00: 2020 205f 2c20 7669 6465 6f5f 6e61 6d65     _, video_name
+00013c10: 2c20 5f20 3d20 6765 745f 666e 5f65 7874  , _ = get_fn_ext
+00013c20: 2866 696c 6570 6174 683d 7669 6465 6f5f  (filepath=video_
+00013c30: 7061 7468 290a 2020 2020 2020 2020 7361  path).        sa
+00013c40: 7665 5f70 6174 6820 3d20 6f73 2e70 6174  ve_path = os.pat
+00013c50: 682e 6a6f 696e 286f 7574 5f64 6972 2c20  h.join(out_dir, 
+00013c60: 6622 7b76 6964 656f 5f6e 616d 657d 2e6d  f"{video_name}.m
+00013c70: 7034 2229 0a20 2020 2020 2020 2076 6964  p4").        vid
+00013c80: 656f 5f6d 6574 615f 6461 7461 203d 2067  eo_meta_data = g
+00013c90: 6574 5f76 6964 656f 5f6d 6574 615f 6461  et_video_meta_da
+00013ca0: 7461 2876 6964 656f 5f70 6174 683d 7669  ta(video_path=vi
+00013cb0: 6465 6f5f 7061 7468 290a 2020 2020 2020  deo_path).      
+00013cc0: 2020 706f 6c79 676f 6e73 203d 205b 706f    polygons = [po
+00013cd0: 6c79 676f 6e20 666f 7220 7820 696e 2072  lygon for x in r
+00013ce0: 616e 6765 2876 6964 656f 5f6d 6574 615f  ange(video_meta_
+00013cf0: 6461 7461 5b22 6672 616d 655f 636f 756e  data["frame_coun
+00013d00: 7422 5d29 5d0a 2020 2020 2020 2020 706f  t"])].        po
+00013d10: 6c79 676f 6e73 203d 2049 6d61 6765 4d69  lygons = ImageMi
+00013d20: 7869 6e28 292e 736c 6963 655f 7368 6170  xin().slice_shap
+00013d30: 6573 5f69 6e5f 696d 6773 280a 2020 2020  es_in_imgs(.    
+00013d40: 2020 2020 2020 2020 696d 6773 3d76 6964          imgs=vid
+00013d50: 656f 5f70 6174 682c 2073 6861 7065 733d  eo_path, shapes=
+00013d60: 706f 6c79 676f 6e73 2c20 7665 7262 6f73  polygons, verbos
+00013d70: 653d 4661 6c73 650a 2020 2020 2020 2020  e=False.        
+00013d80: 290a 2020 2020 2020 2020 7469 6d65 2e73  ).        time.s
+00013d90: 6c65 6570 2831 290a 2020 2020 2020 2020  leep(1).        
+00013da0: 5f20 3d20 496d 6167 654d 6978 696e 2e69  _ = ImageMixin.i
+00013db0: 6d67 5f73 7461 636b 5f74 6f5f 7669 6465  mg_stack_to_vide
+00013dc0: 6f28 0a20 2020 2020 2020 2020 2020 2069  o(.            i
+00013dd0: 6d67 733d 706f 6c79 676f 6e73 2c20 7361  mgs=polygons, sa
+00013de0: 7665 5f70 6174 683d 7361 7665 5f70 6174  ve_path=save_pat
+00013df0: 682c 2066 7073 3d76 6964 656f 5f6d 6574  h, fps=video_met
+00013e00: 615f 6461 7461 5b22 6670 7322 5d0a 2020  a_data["fps"].  
+00013e10: 2020 2020 2020 290a 2020 2020 7469 6d65        ).    time
+00013e20: 722e 7374 6f70 5f74 696d 6572 2829 0a20  r.stop_timer(). 
+00013e30: 2020 2073 7464 6f75 745f 7375 6363 6573     stdout_succes
+00013e40: 7328 0a20 2020 2020 2020 206d 7367 3d66  s(.        msg=f
+00013e50: 2243 6972 636c 652d 6261 7365 6420 6372  "Circle-based cr
+00013e60: 6f70 7065 6420 7b6c 656e 2876 6964 656f  opped {len(video
+00013e70: 5f66 696c 6573 297d 2066 696c 6573 2074  _files)} files t
+00013e80: 6f20 6469 7265 6374 6f72 7920 7b6f 7574  o directory {out
+00013e90: 5f64 6972 7d22 2c0a 2020 2020 2020 2020  _dir}",.        
+00013ea0: 656c 6170 7365 645f 7469 6d65 3d74 696d  elapsed_time=tim
+00013eb0: 6572 2e65 6c61 7073 6564 5f74 696d 655f  er.elapsed_time_
+00013ec0: 7374 722c 0a20 2020 2029 0a0a 0a64 6566  str,.    )...def
+00013ed0: 2063 726f 705f 7369 6e67 6c65 5f76 6964   crop_single_vid
+00013ee0: 656f 5f70 6f6c 7967 6f6e 2866 696c 655f  eo_polygon(file_
+00013ef0: 7061 7468 3a20 556e 696f 6e5b 7374 722c  path: Union[str,
+00013f00: 206f 732e 5061 7468 4c69 6b65 5d29 202d   os.PathLike]) -
+00013f10: 3e20 4e6f 6e65 3a0a 2020 2020 2222 220a  > None:.    """.
+00013f20: 2020 2020 4372 6f70 2061 2076 6964 656f      Crop a video
+00013f30: 2062 6173 6564 206f 6e20 706f 6c79 676f   based on polygo
+00013f40: 6e61 6c20 7265 6769 6f6e 7320 6f66 2069  nal regions of i
+00013f50: 6e74 6572 6573 7420 2852 4f49 7329 2073  nterest (ROIs) s
+00013f60: 656c 6563 7465 6420 6279 2074 6865 2075  elected by the u
+00013f70: 7365 722e 0a0a 2020 2020 3a70 6172 616d  ser...    :param
+00013f80: 2020 556e 696f 6e5b 7374 722c 206f 732e    Union[str, os.
+00013f90: 5061 7468 4c69 6b65 5d20 6669 6c65 5f70  PathLike] file_p
+00013fa0: 6174 683a 2054 6865 2070 6174 6820 746f  ath: The path to
+00013fb0: 2074 6865 2069 6e70 7574 2076 6964 656f   the input video
+00013fc0: 2066 696c 652e 0a0a 2020 2020 2e2e 206e   file...    .. n
+00013fd0: 6f74 653a 3a0a 2020 2020 2020 2054 6869  ote::.       Thi
+00013fe0: 7320 6675 6e63 7469 6f6e 2063 726f 7073  s function crops
+00013ff0: 2074 6865 2069 6e70 7574 2076 6964 656f   the input video
+00014000: 2062 6173 6564 206f 6e20 706f 6c79 676f   based on polygo
+00014010: 6e61 6c20 7265 6769 6f6e 7320 6f66 2069  nal regions of i
+00014020: 6e74 6572 6573 7420 2852 4f49 7329 2073  nterest (ROIs) s
+00014030: 656c 6563 7465 6420 6279 2074 6865 2075  elected by the u
+00014040: 7365 722e 0a20 2020 2020 2020 5468 6520  ser..       The 
+00014050: 7573 6572 2069 7320 7072 6f6d 7074 6564  user is prompted
+00014060: 2074 6f20 7365 6c65 6374 2061 2070 6f6c   to select a pol
+00014070: 7967 6f6e 616c 2052 4f49 206f 6e20 7468  ygonal ROI on th
+00014080: 6520 7669 6465 6f20 6672 616d 652c 2061  e video frame, a
+00014090: 6e64 2074 6865 2066 756e 6374 696f 6e20  nd the function 
+000140a0: 7468 656e 2063 726f 7073 2074 6865 2076  then crops the v
+000140b0: 6964 656f 0a20 2020 2020 2020 6261 7365  ideo.       base
+000140c0: 6420 6f6e 2074 6865 2073 656c 6563 7465  d on the selecte
+000140d0: 6420 524f 492e 2054 6865 2063 726f 7070  d ROI. The cropp
+000140e0: 6564 2076 6964 656f 2069 7320 7361 7665  ed video is save
+000140f0: 6420 7769 7468 2022 5f70 6f6c 7967 6f6e  d with "_polygon
+00014100: 5f63 726f 7070 6564 2220 7375 6666 6978  _cropped" suffix
+00014110: 2069 6e20 7468 6520 7361 6d65 2064 6972   in the same dir
+00014120: 6563 746f 7279 0a20 2020 2020 2020 6173  ectory.       as
+00014130: 2074 6865 2069 6e70 7574 2076 6964 656f   the input video
+00014140: 2066 696c 652e 0a0a 2020 2020 3a65 7861   file...    :exa
+00014150: 6d70 6c65 3a0a 2020 2020 3e3e 3e20 6372  mple:.    >>> cr
+00014160: 6f70 5f73 696e 676c 655f 7669 6465 6f5f  op_single_video_
+00014170: 706f 6c79 676f 6e28 6669 6c65 5f70 6174  polygon(file_pat
+00014180: 683d 272f 5573 6572 732f 7369 6d6f 6e2f  h='/Users/simon/
+00014190: 4465 736b 746f 702f 4147 4752 4553 5349  Desktop/AGGRESSI
+000141a0: 5649 5459 5f34 5f31 315f 3231 5f54 7269  VITY_4_11_21_Tri
+000141b0: 616c 5f32 5f63 616d 6572 6131 5f72 6f74  al_2_camera1_rot
+000141c0: 6174 6564 5f32 3032 3430 3231 3131 3433  ated_20240211143
+000141d0: 3335 352e 6d70 3427 290a 2020 2020 2222  355.mp4').    ""
+000141e0: 220a 0a20 2020 2064 6972 2c20 7669 6465  "..    dir, vide
+000141f0: 6f5f 6e61 6d65 2c20 5f20 3d20 6765 745f  o_name, _ = get_
+00014200: 666e 5f65 7874 2866 696c 6570 6174 683d  fn_ext(filepath=
+00014210: 6669 6c65 5f70 6174 6829 0a20 2020 2073  file_path).    s
+00014220: 6176 655f 7061 7468 203d 206f 732e 7061  ave_path = os.pa
+00014230: 7468 2e6a 6f69 6e28 6469 722c 2066 227b  th.join(dir, f"{
+00014240: 7669 6465 6f5f 6e61 6d65 7d5f 706f 6c79  video_name}_poly
+00014250: 676f 6e5f 6372 6f70 7065 642e 6d70 3422  gon_cropped.mp4"
+00014260: 290a 2020 2020 7669 6465 6f5f 6d65 7461  ).    video_meta
+00014270: 5f64 6174 6120 3d20 6765 745f 7669 6465  _data = get_vide
+00014280: 6f5f 6d65 7461 5f64 6174 6128 7669 6465  o_meta_data(vide
+00014290: 6f5f 7061 7468 3d66 696c 655f 7061 7468  o_path=file_path
+000142a0: 290a 2020 2020 6368 6563 6b5f 6669 6c65  ).    check_file
+000142b0: 5f65 7869 7374 5f61 6e64 5f72 6561 6461  _exist_and_reada
+000142c0: 626c 6528 6669 6c65 5f70 6174 683d 6669  ble(file_path=fi
+000142d0: 6c65 5f70 6174 6829 0a20 2020 2070 6f6c  le_path).    pol
+000142e0: 7967 6f6e 5f73 656c 6563 746f 7220 3d20  ygon_selector = 
+000142f0: 524f 4953 656c 6563 746f 7250 6f6c 7967  ROISelectorPolyg
+00014300: 6f6e 2870 6174 683d 6669 6c65 5f70 6174  on(path=file_pat
+00014310: 6829 0a20 2020 2070 6f6c 7967 6f6e 5f73  h).    polygon_s
+00014320: 656c 6563 746f 722e 7275 6e28 290a 2020  elector.run().  
+00014330: 2020 7469 6d65 7220 3d20 5369 6d62 6154    timer = SimbaT
+00014340: 696d 6572 2873 7461 7274 3d54 7275 6529  imer(start=True)
+00014350: 0a20 2020 2076 6572 7469 6365 7320 3d20  .    vertices = 
+00014360: 706f 6c79 676f 6e5f 7365 6c65 6374 6f72  polygon_selector
+00014370: 2e70 6f6c 7967 6f6e 5f76 6572 7469 6365  .polygon_vertice
+00014380: 730a 2020 2020 706f 6c79 676f 6e20 3d20  s.    polygon = 
+00014390: 506f 6c79 676f 6e28 7665 7274 6963 6573  Polygon(vertices
+000143a0: 290a 2020 2020 706f 6c79 676f 6e73 203d  ).    polygons =
+000143b0: 205b 706f 6c79 676f 6e20 666f 7220 7820   [polygon for x 
+000143c0: 696e 2072 616e 6765 2876 6964 656f 5f6d  in range(video_m
+000143d0: 6574 615f 6461 7461 5b22 6672 616d 655f  eta_data["frame_
+000143e0: 636f 756e 7422 5d29 5d0a 2020 2020 6966  count"])].    if
+000143f0: 2028 706c 6174 666f 726d 2e73 7973 7465   (platform.syste
+00014400: 6d28 2920 3d3d 2022 4461 7277 696e 2229  m() == "Darwin")
+00014410: 2061 6e64 2028 6d75 6c74 6970 726f 6365   and (multiproce
+00014420: 7373 696e 672e 6765 745f 7374 6172 745f  ssing.get_start_
+00014430: 6d65 7468 6f64 2829 2069 7320 4e6f 6e65  method() is None
+00014440: 293a 0a20 2020 2020 2020 206d 756c 7469  ):.        multi
+00014450: 7072 6f63 6573 7369 6e67 2e73 6574 5f73  processing.set_s
+00014460: 7461 7274 5f6d 6574 686f 6428 2273 7061  tart_method("spa
+00014470: 776e 222c 2066 6f72 6365 3d46 616c 7365  wn", force=False
+00014480: 290a 2020 2020 706f 6c79 676f 6e73 203d  ).    polygons =
+00014490: 2049 6d61 6765 4d69 7869 6e28 292e 736c   ImageMixin().sl
+000144a0: 6963 655f 7368 6170 6573 5f69 6e5f 696d  ice_shapes_in_im
+000144b0: 6773 280a 2020 2020 2020 2020 696d 6773  gs(.        imgs
+000144c0: 3d66 696c 655f 7061 7468 2c20 7368 6170  =file_path, shap
+000144d0: 6573 3d70 6f6c 7967 6f6e 732c 2076 6572  es=polygons, ver
+000144e0: 626f 7365 3d54 7275 650a 2020 2020 290a  bose=True.    ).
+000144f0: 2020 2020 5f20 3d20 496d 6167 654d 6978      _ = ImageMix
+00014500: 696e 2e69 6d67 5f73 7461 636b 5f74 6f5f  in.img_stack_to_
+00014510: 7669 6465 6f28 0a20 2020 2020 2020 2069  video(.        i
+00014520: 6d67 733d 706f 6c79 676f 6e73 2c20 7361  mgs=polygons, sa
+00014530: 7665 5f70 6174 683d 7361 7665 5f70 6174  ve_path=save_pat
+00014540: 682c 2066 7073 3d76 6964 656f 5f6d 6574  h, fps=video_met
+00014550: 615f 6461 7461 5b22 6670 7322 5d0a 2020  a_data["fps"].  
+00014560: 2020 290a 2020 2020 7469 6d65 722e 7374    ).    timer.st
+00014570: 6f70 5f74 696d 6572 2829 0a20 2020 2073  op_timer().    s
+00014580: 7464 6f75 745f 7375 6363 6573 7328 0a20  tdout_success(. 
+00014590: 2020 2020 2020 206d 7367 3d66 2250 6f6c         msg=f"Pol
+000145a0: 7967 6f6e 2d62 6173 6564 2063 726f 7070  ygon-based cropp
+000145b0: 6564 2073 6176 6564 2061 7420 746f 207b  ed saved at to {
+000145c0: 7361 7665 5f70 6174 687d 222c 0a20 2020  save_path}",.   
+000145d0: 2020 2020 2065 6c61 7073 6564 5f74 696d       elapsed_tim
+000145e0: 653d 7469 6d65 722e 656c 6170 7365 645f  e=timer.elapsed_
+000145f0: 7469 6d65 5f73 7472 2c0a 2020 2020 290a  time_str,.    ).
+00014600: 0a0a 6465 6620 6372 6f70 5f6d 756c 7469  ..def crop_multi
+00014610: 706c 655f 7669 6465 6f73 5f70 6f6c 7967  ple_videos_polyg
+00014620: 6f6e 7328 0a20 2020 2069 6e5f 6469 723a  ons(.    in_dir:
+00014630: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
+00014640: 6174 684c 696b 655d 2c20 6f75 745f 6469  athLike], out_di
+00014650: 723a 2055 6e69 6f6e 5b73 7472 2c20 6f73  r: Union[str, os
+00014660: 2e50 6174 684c 696b 655d 0a29 202d 3e20  .PathLike].) -> 
+00014670: 4e6f 6e65 3a0a 2020 2020 2222 220a 2020  None:.    """.  
+00014680: 2020 4372 6f70 206d 756c 7469 706c 6520    Crop multiple 
+00014690: 7669 6465 6f73 2062 6173 6564 206f 6e20  videos based on 
+000146a0: 706f 6c79 676f 6e61 6c20 7265 6769 6f6e  polygonal region
+000146b0: 7320 6f66 2069 6e74 6572 6573 7420 2852  s of interest (R
+000146c0: 4f49 7329 2073 656c 6563 7465 6420 6279  OIs) selected by
+000146d0: 2074 6865 2075 7365 722e 0a0a 2020 2020   the user...    
+000146e0: 3a70 6172 616d 2020 556e 696f 6e5b 7374  :param  Union[st
+000146f0: 722c 206f 732e 5061 7468 4c69 6b65 5d20  r, os.PathLike] 
+00014700: 696e 5f64 6972 3a20 5468 6520 6469 7265  in_dir: The dire
+00014710: 6374 6f72 7920 636f 6e74 6169 6e69 6e67  ctory containing
+00014720: 2069 6e70 7574 2076 6964 656f 2066 696c   input video fil
+00014730: 6573 2e0a 2020 2020 3a70 6172 616d 2020  es..    :param  
+00014740: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
+00014750: 7468 4c69 6b65 5d20 6f75 745f 6469 723a  thLike] out_dir:
+00014760: 2054 6865 2064 6972 6563 746f 7279 2074   The directory t
+00014770: 6f20 7361 7665 2074 6865 2063 726f 7070  o save the cropp
+00014780: 6564 2076 6964 656f 2066 696c 6573 2e0a  ed video files..
+00014790: 0a20 2020 202e 2e20 6e6f 7465 3a3a 0a20  .    .. note::. 
+000147a0: 2020 2020 2020 5468 6973 2066 756e 6374        This funct
+000147b0: 696f 6e20 6372 6f70 7320 6d75 6c74 6970  ion crops multip
+000147c0: 6c65 2076 6964 656f 7320 6261 7365 6420  le videos based 
+000147d0: 6f6e 2070 6f6c 7967 6f6e 616c 2052 4f49  on polygonal ROI
+000147e0: 7320 7365 6c65 6374 6564 2062 7920 7468  s selected by th
+000147f0: 6520 7573 6572 2e0a 2020 2020 2020 2054  e user..       T
+00014800: 6865 2075 7365 7220 6973 2061 736b 6564  he user is asked
+00014810: 2074 6f20 6465 6669 6e65 2061 2070 6f6c   to define a pol
+00014820: 7967 6f6e 206d 616e 7561 6c6c 7920 696e  ygon manually in
+00014830: 206f 6e65 2076 6964 656f 2077 6974 6869   one video withi
+00014840: 6e20 7468 6520 696e 7075 7420 6469 7265  n the input dire
+00014850: 6374 6f72 792e 0a20 2020 2020 2020 5468  ctory..       Th
+00014860: 6520 6675 6e63 7469 6f6e 2074 6865 6e20  e function then 
+00014870: 6372 6f70 7320 616c 6c20 7468 6520 7669  crops all the vi
+00014880: 6465 6f20 696e 2074 6865 2069 6e70 7574  deo in the input
+00014890: 2064 6972 6563 746f 7279 2061 6363 6f72   directory accor
+000148a0: 6469 6e67 2074 6f20 7468 6520 7368 6170  ding to the shap
+000148b0: 6520 6465 6669 6e65 640a 2020 2020 2020  e defined.      
+000148c0: 2075 7369 6e67 2074 6865 2066 6972 7374   using the first
+000148d0: 2076 6964 656f 2061 6e64 2073 6176 6573   video and saves
+000148e0: 2074 6865 2076 6964 656f 7320 696e 2074   the videos in t
+000148f0: 6865 2060 606f 7574 5f64 6972 6060 2077  he ``out_dir`` w
+00014900: 6974 6820 7468 6520 7361 6d65 2066 696c  ith the same fil
+00014910: 656e 616d 6573 2061 7320 7468 6520 6f72  enames as the or
+00014920: 6967 696e 616c 2076 6964 656f 732e 2e0a  iginal videos...
+00014930: 0a20 2020 203a 6578 616d 706c 653a 0a20  .    :example:. 
+00014940: 2020 203e 3e3e 2063 726f 705f 6d75 6c74     >>> crop_mult
+00014950: 6970 6c65 5f76 6964 656f 735f 706f 6c79  iple_videos_poly
+00014960: 676f 6e73 2869 6e5f 6469 723d 272f 5573  gons(in_dir='/Us
+00014970: 6572 732f 7369 6d6f 6e2f 4465 736b 746f  ers/simon/Deskto
+00014980: 702f 6564 6974 6564 2f74 6573 7473 272c  p/edited/tests',
+00014990: 206f 7574 5f64 6972 3d27 2f55 7365 7273   out_dir='/Users
+000149a0: 2f73 696d 6f6e 2f44 6573 6b74 6f70 2729  /simon/Desktop')
+000149b0: 0a20 2020 2022 2222 0a0a 2020 2020 6368  .    """..    ch
+000149c0: 6563 6b5f 6966 5f64 6972 5f65 7869 7374  eck_if_dir_exist
+000149d0: 7328 696e 5f64 6972 3d69 6e5f 6469 7229  s(in_dir=in_dir)
+000149e0: 0a20 2020 2063 6865 636b 5f69 665f 6469  .    check_if_di
+000149f0: 725f 6578 6973 7473 2869 6e5f 6469 723d  r_exists(in_dir=
+00014a00: 6f75 745f 6469 7229 0a20 2020 2076 6964  out_dir).    vid
+00014a10: 656f 5f66 696c 6573 203d 2066 696e 645f  eo_files = find_
+00014a20: 616c 6c5f 7669 6465 6f73 5f69 6e5f 6469  all_videos_in_di
+00014a30: 7265 6374 6f72 7928 6469 7265 6374 6f72  rectory(director
+00014a40: 793d 696e 5f64 6972 290a 2020 2020 706f  y=in_dir).    po
+00014a50: 6c79 676f 6e5f 7365 6c65 6374 6f72 203d  lygon_selector =
+00014a60: 2052 4f49 5365 6c65 6374 6f72 506f 6c79   ROISelectorPoly
+00014a70: 676f 6e28 7061 7468 3d6f 732e 7061 7468  gon(path=os.path
+00014a80: 2e6a 6f69 6e28 696e 5f64 6972 2c20 7669  .join(in_dir, vi
+00014a90: 6465 6f5f 6669 6c65 735b 305d 2929 0a20  deo_files[0])). 
+00014aa0: 2020 2070 6f6c 7967 6f6e 5f73 656c 6563     polygon_selec
+00014ab0: 746f 722e 7275 6e28 290a 2020 2020 7665  tor.run().    ve
+00014ac0: 7274 6963 6573 203d 2070 6f6c 7967 6f6e  rtices = polygon
+00014ad0: 5f73 656c 6563 746f 722e 706f 6c79 676f  _selector.polygo
+00014ae0: 6e5f 7665 7274 6963 6573 0a20 2020 2070  n_vertices.    p
+00014af0: 6f6c 7967 6f6e 203d 2050 6f6c 7967 6f6e  olygon = Polygon
+00014b00: 2876 6572 7469 6365 7329 0a20 2020 2074  (vertices).    t
+00014b10: 696d 6572 203d 2053 696d 6261 5469 6d65  imer = SimbaTime
+00014b20: 7228 7374 6172 743d 5472 7565 290a 2020  r(start=True).  
+00014b30: 2020 666f 7220 7669 6465 6f5f 636e 742c    for video_cnt,
+00014b40: 2076 6964 656f 5f70 6174 6820 696e 2065   video_path in e
+00014b50: 6e75 6d65 7261 7465 2876 6964 656f 5f66  numerate(video_f
+00014b60: 696c 6573 293a 0a20 2020 2020 2020 2070  iles):.        p
+00014b70: 7269 6e74 280a 2020 2020 2020 2020 2020  rint(.          
+00014b80: 2020 6622 506f 6c79 676f 6e20 6372 6f70    f"Polygon crop
+00014b90: 7069 6e67 2076 6964 656f 207b 7669 6465  ping video {vide
+00014ba0: 6f5f 7061 7468 7d20 287b 7669 6465 6f5f  o_path} ({video_
+00014bb0: 636e 742b 317d 2f7b 6c65 6e28 7669 6465  cnt+1}/{len(vide
+00014bc0: 6f5f 6669 6c65 7329 7d29 2e2e 2e22 0a20  o_files)})...". 
+00014bd0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00014be0: 2076 6964 656f 5f70 6174 6820 3d20 6f73   video_path = os
+00014bf0: 2e70 6174 682e 6a6f 696e 2869 6e5f 6469  .path.join(in_di
+00014c00: 722c 2076 6964 656f 5f70 6174 6829 0a20  r, video_path). 
+00014c10: 2020 2020 2020 205f 2c20 7669 6465 6f5f         _, video_
+00014c20: 6e61 6d65 2c20 5f20 3d20 6765 745f 666e  name, _ = get_fn
+00014c30: 5f65 7874 2866 696c 6570 6174 683d 7669  _ext(filepath=vi
+00014c40: 6465 6f5f 7061 7468 290a 2020 2020 2020  deo_path).      
+00014c50: 2020 7361 7665 5f70 6174 6820 3d20 6f73    save_path = os
+00014c60: 2e70 6174 682e 6a6f 696e 286f 7574 5f64  .path.join(out_d
+00014c70: 6972 2c20 6622 7b76 6964 656f 5f6e 616d  ir, f"{video_nam
+00014c80: 657d 2e6d 7034 2229 0a20 2020 2020 2020  e}.mp4").       
+00014c90: 2076 6964 656f 5f6d 6574 615f 6461 7461   video_meta_data
+00014ca0: 203d 2067 6574 5f76 6964 656f 5f6d 6574   = get_video_met
+00014cb0: 615f 6461 7461 2876 6964 656f 5f70 6174  a_data(video_pat
+00014cc0: 683d 7669 6465 6f5f 7061 7468 290a 2020  h=video_path).  
+00014cd0: 2020 2020 2020 706f 6c79 676f 6e73 203d        polygons =
+00014ce0: 205b 706f 6c79 676f 6e20 666f 7220 7820   [polygon for x 
+00014cf0: 696e 2072 616e 6765 2876 6964 656f 5f6d  in range(video_m
+00014d00: 6574 615f 6461 7461 5b22 6672 616d 655f  eta_data["frame_
+00014d10: 636f 756e 7422 5d29 5d0a 2020 2020 2020  count"])].      
+00014d20: 2020 706f 6c79 676f 6e73 203d 2049 6d61    polygons = Ima
+00014d30: 6765 4d69 7869 6e28 292e 736c 6963 655f  geMixin().slice_
+00014d40: 7368 6170 6573 5f69 6e5f 696d 6773 280a  shapes_in_imgs(.
+00014d50: 2020 2020 2020 2020 2020 2020 696d 6773              imgs
+00014d60: 3d76 6964 656f 5f70 6174 682c 2073 6861  =video_path, sha
+00014d70: 7065 733d 706f 6c79 676f 6e73 2c20 7665  pes=polygons, ve
+00014d80: 7262 6f73 653d 4661 6c73 650a 2020 2020  rbose=False.    
+00014d90: 2020 2020 290a 2020 2020 2020 2020 5f20      ).        _ 
+00014da0: 3d20 496d 6167 654d 6978 696e 2e69 6d67  = ImageMixin.img
+00014db0: 5f73 7461 636b 5f74 6f5f 7669 6465 6f28  _stack_to_video(
+00014dc0: 0a20 2020 2020 2020 2020 2020 2069 6d67  .            img
+00014dd0: 733d 706f 6c79 676f 6e73 2c20 7361 7665  s=polygons, save
+00014de0: 5f70 6174 683d 7361 7665 5f70 6174 682c  _path=save_path,
+00014df0: 2066 7073 3d76 6964 656f 5f6d 6574 615f   fps=video_meta_
+00014e00: 6461 7461 5b22 6670 7322 5d0a 2020 2020  data["fps"].    
+00014e10: 2020 2020 290a 2020 2020 7469 6d65 722e      ).    timer.
+00014e20: 7374 6f70 5f74 696d 6572 2829 0a20 2020  stop_timer().   
+00014e30: 2073 7464 6f75 745f 7375 6363 6573 7328   stdout_success(
+00014e40: 0a20 2020 2020 2020 206d 7367 3d66 2250  .        msg=f"P
+00014e50: 6f6c 7967 6f6e 2d62 6173 6564 2063 726f  olygon-based cro
+00014e60: 7070 6564 207b 6c65 6e28 7669 6465 6f5f  pped {len(video_
+00014e70: 6669 6c65 7329 7d20 6669 6c65 7320 746f  files)} files to
+00014e80: 2064 6972 6563 746f 7279 207b 6f75 745f   directory {out_
+00014e90: 6469 727d 222c 0a20 2020 2020 2020 2065  dir}",.        e
+00014ea0: 6c61 7073 6564 5f74 696d 653d 7469 6d65  lapsed_time=time
+00014eb0: 722e 656c 6170 7365 645f 7469 6d65 5f73  r.elapsed_time_s
+00014ec0: 7472 2c0a 2020 2020 290a 0a0a 6465 6620  tr,.    )...def 
+00014ed0: 7265 7369 7a65 5f76 6964 656f 735f 6279  resize_videos_by
+00014ee0: 5f68 6569 6768 7428 0a20 2020 2076 6964  _height(.    vid
+00014ef0: 656f 5f70 6174 6873 3a20 4c69 7374 5b55  eo_paths: List[U
+00014f00: 6e69 6f6e 5b73 7472 2c20 6f73 2e50 6174  nion[str, os.Pat
+00014f10: 684c 696b 655d 5d2c 0a20 2020 2068 6569  hLike]],.    hei
+00014f20: 6768 743a 2055 6e69 6f6e 5b69 6e74 2c20  ght: Union[int, 
+00014f30: 7374 725d 2c0a 2020 2020 6f76 6572 7772  str],.    overwr
+00014f40: 6974 653a 204f 7074 696f 6e61 6c5b 626f  ite: Optional[bo
+00014f50: 6f6c 5d20 3d20 4661 6c73 652c 0a20 2020  ol] = False,.   
+00014f60: 2073 6176 655f 6469 723a 204f 7074 696f   save_dir: Optio
+00014f70: 6e61 6c5b 556e 696f 6e5b 7374 722c 206f  nal[Union[str, o
+00014f80: 732e 5061 7468 4c69 6b65 5d5d 203d 204e  s.PathLike]] = N
+00014f90: 6f6e 652c 0a20 2020 2067 7075 3a20 4f70  one,.    gpu: Op
+00014fa0: 7469 6f6e 616c 5b62 6f6f 6c5d 203d 2046  tional[bool] = F
+00014fb0: 616c 7365 2c0a 2020 2020 7665 7262 6f73  alse,.    verbos
+00014fc0: 653a 204f 7074 696f 6e61 6c5b 626f 6f6c  e: Optional[bool
+00014fd0: 5d20 3d20 5472 7565 2c0a 2920 2d3e 2055  ] = True,.) -> U
+00014fe0: 6e69 6f6e 5b4e 6f6e 652c 204c 6973 745b  nion[None, List[
+00014ff0: 556e 696f 6e5b 4e6f 6e65 2c20 7374 722c  Union[None, str,
+00015000: 206f 732e 5061 7468 4c69 6b65 5d5d 5d3a   os.PathLike]]]:
+00015010: 0a20 2020 2022 2222 0a20 2020 2052 652d  .    """.    Re-
+00015020: 7369 7a65 2061 206c 6973 7420 6f66 2076  size a list of v
+00015030: 6964 656f 7320 746f 2061 2073 7065 6369  ideos to a speci
+00015040: 6669 6564 2068 6569 6768 7420 7768 696c  fied height whil
+00015050: 6520 7265 7461 696e 696e 6720 7468 6569  e retaining thei
+00015060: 7220 6173 7065 6374 2072 6174 696f 732e  r aspect ratios.
+00015070: 0a0a 2020 2020 3a70 6172 616d 204c 6973  ..    :param Lis
+00015080: 745b 556e 696f 6e5b 7374 722c 206f 732e  t[Union[str, os.
+00015090: 5061 7468 4c69 6b65 5d5d 2076 6964 656f  PathLike]] video
+000150a0: 5f70 6174 6873 3a20 4c69 7374 206f 6620  _paths: List of 
+000150b0: 7061 7468 2074 6f20 7669 6465 6f73 2e0a  path to videos..
+000150c0: 2020 2020 3a70 6172 616d 2055 6e69 6f6e      :param Union
+000150d0: 5b69 6e74 2c20 7374 725d 2068 6569 6768  [int, str] heigh
+000150e0: 743a 2054 6865 2068 6569 6768 7420 6f66  t: The height of
+000150f0: 2074 6865 206f 7574 7075 7420 7669 6465   the output vide
+00015100: 6f73 2e20 4966 2069 6e74 2c20 7468 656e  os. If int, then
+00015110: 2074 6865 2068 6569 6768 7420 696e 2070   the height in p
+00015120: 6978 656c 732e 2049 6620 7374 722c 2074  ixels. If str, t
+00015130: 6865 6e20 7468 6520 696e 6465 7820 696e  hen the index in
+00015140: 2060 6076 6964 656f 5f70 6174 6873 6060   ``video_paths``
+00015150: 2066 726f 6d20 7768 6963 6820 746f 2067   from which to g
+00015160: 7261 6220 7468 6520 6865 6967 6874 2e0a  rab the height..
+00015170: 2020 2020 3a70 6172 616d 204f 7074 696f      :param Optio
+00015180: 6e61 6c5b 626f 6f6c 5d20 6f76 6572 7772  nal[bool] overwr
+00015190: 6974 653a 2049 6620 5472 7565 2c20 7468  ite: If True, th
+000151a0: 656e 206f 7665 7277 7269 7465 7320 7468  en overwrites th
+000151b0: 6520 6f72 6967 696e 616c 2076 6964 656f  e original video
+000151c0: 732e 2044 6566 6175 6c74 2046 616c 7365  s. Default False
+000151d0: 2e0a 2020 2020 3a70 6172 616d 204f 7074  ..    :param Opt
+000151e0: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
+000151f0: 206f 732e 5061 7468 4c69 6b65 5d5d 2073   os.PathLike]] s
+00015200: 6176 655f 6469 723a 2049 6620 6e6f 7420  ave_dir: If not 
+00015210: 4e6f 6e65 2c20 7468 656e 2074 6865 2064  None, then the d
+00015220: 6972 6563 746f 7279 2077 6865 7265 2074  irectory where t
+00015230: 6f20 7374 6f72 6520 7468 6520 7265 2d73  o store the re-s
+00015240: 697a 6564 2076 6964 656f 732e 0a20 2020  ized videos..   
+00015250: 203a 7061 7261 6d20 4f70 7469 6f6e 616c   :param Optional
+00015260: 5b62 6f6f 6c5d 2067 7075 3a20 4966 2054  [bool] gpu: If T
+00015270: 7275 652c 2074 6865 6e20 7573 6520 4646  rue, then use FF
+00015280: 6d70 6567 2047 5055 2063 6f64 6563 732e  mpeg GPU codecs.
+00015290: 2044 6566 6175 6c74 2046 616c 7365 2e0a   Default False..
+000152a0: 2020 2020 3a70 6172 616d 204f 7074 696f      :param Optio
+000152b0: 6e61 6c5b 626f 6f6c 5d20 7665 7262 6f73  nal[bool] verbos
+000152c0: 653a 2049 6620 5472 7565 2c20 7072 696e  e: If True, prin
+000152d0: 7473 2070 726f 6772 6573 732e 2044 6566  ts progress. Def
+000152e0: 6175 6c74 2054 7275 652e 0a20 2020 203a  ault True..    :
+000152f0: 7265 7475 726e 2055 6e69 6f6e 5b4e 6f6e  return Union[Non
+00015300: 652c 204c 6973 745b 556e 696f 6e5b 7374  e, List[Union[st
+00015310: 722c 206f 732e 5061 7468 4c69 6b65 5d5d  r, os.PathLike]]
+00015320: 5d3a 2049 6620 7361 7665 5f64 6972 2069  ]: If save_dir i
+00015330: 7320 6e6f 7420 4e6f 6e65 2c20 7265 7475  s not None, retu
+00015340: 726e 7320 7468 6520 7061 7468 7320 6f66  rns the paths of
+00015350: 2074 6865 2072 652d 7369 7a65 6420 7669   the re-sized vi
+00015360: 6465 6f73 2e20 456c 7365 2072 6574 7572  deos. Else retur
+00015370: 6e73 2065 6d70 7479 206c 6973 742e 0a0a  ns empty list...
+00015380: 2020 2020 3a65 7861 6d70 6c65 3a0a 2020      :example:.  
+00015390: 2020 3e3e 3e20 7669 6465 6f5f 7061 7468    >>> video_path
+000153a0: 733d 205b 272f 5573 6572 732f 7369 6d6f  s= ['/Users/simo
+000153b0: 6e2f 4465 736b 746f 702f 656e 7673 2f73  n/Desktop/envs/s
+000153c0: 696d 6261 2f74 726f 7562 6c65 7368 6f6f  imba/troubleshoo
+000153d0: 7469 6e67 2f52 4154 5f4e 4f52 2f70 726f  ting/RAT_NOR/pro
+000153e0: 6a65 6374 5f66 6f6c 6465 722f 7669 6465  ject_folder/vide
+000153f0: 6f73 2f74 6573 742f 3038 3130 3230 3231  os/test/08102021
+00015400: 5f44 4f54 5f52 6174 375f 3828 3229 2e6d  _DOT_Rat7_8(2).m
+00015410: 7034 272c 2027 2f55 7365 7273 2f73 696d  p4', '/Users/sim
+00015420: 6f6e 2f44 6573 6b74 6f70 2f65 6e76 732f  on/Desktop/envs/
+00015430: 7369 6d62 612f 7472 6f75 626c 6573 686f  simba/troublesho
+00015440: 6f74 696e 672f 5241 545f 4e4f 522f 7072  oting/RAT_NOR/pr
+00015450: 6f6a 6563 745f 666f 6c64 6572 2f76 6964  oject_folder/vid
+00015460: 656f 732f 7465 7374 2f30 3831 3032 3032  eos/test/0810202
+00015470: 315f 444f 545f 5261 7431 315f 3132 2e6d  1_DOT_Rat11_12.m
+00015480: 7034 275d 0a20 2020 203e 3e3e 205f 203d  p4'].    >>> _ =
+00015490: 2072 6573 697a 655f 7669 6465 6f73 5f62   resize_videos_b
+000154a0: 795f 6865 6967 6874 2876 6964 656f 5f70  y_height(video_p
+000154b0: 6174 6873 3d76 6964 656f 5f70 6174 6873  aths=video_paths
+000154c0: 2c20 6865 6967 6874 3d33 3030 2c20 6f76  , height=300, ov
+000154d0: 6572 7772 6974 653d 4661 6c73 652c 2073  erwrite=False, s
+000154e0: 6176 655f 6469 723d 272f 5573 6572 732f  ave_dir='/Users/
+000154f0: 7369 6d6f 6e2f 4465 736b 746f 702f 656e  simon/Desktop/en
+00015500: 7673 2f73 696d 6261 2f74 726f 7562 6c65  vs/simba/trouble
+00015510: 7368 6f6f 7469 6e67 2f52 4154 5f4e 4f52  shooting/RAT_NOR
+00015520: 2f70 726f 6a65 6374 5f66 6f6c 6465 722f  /project_folder/
+00015530: 7669 6465 6f73 2f74 6573 742f 6e65 7727  videos/test/new'
+00015540: 290a 2020 2020 2222 220a 2020 2020 7469  ).    """.    ti
+00015550: 6d65 7220 3d20 5369 6d62 6154 696d 6572  mer = SimbaTimer
+00015560: 2873 7461 7274 3d54 7275 6529 0a20 2020  (start=True).   
+00015570: 2069 6620 286e 6f74 206f 7665 7277 7269   if (not overwri
+00015580: 7465 2920 616e 6420 2873 6176 655f 6469  te) and (save_di
+00015590: 7220 6973 204e 6f6e 6529 3a0a 2020 2020  r is None):.    
+000155a0: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
+000155b0: 6449 6e70 7574 4572 726f 7228 0a20 2020  dInputError(.   
+000155c0: 2020 2020 2020 2020 206d 7367 3d22 5061           msg="Pa
+000155d0: 7373 2061 2073 6176 655f 6469 7220 4f52  ss a save_dir OR
+000155e0: 2073 6574 206f 7665 7277 7269 7465 2074   set overwrite t
+000155f0: 6f20 5472 7565 222c 0a20 2020 2020 2020  o True",.       
+00015600: 2020 2020 2073 6f75 7263 653d 7265 7369       source=resi
+00015610: 7a65 5f76 6964 656f 735f 6279 5f68 6569  ze_videos_by_hei
+00015620: 6768 742e 5f5f 6e61 6d65 5f5f 2c0a 2020  ght.__name__,.  
+00015630: 2020 2020 2020 290a 2020 2020 656c 6966        ).    elif
+00015640: 2028 6f76 6572 7772 6974 6529 2061 6e64   (overwrite) and
+00015650: 2028 7361 7665 5f64 6972 2069 7320 6e6f   (save_dir is no
+00015660: 7420 4e6f 6e65 293a 0a20 2020 2020 2020  t None):.       
+00015670: 2072 6169 7365 2049 6e76 616c 6964 496e   raise InvalidIn
+00015680: 7075 7445 7272 6f72 280a 2020 2020 2020  putError(.      
+00015690: 2020 2020 2020 6d73 673d 2250 6173 7320        msg="Pass 
+000156a0: 4549 5448 4552 206f 7665 7277 7269 7465  EITHER overwrite
+000156b0: 2061 7320 5472 7565 204f 5220 7061 7373   as True OR pass
+000156c0: 2061 2073 6176 655f 6469 7222 2c0a 2020   a save_dir",.  
+000156d0: 2020 2020 2020 2020 2020 736f 7572 6365            source
+000156e0: 3d72 6573 697a 655f 7669 6465 6f73 5f62  =resize_videos_b
+000156f0: 795f 6865 6967 6874 2e5f 5f6e 616d 655f  y_height.__name_
+00015700: 5f2c 0a20 2020 2020 2020 2029 0a20 2020  _,.        ).   
+00015710: 2069 6620 7361 7665 5f64 6972 2069 7320   if save_dir is 
+00015720: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00015730: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
+00015740: 2e69 7364 6972 2873 6176 655f 6469 7229  .isdir(save_dir)
+00015750: 3a0a 2020 2020 2020 2020 2020 2020 6f73  :.            os
+00015760: 2e6d 616b 6564 6972 7328 7361 7665 5f64  .makedirs(save_d
+00015770: 6972 290a 2020 2020 6368 6563 6b5f 7661  ir).    check_va
+00015780: 6c69 645f 6c73 7428 0a20 2020 2020 2020  lid_lst(.       
+00015790: 2064 6174 613d 7669 6465 6f5f 7061 7468   data=video_path
+000157a0: 732c 2073 6f75 7263 653d 7265 7369 7a65  s, source=resize
+000157b0: 5f76 6964 656f 735f 6279 5f68 6569 6768  _videos_by_heigh
+000157c0: 742e 5f5f 6e61 6d65 5f5f 2c20 6d69 6e5f  t.__name__, min_
+000157d0: 6c65 6e3d 310a 2020 2020 290a 2020 2020  len=1.    ).    
+000157e0: 5f20 3d20 5b63 6865 636b 5f66 696c 655f  _ = [check_file_
+000157f0: 6578 6973 745f 616e 645f 7265 6164 6162  exist_and_readab
+00015800: 6c65 2878 2920 666f 7220 7820 696e 2076  le(x) for x in v
+00015810: 6964 656f 5f70 6174 6873 5d0a 2020 2020  ideo_paths].    
+00015820: 6e65 775f 7669 6465 6f5f 7061 7468 7320  new_video_paths 
+00015830: 3d20 5b5d 0a20 2020 2069 6620 6973 696e  = [].    if isin
+00015840: 7374 616e 6365 2868 6569 6768 742c 2073  stance(height, s
+00015850: 7472 293a 0a20 2020 2020 2020 2063 6865  tr):.        che
+00015860: 636b 5f69 6e74 280a 2020 2020 2020 2020  ck_int(.        
+00015870: 2020 2020 6e61 6d65 3d66 227b 7265 7369      name=f"{resi
+00015880: 7a65 5f76 6964 656f 735f 6279 5f68 6569  ze_videos_by_hei
+00015890: 6768 742e 5f5f 6e61 6d65 5f5f 7d20 6865  ght.__name__} he
+000158a0: 6967 6874 222c 0a20 2020 2020 2020 2020  ight",.         
+000158b0: 2020 2076 616c 7565 3d68 6569 6768 742c     value=height,
+000158c0: 0a20 2020 2020 2020 2020 2020 206d 696e  .            min
+000158d0: 5f76 616c 7565 3d30 2c0a 2020 2020 2020  _value=0,.      
+000158e0: 2020 2020 2020 6d61 785f 7661 6c75 653d        max_value=
+000158f0: 6c65 6e28 7669 6465 6f5f 7061 7468 7329  len(video_paths)
+00015900: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
+00015910: 2020 2020 7669 6465 6f5f 6865 6967 6874      video_height
+00015920: 7320 3d20 5b5d 0a20 2020 2020 2020 2066  s = [].        f
+00015930: 6f72 2069 2069 6e20 7669 6465 6f5f 7061  or i in video_pa
+00015940: 7468 733a 0a20 2020 2020 2020 2020 2020  ths:.           
+00015950: 2076 6964 656f 5f68 6569 6768 7473 2e61   video_heights.a
+00015960: 7070 656e 6428 6765 745f 7669 6465 6f5f  ppend(get_video_
+00015970: 6d65 7461 5f64 6174 6128 7669 6465 6f5f  meta_data(video_
+00015980: 7061 7468 3d69 295b 2268 6569 6768 7422  path=i)["height"
+00015990: 5d29 0a20 2020 2020 2020 2068 6569 6768  ]).        heigh
+000159a0: 7420 3d20 7669 6465 6f5f 6865 6967 6874  t = video_height
+000159b0: 735b 696e 7428 6865 6967 6874 295d 0a20  s[int(height)]. 
+000159c0: 2020 2066 6f72 2063 6e74 2c20 7669 6465     for cnt, vide
+000159d0: 6f5f 7061 7468 2069 6e20 656e 756d 6572  o_path in enumer
+000159e0: 6174 6528 7669 6465 6f5f 7061 7468 7329  ate(video_paths)
+000159f0: 3a0a 2020 2020 2020 2020 6469 725f 6e61  :.        dir_na
+00015a00: 6d65 2c20 7669 6465 6f5f 6e61 6d65 2c20  me, video_name, 
+00015a10: 6578 7420 3d20 6765 745f 666e 5f65 7874  ext = get_fn_ext
+00015a20: 2876 6964 656f 5f70 6174 6829 0a20 2020  (video_path).   
+00015a30: 2020 2020 2069 6620 7665 7262 6f73 653a       if verbose:
+00015a40: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00015a50: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
+00015a60: 2020 2020 6622 5265 7369 7a69 6e67 2068      f"Resizing h
+00015a70: 6569 6768 7420 7669 6465 6f20 7b76 6964  eight video {vid
+00015a80: 656f 5f6e 616d 657d 2028 5669 6465 6f20  eo_name} (Video 
+00015a90: 7b63 6e74 2b31 7d2f 7b6c 656e 2876 6964  {cnt+1}/{len(vid
+00015aa0: 656f 5f70 6174 6873 297d 292e 2e2e 220a  eo_paths)})...".
+00015ab0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00015ac0: 2020 2020 2020 6966 206f 7665 7277 7269        if overwri
+00015ad0: 7465 3a0a 2020 2020 2020 2020 2020 2020  te:.            
+00015ae0: 6474 203d 2064 6174 6574 696d 652e 6e6f  dt = datetime.no
+00015af0: 7728 292e 7374 7266 7469 6d65 2822 2559  w().strftime("%Y
+00015b00: 256d 2564 2548 254d 2553 2229 0a20 2020  %m%d%H%M%S").   
+00015b10: 2020 2020 2020 2020 2073 6176 655f 7061           save_pa
+00015b20: 7468 203d 206f 732e 7061 7468 2e6a 6f69  th = os.path.joi
+00015b30: 6e28 6469 725f 6e61 6d65 2c20 6622 7b76  n(dir_name, f"{v
+00015b40: 6964 656f 5f6e 616d 657d 5f7b 6474 7d2e  ideo_name}_{dt}.
+00015b50: 6d70 3422 290a 2020 2020 2020 2020 656c  mp4").        el
+00015b60: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00015b70: 7361 7665 5f70 6174 6820 3d20 6f73 2e70  save_path = os.p
+00015b80: 6174 682e 6a6f 696e 2873 6176 655f 6469  ath.join(save_di
+00015b90: 722c 2066 227b 7669 6465 6f5f 6e61 6d65  r, f"{video_name
+00015ba0: 7d2e 6d70 3422 290a 2020 2020 2020 2020  }.mp4").        
+00015bb0: 2020 2020 6e65 775f 7669 6465 6f5f 7061      new_video_pa
+00015bc0: 7468 732e 6170 7065 6e64 2873 6176 655f  ths.append(save_
+00015bd0: 7061 7468 290a 2020 2020 2020 2020 6966  path).        if
+00015be0: 2067 7075 3a0a 2020 2020 2020 2020 2020   gpu:.          
+00015bf0: 2020 636d 6420 3d20 6627 6666 6d70 6567    cmd = f'ffmpeg
+00015c00: 202d 7920 2d68 7761 6363 656c 2061 7574   -y -hwaccel aut
+00015c10: 6f20 2d63 3a76 2068 3236 345f 6375 7669  o -c:v h264_cuvi
+00015c20: 6420 2d69 2022 7b76 6964 656f 5f70 6174  d -i "{video_pat
+00015c30: 687d 2220 2d76 6620 7363 616c 655f 6e70  h}" -vf scale_np
+00015c40: 703d 2d32 3a7b 6865 6967 6874 7d20 2d63  p=-2:{height} -c
+00015c50: 3a76 2068 3236 345f 6e76 656e 6320 227b  :v h264_nvenc "{
+00015c60: 7361 7665 5f70 6174 687d 2220 2d68 6964  save_path}" -hid
+00015c70: 655f 6261 6e6e 6572 202d 6c6f 676c 6576  e_banner -loglev
+00015c80: 656c 2065 7272 6f72 202d 7927 0a20 2020  el error -y'.   
+00015c90: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00015ca0: 2020 2020 2020 2063 6d64 203d 2066 2766         cmd = f'f
+00015cb0: 666d 7065 6720 2d79 202d 6920 227b 7669  fmpeg -y -i "{vi
+00015cc0: 6465 6f5f 7061 7468 7d22 202d 7666 2073  deo_path}" -vf s
+00015cd0: 6361 6c65 3d2d 323a 7b68 6569 6768 747d  cale=-2:{height}
+00015ce0: 2022 7b73 6176 655f 7061 7468 7d22 202d   "{save_path}" -
+00015cf0: 6869 6465 5f62 616e 6e65 7220 2d6c 6f67  hide_banner -log
+00015d00: 6c65 7665 6c20 6572 726f 7220 2d79 270a  level error -y'.
+00015d10: 2020 2020 2020 2020 7375 6270 726f 6365          subproce
+00015d20: 7373 2e63 616c 6c28 636d 642c 2073 6865  ss.call(cmd, she
+00015d30: 6c6c 3d54 7275 652c 2073 7464 6f75 743d  ll=True, stdout=
+00015d40: 7375 6270 726f 6365 7373 2e50 4950 4529  subprocess.PIPE)
+00015d50: 0a20 2020 2020 2020 2069 6620 6f76 6572  .        if over
+00015d60: 7772 6974 653a 0a20 2020 2020 2020 2020  write:.         
+00015d70: 2020 2073 6875 7469 6c2e 636f 7079 2873     shutil.copy(s
+00015d80: 6176 655f 7061 7468 2c20 7669 6465 6f5f  ave_path, video_
+00015d90: 7061 7468 290a 2020 2020 2020 2020 2020  path).          
+00015da0: 2020 6f73 2e72 656d 6f76 6528 7361 7665    os.remove(save
+00015db0: 5f70 6174 6829 0a20 2020 2074 696d 6572  _path).    timer
+00015dc0: 2e73 746f 705f 7469 6d65 7228 290a 2020  .stop_timer().  
+00015dd0: 2020 6966 2076 6572 626f 7365 3a0a 2020    if verbose:.  
+00015de0: 2020 2020 2020 7072 696e 7428 0a20 2020        print(.   
+00015df0: 2020 2020 2020 2020 2066 2252 6573 697a           f"Resiz
+00015e00: 6564 2068 6569 6768 7420 7b6c 656e 2876  ed height {len(v
+00015e10: 6964 656f 5f70 6174 6873 297d 2076 6964  ideo_paths)} vid
+00015e20: 656f 2873 292e 2045 6c61 7073 6564 2074  eo(s). Elapsed t
+00015e30: 696d 653a 207b 7469 6d65 722e 656c 6170  ime: {timer.elap
+00015e40: 7365 645f 7469 6d65 5f73 7472 7d73 2e22  sed_time_str}s."
+00015e50: 0a20 2020 2020 2020 2029 0a20 2020 2072  .        ).    r
+00015e60: 6574 7572 6e20 6e65 775f 7669 6465 6f5f  eturn new_video_
+00015e70: 7061 7468 730a 0a0a 6465 6620 7265 7369  paths...def resi
+00015e80: 7a65 5f76 6964 656f 735f 6279 5f77 6964  ze_videos_by_wid
+00015e90: 7468 280a 2020 2020 7669 6465 6f5f 7061  th(.    video_pa
+00015ea0: 7468 733a 204c 6973 745b 556e 696f 6e5b  ths: List[Union[
+00015eb0: 7374 722c 206f 732e 5061 7468 4c69 6b65  str, os.PathLike
+00015ec0: 5d5d 2c0a 2020 2020 7769 6474 683a 2055  ]],.    width: U
+00015ed0: 6e69 6f6e 5b69 6e74 2c20 7374 725d 2c0a  nion[int, str],.
+00015ee0: 2020 2020 6f76 6572 7772 6974 653a 204f      overwrite: O
+00015ef0: 7074 696f 6e61 6c5b 626f 6f6c 5d20 3d20  ptional[bool] = 
+00015f00: 4661 6c73 652c 0a20 2020 2073 6176 655f  False,.    save_
+00015f10: 6469 723a 204f 7074 696f 6e61 6c5b 556e  dir: Optional[Un
+00015f20: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
+00015f30: 4c69 6b65 5d5d 203d 204e 6f6e 652c 0a20  Like]] = None,. 
+00015f40: 2020 2067 7075 3a20 4f70 7469 6f6e 616c     gpu: Optional
+00015f50: 5b62 6f6f 6c5d 203d 2046 616c 7365 2c0a  [bool] = False,.
+00015f60: 2020 2020 7665 7262 6f73 653a 204f 7074      verbose: Opt
+00015f70: 696f 6e61 6c5b 626f 6f6c 5d20 3d20 5472  ional[bool] = Tr
+00015f80: 7565 2c0a 2920 2d3e 2055 6e69 6f6e 5b4e  ue,.) -> Union[N
+00015f90: 6f6e 652c 204c 6973 745b 556e 696f 6e5b  one, List[Union[
+00015fa0: 4e6f 6e65 2c20 7374 722c 206f 732e 5061  None, str, os.Pa
+00015fb0: 7468 4c69 6b65 5d5d 5d3a 0a20 2020 2022  thLike]]]:.    "
+00015fc0: 2222 0a20 2020 2052 652d 7369 7a65 2061  "".    Re-size a
+00015fd0: 206c 6973 7420 6f66 2076 6964 656f 7320   list of videos 
+00015fe0: 746f 2061 2073 7065 6369 6669 6564 2077  to a specified w
+00015ff0: 6964 7468 2077 6869 6c65 2072 6574 6169  idth while retai
+00016000: 6e69 6e67 2074 6865 6972 2061 7370 6563  ning their aspec
+00016010: 7420 7261 7469 6f73 2e0a 0a20 2020 203a  t ratios...    :
+00016020: 7061 7261 6d20 4c69 7374 5b55 6e69 6f6e  param List[Union
+00016030: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
+00016040: 655d 5d20 7669 6465 6f5f 7061 7468 733a  e]] video_paths:
+00016050: 204c 6973 7420 6f66 2070 6174 6820 746f   List of path to
+00016060: 2076 6964 656f 732e 0a20 2020 203a 7061   videos..    :pa
+00016070: 7261 6d20 556e 696f 6e5b 696e 742c 2073  ram Union[int, s
+00016080: 7472 5d20 7769 6474 683a 2054 6865 2077  tr] width: The w
+00016090: 6964 7468 206f 6620 7468 6520 6f75 7470  idth of the outp
+000160a0: 7574 2076 6964 656f 732e 2049 6620 696e  ut videos. If in
+000160b0: 742c 2074 6865 6e20 7468 6520 7769 6474  t, then the widt
+000160c0: 6820 696e 2070 6978 656c 732e 2049 6620  h in pixels. If 
+000160d0: 7374 722c 2074 6865 6e20 7468 6520 696e  str, then the in
+000160e0: 6465 7820 696e 2060 6076 6964 656f 5f70  dex in ``video_p
+000160f0: 6174 6873 6060 2066 726f 6d20 7768 6963  aths`` from whic
+00016100: 6820 746f 2067 7261 6220 7468 6520 7769  h to grab the wi
+00016110: 6474 682e 0a20 2020 203a 7061 7261 6d20  dth..    :param 
+00016120: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 206f  Optional[bool] o
+00016130: 7665 7277 7269 7465 3a20 4966 2054 7275  verwrite: If Tru
+00016140: 652c 2074 6865 6e20 6f76 6572 7772 6974  e, then overwrit
+00016150: 6573 2074 6865 206f 7269 6769 6e61 6c20  es the original 
+00016160: 7669 6465 6f73 2e20 4465 6661 756c 7420  videos. Default 
+00016170: 4661 6c73 652e 0a20 2020 203a 7061 7261  False..    :para
+00016180: 6d20 4f70 7469 6f6e 616c 5b55 6e69 6f6e  m Optional[Union
+00016190: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
+000161a0: 655d 5d20 7361 7665 5f64 6972 3a20 4966  e]] save_dir: If
+000161b0: 206e 6f74 204e 6f6e 652c 2074 6865 6e20   not None, then 
+000161c0: 7468 6520 6469 7265 6374 6f72 7920 7768  the directory wh
+000161d0: 6572 6520 746f 2073 746f 7265 2074 6865  ere to store the
+000161e0: 2072 652d 7369 7a65 6420 7669 6465 6f73   re-sized videos
+000161f0: 2e0a 2020 2020 3a70 6172 616d 204f 7074  ..    :param Opt
+00016200: 696f 6e61 6c5b 626f 6f6c 5d20 6770 753a  ional[bool] gpu:
+00016210: 2049 6620 5472 7565 2c20 7468 656e 2075   If True, then u
+00016220: 7365 2046 466d 7065 6720 4750 5520 636f  se FFmpeg GPU co
+00016230: 6465 6373 2e20 4465 6661 756c 7420 4661  decs. Default Fa
+00016240: 6c73 652e 0a20 2020 203a 7061 7261 6d20  lse..    :param 
+00016250: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 2076  Optional[bool] v
+00016260: 6572 626f 7365 3a20 4966 2054 7275 652c  erbose: If True,
+00016270: 2070 7269 6e74 7320 7072 6f67 7265 7373   prints progress
+00016280: 2e20 4465 6661 756c 7420 5472 7565 2e0a  . Default True..
+00016290: 2020 2020 3a72 6574 7572 6e20 556e 696f      :return Unio
+000162a0: 6e5b 4e6f 6e65 2c20 4c69 7374 5b55 6e69  n[None, List[Uni
+000162b0: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
+000162c0: 696b 655d 5d5d 3a20 4966 2073 6176 655f  ike]]]: If save_
+000162d0: 6469 7220 6973 206e 6f74 204e 6f6e 652c  dir is not None,
+000162e0: 2072 6574 7572 6e73 2074 6865 2070 6174   returns the pat
+000162f0: 6873 206f 6620 7468 6520 7265 2d73 697a  hs of the re-siz
+00016300: 6564 2076 6964 656f 732e 2045 6c73 6520  ed videos. Else 
+00016310: 7265 7475 726e 7320 656d 7074 7920 6c69  returns empty li
+00016320: 7374 2e0a 0a20 2020 203a 6578 616d 706c  st...    :exampl
+00016330: 653a 0a20 2020 203e 3e3e 2076 6964 656f  e:.    >>> video
+00016340: 5f70 6174 6873 3d20 5b27 2f55 7365 7273  _paths= ['/Users
+00016350: 2f73 696d 6f6e 2f44 6573 6b74 6f70 2f65  /simon/Desktop/e
+00016360: 6e76 732f 7369 6d62 612f 7472 6f75 626c  nvs/simba/troubl
+00016370: 6573 686f 6f74 696e 672f 5241 545f 4e4f  eshooting/RAT_NO
+00016380: 522f 7072 6f6a 6563 745f 666f 6c64 6572  R/project_folder
+00016390: 2f76 6964 656f 732f 7465 7374 2f30 3831  /videos/test/081
+000163a0: 3032 3032 315f 444f 545f 5261 7437 5f38  02021_DOT_Rat7_8
+000163b0: 2832 292e 6d70 3427 2c20 272f 5573 6572  (2).mp4', '/User
+000163c0: 732f 7369 6d6f 6e2f 4465 736b 746f 702f  s/simon/Desktop/
+000163d0: 656e 7673 2f73 696d 6261 2f74 726f 7562  envs/simba/troub
+000163e0: 6c65 7368 6f6f 7469 6e67 2f52 4154 5f4e  leshooting/RAT_N
+000163f0: 4f52 2f70 726f 6a65 6374 5f66 6f6c 6465  OR/project_folde
+00016400: 722f 7669 6465 6f73 2f74 6573 742f 3038  r/videos/test/08
+00016410: 3130 3230 3231 5f44 4f54 5f52 6174 3131  102021_DOT_Rat11
+00016420: 5f31 322e 6d70 3427 5d0a 2020 2020 3e3e  _12.mp4'].    >>
+00016430: 3e20 5f20 3d20 7265 7369 7a65 5f76 6964  > _ = resize_vid
+00016440: 656f 735f 6279 5f77 6964 7468 2876 6964  eos_by_width(vid
+00016450: 656f 5f70 6174 6873 3d76 6964 656f 5f70  eo_paths=video_p
+00016460: 6174 6873 2c20 7769 6474 683d 3330 302c  aths, width=300,
+00016470: 206f 7665 7277 7269 7465 3d46 616c 7365   overwrite=False
+00016480: 2c20 7361 7665 5f64 6972 3d27 2f55 7365  , save_dir='/Use
+00016490: 7273 2f73 696d 6f6e 2f44 6573 6b74 6f70  rs/simon/Desktop
+000164a0: 2f65 6e76 732f 7369 6d62 612f 7472 6f75  /envs/simba/trou
+000164b0: 626c 6573 686f 6f74 696e 672f 5241 545f  bleshooting/RAT_
+000164c0: 4e4f 522f 7072 6f6a 6563 745f 666f 6c64  NOR/project_fold
+000164d0: 6572 2f76 6964 656f 732f 7465 7374 2f6e  er/videos/test/n
+000164e0: 6577 2729 0a20 2020 2022 2222 0a0a 2020  ew').    """..  
+000164f0: 2020 7469 6d65 7220 3d20 5369 6d62 6154    timer = SimbaT
+00016500: 696d 6572 2873 7461 7274 3d54 7275 6529  imer(start=True)
+00016510: 0a20 2020 2069 6620 286e 6f74 206f 7665  .    if (not ove
+00016520: 7277 7269 7465 2920 616e 6420 2873 6176  rwrite) and (sav
+00016530: 655f 6469 7220 6973 204e 6f6e 6529 3a0a  e_dir is None):.
+00016540: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
+00016550: 7661 6c69 6449 6e70 7574 4572 726f 7228  validInputError(
+00016560: 0a20 2020 2020 2020 2020 2020 206d 7367  .            msg
+00016570: 3d22 5072 6f76 6964 6520 6120 7361 7665  ="Provide a save
+00016580: 5f64 6972 206f 7220 7365 7420 6f76 6572  _dir or set over
+00016590: 7772 6974 6520 746f 2054 7275 6522 2c0a  write to True",.
+000165a0: 2020 2020 2020 2020 2020 2020 736f 7572              sour
+000165b0: 6365 3d72 6573 697a 655f 7669 6465 6f73  ce=resize_videos
+000165c0: 5f62 795f 7769 6474 682e 5f5f 6e61 6d65  _by_width.__name
+000165d0: 5f5f 2c0a 2020 2020 2020 2020 290a 2020  __,.        ).  
+000165e0: 2020 656c 6966 2028 6f76 6572 7772 6974    elif (overwrit
+000165f0: 6529 2061 6e64 2028 7361 7665 5f64 6972  e) and (save_dir
+00016600: 2069 7320 6e6f 7420 4e6f 6e65 293a 0a20   is not None):. 
+00016610: 2020 2020 2020 2072 6169 7365 2049 6e76         raise Inv
+00016620: 616c 6964 496e 7075 7445 7272 6f72 280a  alidInputError(.
+00016630: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
+00016640: 2253 6574 2045 4954 4845 5220 6f76 6572  "Set EITHER over
+00016650: 7772 6974 6520 746f 2054 7275 6520 4f52  write to True OR
+00016660: 2050 726f 7669 6465 2061 2073 6176 655f   Provide a save_
+00016670: 6469 7222 2c0a 2020 2020 2020 2020 2020  dir",.          
+00016680: 2020 736f 7572 6365 3d72 6573 697a 655f    source=resize_
+00016690: 7669 6465 6f73 5f62 795f 7769 6474 682e  videos_by_width.
+000166a0: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
+000166b0: 2020 290a 2020 2020 6966 2073 6176 655f    ).    if save_
+000166c0: 6469 7220 6973 206e 6f74 204e 6f6e 653a  dir is not None:
+000166d0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+000166e0: 6f73 2e70 6174 682e 6973 6469 7228 7361  os.path.isdir(sa
+000166f0: 7665 5f64 6972 293a 0a20 2020 2020 2020  ve_dir):.       
+00016700: 2020 2020 206f 732e 6d61 6b65 6469 7273       os.makedirs
+00016710: 2873 6176 655f 6469 7229 0a20 2020 2063  (save_dir).    c
+00016720: 6865 636b 5f76 616c 6964 5f6c 7374 2864  heck_valid_lst(d
+00016730: 6174 613d 7669 6465 6f5f 7061 7468 732c  ata=video_paths,
+00016740: 2073 6f75 7263 653d 7265 7369 7a65 5f76   source=resize_v
+00016750: 6964 656f 735f 6279 5f77 6964 7468 2e5f  ideos_by_width._
+00016760: 5f6e 616d 655f 5f2c 206d 696e 5f6c 656e  _name__, min_len
+00016770: 3d31 290a 2020 2020 5f20 3d20 5b63 6865  =1).    _ = [che
+00016780: 636b 5f66 696c 655f 6578 6973 745f 616e  ck_file_exist_an
+00016790: 645f 7265 6164 6162 6c65 2878 2920 666f  d_readable(x) fo
+000167a0: 7220 7820 696e 2076 6964 656f 5f70 6174  r x in video_pat
+000167b0: 6873 5d0a 2020 2020 6e65 775f 7669 6465  hs].    new_vide
+000167c0: 6f5f 7061 7468 7320 3d20 5b5d 0a20 2020  o_paths = [].   
+000167d0: 2069 6620 6973 696e 7374 616e 6365 2877   if isinstance(w
+000167e0: 6964 7468 2c20 7374 7229 3a0a 2020 2020  idth, str):.    
+000167f0: 2020 2020 6368 6563 6b5f 696e 7428 0a20      check_int(. 
+00016800: 2020 2020 2020 2020 2020 206e 616d 653d             name=
+00016810: 6622 7b72 6573 697a 655f 7669 6465 6f73  f"{resize_videos
+00016820: 5f62 795f 7769 6474 682e 5f5f 6e61 6d65  _by_width.__name
+00016830: 5f5f 7d20 6865 6967 6874 222c 0a20 2020  __} height",.   
+00016840: 2020 2020 2020 2020 2076 616c 7565 3d77           value=w
+00016850: 6964 7468 2c0a 2020 2020 2020 2020 2020  idth,.          
+00016860: 2020 6d69 6e5f 7661 6c75 653d 302c 0a20    min_value=0,. 
+00016870: 2020 2020 2020 2020 2020 206d 6178 5f76             max_v
+00016880: 616c 7565 3d6c 656e 2876 6964 656f 5f70  alue=len(video_p
+00016890: 6174 6873 292c 0a20 2020 2020 2020 2029  aths),.        )
+000168a0: 0a20 2020 2020 2020 2076 6964 656f 5f77  .        video_w
+000168b0: 6964 7468 7320 3d20 5b5d 0a20 2020 2020  idths = [].     
+000168c0: 2020 2066 6f72 2069 2069 6e20 7669 6465     for i in vide
+000168d0: 6f5f 7061 7468 733a 0a20 2020 2020 2020  o_paths:.       
+000168e0: 2020 2020 2076 6964 656f 5f77 6964 7468       video_width
+000168f0: 732e 6170 7065 6e64 2867 6574 5f76 6964  s.append(get_vid
+00016900: 656f 5f6d 6574 615f 6461 7461 2876 6964  eo_meta_data(vid
+00016910: 656f 5f70 6174 683d 6929 5b22 7769 6474  eo_path=i)["widt
+00016920: 6822 5d29 0a20 2020 2020 2020 2077 6964  h"]).        wid
+00016930: 7468 203d 2076 6964 656f 5f77 6964 7468  th = video_width
+00016940: 735b 696e 7428 7769 6474 6829 5d0a 2020  s[int(width)].  
+00016950: 2020 666f 7220 636e 742c 2076 6964 656f    for cnt, video
+00016960: 5f70 6174 6820 696e 2065 6e75 6d65 7261  _path in enumera
+00016970: 7465 2876 6964 656f 5f70 6174 6873 293a  te(video_paths):
+00016980: 0a20 2020 2020 2020 2064 6972 5f6e 616d  .        dir_nam
+00016990: 652c 2076 6964 656f 5f6e 616d 652c 2065  e, video_name, e
+000169a0: 7874 203d 2067 6574 5f66 6e5f 6578 7428  xt = get_fn_ext(
+000169b0: 7669 6465 6f5f 7061 7468 290a 2020 2020  video_path).    
+000169c0: 2020 2020 6966 2076 6572 626f 7365 3a0a      if verbose:.
+000169d0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+000169e0: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
+000169f0: 2020 2066 2252 6573 697a 696e 6720 7769     f"Resizing wi
+00016a00: 6474 6820 7669 6465 6f20 7b76 6964 656f  dth video {video
+00016a10: 5f6e 616d 657d 2028 5669 6465 6f20 7b63  _name} (Video {c
+00016a20: 6e74 2b31 7d2f 7b6c 656e 2876 6964 656f  nt+1}/{len(video
+00016a30: 5f70 6174 6873 297d 292e 2e2e 220a 2020  _paths)})...".  
+00016a40: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00016a50: 2020 2020 6966 206f 7665 7277 7269 7465      if overwrite
+00016a60: 3a0a 2020 2020 2020 2020 2020 2020 6474  :.            dt
+00016a70: 203d 2064 6174 6574 696d 652e 6e6f 7728   = datetime.now(
+00016a80: 292e 7374 7266 7469 6d65 2822 2559 256d  ).strftime("%Y%m
+00016a90: 2564 2548 254d 2553 2229 0a20 2020 2020  %d%H%M%S").     
+00016aa0: 2020 2020 2020 2073 6176 655f 7061 7468         save_path
+00016ab0: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
+00016ac0: 6469 725f 6e61 6d65 2c20 6622 7b76 6964  dir_name, f"{vid
+00016ad0: 656f 5f6e 616d 657d 5f7b 6474 7d2e 6d70  eo_name}_{dt}.mp
+00016ae0: 3422 290a 2020 2020 2020 2020 656c 7365  4").        else
+00016af0: 3a0a 2020 2020 2020 2020 2020 2020 7361  :.            sa
+00016b00: 7665 5f70 6174 6820 3d20 6f73 2e70 6174  ve_path = os.pat
+00016b10: 682e 6a6f 696e 2873 6176 655f 6469 722c  h.join(save_dir,
+00016b20: 2066 227b 7669 6465 6f5f 6e61 6d65 7d2e   f"{video_name}.
+00016b30: 6d70 3422 290a 2020 2020 2020 2020 2020  mp4").          
+00016b40: 2020 6e65 775f 7669 6465 6f5f 7061 7468    new_video_path
+00016b50: 732e 6170 7065 6e64 2873 6176 655f 7061  s.append(save_pa
+00016b60: 7468 290a 2020 2020 2020 2020 6966 2067  th).        if g
+00016b70: 7075 3a0a 2020 2020 2020 2020 2020 2020  pu:.            
+00016b80: 636d 6420 3d20 6627 6666 6d70 6567 202d  cmd = f'ffmpeg -
+00016b90: 7920 2d68 7761 6363 656c 2061 7574 6f20  y -hwaccel auto 
+00016ba0: 2d69 2022 7b76 6964 656f 5f70 6174 687d  -i "{video_path}
+00016bb0: 2220 2d76 6620 7363 616c 655f 6e70 703d  " -vf scale_npp=
+00016bc0: 7b77 6964 7468 7d3a 2d32 202d 633a 7620  {width}:-2 -c:v 
+00016bd0: 6832 3634 5f6e 7665 6e63 2022 7b73 6176  h264_nvenc "{sav
+00016be0: 655f 7061 7468 7d22 202d 6869 6465 5f62  e_path}" -hide_b
+00016bf0: 616e 6e65 7220 2d6c 6f67 6c65 7665 6c20  anner -loglevel 
+00016c00: 6572 726f 7220 2d79 270a 2020 2020 2020  error -y'.      
+00016c10: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00016c20: 2020 2020 636d 6420 3d20 6627 6666 6d70      cmd = f'ffmp
+00016c30: 6567 202d 7920 2d69 2022 7b76 6964 656f  eg -y -i "{video
+00016c40: 5f70 6174 687d 2220 2d76 6620 7363 616c  _path}" -vf scal
+00016c50: 653d 7b77 6964 7468 7d3a 2d32 2022 7b73  e={width}:-2 "{s
+00016c60: 6176 655f 7061 7468 7d22 202d 6869 6465  ave_path}" -hide
+00016c70: 5f62 616e 6e65 7220 2d6c 6f67 6c65 7665  _banner -logleve
+00016c80: 6c20 6572 726f 7220 2d79 270a 2020 2020  l error -y'.    
+00016c90: 2020 2020 7375 6270 726f 6365 7373 2e63      subprocess.c
+00016ca0: 616c 6c28 636d 642c 2073 6865 6c6c 3d54  all(cmd, shell=T
+00016cb0: 7275 652c 2073 7464 6f75 743d 7375 6270  rue, stdout=subp
+00016cc0: 726f 6365 7373 2e50 4950 4529 0a20 2020  rocess.PIPE).   
+00016cd0: 2020 2020 2069 6620 6f76 6572 7772 6974       if overwrit
+00016ce0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00016cf0: 6875 7469 6c2e 636f 7079 2873 6176 655f  hutil.copy(save_
+00016d00: 7061 7468 2c20 7669 6465 6f5f 7061 7468  path, video_path
+00016d10: 290a 2020 2020 2020 2020 2020 2020 6f73  ).            os
+00016d20: 2e72 656d 6f76 6528 7361 7665 5f70 6174  .remove(save_pat
+00016d30: 6829 0a20 2020 2074 696d 6572 2e73 746f  h).    timer.sto
+00016d40: 705f 7469 6d65 7228 290a 2020 2020 6966  p_timer().    if
+00016d50: 2076 6572 626f 7365 3a0a 2020 2020 2020   verbose:.      
+00016d60: 2020 7072 696e 7428 0a20 2020 2020 2020    print(.       
+00016d70: 2020 2020 2066 2252 6573 697a 6564 2077       f"Resized w
+00016d80: 6964 7468 207b 6c65 6e28 7669 6465 6f5f  idth {len(video_
+00016d90: 7061 7468 7329 7d20 7669 6465 6f28 7329  paths)} video(s)
+00016da0: 2e20 456c 6170 7365 6420 7469 6d65 3a20  . Elapsed time: 
+00016db0: 7b74 696d 6572 2e65 6c61 7073 6564 5f74  {timer.elapsed_t
+00016dc0: 696d 655f 7374 727d 732e 220a 2020 2020  ime_str}s.".    
+00016dd0: 2020 2020 290a 2020 2020 7265 7475 726e      ).    return
+00016de0: 206e 6577 5f76 6964 656f 5f70 6174 6873   new_video_paths
+00016df0: 0a0a 0a64 6566 2063 7265 6174 655f 626c  ...def create_bl
+00016e00: 616e 6b5f 7669 6465 6f28 0a20 2020 2070  ank_video(.    p
+00016e10: 6174 683a 2055 6e69 6f6e 5b73 7472 2c20  ath: Union[str, 
+00016e20: 6f73 2e50 6174 684c 696b 655d 2c0a 2020  os.PathLike],.  
+00016e30: 2020 6c65 6e67 7468 3a20 696e 742c 0a20    length: int,. 
+00016e40: 2020 2077 6964 7468 3a20 696e 742c 0a20     width: int,. 
+00016e50: 2020 2068 6569 6768 743a 2069 6e74 2c0a     height: int,.
+00016e60: 2020 2020 636f 6c6f 723a 204f 7074 696f      color: Optio
+00016e70: 6e61 6c5b 7374 725d 203d 2022 626c 6163  nal[str] = "blac
+00016e80: 6b22 2c0a 2020 2020 6770 753a 204f 7074  k",.    gpu: Opt
+00016e90: 696f 6e61 6c5b 626f 6f6c 5d20 3d20 4661  ional[bool] = Fa
+00016ea0: 6c73 652c 0a20 2020 2076 6572 626f 7365  lse,.    verbose
+00016eb0: 3a20 4f70 7469 6f6e 616c 5b62 6f6f 6c5d  : Optional[bool]
+00016ec0: 203d 2046 616c 7365 2c0a 2920 2d3e 204e   = False,.) -> N
+00016ed0: 6f6e 653a 0a20 2020 2022 2222 0a20 2020  one:.    """.   
+00016ee0: 2043 7265 6174 6520 6120 2262 6c61 6e6b   Create a "blank
+00016ef0: 2220 756e 692d 636f 6c6f 7265 6420 7669  " uni-colored vi
+00016f00: 6465 6f20 6f66 2073 7065 6369 6669 6564  deo of specified
+00016f10: 2073 697a 6520 616e 6420 6c65 6e67 7468   size and length
+00016f20: 2e0a 0a20 2020 203a 7061 7261 6d20 556e  ...    :param Un
+00016f30: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
+00016f40: 4c69 6b65 5d20 7061 7468 3a20 4c6f 6361  Like] path: Loca
+00016f50: 7469 6f6e 2077 6865 7265 2074 6f20 7374  tion where to st
+00016f60: 6f72 6520 7468 6520 626c 616e 6b20 7669  ore the blank vi
+00016f70: 6465 6f2e 0a20 2020 203a 7061 7261 6d20  deo..    :param 
+00016f80: 696e 7420 6c65 6e67 7468 3a20 4c65 6e67  int length: Leng
+00016f90: 7468 206f 6620 7468 6520 626c 616e 6b20  th of the blank 
+00016fa0: 7669 6465 6f20 696e 2073 6563 6f6e 6473  video in seconds
+00016fb0: 2e0a 2020 2020 3a70 6172 616d 2069 6e74  ..    :param int
+00016fc0: 2077 6964 7468 3a20 5769 6474 6820 6f66   width: Width of
+00016fd0: 2074 6865 2062 6c61 6e6b 2076 6964 656f   the blank video
+00016fe0: 2069 6e20 7069 7865 6c73 2e0a 2020 2020   in pixels..    
+00016ff0: 3a70 6172 616d 2069 6e74 2068 6569 6768  :param int heigh
+00017000: 743a 2048 6569 6768 7420 6f66 2074 6865  t: Height of the
+00017010: 2062 6c61 6e6b 2076 6964 656f 2069 6e20   blank video in 
+00017020: 7069 7865 6c73 2e0a 2020 2020 3a70 6172  pixels..    :par
+00017030: 616d 204f 7074 696f 6e61 6c5b 7374 725d  am Optional[str]
+00017040: 2063 6f6c 6f72 3a20 436f 6c6f 7220 6f66   color: Color of
+00017050: 2074 6865 2062 6c61 6e6b 2076 6964 656f   the blank video
+00017060: 2e20 4465 6661 756c 7420 626c 6163 6b2e  . Default black.
+00017070: 0a20 2020 203a 7061 7261 6d20 4f70 7469  .    :param Opti
+00017080: 6f6e 616c 5b62 6f6f 6c5d 2067 7075 3a20  onal[bool] gpu: 
+00017090: 4966 2054 7275 652c 2074 6865 6e20 7573  If True, then us
+000170a0: 6520 4646 6d70 6567 2047 5055 2063 6f64  e FFmpeg GPU cod
+000170b0: 6563 732e 2044 6566 6175 6c74 2046 616c  ecs. Default Fal
+000170c0: 7365 2e0a 2020 2020 3a70 6172 616d 204f  se..    :param O
+000170d0: 7074 696f 6e61 6c5b 626f 6f6c 5d20 7665  ptional[bool] ve
+000170e0: 7262 6f73 653a 2049 6620 5472 7565 2c20  rbose: If True, 
+000170f0: 7072 696e 7473 2070 726f 6772 6573 732e  prints progress.
+00017100: 2044 6566 6175 6c74 2054 7275 652e 0a20   Default True.. 
+00017110: 2020 203a 7265 7475 726e 3a20 4e6f 6e65     :return: None
+00017120: 2e0a 0a20 2020 203a 6578 616d 706c 653a  ...    :example:
+00017130: 0a20 2020 203e 3e3e 205f 203d 2063 7265  .    >>> _ = cre
+00017140: 6174 655f 626c 616e 6b5f 7669 6465 6f28  ate_blank_video(
+00017150: 7061 7468 3d27 2f55 7365 7273 2f73 696d  path='/Users/sim
+00017160: 6f6e 2f44 6573 6b74 6f70 2f65 6e76 732f  on/Desktop/envs/
+00017170: 7369 6d62 612f 7472 6f75 626c 6573 686f  simba/troublesho
+00017180: 6f74 696e 672f 5241 545f 4e4f 522f 7072  oting/RAT_NOR/pr
+00017190: 6f6a 6563 745f 666f 6c64 6572 2f76 6964  oject_folder/vid
+000171a0: 656f 732f 7465 7374 2f6e 6577 2f62 6c61  eos/test/new/bla
+000171b0: 6e6b 5f74 6573 742e 6d70 3427 2c20 6c65  nk_test.mp4', le
+000171c0: 6e67 7468 3d35 2c20 7769 6474 683d 3330  ngth=5, width=30
+000171d0: 302c 2068 6569 6768 743d 3430 302c 2067  0, height=400, g
+000171e0: 7075 3d46 616c 7365 2c20 7665 7262 6f73  pu=False, verbos
+000171f0: 653d 5472 7565 2c20 636f 6c6f 723d 276f  e=True, color='o
+00017200: 7261 6e67 6527 290a 2020 2020 2222 220a  range').    """.
+00017210: 0a20 2020 2063 6865 636b 5f69 6e74 286e  .    check_int(n
+00017220: 616d 653d 6622 7b63 7265 6174 655f 626c  ame=f"{create_bl
+00017230: 616e 6b5f 7669 6465 6f2e 5f5f 6e61 6d65  ank_video.__name
+00017240: 5f5f 7d20 6c65 6e67 7468 222c 2076 616c  __} length", val
+00017250: 7565 3d6c 656e 6774 682c 206d 696e 5f76  ue=length, min_v
+00017260: 616c 7565 3d31 290a 2020 2020 6368 6563  alue=1).    chec
+00017270: 6b5f 696e 7428 6e61 6d65 3d66 227b 6372  k_int(name=f"{cr
+00017280: 6561 7465 5f62 6c61 6e6b 5f76 6964 656f  eate_blank_video
+00017290: 2e5f 5f6e 616d 655f 5f7d 2077 6964 7468  .__name__} width
+000172a0: 222c 2076 616c 7565 3d77 6964 7468 2c20  ", value=width, 
+000172b0: 6d69 6e5f 7661 6c75 653d 3129 0a20 2020  min_value=1).   
+000172c0: 2063 6865 636b 5f69 6e74 286e 616d 653d   check_int(name=
+000172d0: 6622 7b63 7265 6174 655f 626c 616e 6b5f  f"{create_blank_
+000172e0: 7669 6465 6f2e 5f5f 6e61 6d65 5f5f 7d20  video.__name__} 
+000172f0: 6865 6967 6874 222c 2076 616c 7565 3d68  height", value=h
+00017300: 6569 6768 742c 206d 696e 5f76 616c 7565  eight, min_value
+00017310: 3d31 290a 2020 2020 6368 6563 6b5f 6966  =1).    check_if
+00017320: 5f64 6972 5f65 7869 7374 7328 0a20 2020  _dir_exists(.   
+00017330: 2020 2020 2069 6e5f 6469 723d 6f73 2e70       in_dir=os.p
+00017340: 6174 682e 6469 726e 616d 6528 7061 7468  ath.dirname(path
+00017350: 292c 0a20 2020 2020 2020 2073 6f75 7263  ),.        sourc
+00017360: 653d 6372 6561 7465 5f62 6c61 6e6b 5f76  e=create_blank_v
+00017370: 6964 656f 2e5f 5f6e 616d 655f 5f2c 0a20  ideo.__name__,. 
+00017380: 2020 2020 2020 2063 7265 6174 655f 6966         create_if
+00017390: 5f6e 6f74 5f65 7869 7374 3d54 7275 652c  _not_exist=True,
+000173a0: 0a20 2020 2029 0a20 2020 2074 696d 6572  .    ).    timer
+000173b0: 203d 2053 696d 6261 5469 6d65 7228 7374   = SimbaTimer(st
+000173c0: 6172 743d 5472 7565 290a 2020 2020 6966  art=True).    if
+000173d0: 2076 6572 626f 7365 3a0a 2020 2020 2020   verbose:.      
+000173e0: 2020 7072 696e 7428 2243 7265 6174 696e    print("Creatin
+000173f0: 6720 626c 616e 6b20 7669 6465 6f2e 2e2e  g blank video...
+00017400: 2229 0a20 2020 2069 6620 6770 753a 0a20  ").    if gpu:. 
+00017410: 2020 2020 2020 2063 6d64 203d 2066 2766         cmd = f'f
+00017420: 666d 7065 6720 2d79 202d 7420 7b6c 656e  fmpeg -y -t {len
+00017430: 6774 687d 202d 6620 6c61 7666 6920 2d69  gth} -f lavfi -i
+00017440: 2063 6f6c 6f72 3d63 3d7b 636f 6c6f 727d   color=c={color}
+00017450: 3a73 3d7b 7769 6474 687d 787b 6865 6967  :s={width}x{heig
+00017460: 6874 7d20 2d63 3a76 2068 3236 345f 6e76  ht} -c:v h264_nv
+00017470: 656e 6320 2d70 7265 7365 7420 736c 6f77  enc -preset slow
+00017480: 202d 7475 6e65 2073 7469 6c6c 696d 6167   -tune stillimag
+00017490: 6520 2d70 6978 5f66 6d74 2079 7576 3432  e -pix_fmt yuv42
+000174a0: 3070 2022 7b70 6174 687d 2220 2d68 6964  0p "{path}" -hid
+000174b0: 655f 6261 6e6e 6572 202d 6c6f 676c 6576  e_banner -loglev
+000174c0: 656c 2065 7272 6f72 202d 7927 0a20 2020  el error -y'.   
+000174d0: 2065 6c73 653a 0a20 2020 2020 2020 2063   else:.        c
+000174e0: 6d64 203d 2066 2766 666d 7065 6720 2d79  md = f'ffmpeg -y
+000174f0: 202d 7420 7b6c 656e 6774 687d 202d 6620   -t {length} -f 
+00017500: 6c61 7666 6920 2d69 2063 6f6c 6f72 3d63  lavfi -i color=c
+00017510: 3d7b 636f 6c6f 727d 3a73 3d7b 7769 6474  ={color}:s={widt
+00017520: 687d 787b 6865 6967 6874 7d20 2d63 3a76  h}x{height} -c:v
+00017530: 206c 6962 7832 3634 202d 7475 6e65 2073   libx264 -tune s
+00017540: 7469 6c6c 696d 6167 6520 2d70 6978 5f66  tillimage -pix_f
+00017550: 6d74 2079 7576 3432 3070 2022 7b70 6174  mt yuv420p "{pat
+00017560: 687d 2220 2d68 6964 655f 6261 6e6e 6572  h}" -hide_banner
+00017570: 202d 6c6f 676c 6576 656c 2065 7272 6f72   -loglevel error
+00017580: 202d 7927 0a20 2020 2073 7562 7072 6f63   -y'.    subproc
+00017590: 6573 732e 6361 6c6c 2863 6d64 2c20 7368  ess.call(cmd, sh
+000175a0: 656c 6c3d 5472 7565 2c20 7374 646f 7574  ell=True, stdout
+000175b0: 3d73 7562 7072 6f63 6573 732e 5049 5045  =subprocess.PIPE
+000175c0: 290a 2020 2020 7469 6d65 722e 7374 6f70  ).    timer.stop
+000175d0: 5f74 696d 6572 2829 0a20 2020 2069 6620  _timer().    if 
+000175e0: 7665 7262 6f73 653a 0a20 2020 2020 2020  verbose:.       
+000175f0: 2070 7269 6e74 280a 2020 2020 2020 2020   print(.        
+00017600: 2020 2020 6622 426c 616e 6b20 7669 6465      f"Blank vide
+00017610: 6f20 636f 6d70 6c65 7465 2e20 5361 7665  o complete. Save
+00017620: 6420 6174 207b 7061 7468 7d2e 2045 6c61  d at {path}. Ela
+00017630: 7073 6564 2074 696d 653a 207b 7469 6d65  psed time: {time
+00017640: 722e 656c 6170 7365 645f 7469 6d65 5f73  r.elapsed_time_s
+00017650: 7472 7d73 2e22 0a20 2020 2020 2020 2029  tr}s.".        )
+00017660: 0a0a 0a64 6566 2068 6f72 697a 6f6e 7461  ...def horizonta
+00017670: 6c5f 7669 6465 6f5f 636f 6e63 6174 656e  l_video_concaten
+00017680: 6174 6f72 280a 2020 2020 7669 6465 6f5f  ator(.    video_
+00017690: 7061 7468 733a 204c 6973 745b 556e 696f  paths: List[Unio
+000176a0: 6e5b 7374 722c 206f 732e 5061 7468 4c69  n[str, os.PathLi
+000176b0: 6b65 5d5d 2c0a 2020 2020 7361 7665 5f70  ke]],.    save_p
+000176c0: 6174 683a 2055 6e69 6f6e 5b73 7472 2c20  ath: Union[str, 
+000176d0: 6f73 2e50 6174 684c 696b 655d 2c0a 2020  os.PathLike],.  
+000176e0: 2020 6865 6967 6874 5f70 783a 204f 7074    height_px: Opt
+000176f0: 696f 6e61 6c5b 556e 696f 6e5b 696e 742c  ional[Union[int,
+00017700: 2073 7472 5d5d 203d 204e 6f6e 652c 0a20   str]] = None,. 
+00017710: 2020 2068 6569 6768 745f 6964 783a 204f     height_idx: O
+00017720: 7074 696f 6e61 6c5b 556e 696f 6e5b 696e  ptional[Union[in
+00017730: 742c 2073 7472 5d5d 203d 204e 6f6e 652c  t, str]] = None,
+00017740: 0a20 2020 2067 7075 3a20 4f70 7469 6f6e  .    gpu: Option
+00017750: 616c 5b62 6f6f 6c5d 203d 2046 616c 7365  al[bool] = False
+00017760: 2c0a 2020 2020 7665 7262 6f73 653a 204f  ,.    verbose: O
+00017770: 7074 696f 6e61 6c5b 626f 6f6c 5d20 3d20  ptional[bool] = 
+00017780: 5472 7565 2c0a 2920 2d3e 204e 6f6e 653a  True,.) -> None:
+00017790: 0a20 2020 2022 2222 0a20 2020 2043 6f6e  .    """.    Con
+000177a0: 6361 7465 6e61 7465 7320 6d75 6c74 6970  catenates multip
+000177b0: 6c65 2076 6964 656f 7320 686f 7269 7a6f  le videos horizo
+000177c0: 6e74 616c 6c79 2e0a 0a20 2020 202e 2e20  ntally...    .. 
+000177d0: 696d 6167 653a 3a20 5f73 7461 7469 632f  image:: _static/
+000177e0: 696d 672f 686f 7269 7a6f 6e74 616c 5f76  img/horizontal_v
+000177f0: 6964 656f 5f63 6f6e 6361 7465 6e61 746f  ideo_concatenato
+00017800: 722e 6769 660a 2020 2020 2020 203a 7769  r.gif.       :wi
+00017810: 6474 683a 2036 3030 0a20 2020 2020 2020  dth: 600.       
+00017820: 3a61 6c69 676e 3a20 6365 6e74 6572 0a0a  :align: center..
+00017830: 2020 2020 3a70 6172 616d 204c 6973 745b      :param List[
+00017840: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
+00017850: 7468 4c69 6b65 5d5d 2076 6964 656f 5f70  thLike]] video_p
+00017860: 6174 6873 3a20 4c69 7374 206f 6620 696e  aths: List of in
+00017870: 7075 7420 7669 6465 6f20 6669 6c65 2070  put video file p
+00017880: 6174 6873 2e0a 2020 2020 3a70 6172 616d  aths..    :param
+00017890: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
+000178a0: 6174 684c 696b 655d 2073 6176 655f 7061  athLike] save_pa
+000178b0: 7468 3a20 4669 6c65 2070 6174 6820 746f  th: File path to
+000178c0: 2073 6176 6520 7468 6520 636f 6e63 6174   save the concat
+000178d0: 656e 6174 6564 2076 6964 656f 2e0a 2020  enated video..  
+000178e0: 2020 3a70 6172 616d 204f 7074 696f 6e61    :param Optiona
+000178f0: 6c5b 696e 745d 2068 6569 6768 745f 7078  l[int] height_px
+00017900: 3a20 4865 6967 6874 206f 6620 7468 6520  : Height of the 
+00017910: 6f75 7470 7574 2076 6964 656f 2069 6e20  output video in 
+00017920: 7069 7865 6c73 2e0a 2020 2020 3a70 6172  pixels..    :par
+00017930: 616d 204f 7074 696f 6e61 6c5b 696e 745d  am Optional[int]
+00017940: 2068 6569 6768 745f 6964 783a 2049 6e64   height_idx: Ind
+00017950: 6578 206f 6620 7468 6520 7669 6465 6f20  ex of the video 
+00017960: 746f 2075 7365 2066 6f72 2064 6574 6572  to use for deter
+00017970: 6d69 6e69 6e67 2048 6569 6768 742e 0a20  mining Height.. 
+00017980: 2020 203a 7061 7261 6d20 4f70 7469 6f6e     :param Option
+00017990: 616c 5b62 6f6f 6c5d 2067 7075 3a20 5768  al[bool] gpu: Wh
+000179a0: 6574 6865 7220 746f 2075 7365 2047 5055  ether to use GPU
+000179b0: 2d61 6363 656c 6572 6174 6564 2063 6f64  -accelerated cod
+000179c0: 6563 2028 6465 6661 756c 743a 2046 616c  ec (default: Fal
+000179d0: 7365 292e 0a20 2020 203a 7061 7261 6d20  se)..    :param 
+000179e0: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 2076  Optional[bool] v
+000179f0: 6572 626f 7365 3a57 6865 7468 6572 2074  erbose:Whether t
+00017a00: 6f20 7072 696e 7420 7072 6f67 7265 7373  o print progress
+00017a10: 206d 6573 7361 6765 7320 2864 6566 6175   messages (defau
+00017a20: 6c74 3a20 5472 7565 292e 0a0a 2020 2020  lt: True)...    
+00017a30: 3a65 7861 6d70 6c65 3a0a 2020 2020 3e3e  :example:.    >>
+00017a40: 3e20 7669 6465 6f5f 7061 7468 7320 3d20  > video_paths = 
+00017a50: 5b27 7669 6465 6f31 2e6d 7034 272c 2027  ['video1.mp4', '
+00017a60: 7669 6465 6f32 2e6d 7034 275d 0a20 2020  video2.mp4'].   
+00017a70: 203e 3e3e 2078 203d 2068 6f72 697a 6f6e   >>> x = horizon
+00017a80: 7461 6c5f 7669 6465 6f5f 636f 6e63 6174  tal_video_concat
+00017a90: 656e 6174 6f72 2876 6964 656f 5f70 6174  enator(video_pat
+00017aa0: 6873 3d76 6964 656f 5f70 6174 6873 2c20  hs=video_paths, 
+00017ab0: 6865 6967 6874 5f70 783d 3530 2c20 7361  height_px=50, sa
+00017ac0: 7665 5f70 6174 683d 272f 5573 6572 732f  ve_path='/Users/
+00017ad0: 7369 6d6f 6e2f 4465 736b 746f 702f 656e  simon/Desktop/en
+00017ae0: 7673 2f73 696d 6261 2f74 726f 7562 6c65  vs/simba/trouble
+00017af0: 7368 6f6f 7469 6e67 2f52 4154 5f4e 4f52  shooting/RAT_NOR
+00017b00: 2f70 726f 6a65 6374 5f66 6f6c 6465 722f  /project_folder/
+00017b10: 7669 6465 6f73 2f74 6573 742f 6e65 772f  videos/test/new/
+00017b20: 3038 3130 3230 3231 5f44 4f54 5f52 6174  08102021_DOT_Rat
+00017b30: 375f 3828 3229 5f2e 6d70 3427 2c20 6770  7_8(2)_.mp4', gp
+00017b40: 753d 4661 6c73 6529 0a20 2020 2022 2222  u=False).    """
+00017b50: 0a20 2020 2063 6865 636b 5f66 666d 7065  .    check_ffmpe
+00017b60: 675f 6176 6169 6c61 626c 6528 290a 2020  g_available().  
+00017b70: 2020 6966 2067 7075 2061 6e64 206e 6f74    if gpu and not
+00017b80: 2063 6865 636b 5f6e 7669 6465 615f 6770   check_nvidea_gp
+00017b90: 755f 6176 6169 6c61 626c 6528 293a 0a20  u_available():. 
+00017ba0: 2020 2020 2020 2072 6169 7365 2046 464d         raise FFM
+00017bb0: 5045 4743 6f64 6563 4750 5545 7272 6f72  PEGCodecGPUError
+00017bc0: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
+00017bd0: 673d 224e 5649 4445 4120 4750 5520 6e6f  g="NVIDEA GPU no
+00017be0: 7420 6176 6169 6c61 626c 6520 2861 7320  t available (as 
+00017bf0: 6576 616c 7561 7465 6420 6279 206e 7669  evaluated by nvi
+00017c00: 6465 612d 736d 6920 7265 7475 726e 696e  dea-smi returnin
+00017c10: 6720 4e6f 6e65 2922 2c0a 2020 2020 2020  g None)",.      
+00017c20: 2020 2020 2020 736f 7572 6365 3d68 6f72        source=hor
+00017c30: 697a 6f6e 7461 6c5f 7669 6465 6f5f 636f  izontal_video_co
+00017c40: 6e63 6174 656e 6174 6f72 2e5f 5f6e 616d  ncatenator.__nam
+00017c50: 655f 5f2c 0a20 2020 2020 2020 2029 0a20  e__,.        ). 
+00017c60: 2020 2074 696d 6572 203d 2053 696d 6261     timer = Simba
+00017c70: 5469 6d65 7228 7374 6172 743d 5472 7565  Timer(start=True
+00017c80: 290a 2020 2020 6368 6563 6b5f 7661 6c69  ).    check_vali
+00017c90: 645f 6c73 7428 0a20 2020 2020 2020 2064  d_lst(.        d
+00017ca0: 6174 613d 7669 6465 6f5f 7061 7468 732c  ata=video_paths,
+00017cb0: 2073 6f75 7263 653d 686f 7269 7a6f 6e74   source=horizont
+00017cc0: 616c 5f76 6964 656f 5f63 6f6e 6361 7465  al_video_concate
+00017cd0: 6e61 746f 722e 5f5f 6e61 6d65 5f5f 2c20  nator.__name__, 
+00017ce0: 6d69 6e5f 6c65 6e3d 320a 2020 2020 290a  min_len=2.    ).
+00017cf0: 2020 2020 6368 6563 6b5f 6966 5f64 6972      check_if_dir
+00017d00: 5f65 7869 7374 7328 0a20 2020 2020 2020  _exists(.       
+00017d10: 2069 6e5f 6469 723d 6f73 2e70 6174 682e   in_dir=os.path.
+00017d20: 6469 726e 616d 6528 7361 7665 5f70 6174  dirname(save_pat
+00017d30: 6829 2c20 736f 7572 6365 3d68 6f72 697a  h), source=horiz
+00017d40: 6f6e 7461 6c5f 7669 6465 6f5f 636f 6e63  ontal_video_conc
+00017d50: 6174 656e 6174 6f72 2e5f 5f6e 616d 655f  atenator.__name_
+00017d60: 5f0a 2020 2020 290a 2020 2020 7669 6465  _.    ).    vide
+00017d70: 6f5f 6d65 7461 5f64 6174 6120 3d20 5b0a  o_meta_data = [.
+00017d80: 2020 2020 2020 2020 6765 745f 7669 6465          get_vide
+00017d90: 6f5f 6d65 7461 5f64 6174 6128 7669 6465  o_meta_data(vide
+00017da0: 6f5f 7061 7468 3d76 6964 656f 5f70 6174  o_path=video_pat
+00017db0: 6829 2066 6f72 2076 6964 656f 5f70 6174  h) for video_pat
+00017dc0: 6820 696e 2076 6964 656f 5f70 6174 6873  h in video_paths
+00017dd0: 0a20 2020 205d 0a20 2020 2069 6620 2828  .    ].    if ((
+00017de0: 6865 6967 6874 5f70 7820 6973 204e 6f6e  height_px is Non
+00017df0: 6529 2061 6e64 2028 6865 6967 6874 5f69  e) and (height_i
+00017e00: 6478 2069 7320 4e6f 6e65 2929 206f 7220  dx is None)) or 
+00017e10: 280a 2020 2020 2020 2020 2868 6569 6768  (.        (heigh
+00017e20: 745f 7078 2069 7320 6e6f 7420 4e6f 6e65  t_px is not None
+00017e30: 2920 616e 6420 2868 6569 6768 745f 6964  ) and (height_id
+00017e40: 7820 6973 206e 6f74 204e 6f6e 6529 0a20  x is not None). 
+00017e50: 2020 2029 3a0a 2020 2020 2020 2020 7261     ):.        ra
+00017e60: 6973 6520 496e 7661 6c69 6449 6e70 7574  ise InvalidInput
+00017e70: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+00017e80: 2020 206d 7367 3d22 5072 6f76 6964 6520     msg="Provide 
+00017e90: 6120 6865 6967 6874 5f70 7820 4f52 2068  a height_px OR h
+00017ea0: 6569 6768 745f 6964 7822 2c0a 2020 2020  eight_idx",.    
+00017eb0: 2020 2020 2020 2020 736f 7572 6365 3d68          source=h
+00017ec0: 6f72 697a 6f6e 7461 6c5f 7669 6465 6f5f  orizontal_video_
+00017ed0: 636f 6e63 6174 656e 6174 6f72 2e5f 5f6e  concatenator.__n
+00017ee0: 616d 655f 5f2c 0a20 2020 2020 2020 2029  ame__,.        )
+00017ef0: 0a20 2020 2069 6620 6865 6967 6874 5f69  .    if height_i
+00017f00: 6478 2069 7320 6e6f 7420 4e6f 6e65 3a0a  dx is not None:.
+00017f10: 2020 2020 2020 2020 6368 6563 6b5f 696e          check_in
+00017f20: 7428 0a20 2020 2020 2020 2020 2020 206e  t(.            n
+00017f30: 616d 653d 6622 7b68 6f72 697a 6f6e 7461  ame=f"{horizonta
+00017f40: 6c5f 7669 6465 6f5f 636f 6e63 6174 656e  l_video_concaten
+00017f50: 6174 6f72 2e5f 5f6e 616d 655f 5f7d 2068  ator.__name__} h
+00017f60: 6569 6768 7422 2c0a 2020 2020 2020 2020  eight",.        
+00017f70: 2020 2020 7661 6c75 653d 6865 6967 6874      value=height
+00017f80: 5f69 6478 2c0a 2020 2020 2020 2020 2020  _idx,.          
+00017f90: 2020 6d69 6e5f 7661 6c75 653d 302c 0a20    min_value=0,. 
+00017fa0: 2020 2020 2020 2020 2020 206d 6178 5f76             max_v
+00017fb0: 616c 7565 3d6c 656e 2876 6964 656f 5f70  alue=len(video_p
+00017fc0: 6174 6873 2920 2d20 312c 0a20 2020 2020  aths) - 1,.     
+00017fd0: 2020 2029 0a20 2020 2020 2020 2068 6569     ).        hei
+00017fe0: 6768 7420 3d20 696e 7428 7669 6465 6f5f  ght = int(video_
+00017ff0: 6d65 7461 5f64 6174 615b 6865 6967 6874  meta_data[height
+00018000: 5f69 6478 5d5b 2268 6569 6768 7422 5d29  _idx]["height"])
+00018010: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+00018020: 2020 2063 6865 636b 5f69 6e74 280a 2020     check_int(.  
+00018030: 2020 2020 2020 2020 2020 6e61 6d65 3d66            name=f
+00018040: 227b 686f 7269 7a6f 6e74 616c 5f76 6964  "{horizontal_vid
+00018050: 656f 5f63 6f6e 6361 7465 6e61 746f 722e  eo_concatenator.
+00018060: 5f5f 6e61 6d65 5f5f 7d20 6865 6967 6874  __name__} height
+00018070: 222c 0a20 2020 2020 2020 2020 2020 2076  ",.            v
+00018080: 616c 7565 3d68 6569 6768 745f 7078 2c0a  alue=height_px,.
+00018090: 2020 2020 2020 2020 2020 2020 6d69 6e5f              min_
+000180a0: 7661 6c75 653d 312c 0a20 2020 2020 2020  value=1,.       
+000180b0: 2029 0a20 2020 2020 2020 2068 6569 6768   ).        heigh
+000180c0: 7420 3d20 696e 7428 6865 6967 6874 5f70  t = int(height_p
+000180d0: 7829 0a20 2020 2076 6964 656f 5f70 6174  x).    video_pat
+000180e0: 685f 7374 7220 3d20 2220 222e 6a6f 696e  h_str = " ".join
+000180f0: 285b 6627 2d69 2022 7b70 6174 687d 2227  ([f'-i "{path}"'
+00018100: 2066 6f72 2070 6174 6820 696e 2076 6964   for path in vid
+00018110: 656f 5f70 6174 6873 5d29 0a20 2020 2063  eo_paths]).    c
+00018120: 6f64 6563 203d 2022 6832 3634 5f6e 7665  odec = "h264_nve
+00018130: 6e63 2220 6966 2067 7075 2065 6c73 6520  nc" if gpu else 
+00018140: 226c 6962 7670 782d 7670 3922 0a20 2020  "libvpx-vp9".   
+00018150: 2066 696c 7465 725f 636f 6d70 6c65 7820   filter_complex 
+00018160: 3d20 223b 222e 6a6f 696e 280a 2020 2020  = ";".join(.    
+00018170: 2020 2020 5b66 225b 7b69 6478 7d3a 765d      [f"[{idx}:v]
+00018180: 7363 616c 653d 2d31 3a7b 6865 6967 6874  scale=-1:{height
+00018190: 7d5b 767b 6964 787d 5d22 2066 6f72 2069  }[v{idx}]" for i
+000181a0: 6478 2069 6e20 7261 6e67 6528 6c65 6e28  dx in range(len(
+000181b0: 7669 6465 6f5f 7061 7468 7329 295d 0a20  video_paths))]. 
+000181c0: 2020 2029 0a20 2020 2066 696c 7465 725f     ).    filter_
+000181d0: 636f 6d70 6c65 7820 2b3d 2066 223b 7b27  complex += f";{'
+000181e0: 272e 6a6f 696e 285b 6627 5b76 7b69 6478  '.join([f'[v{idx
+000181f0: 7d5d 2720 666f 7220 6964 7820 696e 2072  }]' for idx in r
+00018200: 616e 6765 286c 656e 2876 6964 656f 5f70  ange(len(video_p
+00018210: 6174 6873 2929 5d29 7d68 7374 6163 6b3d  aths))])}hstack=
+00018220: 696e 7075 7473 3d7b 6c65 6e28 7669 6465  inputs={len(vide
+00018230: 6f5f 7061 7468 7329 7d5b 765d 220a 2020  o_paths)}[v]".  
+00018240: 2020 6966 2076 6572 626f 7365 3a0a 2020    if verbose:.  
+00018250: 2020 2020 2020 7072 696e 7428 0a20 2020        print(.   
+00018260: 2020 2020 2020 2020 2066 2243 6f6e 6361           f"Conca
+00018270: 7465 6e61 7469 6e67 207b 6c65 6e28 7669  tenating {len(vi
+00018280: 6465 6f5f 7061 7468 7329 7d20 7669 6465  deo_paths)} vide
+00018290: 6f73 2068 6f72 697a 6f6e 7461 6c6c 7920  os horizontally 
+000182a0: 7769 7468 2061 207b 6865 6967 6874 7d20  with a {height} 
+000182b0: 7069 7865 6c20 6865 6967 6874 2e2e 2e20  pixel height... 
+000182c0: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
+000182d0: 636d 6420 3d20 6627 6666 6d70 6567 207b  cmd = f'ffmpeg {
+000182e0: 7669 6465 6f5f 7061 7468 5f73 7472 7d20  video_path_str} 
+000182f0: 2d66 696c 7465 725f 636f 6d70 6c65 7820  -filter_complex 
+00018300: 227b 6669 6c74 6572 5f63 6f6d 706c 6578  "{filter_complex
+00018310: 7d22 202d 6d61 7020 225b 765d 2220 2d63  }" -map "[v]" -c
+00018320: 3a76 207b 636f 6465 637d 202d 6c6f 676c  :v {codec} -logl
+00018330: 6576 656c 2065 7272 6f72 202d 7374 6174  evel error -stat
+00018340: 7320 227b 7361 7665 5f70 6174 687d 2220  s "{save_path}" 
+00018350: 2d79 270a 2020 2020 7375 6270 726f 6365  -y'.    subproce
+00018360: 7373 2e63 616c 6c28 636d 642c 2073 6865  ss.call(cmd, she
+00018370: 6c6c 3d54 7275 652c 2073 7464 6f75 743d  ll=True, stdout=
+00018380: 7375 6270 726f 6365 7373 2e50 4950 4529  subprocess.PIPE)
+00018390: 0a20 2020 2074 696d 6572 2e73 746f 705f  .    timer.stop_
+000183a0: 7469 6d65 7228 290a 2020 2020 6966 2076  timer().    if v
+000183b0: 6572 626f 7365 3a0a 2020 2020 2020 2020  erbose:.        
+000183c0: 7072 696e 7428 0a20 2020 2020 2020 2020  print(.         
+000183d0: 2020 2066 2248 6f72 697a 6f6e 7461 6c20     f"Horizontal 
+000183e0: 636f 6e63 6174 656e 6174 696f 6e20 636f  concatenation co
+000183f0: 6d70 6c65 7465 2c20 7361 7665 6420 6174  mplete, saved at
+00018400: 207b 7361 7665 5f70 6174 687d 2028 656c   {save_path} (el
+00018410: 6170 7365 6420 7469 6d65 3a20 7b74 696d  apsed time: {tim
+00018420: 6572 2e65 6c61 7073 6564 5f74 696d 655f  er.elapsed_time_
+00018430: 7374 727d 732e 2922 0a20 2020 2020 2020  str}s.)".       
+00018440: 2029 0a0a 0a64 6566 2076 6572 7469 6361   )...def vertica
+00018450: 6c5f 7669 6465 6f5f 636f 6e63 6174 656e  l_video_concaten
+00018460: 6174 6f72 280a 2020 2020 7669 6465 6f5f  ator(.    video_
+00018470: 7061 7468 733a 204c 6973 745b 556e 696f  paths: List[Unio
+00018480: 6e5b 7374 722c 206f 732e 5061 7468 4c69  n[str, os.PathLi
+00018490: 6b65 5d5d 2c0a 2020 2020 7361 7665 5f70  ke]],.    save_p
+000184a0: 6174 683a 2055 6e69 6f6e 5b73 7472 2c20  ath: Union[str, 
+000184b0: 6f73 2e50 6174 684c 696b 655d 2c0a 2020  os.PathLike],.  
+000184c0: 2020 7769 6474 685f 7078 3a20 4f70 7469    width_px: Opti
+000184d0: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+000184e0: 2c0a 2020 2020 7769 6474 685f 6964 783a  ,.    width_idx:
+000184f0: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00018500: 204e 6f6e 652c 0a20 2020 2067 7075 3a20   None,.    gpu: 
+00018510: 4f70 7469 6f6e 616c 5b62 6f6f 6c5d 203d  Optional[bool] =
+00018520: 2046 616c 7365 2c0a 2020 2020 7665 7262   False,.    verb
+00018530: 6f73 653a 204f 7074 696f 6e61 6c5b 626f  ose: Optional[bo
+00018540: 6f6c 5d20 3d20 5472 7565 2c0a 2920 2d3e  ol] = True,.) ->
+00018550: 204e 6f6e 653a 0a20 2020 2022 2222 0a20   None:.    """. 
+00018560: 2020 2043 6f6e 6361 7465 6e61 7465 7320     Concatenates 
+00018570: 6d75 6c74 6970 6c65 2076 6964 656f 7320  multiple videos 
+00018580: 7665 7274 6963 616c 6c79 2e0a 0a20 2020  vertically...   
+00018590: 202e 2e20 696d 6167 653a 3a20 5f73 7461   .. image:: _sta
+000185a0: 7469 632f 696d 672f 7665 7274 6963 616c  tic/img/vertical
+000185b0: 5f76 6964 656f 5f63 6f6e 6361 7465 6e61  _video_concatena
+000185c0: 746f 722e 706e 670a 2020 2020 2020 203a  tor.png.       :
+000185d0: 7769 6474 683a 2033 3030 0a20 2020 2020  width: 300.     
+000185e0: 2020 3a61 6c69 676e 3a20 6365 6e74 6572    :align: center
+000185f0: 0a0a 2020 2020 3a70 6172 616d 204c 6973  ..    :param Lis
+00018600: 745b 556e 696f 6e5b 7374 722c 206f 732e  t[Union[str, os.
+00018610: 5061 7468 4c69 6b65 5d5d 2076 6964 656f  PathLike]] video
+00018620: 5f70 6174 6873 3a20 4c69 7374 206f 6620  _paths: List of 
+00018630: 696e 7075 7420 7669 6465 6f20 6669 6c65  input video file
+00018640: 2070 6174 6873 2e0a 2020 2020 3a70 6172   paths..    :par
+00018650: 616d 2055 6e69 6f6e 5b73 7472 2c20 6f73  am Union[str, os
+00018660: 2e50 6174 684c 696b 655d 2073 6176 655f  .PathLike] save_
+00018670: 7061 7468 3a20 4669 6c65 2070 6174 6820  path: File path 
+00018680: 746f 2073 6176 6520 7468 6520 636f 6e63  to save the conc
+00018690: 6174 656e 6174 6564 2076 6964 656f 2e0a  atenated video..
+000186a0: 2020 2020 3a70 6172 616d 204f 7074 696f      :param Optio
+000186b0: 6e61 6c5b 696e 745d 2077 6964 7468 5f70  nal[int] width_p
+000186c0: 783a 2057 6964 7468 206f 6620 7468 6520  x: Width of the 
+000186d0: 6f75 7470 7574 2076 6964 656f 2069 6e20  output video in 
+000186e0: 7069 7865 6c73 2e0a 2020 2020 3a70 6172  pixels..    :par
+000186f0: 616d 204f 7074 696f 6e61 6c5b 696e 745d  am Optional[int]
+00018700: 2077 6964 7468 5f69 6478 3a20 496e 6465   width_idx: Inde
+00018710: 7820 6f66 2074 6865 2076 6964 656f 2074  x of the video t
+00018720: 6f20 7573 6520 666f 7220 6465 7465 726d  o use for determ
+00018730: 696e 696e 6720 7769 6474 682e 0a20 2020  ining width..   
+00018740: 203a 7061 7261 6d20 4f70 7469 6f6e 616c   :param Optional
+00018750: 5b62 6f6f 6c5d 2067 7075 3a20 5768 6574  [bool] gpu: Whet
+00018760: 6865 7220 746f 2075 7365 2047 5055 2d61  her to use GPU-a
+00018770: 6363 656c 6572 6174 6564 2063 6f64 6563  ccelerated codec
+00018780: 2028 6465 6661 756c 743a 2046 616c 7365   (default: False
+00018790: 292e 0a20 2020 203a 7061 7261 6d20 4f70  )..    :param Op
+000187a0: 7469 6f6e 616c 5b62 6f6f 6c5d 2076 6572  tional[bool] ver
+000187b0: 626f 7365 3a57 6865 7468 6572 2074 6f20  bose:Whether to 
+000187c0: 7072 696e 7420 7072 6f67 7265 7373 206d  print progress m
+000187d0: 6573 7361 6765 7320 2864 6566 6175 6c74  essages (default
+000187e0: 3a20 5472 7565 292e 0a20 2020 203a 7261  : True)..    :ra
+000187f0: 6973 6573 2046 464d 5045 4743 6f64 6563  ises FFMPEGCodec
+00018800: 4750 5545 7272 6f72 3a20 4966 2047 5055  GPUError: If GPU
+00018810: 2069 7320 7265 7175 6573 7465 6420 6275   is requested bu
+00018820: 7420 6e6f 7420 6176 6169 6c61 626c 652e  t not available.
+00018830: 0a20 2020 203a 7261 6973 6573 2049 6e76  .    :raises Inv
+00018840: 616c 6964 496e 7075 7445 7272 6f72 3a20  alidInputError: 
+00018850: 4966 2062 6f74 6820 6f72 206e 6569 7468  If both or neith
+00018860: 6572 2077 6964 7468 5f70 7820 616e 6420  er width_px and 
+00018870: 7769 6474 685f 6964 7820 6172 6520 7072  width_idx are pr
+00018880: 6f76 6964 6564 2e0a 0a20 2020 203a 6578  ovided...    :ex
+00018890: 616d 706c 653a 0a20 2020 203e 3e3e 2076  ample:.    >>> v
+000188a0: 6964 656f 5f70 6174 6873 203d 205b 272f  ideo_paths = ['/
+000188b0: 5573 6572 732f 7369 6d6f 6e2f 4465 736b  Users/simon/Desk
+000188c0: 746f 702f 656e 7673 2f73 696d 6261 2f74  top/envs/simba/t
+000188d0: 726f 7562 6c65 7368 6f6f 7469 6e67 2f52  roubleshooting/R
+000188e0: 4154 5f4e 4f52 2f70 726f 6a65 6374 5f66  AT_NOR/project_f
+000188f0: 6f6c 6465 722f 7669 6465 6f73 2f74 6573  older/videos/tes
+00018900: 742f 3038 3130 3230 3231 5f44 4f54 5f52  t/08102021_DOT_R
+00018910: 6174 375f 3828 3229 2e6d 7034 272c 0a20  at7_8(2).mp4',. 
+00018920: 2020 203e 3e3e 2020 2020 2020 2020 2020     >>>          
+00018930: 2020 2020 2020 272f 5573 6572 732f 7369        '/Users/si
+00018940: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
+00018950: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
+00018960: 6f6f 7469 6e67 2f52 4154 5f4e 4f52 2f70  ooting/RAT_NOR/p
+00018970: 726f 6a65 6374 5f66 6f6c 6465 722f 7669  roject_folder/vi
+00018980: 6465 6f73 2f74 6573 742f 3038 3130 3230  deos/test/081020
+00018990: 3231 5f44 4f54 5f52 6174 3131 5f31 322e  21_DOT_Rat11_12.
+000189a0: 6d70 3427 2c0a 2020 2020 3e3e 3e20 2020  mp4',.    >>>   
+000189b0: 2020 2020 2020 2020 2020 2020 2027 2f55               '/U
+000189c0: 7365 7273 2f73 696d 6f6e 2f44 6573 6b74  sers/simon/Deskt
+000189d0: 6f70 2f65 6e76 732f 7369 6d62 612f 7472  op/envs/simba/tr
+000189e0: 6f75 626c 6573 686f 6f74 696e 672f 5241  oubleshooting/RA
+000189f0: 545f 4e4f 522f 7072 6f6a 6563 745f 666f  T_NOR/project_fo
+00018a00: 6c64 6572 2f76 6964 656f 732f 7465 7374  lder/videos/test
+00018a10: 2f30 3831 3032 3032 315f 444f 545f 5261  /08102021_DOT_Ra
+00018a20: 7431 315f 3132 5f31 2e6d 7034 275d 0a20  t11_12_1.mp4']. 
+00018a30: 2020 203e 3e3e 205f 203d 2076 6572 7469     >>> _ = verti
+00018a40: 6361 6c5f 7669 6465 6f5f 636f 6e63 6174  cal_video_concat
+00018a50: 656e 6174 6f72 2876 6964 656f 5f70 6174  enator(video_pat
+00018a60: 6873 3d76 6964 656f 5f70 6174 6873 2c20  hs=video_paths, 
+00018a70: 7769 6474 685f 6964 783d 312c 2073 6176  width_idx=1, sav
+00018a80: 655f 7061 7468 3d27 2f55 7365 7273 2f73  e_path='/Users/s
+00018a90: 696d 6f6e 2f44 6573 6b74 6f70 2f65 6e76  imon/Desktop/env
+00018aa0: 732f 7369 6d62 612f 7472 6f75 626c 6573  s/simba/troubles
+00018ab0: 686f 6f74 696e 672f 5241 545f 4e4f 522f  hooting/RAT_NOR/
+00018ac0: 7072 6f6a 6563 745f 666f 6c64 6572 2f76  project_folder/v
+00018ad0: 6964 656f 732f 7465 7374 2f6e 6577 2f30  ideos/test/new/0
+00018ae0: 3831 3032 3032 315f 444f 545f 5261 7437  8102021_DOT_Rat7
+00018af0: 5f38 2832 295f 2e6d 7034 272c 2067 7075  _8(2)_.mp4', gpu
+00018b00: 3d46 616c 7365 290a 2020 2020 2222 220a  =False).    """.
+00018b10: 0a20 2020 2063 6865 636b 5f66 666d 7065  .    check_ffmpe
+00018b20: 675f 6176 6169 6c61 626c 6528 290a 2020  g_available().  
+00018b30: 2020 6966 2067 7075 2061 6e64 206e 6f74    if gpu and not
+00018b40: 2063 6865 636b 5f6e 7669 6465 615f 6770   check_nvidea_gp
+00018b50: 755f 6176 6169 6c61 626c 6528 293a 0a20  u_available():. 
+00018b60: 2020 2020 2020 2072 6169 7365 2046 464d         raise FFM
+00018b70: 5045 4743 6f64 6563 4750 5545 7272 6f72  PEGCodecGPUError
+00018b80: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
+00018b90: 673d 224e 5649 4449 4120 4750 5520 6e6f  g="NVIDIA GPU no
+00018ba0: 7420 6176 6169 6c61 626c 6522 2c20 736f  t available", so
+00018bb0: 7572 6365 3d76 6572 7469 6361 6c5f 7669  urce=vertical_vi
+00018bc0: 6465 6f5f 636f 6e63 6174 656e 6174 6f72  deo_concatenator
+00018bd0: 2e5f 5f6e 616d 655f 5f0a 2020 2020 2020  .__name__.      
+00018be0: 2020 290a 2020 2020 7669 6465 6f5f 6d65    ).    video_me
+00018bf0: 7461 5f64 6174 6120 3d20 5b0a 2020 2020  ta_data = [.    
+00018c00: 2020 2020 6765 745f 7669 6465 6f5f 6d65      get_video_me
+00018c10: 7461 5f64 6174 6128 7669 6465 6f5f 7061  ta_data(video_pa
+00018c20: 7468 3d76 6964 656f 5f70 6174 6829 2066  th=video_path) f
+00018c30: 6f72 2076 6964 656f 5f70 6174 6820 696e  or video_path in
+00018c40: 2076 6964 656f 5f70 6174 6873 0a20 2020   video_paths.   
+00018c50: 205d 0a20 2020 2074 696d 6572 203d 2053   ].    timer = S
+00018c60: 696d 6261 5469 6d65 7228 7374 6172 743d  imbaTimer(start=
+00018c70: 5472 7565 290a 2020 2020 6368 6563 6b5f  True).    check_
+00018c80: 7661 6c69 645f 6c73 7428 0a20 2020 2020  valid_lst(.     
+00018c90: 2020 2064 6174 613d 7669 6465 6f5f 7061     data=video_pa
+00018ca0: 7468 732c 2073 6f75 7263 653d 7665 7274  ths, source=vert
+00018cb0: 6963 616c 5f76 6964 656f 5f63 6f6e 6361  ical_video_conca
+00018cc0: 7465 6e61 746f 722e 5f5f 6e61 6d65 5f5f  tenator.__name__
+00018cd0: 2c20 6d69 6e5f 6c65 6e3d 320a 2020 2020  , min_len=2.    
+00018ce0: 290a 2020 2020 6368 6563 6b5f 6966 5f64  ).    check_if_d
+00018cf0: 6972 5f65 7869 7374 7328 0a20 2020 2020  ir_exists(.     
+00018d00: 2020 2069 6e5f 6469 723d 6f73 2e70 6174     in_dir=os.pat
+00018d10: 682e 6469 726e 616d 6528 7361 7665 5f70  h.dirname(save_p
+00018d20: 6174 6829 2c20 736f 7572 6365 3d76 6572  ath), source=ver
+00018d30: 7469 6361 6c5f 7669 6465 6f5f 636f 6e63  tical_video_conc
+00018d40: 6174 656e 6174 6f72 2e5f 5f6e 616d 655f  atenator.__name_
+00018d50: 5f0a 2020 2020 290a 2020 2020 6966 2028  _.    ).    if (
+00018d60: 2877 6964 7468 5f70 7820 6973 204e 6f6e  (width_px is Non
+00018d70: 6529 2061 6e64 2028 7769 6474 685f 6964  e) and (width_id
+00018d80: 7820 6973 204e 6f6e 6529 2920 6f72 2028  x is None)) or (
+00018d90: 0a20 2020 2020 2020 2028 7769 6474 685f  .        (width_
+00018da0: 7078 2069 7320 6e6f 7420 4e6f 6e65 2920  px is not None) 
+00018db0: 616e 6420 2877 6964 7468 5f69 6478 2069  and (width_idx i
+00018dc0: 7320 6e6f 7420 4e6f 6e65 290a 2020 2020  s not None).    
+00018dd0: 293a 0a20 2020 2020 2020 2072 6169 7365  ):.        raise
+00018de0: 2049 6e76 616c 6964 496e 7075 7445 7272   InvalidInputErr
+00018df0: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
+00018e00: 6d73 673d 2250 726f 7669 6465 2061 2077  msg="Provide a w
+00018e10: 6964 7468 5f70 7820 4f52 2077 6964 7468  idth_px OR width
+00018e20: 5f69 6478 222c 0a20 2020 2020 2020 2020  _idx",.         
+00018e30: 2020 2073 6f75 7263 653d 7665 7274 6963     source=vertic
+00018e40: 616c 5f76 6964 656f 5f63 6f6e 6361 7465  al_video_concate
+00018e50: 6e61 746f 722e 5f5f 6e61 6d65 5f5f 2c0a  nator.__name__,.
+00018e60: 2020 2020 2020 2020 290a 2020 2020 6966          ).    if
+00018e70: 2077 6964 7468 5f69 6478 2069 7320 6e6f   width_idx is no
+00018e80: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00018e90: 6368 6563 6b5f 696e 7428 0a20 2020 2020  check_int(.     
+00018ea0: 2020 2020 2020 206e 616d 653d 6622 7b76         name=f"{v
+00018eb0: 6572 7469 6361 6c5f 7669 6465 6f5f 636f  ertical_video_co
+00018ec0: 6e63 6174 656e 6174 6f72 2e5f 5f6e 616d  ncatenator.__nam
+00018ed0: 655f 5f7d 2077 6964 7468 2069 6e64 6578  e__} width index
+00018ee0: 222c 0a20 2020 2020 2020 2020 2020 2076  ",.            v
+00018ef0: 616c 7565 3d77 6964 7468 5f69 6478 2c0a  alue=width_idx,.
+00018f00: 2020 2020 2020 2020 2020 2020 6d69 6e5f              min_
+00018f10: 7661 6c75 653d 302c 0a20 2020 2020 2020  value=0,.       
+00018f20: 2020 2020 206d 6178 5f76 616c 7565 3d6c       max_value=l
+00018f30: 656e 2876 6964 656f 5f70 6174 6873 2920  en(video_paths) 
+00018f40: 2d20 312c 0a20 2020 2020 2020 2029 0a20  - 1,.        ). 
+00018f50: 2020 2020 2020 2077 6964 7468 203d 2069         width = i
+00018f60: 6e74 2876 6964 656f 5f6d 6574 615f 6461  nt(video_meta_da
+00018f70: 7461 5b77 6964 7468 5f69 6478 5d5b 2277  ta[width_idx]["w
+00018f80: 6964 7468 225d 290a 2020 2020 656c 7365  idth"]).    else
+00018f90: 3a0a 2020 2020 2020 2020 6368 6563 6b5f  :.        check_
+00018fa0: 696e 7428 0a20 2020 2020 2020 2020 2020  int(.           
+00018fb0: 206e 616d 653d 6622 7b76 6572 7469 6361   name=f"{vertica
+00018fc0: 6c5f 7669 6465 6f5f 636f 6e63 6174 656e  l_video_concaten
+00018fd0: 6174 6f72 2e5f 5f6e 616d 655f 5f7d 2077  ator.__name__} w
+00018fe0: 6964 7468 222c 0a20 2020 2020 2020 2020  idth",.         
+00018ff0: 2020 2076 616c 7565 3d77 6964 7468 5f70     value=width_p
+00019000: 782c 0a20 2020 2020 2020 2020 2020 206d  x,.            m
+00019010: 696e 5f76 616c 7565 3d31 2c0a 2020 2020  in_value=1,.    
+00019020: 2020 2020 290a 2020 2020 2020 2020 7769      ).        wi
+00019030: 6474 6820 3d20 696e 7428 7769 6474 685f  dth = int(width_
+00019040: 7078 290a 2020 2020 7669 6465 6f5f 7061  px).    video_pa
+00019050: 7468 5f73 7472 203d 2022 2022 2e6a 6f69  th_str = " ".joi
+00019060: 6e28 5b66 272d 6920 227b 7061 7468 7d22  n([f'-i "{path}"
+00019070: 2720 666f 7220 7061 7468 2069 6e20 7669  ' for path in vi
+00019080: 6465 6f5f 7061 7468 735d 290a 2020 2020  deo_paths]).    
+00019090: 636f 6465 6320 3d20 2268 3236 345f 6e76  codec = "h264_nv
+000190a0: 656e 6322 2069 6620 6770 7520 656c 7365  enc" if gpu else
+000190b0: 2022 6c69 6276 7078 2d76 7039 220a 2020   "libvpx-vp9".  
+000190c0: 2020 6669 6c74 6572 5f63 6f6d 706c 6578    filter_complex
+000190d0: 203d 2022 3b22 2e6a 6f69 6e28 0a20 2020   = ";".join(.   
+000190e0: 2020 2020 205b 6622 5b7b 6964 787d 3a76       [f"[{idx}:v
+000190f0: 5d73 6361 6c65 3d7b 7769 6474 687d 3a2d  ]scale={width}:-
+00019100: 315b 767b 6964 787d 5d22 2066 6f72 2069  1[v{idx}]" for i
+00019110: 6478 2069 6e20 7261 6e67 6528 6c65 6e28  dx in range(len(
+00019120: 7669 6465 6f5f 7061 7468 7329 295d 0a20  video_paths))]. 
+00019130: 2020 2029 0a20 2020 2066 696c 7465 725f     ).    filter_
+00019140: 636f 6d70 6c65 7820 2b3d 2066 223b 7b27  complex += f";{'
+00019150: 272e 6a6f 696e 285b 6627 5b76 7b69 6478  '.join([f'[v{idx
+00019160: 7d5d 2720 666f 7220 6964 7820 696e 2072  }]' for idx in r
+00019170: 616e 6765 286c 656e 2876 6964 656f 5f70  ange(len(video_p
+00019180: 6174 6873 2929 5d29 7d22 0a20 2020 2066  aths))])}".    f
+00019190: 696c 7465 725f 636f 6d70 6c65 7820 2b3d  ilter_complex +=
+000191a0: 2066 2276 7374 6163 6b3d 696e 7075 7473   f"vstack=inputs
+000191b0: 3d7b 6c65 6e28 7669 6465 6f5f 7061 7468  ={len(video_path
+000191c0: 7329 7d5b 765d 220a 2020 2020 6966 2076  s)}[v]".    if v
+000191d0: 6572 626f 7365 3a0a 2020 2020 2020 2020  erbose:.        
+000191e0: 7072 696e 7428 0a20 2020 2020 2020 2020  print(.         
+000191f0: 2020 2066 2243 6f6e 6361 7465 6e61 7469     f"Concatenati
+00019200: 6e67 207b 6c65 6e28 7669 6465 6f5f 7061  ng {len(video_pa
+00019210: 7468 7329 7d20 7669 6465 6f73 2076 6572  ths)} videos ver
+00019220: 7469 6361 6c6c 7920 7769 7468 2061 207b  tically with a {
+00019230: 7769 6474 687d 2070 6978 656c 2077 6964  width} pixel wid
+00019240: 7468 2e2e 2e22 0a20 2020 2020 2020 2029  th...".        )
+00019250: 0a20 2020 2063 6d64 203d 2066 2766 666d  .    cmd = f'ffm
+00019260: 7065 6720 7b76 6964 656f 5f70 6174 685f  peg {video_path_
+00019270: 7374 727d 202d 6669 6c74 6572 5f63 6f6d  str} -filter_com
+00019280: 706c 6578 2022 7b66 696c 7465 725f 636f  plex "{filter_co
+00019290: 6d70 6c65 787d 2220 2d6d 6170 2022 5b76  mplex}" -map "[v
+000192a0: 5d22 202d 633a 7620 7b63 6f64 6563 7d20  ]" -c:v {codec} 
+000192b0: 2d6c 6f67 6c65 7665 6c20 6572 726f 7220  -loglevel error 
+000192c0: 2d73 7461 7473 2022 7b73 6176 655f 7061  -stats "{save_pa
+000192d0: 7468 7d22 202d 7927 0a20 2020 2073 7562  th}" -y'.    sub
+000192e0: 7072 6f63 6573 732e 6361 6c6c 2863 6d64  process.call(cmd
+000192f0: 2c20 7368 656c 6c3d 5472 7565 2c20 7374  , shell=True, st
+00019300: 646f 7574 3d73 7562 7072 6f63 6573 732e  dout=subprocess.
+00019310: 5049 5045 290a 2020 2020 7469 6d65 722e  PIPE).    timer.
+00019320: 7374 6f70 5f74 696d 6572 2829 0a20 2020  stop_timer().   
+00019330: 2069 6620 7665 7262 6f73 653a 0a20 2020   if verbose:.   
+00019340: 2020 2020 2070 7269 6e74 280a 2020 2020       print(.    
+00019350: 2020 2020 2020 2020 6622 5665 7274 6963          f"Vertic
+00019360: 616c 2063 6f6e 6361 7465 6e61 7469 6f6e  al concatenation
+00019370: 2063 6f6d 706c 6574 652e 2053 6176 6564   complete. Saved
+00019380: 2061 7420 7b73 6176 655f 7061 7468 7d20   at {save_path} 
+00019390: 2845 6c61 7073 6564 2074 696d 653a 207b  (Elapsed time: {
+000193a0: 7469 6d65 722e 656c 6170 7365 645f 7469  timer.elapsed_ti
+000193b0: 6d65 5f73 7472 7d73 2e29 220a 2020 2020  me_str}s.)".    
+000193c0: 2020 2020 290a 0a0a 6465 6620 6d6f 7361      )...def mosa
+000193d0: 6963 5f63 6f6e 6361 7465 6e61 746f 7228  ic_concatenator(
+000193e0: 0a20 2020 2076 6964 656f 5f70 6174 6873  .    video_paths
+000193f0: 3a20 4c69 7374 5b55 6e69 6f6e 5b73 7472  : List[Union[str
+00019400: 2c20 6f73 2e50 6174 684c 696b 655d 5d2c  , os.PathLike]],
+00019410: 0a20 2020 2073 6176 655f 7061 7468 3a20  .    save_path: 
+00019420: 556e 696f 6e5b 7374 722c 206f 732e 5061  Union[str, os.Pa
+00019430: 7468 4c69 6b65 5d2c 0a20 2020 2077 6964  thLike],.    wid
+00019440: 7468 5f69 6478 3a20 4f70 7469 6f6e 616c  th_idx: Optional
+00019450: 5b55 6e69 6f6e 5b69 6e74 2c20 7374 725d  [Union[int, str]
+00019460: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 7769  ] = None,.    wi
+00019470: 6474 685f 7078 3a20 4f70 7469 6f6e 616c  dth_px: Optional
+00019480: 5b55 6e69 6f6e 5b69 6e74 2c20 7374 725d  [Union[int, str]
+00019490: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 6865  ] = None,.    he
+000194a0: 6967 6874 5f69 6478 3a20 4f70 7469 6f6e  ight_idx: Option
+000194b0: 616c 5b55 6e69 6f6e 5b69 6e74 2c20 7374  al[Union[int, st
+000194c0: 725d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  r]] = None,.    
+000194d0: 6865 6967 6874 5f70 783a 204f 7074 696f  height_px: Optio
+000194e0: 6e61 6c5b 556e 696f 6e5b 696e 742c 2073  nal[Union[int, s
+000194f0: 7472 5d5d 203d 204e 6f6e 652c 0a20 2020  tr]] = None,.   
+00019500: 2067 7075 3a20 4f70 7469 6f6e 616c 5b62   gpu: Optional[b
+00019510: 6f6f 6c5d 203d 2046 616c 7365 2c0a 2020  ool] = False,.  
+00019520: 2020 7665 7262 6f73 653a 204f 7074 696f    verbose: Optio
+00019530: 6e61 6c5b 626f 6f6c 5d20 3d20 5472 7565  nal[bool] = True
+00019540: 2c0a 2020 2020 756e 6576 656e 5f66 696c  ,.    uneven_fil
+00019550: 6c5f 636f 6c6f 723a 204f 7074 696f 6e61  l_color: Optiona
+00019560: 6c5b 7374 725d 203d 2022 626c 6163 6b22  l[str] = "black"
+00019570: 2c0a 2920 2d3e 204e 6f6e 653a 0a20 2020  ,.) -> None:.   
+00019580: 2022 2222 0a20 2020 2043 6f6e 6361 7465   """.    Concate
+00019590: 6e61 7465 7320 6d75 6c74 6970 6c65 2076  nates multiple v
+000195a0: 6964 656f 7320 696e 746f 2061 206d 6f73  ideos into a mos
+000195b0: 6169 6320 6c61 796f 7574 2e0a 0a20 2020  aic layout...   
+000195c0: 202e 2e20 696d 6167 653a 3a20 5f73 7461   .. image:: _sta
+000195d0: 7469 632f 696d 672f 6d6f 7361 6963 5f63  tic/img/mosaic_c
+000195e0: 6f6e 6361 7465 6e61 746f 722e 706e 670a  oncatenator.png.
+000195f0: 2020 2020 2020 203a 7769 6474 683a 2036         :width: 6
+00019600: 3030 0a20 2020 2020 2020 3a61 6c69 676e  00.       :align
+00019610: 3a20 6365 6e74 6572 0a0a 2020 2020 2e2e  : center..    ..
+00019620: 206e 6f74 653a 3a0a 2020 2020 2020 2069   note::.       i
+00019630: 6620 616e 2075 6e65 7665 6e20 6e75 6d62  f an uneven numb
+00019640: 6572 206f 6620 7669 6465 6f73 2c20 7468  er of videos, th
+00019650: 6520 6c61 7374 2069 6e64 6578 2077 696c  e last index wil
+00019660: 6c20 6265 2066 696c 6c65 6420 6279 2060  l be filled by `
+00019670: 6075 6e65 7665 6e5f 6669 6c6c 5f63 6f6c  `uneven_fill_col
+00019680: 6f72 6060 2e0a 0a20 2020 203a 7061 7261  or``...    :para
+00019690: 6d20 4c69 7374 5b55 6e69 6f6e 5b73 7472  m List[Union[str
+000196a0: 2c20 6f73 2e50 6174 684c 696b 655d 5d20  , os.PathLike]] 
+000196b0: 7669 6465 6f5f 7061 7468 733a 204c 6973  video_paths: Lis
+000196c0: 7420 6f66 2069 6e70 7574 2076 6964 656f  t of input video
+000196d0: 2066 696c 6520 7061 7468 732e 0a20 2020   file paths..   
+000196e0: 203a 7061 7261 6d20 556e 696f 6e5b 7374   :param Union[st
+000196f0: 722c 206f 732e 5061 7468 4c69 6b65 5d20  r, os.PathLike] 
+00019700: 7361 7665 5f70 6174 683a 2046 696c 6520  save_path: File 
+00019710: 7061 7468 2074 6f20 7361 7665 2074 6865  path to save the
+00019720: 2063 6f6e 6361 7465 6e61 7465 6420 7669   concatenated vi
+00019730: 6465 6f2e 0a20 2020 203a 7061 7261 6d20  deo..    :param 
+00019740: 4f70 7469 6f6e 616c 5b69 6e74 5d20 7769  Optional[int] wi
+00019750: 6474 685f 7078 3a20 5769 6474 6820 6f66  dth_px: Width of
+00019760: 2074 6865 206f 7574 7075 7420 7669 6465   the output vide
+00019770: 6f20 696e 2070 6978 656c 732e 0a20 2020  o in pixels..   
+00019780: 203a 7061 7261 6d20 4f70 7469 6f6e 616c   :param Optional
+00019790: 5b69 6e74 5d20 7769 6474 685f 6964 783a  [int] width_idx:
+000197a0: 2049 6e64 6578 206f 6620 7468 6520 7669   Index of the vi
+000197b0: 6465 6f20 746f 2075 7365 2066 6f72 2064  deo to use for d
+000197c0: 6574 6572 6d69 6e69 6e67 2077 6964 7468  etermining width
+000197d0: 2e0a 2020 2020 3a70 6172 616d 204f 7074  ..    :param Opt
+000197e0: 696f 6e61 6c5b 696e 745d 2068 6569 6768  ional[int] heigh
+000197f0: 745f 7078 3a20 4865 6967 6874 206f 6620  t_px: Height of 
+00019800: 7468 6520 6f75 7470 7574 2076 6964 656f  the output video
+00019810: 2070 616e 656c 7320 696e 2070 6978 656c   panels in pixel
+00019820: 732e 0a20 2020 203a 7061 7261 6d20 4f70  s..    :param Op
+00019830: 7469 6f6e 616c 5b69 6e74 5d20 6865 6967  tional[int] heig
+00019840: 6874 5f69 6478 3a20 4865 6967 6874 206f  ht_idx: Height o
+00019850: 6620 7468 6520 7669 6465 6f20 746f 2075  f the video to u
+00019860: 7365 2066 6f72 2064 6574 6572 6d69 6e69  se for determini
+00019870: 6e67 2077 6964 7468 2e0a 2020 2020 3a70  ng width..    :p
+00019880: 6172 616d 204f 7074 696f 6e61 6c5b 626f  aram Optional[bo
+00019890: 6f6c 5d20 6770 753a 2057 6865 7468 6572  ol] gpu: Whether
+000198a0: 2074 6f20 7573 6520 4750 552d 6163 6365   to use GPU-acce
+000198b0: 6c65 7261 7465 6420 636f 6465 6320 2864  lerated codec (d
+000198c0: 6566 6175 6c74 3a20 4661 6c73 6529 2e0a  efault: False)..
+000198d0: 2020 2020 3a70 6172 616d 204f 7074 696f      :param Optio
+000198e0: 6e61 6c5b 626f 6f6c 5d20 7665 7262 6f73  nal[bool] verbos
+000198f0: 653a 2057 6865 7468 6572 2074 6f20 7072  e: Whether to pr
+00019900: 696e 7420 7072 6f67 7265 7373 206d 6573  int progress mes
+00019910: 7361 6765 7320 2864 6566 6175 6c74 3a20  sages (default: 
+00019920: 5472 7565 292e 0a0a 2020 2020 3a65 7861  True)...    :exa
+00019930: 6d70 6c65 3a0a 2020 2020 3e3e 3e20 7669  mple:.    >>> vi
+00019940: 6465 6f5f 7061 7468 7320 3d20 5b27 2f55  deo_paths = ['/U
+00019950: 7365 7273 2f73 696d 6f6e 2f44 6573 6b74  sers/simon/Deskt
+00019960: 6f70 2f65 6e76 732f 7369 6d62 612f 7472  op/envs/simba/tr
+00019970: 6f75 626c 6573 686f 6f74 696e 672f 5241  oubleshooting/RA
+00019980: 545f 4e4f 522f 7072 6f6a 6563 745f 666f  T_NOR/project_fo
+00019990: 6c64 6572 2f76 6964 656f 732f 7465 7374  lder/videos/test
+000199a0: 2f30 3831 3032 3032 315f 444f 545f 5261  /08102021_DOT_Ra
+000199b0: 7437 5f38 2832 292e 6d70 3427 2c20 272f  t7_8(2).mp4', '/
+000199c0: 5573 6572 732f 7369 6d6f 6e2f 4465 736b  Users/simon/Desk
+000199d0: 746f 702f 656e 7673 2f73 696d 6261 2f74  top/envs/simba/t
+000199e0: 726f 7562 6c65 7368 6f6f 7469 6e67 2f52  roubleshooting/R
+000199f0: 4154 5f4e 4f52 2f70 726f 6a65 6374 5f66  AT_NOR/project_f
+00019a00: 6f6c 6465 722f 7669 6465 6f73 2f74 6573  older/videos/tes
+00019a10: 742f 3038 3130 3230 3231 5f44 4f54 5f52  t/08102021_DOT_R
+00019a20: 6174 3131 5f31 322e 6d70 3427 2c20 272f  at11_12.mp4', '/
+00019a30: 5573 6572 732f 7369 6d6f 6e2f 4465 736b  Users/simon/Desk
+00019a40: 746f 702f 656e 7673 2f73 696d 6261 2f74  top/envs/simba/t
+00019a50: 726f 7562 6c65 7368 6f6f 7469 6e67 2f52  roubleshooting/R
+00019a60: 4154 5f4e 4f52 2f70 726f 6a65 6374 5f66  AT_NOR/project_f
+00019a70: 6f6c 6465 722f 7669 6465 6f73 2f74 6573  older/videos/tes
+00019a80: 742f 6e65 772f 3230 3232 2d30 362d 3231  t/new/2022-06-21
+00019a90: 5f4e 4f42 5f49 4f54 5f32 332e 6d70 3427  _NOB_IOT_23.mp4'
+00019aa0: 5d0a 2020 2020 3e3e 3e20 7361 7665 5f70  ].    >>> save_p
+00019ab0: 6174 6820 3d20 272f 5573 6572 732f 7369  ath = '/Users/si
+00019ac0: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
+00019ad0: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
+00019ae0: 6f6f 7469 6e67 2f52 4154 5f4e 4f52 2f70  ooting/RAT_NOR/p
+00019af0: 726f 6a65 6374 5f66 6f6c 6465 722f 7669  roject_folder/vi
+00019b00: 6465 6f73 2f74 6573 742f 6e65 772f 626c  deos/test/new/bl
+00019b10: 616e 6b5f 7465 7374 2e6d 7034 270a 2020  ank_test.mp4'.  
+00019b20: 2020 3e3e 3e20 6d6f 7361 6963 5f63 6f6e    >>> mosaic_con
+00019b30: 6361 7465 6e61 746f 7228 7669 6465 6f5f  catenator(video_
+00019b40: 7061 7468 733d 7669 6465 6f5f 7061 7468  paths=video_path
+00019b50: 732c 2073 6176 655f 7061 7468 3d73 6176  s, save_path=sav
+00019b60: 655f 7061 7468 2c20 7769 6474 685f 6964  e_path, width_id
+00019b70: 783d 312c 2068 6569 6768 745f 6964 783d  x=1, height_idx=
+00019b80: 312c 2067 7075 3d46 616c 7365 290a 2020  1, gpu=False).  
+00019b90: 2020 2222 220a 0a20 2020 2063 6865 636b    """..    check
+00019ba0: 5f66 666d 7065 675f 6176 6169 6c61 626c  _ffmpeg_availabl
+00019bb0: 6528 290a 2020 2020 6966 2067 7075 2061  e().    if gpu a
+00019bc0: 6e64 206e 6f74 2063 6865 636b 5f6e 7669  nd not check_nvi
+00019bd0: 6465 615f 6770 755f 6176 6169 6c61 626c  dea_gpu_availabl
+00019be0: 6528 293a 0a20 2020 2020 2020 2072 6169  e():.        rai
+00019bf0: 7365 2046 464d 5045 4743 6f64 6563 4750  se FFMPEGCodecGP
+00019c00: 5545 7272 6f72 280a 2020 2020 2020 2020  UError(.        
+00019c10: 2020 2020 6d73 673d 224e 5649 4449 4120      msg="NVIDIA 
+00019c20: 4750 5520 6e6f 7420 6176 6169 6c61 626c  GPU not availabl
+00019c30: 6522 2c20 736f 7572 6365 3d6d 6f73 6169  e", source=mosai
+00019c40: 635f 636f 6e63 6174 656e 6174 6f72 2e5f  c_concatenator._
+00019c50: 5f6e 616d 655f 5f0a 2020 2020 2020 2020  _name__.        
+00019c60: 290a 2020 2020 7469 6d65 7220 3d20 5369  ).    timer = Si
+00019c70: 6d62 6154 696d 6572 2873 7461 7274 3d54  mbaTimer(start=T
+00019c80: 7275 6529 0a20 2020 2064 7420 3d20 6461  rue).    dt = da
+00019c90: 7465 7469 6d65 2e6e 6f77 2829 2e73 7472  tetime.now().str
+00019ca0: 6674 696d 6528 2225 5925 6d25 6425 4825  ftime("%Y%m%d%H%
+00019cb0: 4d25 5322 290a 2020 2020 6368 6563 6b5f  M%S").    check_
+00019cc0: 7661 6c69 645f 6c73 7428 0a20 2020 2020  valid_lst(.     
+00019cd0: 2020 2064 6174 613d 7669 6465 6f5f 7061     data=video_pa
+00019ce0: 7468 732c 0a20 2020 2020 2020 2073 6f75  ths,.        sou
+00019cf0: 7263 653d 6622 7b6d 6f73 6169 635f 636f  rce=f"{mosaic_co
+00019d00: 6e63 6174 656e 6174 6f72 2e5f 5f6e 616d  ncatenator.__nam
+00019d10: 655f 5f7d 2076 6964 656f 5f70 6174 6873  e__} video_paths
+00019d20: 222c 0a20 2020 2020 2020 206d 696e 5f6c  ",.        min_l
+00019d30: 656e 3d33 2c0a 2020 2020 290a 2020 2020  en=3,.    ).    
+00019d40: 7669 6465 6f5f 6d65 7461 5f64 6174 6120  video_meta_data 
+00019d50: 3d20 5b0a 2020 2020 2020 2020 6765 745f  = [.        get_
+00019d60: 7669 6465 6f5f 6d65 7461 5f64 6174 6128  video_meta_data(
+00019d70: 7669 6465 6f5f 7061 7468 3d76 6964 656f  video_path=video
+00019d80: 5f70 6174 6829 2066 6f72 2076 6964 656f  _path) for video
+00019d90: 5f70 6174 6820 696e 2076 6964 656f 5f70  _path in video_p
+00019da0: 6174 6873 0a20 2020 205d 0a20 2020 206d  aths.    ].    m
+00019db0: 6178 5f76 6964 656f 5f6c 656e 6774 6820  ax_video_length 
+00019dc0: 3d20 6d61 7828 5b78 5b22 7669 6465 6f5f  = max([x["video_
+00019dd0: 6c65 6e67 7468 5f73 225d 2066 6f72 2078  length_s"] for x
+00019de0: 2069 6e20 7669 6465 6f5f 6d65 7461 5f64   in video_meta_d
+00019df0: 6174 615d 290a 2020 2020 6966 2028 2877  ata]).    if ((w
+00019e00: 6964 7468 5f70 7820 6973 204e 6f6e 6529  idth_px is None)
+00019e10: 2061 6e64 2028 7769 6474 685f 6964 7820   and (width_idx 
+00019e20: 6973 204e 6f6e 6529 2920 6f72 2028 0a20  is None)) or (. 
+00019e30: 2020 2020 2020 2028 7769 6474 685f 7078         (width_px
+00019e40: 2069 7320 6e6f 7420 4e6f 6e65 2920 616e   is not None) an
+00019e50: 6420 2877 6964 7468 5f69 6478 2069 7320  d (width_idx is 
+00019e60: 6e6f 7420 4e6f 6e65 290a 2020 2020 293a  not None).    ):
+00019e70: 0a20 2020 2020 2020 2072 6169 7365 2049  .        raise I
+00019e80: 6e76 616c 6964 496e 7075 7445 7272 6f72  nvalidInputError
+00019e90: 280a 2020 2020 2020 2020 2020 2020 6d73  (.            ms
+00019ea0: 673d 2250 726f 7669 6465 2061 2077 6964  g="Provide a wid
+00019eb0: 7468 5f70 7820 4f52 2077 6964 7468 5f69  th_px OR width_i
+00019ec0: 6478 222c 2073 6f75 7263 653d 6d6f 7361  dx", source=mosa
+00019ed0: 6963 5f63 6f6e 6361 7465 6e61 746f 722e  ic_concatenator.
+00019ee0: 5f5f 6e61 6d65 5f5f 0a20 2020 2020 2020  __name__.       
+00019ef0: 2029 0a20 2020 2069 6620 2828 6865 6967   ).    if ((heig
+00019f00: 6874 5f70 7820 6973 204e 6f6e 6529 2061  ht_px is None) a
+00019f10: 6e64 2028 6865 6967 6874 5f69 6478 2069  nd (height_idx i
+00019f20: 7320 4e6f 6e65 2929 206f 7220 280a 2020  s None)) or (.  
+00019f30: 2020 2020 2020 2868 6569 6768 745f 7078        (height_px
+00019f40: 2069 7320 6e6f 7420 4e6f 6e65 2920 616e   is not None) an
+00019f50: 6420 2868 6569 6768 745f 6964 7820 6973  d (height_idx is
+00019f60: 206e 6f74 204e 6f6e 6529 0a20 2020 2029   not None).    )
+00019f70: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+00019f80: 496e 7661 6c69 6449 6e70 7574 4572 726f  InvalidInputErro
+00019f90: 7228 0a20 2020 2020 2020 2020 2020 206d  r(.            m
+00019fa0: 7367 3d22 5072 6f76 6964 6520 6120 6865  sg="Provide a he
+00019fb0: 6967 6874 5f70 7820 4f52 2068 6569 6768  ight_px OR heigh
+00019fc0: 745f 6964 7822 2c20 736f 7572 6365 3d6d  t_idx", source=m
+00019fd0: 6f73 6169 635f 636f 6e63 6174 656e 6174  osaic_concatenat
+00019fe0: 6f72 2e5f 5f6e 616d 655f 5f0a 2020 2020  or.__name__.    
+00019ff0: 2020 2020 290a 2020 2020 6966 2077 6964      ).    if wid
+0001a000: 7468 5f69 6478 2069 7320 6e6f 7420 4e6f  th_idx is not No
+0001a010: 6e65 3a0a 2020 2020 2020 2020 6368 6563  ne:.        chec
+0001a020: 6b5f 696e 7428 0a20 2020 2020 2020 2020  k_int(.         
+0001a030: 2020 206e 616d 653d 6622 7b76 6572 7469     name=f"{verti
+0001a040: 6361 6c5f 7669 6465 6f5f 636f 6e63 6174  cal_video_concat
+0001a050: 656e 6174 6f72 2e5f 5f6e 616d 655f 5f7d  enator.__name__}
+0001a060: 2077 6964 7468 2069 6e64 6578 222c 0a20   width index",. 
+0001a070: 2020 2020 2020 2020 2020 2076 616c 7565             value
+0001a080: 3d77 6964 7468 5f69 6478 2c0a 2020 2020  =width_idx,.    
+0001a090: 2020 2020 2020 2020 6d69 6e5f 7661 6c75          min_valu
+0001a0a0: 653d 312c 0a20 2020 2020 2020 2020 2020  e=1,.           
+0001a0b0: 206d 6178 5f76 616c 7565 3d6c 656e 2876   max_value=len(v
+0001a0c0: 6964 656f 5f70 6174 6873 2920 2d20 312c  ideo_paths) - 1,
+0001a0d0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0001a0e0: 2020 2077 6964 7468 203d 2069 6e74 2876     width = int(v
+0001a0f0: 6964 656f 5f6d 6574 615f 6461 7461 5b77  ideo_meta_data[w
+0001a100: 6964 7468 5f69 6478 5d5b 2277 6964 7468  idth_idx]["width
+0001a110: 225d 290a 2020 2020 656c 7365 3a0a 2020  "]).    else:.  
+0001a120: 2020 2020 2020 7769 6474 6820 3d20 7769        width = wi
+0001a130: 6474 685f 7078 0a20 2020 2069 6620 6865  dth_px.    if he
+0001a140: 6967 6874 5f69 6478 2069 7320 6e6f 7420  ight_idx is not 
+0001a150: 4e6f 6e65 3a0a 2020 2020 2020 2020 6368  None:.        ch
+0001a160: 6563 6b5f 696e 7428 0a20 2020 2020 2020  eck_int(.       
+0001a170: 2020 2020 206e 616d 653d 6622 7b76 6572       name=f"{ver
+0001a180: 7469 6361 6c5f 7669 6465 6f5f 636f 6e63  tical_video_conc
+0001a190: 6174 656e 6174 6f72 2e5f 5f6e 616d 655f  atenator.__name_
+0001a1a0: 5f7d 2068 6569 6768 7420 696e 6465 7822  _} height index"
+0001a1b0: 2c0a 2020 2020 2020 2020 2020 2020 7661  ,.            va
+0001a1c0: 6c75 653d 7769 6474 685f 6964 782c 0a20  lue=width_idx,. 
+0001a1d0: 2020 2020 2020 2020 2020 206d 696e 5f76             min_v
+0001a1e0: 616c 7565 3d31 2c0a 2020 2020 2020 2020  alue=1,.        
+0001a1f0: 2020 2020 6d61 785f 7661 6c75 653d 6c65      max_value=le
+0001a200: 6e28 7669 6465 6f5f 7061 7468 7329 202d  n(video_paths) -
+0001a210: 2031 2c0a 2020 2020 2020 2020 290a 2020   1,.        ).  
+0001a220: 2020 2020 2020 6865 6967 6874 203d 2069        height = i
+0001a230: 6e74 2876 6964 656f 5f6d 6574 615f 6461  nt(video_meta_da
+0001a240: 7461 5b77 6964 7468 5f69 6478 5d5b 2268  ta[width_idx]["h
+0001a250: 6569 6768 7422 5d29 0a20 2020 2065 6c73  eight"]).    els
+0001a260: 653a 0a20 2020 2020 2020 2068 6569 6768  e:.        heigh
+0001a270: 7420 3d20 6865 6967 6874 5f70 780a 2020  t = height_px.  
+0001a280: 2020 6966 2076 6572 626f 7365 3a0a 2020    if verbose:.  
+0001a290: 2020 2020 2020 7072 696e 7428 6622 4372        print(f"Cr
+0001a2a0: 6561 7469 6e67 206d 6f73 6169 6320 7669  eating mosaic vi
+0001a2b0: 6465 6f20 2e2e 2e22 290a 2020 2020 7465  deo ...").    te
+0001a2c0: 6d70 5f64 6972 203d 206f 732e 7061 7468  mp_dir = os.path
+0001a2d0: 2e6a 6f69 6e28 6f73 2e70 6174 682e 6469  .join(os.path.di
+0001a2e0: 726e 616d 6528 7669 6465 6f5f 7061 7468  rname(video_path
+0001a2f0: 735b 305d 292c 2066 2274 656d 705f 7b64  s[0]), f"temp_{d
+0001a300: 747d 2229 0a20 2020 206f 732e 6d61 6b65  t}").    os.make
+0001a310: 6469 7273 2874 656d 705f 6469 7229 0a20  dirs(temp_dir). 
+0001a320: 2020 2069 6620 6e6f 7420 286c 656e 2876     if not (len(v
+0001a330: 6964 656f 5f70 6174 6873 2920 2520 3229  ideo_paths) % 2)
+0001a340: 203d 3d20 303a 0a20 2020 2020 2020 2062   == 0:.        b
+0001a350: 6c61 6e6b 5f70 6174 6820 3d20 6f73 2e70  lank_path = os.p
+0001a360: 6174 682e 6a6f 696e 2874 656d 705f 6469  ath.join(temp_di
+0001a370: 722c 2066 227b 6474 7d2e 6d70 3422 290a  r, f"{dt}.mp4").
+0001a380: 2020 2020 2020 2020 6372 6561 7465 5f62          create_b
+0001a390: 6c61 6e6b 5f76 6964 656f 280a 2020 2020  lank_video(.    
+0001a3a0: 2020 2020 2020 2020 7061 7468 3d62 6c61          path=bla
+0001a3b0: 6e6b 5f70 6174 682c 0a20 2020 2020 2020  nk_path,.       
+0001a3c0: 2020 2020 206c 656e 6774 683d 6d61 785f       length=max_
+0001a3d0: 7669 6465 6f5f 6c65 6e67 7468 2c0a 2020  video_length,.  
+0001a3e0: 2020 2020 2020 2020 2020 7769 6474 683d            width=
+0001a3f0: 7769 6474 682c 0a20 2020 2020 2020 2020  width,.         
+0001a400: 2020 2068 6569 6768 743d 6865 6967 6874     height=height
+0001a410: 2c0a 2020 2020 2020 2020 2020 2020 6770  ,.            gp
+0001a420: 753d 6770 752c 0a20 2020 2020 2020 2020  u=gpu,.         
+0001a430: 2020 2076 6572 626f 7365 3d76 6572 626f     verbose=verbo
+0001a440: 7365 2c0a 2020 2020 2020 2020 2020 2020  se,.            
+0001a450: 636f 6c6f 723d 756e 6576 656e 5f66 696c  color=uneven_fil
+0001a460: 6c5f 636f 6c6f 722c 0a20 2020 2020 2020  l_color,.       
+0001a470: 2029 0a20 2020 2020 2020 2076 6964 656f   ).        video
+0001a480: 5f70 6174 6873 2e61 7070 656e 6428 626c  _paths.append(bl
+0001a490: 616e 6b5f 7061 7468 290a 2020 2020 7570  ank_path).    up
+0001a4a0: 7065 725f 7669 6465 6f73 2c20 6c6f 7765  per_videos, lowe
+0001a4b0: 725f 7669 6465 6f73 203d 2028 0a20 2020  r_videos = (.   
+0001a4c0: 2020 2020 2076 6964 656f 5f70 6174 6873       video_paths
+0001a4d0: 5b3a 206c 656e 2876 6964 656f 5f70 6174  [: len(video_pat
+0001a4e0: 6873 2920 2f2f 2032 5d2c 0a20 2020 2020  hs) // 2],.     
+0001a4f0: 2020 2076 6964 656f 5f70 6174 6873 5b6c     video_paths[l
+0001a500: 656e 2876 6964 656f 5f70 6174 6873 2920  en(video_paths) 
+0001a510: 2f2f 2032 203a 5d2c 0a20 2020 2029 0a20  // 2 :],.    ). 
+0001a520: 2020 2069 6620 7665 7262 6f73 653a 0a20     if verbose:. 
+0001a530: 2020 2020 2020 2070 7269 6e74 2822 4372         print("Cr
+0001a540: 6561 7469 6e67 2075 7070 6572 206d 6f73  eating upper mos
+0001a550: 6169 632e 2e2e 2028 5374 6570 2031 2f33  aic... (Step 1/3
+0001a560: 2922 290a 2020 2020 6966 206c 656e 2875  )").    if len(u
+0001a570: 7070 6572 5f76 6964 656f 7329 203e 2031  pper_videos) > 1
+0001a580: 3a0a 2020 2020 2020 2020 7570 7065 725f  :.        upper_
+0001a590: 7061 7468 203d 206f 732e 7061 7468 2e6a  path = os.path.j
+0001a5a0: 6f69 6e28 7465 6d70 5f64 6972 2c20 2275  oin(temp_dir, "u
+0001a5b0: 7070 6572 2e6d 7034 2229 0a20 2020 2020  pper.mp4").     
+0001a5c0: 2020 2068 6f72 697a 6f6e 7461 6c5f 7669     horizontal_vi
+0001a5d0: 6465 6f5f 636f 6e63 6174 656e 6174 6f72  deo_concatenator
+0001a5e0: 280a 2020 2020 2020 2020 2020 2020 7669  (.            vi
+0001a5f0: 6465 6f5f 7061 7468 733d 7570 7065 725f  deo_paths=upper_
+0001a600: 7669 6465 6f73 2c0a 2020 2020 2020 2020  videos,.        
+0001a610: 2020 2020 7361 7665 5f70 6174 683d 7570      save_path=up
+0001a620: 7065 725f 7061 7468 2c0a 2020 2020 2020  per_path,.      
+0001a630: 2020 2020 2020 6770 753d 6770 752c 0a20        gpu=gpu,. 
+0001a640: 2020 2020 2020 2020 2020 2068 6569 6768             heigh
+0001a650: 745f 7078 3d68 6569 6768 742c 0a20 2020  t_px=height,.   
+0001a660: 2020 2020 2020 2020 2076 6572 626f 7365           verbose
+0001a670: 3d76 6572 626f 7365 2c0a 2020 2020 2020  =verbose,.      
+0001a680: 2020 290a 2020 2020 656c 7365 3a0a 2020    ).    else:.  
+0001a690: 2020 2020 2020 7570 7065 725f 7061 7468        upper_path
+0001a6a0: 203d 2075 7070 6572 5f76 6964 656f 735b   = upper_videos[
+0001a6b0: 305d 0a20 2020 2069 6620 7665 7262 6f73  0].    if verbos
+0001a6c0: 653a 0a20 2020 2020 2020 2070 7269 6e74  e:.        print
+0001a6d0: 2822 4372 6561 7469 6e67 206c 6f77 6572  ("Creating lower
+0001a6e0: 206d 6f73 6169 632e 2e2e 2028 5374 6570   mosaic... (Step
+0001a6f0: 2032 2f33 2922 290a 2020 2020 6966 206c   2/3)").    if l
+0001a700: 656e 286c 6f77 6572 5f76 6964 656f 7329  en(lower_videos)
+0001a710: 203e 2031 3a0a 2020 2020 2020 2020 6c6f   > 1:.        lo
+0001a720: 7765 725f 7061 7468 203d 206f 732e 7061  wer_path = os.pa
+0001a730: 7468 2e6a 6f69 6e28 7465 6d70 5f64 6972  th.join(temp_dir
+0001a740: 2c20 226c 6f77 6572 2e6d 7034 2229 0a20  , "lower.mp4"). 
+0001a750: 2020 2020 2020 2068 6f72 697a 6f6e 7461         horizonta
+0001a760: 6c5f 7669 6465 6f5f 636f 6e63 6174 656e  l_video_concaten
+0001a770: 6174 6f72 280a 2020 2020 2020 2020 2020  ator(.          
+0001a780: 2020 7669 6465 6f5f 7061 7468 733d 6c6f    video_paths=lo
+0001a790: 7765 725f 7669 6465 6f73 2c0a 2020 2020  wer_videos,.    
+0001a7a0: 2020 2020 2020 2020 7361 7665 5f70 6174          save_pat
+0001a7b0: 683d 6c6f 7765 725f 7061 7468 2c0a 2020  h=lower_path,.  
+0001a7c0: 2020 2020 2020 2020 2020 6770 753d 6770            gpu=gp
+0001a7d0: 752c 0a20 2020 2020 2020 2020 2020 2068  u,.            h
+0001a7e0: 6569 6768 745f 7078 3d68 6569 6768 742c  eight_px=height,
+0001a7f0: 0a20 2020 2020 2020 2020 2020 2076 6572  .            ver
+0001a800: 626f 7365 3d76 6572 626f 7365 2c0a 2020  bose=verbose,.  
+0001a810: 2020 2020 2020 290a 2020 2020 656c 7365        ).    else
+0001a820: 3a0a 2020 2020 2020 2020 6c6f 7765 725f  :.        lower_
+0001a830: 7061 7468 203d 206c 6f77 6572 5f76 6964  path = lower_vid
+0001a840: 656f 735b 305d 0a20 2020 2070 616e 656c  eos[0].    panel
+0001a850: 735f 6d65 7461 203d 205b 0a20 2020 2020  s_meta = [.     
+0001a860: 2020 2067 6574 5f76 6964 656f 5f6d 6574     get_video_met
+0001a870: 615f 6461 7461 2876 6964 656f 5f70 6174  a_data(video_pat
+0001a880: 683d 7669 6465 6f5f 7061 7468 290a 2020  h=video_path).  
+0001a890: 2020 2020 2020 666f 7220 7669 6465 6f5f        for video_
+0001a8a0: 7061 7468 2069 6e20 5b6c 6f77 6572 5f70  path in [lower_p
+0001a8b0: 6174 682c 2075 7070 6572 5f70 6174 685d  ath, upper_path]
+0001a8c0: 0a20 2020 205d 0a20 2020 2069 6620 7665  .    ].    if ve
+0001a8d0: 7262 6f73 653a 0a20 2020 2020 2020 2070  rbose:.        p
+0001a8e0: 7269 6e74 2822 4a6f 696e 696e 6720 7570  rint("Joining up
+0001a8f0: 7065 7220 616e 6420 6c6f 7765 7220 6d6f  per and lower mo
+0001a900: 7361 6963 2e2e 2e20 2853 7465 7020 322f  saic... (Step 2/
+0001a910: 3329 2229 0a20 2020 2076 6572 7469 6361  3)").    vertica
+0001a920: 6c5f 7669 6465 6f5f 636f 6e63 6174 656e  l_video_concaten
+0001a930: 6174 6f72 280a 2020 2020 2020 2020 7669  ator(.        vi
+0001a940: 6465 6f5f 7061 7468 733d 5b75 7070 6572  deo_paths=[upper
+0001a950: 5f70 6174 682c 206c 6f77 6572 5f70 6174  _path, lower_pat
+0001a960: 685d 2c0a 2020 2020 2020 2020 7361 7665  h],.        save
+0001a970: 5f70 6174 683d 7361 7665 5f70 6174 682c  _path=save_path,
+0001a980: 0a20 2020 2020 2020 2076 6572 626f 7365  .        verbose
+0001a990: 3d76 6572 626f 7365 2c0a 2020 2020 2020  =verbose,.      
+0001a9a0: 2020 6770 753d 6770 752c 0a20 2020 2020    gpu=gpu,.     
+0001a9b0: 2020 2077 6964 7468 5f70 783d 6d61 7828     width_px=max(
+0001a9c0: 5b78 5b22 7769 6474 6822 5d20 666f 7220  [x["width"] for 
+0001a9d0: 7820 696e 2070 616e 656c 735f 6d65 7461  x in panels_meta
+0001a9e0: 5d29 2c0a 2020 2020 290a 2020 2020 7469  ]),.    ).    ti
+0001a9f0: 6d65 722e 7374 6f70 5f74 696d 6572 2829  mer.stop_timer()
+0001aa00: 0a20 2020 2073 6875 7469 6c2e 726d 7472  .    shutil.rmtr
+0001aa10: 6565 2874 656d 705f 6469 7229 0a20 2020  ee(temp_dir).   
+0001aa20: 2069 6620 7665 7262 6f73 653a 0a20 2020   if verbose:.   
+0001aa30: 2020 2020 2070 7269 6e74 280a 2020 2020       print(.    
+0001aa40: 2020 2020 2020 2020 6622 4d6f 7361 6963          f"Mosaic
+0001aa50: 2063 6f6e 6361 7465 6e61 7469 6f6e 2063   concatenation c
+0001aa60: 6f6d 706c 6574 652e 2053 6176 6564 2061  omplete. Saved a
+0001aa70: 7420 7b73 6176 655f 7061 7468 7d20 2845  t {save_path} (E
+0001aa80: 6c61 7073 6564 2074 696d 653a 207b 7469  lapsed time: {ti
+0001aa90: 6d65 722e 656c 6170 7365 645f 7469 6d65  mer.elapsed_time
+0001aaa0: 5f73 7472 7d73 2e29 220a 2020 2020 2020  _str}s.)".      
+0001aab0: 2020 290a 0a0a 6465 6620 6d69 7865 645f    )...def mixed_
+0001aac0: 6d6f 7361 6963 5f63 6f6e 6361 7465 6e61  mosaic_concatena
+0001aad0: 746f 7228 0a20 2020 2076 6964 656f 5f70  tor(.    video_p
+0001aae0: 6174 6873 3a20 4c69 7374 5b55 6e69 6f6e  aths: List[Union
+0001aaf0: 5b73 7472 2c20 6f73 2e50 6174 684c 696b  [str, os.PathLik
+0001ab00: 655d 5d2c 0a20 2020 2073 6176 655f 7061  e]],.    save_pa
+0001ab10: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
+0001ab20: 732e 5061 7468 4c69 6b65 5d2c 0a20 2020  s.PathLike],.   
+0001ab30: 2067 7075 3a20 4f70 7469 6f6e 616c 5b62   gpu: Optional[b
+0001ab40: 6f6f 6c5d 203d 2046 616c 7365 2c0a 2020  ool] = False,.  
+0001ab50: 2020 7665 7262 6f73 653a 204f 7074 696f    verbose: Optio
+0001ab60: 6e61 6c5b 626f 6f6c 5d20 3d20 5472 7565  nal[bool] = True
+0001ab70: 2c0a 2020 2020 756e 6576 656e 5f66 696c  ,.    uneven_fil
+0001ab80: 6c5f 636f 6c6f 723a 204f 7074 696f 6e61  l_color: Optiona
+0001ab90: 6c5b 7374 725d 203d 2022 626c 6163 6b22  l[str] = "black"
+0001aba0: 2c0a 2920 2d3e 204e 6f6e 653a 0a20 2020  ,.) -> None:.   
+0001abb0: 2022 2222 0a20 2020 2043 7265 6174 6520   """.    Create 
+0001abc0: 6120 6d69 7865 6420 6d6f 7361 6963 2076  a mixed mosaic v
+0001abd0: 6964 656f 2062 7920 636f 6e63 6174 656e  ideo by concaten
+0001abe0: 6174 696e 6720 6d75 6c74 6970 6c65 2069  ating multiple i
+0001abf0: 6e70 7574 2076 6964 656f 7320 696e 2061  nput videos in a
+0001ac00: 206d 6f73 6169 6320 6c61 796f 7574 206f   mosaic layout o
+0001ac10: 6620 7661 7269 6f75 7320 7369 7a65 732e  f various sizes.
+0001ac20: 0a0a 2020 2020 2e2e 2069 6d61 6765 3a3a  ..    .. image::
+0001ac30: 205f 7374 6174 6963 2f69 6d67 2f6d 6978   _static/img/mix
+0001ac40: 6564 5f6d 6f73 6169 635f 636f 6e63 6174  ed_mosaic_concat
+0001ac50: 656e 6174 6f72 2e70 6e67 0a20 2020 2020  enator.png.     
+0001ac60: 2020 3a77 6964 7468 3a20 3630 300a 2020    :width: 600.  
+0001ac70: 2020 2020 203a 616c 6967 6e3a 2063 656e       :align: cen
+0001ac80: 7465 720a 0a20 2020 202e 2e20 6e6f 7465  ter..    .. note
+0001ac90: 3a3a 0a20 2020 2020 2020 5468 6520 7265  ::.       The re
+0001aca0: 736f 6c75 7469 6f6e 206f 6620 7468 6520  solution of the 
+0001acb0: 6f75 7470 7574 2076 6964 656f 2069 7320  output video is 
+0001acc0: 6465 7465 726d 696e 6564 2062 7920 7468  determined by th
+0001acd0: 6520 7265 736f 6c75 7469 6f6e 206f 6620  e resolution of 
+0001ace0: 7468 6520 7669 6465 6f20 7061 7468 2061  the video path a
+0001acf0: 7420 7468 6520 6669 7273 7420 696e 6465  t the first inde
+0001ad00: 782e 0a0a 2020 2020 2020 2049 6620 616e  x...       If an
+0001ad10: 2075 6e65 7665 6e20 6e75 6d62 6572 206f   uneven number o
+0001ad20: 6620 7269 6768 742d 7061 6e65 6c20 7669  f right-panel vi
+0001ad30: 6465 6f73 2028 2069 6620 6e6f 7420 286c  deos ( if not (l
+0001ad40: 656e 2876 6964 656f 5f70 6174 6873 292d  en(video_paths)-
+0001ad50: 3129 2025 2032 2920 3d3d 2030 292c 2074  1) % 2) == 0), t
+0001ad60: 6865 6e20 7468 6520 6c61 7374 2069 6e64  hen the last ind
+0001ad70: 6578 2077 696c 6c20 6265 2066 696c 6c65  ex will be fille
+0001ad80: 6420 6279 2060 6075 6e65 7665 6e5f 6669  d by ``uneven_fi
+0001ad90: 6c6c 5f63 6f6c 6f72 6060 2e0a 0a20 2020  ll_color``...   
+0001ada0: 203a 7061 7261 6d20 4c69 7374 5b55 6e69   :param List[Uni
+0001adb0: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
+0001adc0: 696b 655d 5d20 7669 6465 6f5f 7061 7468  ike]] video_path
+0001add0: 733a 204c 6973 7420 6f66 2069 6e70 7574  s: List of input
+0001ade0: 2076 6964 656f 2066 696c 6520 7061 7468   video file path
+0001adf0: 732e 0a20 2020 203a 7061 7261 6d20 556e  s..    :param Un
+0001ae00: 696f 6e5b 7374 722c 206f 732e 5061 7468  ion[str, os.Path
+0001ae10: 4c69 6b65 5d20 7361 7665 5f70 6174 683a  Like] save_path:
+0001ae20: 2046 696c 6520 7061 7468 2074 6f20 7361   File path to sa
+0001ae30: 7665 2074 6865 2063 6f6e 6361 7465 6e61  ve the concatena
+0001ae40: 7465 6420 7669 6465 6f2e 0a20 2020 203a  ted video..    :
+0001ae50: 7061 7261 6d20 4f70 7469 6f6e 616c 5b62  param Optional[b
+0001ae60: 6f6f 6c5d 2067 7075 3a20 5768 6574 6865  ool] gpu: Whethe
+0001ae70: 7220 746f 2075 7365 2047 5055 2d61 6363  r to use GPU-acc
+0001ae80: 656c 6572 6174 6564 2063 6f64 6563 2028  elerated codec (
+0001ae90: 6465 6661 756c 743a 2046 616c 7365 292e  default: False).
+0001aea0: 0a20 2020 203a 7061 7261 6d20 4f70 7469  .    :param Opti
+0001aeb0: 6f6e 616c 5b62 6f6f 6c5d 2076 6572 626f  onal[bool] verbo
+0001aec0: 7365 3a20 5768 6574 6865 7220 746f 2070  se: Whether to p
+0001aed0: 7269 6e74 2070 726f 6772 6573 7320 6d65  rint progress me
+0001aee0: 7373 6167 6573 2028 6465 6661 756c 743a  ssages (default:
+0001aef0: 2054 7275 6529 2e0a 0a20 2020 203a 6578   True)...    :ex
+0001af00: 616d 706c 653a 0a20 2020 203e 3e3e 2076  ample:.    >>> v
+0001af10: 6964 656f 5f70 6174 6873 203d 205b 2776  ideo_paths = ['v
+0001af20: 6964 656f 312e 6d70 3427 2c20 2776 6964  ideo1.mp4', 'vid
+0001af30: 656f 322e 6d70 3427 2c20 2776 6964 656f  eo2.mp4', 'video
+0001af40: 332e 6d70 3427 5d0a 2020 2020 3e3e 3e20  3.mp4'].    >>> 
+0001af50: 7361 7665 5f70 6174 6820 3d20 272f 5573  save_path = '/Us
+0001af60: 6572 732f 7369 6d6f 6e2f 4465 736b 746f  ers/simon/Deskto
+0001af70: 702f 656e 7673 2f73 696d 6261 2f74 726f  p/envs/simba/tro
+0001af80: 7562 6c65 7368 6f6f 7469 6e67 2f52 4154  ubleshooting/RAT
+0001af90: 5f4e 4f52 2f70 726f 6a65 6374 5f66 6f6c  _NOR/project_fol
+0001afa0: 6465 722f 7669 6465 6f73 2f74 6573 742f  der/videos/test/
+0001afb0: 6e65 772f 626c 616e 6b5f 7465 7374 2e6d  new/blank_test.m
+0001afc0: 7034 270a 2020 2020 3e3e 3e20 6d69 7865  p4'.    >>> mixe
+0001afd0: 645f 6d6f 7361 6963 5f63 6f6e 6361 7465  d_mosaic_concate
+0001afe0: 6e61 746f 7228 7669 6465 6f5f 7061 7468  nator(video_path
+0001aff0: 733d 7669 6465 6f5f 7061 7468 732c 2073  s=video_paths, s
+0001b000: 6176 655f 7061 7468 3d73 6176 655f 7061  ave_path=save_pa
+0001b010: 7468 2c20 6770 753d 4661 6c73 652c 2076  th, gpu=False, v
+0001b020: 6572 626f 7365 3d54 7275 6529 0a20 2020  erbose=True).   
+0001b030: 2022 2222 0a0a 2020 2020 6368 6563 6b5f   """..    check_
+0001b040: 6666 6d70 6567 5f61 7661 696c 6162 6c65  ffmpeg_available
+0001b050: 2829 0a20 2020 2069 6620 6770 7520 616e  ().    if gpu an
+0001b060: 6420 6e6f 7420 6368 6563 6b5f 6e76 6964  d not check_nvid
+0001b070: 6561 5f67 7075 5f61 7661 696c 6162 6c65  ea_gpu_available
+0001b080: 2829 3a0a 2020 2020 2020 2020 7261 6973  ():.        rais
+0001b090: 6520 4646 4d50 4547 436f 6465 6347 5055  e FFMPEGCodecGPU
+0001b0a0: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+0001b0b0: 2020 206d 7367 3d22 4e56 4944 4941 2047     msg="NVIDIA G
+0001b0c0: 5055 206e 6f74 2061 7661 696c 6162 6c65  PU not available
+0001b0d0: 222c 2073 6f75 7263 653d 6d69 7865 645f  ", source=mixed_
+0001b0e0: 6d6f 7361 6963 5f63 6f6e 6361 7465 6e61  mosaic_concatena
+0001b0f0: 746f 722e 5f5f 6e61 6d65 5f5f 0a20 2020  tor.__name__.   
+0001b100: 2020 2020 2029 0a20 2020 2074 696d 6572       ).    timer
+0001b110: 203d 2053 696d 6261 5469 6d65 7228 7374   = SimbaTimer(st
+0001b120: 6172 743d 5472 7565 290a 2020 2020 6368  art=True).    ch
+0001b130: 6563 6b5f 7661 6c69 645f 6c73 7428 0a20  eck_valid_lst(. 
+0001b140: 2020 2020 2020 2064 6174 613d 7669 6465         data=vide
+0001b150: 6f5f 7061 7468 732c 2073 6f75 7263 653d  o_paths, source=
+0001b160: 6d69 7865 645f 6d6f 7361 6963 5f63 6f6e  mixed_mosaic_con
+0001b170: 6361 7465 6e61 746f 722e 5f5f 6e61 6d65  catenator.__name
+0001b180: 5f5f 2c20 6d69 6e5f 6c65 6e3d 320a 2020  __, min_len=2.  
+0001b190: 2020 290a 2020 2020 6474 203d 2064 6174    ).    dt = dat
+0001b1a0: 6574 696d 652e 6e6f 7728 292e 7374 7266  etime.now().strf
+0001b1b0: 7469 6d65 2822 2559 256d 2564 2548 254d  time("%Y%m%d%H%M
+0001b1c0: 2553 2229 0a20 2020 2076 6964 656f 5f6d  %S").    video_m
+0001b1d0: 6574 615f 6461 7461 203d 205b 0a20 2020  eta_data = [.   
+0001b1e0: 2020 2020 2067 6574 5f76 6964 656f 5f6d       get_video_m
+0001b1f0: 6574 615f 6461 7461 2876 6964 656f 5f70  eta_data(video_p
+0001b200: 6174 683d 7669 6465 6f5f 7061 7468 2920  ath=video_path) 
+0001b210: 666f 7220 7669 6465 6f5f 7061 7468 2069  for video_path i
+0001b220: 6e20 7669 6465 6f5f 7061 7468 730a 2020  n video_paths.  
+0001b230: 2020 5d0a 2020 2020 6d61 785f 7669 6465    ].    max_vide
+0001b240: 6f5f 6c65 6e67 7468 203d 206d 6178 285b  o_length = max([
+0001b250: 785b 2276 6964 656f 5f6c 656e 6774 685f  x["video_length_
+0001b260: 7322 5d20 666f 7220 7820 696e 2076 6964  s"] for x in vid
+0001b270: 656f 5f6d 6574 615f 6461 7461 5d29 0a20  eo_meta_data]). 
+0001b280: 2020 2063 6865 636b 5f69 665f 6469 725f     check_if_dir_
+0001b290: 6578 6973 7473 280a 2020 2020 2020 2020  exists(.        
+0001b2a0: 696e 5f64 6972 3d6f 732e 7061 7468 2e64  in_dir=os.path.d
+0001b2b0: 6972 6e61 6d65 2873 6176 655f 7061 7468  irname(save_path
+0001b2c0: 292c 2073 6f75 7263 653d 6d69 7865 645f  ), source=mixed_
+0001b2d0: 6d6f 7361 6963 5f63 6f6e 6361 7465 6e61  mosaic_concatena
+0001b2e0: 746f 722e 5f5f 6e61 6d65 5f5f 0a20 2020  tor.__name__.   
+0001b2f0: 2029 0a20 2020 206c 6172 6765 5f6d 6f73   ).    large_mos
+0001b300: 6169 635f 7061 7468 2c20 7669 6465 6f5f  aic_path, video_
+0001b310: 7061 7468 7320 3d20 7669 6465 6f5f 7061  paths = video_pa
+0001b320: 7468 735b 305d 2c20 7669 6465 6f5f 7061  ths[0], video_pa
+0001b330: 7468 735b 313a 5d0a 2020 2020 6d6f 7361  ths[1:].    mosa
+0001b340: 6963 5f68 6569 6768 7420 3d20 696e 7428  ic_height = int(
+0001b350: 7669 6465 6f5f 6d65 7461 5f64 6174 615b  video_meta_data[
+0001b360: 305d 5b22 6865 6967 6874 225d 202f 2032  0]["height"] / 2
+0001b370: 290a 2020 2020 6966 2076 6572 626f 7365  ).    if verbose
+0001b380: 3a0a 2020 2020 2020 2020 7072 696e 7428  :.        print(
+0001b390: 2243 7265 6174 696e 6720 6d69 7865 6420  "Creating mixed 
+0001b3a0: 6d6f 7361 6963 2076 6964 656f 2e2e 2e20  mosaic video... 
+0001b3b0: 2229 0a20 2020 2074 656d 705f 6469 7220  ").    temp_dir 
+0001b3c0: 3d20 6f73 2e70 6174 682e 6a6f 696e 286f  = os.path.join(o
+0001b3d0: 732e 7061 7468 2e64 6972 6e61 6d65 286c  s.path.dirname(l
+0001b3e0: 6172 6765 5f6d 6f73 6169 635f 7061 7468  arge_mosaic_path
+0001b3f0: 292c 2066 2274 656d 705f 7b64 747d 2229  ), f"temp_{dt}")
+0001b400: 0a20 2020 206f 732e 6d61 6b65 6469 7273  .    os.makedirs
+0001b410: 2874 656d 705f 6469 7229 0a20 2020 2069  (temp_dir).    i
+0001b420: 6620 6e6f 7420 286c 656e 2876 6964 656f  f not (len(video
+0001b430: 5f70 6174 6873 2920 2520 3229 203d 3d20  _paths) % 2) == 
+0001b440: 303a 0a20 2020 2020 2020 2062 6c61 6e6b  0:.        blank
+0001b450: 5f70 6174 6820 3d20 6f73 2e70 6174 682e  _path = os.path.
+0001b460: 6a6f 696e 2874 656d 705f 6469 722c 2066  join(temp_dir, f
+0001b470: 227b 6474 7d2e 6d70 3422 290a 2020 2020  "{dt}.mp4").    
+0001b480: 2020 2020 6372 6561 7465 5f62 6c61 6e6b      create_blank
+0001b490: 5f76 6964 656f 280a 2020 2020 2020 2020  _video(.        
+0001b4a0: 2020 2020 7061 7468 3d62 6c61 6e6b 5f70      path=blank_p
+0001b4b0: 6174 682c 0a20 2020 2020 2020 2020 2020  ath,.           
+0001b4c0: 206c 656e 6774 683d 6d61 785f 7669 6465   length=max_vide
+0001b4d0: 6f5f 6c65 6e67 7468 2c0a 2020 2020 2020  o_length,.      
+0001b4e0: 2020 2020 2020 7769 6474 683d 6765 745f        width=get_
+0001b4f0: 7669 6465 6f5f 6d65 7461 5f64 6174 6128  video_meta_data(
+0001b500: 7669 6465 6f5f 7061 7468 3d76 6964 656f  video_path=video
+0001b510: 5f70 6174 6873 5b2d 315d 295b 2277 6964  _paths[-1])["wid
+0001b520: 7468 225d 2c0a 2020 2020 2020 2020 2020  th"],.          
+0001b530: 2020 6865 6967 6874 3d67 6574 5f76 6964    height=get_vid
+0001b540: 656f 5f6d 6574 615f 6461 7461 2876 6964  eo_meta_data(vid
+0001b550: 656f 5f70 6174 683d 7669 6465 6f5f 7061  eo_path=video_pa
+0001b560: 7468 735b 2d31 5d29 5b22 6865 6967 6874  ths[-1])["height
+0001b570: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+0001b580: 6770 753d 6770 752c 0a20 2020 2020 2020  gpu=gpu,.       
+0001b590: 2020 2020 2076 6572 626f 7365 3d54 7275       verbose=Tru
+0001b5a0: 652c 0a20 2020 2020 2020 2020 2020 2063  e,.            c
+0001b5b0: 6f6c 6f72 3d75 6e65 7665 6e5f 6669 6c6c  olor=uneven_fill
+0001b5c0: 5f63 6f6c 6f72 2c0a 2020 2020 2020 2020  _color,.        
+0001b5d0: 290a 2020 2020 2020 2020 7669 6465 6f5f  ).        video_
+0001b5e0: 7061 7468 732e 6170 7065 6e64 2862 6c61  paths.append(bla
+0001b5f0: 6e6b 5f70 6174 6829 0a20 2020 2075 7070  nk_path).    upp
+0001b600: 6572 5f76 6964 656f 732c 206c 6f77 6572  er_videos, lower
+0001b610: 5f76 6964 656f 7320 3d20 280a 2020 2020  _videos = (.    
+0001b620: 2020 2020 7669 6465 6f5f 7061 7468 735b      video_paths[
+0001b630: 3a20 6c65 6e28 7669 6465 6f5f 7061 7468  : len(video_path
+0001b640: 7329 202f 2f20 325d 2c0a 2020 2020 2020  s) // 2],.      
+0001b650: 2020 7669 6465 6f5f 7061 7468 735b 6c65    video_paths[le
+0001b660: 6e28 7669 6465 6f5f 7061 7468 7329 202f  n(video_paths) /
+0001b670: 2f20 3220 3a5d 2c0a 2020 2020 290a 2020  / 2 :],.    ).  
+0001b680: 2020 6966 2076 6572 626f 7365 3a0a 2020    if verbose:.  
+0001b690: 2020 2020 2020 7072 696e 7428 2243 7265        print("Cre
+0001b6a0: 6174 696e 6720 7570 7065 7220 7269 6768  ating upper righ
+0001b6b0: 7420 6d6f 7361 6963 202e 2e2e 2028 5374  t mosaic ... (St
+0001b6c0: 6570 2031 2f34 2922 290a 2020 2020 6966  ep 1/4)").    if
+0001b6d0: 206c 656e 2875 7070 6572 5f76 6964 656f   len(upper_video
+0001b6e0: 7329 203e 2031 3a0a 2020 2020 2020 2020  s) > 1:.        
+0001b6f0: 7570 7065 725f 7061 7468 203d 206f 732e  upper_path = os.
+0001b700: 7061 7468 2e6a 6f69 6e28 7465 6d70 5f64  path.join(temp_d
+0001b710: 6972 2c20 2275 7070 6572 2e6d 7034 2229  ir, "upper.mp4")
+0001b720: 0a20 2020 2020 2020 2068 6f72 697a 6f6e  .        horizon
+0001b730: 7461 6c5f 7669 6465 6f5f 636f 6e63 6174  tal_video_concat
+0001b740: 656e 6174 6f72 280a 2020 2020 2020 2020  enator(.        
+0001b750: 2020 2020 7669 6465 6f5f 7061 7468 733d      video_paths=
+0001b760: 7570 7065 725f 7669 6465 6f73 2c0a 2020  upper_videos,.  
+0001b770: 2020 2020 2020 2020 2020 7361 7665 5f70            save_p
+0001b780: 6174 683d 7570 7065 725f 7061 7468 2c0a  ath=upper_path,.
+0001b790: 2020 2020 2020 2020 2020 2020 6770 753d              gpu=
+0001b7a0: 6770 752c 0a20 2020 2020 2020 2020 2020  gpu,.           
+0001b7b0: 2068 6569 6768 745f 7078 3d6d 6f73 6169   height_px=mosai
+0001b7c0: 635f 6865 6967 6874 2c0a 2020 2020 2020  c_height,.      
+0001b7d0: 2020 2020 2020 7665 7262 6f73 653d 7665        verbose=ve
+0001b7e0: 7262 6f73 652c 0a20 2020 2020 2020 2029  rbose,.        )
+0001b7f0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+0001b800: 2020 2075 7070 6572 5f70 6174 6820 3d20     upper_path = 
+0001b810: 7570 7065 725f 7669 6465 6f73 5b30 5d0a  upper_videos[0].
+0001b820: 2020 2020 6966 2076 6572 626f 7365 3a0a      if verbose:.
+0001b830: 2020 2020 2020 2020 7072 696e 7428 2243          print("C
+0001b840: 7265 6174 696e 6720 6c6f 7765 7220 7269  reating lower ri
+0001b850: 6768 7420 6d6f 7361 6963 202e 2e2e 2028  ght mosaic ... (
+0001b860: 5374 6570 2032 2f34 2922 290a 2020 2020  Step 2/4)").    
+0001b870: 6966 206c 656e 286c 6f77 6572 5f76 6964  if len(lower_vid
+0001b880: 656f 7329 203e 2031 3a0a 2020 2020 2020  eos) > 1:.      
+0001b890: 2020 6c6f 7765 725f 7061 7468 203d 206f    lower_path = o
+0001b8a0: 732e 7061 7468 2e6a 6f69 6e28 7465 6d70  s.path.join(temp
+0001b8b0: 5f64 6972 2c20 226c 6f77 6572 2e6d 7034  _dir, "lower.mp4
+0001b8c0: 2229 0a20 2020 2020 2020 2068 6f72 697a  ").        horiz
+0001b8d0: 6f6e 7461 6c5f 7669 6465 6f5f 636f 6e63  ontal_video_conc
+0001b8e0: 6174 656e 6174 6f72 280a 2020 2020 2020  atenator(.      
+0001b8f0: 2020 2020 2020 7669 6465 6f5f 7061 7468        video_path
+0001b900: 733d 6c6f 7765 725f 7669 6465 6f73 2c0a  s=lower_videos,.
+0001b910: 2020 2020 2020 2020 2020 2020 7361 7665              save
+0001b920: 5f70 6174 683d 6c6f 7765 725f 7061 7468  _path=lower_path
+0001b930: 2c0a 2020 2020 2020 2020 2020 2020 6770  ,.            gp
+0001b940: 753d 6770 752c 0a20 2020 2020 2020 2020  u=gpu,.         
+0001b950: 2020 2076 6572 626f 7365 3d76 6572 626f     verbose=verbo
+0001b960: 7365 2c0a 2020 2020 2020 2020 2020 2020  se,.            
+0001b970: 6865 6967 6874 5f70 783d 6d6f 7361 6963  height_px=mosaic
+0001b980: 5f68 6569 6768 742c 0a20 2020 2020 2020  _height,.       
+0001b990: 2029 0a20 2020 2065 6c73 653a 0a20 2020   ).    else:.   
+0001b9a0: 2020 2020 206c 6f77 6572 5f70 6174 6820       lower_path 
+0001b9b0: 3d20 6c6f 7765 725f 7669 6465 6f73 5b30  = lower_videos[0
+0001b9c0: 5d0a 2020 2020 7061 6e65 6c73 5f6d 6574  ].    panels_met
+0001b9d0: 6120 3d20 5b0a 2020 2020 2020 2020 6765  a = [.        ge
+0001b9e0: 745f 7669 6465 6f5f 6d65 7461 5f64 6174  t_video_meta_dat
+0001b9f0: 6128 7669 6465 6f5f 7061 7468 3d76 6964  a(video_path=vid
+0001ba00: 656f 5f70 6174 6829 0a20 2020 2020 2020  eo_path).       
+0001ba10: 2066 6f72 2076 6964 656f 5f70 6174 6820   for video_path 
+0001ba20: 696e 205b 6c6f 7765 725f 7061 7468 2c20  in [lower_path, 
+0001ba30: 7570 7065 725f 7061 7468 5d0a 2020 2020  upper_path].    
+0001ba40: 5d0a 2020 2020 6d6f 7361 6963 5f70 6174  ].    mosaic_pat
+0001ba50: 6820 3d20 6f73 2e70 6174 682e 6a6f 696e  h = os.path.join
+0001ba60: 2874 656d 705f 6469 722c 2022 6d6f 7361  (temp_dir, "mosa
+0001ba70: 6963 2e6d 7034 2229 0a20 2020 2069 6620  ic.mp4").    if 
+0001ba80: 7665 7262 6f73 653a 0a20 2020 2020 2020  verbose:.       
+0001ba90: 2070 7269 6e74 2822 4a6f 696e 696e 6720   print("Joining 
+0001baa0: 7570 7065 7220 616e 6420 6c6f 7765 7220  upper and lower 
+0001bab0: 7269 6768 7420 6d6f 7361 6963 2e2e 2e20  right mosaic... 
+0001bac0: 2853 7465 7020 332f 3429 2229 0a20 2020  (Step 3/4)").   
+0001bad0: 2076 6572 7469 6361 6c5f 7669 6465 6f5f   vertical_video_
+0001bae0: 636f 6e63 6174 656e 6174 6f72 280a 2020  concatenator(.  
+0001baf0: 2020 2020 2020 7669 6465 6f5f 7061 7468        video_path
+0001bb00: 733d 5b75 7070 6572 5f70 6174 682c 206c  s=[upper_path, l
+0001bb10: 6f77 6572 5f70 6174 685d 2c0a 2020 2020  ower_path],.    
+0001bb20: 2020 2020 7769 6474 685f 7078 3d6d 6178      width_px=max
+0001bb30: 285b 785b 2277 6964 7468 225d 2066 6f72  ([x["width"] for
+0001bb40: 2078 2069 6e20 7061 6e65 6c73 5f6d 6574   x in panels_met
+0001bb50: 615d 292c 0a20 2020 2020 2020 2073 6176  a]),.        sav
+0001bb60: 655f 7061 7468 3d6d 6f73 6169 635f 7061  e_path=mosaic_pa
+0001bb70: 7468 2c0a 2020 2020 2020 2020 6770 753d  th,.        gpu=
+0001bb80: 6770 752c 0a20 2020 2020 2020 2076 6572  gpu,.        ver
+0001bb90: 626f 7365 3d76 6572 626f 7365 2c0a 2020  bose=verbose,.  
+0001bba0: 2020 290a 2020 2020 6966 2076 6572 626f    ).    if verbo
+0001bbb0: 7365 3a0a 2020 2020 2020 2020 7072 696e  se:.        prin
+0001bbc0: 7428 224a 6f69 6e69 6e67 206c 6566 7420  t("Joining left 
+0001bbd0: 616e 6420 7269 6768 7420 6d6f 7361 6963  and right mosaic
+0001bbe0: 2e2e 2e20 2853 7465 7020 342f 3429 2229  ... (Step 4/4)")
+0001bbf0: 0a20 2020 2068 6f72 697a 6f6e 7461 6c5f  .    horizontal_
+0001bc00: 7669 6465 6f5f 636f 6e63 6174 656e 6174  video_concatenat
+0001bc10: 6f72 280a 2020 2020 2020 2020 7669 6465  or(.        vide
+0001bc20: 6f5f 7061 7468 733d 5b6c 6172 6765 5f6d  o_paths=[large_m
+0001bc30: 6f73 6169 635f 7061 7468 2c20 6d6f 7361  osaic_path, mosa
+0001bc40: 6963 5f70 6174 685d 2c0a 2020 2020 2020  ic_path],.      
+0001bc50: 2020 6865 6967 6874 5f69 6478 3d30 2c0a    height_idx=0,.
+0001bc60: 2020 2020 2020 2020 7361 7665 5f70 6174          save_pat
+0001bc70: 683d 7361 7665 5f70 6174 682c 0a20 2020  h=save_path,.   
+0001bc80: 2020 2020 2067 7075 3d67 7075 2c0a 2020       gpu=gpu,.  
+0001bc90: 2020 290a 2020 2020 7469 6d65 722e 7374    ).    timer.st
+0001bca0: 6f70 5f74 696d 6572 2829 0a20 2020 2073  op_timer().    s
+0001bcb0: 6875 7469 6c2e 726d 7472 6565 2874 656d  hutil.rmtree(tem
+0001bcc0: 705f 6469 7229 0a20 2020 2069 6620 7665  p_dir).    if ve
+0001bcd0: 7262 6f73 653a 0a20 2020 2020 2020 2070  rbose:.        p
+0001bce0: 7269 6e74 280a 2020 2020 2020 2020 2020  rint(.          
+0001bcf0: 2020 6622 4d69 7865 6420 6d6f 7361 6963    f"Mixed mosaic
+0001bd00: 2063 6f6e 6361 7465 6e61 7469 6f6e 2063   concatenation c
+0001bd10: 6f6d 706c 6574 652e 2053 6176 6564 2061  omplete. Saved a
+0001bd20: 7420 7b73 6176 655f 7061 7468 7d20 2845  t {save_path} (E
+0001bd30: 6c61 7073 6564 2074 696d 653a 207b 7469  lapsed time: {ti
+0001bd40: 6d65 722e 656c 6170 7365 645f 7469 6d65  mer.elapsed_time
+0001bd50: 5f73 7472 7d73 2e29 220a 2020 2020 2020  _str}s.)".      
+0001bd60: 2020 290a 0a0a 6465 6620 636c 6970 5f76    )...def clip_v
+0001bd70: 6964 656f 735f 6279 5f66 7261 6d65 5f69  ideos_by_frame_i
+0001bd80: 6473 280a 2020 2020 6669 6c65 5f70 6174  ds(.    file_pat
+0001bd90: 6873 3a20 4c69 7374 5b55 6e69 6f6e 5b73  hs: List[Union[s
+0001bda0: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
+0001bdb0: 5d2c 0a20 2020 2066 726d 5f69 6473 3a20  ],.    frm_ids: 
+0001bdc0: 4c69 7374 5b4c 6973 745b 696e 745d 5d2c  List[List[int]],
+0001bdd0: 0a20 2020 2073 6176 655f 6469 723a 204f  .    save_dir: O
+0001bde0: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
+0001bdf0: 722c 206f 732e 5061 7468 4c69 6b65 5d5d  r, os.PathLike]]
+0001be00: 203d 204e 6f6e 652c 0a29 3a0a 2020 2020   = None,.):.    
+0001be10: 2222 220a 2020 2020 436c 6970 2076 6964  """.    Clip vid
+0001be20: 656f 7320 7370 6563 6966 6965 6420 6279  eos specified by
+0001be30: 2066 7261 6d65 2049 4473 2028 6e75 6d62   frame IDs (numb
+0001be40: 6572 7329 2e0a 0a20 2020 203a 7061 7261  ers)...    :para
+0001be50: 6d20 4c69 7374 5b55 6e69 6f6e 5b73 7472  m List[Union[str
+0001be60: 2c20 6f73 2e50 6174 684c 696b 655d 5d20  , os.PathLike]] 
+0001be70: 6669 6c65 5f70 6174 6873 3a20 4c69 7374  file_paths: List
+0001be80: 206f 6620 7061 7468 7320 746f 2069 6e70   of paths to inp
+0001be90: 7574 2076 6964 656f 2066 696c 6573 2e0a  ut video files..
+0001bea0: 2020 2020 3a70 6172 616d 204c 6973 745b      :param List[
+0001beb0: 4c69 7374 5b69 6e74 5d5d 2066 726d 5f69  List[int]] frm_i
+0001bec0: 6473 3a20 4c69 7374 206f 6620 6c69 7374  ds: List of list
+0001bed0: 7320 636f 6e74 6169 6e69 6e67 2073 7461  s containing sta
+0001bee0: 7274 2061 6e64 2065 6e64 2066 7261 6d65  rt and end frame
+0001bef0: 2049 4473 2066 6f72 2065 6163 6820 7669   IDs for each vi
+0001bf00: 6465 6f2e 0a20 2020 203a 7061 7261 6d20  deo..    :param 
+0001bf10: 4f70 7469 6f6e 616c 5b55 6e69 6f6e 5b73  Optional[Union[s
+0001bf20: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
+0001bf30: 5d20 7361 7665 5f64 6972 3a20 2044 6972  ] save_dir:  Dir
+0001bf40: 6563 746f 7279 2074 6f20 7361 7665 2074  ectory to save t
+0001bf50: 6865 2063 6c69 7070 6564 2076 6964 656f  he clipped video
+0001bf60: 732e 2049 6620 4e6f 6e65 2c20 7669 6465  s. If None, vide
+0001bf70: 6f73 2077 696c 6c20 6265 2073 6176 6564  os will be saved
+0001bf80: 2069 6e20 7468 6520 7361 6d65 2064 6972   in the same dir
+0001bf90: 6563 746f 7279 2061 7320 7468 6520 696e  ectory as the in
+0001bfa0: 7075 7420 7669 6465 6f73 2077 6974 6820  put videos with 
+0001bfb0: 6672 616d 6520 6e75 6d62 6572 7320 6173  frame numbers as
+0001bfc0: 2073 7566 6669 782e 0a20 2020 203a 7265   suffix..    :re
+0001bfd0: 7475 726e 3a20 4e6f 6e65 2e0a 0a20 2020  turn: None...   
+0001bfe0: 203a 6578 616d 706c 653a 0a20 2020 203e   :example:.    >
+0001bff0: 3e3e 2066 696c 655f 7061 7468 7320 3d20  >> file_paths = 
+0001c000: 5b27 2f55 7365 7273 2f73 696d 6f6e 2f44  ['/Users/simon/D
+0001c010: 6573 6b74 6f70 2f65 6e76 732f 7369 6d62  esktop/envs/simb
+0001c020: 612f 7472 6f75 626c 6573 686f 6f74 696e  a/troubleshootin
+0001c030: 672f 6265 6570 626f 6f70 3137 342f 7072  g/beepboop174/pr
+0001c040: 6f6a 6563 745f 666f 6c64 6572 2f66 7261  oject_folder/fra
+0001c050: 6d65 732f 6f75 7470 7574 2f70 6174 685f  mes/output/path_
+0001c060: 706c 6f74 732f 5472 6961 6c20 2020 2031  plots/Trial    1
+0001c070: 302e 6d70 3427 2c20 272f 5573 6572 732f  0.mp4', '/Users/
+0001c080: 7369 6d6f 6e2f 4465 736b 746f 702f 656e  simon/Desktop/en
+0001c090: 7673 2f73 696d 6261 2f74 726f 7562 6c65  vs/simba/trouble
+0001c0a0: 7368 6f6f 7469 6e67 2f62 6565 7062 6f6f  shooting/beepboo
+0001c0b0: 7031 3734 2f70 726f 6a65 6374 5f66 6f6c  p174/project_fol
+0001c0c0: 6465 722f 6672 616d 6573 2f6f 7574 7075  der/frames/outpu
+0001c0d0: 742f 7061 7468 5f70 6c6f 7473 2f54 7269  t/path_plots/Tri
+0001c0e0: 616c 2020 2020 3130 5f31 2e6d 7034 275d  al    10_1.mp4']
+0001c0f0: 0a20 2020 203e 3e3e 2066 726d 5f69 6473  .    >>> frm_ids
+0001c100: 203d 205b 5b30 2c20 3230 5d2c 205b 3230   = [[0, 20], [20
+0001c110: 2c20 3430 5d5d 0a20 2020 203e 3e3e 2063  , 40]].    >>> c
+0001c120: 6c69 705f 7669 6465 6f73 5f62 795f 6672  lip_videos_by_fr
+0001c130: 616d 655f 6964 7328 6669 6c65 5f70 6174  ame_ids(file_pat
+0001c140: 6873 3d66 696c 655f 7061 7468 732c 2066  hs=file_paths, f
+0001c150: 726d 5f69 6473 3d66 726d 5f69 6473 2c20  rm_ids=frm_ids, 
+0001c160: 7361 7665 5f64 6972 3d27 2f55 7365 7273  save_dir='/Users
+0001c170: 2f73 696d 6f6e 2f44 6573 6b74 6f70 2f65  /simon/Desktop/e
+0001c180: 6e76 732f 7369 6d62 612f 7472 6f75 626c  nvs/simba/troubl
+0001c190: 6573 686f 6f74 696e 672f 6265 6570 626f  eshooting/beepbo
+0001c1a0: 6f70 3137 342f 7072 6f6a 6563 745f 666f  op174/project_fo
+0001c1b0: 6c64 6572 2f66 7261 6d65 732f 6f75 7470  lder/frames/outp
+0001c1c0: 7574 2f70 6174 685f 706c 6f74 732f 7472  ut/path_plots/tr
+0001c1d0: 6961 6c5f 636e 7427 290a 2020 2020 2222  ial_cnt').    ""
+0001c1e0: 220a 0a20 2020 2074 696d 6572 203d 2053  "..    timer = S
+0001c1f0: 696d 6261 5469 6d65 7228 7374 6172 743d  imbaTimer(start=
+0001c200: 5472 7565 290a 2020 2020 6368 6563 6b5f  True).    check_
+0001c210: 7661 6c69 645f 6c73 7428 0a20 2020 2020  valid_lst(.     
+0001c220: 2020 2064 6174 613d 6669 6c65 5f70 6174     data=file_pat
+0001c230: 6873 2c0a 2020 2020 2020 2020 736f 7572  hs,.        sour
+0001c240: 6365 3d63 6c69 705f 7669 6465 6f73 5f62  ce=clip_videos_b
+0001c250: 795f 6672 616d 655f 6964 732e 5f5f 6e61  y_frame_ids.__na
+0001c260: 6d65 5f5f 2c0a 2020 2020 2020 2020 7661  me__,.        va
+0001c270: 6c69 645f 6474 7970 6573 3d28 7374 722c  lid_dtypes=(str,
+0001c280: 292c 0a20 2020 2020 2020 206d 696e 5f6c  ),.        min_l
+0001c290: 656e 3d31 2c0a 2020 2020 290a 2020 2020  en=1,.    ).    
+0001c2a0: 6368 6563 6b5f 7661 6c69 645f 6c73 7428  check_valid_lst(
+0001c2b0: 0a20 2020 2020 2020 2064 6174 613d 6672  .        data=fr
+0001c2c0: 6d5f 6964 732c 0a20 2020 2020 2020 2073  m_ids,.        s
+0001c2d0: 6f75 7263 653d 636c 6970 5f76 6964 656f  ource=clip_video
+0001c2e0: 735f 6279 5f66 7261 6d65 5f69 6473 2e5f  s_by_frame_ids._
+0001c2f0: 5f6e 616d 655f 5f2c 0a20 2020 2020 2020  _name__,.       
+0001c300: 2076 616c 6964 5f64 7479 7065 733d 286c   valid_dtypes=(l
+0001c310: 6973 742c 292c 0a20 2020 2020 2020 2065  ist,),.        e
+0001c320: 7861 6374 5f6c 656e 3d6c 656e 2866 696c  xact_len=len(fil
+0001c330: 655f 7061 7468 7329 2c0a 2020 2020 290a  e_paths),.    ).
+0001c340: 2020 2020 666f 7220 636e 742c 2069 2069      for cnt, i i
+0001c350: 6e20 656e 756d 6572 6174 6528 6672 6d5f  n enumerate(frm_
+0001c360: 6964 7329 3a0a 2020 2020 2020 2020 6368  ids):.        ch
+0001c370: 6563 6b5f 7661 6c69 645f 6c73 7428 0a20  eck_valid_lst(. 
+0001c380: 2020 2020 2020 2020 2020 2064 6174 613d             data=
+0001c390: 692c 0a20 2020 2020 2020 2020 2020 2073  i,.            s
+0001c3a0: 6f75 7263 653d 6622 636c 6970 5f76 6964  ource=f"clip_vid
+0001c3b0: 656f 735f 6279 5f66 7261 6d65 5f63 6f75  eos_by_frame_cou
+0001c3c0: 6e74 2e5f 5f6e 616d 655f 2066 726d 5f69  nt.__name_ frm_i
+0001c3d0: 6473 207b 636e 747d 222c 0a20 2020 2020  ds {cnt}",.     
+0001c3e0: 2020 2020 2020 2076 616c 6964 5f64 7479         valid_dty
+0001c3f0: 7065 733d 2869 6e74 2c29 2c0a 2020 2020  pes=(int,),.    
+0001c400: 2020 2020 2020 2020 6578 6163 745f 6c65          exact_le
+0001c410: 6e3d 322c 0a20 2020 2020 2020 2029 0a20  n=2,.        ). 
+0001c420: 2020 2020 2020 2069 6620 695b 305d 203e         if i[0] >
+0001c430: 3d20 695b 315d 3a0a 2020 2020 2020 2020  = i[1]:.        
+0001c440: 2020 2020 7261 6973 6520 4672 616d 6552      raise FrameR
+0001c450: 616e 6765 4572 726f 7228 0a20 2020 2020  angeError(.     
+0001c460: 2020 2020 2020 2020 2020 206d 7367 3d66             msg=f
+0001c470: 2253 7461 7274 2066 7261 6d65 2066 6f72  "Start frame for
+0001c480: 2076 6964 656f 207b 697d 2069 7320 6166   video {i} is af
+0001c490: 7465 7220 6f72 2074 6865 2073 616d 6520  ter or the same 
+0001c4a0: 6173 2074 6865 2065 6e64 2066 7261 6d65  as the end frame
+0001c4b0: 2028 7b69 5b30 5d7d 2c20 7b69 5b31 5d7d   ({i[0]}, {i[1]}
+0001c4c0: 2922 2c0a 2020 2020 2020 2020 2020 2020  )",.            
+0001c4d0: 2020 2020 736f 7572 6365 3d63 6c69 705f      source=clip_
+0001c4e0: 7669 6465 6f73 5f62 795f 6672 616d 655f  videos_by_frame_
+0001c4f0: 6964 732e 5f5f 6e61 6d65 5f5f 2c0a 2020  ids.__name__,.  
+0001c500: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0001c510: 2020 2020 6966 2028 695b 305d 203c 2030      if (i[0] < 0
+0001c520: 2920 6f72 2028 695b 315d 203c 2031 293a  ) or (i[1] < 1):
+0001c530: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0001c540: 7365 2046 7261 6d65 5261 6e67 6545 7272  se FrameRangeErr
+0001c550: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
+0001c560: 2020 2020 6d73 673d 6622 5374 6172 7420      msg=f"Start 
+0001c570: 6672 616d 6520 6861 7320 746f 2062 6520  frame has to be 
+0001c580: 6174 206c 6561 7374 2030 2061 6e64 2065  at least 0 and e
+0001c590: 6e64 2066 7261 6d65 2068 6173 2074 6f20  nd frame has to 
+0001c5a0: 6265 2061 7420 6c65 6173 7420 3122 2c0a  be at least 1",.
+0001c5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c5c0: 736f 7572 6365 3d63 6c69 705f 7669 6465  source=clip_vide
+0001c5d0: 6f73 5f62 795f 6672 616d 655f 6964 732e  os_by_frame_ids.
+0001c5e0: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
+0001c5f0: 2020 2020 2020 290a 2020 2020 7669 6465        ).    vide
+0001c600: 6f5f 6d65 7461 5f64 6174 6120 3d20 5b67  o_meta_data = [g
+0001c610: 6574 5f76 6964 656f 5f6d 6574 615f 6461  et_video_meta_da
+0001c620: 7461 2876 6964 656f 5f70 6174 683d 7829  ta(video_path=x)
+0001c630: 2066 6f72 2078 2069 6e20 6669 6c65 5f70   for x in file_p
+0001c640: 6174 6873 5d0a 2020 2020 666f 7220 6920  aths].    for i 
+0001c650: 696e 2072 616e 6765 286c 656e 2876 6964  in range(len(vid
+0001c660: 656f 5f6d 6574 615f 6461 7461 2929 3a0a  eo_meta_data)):.
+0001c670: 2020 2020 2020 2020 6966 2028 6672 6d5f          if (frm_
+0001c680: 6964 735b 695d 5b30 5d20 3e20 7669 6465  ids[i][0] > vide
+0001c690: 6f5f 6d65 7461 5f64 6174 615b 695d 5b22  o_meta_data[i]["
+0001c6a0: 6672 616d 655f 636f 756e 7422 5d29 206f  frame_count"]) o
+0001c6b0: 7220 280a 2020 2020 2020 2020 2020 2020  r (.            
+0001c6c0: 6672 6d5f 6964 735b 695d 5b31 5d20 3e20  frm_ids[i][1] > 
+0001c6d0: 7669 6465 6f5f 6d65 7461 5f64 6174 615b  video_meta_data[
+0001c6e0: 695d 5b22 6672 616d 655f 636f 756e 7422  i]["frame_count"
+0001c6f0: 5d0a 2020 2020 2020 2020 293a 0a20 2020  ].        ):.   
+0001c700: 2020 2020 2020 2020 2072 6169 7365 2046           raise F
+0001c710: 7261 6d65 5261 6e67 6545 7272 6f72 280a  rameRangeError(.
+0001c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c730: 6d73 673d 6627 5669 6465 6f20 7b69 2b31  msg=f'Video {i+1
+0001c740: 7d20 6861 7320 7b76 6964 656f 5f6d 6574  } has {video_met
+0001c750: 615f 6461 7461 5b69 5d5b 2266 7261 6d65  a_data[i]["frame
+0001c760: 5f63 6f75 6e74 225d 7d20 6672 616d 6573  _count"]} frames
+0001c770: 2c20 6361 6e6e 6f74 2075 7365 2073 7461  , cannot use sta
+0001c780: 7274 2061 6e64 2065 6e64 2066 7261 6d65  rt and end frame
+0001c790: 207b 6672 6d5f 6964 735b 695d 7d27 2c0a   {frm_ids[i]}',.
+0001c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c7b0: 736f 7572 6365 3d63 6c69 705f 7669 6465  source=clip_vide
+0001c7c0: 6f73 5f62 795f 6672 616d 655f 6964 732e  os_by_frame_ids.
+0001c7d0: 5f5f 6e61 6d65 5f5f 2c0a 2020 2020 2020  __name__,.      
+0001c7e0: 2020 2020 2020 290a 2020 2020 6966 2073        ).    if s
+0001c7f0: 6176 655f 6469 7220 6973 206e 6f74 204e  ave_dir is not N
+0001c800: 6f6e 653a 0a20 2020 2020 2020 2063 6865  one:.        che
+0001c810: 636b 5f69 665f 6469 725f 6578 6973 7473  ck_if_dir_exists
+0001c820: 280a 2020 2020 2020 2020 2020 2020 696e  (.            in
+0001c830: 5f64 6972 3d73 6176 655f 6469 722c 0a20  _dir=save_dir,. 
+0001c840: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
+0001c850: 653d 636c 6970 5f76 6964 656f 735f 6279  e=clip_videos_by
+0001c860: 5f66 7261 6d65 5f69 6473 2e5f 5f6e 616d  _frame_ids.__nam
+0001c870: 655f 5f2c 0a20 2020 2020 2020 2020 2020  e__,.           
+0001c880: 2063 7265 6174 655f 6966 5f6e 6f74 5f65   create_if_not_e
+0001c890: 7869 7374 3d54 7275 652c 0a20 2020 2020  xist=True,.     
+0001c8a0: 2020 2029 0a20 2020 2066 6f72 2063 6e74     ).    for cnt
+0001c8b0: 2c20 6669 6c65 5f70 6174 6820 696e 2065  , file_path in e
+0001c8c0: 6e75 6d65 7261 7465 2866 696c 655f 7061  numerate(file_pa
+0001c8d0: 7468 7329 3a0a 2020 2020 2020 2020 7669  ths):.        vi
+0001c8e0: 6465 6f5f 7469 6d65 7220 3d20 5369 6d62  deo_timer = Simb
+0001c8f0: 6154 696d 6572 2873 7461 7274 3d54 7275  aTimer(start=Tru
+0001c900: 6529 0a20 2020 2020 2020 2064 6972 2c20  e).        dir, 
+0001c910: 7669 6465 6f5f 6e61 6d65 2c20 6578 7420  video_name, ext 
+0001c920: 3d20 6765 745f 666e 5f65 7874 2866 696c  = get_fn_ext(fil
+0001c930: 6570 6174 683d 6669 6c65 5f70 6174 6829  epath=file_path)
+0001c940: 0a20 2020 2020 2020 2073 5f66 2c20 655f  .        s_f, e_
+0001c950: 6620 3d20 6672 6d5f 6964 735b 636e 745d  f = frm_ids[cnt]
+0001c960: 5b30 5d2c 2066 726d 5f69 6473 5b63 6e74  [0], frm_ids[cnt
+0001c970: 5d5b 315d 0a20 2020 2020 2020 2070 7269  ][1].        pri
+0001c980: 6e74 2866 2254 7269 6d6d 696e 6720 7b76  nt(f"Trimming {v
+0001c990: 6964 656f 5f6e 616d 657d 2066 726f 6d20  ideo_name} from 
+0001c9a0: 6672 616d 6520 7b73 5f66 7d20 746f 2066  frame {s_f} to f
+0001c9b0: 7261 6d65 207b 655f 667d 2e2e 2e22 290a  rame {e_f}...").
+0001c9c0: 2020 2020 2020 2020 6966 2073 6176 655f          if save_
+0001c9d0: 6469 7220 6973 206e 6f74 204e 6f6e 653a  dir is not None:
+0001c9e0: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
+0001c9f0: 5f70 6174 6820 3d20 6f73 2e70 6174 682e  _path = os.path.
+0001ca00: 6a6f 696e 2873 6176 655f 6469 722c 206f  join(save_dir, o
+0001ca10: 732e 7061 7468 2e62 6173 656e 616d 6528  s.path.basename(
+0001ca20: 6669 6c65 5f70 6174 6829 290a 2020 2020  file_path)).    
+0001ca30: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001ca40: 2020 2020 2020 6f75 745f 7061 7468 203d        out_path =
+0001ca50: 206f 732e 7061 7468 2e6a 6f69 6e28 6469   os.path.join(di
+0001ca60: 722c 2066 227b 7669 6465 6f5f 6e61 6d65  r, f"{video_name
+0001ca70: 7d5f 7b73 5f66 7d5f 7b65 5f66 7d7b 6578  }_{s_f}_{e_f}{ex
+0001ca80: 747d 2229 0a20 2020 2020 2020 2063 6d64  t}").        cmd
+0001ca90: 203d 2066 2766 666d 7065 6720 2d69 2022   = f'ffmpeg -i "
+0001caa0: 7b66 696c 655f 7061 7468 7d22 202d 7666  {file_path}" -vf
+0001cab0: 2022 7472 696d 3d7b 735f 667d 3a7b 655f   "trim={s_f}:{e_
+0001cac0: 667d 2c73 6574 7074 733d 5054 532d 5354  f},setpts=PTS-ST
+0001cad0: 4152 5450 5453 2220 2d63 3a76 206c 6962  ARTPTS" -c:v lib
+0001cae0: 7832 3634 202d 633a 6120 6161 6320 2d6c  x264 -c:a aac -l
+0001caf0: 6f67 6c65 7665 6c20 6572 726f 7220 2d73  oglevel error -s
+0001cb00: 7461 7473 2022 7b6f 7574 5f70 6174 687d  tats "{out_path}
+0001cb10: 2220 2d79 270a 2020 2020 2020 2020 7375  " -y'.        su
+0001cb20: 6270 726f 6365 7373 2e63 616c 6c28 636d  bprocess.call(cm
+0001cb30: 642c 2073 6865 6c6c 3d54 7275 652c 2073  d, shell=True, s
+0001cb40: 7464 6f75 743d 7375 6270 726f 6365 7373  tdout=subprocess
+0001cb50: 2e50 4950 4529 0a20 2020 2020 2020 2076  .PIPE).        v
+0001cb60: 6964 656f 5f74 696d 6572 2e73 746f 705f  ideo_timer.stop_
+0001cb70: 7469 6d65 7228 290a 2020 2020 2020 2020  timer().        
+0001cb80: 7072 696e 7428 0a20 2020 2020 2020 2020  print(.         
+0001cb90: 2020 2066 2256 6964 656f 207b 7669 6465     f"Video {vide
+0001cba0: 6f5f 6e61 6d65 7d20 636f 6d70 6c65 7465  o_name} complete
+0001cbb0: 2028 656c 6170 7365 6420 7469 6d65 207b   (elapsed time {
+0001cbc0: 7669 6465 6f5f 7469 6d65 722e 656c 6170  video_timer.elap
+0001cbd0: 7365 645f 7469 6d65 5f73 7472 7d73 2922  sed_time_str}s)"
+0001cbe0: 0a20 2020 2020 2020 2029 0a20 2020 2074  .        ).    t
+0001cbf0: 696d 6572 2e73 746f 705f 7469 6d65 7228  imer.stop_timer(
+0001cc00: 290a 2020 2020 6966 2073 6176 655f 6469  ).    if save_di
+0001cc10: 7220 6973 204e 6f6e 653a 0a20 2020 2020  r is None:.     
+0001cc20: 2020 2073 7464 6f75 745f 7375 6363 6573     stdout_succes
+0001cc30: 7328 0a20 2020 2020 2020 2020 2020 206d  s(.            m
+0001cc40: 7367 3d66 227b 6c65 6e28 6669 6c65 5f70  sg=f"{len(file_p
+0001cc50: 6174 6873 297d 2076 6964 656f 2873 2920  aths)} video(s) 
+0001cc60: 636c 6970 7065 6420 6279 2066 7261 6d65  clipped by frame
+0001cc70: 222c 0a20 2020 2020 2020 2020 2020 2065  ",.            e
+0001cc80: 6c61 7073 6564 5f74 696d 653d 7469 6d65  lapsed_time=time
+0001cc90: 722e 656c 6170 7365 645f 7469 6d65 5f73  r.elapsed_time_s
+0001cca0: 7472 2c0a 2020 2020 2020 2020 290a 2020  tr,.        ).  
+0001ccb0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001ccc0: 7374 646f 7574 5f73 7563 6365 7373 280a  stdout_success(.
+0001ccd0: 2020 2020 2020 2020 2020 2020 6d73 673d              msg=
+0001cce0: 6622 7b6c 656e 2866 696c 655f 7061 7468  f"{len(file_path
+0001ccf0: 7329 7d20 7669 6465 6f28 7329 2063 6c69  s)} video(s) cli
+0001cd00: 7070 6564 2062 7920 6672 616d 6520 616e  pped by frame an
+0001cd10: 6420 7361 7665 6420 696e 207b 7361 7665  d saved in {save
+0001cd20: 5f64 6972 7d22 2c0a 2020 2020 2020 2020  _dir}",.        
+0001cd30: 2020 2020 656c 6170 7365 645f 7469 6d65      elapsed_time
+0001cd40: 3d74 696d 6572 2e65 6c61 7073 6564 5f74  =timer.elapsed_t
+0001cd50: 696d 655f 7374 722c 0a20 2020 2020 2020  ime_str,.       
+0001cd60: 2029 0a0a 0a23 2076 6964 656f 5f70 6174   )...# video_pat
+0001cd70: 6873 203d 205b 272f 5573 6572 732f 7369  hs = ['/Users/si
+0001cd80: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
+0001cd90: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
+0001cda0: 6f6f 7469 6e67 2f62 6565 7062 6f6f 7031  ooting/beepboop1
+0001cdb0: 3734 2f70 726f 6a65 6374 5f66 6f6c 6465  74/project_folde
+0001cdc0: 722f 6d65 7267 652f 5472 6961 6c20 2020  r/merge/Trial   
+0001cdd0: 2031 305f 636c 6970 7065 645f 6761 6e74   10_clipped_gant
+0001cde0: 742e 6d70 3427 2c0a 2320 2020 2020 2020  t.mp4',.#       
+0001cdf0: 2020 2020 2020 2020 2027 2f55 7365 7273           '/Users
+0001ce00: 2f73 696d 6f6e 2f44 6573 6b74 6f70 2f65  /simon/Desktop/e
+0001ce10: 6e76 732f 7369 6d62 612f 7472 6f75 626c  nvs/simba/troubl
+0001ce20: 6573 686f 6f74 696e 672f 6265 6570 626f  eshooting/beepbo
+0001ce30: 6f70 3137 342f 7072 6f6a 6563 745f 666f  op174/project_fo
+0001ce40: 6c64 6572 2f6d 6572 6765 2f54 7269 616c  lder/merge/Trial
+0001ce50: 2020 2020 3130 5f63 6c69 7070 6564 2e6d      10_clipped.m
+0001ce60: 7034 272c 0a23 2020 2020 2020 2020 2020  p4',.#          
+0001ce70: 2020 2020 2020 272f 5573 6572 732f 7369        '/Users/si
+0001ce80: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
+0001ce90: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
+0001cea0: 6f6f 7469 6e67 2f62 6565 7062 6f6f 7031  ooting/beepboop1
+0001ceb0: 3734 2f70 726f 6a65 6374 5f66 6f6c 6465  74/project_folde
+0001cec0: 722f 6d65 7267 652f 5472 6961 6c20 2020  r/merge/Trial   
+0001ced0: 2031 305f 636c 6970 7065 645f 6c69 6e65   10_clipped_line
+0001cee0: 2e6d 7034 272c 0a23 2020 2020 2020 2020  .mp4',.#        
+0001cef0: 2020 2020 2020 2020 272f 5573 6572 732f          '/Users/
+0001cf00: 7369 6d6f 6e2f 4465 736b 746f 702f 656e  simon/Desktop/en
+0001cf10: 7673 2f73 696d 6261 2f74 726f 7562 6c65  vs/simba/trouble
+0001cf20: 7368 6f6f 7469 6e67 2f62 6565 7062 6f6f  shooting/beepboo
+0001cf30: 7031 3734 2f70 726f 6a65 6374 5f66 6f6c  p174/project_fol
+0001cf40: 6465 722f 6d65 7267 652f 5472 6961 6c20  der/merge/Trial 
+0001cf50: 2020 2020 335f 636c 6970 7065 642e 6d70      3_clipped.mp
+0001cf60: 3427 5d0a 230a 2320 7669 6465 6f5f 7061  4'].#.# video_pa
+0001cf70: 7468 7320 3d20 5b27 2f55 7365 7273 2f73  ths = ['/Users/s
+0001cf80: 696d 6f6e 2f44 6573 6b74 6f70 2f65 6e76  imon/Desktop/env
+0001cf90: 732f 7369 6d62 612f 7472 6f75 626c 6573  s/simba/troubles
+0001cfa0: 686f 6f74 696e 672f 6265 6570 626f 6f70  hooting/beepboop
+0001cfb0: 3137 342f 7072 6f6a 6563 745f 666f 6c64  174/project_fold
+0001cfc0: 6572 2f76 6964 656f 732f 5472 6961 6c20  er/videos/Trial 
+0001cfd0: 2020 2031 302e 6d70 3427 2c0a 2320 2020     10.mp4',.#   
+0001cfe0: 2020 2020 2020 2020 2020 2020 2027 2f55               '/U
+0001cff0: 7365 7273 2f73 696d 6f6e 2f44 6573 6b74  sers/simon/Deskt
+0001d000: 6f70 2f65 6e76 732f 7369 6d62 612f 7472  op/envs/simba/tr
+0001d010: 6f75 626c 6573 686f 6f74 696e 672f 6265  oubleshooting/be
+0001d020: 6570 626f 6f70 3137 342f 7072 6f6a 6563  epboop174/projec
+0001d030: 745f 666f 6c64 6572 2f6d 6572 6765 2f54  t_folder/merge/T
+0001d040: 7269 616c 2020 2020 3130 5f63 6c69 7070  rial    10_clipp
+0001d050: 6564 5f67 616e 7474 2e6d 7034 272c 0a23  ed_gantt.mp4',.#
+0001d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d070: 272f 5573 6572 732f 7369 6d6f 6e2f 4465  '/Users/simon/De
+0001d080: 736b 746f 702f 656e 7673 2f73 696d 6261  sktop/envs/simba
+0001d090: 2f74 726f 7562 6c65 7368 6f6f 7469 6e67  /troubleshooting
+0001d0a0: 2f62 6565 7062 6f6f 7031 3734 2f70 726f  /beepboop174/pro
+0001d0b0: 6a65 6374 5f66 6f6c 6465 722f 6d65 7267  ject_folder/merg
+0001d0c0: 652f 5472 6961 6c20 2020 2031 305f 636c  e/Trial    10_cl
+0001d0d0: 6970 7065 645f 6c69 6e65 2e6d 7034 272c  ipped_line.mp4',
+0001d0e0: 0a23 2020 2020 2020 2020 2020 2020 2020  .#              
+0001d0f0: 2020 272f 5573 6572 732f 7369 6d6f 6e2f    '/Users/simon/
+0001d100: 4465 736b 746f 702f 656e 7673 2f73 696d  Desktop/envs/sim
+0001d110: 6261 2f74 726f 7562 6c65 7368 6f6f 7469  ba/troubleshooti
+0001d120: 6e67 2f62 6565 7062 6f6f 7031 3734 2f70  ng/beepboop174/p
+0001d130: 726f 6a65 6374 5f66 6f6c 6465 722f 6d65  roject_folder/me
+0001d140: 7267 652f 5472 6961 6c20 2020 2020 335f  rge/Trial     3_
+0001d150: 636c 6970 7065 642e 6d70 3427 5d0a 230a  clipped.mp4'].#.
+0001d160: 2320 7361 7665 5f70 6174 6820 3d20 272f  # save_path = '/
+0001d170: 5573 6572 732f 7369 6d6f 6e2f 4465 736b  Users/simon/Desk
+0001d180: 746f 702f 656e 7673 2f73 696d 6261 2f74  top/envs/simba/t
+0001d190: 726f 7562 6c65 7368 6f6f 7469 6e67 2f62  roubleshooting/b
+0001d1a0: 6565 7062 6f6f 7031 3734 2f70 726f 6a65  eepboop174/proje
+0001d1b0: 6374 5f66 6f6c 6465 722f 6d65 7267 652f  ct_folder/merge/
+0001d1c0: 6f75 742e 6d70 3427 0a0a 230a 2320 7669  out.mp4'..#.# vi
+0001d1d0: 6465 6f5f 7061 7468 7320 3d20 5b27 2f55  deo_paths = ['/U
+0001d1e0: 7365 7273 2f73 696d 6f6e 2f44 6573 6b74  sers/simon/Deskt
+0001d1f0: 6f70 2f65 6e76 732f 7369 6d62 612f 7472  op/envs/simba/tr
+0001d200: 6f75 626c 6573 686f 6f74 696e 672f 6265  oubleshooting/be
+0001d210: 6570 626f 6f70 3137 342f 7072 6f6a 6563  epboop174/projec
+0001d220: 745f 666f 6c64 6572 2f66 7261 6d65 732f  t_folder/frames/
+0001d230: 6f75 7470 7574 2f67 616e 7474 5f70 6c6f  output/gantt_plo
+0001d240: 7473 2f54 7269 616c 2020 2020 3130 2e6d  ts/Trial    10.m
+0001d250: 7034 272c 0a23 2020 2020 2020 2020 2020  p4',.#          
+0001d260: 2020 2020 2020 272f 5573 6572 732f 7369        '/Users/si
+0001d270: 6d6f 6e2f 4465 736b 746f 702f 656e 7673  mon/Desktop/envs
+0001d280: 2f73 696d 6261 2f74 726f 7562 6c65 7368  /simba/troublesh
+0001d290: 6f6f 7469 6e67 2f62 6565 7062 6f6f 7031  ooting/beepboop1
+0001d2a0: 3734 2f70 726f 6a65 6374 5f66 6f6c 6465  74/project_folde
+0001d2b0: 722f 7669 6465 6f73 2f54 7269 616c 2020  r/videos/Trial  
+0001d2c0: 2020 3130 2e6d 7034 272c 0a23 2020 2020    10.mp4',.#    
+0001d2d0: 2020 2020 2020 2020 2020 2020 272f 5573              '/Us
+0001d2e0: 6572 732f 7369 6d6f 6e2f 4465 736b 746f  ers/simon/Deskto
+0001d2f0: 702f 656e 7673 2f73 696d 6261 2f74 726f  p/envs/simba/tro
+0001d300: 7562 6c65 7368 6f6f 7469 6e67 2f62 6565  ubleshooting/bee
+0001d310: 7062 6f6f 7031 3734 2f70 726f 6a65 6374  pboop174/project
+0001d320: 5f66 6f6c 6465 722f 6672 616d 6573 2f6f  _folder/frames/o
+0001d330: 7574 7075 742f 6c69 6e65 5f70 6c6f 742f  utput/line_plot/
+0001d340: 5472 6961 6c20 2020 2031 302e 6d70 3427  Trial    10.mp4'
+0001d350: 2c0a 2320 2020 2020 2020 2020 2020 2020  ,.#             
+0001d360: 2020 2027 2f55 7365 7273 2f73 696d 6f6e     '/Users/simon
+0001d370: 2f44 6573 6b74 6f70 2f65 6e76 732f 7369  /Desktop/envs/si
+0001d380: 6d62 612f 7472 6f75 626c 6573 686f 6f74  mba/troubleshoot
+0001d390: 696e 672f 6265 6570 626f 6f70 3137 342f  ing/beepboop174/
+0001d3a0: 7072 6f6a 6563 745f 666f 6c64 6572 2f66  project_folder/f
+0001d3b0: 7261 6d65 732f 6f75 7470 7574 2f6c 696e  rames/output/lin
+0001d3c0: 655f 706c 6f74 2f54 7269 616c 2020 2020  e_plot/Trial    
+0001d3d0: 2033 2e6d 7034 275d 0a23 2073 6176 655f   3.mp4'].# save_
+0001d3e0: 7061 7468 203d 2027 2f55 7365 7273 2f73  path = '/Users/s
+0001d3f0: 696d 6f6e 2f44 6573 6b74 6f70 2f65 6e76  imon/Desktop/env
+0001d400: 732f 7369 6d62 612f 7472 6f75 626c 6573  s/simba/troubles
+0001d410: 686f 6f74 696e 672f 5241 545f 4e4f 522f  hooting/RAT_NOR/
+0001d420: 7072 6f6a 6563 745f 666f 6c64 6572 2f76  project_folder/v
+0001d430: 6964 656f 732f 7465 7374 2f6e 6577 2f62  ideos/test/new/b
+0001d440: 6c61 6e6b 5f74 6573 742e 6d70 3427 0a0a  lank_test.mp4'..
+0001d450: 2320 7669 6465 6f5f 7061 7468 7320 3d20  # video_paths = 
+0001d460: 5b27 2f55 7365 7273 2f73 696d 6f6e 2f44  ['/Users/simon/D
+0001d470: 6573 6b74 6f70 2f65 6e76 732f 7369 6d62  esktop/envs/simb
+0001d480: 612f 7472 6f75 626c 6573 686f 6f74 696e  a/troubleshootin
+0001d490: 672f 6265 6570 626f 6f70 3137 342f 7072  g/beepboop174/pr
+0001d4a0: 6f6a 6563 745f 666f 6c64 6572 2f76 6964  oject_folder/vid
+0001d4b0: 656f 732f 5472 6961 6c20 2020 2031 302e  eos/Trial    10.
+0001d4c0: 6d70 3427 2c0a 2320 2020 2020 2020 2020  mp4',.#         
+0001d4d0: 2020 2020 2020 2027 2f55 7365 7273 2f73         '/Users/s
+0001d4e0: 696d 6f6e 2f44 6573 6b74 6f70 2f65 6e76  imon/Desktop/env
+0001d4f0: 732f 7369 6d62 612f 7472 6f75 626c 6573  s/simba/troubles
+0001d500: 686f 6f74 696e 672f 6265 6570 626f 6f70  hooting/beepboop
+0001d510: 3137 342f 7072 6f6a 6563 745f 666f 6c64  174/project_fold
+0001d520: 6572 2f66 7261 6d65 732f 6f75 7470 7574  er/frames/output
+0001d530: 2f6c 696e 655f 706c 6f74 2f54 7269 616c  /line_plot/Trial
+0001d540: 2020 2020 3130 2e6d 7034 272c 0a23 2020      10.mp4',.#  
+0001d550: 2020 2020 2020 2020 2020 2020 2020 272f                '/
+0001d560: 5573 6572 732f 7369 6d6f 6e2f 4465 736b  Users/simon/Desk
+0001d570: 746f 702f 656e 7673 2f73 696d 6261 2f74  top/envs/simba/t
+0001d580: 726f 7562 6c65 7368 6f6f 7469 6e67 2f62  roubleshooting/b
+0001d590: 6565 7062 6f6f 7031 3734 2f70 726f 6a65  eepboop174/proje
+0001d5a0: 6374 5f66 6f6c 6465 722f 6672 616d 6573  ct_folder/frames
+0001d5b0: 2f6f 7574 7075 742f 6c69 6e65 5f70 6c6f  /output/line_plo
+0001d5c0: 742f 5472 6961 6c20 2020 2020 332e 6d70  t/Trial     3.mp
+0001d5d0: 3427 5d0a 0a23 206d 6978 6564 5f6d 6f73  4']..# mixed_mos
+0001d5e0: 6169 635f 636f 6e63 6174 656e 6174 6f72  aic_concatenator
+0001d5f0: 2876 6964 656f 5f70 6174 6873 3d76 6964  (video_paths=vid
+0001d600: 656f 5f70 6174 6873 2c20 7361 7665 5f70  eo_paths, save_p
+0001d610: 6174 683d 7361 7665 5f70 6174 682c 2067  ath=save_path, g
+0001d620: 7075 3d46 616c 7365 2c20 7665 7262 6f73  pu=False, verbos
+0001d630: 653d 5472 7565 290a                      e=True).
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/roi_selector_circle.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/roi_selector_circle.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/px_to_mm.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/px_to_mm.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/batch_process_menus.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/batch_process_menus.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/multi_cropper.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/multi_cropper.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/extract_frames.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/extract_frames.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/roi_selector.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/roi_selector.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/calculate_px_dist.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/calculate_px_dist.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/roi_selector_polygon.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/roi_selector_polygon.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/extract_seqframes.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/extract_seqframes.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/video_processors/batch_process_create_ffmpeg_commands.py` & `Simba-UW-tf-dev-1.91.6/simba/video_processors/batch_process_create_ffmpeg_commands.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/outlier_tools/outlier_corrector_movement.py` & `Simba-UW-tf-dev-1.91.6/simba/outlier_tools/outlier_corrector_movement.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/outlier_tools/outlier_corrector_location_advanced.py` & `Simba-UW-tf-dev-1.91.6/simba/outlier_tools/outlier_corrector_location_advanced.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/outlier_tools/outlier_corrector_movement_advanced.py` & `Simba-UW-tf-dev-1.91.6/simba/outlier_tools/outlier_corrector_movement_advanced.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/outlier_tools/outlier_corrector_location.py` & `Simba-UW-tf-dev-1.91.6/simba/outlier_tools/outlier_corrector_location.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/outlier_tools/skip_outlier_correction.py` & `Simba-UW-tf-dev-1.91.6/simba/outlier_tools/skip_outlier_correction.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/SimBA.py` & `Simba-UW-tf-dev-1.91.6/simba/SimBA.py`

 * *Files 0% similar despite different names*

```diff
@@ -116,26 +116,27 @@
     SpontaneousAlternationPopUp
 from simba.ui.pop_ups.subset_feature_extractor_pop_up import \
     FeatureSubsetExtractorPopUp
 from simba.ui.pop_ups.third_party_annotator_appender_pop_up import \
     ThirdPartyAnnotatorAppenderPopUp
 from simba.ui.pop_ups.validation_plot_pop_up import ValidationVideoPopUp
 from simba.ui.pop_ups.video_processing_pop_up import (
-    CalculatePixelsPerMMInVideoPopUp, ChangeFpsMultipleVideosPopUp,
-    ChangeFpsSingleVideoPopUp, ChangeImageFormatPopUp, CLAHEPopUp,
-    ClipSingleVideoByFrameNumbers, ClipVideoPopUp, ConcatenatingVideosPopUp,
-    ConcatenatorPopUp, ConvertROIDefinitionsPopUp, ConvertVideoPopUp,
-    CreateGIFPopUP, CropVideoCirclesPopUp, CropVideoPolygonsPopUp,
-    CropVideoPopUp, DownsampleVideoPopUp, ExtractAllFramesPopUp,
-    ExtractAnnotationFramesPopUp, ExtractSEQFramesPopUp,
-    ExtractSpecificFramesPopUp, GreyscaleSingleVideoPopUp,
-    ImportFrameDirectoryPopUp, InitiateClipMultipleVideosByFrameNumbersPopUp,
-    InitiateClipMultipleVideosByTimestampsPopUp, MergeFrames2VideoPopUp,
-    MultiCropPopUp, MultiShortenPopUp, SuperImposeFrameCountPopUp,
-    VideoRotatorPopUp, VideoTemporalJoinPopUp)
+    BrightnessContrastPopUp, CalculatePixelsPerMMInVideoPopUp,
+    ChangeFpsMultipleVideosPopUp, ChangeFpsSingleVideoPopUp,
+    ChangeImageFormatPopUp, CLAHEPopUp, ClipSingleVideoByFrameNumbers,
+    ClipVideoPopUp, ConcatenatingVideosPopUp, ConcatenatorPopUp,
+    ConvertROIDefinitionsPopUp, ConvertVideoPopUp, CreateGIFPopUP,
+    CropVideoCirclesPopUp, CropVideoPolygonsPopUp, CropVideoPopUp,
+    DownsampleVideoPopUp, ExtractAllFramesPopUp, ExtractAnnotationFramesPopUp,
+    ExtractSEQFramesPopUp, ExtractSpecificFramesPopUp,
+    GreyscaleSingleVideoPopUp, ImportFrameDirectoryPopUp,
+    InitiateClipMultipleVideosByFrameNumbersPopUp,
+    InitiateClipMultipleVideosByTimestampsPopUp, InteractiveClahePopUp,
+    MergeFrames2VideoPopUp, MultiCropPopUp, MultiShortenPopUp,
+    SuperImposeFrameCountPopUp, VideoRotatorPopUp, VideoTemporalJoinPopUp)
 from simba.ui.pop_ups.visualize_pose_in_dir_pop_up import \
     VisualizePoseInFolderPopUp
 from simba.ui.tkinter_functions import DropDownMenu, Entry_Box, FileSelect
 from simba.ui.video_info_ui import VideoInfoTable
 from simba.utils.checks import (check_ffmpeg_available,
                                 check_file_exist_and_readable, check_int)
 from simba.utils.custom_feature_extractor import CustomFeatureExtractor
@@ -1674,39 +1675,24 @@
             label="Crop videos...",
             compound="left",
             image=self.menu_icons["crop"]["img"],
             menu=crop_video_menu,
         )
 
         format_menu = Menu(video_process_menu)
-        format_menu.add_command(
-            label="Change image file formats", command=ChangeImageFormatPopUp
-        )
-        format_menu.add_command(
-            label="Change video file formats", command=ConvertVideoPopUp
-        )
-        video_process_menu.add_cascade(
-            label="Change formats...",
-            compound="left",
-            image=self.menu_icons["convert"]["img"],
-            menu=format_menu,
-        )
-        video_process_menu.add_command(
-            label="CLAHE enhance video",
-            compound="left",
-            image=self.menu_icons["clahe"]["img"],
-            command=CLAHEPopUp,
-        )
+        format_menu.add_command(label="Change image file formats", command=ChangeImageFormatPopUp)
+        format_menu.add_command(label="Change video file formats", command=ConvertVideoPopUp)
+        video_process_menu.add_cascade(label="Change formats...", compound="left", image=self.menu_icons["convert"]["img"], menu=format_menu)
+
+        clahe_menu = Menu(video_process_menu)
+        clahe_menu.add_command(label="CLAHE enhance videos", command=CLAHEPopUp)
+        clahe_menu.add_command(label="Interactively CLAHE enhance videos", command=InteractiveClahePopUp)
+        video_process_menu.add_cascade(label="CLAHE enhance videos...", compound="left", image=self.menu_icons["clahe"]["img"], menu=clahe_menu)
 
-        video_process_menu.add_cascade(
-            label="Concatenate multiple videos",
-            compound="left",
-            image=self.menu_icons["concat"]["img"],
-            command=lambda: ConcatenatorPopUp(config_path=None),
-        )
+        video_process_menu.add_cascade(label="Concatenate multiple videos", compound="left", image=self.menu_icons["concat"]["img"], command=lambda: ConcatenatorPopUp(config_path=None))
         video_process_menu.add_cascade(
             label="Concatenate two videos",
             compound="left",
             image=self.menu_icons["concat"]["img"],
             command=ConcatenatingVideosPopUp,
         )
         video_process_menu.add_command(
@@ -1718,20 +1704,17 @@
         video_process_menu.add_command(
             label="Convert ROI definitions",
             compound="left",
             image=self.menu_icons["roi"]["img"],
             command=lambda: ConvertROIDefinitionsPopUp(),
         )
         convert_data_menu = Menu(video_process_menu)
-        convert_data_menu.add_command(
-            label="Convert CSV to parquet", command=Csv2ParquetPopUp
-        )
-        convert_data_menu.add_command(
-            label="Convert parquet o CSV", command=Parquet2CsvPopUp
-        )
+        convert_data_menu.add_command(label="Convert CSV to parquet", command=Csv2ParquetPopUp)
+        convert_data_menu.add_command(label="Convert parquet o CSV", command=Parquet2CsvPopUp)
+
         video_process_menu.add_cascade(
             label="Convert working file type...",
             compound="left",
             image=self.menu_icons["change"]["img"],
             menu=convert_data_menu,
         )
 
@@ -1780,14 +1763,18 @@
 
         video_process_menu.add_command(
             label="Get mm/ppx",
             compound="left",
             image=self.menu_icons["calipher"]["img"],
             command=CalculatePixelsPerMMInVideoPopUp,
         )
+
+        video_process_menu.add_command(label="Change video brightness / contrast", compound="left", image=self.menu_icons["brightness"]["img"], command=BrightnessContrastPopUp)
+
+
         video_process_menu.add_command(
             label="Merge frames to video",
             compound="left",
             image=self.menu_icons["merge"]["img"],
             command=MergeFrames2VideoPopUp,
         )
         video_process_menu.add_command(
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/unsupervised/model_names.parquet` & `Simba-UW-tf-dev-1.91.6/simba/assets/unsupervised/model_names.parquet`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/unsupervised/features.csv` & `Simba-UW-tf-dev-1.91.6/simba/assets/unsupervised/features.csv`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/down_arrow.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/down_arrow.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/intruder_shape.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/intruder_shape.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/feature_categories/shap_feature_categories.csv` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/feature_categories/shap_feature_categories.csv`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/resident_shape.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/resident_shape.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/resident_intruder_shape.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/resident_intruder_shape.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/animal_distances.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/animal_distances.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/baseline_scale.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/baseline_scale.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/ubuntu.regular.ttf` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/ubuntu.regular.ttf`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/side_scale.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/side_scale.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/UbuntuMono-Regular.ttf` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/UbuntuMono-Regular.ttf`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/side_scale_5.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/side_scale_5.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/intruder_movement.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/intruder_movement.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/resident_movement.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/resident_movement.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/color_bar.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/color_bar.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/shap/resident_intruder_movement.jpg` & `Simba-UW-tf-dev-1.91.6/simba/assets/shap/resident_intruder_movement.jpg`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/assets/.DS_Store`

 * *Files 6% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 00000000: 0000 0001 4275 6431 0000 2000 0000 0800  ....Bud1.. .....
 00000010: 0000 2000 0000 100c 0000 0000 0000 0000  .. .............
 00000020: 0000 0000 0000 0000 0000 0000 0000 0800  ................
 00000030: 0000 0800 0000 0000 0000 0000 0000 0000  ................
-00000040: 0000 0000 0000 0002 0000 0000 0000 0020  ............... 
+00000040: 0000 0000 0000 0002 0000 0000 0000 0022  ..............."
 00000050: 0000 0001 0000 1000 0073 6277 7370 626c  .........sbwspbl
 00000060: 6f62 0000 0000 0000 0000 0000 0000 0000  ob..............
 00000070: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00000080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00000090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 000000a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 000000b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
@@ -250,221 +250,221 @@
 00000f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00000fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00000fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00000fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00000fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00000fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00000ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001000: 0000 0000 0000 0000 0000 0020 0000 0005  ........... ....
+00001000: 0000 0000 0000 0000 0000 0022 0000 0005  ..........."....
 00001010: 0069 0063 006f 006e 0073 6277 7370 626c  .i.c.o.n.sbwspbl
-00001020: 6f62 0000 00b7 6270 6c69 7374 3030 d601  ob....bplist00..
+00001020: 6f62 0000 00b8 6270 6c69 7374 3030 d601  ob....bplist00..
 00001030: 0203 0405 0607 0807 080b 085d 5368 6f77  ...........]Show
 00001040: 5374 6174 7573 4261 725b 5368 6f77 546f  StatusBar[ShowTo
 00001050: 6f6c 6261 725b 5368 6f77 5461 6256 6965  olbar[ShowTabVie
 00001060: 775f 1014 436f 6e74 6169 6e65 7253 686f  w_..ContainerSho
 00001070: 7753 6964 6562 6172 5c57 696e 646f 7742  wSidebar\WindowB
 00001080: 6f75 6e64 735b 5368 6f77 5369 6465 6261  ounds[ShowSideba
-00001090: 7208 0908 095f 1017 7b7b 3433 2c20 3834  r...._..{{43, 84
-000010a0: 7d2c 207b 3131 3830 2c20 3536 387d 7d09  }, {1180, 568}}.
-000010b0: 0815 232f 3b52 5f6b 6c6d 6e6f 8900 0000  ..#/;R_klmno....
-000010c0: 0000 0001 0100 0000 0000 0000 0d00 0000  ................
-000010d0: 0000 0000 0000 0000 0000 0000 8a00 0000  ................
-000010e0: 0500 6900 6300 6f00 6e00 736c 6731 5363  ..i.c.o.n.slg1Sc
-000010f0: 6f6d 7000 0000 0000 0934 ae00 0000 0500  omp......4......
-00001100: 6900 6300 6f00 6e00 736c 7376 4362 6c6f  i.c.o.n.slsvCblo
-00001110: 6200 0003 2362 706c 6973 7430 30da 0102  b...#bplist00...
-00001120: 0304 0506 0708 090a 0b0c 0d1a 5455 5456  ............TUTV
-00001130: 0c58 5869 636f 6e53 697a 655f 100f 7368  .XXiconSize_..sh
-00001140: 6f77 4963 6f6e 5072 6576 6965 7757 636f  owIconPreviewWco
-00001150: 6c75 6d6e 735f 1011 6361 6c63 756c 6174  lumns_..calculat
-00001160: 6541 6c6c 5369 7a65 735f 100f 7363 726f  eAllSizes_..scro
-00001170: 6c6c 506f 7369 7469 6f6e 5958 7465 7874  llPositionYXtext
-00001180: 5369 7a65 5f10 0f73 6372 6f6c 6c50 6f73  Size_..scrollPos
-00001190: 6974 696f 6e58 5a73 6f72 7443 6f6c 756d  itionXZsortColum
-000011a0: 6e5f 1010 7573 6552 656c 6174 6976 6544  n_..useRelativeD
-000011b0: 6174 6573 5f10 1276 6965 774f 7074 696f  ates_..viewOptio
-000011c0: 6e73 5665 7273 696f 6e23 4030 0000 0000  nsVersion#@0....
-000011d0: 0000 09ae 0e17 1c21 252a 2f34 393d 4246  .......!%*/49=BF
-000011e0: 4b4f d40f 1011 1213 140c 0c5a 6964 656e  KO.........Ziden
-000011f0: 7469 6669 6572 5577 6964 7468 5961 7363  tifierUwidthYasc
-00001200: 656e 6469 6e67 5776 6973 6962 6c65 546e  endingWvisibleTn
-00001210: 616d 6511 012c 0909 d40f 1011 1218 191a  ame..,..........
-00001220: 1a58 7562 6971 7569 7479 1023 0808 d40f  .Xubiquity.#....
-00001230: 1011 121d 1e1a 0c5c 6461 7465 4d6f 6469  .......\dateModi
-00001240: 6669 6564 10b5 0809 d40f 1011 1222 1e1a  fied........."..
-00001250: 1a5b 6461 7465 4372 6561 7465 6408 08d4  .[dateCreated...
-00001260: 0f10 1112 2627 1a0c 5473 697a 6510 6108  ....&'..Tsize.a.
-00001270: 09d4 0f10 1112 2b2c 0c0c 546b 696e 6410  ......+,..Tkind.
-00001280: 7309 09d4 0f10 1112 3031 0c1a 556c 6162  s.......01..Ulab
-00001290: 656c 1064 0908 d40f 1011 1235 360c 1a57  el.d.......56..W
-000012a0: 7665 7273 696f 6e10 4b09 08d4 0f10 1112  version.K.......
-000012b0: 3a14 0c1a 5863 6f6d 6d65 6e74 7309 08d4  :...Xcomments...
-000012c0: 0f10 1112 3e3f 1a1a 5e64 6174 654c 6173  ....>?..^dateLas
-000012d0: 744f 7065 6e65 6410 c808 08d4 0f10 1112  tOpened.........
-000012e0: 431e 1a1a 5964 6174 6541 6464 6564 0808  C...YdateAdded..
-000012f0: d412 1011 0f1a 481a 4a08 10d2 085a 7368  ......H.J....Zsh
-00001300: 6172 654f 776e 6572 d412 1011 0f1a 481a  areOwner......H.
-00001310: 4e08 085f 100f 7368 6172 654c 6173 7445  N.._..shareLastE
-00001320: 6469 746f 72d4 1210 110f 1a48 1a52 0808  ditor......H.R..
-00001330: 5f10 1069 6e76 6974 6174 696f 6e53 7461  _..invitationSta
-00001340: 7475 7308 2300 0000 0000 0000 0023 4028  tus.#........#@(
-00001350: 0000 0000 0000 5c64 6174 654d 6f64 6966  ......\dateModif
-00001360: 6965 6409 1001 0008 001d 0026 0038 0040  ied........&.8.@
-00001370: 0054 0066 006f 0081 008c 009f 00b4 00bd  .T.f.o..........
-00001380: 00be 00cd 00d6 00e1 00e7 00f1 00f9 00fe  ................
-00001390: 0101 0102 0103 010c 0115 0117 0118 0119  ................
-000013a0: 0122 012f 0131 0132 0133 013c 0148 0149  ."./.1.2.3.<.H.I
-000013b0: 014a 0153 0158 015a 015b 015c 0165 016a  .J.S.X.Z.[.\.e.j
-000013c0: 016c 016d 016e 0177 017d 017f 0180 0181  .l.m.n.w.}......
-000013d0: 018a 0192 0194 0195 0196 019f 01a8 01a9  ................
-000013e0: 01aa 01b3 01c2 01c4 01c5 01c6 01cf 01d9  ................
-000013f0: 01da 01db 01e4 01e5 01e7 01e8 01f3 01fc  ................
-00001400: 01fd 01fe 0210 0219 021a 021b 022e 022f  .............../
-00001410: 0238 0241 024e 024f 0000 0000 0000 0201  .8.A.N.O........
-00001420: 0000 0000 0000 0059 0000 0000 0000 0000  .......Y........
-00001430: 0000 0000 0000 0251 0000 0005 0069 0063  .......Q.....i.c
-00001440: 006f 006e 0073 6c73 7670 626c 6f62 0000  .o.n.slsvpblob..
-00001450: 0298 6270 6c69 7374 3030 da01 0203 0405  ..bplist00......
-00001460: 0607 0809 0a0b 0c0d 1c47 4847 490c 3758  .........GHGI.7X
-00001470: 6963 6f6e 5369 7a65 5f10 0f73 686f 7749  iconSize_..showI
-00001480: 636f 6e50 7265 7669 6577 5763 6f6c 756d  conPreviewWcolum
-00001490: 6e73 5f10 1163 616c 6375 6c61 7465 416c  ns_..calculateAl
-000014a0: 6c53 697a 6573 5f10 0f73 6372 6f6c 6c50  lSizes_..scrollP
-000014b0: 6f73 6974 696f 6e59 5874 6578 7453 697a  ositionYXtextSiz
-000014c0: 655f 100f 7363 726f 6c6c 506f 7369 7469  e_..scrollPositi
-000014d0: 6f6e 585a 736f 7274 436f 6c75 6d6e 5f10  onXZsortColumn_.
-000014e0: 1075 7365 5265 6c61 7469 7665 4461 7465  .useRelativeDate
-000014f0: 735f 1012 7669 6577 4f70 7469 6f6e 7356  s_..viewOptionsV
-00001500: 6572 7369 6f6e 2340 3000 0000 0000 0009  ersion#@0.......
-00001510: d90e 0f10 1112 1314 1516 1720 252a 2f34  ........... %*/4
-00001520: 383d 4158 636f 6d6d 656e 7473 556c 6162  8=AXcommentsUlab
-00001530: 656c 5776 6572 7369 6f6e 5b64 6174 6543  elWversion[dateC
-00001540: 7265 6174 6564 5473 697a 655c 6461 7465  reatedTsize\date
-00001550: 4d6f 6469 6669 6564 546b 696e 6454 6e61  ModifiedTkindTna
-00001560: 6d65 5e64 6174 654c 6173 744f 7065 6e65  me^dateLastOpene
-00001570: 64d4 1819 1a1b 1c1d 0c1f 5776 6973 6962  d.........Wvisib
-00001580: 6c65 5577 6964 7468 5961 7363 656e 6469  leUwidthYascendi
-00001590: 6e67 5569 6e64 6578 0811 012c 0910 07d4  ngUindex...,....
-000015a0: 1819 1a1b 1c22 0c24 0810 6409 1005 d418  .....".$..d.....
-000015b0: 191a 1b1c 270c 2908 104b 0910 06d4 1819  ....'.)..K......
-000015c0: 1a1b 1c2c 1c2e 0810 b508 1002 d418 191a  ...,............
-000015d0: 1b0c 311c 3309 1061 0810 03d4 1819 1a1b  ..1.3..a........
-000015e0: 0c2c 1c37 0908 1001 d418 191a 1b0c 3a0c  .,.7..........:.
-000015f0: 3c09 1073 0910 04d4 1819 1a1b 0c1d 0c40  <..s...........@
-00001600: 0909 1000 d418 191a 1b1c 431c 4508 10c8  ..........C.E...
-00001610: 0810 0808 2300 0000 0000 0000 0023 4028  ....#........#@(
-00001620: 0000 0000 0000 5c64 6174 654d 6f64 6966  ......\dateModif
-00001630: 6965 6409 0008 001d 0026 0038 0040 0054  ied......&.8.@.T
-00001640: 0066 006f 0081 008c 009f 00b4 00bd 00be  .f.o............
-00001650: 00d1 00da 00e0 00e8 00f4 00f9 0106 010b  ................
-00001660: 0110 011f 0128 0130 0136 0140 0146 0147  .....(.0.6.@.F.G
-00001670: 014a 014b 014d 0156 0157 0159 015a 015c  .J.K.M.V.W.Y.Z.\
-00001680: 0165 0166 0168 0169 016b 0174 0175 0177  .e.f.h.i.k.t.u.w
-00001690: 0178 017a 0183 0184 0186 0187 0189 0192  .x.z............
-000016a0: 0193 0194 0196 019f 01a0 01a2 01a3 01a5  ................
-000016b0: 01ae 01af 01b0 01b2 01bb 01bc 01be 01bf  ................
-000016c0: 01c1 01c2 01cb 01d4 01e1 0000 0000 0000  ................
-000016d0: 0201 0000 0000 0000 004b 0000 0000 0000  .........K......
-000016e0: 0000 0000 0000 0000 01e2 0000 0005 0069  ...............i
-000016f0: 0063 006f 006e 0073 6d6f 4444 626c 6f62  .c.o.n.smoDDblob
-00001700: 0000 0008 8eb0 1baf cce2 c541 0000 0005  ...........A....
-00001710: 0069 0063 006f 006e 0073 6d6f 6444 626c  .i.c.o.n.smodDbl
-00001720: 6f62 0000 0008 8eb0 1baf cce2 c541 0000  ob...........A..
-00001730: 0005 0069 0063 006f 006e 0073 7068 3153  ...i.c.o.n.sph1S
-00001740: 636f 6d70 0000 0000 000b c000 0000 0005  comp............
-00001750: 0069 0063 006f 006e 0073 7653 726e 6c6f  .i.c.o.n.svSrnlo
-00001760: 6e67 0000 0001 0000 0003 0069 006d 0067  ng.........i.m.g
-00001770: 6c67 3153 636f 6d70 0000 0000 0019 a95e  lg1Scomp.......^
-00001780: 0000 0003 0069 006d 0067 6d6f 4444 626c  .....i.m.gmoDDbl
-00001790: 6f62 0000 0008 14dc 419f 0aba c541 0000  ob......A....A..
-000017a0: 0003 0069 006d 0067 6d6f 6444 626c 6f62  ...i.m.gmodDblob
-000017b0: 0000 0008 14dc 419f 0aba c541 0000 0003  ......A....A....
-000017c0: 0069 006d 0067 7068 3153 636f 6d70 0000  .i.m.gph1Scomp..
-000017d0: 0000 0019 e000 0000 0007 006c 006f 006f  ...........l.o.o
-000017e0: 006b 0075 0070 0073 6277 7370 626c 6f62  .k.u.p.sbwspblob
-000017f0: 0000 00b8 6270 6c69 7374 3030 d601 0203  ....bplist00....
-00001800: 0405 0607 0807 080b 085d 5368 6f77 5374  .........]ShowSt
-00001810: 6174 7573 4261 725b 5368 6f77 546f 6f6c  atusBar[ShowTool
-00001820: 6261 725b 5368 6f77 5461 6256 6965 775f  bar[ShowTabView_
-00001830: 1014 436f 6e74 6169 6e65 7253 686f 7753  ..ContainerShowS
-00001840: 6964 6562 6172 5c57 696e 646f 7742 6f75  idebar\WindowBou
-00001850: 6e64 735b 5368 6f77 5369 6465 6261 7208  nds[ShowSidebar.
-00001860: 0908 095f 1018 7b7b 3236 302c 2033 3239  ..._..{{260, 329
-00001870: 7d2c 207b 3932 302c 2034 3336 7d7d 0908  }, {920, 436}}..
-00001880: 1523 2f3b 525f 6b6c 6d6e 6f8a 0000 0000  .#/;R_klmno.....
-00001890: 0000 0101 0000 0000 0000 000d 0000 0000  ................
-000018a0: 0000 0000 0000 0000 0000 008b 0000 0007  ................
-000018b0: 006c 006f 006f 006b 0075 0070 0073 6c67  .l.o.o.k.u.p.slg
-000018c0: 3153 636f 6d70 0000 0000 0005 02b8 0000  1Scomp..........
-000018d0: 0007 006c 006f 006f 006b 0075 0070 0073  ...l.o.o.k.u.p.s
-000018e0: 6d6f 4444 626c 6f62 0000 0008 3e34 94a3  moDDblob....>4..
-000018f0: 0aba c541 0000 0007 006c 006f 006f 006b  ...A.....l.o.o.k
-00001900: 0075 0070 0073 6d6f 6444 626c 6f62 0000  .u.p.smodDblob..
-00001910: 0008 3e34 94a3 0aba c541 0000 0007 006c  ..>4.....A.....l
-00001920: 006f 006f 006b 0075 0070 0073 7068 3153  .o.o.k.u.p.sph1S
-00001930: 636f 6d70 0000 0000 0005 3000 0000 0007  comp......0.....
-00001940: 006c 006f 006f 006b 0075 0070 0073 7653  .l.o.o.k.u.p.svS
-00001950: 726e 6c6f 6e67 0000 0001 0000 0004 0073  rnlong.........s
-00001960: 0068 0061 0070 6c67 3153 636f 6d70 0000  .h.a.plg1Scomp..
-00001970: 0000 0009 06c3 0000 0004 0073 0068 0061  ...........s.h.a
-00001980: 0070 6d6f 4444 626c 6f62 0000 0008 868a  .pmoDDblob......
-00001990: a4a8 0aba c541 0000 0004 0073 0068 0061  .....A.....s.h.a
-000019a0: 0070 6d6f 6444 626c 6f62 0000 0008 868a  .pmodDblob......
-000019b0: a4a8 0aba c541 0000 0004 0073 0068 0061  .....A.....s.h.a
-000019c0: 0070 7068 3153 636f 6d70 0000 0000 0009  .pph1Scomp......
-000019d0: 9000 0000 0003 0073 0074 006c 6c67 3153  .......s.t.llg1S
-000019e0: 636f 6d70 0000 0000 0053 7f67 0000 0003  comp.....S.g....
-000019f0: 0073 0074 006c 6d6f 4444 626c 6f62 0000  .s.t.lmoDDblob..
-00001a00: 0008 398b b9ad 0aba c541 0000 0003 0073  ..9......A.....s
-00001a10: 0074 006c 6d6f 6444 626c 6f62 0000 0008  .t.lmodDblob....
-00001a20: 398b b9ad 0aba c541 0000 0003 0073 0074  9......A.....s.t
-00001a30: 006c 7068 3153 636f 6d70 0000 0000 0053  .lph1Scomp.....S
-00001a40: a000 0000 000c 0075 006e 0073 0075 0070  .......u.n.s.u.p
-00001a50: 0065 0072 0076 0069 0073 0065 0064 6277  .e.r.v.i.s.e.dbw
-00001a60: 7370 626c 6f62 0000 00b9 6270 6c69 7374  spblob....bplist
-00001a70: 3030 d601 0203 0405 0607 0807 080b 085d  00.............]
-00001a80: 5368 6f77 5374 6174 7573 4261 725b 5368  ShowStatusBar[Sh
-00001a90: 6f77 546f 6f6c 6261 725b 5368 6f77 5461  owToolbar[ShowTa
-00001aa0: 6256 6965 775f 1014 436f 6e74 6169 6e65  bView_..Containe
-00001ab0: 7253 686f 7753 6964 6562 6172 5c57 696e  rShowSidebar\Win
-00001ac0: 646f 7742 6f75 6e64 735b 5368 6f77 5369  dowBounds[ShowSi
-00001ad0: 6465 6261 7208 0908 095f 1019 7b7b 3236  debar...._..{{26
-00001ae0: 302c 2031 3238 7d2c 207b 3131 3434 2c20  0, 128}, {1144, 
-00001af0: 3633 387d 7d09 0815 232f 3b52 5f6b 6c6d  638}}...#/;R_klm
-00001b00: 6e6f 8b00 0000 0000 0001 0100 0000 0000  no..............
-00001b10: 0000 0d00 0000 0000 0000 0000 0000 0000  ................
-00001b20: 0000 8c00 0000 0c00 7500 6e00 7300 7500  ........u.n.s.u.
-00001b30: 7000 6500 7200 7600 6900 7300 6500 646c  p.e.r.v.i.s.e.dl
-00001b40: 6731 5363 6f6d 7000 0000 0000 01e3 0a00  g1Scomp.........
-00001b50: 0000 0c00 7500 6e00 7300 7500 7000 6500  ....u.n.s.u.p.e.
-00001b60: 7200 7600 6900 7300 6500 646d 6f44 4462  r.v.i.s.e.dmoDDb
-00001b70: 6c6f 6200 0000 08b5 830b b00a bac5 4100  lob...........A.
-00001b80: 0000 0c00 7500 6e00 7300 7500 7000 6500  ....u.n.s.u.p.e.
-00001b90: 7200 7600 6900 7300 6500 646d 6f64 4462  r.v.i.s.e.dmodDb
-00001ba0: 6c6f 6200 0000 08b5 830b b00a bac5 4100  lob...........A.
-00001bb0: 0000 0c00 7500 6e00 7300 7500 7000 6500  ....u.n.s.u.p.e.
-00001bc0: 7200 7600 6900 7300 6500 6470 6831 5363  r.v.i.s.e.dph1Sc
-00001bd0: 6f6d 7000 0000 0000 01f0 0000 0000 0c00  omp.............
-00001be0: 7500 6e00 7300 7500 7000 6500 7200 7600  u.n.s.u.p.e.r.v.
-00001bf0: 6900 7300 6500 6476 5372 6e6c 6f6e 6700  i.s.e.dvSrnlong.
-00001c00: 0000 0100 0000 0000 0000 0000 0000 0000  ................
-00001c10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00001ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
+00001090: 7208 0908 095f 1018 7b7b 3236 302c 2033  r...._..{{260, 3
+000010a0: 3239 7d2c 207b 3932 302c 2034 3336 7d7d  29}, {920, 436}}
+000010b0: 0908 1523 2f3b 525f 6b6c 6d6e 6f8a 0000  ...#/;R_klmno...
+000010c0: 0000 0000 0101 0000 0000 0000 000d 0000  ................
+000010d0: 0000 0000 0000 0000 0000 0000 008b 0000  ................
+000010e0: 0005 0069 0063 006f 006e 0073 6c67 3153  ...i.c.o.n.slg1S
+000010f0: 636f 6d70 0000 0000 0009 454e 0000 0005  comp......EN....
+00001100: 0069 0063 006f 006e 0073 6c73 7643 626c  .i.c.o.n.slsvCbl
+00001110: 6f62 0000 0323 6270 6c69 7374 3030 da01  ob...#bplist00..
+00001120: 0203 0405 0607 0809 0a0b 0c0d 1a54 5554  .............TUT
+00001130: 560c 5858 6963 6f6e 5369 7a65 5f10 0f73  V.XXiconSize_..s
+00001140: 686f 7749 636f 6e50 7265 7669 6577 5763  howIconPreviewWc
+00001150: 6f6c 756d 6e73 5f10 1163 616c 6375 6c61  olumns_..calcula
+00001160: 7465 416c 6c53 697a 6573 5f10 0f73 6372  teAllSizes_..scr
+00001170: 6f6c 6c50 6f73 6974 696f 6e59 5874 6578  ollPositionYXtex
+00001180: 7453 697a 655f 100f 7363 726f 6c6c 506f  tSize_..scrollPo
+00001190: 7369 7469 6f6e 585a 736f 7274 436f 6c75  sitionXZsortColu
+000011a0: 6d6e 5f10 1075 7365 5265 6c61 7469 7665  mn_..useRelative
+000011b0: 4461 7465 735f 1012 7669 6577 4f70 7469  Dates_..viewOpti
+000011c0: 6f6e 7356 6572 7369 6f6e 2340 3000 0000  onsVersion#@0...
+000011d0: 0000 0009 ae0e 171c 2125 2a2f 3439 3d42  ........!%*/49=B
+000011e0: 464b 4fd4 0f10 1112 1314 0c0c 5a69 6465  FKO.........Zide
+000011f0: 6e74 6966 6965 7255 7769 6474 6859 6173  ntifierUwidthYas
+00001200: 6365 6e64 696e 6757 7669 7369 626c 6554  cendingWvisibleT
+00001210: 6e61 6d65 1101 2c09 09d4 0f10 1112 1819  name..,.........
+00001220: 1a1a 5875 6269 7175 6974 7910 2308 08d4  ..Xubiquity.#...
+00001230: 0f10 1112 1d1e 1a0c 5c64 6174 654d 6f64  ........\dateMod
+00001240: 6966 6965 6410 b508 09d4 0f10 1112 221e  ified.........".
+00001250: 1a1a 5b64 6174 6543 7265 6174 6564 0808  ..[dateCreated..
+00001260: d40f 1011 1226 271a 0c54 7369 7a65 1061  .....&'..Tsize.a
+00001270: 0809 d40f 1011 122b 2c0c 0c54 6b69 6e64  .......+,..Tkind
+00001280: 1073 0909 d40f 1011 1230 310c 1a55 6c61  .s.......01..Ula
+00001290: 6265 6c10 6409 08d4 0f10 1112 3536 0c1a  bel.d.......56..
+000012a0: 5776 6572 7369 6f6e 104b 0908 d40f 1011  Wversion.K......
+000012b0: 123a 140c 1a58 636f 6d6d 656e 7473 0908  .:...Xcomments..
+000012c0: d40f 1011 123e 3f1a 1a5e 6461 7465 4c61  .....>?..^dateLa
+000012d0: 7374 4f70 656e 6564 10c8 0808 d40f 1011  stOpened........
+000012e0: 1243 1e1a 1a59 6461 7465 4164 6465 6408  .C...YdateAdded.
+000012f0: 08d4 1210 110f 1a48 1a4a 0810 d208 5a73  .......H.J....Zs
+00001300: 6861 7265 4f77 6e65 72d4 1210 110f 1a48  hareOwner......H
+00001310: 1a4e 0808 5f10 0f73 6861 7265 4c61 7374  .N.._..shareLast
+00001320: 4564 6974 6f72 d412 1011 0f1a 481a 5208  Editor......H.R.
+00001330: 085f 1010 696e 7669 7461 7469 6f6e 5374  ._..invitationSt
+00001340: 6174 7573 0823 0000 0000 0000 0000 2340  atus.#........#@
+00001350: 2800 0000 0000 005c 6461 7465 4d6f 6469  (......\dateModi
+00001360: 6669 6564 0910 0100 0800 1d00 2600 3800  fied........&.8.
+00001370: 4000 5400 6600 6f00 8100 8c00 9f00 b400  @.T.f.o.........
+00001380: bd00 be00 cd00 d600 e100 e700 f100 f900  ................
+00001390: fe01 0101 0201 0301 0c01 1501 1701 1801  ................
+000013a0: 1901 2201 2f01 3101 3201 3301 3c01 4801  .."./.1.2.3.<.H.
+000013b0: 4901 4a01 5301 5801 5a01 5b01 5c01 6501  I.J.S.X.Z.[.\.e.
+000013c0: 6a01 6c01 6d01 6e01 7701 7d01 7f01 8001  j.l.m.n.w.}.....
+000013d0: 8101 8a01 9201 9401 9501 9601 9f01 a801  ................
+000013e0: a901 aa01 b301 c201 c401 c501 c601 cf01  ................
+000013f0: d901 da01 db01 e401 e501 e701 e801 f301  ................
+00001400: fc01 fd01 fe02 1002 1902 1a02 1b02 2e02  ................
+00001410: 2f02 3802 4102 4e02 4f00 0000 0000 0002  /.8.A.N.O.......
+00001420: 0100 0000 0000 0000 5900 0000 0000 0000  ........Y.......
+00001430: 0000 0000 0000 0002 5100 0000 0500 6900  ........Q.....i.
+00001440: 6300 6f00 6e00 736c 7376 7062 6c6f 6200  c.o.n.slsvpblob.
+00001450: 0002 9862 706c 6973 7430 30da 0102 0304  ...bplist00.....
+00001460: 0506 0708 090a 0b0c 0d1c 4748 4749 0c37  ..........GHGI.7
+00001470: 5869 636f 6e53 697a 655f 100f 7368 6f77  XiconSize_..show
+00001480: 4963 6f6e 5072 6576 6965 7757 636f 6c75  IconPreviewWcolu
+00001490: 6d6e 735f 1011 6361 6c63 756c 6174 6541  mns_..calculateA
+000014a0: 6c6c 5369 7a65 735f 100f 7363 726f 6c6c  llSizes_..scroll
+000014b0: 506f 7369 7469 6f6e 5958 7465 7874 5369  PositionYXtextSi
+000014c0: 7a65 5f10 0f73 6372 6f6c 6c50 6f73 6974  ze_..scrollPosit
+000014d0: 696f 6e58 5a73 6f72 7443 6f6c 756d 6e5f  ionXZsortColumn_
+000014e0: 1010 7573 6552 656c 6174 6976 6544 6174  ..useRelativeDat
+000014f0: 6573 5f10 1276 6965 774f 7074 696f 6e73  es_..viewOptions
+00001500: 5665 7273 696f 6e23 4030 0000 0000 0000  Version#@0......
+00001510: 09d9 0e0f 1011 1213 1415 1617 2025 2a2f  ............ %*/
+00001520: 3438 3d41 5863 6f6d 6d65 6e74 7355 6c61  48=AXcommentsUla
+00001530: 6265 6c57 7665 7273 696f 6e5b 6461 7465  belWversion[date
+00001540: 4372 6561 7465 6454 7369 7a65 5c64 6174  CreatedTsize\dat
+00001550: 654d 6f64 6966 6965 6454 6b69 6e64 546e  eModifiedTkindTn
+00001560: 616d 655e 6461 7465 4c61 7374 4f70 656e  ame^dateLastOpen
+00001570: 6564 d418 191a 1b1c 1d0c 1f57 7669 7369  ed.........Wvisi
+00001580: 626c 6555 7769 6474 6859 6173 6365 6e64  bleUwidthYascend
+00001590: 696e 6755 696e 6465 7808 1101 2c09 1007  ingUindex...,...
+000015a0: d418 191a 1b1c 220c 2408 1064 0910 05d4  ......".$..d....
+000015b0: 1819 1a1b 1c27 0c29 0810 4b09 1006 d418  .....'.)..K.....
+000015c0: 191a 1b1c 2c1c 2e08 10b5 0810 02d4 1819  ....,...........
+000015d0: 1a1b 0c31 1c33 0910 6108 1003 d418 191a  ...1.3..a.......
+000015e0: 1b0c 2c1c 3709 0810 01d4 1819 1a1b 0c3a  ..,.7..........:
+000015f0: 0c3c 0910 7309 1004 d418 191a 1b0c 1d0c  .<..s...........
+00001600: 4009 0910 00d4 1819 1a1b 1c43 1c45 0810  @..........C.E..
+00001610: c808 1008 0823 0000 0000 0000 0000 2340  .....#........#@
+00001620: 2800 0000 0000 005c 6461 7465 4d6f 6469  (......\dateModi
+00001630: 6669 6564 0900 0800 1d00 2600 3800 4000  fied......&.8.@.
+00001640: 5400 6600 6f00 8100 8c00 9f00 b400 bd00  T.f.o...........
+00001650: be00 d100 da00 e000 e800 f400 f901 0601  ................
+00001660: 0b01 1001 1f01 2801 3001 3601 4001 4601  ......(.0.6.@.F.
+00001670: 4701 4a01 4b01 4d01 5601 5701 5901 5a01  G.J.K.M.V.W.Y.Z.
+00001680: 5c01 6501 6601 6801 6901 6b01 7401 7501  \.e.f.h.i.k.t.u.
+00001690: 7701 7801 7a01 8301 8401 8601 8701 8901  w.x.z...........
+000016a0: 9201 9301 9401 9601 9f01 a001 a201 a301  ................
+000016b0: a501 ae01 af01 b001 b201 bb01 bc01 be01  ................
+000016c0: bf01 c101 c201 cb01 d401 e100 0000 0000  ................
+000016d0: 0002 0100 0000 0000 0000 4b00 0000 0000  ..........K.....
+000016e0: 0000 0000 0000 0000 0001 e200 0000 0500  ................
+000016f0: 6900 6300 6f00 6e00 736d 6f44 4462 6c6f  i.c.o.n.smoDDblo
+00001700: 6200 0000 0838 25f7 6a88 f4c5 4100 0000  b....8%.j...A...
+00001710: 0500 6900 6300 6f00 6e00 736d 6f64 4462  ..i.c.o.n.smodDb
+00001720: 6c6f 6200 0000 0838 25f7 6a88 f4c5 4100  lob....8%.j...A.
+00001730: 0000 0500 6900 6300 6f00 6e00 7370 6831  ....i.c.o.n.sph1
+00001740: 5363 6f6d 7000 0000 0000 0be0 0000 0000  Scomp...........
+00001750: 0500 6900 6300 6f00 6e00 7376 5372 6e6c  ..i.c.o.n.svSrnl
+00001760: 6f6e 6700 0000 0100 0000 0300 6900 6d00  ong.........i.m.
+00001770: 6762 7773 7062 6c6f 6200 0000 b862 706c  gbwspblob....bpl
+00001780: 6973 7430 30d6 0102 0304 0506 0708 0708  ist00...........
+00001790: 0b08 5d53 686f 7753 7461 7475 7342 6172  ..]ShowStatusBar
+000017a0: 5b53 686f 7754 6f6f 6c62 6172 5b53 686f  [ShowToolbar[Sho
+000017b0: 7754 6162 5669 6577 5f10 1443 6f6e 7461  wTabView_..Conta
+000017c0: 696e 6572 5368 6f77 5369 6465 6261 725c  inerShowSidebar\
+000017d0: 5769 6e64 6f77 426f 756e 6473 5b53 686f  WindowBounds[Sho
+000017e0: 7753 6964 6562 6172 0809 0809 5f10 187b  wSidebar...._..{
+000017f0: 7b39 332c 2031 3533 7d2c 207b 3131 3830  {93, 153}, {1180
+00001800: 2c20 3536 387d 7d09 0815 232f 3b52 5f6b  , 568}}...#/;R_k
+00001810: 6c6d 6e6f 8a00 0000 0000 0001 0100 0000  lmno............
+00001820: 0000 0000 0d00 0000 0000 0000 0000 0000  ................
+00001830: 0000 0000 8b00 0000 0300 6900 6d00 676c  ..........i.m.gl
+00001840: 6731 5363 6f6d 7000 0000 0000 19a9 5e00  g1Scomp.......^.
+00001850: 0000 0300 6900 6d00 676d 6f44 4462 6c6f  ....i.m.gmoDDblo
+00001860: 6200 0000 0814 dc41 9f0a bac5 4100 0000  b......A....A...
+00001870: 0300 6900 6d00 676d 6f64 4462 6c6f 6200  ..i.m.gmodDblob.
+00001880: 0000 0814 dc41 9f0a bac5 4100 0000 0300  .....A....A.....
+00001890: 6900 6d00 6770 6831 5363 6f6d 7000 0000  i.m.gph1Scomp...
+000018a0: 0000 19e0 0000 0000 0300 6900 6d00 6776  ..........i.m.gv
+000018b0: 5372 6e6c 6f6e 6700 0000 0100 0000 0700  Srnlong.........
+000018c0: 6c00 6f00 6f00 6b00 7500 7000 7362 7773  l.o.o.k.u.p.sbws
+000018d0: 7062 6c6f 6200 0000 b862 706c 6973 7430  pblob....bplist0
+000018e0: 30d6 0102 0304 0506 0708 0708 0b08 5d53  0.............]S
+000018f0: 686f 7753 7461 7475 7342 6172 5b53 686f  howStatusBar[Sho
+00001900: 7754 6f6f 6c62 6172 5b53 686f 7754 6162  wToolbar[ShowTab
+00001910: 5669 6577 5f10 1443 6f6e 7461 696e 6572  View_..Container
+00001920: 5368 6f77 5369 6465 6261 725c 5769 6e64  ShowSidebar\Wind
+00001930: 6f77 426f 756e 6473 5b53 686f 7753 6964  owBounds[ShowSid
+00001940: 6562 6172 0809 0809 5f10 187b 7b32 3630  ebar...._..{{260
+00001950: 2c20 3332 397d 2c20 7b39 3230 2c20 3433  , 329}, {920, 43
+00001960: 367d 7d09 0815 232f 3b52 5f6b 6c6d 6e6f  6}}...#/;R_klmno
+00001970: 8a00 0000 0000 0001 0100 0000 0000 0000  ................
+00001980: 0d00 0000 0000 0000 0000 0000 0000 0000  ................
+00001990: 8b00 0000 0700 6c00 6f00 6f00 6b00 7500  ......l.o.o.k.u.
+000019a0: 7000 736c 6731 5363 6f6d 7000 0000 0000  p.slg1Scomp.....
+000019b0: 0502 b800 0000 0700 6c00 6f00 6f00 6b00  ........l.o.o.k.
+000019c0: 7500 7000 736d 6f44 4462 6c6f 6200 0000  u.p.smoDDblob...
+000019d0: 083e 3494 a30a bac5 4100 0000 0700 6c00  .>4.....A.....l.
+000019e0: 6f00 6f00 6b00 7500 7000 736d 6f64 4462  o.o.k.u.p.smodDb
+000019f0: 6c6f 6200 0000 083e 3494 a30a bac5 4100  lob....>4.....A.
+00001a00: 0000 0700 6c00 6f00 6f00 6b00 7500 7000  ....l.o.o.k.u.p.
+00001a10: 7370 6831 5363 6f6d 7000 0000 0000 0530  sph1Scomp......0
+00001a20: 0000 0000 0700 6c00 6f00 6f00 6b00 7500  ......l.o.o.k.u.
+00001a30: 7000 7376 5372 6e6c 6f6e 6700 0000 0100  p.svSrnlong.....
+00001a40: 0000 0400 7300 6800 6100 706c 6731 5363  ....s.h.a.plg1Sc
+00001a50: 6f6d 7000 0000 0000 0906 c300 0000 0400  omp.............
+00001a60: 7300 6800 6100 706d 6f44 4462 6c6f 6200  s.h.a.pmoDDblob.
+00001a70: 0000 0886 8aa4 a80a bac5 4100 0000 0400  ..........A.....
+00001a80: 7300 6800 6100 706d 6f64 4462 6c6f 6200  s.h.a.pmodDblob.
+00001a90: 0000 0886 8aa4 a80a bac5 4100 0000 0400  ..........A.....
+00001aa0: 7300 6800 6100 7070 6831 5363 6f6d 7000  s.h.a.pph1Scomp.
+00001ab0: 0000 0000 0990 0000 0000 0300 7300 7400  ............s.t.
+00001ac0: 6c6c 6731 5363 6f6d 7000 0000 0000 537f  llg1Scomp.....S.
+00001ad0: 6700 0000 0300 7300 7400 6c6d 6f44 4462  g.....s.t.lmoDDb
+00001ae0: 6c6f 6200 0000 0839 8bb9 ad0a bac5 4100  lob....9......A.
+00001af0: 0000 0300 7300 7400 6c6d 6f64 4462 6c6f  ....s.t.lmodDblo
+00001b00: 6200 0000 0839 8bb9 ad0a bac5 4100 0000  b....9......A...
+00001b10: 0300 7300 7400 6c70 6831 5363 6f6d 7000  ..s.t.lph1Scomp.
+00001b20: 0000 0000 53a0 0000 0000 0c00 7500 6e00  ....S.......u.n.
+00001b30: 7300 7500 7000 6500 7200 7600 6900 7300  s.u.p.e.r.v.i.s.
+00001b40: 6500 6462 7773 7062 6c6f 6200 0000 b962  e.dbwspblob....b
+00001b50: 706c 6973 7430 30d6 0102 0304 0506 0708  plist00.........
+00001b60: 0708 0b08 5d53 686f 7753 7461 7475 7342  ....]ShowStatusB
+00001b70: 6172 5b53 686f 7754 6f6f 6c62 6172 5b53  ar[ShowToolbar[S
+00001b80: 686f 7754 6162 5669 6577 5f10 1443 6f6e  howTabView_..Con
+00001b90: 7461 696e 6572 5368 6f77 5369 6465 6261  tainerShowSideba
+00001ba0: 725c 5769 6e64 6f77 426f 756e 6473 5b53  r\WindowBounds[S
+00001bb0: 686f 7753 6964 6562 6172 0809 0809 5f10  howSidebar...._.
+00001bc0: 197b 7b32 3630 2c20 3132 387d 2c20 7b31  .{{260, 128}, {1
+00001bd0: 3134 342c 2036 3338 7d7d 0908 1523 2f3b  144, 638}}...#/;
+00001be0: 525f 6b6c 6d6e 6f8b 0000 0000 0000 0101  R_klmno.........
+00001bf0: 0000 0000 0000 000d 0000 0000 0000 0000  ................
+00001c00: 0000 0000 0000 008c 0000 000c 0075 006e  .............u.n
+00001c10: 0073 0075 0070 0065 0072 0076 0069 0073  .s.u.p.e.r.v.i.s
+00001c20: 0065 0064 6c67 3153 636f 6d70 0000 0000  .e.dlg1Scomp....
+00001c30: 0001 e30a 0000 000c 0075 006e 0073 0075  .........u.n.s.u
+00001c40: 0070 0065 0072 0076 0069 0073 0065 0064  .p.e.r.v.i.s.e.d
+00001c50: 6d6f 4444 626c 6f62 0000 0008 b583 0bb0  moDDblob........
+00001c60: 0aba c541 0000 000c 0075 006e 0073 0075  ...A.....u.n.s.u
+00001c70: 0070 0065 0072 0076 0069 0073 0065 0064  .p.e.r.v.i.s.e.d
+00001c80: 6d6f 6444 626c 6f62 0000 0008 b583 0bb0  modDblob........
+00001c90: 0aba c541 0000 000c 0075 006e 0073 0075  ...A.....u.n.s.u
+00001ca0: 0070 0065 0072 0076 0069 0073 0065 0064  .p.e.r.v.i.s.e.d
+00001cb0: 7068 3153 636f 6d70 0000 0000 0001 f000  ph1Scomp........
+00001cc0: 0000 000c 0075 006e 0073 0075 0070 0065  .....u.n.s.u.p.e
+00001cd0: 0072 0076 0069 0073 0065 0064 7653 726e  .r.v.i.s.e.dvSrn
+00001ce0: 6c6f 6e67 0000 0001 0000 0000 0000 0000  long............
 00001cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00001d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
@@ -586,56 +586,56 @@
 00002490: 0100 0200 0000 0000 0100 0400 0000 0000  ................
 000024a0: 0100 0800 0000 0000 0100 1000 0000 0000  ................
 000024b0: 0100 2000 0000 0000 0100 4000 0000 0000  .. .......@.....
 000024c0: 0100 8000 0000 0000 0101 0000 0000 0000  ................
 000024d0: 0102 0000 0000 0000 0104 0000 0000 0000  ................
 000024e0: 0108 0000 0000 0000 0110 0000 0000 0000  ................
 000024f0: 0120 0000 0000 0000 0140 0000 0000 0000  . .......@......
-00002500: 0072 7369 6f6e 2340 3000 0000 0000 0009  .rsion#@0.......
-00002510: d90e 0f10 1112 1314 1516 1720 252a 2f34  ........... %*/4
-00002520: 383d 4158 636f 6d6d 656e 7473 556c 6162  8=AXcommentsUlab
-00002530: 656c 5776 6572 7369 6f6e 5b64 6174 6543  elWversion[dateC
-00002540: 7265 6174 6564 5473 697a 655c 6461 7465  reatedTsize\date
-00002550: 4d6f 6469 6669 6564 546b 696e 6454 6e61  ModifiedTkindTna
-00002560: 6d65 5e64 6174 654c 6173 744f 7065 6e65  me^dateLastOpene
-00002570: 64d4 1819 1a1b 1c1d 0c1f 5776 6973 6962  d.........Wvisib
-00002580: 6c65 5577 6964 7468 5961 7363 656e 6469  leUwidthYascendi
-00002590: 6e67 5569 6e64 6578 0811 012c 0910 07d4  ngUindex...,....
-000025a0: 1819 1a1b 1c22 0c24 0810 6409 1005 d418  .....".$..d.....
-000025b0: 191a 1b1c 270c 2908 104b 0910 06d4 1819  ....'.)..K......
-000025c0: 1a1b 1c2c 1c2e 0810 b508 1002 d418 191a  ...,............
-000025d0: 1b0c 311c 3309 1061 0810 03d4 1819 1a1b  ..1.3..a........
-000025e0: 0c2c 1c37 0908 1001 d418 191a 1b0c 3a0c  .,.7..........:.
-000025f0: 3c09 1073 0910 04d4 1819 1a1b 0c1d 0c40  <..s...........@
-00002600: 0909 1000 d418 191a 1b1c 431c 4508 10c8  ..........C.E...
-00002610: 0810 0808 2300 0000 0000 0000 0023 4028  ....#........#@(
-00002620: 0000 0000 0000 5c64 6174 654d 6f64 6966  ......\dateModif
-00002630: 6965 6409 0008 001d 0026 0038 0040 0054  ied......&.8.@.T
-00002640: 0066 006f 0081 008c 009f 00b4 00bd 00be  .f.o............
-00002650: 00d1 00da 00e0 00e8 00f4 00f9 0106 010b  ................
-00002660: 0110 011f 0128 0130 0136 0140 0146 0147  .....(.0.6.@.F.G
-00002670: 014a 014b 014d 0156 0157 0159 015a 015c  .J.K.M.V.W.Y.Z.\
-00002680: 0165 0166 0168 0169 016b 0174 0175 0177  .e.f.h.i.k.t.u.w
-00002690: 0178 017a 0183 0184 0186 0187 0189 0192  .x.z............
-000026a0: 0193 0194 0196 019f 01a0 01a2 01a3 01a5  ................
-000026b0: 01ae 01af 01b0 01b2 01bb 01bc 01be 01bf  ................
-000026c0: 01c1 01c2 01cb 01d4 01e1 0000 0000 0000  ................
-000026d0: 0201 0000 0000 0000 004b 0000 0000 0000  .........K......
-000026e0: 0000 0000 0000 0000 01e2 0000 0005 0069  ...............i
-000026f0: 0063 006f 006e 0073 6d6f 4444 626c 6f62  .c.o.n.smoDDblob
-00002700: 0000 0008 8eb0 1baf cce2 c541 0000 0005  ...........A....
-00002710: 0069 0063 006f 006e 0073 6d6f 6444 626c  .i.c.o.n.smodDbl
-00002720: 6f62 0000 0008 8eb0 1baf cce2 c541 0000  ob...........A..
-00002730: 0005 0069 0063 006f 006e 0073 7068 3153  ...i.c.o.n.sph1S
-00002740: 636f 6d70 0000 0000 000b c000 0000 0005  comp............
-00002750: 0069 0063 006f 006e 0073 7653 726e 6c6f  .i.c.o.n.svSrnlo
-00002760: 6e67 0000 0001 0000 0003 0069 006d 0067  ng.........i.m.g
-00002770: 6c67 3153 636f 6d70 0000 0000 0019 a95e  lg1Scomp.......^
-00002780: 0000 0003 0069 006d 0067 6d6f 4444 626c  .....i.m.gmoDDbl
-00002790: 6f62 0000 0008 14dc 419f 0aba c541 0000  ob......A....A..
-000027a0: 0003 0069 006d 0067 6d6f 6444 626c 6f62  ...i.m.gmodDblob
-000027b0: 0000 0008 14dc 419f 0aba c541 0000 0003  ......A....A....
-000027c0: 0069 006d 0067 7068 3153 636f 6d70 0000  .i.m.gph1Scomp..
-000027d0: 0000 0019 e000 0000 0007 006c 006f 006f  ...........l.o.o
-000027e0: 006b 0075 0070 0073 6277 7370 626c 6f62  .k.u.p.sbwspblob
-000027f0: 0000 00b8 6270 6c69 7374 3030 d601 0203  ....bplist00....
-00002800: 0405 0607                                ....
+00002500: 0065 7273 696f 6e23 4030 0000 0000 0000  .ersion#@0......
+00002510: 09d9 0e0f 1011 1213 1415 1617 2025 2a2f  ............ %*/
+00002520: 3438 3d41 5863 6f6d 6d65 6e74 7355 6c61  48=AXcommentsUla
+00002530: 6265 6c57 7665 7273 696f 6e5b 6461 7465  belWversion[date
+00002540: 4372 6561 7465 6454 7369 7a65 5c64 6174  CreatedTsize\dat
+00002550: 654d 6f64 6966 6965 6454 6b69 6e64 546e  eModifiedTkindTn
+00002560: 616d 655e 6461 7465 4c61 7374 4f70 656e  ame^dateLastOpen
+00002570: 6564 d418 191a 1b1c 1d0c 1f57 7669 7369  ed.........Wvisi
+00002580: 626c 6555 7769 6474 6859 6173 6365 6e64  bleUwidthYascend
+00002590: 696e 6755 696e 6465 7808 1101 2c09 1007  ingUindex...,...
+000025a0: d418 191a 1b1c 220c 2408 1064 0910 05d4  ......".$..d....
+000025b0: 1819 1a1b 1c27 0c29 0810 4b09 1006 d418  .....'.)..K.....
+000025c0: 191a 1b1c 2c1c 2e08 10b5 0810 02d4 1819  ....,...........
+000025d0: 1a1b 0c31 1c33 0910 6108 1003 d418 191a  ...1.3..a.......
+000025e0: 1b0c 2c1c 3709 0810 01d4 1819 1a1b 0c3a  ..,.7..........:
+000025f0: 0c3c 0910 7309 1004 d418 191a 1b0c 1d0c  .<..s...........
+00002600: 4009 0910 00d4 1819 1a1b 1c43 1c45 0810  @..........C.E..
+00002610: c808 1008 0823 0000 0000 0000 0000 2340  .....#........#@
+00002620: 2800 0000 0000 005c 6461 7465 4d6f 6469  (......\dateModi
+00002630: 6669 6564 0900 0800 1d00 2600 3800 4000  fied......&.8.@.
+00002640: 5400 6600 6f00 8100 8c00 9f00 b400 bd00  T.f.o...........
+00002650: be00 d100 da00 e000 e800 f400 f901 0601  ................
+00002660: 0b01 1001 1f01 2801 3001 3601 4001 4601  ......(.0.6.@.F.
+00002670: 4701 4a01 4b01 4d01 5601 5701 5901 5a01  G.J.K.M.V.W.Y.Z.
+00002680: 5c01 6501 6601 6801 6901 6b01 7401 7501  \.e.f.h.i.k.t.u.
+00002690: 7701 7801 7a01 8301 8401 8601 8701 8901  w.x.z...........
+000026a0: 9201 9301 9401 9601 9f01 a001 a201 a301  ................
+000026b0: a501 ae01 af01 b001 b201 bb01 bc01 be01  ................
+000026c0: bf01 c101 c201 cb01 d401 e100 0000 0000  ................
+000026d0: 0002 0100 0000 0000 0000 4b00 0000 0000  ..........K.....
+000026e0: 0000 0000 0000 0000 0001 e200 0000 0500  ................
+000026f0: 6900 6300 6f00 6e00 736d 6f44 4462 6c6f  i.c.o.n.smoDDblo
+00002700: 6200 0000 0838 25f7 6a88 f4c5 4100 0000  b....8%.j...A...
+00002710: 0500 6900 6300 6f00 6e00 736d 6f64 4462  ..i.c.o.n.smodDb
+00002720: 6c6f 6200 0000 0838 25f7 6a88 f4c5 4100  lob....8%.j...A.
+00002730: 0000 0500 6900 6300 6f00 6e00 7370 6831  ....i.c.o.n.sph1
+00002740: 5363 6f6d 7000 0000 0000 0be0 0000 0000  Scomp...........
+00002750: 0500 6900 6300 6f00 6e00 7376 5372 6e6c  ..i.c.o.n.svSrnl
+00002760: 6f6e 6700 0000 0100 0000 0300 6900 6d00  ong.........i.m.
+00002770: 6762 7773 7062 6c6f 6200 0000 b862 706c  gbwspblob....bpl
+00002780: 6973 7430 30d6 0102 0304 0506 0708 0708  ist00...........
+00002790: 0b08 5d53 686f 7753 7461 7475 7342 6172  ..]ShowStatusBar
+000027a0: 5b53 686f 7754 6f6f 6c62 6172 5b53 686f  [ShowToolbar[Sho
+000027b0: 7754 6162 5669 6577 5f10 1443 6f6e 7461  wTabView_..Conta
+000027c0: 696e 6572 5368 6f77 5369 6465 6261 725c  inerShowSidebar\
+000027d0: 5769 6e64 6f77 426f 756e 6473 5b53 686f  WindowBounds[Sho
+000027e0: 7753 6964 6562 6172 0809 0809 5f10 187b  wSidebar...._..{
+000027f0: 7b39 332c 2031 3533 7d2c 207b 3131 3830  {93, 153}, {1180
+00002800: 2c20 3536                                , 56
```

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/lookups/model_names.parquet` & `Simba-UW-tf-dev-1.91.6/simba/assets/lookups/model_names.parquet`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/lookups/feature_extraction_headers.csv` & `Simba-UW-tf-dev-1.91.6/simba/assets/lookups/feature_extraction_headers.csv`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/lookups/critical_values_05.pickle` & `Simba-UW-tf-dev-1.91.6/simba/assets/lookups/critical_values_05.pickle`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/lookups/features.csv` & `Simba-UW-tf-dev-1.91.6/simba/assets/lookups/features.csv`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/lookups/unsupervised_example_x.csv` & `Simba-UW-tf-dev-1.91.6/simba/assets/lookups/unsupervised_example_x.csv`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/stl/operant_tray.stl` & `Simba-UW-tf-dev-1.91.6/simba/assets/stl/operant_tray.stl`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/stl/operant_lever.stl` & `Simba-UW-tf-dev-1.91.6/simba/assets/stl/operant_lever.stl`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/stl/operant_walls.stl` & `Simba-UW-tf-dev-1.91.6/simba/assets/stl/operant_walls.stl`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/stl/grid_floor.stl` & `Simba-UW-tf-dev-1.91.6/simba/assets/stl/grid_floor.stl`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/img/splash_2024.mp4` & `Simba-UW-tf-dev-1.91.6/simba/assets/img/splash_2024.mp4`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/img/bg_2024.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/img/bg_2024.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/img/about_me.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/img/about_me.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/img/splash.mp4` & `Simba-UW-tf-dev-1.91.6/simba/assets/img/splash.mp4`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/img/bg_2.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/img/bg_2.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/img/splash.pptx` & `Simba-UW-tf-dev-1.91.6/simba/assets/img/splash.pptx`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/img/bg.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/img/bg.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/UbuntuMono-Regular.ttf` & `Simba-UW-tf-dev-1.91.6/simba/assets/UbuntuMono-Regular.ttf`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/factory.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/factory.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/cluster.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/cluster.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/load.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/load.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/gif.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/gif.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/pose.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/pose.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/features.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/features.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/.DS_Store` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/.DS_Store`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/settings.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/settings.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/stopwatch.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/stopwatch.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/link.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/link.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/dash_simba.css` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/dash_simba.css`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/documentation.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/documentation.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/fps.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/fps.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/dimensionality_reduction.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/dimensionality_reduction.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/roi.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/roi.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/simba_logo_2.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/simba_logo_2.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/superimpose.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/superimpose.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/label.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/label.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/change.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/change.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/readthedocs_logo.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/readthedocs_logo.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/crop.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/crop.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/rotate.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/rotate.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/circle.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/circle.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/path.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/path.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/polygon.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/polygon.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/clip.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/clip.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/restart.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/restart.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/calipher.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/calipher.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/add_on.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/add_on.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/create.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/create.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/SimBA_logo.ico` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/SimBA_logo.ico`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/print.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/print.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/clf.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/clf.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat_icons/mosaic.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat_icons/mosaic.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat_icons/vertical.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat_icons/vertical.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat_icons/horizontal.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat_icons/horizontal.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat_icons/mixed_mosaic.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat_icons/mixed_mosaic.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/merge.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/merge.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/clean.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/clean.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/clf_2.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/clf_2.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/visualize.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/visualize.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/concat.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/concat.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/boris.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/boris.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/frames.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/frames.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/video.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/video.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/sample.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/sample.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/metrics.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/metrics.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/grey.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/grey.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/exit.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/exit.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/outlier.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/outlier.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/clahe.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/clahe.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/trash.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/trash.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/about.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/about.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/convert.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/convert.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/SimBA_logo.icns` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/SimBA_logo.icns`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/reorganize.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/reorganize.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/browse.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/browse.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/SimBA_logo.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/SimBA_logo.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/ethovision.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/ethovision.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/icons/close.png` & `Simba-UW-tf-dev-1.91.6/simba/assets/icons/close.png`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/dash_simba_base.css` & `Simba-UW-tf-dev-1.91.6/simba/assets/dash_simba_base.css`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/simba/assets/TheGoldenLab.PNG` & `Simba-UW-tf-dev-1.91.6/simba/assets/TheGoldenLab.PNG`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/Simba_UW_tf_dev.egg-info/PKG-INFO` & `Simba-UW-tf-dev-1.91.6/Simba_UW_tf_dev.egg-info/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: Simba-UW-tf-dev
-Version: 1.91.5
+Version: 1.91.6
 Summary: Toolkit for computer classification of behaviors in experimental animals
 Home-page: https://github.com/sgoldenlab/simba
 Author: Simon Nilsson, Jia Jie Choong, Sophia Hwang
 Author-email: sronilsson@gmail.com
 License: GNU Lesser General Public License v3 (LGPLv3)
 Platform: UNKNOWN
 Classifier: Programming Language :: Python :: 3
```

### Comparing `Simba-UW-tf-dev-1.91.5/Simba_UW_tf_dev.egg-info/SOURCES.txt` & `Simba-UW-tf-dev-1.91.6/Simba_UW_tf_dev.egg-info/SOURCES.txt`

 * *Files 1% similar despite different names*

```diff
@@ -22,14 +22,15 @@
 simba/assets/icons/SimBA_logo.icns
 simba/assets/icons/SimBA_logo.ico
 simba/assets/icons/SimBA_logo.png
 simba/assets/icons/__init__.py
 simba/assets/icons/about.png
 simba/assets/icons/add_on.png
 simba/assets/icons/boris.png
+simba/assets/icons/brightness.png
 simba/assets/icons/browse.png
 simba/assets/icons/calipher.png
 simba/assets/icons/change.png
 simba/assets/icons/circle.png
 simba/assets/icons/clahe.png
 simba/assets/icons/clean.png
 simba/assets/icons/clf.png
@@ -327,14 +328,15 @@
 simba/roi_tools/ROI_size_calculations.py
 simba/roi_tools/ROI_size_standardizer.py
 simba/roi_tools/ROI_time_bin_calculator.py
 simba/roi_tools/ROI_zoom.py
 simba/roi_tools/__init__.py
 simba/sandbox/.DS_Store
 simba/sandbox/AmberFeatureExtractor.py.zip
+simba/sandbox/CLAHE.py
 simba/sandbox/ROI_analyzer.py
 simba/sandbox/ROI_plotter.py
 simba/sandbox/ROI_plotter_mp.py
 simba/sandbox/__init__.py
 simba/sandbox/abod.py
 simba/sandbox/add_body_part.py
 simba/sandbox/add_body_part.py.zip
@@ -350,15 +352,17 @@
 simba/sandbox/calc_N_degree_direction_switches.py
 simba/sandbox/calinski_harabasz.py
 simba/sandbox/clip_multiple_videos_by_frame_numbers.py
 simba/sandbox/clip_videos_by_frm.py
 simba/sandbox/cochran_q.py
 simba/sandbox/cohens_kappa.py
 simba/sandbox/colinear_features.py
+simba/sandbox/color_filtering.py
 simba/sandbox/concordance_ratio.py
+simba/sandbox/contrast.py
 simba/sandbox/convex_hull_3_scratch_3.py
 simba/sandbox/convex_hull_scratch_1.py
 simba/sandbox/convex_hull_scratch_2.py
 simba/sandbox/count_values_in_range.py
 simba/sandbox/cronbach_alpha.py
 simba/sandbox/crop_circles_pop_up.py
 simba/sandbox/crop_single_polygon.py
@@ -369,42 +373,48 @@
 simba/sandbox/distance_velocity.py
 simba/sandbox/distances.py
 simba/sandbox/doctests.py
 simba/sandbox/dprime.py
 simba/sandbox/dunn_index.py
 simba/sandbox/egocentrical_aligner.py
 simba/sandbox/elliptic_envelope.py
+simba/sandbox/eta_squared.py
 simba/sandbox/ez_path_plot.py
 simba/sandbox/fish_feature_extractor_2022.py
 simba/sandbox/fish_feature_extractor_2023_version_2.py
 simba/sandbox/fish_feature_extractor_2023_version_3.py
 simba/sandbox/fish_feature_extractor_2023_version_4.py
 simba/sandbox/fish_feature_extractor_2023_version_5.py
 simba/sandbox/fix_clahe.py
+simba/sandbox/fleiss_kappa.py
 simba/sandbox/geometry_ex.py
 simba/sandbox/grangercausalitytests.py
 simba/sandbox/graph_3d_plotter.py
 simba/sandbox/graph_creator.py
 simba/sandbox/grubbs_test.py
 simba/sandbox/hartley_fmax.py
 simba/sandbox/hausdorff.py
 simba/sandbox/heading.py
 simba/sandbox/horizontal_videos_concat.py
 simba/sandbox/img_stack_to_bw.py
 simba/sandbox/isolation_forest.py
+simba/sandbox/jaccard_distance.py
 simba/sandbox/joint_plotter.py
+simba/sandbox/lbp.py
 simba/sandbox/lcs.py
 simba/sandbox/line_locate_point.py
 simba/sandbox/line_plot.py
 simba/sandbox/line_plot_plotly.py
 simba/sandbox/linear_fretchet.py
 simba/sandbox/linestring_path.py
 simba/sandbox/madmedianrule.py
+simba/sandbox/mahalanobis.py
 simba/sandbox/make_path_plot.py
 simba/sandbox/make_splash.py
+simba/sandbox/manhattan_distance.py
 simba/sandbox/margalef_diversification_index.py
 simba/sandbox/mcnamar.py
 simba/sandbox/menhinicks_index.py
 simba/sandbox/mosaic.py
 simba/sandbox/multiframe_is_shape_covered.py
 simba/sandbox/multifrm_to_points.py
 simba/sandbox/mutual_exclusive.py
@@ -417,14 +427,15 @@
 simba/sandbox/piotr_120324 3.py.zip
 simba/sandbox/piotr_120324 4.py.zip
 simba/sandbox/piotr_120324.py
 simba/sandbox/piotr_120324.py.zip
 simba/sandbox/plotly_gantt.py
 simba/sandbox/read_in_mp.py
 simba/sandbox/redis.py
+simba/sandbox/relative_risk.py
 simba/sandbox/roi_definition_csvs_to_h5.py
 simba/sandbox/roi_definition_csvs_to_h5.py.zip
 simba/sandbox/roi_feature_visualizer_example.py
 simba/sandbox/roi_feature_visualizer_example.py.zip
 simba/sandbox/rotate image.py
 simba/sandbox/runs_test.py
 simba/sandbox/segment_image_horizontal.py
@@ -454,14 +465,15 @@
 simba/sandbox/vertical_video_concatenator.py
 simba/sandbox/video_color.py
 simba/sandbox/video_rotator.py
 simba/sandbox/video_rotator_mp.py
 simba/sandbox/violin.py
 simba/sandbox/wald_wolfowitz.py
 simba/sandbox/wilcoxon.py
+simba/sandbox/youden_j.py
 simba/third_party_label_appenders/.DS_Store
 simba/third_party_label_appenders/BENTO_appender.py
 simba/third_party_label_appenders/BORIS_appender.py
 simba/third_party_label_appenders/__init__.py
 simba/third_party_label_appenders/boris_source_cleaner.py
 simba/third_party_label_appenders/deepethogram_importer.py
 simba/third_party_label_appenders/ethovision_import.py
@@ -577,15 +589,17 @@
 simba/utils/warnings.py
 simba/utils/cli/__init__.py
 simba/utils/cli/cli_tools.py
 simba/video_processors/.DS_Store
 simba/video_processors/__init__.py
 simba/video_processors/batch_process_create_ffmpeg_commands.py
 simba/video_processors/batch_process_menus.py
+simba/video_processors/brightness_contrast_ui.py
 simba/video_processors/calculate_px_dist.py
+simba/video_processors/clahe_ui.py
 simba/video_processors/extract_frames.py
 simba/video_processors/extract_seqframes.py
 simba/video_processors/multi_cropper.py
 simba/video_processors/px_to_mm.py
 simba/video_processors/roi_selector.py
 simba/video_processors/roi_selector_circle.py
 simba/video_processors/roi_selector_polygon.py
```

### Comparing `Simba-UW-tf-dev-1.91.5/Simba_UW_tf_dev.egg-info/requires.txt` & `Simba-UW-tf-dev-1.91.6/Simba_UW_tf_dev.egg-info/requires.txt`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/LICENSE` & `Simba-UW-tf-dev-1.91.6/LICENSE`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_data_processors.py` & `Simba-UW-tf-dev-1.91.6/tests/test_data_processors.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_circlular_stats.py` & `Simba-UW-tf-dev-1.91.6/tests/test_circlular_stats.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_stats.py` & `Simba-UW-tf-dev-1.91.6/tests/test_stats.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_train_model_mixin.py` & `Simba-UW-tf-dev-1.91.6/tests/test_train_model_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_feature_extraction_mixin.py` & `Simba-UW-tf-dev-1.91.6/tests/test_feature_extraction_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_utils_data.py` & `Simba-UW-tf-dev-1.91.6/tests/test_utils_data.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_config_reader_mixin.py` & `Simba-UW-tf-dev-1.91.6/tests/test_config_reader_mixin.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_outlier_correctors.py` & `Simba-UW-tf-dev-1.91.6/tests/test_outlier_correctors.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_featurizers.py` & `Simba-UW-tf-dev-1.91.6/tests/test_featurizers.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_video_processors.py` & `Simba-UW-tf-dev-1.91.6/tests/test_video_processors.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_thirdparty_appenders.py` & `Simba-UW-tf-dev-1.91.6/tests/test_thirdparty_appenders.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_validation_clips.py` & `Simba-UW-tf-dev-1.91.6/tests/test_validation_clips.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/tests/test_roi_tools.py` & `Simba-UW-tf-dev-1.91.6/tests/test_roi_tools.py`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/README.md` & `Simba-UW-tf-dev-1.91.6/README.md`

 * *Files identical despite different names*

### Comparing `Simba-UW-tf-dev-1.91.5/setup.py` & `Simba-UW-tf-dev-1.91.6/setup.py`

 * *Files 8% similar despite different names*

```diff
@@ -13,15 +13,15 @@
 with open("requirements.txt", "r") as f:
     requirements = f.read().splitlines()
 
 exclusion_patterns = ["pose_configurations_archive"]
 
 setuptools.setup(
     name="Simba-UW-tf-dev",
-    version="1.91.5",
+    version="1.91.6",
     author="Simon Nilsson, Jia Jie Choong, Sophia Hwang",
     author_email="sronilsson@gmail.com",
     description="Toolkit for computer classification of behaviors in experimental animals",
     long_description=long_description,
     long_description_content_type="text/markdown",
     url="https://github.com/sgoldenlab/simba",
     install_requires=requirements,
```

