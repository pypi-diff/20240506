# Comparing `tmp/ragfmk-0.1.4.2-py3-none-any.whl.zip` & `tmp/ragfmk-0.1.4.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,39 +1,41 @@
-Zip file size: 30715 bytes, number of entries: 37
--rw-rw-rw-  2.0 fat     3622 b- defN 24-Apr-30 09:43 RagAdhocQueryDoc.py
--rw-rw-rw-  2.0 fat     1694 b- defN 24-Apr-30 09:42 RagPrompt.py
+Zip file size: 33003 bytes, number of entries: 39
+-rw-rw-rw-  2.0 fat     3657 b- defN 24-May-05 14:22 RagAdhocQueryDoc.py
+-rw-rw-rw-  2.0 fat     1743 b- defN 24-May-05 14:25 RagPrompt.py
+-rw-rw-rw-  2.0 fat     2239 b- defN 24-May-05 15:56 RagTest.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Dec-21 09:21 __init__.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Dec-21 09:21 ragfmk/__init__.py
--rw-rw-rw-  2.0 fat     9012 b- defN 24-May-01 14:39 ragfmk/rag.py
--rw-rw-rw-  2.0 fat     2641 b- defN 24-Apr-30 13:30 ragfmk/ragChromaDB.py
--rw-rw-rw-  2.0 fat     3720 b- defN 24-Apr-30 07:36 ragfmk/ragFAISS.py
+-rw-rw-rw-  2.0 fat     9048 b- defN 24-May-05 14:19 ragfmk/rag.py
+-rw-rw-rw-  2.0 fat     2653 b- defN 24-May-05 14:19 ragfmk/ragChromaDB.py
+-rw-rw-rw-  2.0 fat     3732 b- defN 24-May-05 14:16 ragfmk/ragFAISS.py
 -rw-rw-rw-  2.0 fat        0 b- defN 24-Mar-25 16:16 ragfmk/elements/__init__.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Dec-21 09:21 ragfmk/elements/embeddings/__init__.py
--rw-rw-rw-  2.0 fat     3759 b- defN 24-May-02 11:49 ragfmk/elements/embeddings/embeddings.py
--rw-rw-rw-  2.0 fat     1226 b- defN 24-Apr-29 15:51 ragfmk/elements/embeddings/stEmbeddings.py
+-rw-rw-rw-  2.0 fat     3973 b- defN 24-May-05 15:58 ragfmk/elements/embeddings/embeddings.py
+-rw-rw-rw-  2.0 fat     2244 b- defN 24-May-05 16:00 ragfmk/elements/embeddings/ollamaEmbeddings.py
+-rw-rw-rw-  2.0 fat     1486 b- defN 24-May-05 15:58 ragfmk/elements/embeddings/stEmbeddings.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Dec-21 09:21 ragfmk/elements/llms/__init__.py
 -rw-rw-rw-  2.0 fat     1245 b- defN 24-Apr-27 09:28 ragfmk/elements/llms/ollama.py
--rw-rw-rw-  2.0 fat     3390 b- defN 24-May-01 15:46 ragfmk/elements/simsearchengines/ChromaDBWrapper.py
--rw-rw-rw-  2.0 fat     4752 b- defN 24-May-01 16:06 ragfmk/elements/simsearchengines/FAISSWrapper.py
+-rw-rw-rw-  2.0 fat     3398 b- defN 24-May-05 14:18 ragfmk/elements/simsearchengines/ChromaDBWrapper.py
+-rw-rw-rw-  2.0 fat     4822 b- defN 24-May-05 14:17 ragfmk/elements/simsearchengines/FAISSWrapper.py
 -rw-rw-rw-  2.0 fat        0 b- defN 24-Mar-25 16:16 ragfmk/elements/simsearchengines/__init__.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Dec-21 09:21 ragfmk/elements/wrappers/__init__.py
--rw-rw-rw-  2.0 fat     3155 b- defN 24-May-01 15:45 ragfmk/elements/wrappers/chunks.py
--rw-rw-rw-  2.0 fat     7519 b- defN 24-May-01 15:43 ragfmk/elements/wrappers/document.py
--rw-rw-rw-  2.0 fat     3128 b- defN 24-May-02 09:08 ragfmk/elements/wrappers/nearest.py
--rw-rw-rw-  2.0 fat     1850 b- defN 24-May-01 15:39 ragfmk/elements/wrappers/prompt.py
+-rw-rw-rw-  2.0 fat     3163 b- defN 24-May-05 14:17 ragfmk/elements/wrappers/chunks.py
+-rw-rw-rw-  2.0 fat     7531 b- defN 24-May-05 14:18 ragfmk/elements/wrappers/document.py
+-rw-rw-rw-  2.0 fat     3136 b- defN 24-May-05 14:18 ragfmk/elements/wrappers/nearest.py
+-rw-rw-rw-  2.0 fat     1858 b- defN 24-May-05 14:18 ragfmk/elements/wrappers/prompt.py
 -rw-rw-rw-  2.0 fat      740 b- defN 24-May-01 15:19 ragfmk/interfaces/IChunks.py
 -rw-rw-rw-  2.0 fat      425 b- defN 24-May-01 15:19 ragfmk/interfaces/IDocument.py
 -rw-rw-rw-  2.0 fat      748 b- defN 24-May-02 11:49 ragfmk/interfaces/IEmbeddings.py
 -rw-rw-rw-  2.0 fat      895 b- defN 24-May-02 09:04 ragfmk/interfaces/INearest.py
 -rw-rw-rw-  2.0 fat      581 b- defN 24-May-01 15:19 ragfmk/interfaces/IPrompt.py
 -rw-rw-rw-  2.0 fat     1230 b- defN 24-May-01 15:19 ragfmk/interfaces/IRag.py
--rw-rw-rw-  2.0 fat     1809 b- defN 24-May-01 15:14 ragfmk/utils/CONST.py
+-rw-rw-rw-  2.0 fat     1844 b- defN 24-May-05 15:52 ragfmk/utils/CONST.py
 -rw-rw-rw-  2.0 fat        0 b- defN 24-Mar-25 16:16 ragfmk/utils/__init__.py
--rw-rw-rw-  2.0 fat     1864 b- defN 24-Apr-29 06:35 ragfmk/utils/log.py
+-rw-rw-rw-  2.0 fat     1933 b- defN 24-May-05 14:19 ragfmk/utils/log.py
 -rw-rw-rw-  2.0 fat     1907 b- defN 24-Apr-22 13:53 ragfmk/utils/milestone.py
--rw-rw-rw-  2.0 fat     1091 b- defN 24-May-02 11:50 ragfmk-0.1.4.2.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     8593 b- defN 24-May-02 11:50 ragfmk-0.1.4.2.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 24-May-02 11:50 ragfmk-0.1.4.2.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       86 b- defN 24-May-02 11:50 ragfmk-0.1.4.2.dist-info/entry_points.txt
--rw-rw-rw-  2.0 fat       43 b- defN 24-May-02 11:50 ragfmk-0.1.4.2.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     3125 b- defN 24-May-02 11:50 ragfmk-0.1.4.2.dist-info/RECORD
-37 files, 73942 bytes uncompressed, 25671 bytes compressed:  65.3%
+-rw-rw-rw-  2.0 fat     1091 b- defN 24-May-06 08:02 ragfmk-0.1.4.3.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     8593 b- defN 24-May-06 08:02 ragfmk-0.1.4.3.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-May-06 08:02 ragfmk-0.1.4.3.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       86 b- defN 24-May-06 08:02 ragfmk-0.1.4.3.dist-info/entry_points.txt
+-rw-rw-rw-  2.0 fat       51 b- defN 24-May-06 08:02 ragfmk-0.1.4.3.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     3295 b- defN 24-May-06 08:02 ragfmk-0.1.4.3.dist-info/RECORD
+39 files, 79439 bytes uncompressed, 27695 bytes compressed:  65.1%
```

## zipnote {}

```diff
@@ -1,13 +1,16 @@
 Filename: RagAdhocQueryDoc.py
 Comment: 
 
 Filename: RagPrompt.py
 Comment: 
 
+Filename: RagTest.py
+Comment: 
+
 Filename: __init__.py
 Comment: 
 
 Filename: ragfmk/__init__.py
 Comment: 
 
 Filename: ragfmk/rag.py
@@ -24,14 +27,17 @@
 
 Filename: ragfmk/elements/embeddings/__init__.py
 Comment: 
 
 Filename: ragfmk/elements/embeddings/embeddings.py
 Comment: 
 
+Filename: ragfmk/elements/embeddings/ollamaEmbeddings.py
+Comment: 
+
 Filename: ragfmk/elements/embeddings/stEmbeddings.py
 Comment: 
 
 Filename: ragfmk/elements/llms/__init__.py
 Comment: 
 
 Filename: ragfmk/elements/llms/ollama.py
@@ -87,26 +93,26 @@
 
 Filename: ragfmk/utils/log.py
 Comment: 
 
 Filename: ragfmk/utils/milestone.py
 Comment: 
 
-Filename: ragfmk-0.1.4.2.dist-info/LICENSE
+Filename: ragfmk-0.1.4.3.dist-info/LICENSE
 Comment: 
 
-Filename: ragfmk-0.1.4.2.dist-info/METADATA
+Filename: ragfmk-0.1.4.3.dist-info/METADATA
 Comment: 
 
-Filename: ragfmk-0.1.4.2.dist-info/WHEEL
+Filename: ragfmk-0.1.4.3.dist-info/WHEEL
 Comment: 
 
-Filename: ragfmk-0.1.4.2.dist-info/entry_points.txt
+Filename: ragfmk-0.1.4.3.dist-info/entry_points.txt
 Comment: 
 
-Filename: ragfmk-0.1.4.2.dist-info/top_level.txt
+Filename: ragfmk-0.1.4.3.dist-info/top_level.txt
 Comment: 
 
-Filename: ragfmk-0.1.4.2.dist-info/RECORD
+Filename: ragfmk-0.1.4.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## RagAdhocQueryDoc.py

```diff
@@ -1,10 +1,12 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
+import sys
+sys.path.append("./")
 
 import argparse
 from ragfmk.ragFAISS import ragFAISS
 import ragfmk.utils.CONST as C
 from ragfmk.elements.wrappers.chunks import chunks
 
 """
```

## RagPrompt.py

```diff
@@ -1,15 +1,18 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
+import sys
+sys.path.append("./")
+
 import argparse
-from ragfmk.rag import rag
-import ragfmk.utils.CONST as C
-from ragfmk.elements.wrappers.nearest import nearest
+from src.ragfmk.rag import rag
+import src.ragfmk.utils.CONST as C
+from src.ragfmk.elements.wrappers.nearest import nearest
 
 ARG_PROMPT = ["prompt", "Prompt to send to the LLM"]
 ARG_PROMPT_TEMPLATE = ["template", "Prompt template to use when building the prompt (must contain {prompt} and {context}"]
 ARG_NEARESTFILE = ["nfile", "JSON file path which contains the nearest chunks/texts"]
 
 """
     Build a prompt based on a template. The template must contain the {context} and {prompt} tags inside.
```

## ragfmk/rag.py

```diff
@@ -1,20 +1,20 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
-from ragfmk.elements.wrappers.document import document
-from ragfmk.elements.llms.ollama import ollama
-from ragfmk.elements.wrappers.prompt import prompt
-from ragfmk.utils.milestone import milestone
-from ragfmk.elements.embeddings.stEmbeddings import stEmbeddings
-from ragfmk.elements.wrappers.chunks import chunks
-from ragfmk.utils.log import log
-from ragfmk.interfaces.IRag import IRag
-import ragfmk.utils.CONST as C
+from src.ragfmk.elements.wrappers.document import document
+from src.ragfmk.elements.llms.ollama import ollama
+from src.ragfmk.elements.wrappers.prompt import prompt
+from src.ragfmk.utils.milestone import milestone
+from src.ragfmk.elements.embeddings.stEmbeddings import stEmbeddings
+from src.ragfmk.elements.wrappers.chunks import chunks
+from src.ragfmk.utils.log import log
+from src.ragfmk.interfaces.IRag import IRag
+import src.ragfmk.utils.CONST as C
 import os
 
 class rag(IRag):
     def __init__(self):
         self.__milestones = milestone()
         try:
             self.__ragLogFileName = os.environ[C.RAGCLI_LOGFILE_ENV]
```

## ragfmk/ragChromaDB.py

```diff
@@ -1,14 +1,14 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
-from ragfmk.rag import rag
-from ragfmk.elements.simsearchengines.ChromaDBWrapper import ChromaDBWrapper
-import ragfmk.utils.CONST as C
+from src.ragfmk.rag import rag
+from src.ragfmk.elements.simsearchengines.ChromaDBWrapper import ChromaDBWrapper
+import src.ragfmk.utils.CONST as C
 
 class ragChromaDB(rag):
     def __init__(self):
         self.__mycdb = ChromaDBWrapper()
         self.__collectionName = "default"
         self.__hostname = C.CDB_DEFAULT_HOST
         self.__port = C.CDB_DEFAULT_PORT
```

## ragfmk/ragFAISS.py

```diff
@@ -1,15 +1,15 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
-from ragfmk.elements.simsearchengines.FAISSWrapper import FAISSWrapper
-from ragfmk.rag import rag
-from ragfmk.elements.wrappers.nearest import nearest
-import ragfmk.utils.CONST as C
+from src.ragfmk.elements.simsearchengines.FAISSWrapper import FAISSWrapper
+from src.ragfmk.rag import rag
+from src.ragfmk.elements.wrappers.nearest import nearest
+import src.ragfmk.utils.CONST as C
 
 """
     This FAISS implementation uses by default the sentence_transformer model (cf. C.EMBEDDING_MODEL) to create and manage embeddings
 """
 FAISS_INDEX_MEMORY = "memory"
 
 class ragFAISS(rag):
@@ -92,9 +92,8 @@
         try:
             self.addMilestone("FAISSLOAD", "Loading Similarity Search Engine (FAISS)")
             if (self.indexName != FAISS_INDEX_MEMORY):
                 self.__myfaiss.load(self.storagePath, self.indexName)
             return True
         except Exception as e:
             self.log.error("Error while loading FAISS index: {}".format(e))
-            return False
-
+            return False
```

## ragfmk/elements/embeddings/embeddings.py

```diff
@@ -1,23 +1,30 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
-import ragfmk.utils.CONST as C
 import json
 from numpyencoder import NumpyEncoder
-from ragfmk.interfaces.IEmbeddings import IEmbeddings
+from src.ragfmk.interfaces.IEmbeddings import IEmbeddings
+import src.ragfmk.utils.CONST as C
 
 """
         Embeddings and data are stored in Python list/JSON and used with the following format :
-        {0: {'text': 'The prompt or text', 
-             'embedding': array([-6.65125623e-02,  ..., -1.22626998e-01]) 
-            },
-        1: {'text': '...',  'embedding': array([...]) },
-        ...
+        {"0": {
+                'text': 'The prompt or text', 
+                'embedding': array([-6.65125623e-02,  
+                                    ..., 
+                                    -1.22626998e-01]) 
+              },
+        "1": {
+                'text': '...',  
+                'embedding': array([...]) 
+              },
+        ...,
+        "x" : { ... }
         }
 """
 
 class embeddings(IEmbeddings):
     def __init__(self):
         self.__content = {}
 
@@ -39,17 +46,17 @@
     @property
     def size(self):
         return len(self.__content)
         
     def encode(self, cks):
         """ to surcharge with the embeddings class
         Args:
-            cks (chunks): list of chunks to embed
+            cks ( array []): list of chunks to create embeddings for each  
         Returns:
-            json: vector embeddings
+            numpy.ndarray: vector embeddings
         """
         return None
 
     def __wrap(self, vectAndData):
         """ Wrap the Dataframe into a list (to have a json later)
         The Dataframe contains 2 columns: 
             1) text : with the data
@@ -76,15 +83,15 @@
         try: 
             vect = self.encode(cks)
             vectAndData = zip(cks.items, vect)
             self.__wrap(vectAndData)
             return True
         except Exception as e:
             return False
-        
+
     def save(self, filename) -> bool:
         """ Save the chunks in a file.
         Args:
             filename (_type_): JSON chunks file
         Returns:
             bool: True if ok
         """
```

## ragfmk/elements/embeddings/stEmbeddings.py

```diff
@@ -1,33 +1,49 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
 from sentence_transformers import SentenceTransformer
-import ragfmk.utils.CONST as C
-from ragfmk.elements.embeddings.embeddings import embeddings
+import src.ragfmk.utils.CONST as C
+from src.ragfmk.elements.embeddings.embeddings import embeddings
 
 """
-        Embeddings and data are stored in JSON and used with the following format :
-        {0: {'text': 'How many jobs Joe Biden wants to create ?', 
-             'embedding': array([-6.65125623e-02,  4.26685601e-01, -1.22626998e-01, -1.14275487e-02,
-                                -1.76032424e-01, -2.55425069e-02,  3.19633447e-02,  1.10126780e-02,
-                                -1.75059751e-01,  2.00320985e-02,  3.28031659e-01,  1.18581623e-01,
-                                -9.89666581e-02,  1.68430805e-01,  1.19766712e-01, -7.14423656e-02, ...] 
-            },
-        1: {'text': '...', 
-            'embedding': array([...]
-            },
-        ...
+        Embeddings and data are stored in Python list/JSON and used with the following format :
+        {"0": {
+                'text': 'The prompt or text', 
+                'embedding': array([-6.65125623e-02,  
+                                    ..., 
+                                    -1.22626998e-01]) 
+              },
+        "1": {
+                'text': '...',  
+                'embedding': array([...]) 
+              },
+        ...,
+        "x" : { ... }
         }
 """
 
 class stEmbeddings(embeddings):
     def __init__(self):
+        self.__embeddingsModel = C.EMBEDDING_MODEL
         super().__init__()
-        
+
+    @property
+    def model(self) -> str: 
+        return self.__embeddingsModel
+    @model.setter
+    def model(self, model):
+        self.__embeddingsModel = model
+
     def encode(self, cks):
+        """ to surcharge with the embeddings class
+        Args:
+            cks ( array []): list of chunks to create embeddings for each  
+        Returns:
+            numpy.ndarray: vector embeddings
+        """
         try:
-            encoder = SentenceTransformer(C.EMBEDDING_MODEL)
+            encoder = SentenceTransformer(self.__embeddingsModel)
             return encoder.encode(cks.items)
         except:
             return None
```

## ragfmk/elements/simsearchengines/ChromaDBWrapper.py

```diff
@@ -1,16 +1,16 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
 import chromadb
 from chromadb.utils import embedding_functions
-import ragfmk.utils.CONST as C
+import src.ragfmk.utils.CONST as C
 import pandas as pd
-from ragfmk.elements.wrappers.nearest import nearest
+from src.ragfmk.elements.wrappers.nearest import nearest
 
 """ 
     Leverage Chroma DB
     Starts server locally bveforehand: 
         $ chroma run --path D:/chromadb
 """
 embFunction = embedding_functions.SentenceTransformerEmbeddingFunction(model_name=C.CDB_DEFAULT_EMBEDDINGSMODEL_ST)
```

## ragfmk/elements/simsearchengines/FAISSWrapper.py

```diff
@@ -3,80 +3,84 @@
 __license__ = "MIT"
 
 import pandas as pd
 import numpy as np
 import faiss # pip install faiss-cpu (https://pypi.org/project/faiss-cpu/)
 import pickle
 import os
-import ragfmk.utils.CONST as C
-from ragfmk.elements.wrappers.nearest import nearest
+import src.ragfmk.utils.CONST as C
+from src.ragfmk.elements.wrappers.nearest import nearest
 
 """ 
     Leverage Meta FAISS
 """
 class FAISSWrapper:
     def __init__(self):
-        self.index = None   # FAISS Index
-        self.dfContent = pd.DataFrame(columns = [C.JST_TEXT, C.JST_EMBEDDINGS]) # real data that are indexed
+        self.__index = None   # FAISS Index
+        self.__dfContent = pd.DataFrame(columns = [C.JST_TEXT, C.JST_EMBEDDINGS]) # real data that are indexed
 
     def save(self, filepath="./backup/", name="faissbackup"):
         """ Save the FAISS index and the data (chunks)
         Args:
             filepath (str, optional): _description_. Defaults to "./backup/".
             name (str, optional): _description_. Defaults to "faissbackup".
         """
         datafile = os.path.join(filepath, name + ".data")
         indexfile = os.path.join(filepath, name + ".index")
         with open(datafile, "wb") as f:
-            pickle.dump(self.dfContent, f)
-        faiss.write_index(self.index, indexfile)
+            pickle.dump(self.__dfContent, f)
+        faiss.write_index(self.__index, indexfile)
 
     def load(self, filepath="./backup/", name="faissbackup"):
         """ Read the FAISS index and the data (chunks) saved previously
 
         Args:
             filepath (str, optional): _description_. Defaults to "./backup/".
             name (str, optional): _description_. Defaults to "faissbackup".
         """
         datafile = os.path.join(filepath, name + ".data")
         indexfile = os.path.join(filepath, name + ".index")
         with open(datafile, "rb") as f:
-            self.dfContent = pickle.load(f)
-        self.index = faiss.read_index(indexfile)
+            self.__dfContent = pickle.load(f)
+        self.__index = faiss.read_index(indexfile)
         
     @property
+    def size(self) -> int:
+        return self.__index.ntotal
+    
+    @property
     def ready(self) -> bool:
         """check if ready for searching for the NN
         Returns:
             bool: True if index ready
         """
         try:
-            return self.index.is_trained #and not self.dfContent.empty
+            return self.__index.is_trained #and not self.dfContent.empty
         except:
             return False
 
     def add(self, item):
         """ Index a new item
         Args:
             item (stEmbeddings): embeddings object to add into the index
         """
         # Get source data and JSON -> DF
         dfNewContent = pd.DataFrame(item.content).T
         embeddings = [ np.asarray(v) for v in dfNewContent[C.JST_EMBEDDINGS] ]
         self.__addToIndexFlatL2(embeddings)
         # Concat the content with the existing DF
-        self.dfContent = pd.concat([self.dfContent, dfNewContent])
+        self.__dfContent = pd.concat([self.__dfContent, dfNewContent])
 
     def __addToIndexFlatL2(self, embeddings):
         """
             Build a Flat L2 index
         """
         vout = self.__prepareEmbeddings(embeddings)
-        self.index = faiss.IndexFlatL2(vout.shape[1])
-        self.index.add(vout)
+        self.__index = faiss.IndexFlatL2(vout.shape[1])
+        self.__index.add(vout)
 
     def __prepareEmbeddings(self, vects):
         """ Prepare the embeddings for indexing
         Args:
             vects (array/embedding): vector
         Returns:
             array/embedding: vector prepared
@@ -100,20 +104,19 @@
             if (not self.ready):
                 raise Exception("The FAISS Index is not loaded properly.")
             # Get prompt vector only and normalize it
             prompt = vPrompt.content
             idx = "0" if (str(type(list(prompt.keys())[0])) == "<class 'str'>") else 0
             vector = self.__prepareEmbeddings([ prompt[idx][C.JST_EMBEDDINGS] ])
             # process the Similarity search
-            ktotal = self.index.ntotal
-            distances, ann = self.index.search(vector, k=ktotal)
+            distances, ann = self.__index.search(vector, k=k)
             # Sort search results and return a DataFrame
             results = pd.DataFrame({'distances': distances[0], 
                                     'ann': ann[0]})
-            self.dfContent.index = self.dfContent.index.astype(int)
-            merge = pd.merge(results, self.dfContent, left_on='ann', right_index=True)
+            self.__dfContent.index = self.__dfContent.index.astype(int)
+            merge = pd.merge(results, self.__dfContent, left_on='ann', right_index=True)
             nr = nearest()
-            nr.items = merge[:k]["text"].to_list()
-            nr.distances = merge[:k]["distances"].to_list()
+            nr.items = merge["text"].to_list()
+            nr.distances = merge["distances"].to_list()
             return nr
         except Exception as e:
             raise
```

## ragfmk/elements/wrappers/chunks.py

```diff
@@ -1,15 +1,15 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
 import json
 from numpyencoder import NumpyEncoder
-import ragfmk.utils.CONST as C
-from ragfmk.interfaces.IChunks import IChunks
+import src.ragfmk.utils.CONST as C
+from src.ragfmk.interfaces.IChunks import IChunks
 
 """ Manages the Chunks file structure (JSON)
     Content = {"chunks": [..., ...] }
 """
 
 class chunks(IChunks):
     def __init__(self):
```

## ragfmk/elements/wrappers/document.py

```diff
@@ -2,17 +2,17 @@
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
 import fitz # pip install PyMuPDF
 from langchain.text_splitter import CharacterTextSplitter
 from langchain_experimental.text_splitter import SemanticChunker
 from langchain_community.embeddings import HuggingFaceEmbeddings
-from ragfmk.elements.wrappers.chunks import chunks
-from ragfmk.interfaces.IDocument import IDocument
-import ragfmk.utils.CONST as C
+from src.ragfmk.elements.wrappers.chunks import chunks
+from src.ragfmk.interfaces.IDocument import IDocument
+import src.ragfmk.utils.CONST as C
 import os
 import mimetypes
 import requests
 import time
 
 class document(IDocument):
     def __init__(self):
```

## ragfmk/elements/wrappers/nearest.py

```diff
@@ -1,15 +1,15 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
-import ragfmk.utils.CONST as C
+import src.ragfmk.utils.CONST as C
 import json
 from numpyencoder import NumpyEncoder
-from ragfmk.interfaces.INearest import INearest
+from src.ragfmk.interfaces.INearest import INearest
 
 """ Manages the Chunks file structure (JSON)
     Content = {"chunks": [..., ...] }
 """
 
 class nearest(INearest):
     def __init__(self):
```

## ragfmk/elements/wrappers/prompt.py

```diff
@@ -1,13 +1,13 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
-import ragfmk.utils.CONST as C
-from ragfmk.interfaces.IPrompt import IPrompt
+import src.ragfmk.utils.CONST as C
+from src.ragfmk.interfaces.IPrompt import IPrompt
 from jinja2 import Template
 
 class prompt(IPrompt):
     def __init__(self, question, similarItems):
         self.__question = question
         self.__similarItems = similarItems  # list (nearest)
         self.__template = C.PROMPT_RAG_JINJA_TEMPLATE
```

## ragfmk/utils/CONST.py

```diff
@@ -21,14 +21,15 @@
 FAISS_DEFAULT_STORE = "./vstore"
 
 # LLM stuff
 SEMCHUNK_EMBEDDING_MODEL = "sentence-transformers/all-mpnet-base-v2"
 EMBEDDING_MODEL = "paraphrase-mpnet-base-v2"
 OLLAMA_LOCAL_URL = "http://localhost:11434/api"
 OLLAMA_DEFAULT_LLM = "tinydolphin"
+OLLAMA_DEFAULT_EMB = "all-minilm"
 LLM_DEFAULT_TEMPERATURE = 0.9
 SM_DEFAULT_NEAREST = 3
 CHKS_DEFAULT_SIZE = 500
 CHKS_DEFAULT_OVERLAP = 50
 CHKS_DEFAULT_SEP = "."
 
 # JSON "tags" for chunks & embeddings
```

## ragfmk/utils/log.py

```diff
@@ -1,14 +1,14 @@
 __author__ = "Benoit CAYLA"
 __email__ = "benoit@datacorner.fr"
 __license__ = "MIT"
 
 import logging
 from logging.handlers import RotatingFileHandler
-import ragfmk.utils.CONST as C
+import src.ragfmk.utils.CONST as C
 
 class log:
     def __init__(self, 
                  loggerName = C.TRACE_LOGGER, 
                  logfilename = C.TRACE_FILENAME, 
                  level = C.TRACE_DEFAULT_LEVEL, 
                  format = C.TRACE_DEFAULT_FORMAT):
@@ -18,35 +18,39 @@
                                          maxBytes= C.TRACE_MAXBYTES, 
                                          backupCount=10, 
                                          encoding=C.ENCODING)
         handler.setFormatter(logging.Formatter(format))
         self.__logger.setLevel(level)
         self.__logger.addHandler(handler)
 
+    @property
+    def logger(self):
+        return self.__logger
+    
     def display(self, message):
         print(message)
     
     def buildMessage(self, _msg):
         final_message = ""
         for msg in _msg:
             final_message += str(msg)
         return final_message
     
     def info(self, *message):
         final_message = self.buildMessage(message)
         self.display("Info: " + final_message)
-        self.__logger.info(final_message)
+        self.logger.info(final_message)
 
     def error(self, *message):
         final_message = self.buildMessage(message)
         self.display("Error: " + final_message)
-        self.__logger.error(final_message)
+        self.logger.error(final_message)
 
     def debug(self, *message):
         final_message = self.buildMessage(message)
-        self.display("Debug:> " + final_message)
-        self.__logger.debug(final_message)
+        self.display("Debug: " + final_message)
+        self.logger.debug(final_message)
 
     def warning(self, *message):
         final_message = self.buildMessage(message)
         self.display("Warning: " + final_message)
-        self.__logger.warning(final_message)
+        self.logger.warning(final_message)
```

## Comparing `ragfmk-0.1.4.2.dist-info/LICENSE` & `ragfmk-0.1.4.3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `ragfmk-0.1.4.2.dist-info/METADATA` & `ragfmk-0.1.4.3.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ragfmk
-Version: 0.1.4.2
+Version: 0.1.4.3
 Summary: Lightweight RAG Framework: Simple and Scalable Framework with Efficient Embeddings. Leverage: FAISS, ChromaDB, and Ollama.
 Author-email: Benoit Cayla <benoit@datacorner.fr>
 License: MIT License
         
         Copyright (c) 2023 Benoît Cayla
         
         Permission is hereby granted, free of charge, to any person obtaining a copy
```

## Comparing `ragfmk-0.1.4.2.dist-info/RECORD` & `ragfmk-0.1.4.3.dist-info/RECORD`

 * *Files 11% similar despite different names*

```diff
@@ -1,37 +1,39 @@
-RagAdhocQueryDoc.py,sha256=wkfGzr5lz1MFEyBjK1-ZT7hkGhuMrz0swHV2kWvyADk,3622
-RagPrompt.py,sha256=Rk2dMZq3lQ8RCnbm7sXeKwEjFH8ABX7YmUh6tgNkQ-A,1694
+RagAdhocQueryDoc.py,sha256=ncPLYMFoU9ky5jYaXPyJ-J0bi5v-mJXUIzbjBfEV2Yw,3657
+RagPrompt.py,sha256=Xs1uhOexM0oc4KJk6EmE2eihr_o5y9Hf42VfAQiC8Dc,1743
+RagTest.py,sha256=lOtSF1MOmkDc2fMIpcICHOowgEMROMCg_b-PS-B_ZC8,2239
 __init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ragfmk/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-ragfmk/rag.py,sha256=X8wtfcyY8CBxaLu8irBTCSC-JgJhq7JU5GQS844F0kY,9012
-ragfmk/ragChromaDB.py,sha256=LSyPDjYeTyDsmEmHPKJ-8GT136qFJO5hz1wizr9CGDk,2641
-ragfmk/ragFAISS.py,sha256=sM9I0b7uhCn4AOwlmPwVwURgCSJTntVBLi3WVe_OkcQ,3720
+ragfmk/rag.py,sha256=C1d6qyRV4hTwvZ8Pvn81V6dxa42p6YDrTsW_6kfuDCU,9048
+ragfmk/ragChromaDB.py,sha256=7jADr4dpsdb-3QECLUvBytdGf8entRdvmLWTzyC_tXY,2653
+ragfmk/ragFAISS.py,sha256=oRSxaLwlG7bIQbLt6Yl6fD1CLVogh8BUFWEUaz4vQIU,3732
 ragfmk/elements/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ragfmk/elements/embeddings/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-ragfmk/elements/embeddings/embeddings.py,sha256=rtoahyWUOP6mf3f-JeU2-QAhrEvj_Ja_KAj2Lv2MjaU,3759
-ragfmk/elements/embeddings/stEmbeddings.py,sha256=H-mRWBh3CNxQ3HqAylPLqsZHtVz7jq_rFKfwFmBZPUY,1226
+ragfmk/elements/embeddings/embeddings.py,sha256=kcB7bIYcoAw9Fve6WFpsHk_2104r62M-2AY2nDW8W44,3973
+ragfmk/elements/embeddings/ollamaEmbeddings.py,sha256=dEGGYm2T-Q2Wy7vhjlSTu6K3fEdY0LjajrhEQZA8Ox8,2244
+ragfmk/elements/embeddings/stEmbeddings.py,sha256=5Srv_4vXMwucxYyNLrcXk1J1Dq0ccTkx960mnLR-s-I,1486
 ragfmk/elements/llms/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ragfmk/elements/llms/ollama.py,sha256=q78U-2bh4qk-JuO1lM8reMsrA1SG12k6KRyWkrsf8dg,1245
-ragfmk/elements/simsearchengines/ChromaDBWrapper.py,sha256=mtNMIWED5V1aY36vIvGk4pnqo0gTQoMEN_dDzd3mv-Q,3390
-ragfmk/elements/simsearchengines/FAISSWrapper.py,sha256=sLtur6km0kOS0ULXTYC-f9oSwX4P5hzb8IsachSY1zA,4752
+ragfmk/elements/simsearchengines/ChromaDBWrapper.py,sha256=fP8trszC67vy1jHWxs9M2N45AVmSoBpfeOVZNP_ogpc,3398
+ragfmk/elements/simsearchengines/FAISSWrapper.py,sha256=PdIiDkCG2gMIY1DZz5BwfKVJz6dL68jeZlOsFs8ZGAY,4822
 ragfmk/elements/simsearchengines/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ragfmk/elements/wrappers/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-ragfmk/elements/wrappers/chunks.py,sha256=BE09nzR2lwo8fmI59EsMhAnB6qn-go-2KCaWufy7iSY,3155
-ragfmk/elements/wrappers/document.py,sha256=94to3cUwiypdcLwlDHwEtcy1d4W6EdTDkOf79juWRUE,7519
-ragfmk/elements/wrappers/nearest.py,sha256=ZDsjrOTFwkleFVMBnRe0vclaiypzG4pNyqCaICXmkBM,3128
-ragfmk/elements/wrappers/prompt.py,sha256=tsOH_Z8XRxuHhz7EmzEmfJdYxuYd99D4Eo0EgBM2-kE,1850
+ragfmk/elements/wrappers/chunks.py,sha256=2Wvmm4EahwoZMUUcIZC74wzfVz8cxY6se62CjZQ5v14,3163
+ragfmk/elements/wrappers/document.py,sha256=LZKTgS4I_Ph_UvOez7D7JvQC-EHFOFY3cqJk5X_3H_s,7531
+ragfmk/elements/wrappers/nearest.py,sha256=xGWOk6pvkYPmGm4pxE7hjxXwl6yy8iWHgIVHVBOH3ok,3136
+ragfmk/elements/wrappers/prompt.py,sha256=jFS2tlcm4VF5fyrhTDtPENjz2lCNd0GtO9_nIcfNSxw,1858
 ragfmk/interfaces/IChunks.py,sha256=1dBqYCEXgWiNQAiteQHcG-ZQ_uCluUPaGXCyBSMXZto,740
 ragfmk/interfaces/IDocument.py,sha256=0KrP-0szl8qHDH1TyC5opBqxTJV1dAIe9nTeNetiUR0,425
 ragfmk/interfaces/IEmbeddings.py,sha256=nRpdaz6Ms1wJ48GHvK7rgUO_ict8zcAaFYYel6jgE-w,748
 ragfmk/interfaces/INearest.py,sha256=DvPacdOW7lRzzX7MpdyvF3SlczjIlyxYrrQ-HcSV4bg,895
 ragfmk/interfaces/IPrompt.py,sha256=pZf8xQlKUw5s2Q4MSyxfpIQyNXGb6fjDwf9S1KAK9jg,581
 ragfmk/interfaces/IRag.py,sha256=-8OGjnOn_6G3kt5B_RP0x6oWQiPXo7Rdf9EJcNZ4YnI,1230
-ragfmk/utils/CONST.py,sha256=tnSe9eld3sfCd3JXveqrhEdx0-xrOGYirIP5KNx6ybE,1809
+ragfmk/utils/CONST.py,sha256=9Nz0_GTnGBCXiDoq2HNOEFVjH_pxlbBMnwzLC7GIfro,1844
 ragfmk/utils/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-ragfmk/utils/log.py,sha256=39zWFAuL5vZ1RGFhEFPZ5rCmUg32AdlYuUae5lRGHEU,1864
+ragfmk/utils/log.py,sha256=M0q4NJjvf8PQPjhD4Q1B8JGByrKmFZn2V6OslYtkZLw,1933
 ragfmk/utils/milestone.py,sha256=dA5T_0QVWtHv3HaAFVZkKCEdRDS2SQSJsi7g0e_glGw,1907
-ragfmk-0.1.4.2.dist-info/LICENSE,sha256=BvMmeujpLDerNqzsA1gOET7mphtef9ebt_u8-bp4bNA,1091
-ragfmk-0.1.4.2.dist-info/METADATA,sha256=zz_1Oo1xTFjnqR5Kahp608zZkEJpU0OXHSFxDR2ug88,8593
-ragfmk-0.1.4.2.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-ragfmk-0.1.4.2.dist-info/entry_points.txt,sha256=EDEdK3AmGTz0ZLfXx10aBUy50jxn6Uy3isBcmPkE3jg,86
-ragfmk-0.1.4.2.dist-info/top_level.txt,sha256=6NrWPkR5zCFIJnz9grec4DG39Znl2xhbQklrnns9kZ4,43
-ragfmk-0.1.4.2.dist-info/RECORD,,
+ragfmk-0.1.4.3.dist-info/LICENSE,sha256=BvMmeujpLDerNqzsA1gOET7mphtef9ebt_u8-bp4bNA,1091
+ragfmk-0.1.4.3.dist-info/METADATA,sha256=ZlC2pEhPSZRnUQWEvmxWiyIlPHNJRjaVeRMrsOGuaz4,8593
+ragfmk-0.1.4.3.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+ragfmk-0.1.4.3.dist-info/entry_points.txt,sha256=EDEdK3AmGTz0ZLfXx10aBUy50jxn6Uy3isBcmPkE3jg,86
+ragfmk-0.1.4.3.dist-info/top_level.txt,sha256=LlNlUm1ce3g4y9ARq9Q4C-19JnDcERKf-aDueiUfWG8,51
+ragfmk-0.1.4.3.dist-info/RECORD,,
```

